var vE=Object.defineProperty;var xE=(e,t,o)=>t in e?vE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var td=(e,t,o)=>xE(e,typeof t!="symbol"?t+"":t,o);function bE(e,t){for(var o=0;o<t.length;o++){const l=t[o];if(typeof l!="string"&&!Array.isArray(l)){for(const p in l)if(p!=="default"&&!(p in e)){const m=Object.getOwnPropertyDescriptor(l,p);m&&Object.defineProperty(e,p,m.get?m:{enumerable:!0,get:()=>l[p]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))l(p);new MutationObserver(p=>{for(const m of p)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function o(p){const m={};return p.integrity&&(m.integrity=p.integrity),p.referrerPolicy&&(m.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?m.credentials="include":p.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(p){if(p.ep)return;p.ep=!0;const m=o(p);fetch(p.href,m)}})();var wE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q2={exports:{}},Wm={},Z2={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp=Symbol.for("react.element"),SE=Symbol.for("react.portal"),CE=Symbol.for("react.fragment"),TE=Symbol.for("react.strict_mode"),kE=Symbol.for("react.profiler"),IE=Symbol.for("react.provider"),EE=Symbol.for("react.context"),PE=Symbol.for("react.forward_ref"),ME=Symbol.for("react.suspense"),AE=Symbol.for("react.memo"),zE=Symbol.for("react.lazy"),w1=Symbol.iterator;function RE(e){return e===null||typeof e!="object"?null:(e=w1&&e[w1]||e["@@iterator"],typeof e=="function"?e:null)}var X2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K2=Object.assign,Y2={};function Bu(e,t,o){this.props=e,this.context=t,this.refs=Y2,this.updater=o||X2}Bu.prototype.isReactComponent={};Bu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function J2(){}J2.prototype=Bu.prototype;function ix(e,t,o){this.props=e,this.context=t,this.refs=Y2,this.updater=o||X2}var ox=ix.prototype=new J2;ox.constructor=ix;K2(ox,Bu.prototype);ox.isPureReactComponent=!0;var S1=Array.isArray,Q2=Object.prototype.hasOwnProperty,sx={current:null},eS={key:!0,ref:!0,__self:!0,__source:!0};function tS(e,t,o){var l,p={},m=null,g=null;if(t!=null)for(l in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(m=""+t.key),t)Q2.call(t,l)&&!eS.hasOwnProperty(l)&&(p[l]=t[l]);var u=arguments.length-2;if(u===1)p.children=o;else if(1<u){for(var I=Array(u),M=0;M<u;M++)I[M]=arguments[M+2];p.children=I}if(e&&e.defaultProps)for(l in u=e.defaultProps,u)p[l]===void 0&&(p[l]=u[l]);return{$$typeof:sp,type:e,key:m,ref:g,props:p,_owner:sx.current}}function DE(e,t){return{$$typeof:sp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ax(e){return typeof e=="object"&&e!==null&&e.$$typeof===sp}function LE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return t[o]})}var C1=/\/+/g;function s_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?LE(""+e.key):t.toString(36)}function Xf(e,t,o,l,p){var m=typeof e;(m==="undefined"||m==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(m){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case sp:case SE:g=!0}}if(g)return g=e,p=p(g),e=l===""?"."+s_(g,0):l,S1(p)?(o="",e!=null&&(o=e.replace(C1,"$&/")+"/"),Xf(p,t,o,"",function(M){return M})):p!=null&&(ax(p)&&(p=DE(p,o+(!p.key||g&&g.key===p.key?"":(""+p.key).replace(C1,"$&/")+"/")+e)),t.push(p)),1;if(g=0,l=l===""?".":l+":",S1(e))for(var u=0;u<e.length;u++){m=e[u];var I=l+s_(m,u);g+=Xf(m,t,o,I,p)}else if(I=RE(e),typeof I=="function")for(e=I.call(e),u=0;!(m=e.next()).done;)m=m.value,I=l+s_(m,u++),g+=Xf(m,t,o,I,p);else if(m==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function Sf(e,t,o){if(e==null)return e;var l=[],p=0;return Xf(e,l,"","",function(m){return t.call(o,m,p++)}),l}function BE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Mi={current:null},Kf={transition:null},FE={ReactCurrentDispatcher:Mi,ReactCurrentBatchConfig:Kf,ReactCurrentOwner:sx};function rS(){throw Error("act(...) is not supported in production builds of React.")}fr.Children={map:Sf,forEach:function(e,t,o){Sf(e,function(){t.apply(this,arguments)},o)},count:function(e){var t=0;return Sf(e,function(){t++}),t},toArray:function(e){return Sf(e,function(t){return t})||[]},only:function(e){if(!ax(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fr.Component=Bu;fr.Fragment=CE;fr.Profiler=kE;fr.PureComponent=ix;fr.StrictMode=TE;fr.Suspense=ME;fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FE;fr.act=rS;fr.cloneElement=function(e,t,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=K2({},e.props),p=e.key,m=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(m=t.ref,g=sx.current),t.key!==void 0&&(p=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(I in t)Q2.call(t,I)&&!eS.hasOwnProperty(I)&&(l[I]=t[I]===void 0&&u!==void 0?u[I]:t[I])}var I=arguments.length-2;if(I===1)l.children=o;else if(1<I){u=Array(I);for(var M=0;M<I;M++)u[M]=arguments[M+2];l.children=u}return{$$typeof:sp,type:e.type,key:p,ref:m,props:l,_owner:g}};fr.createContext=function(e){return e={$$typeof:EE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:IE,_context:e},e.Consumer=e};fr.createElement=tS;fr.createFactory=function(e){var t=tS.bind(null,e);return t.type=e,t};fr.createRef=function(){return{current:null}};fr.forwardRef=function(e){return{$$typeof:PE,render:e}};fr.isValidElement=ax;fr.lazy=function(e){return{$$typeof:zE,_payload:{_status:-1,_result:e},_init:BE}};fr.memo=function(e,t){return{$$typeof:AE,type:e,compare:t===void 0?null:t}};fr.startTransition=function(e){var t=Kf.transition;Kf.transition={};try{e()}finally{Kf.transition=t}};fr.unstable_act=rS;fr.useCallback=function(e,t){return Mi.current.useCallback(e,t)};fr.useContext=function(e){return Mi.current.useContext(e)};fr.useDebugValue=function(){};fr.useDeferredValue=function(e){return Mi.current.useDeferredValue(e)};fr.useEffect=function(e,t){return Mi.current.useEffect(e,t)};fr.useId=function(){return Mi.current.useId()};fr.useImperativeHandle=function(e,t,o){return Mi.current.useImperativeHandle(e,t,o)};fr.useInsertionEffect=function(e,t){return Mi.current.useInsertionEffect(e,t)};fr.useLayoutEffect=function(e,t){return Mi.current.useLayoutEffect(e,t)};fr.useMemo=function(e,t){return Mi.current.useMemo(e,t)};fr.useReducer=function(e,t,o){return Mi.current.useReducer(e,t,o)};fr.useRef=function(e){return Mi.current.useRef(e)};fr.useState=function(e){return Mi.current.useState(e)};fr.useSyncExternalStore=function(e,t,o){return Mi.current.useSyncExternalStore(e,t,o)};fr.useTransition=function(){return Mi.current.useTransition()};fr.version="18.3.1";Z2.exports=fr;var ee=Z2.exports;const Io=nx(ee),U_=bE({__proto__:null,default:Io},[ee]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE=ee,$E=Symbol.for("react.element"),NE=Symbol.for("react.fragment"),jE=Object.prototype.hasOwnProperty,VE=OE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UE={key:!0,ref:!0,__self:!0,__source:!0};function nS(e,t,o){var l,p={},m=null,g=null;o!==void 0&&(m=""+o),t.key!==void 0&&(m=""+t.key),t.ref!==void 0&&(g=t.ref);for(l in t)jE.call(t,l)&&!UE.hasOwnProperty(l)&&(p[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)p[l]===void 0&&(p[l]=t[l]);return{$$typeof:$E,type:e,key:m,ref:g,props:p,_owner:VE.current}}Wm.Fragment=NE;Wm.jsx=nS;Wm.jsxs=nS;q2.exports=Wm;var q=q2.exports,W_={},iS={exports:{}},fo={},oS={exports:{}},sS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(be,Ee){var We=be.length;be.push(Ee);e:for(;0<We;){var Ze=We-1>>>1,Ge=be[Ze];if(0<p(Ge,Ee))be[Ze]=Ee,be[We]=Ge,We=Ze;else break e}}function o(be){return be.length===0?null:be[0]}function l(be){if(be.length===0)return null;var Ee=be[0],We=be.pop();if(We!==Ee){be[0]=We;e:for(var Ze=0,Ge=be.length,St=Ge>>>1;Ze<St;){var Dt=2*(Ze+1)-1,$t=be[Dt],Vt=Dt+1,Rt=be[Vt];if(0>p($t,We))Vt<Ge&&0>p(Rt,$t)?(be[Ze]=Rt,be[Vt]=We,Ze=Vt):(be[Ze]=$t,be[Dt]=We,Ze=Dt);else if(Vt<Ge&&0>p(Rt,We))be[Ze]=Rt,be[Vt]=We,Ze=Vt;else break e}}return Ee}function p(be,Ee){var We=be.sortIndex-Ee.sortIndex;return We!==0?We:be.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var g=Date,u=g.now();e.unstable_now=function(){return g.now()-u}}var I=[],M=[],F=1,L=null,z=3,J=!1,H=!1,re=!1,le=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(be){for(var Ee=o(M);Ee!==null;){if(Ee.callback===null)l(M);else if(Ee.startTime<=be)l(M),Ee.sortIndex=Ee.expirationTime,t(I,Ee);else break;Ee=o(M)}}function Q(be){if(re=!1,G(be),!H)if(o(I)!==null)H=!0,$e(fe);else{var Ee=o(M);Ee!==null&&Ke(Q,Ee.startTime-be)}}function fe(be,Ee){H=!1,re&&(re=!1,V(ge),ge=-1),J=!0;var We=z;try{for(G(Ee),L=o(I);L!==null&&(!(L.expirationTime>Ee)||be&&!De());){var Ze=L.callback;if(typeof Ze=="function"){L.callback=null,z=L.priorityLevel;var Ge=Ze(L.expirationTime<=Ee);Ee=e.unstable_now(),typeof Ge=="function"?L.callback=Ge:L===o(I)&&l(I),G(Ee)}else l(I);L=o(I)}if(L!==null)var St=!0;else{var Dt=o(M);Dt!==null&&Ke(Q,Dt.startTime-Ee),St=!1}return St}finally{L=null,z=We,J=!1}}var he=!1,_e=null,ge=-1,Ae=5,Re=-1;function De(){return!(e.unstable_now()-Re<Ae)}function Z(){if(_e!==null){var be=e.unstable_now();Re=be;var Ee=!0;try{Ee=_e(!0,be)}finally{Ee?Me():(he=!1,_e=null)}}else he=!1}var Me;if(typeof U=="function")Me=function(){U(Z)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Le=Ie.port2;Ie.port1.onmessage=Z,Me=function(){Le.postMessage(null)}}else Me=function(){le(Z,0)};function $e(be){_e=be,he||(he=!0,Me())}function Ke(be,Ee){ge=le(function(){be(e.unstable_now())},Ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(be){be.callback=null},e.unstable_continueExecution=function(){H||J||(H=!0,$e(fe))},e.unstable_forceFrameRate=function(be){0>be||125<be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<be?Math.floor(1e3/be):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return o(I)},e.unstable_next=function(be){switch(z){case 1:case 2:case 3:var Ee=3;break;default:Ee=z}var We=z;z=Ee;try{return be()}finally{z=We}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(be,Ee){switch(be){case 1:case 2:case 3:case 4:case 5:break;default:be=3}var We=z;z=be;try{return Ee()}finally{z=We}},e.unstable_scheduleCallback=function(be,Ee,We){var Ze=e.unstable_now();switch(typeof We=="object"&&We!==null?(We=We.delay,We=typeof We=="number"&&0<We?Ze+We:Ze):We=Ze,be){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=We+Ge,be={id:F++,callback:Ee,priorityLevel:be,startTime:We,expirationTime:Ge,sortIndex:-1},We>Ze?(be.sortIndex=We,t(M,be),o(I)===null&&be===o(M)&&(re?(V(ge),ge=-1):re=!0,Ke(Q,We-Ze))):(be.sortIndex=Ge,t(I,be),H||J||(H=!0,$e(fe))),be},e.unstable_shouldYield=De,e.unstable_wrapCallback=function(be){var Ee=z;return function(){var We=z;z=Ee;try{return be.apply(this,arguments)}finally{z=We}}}})(sS);oS.exports=sS;var WE=oS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE=ee,po=WE;function Je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aS=new Set,Fd={};function Kl(e,t){Tu(e,t),Tu(e+"Capture",t)}function Tu(e,t){for(Fd[e]=t,e=0;e<t.length;e++)aS.add(t[e])}var Gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),G_=Object.prototype.hasOwnProperty,HE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T1={},k1={};function qE(e){return G_.call(k1,e)?!0:G_.call(T1,e)?!1:HE.test(e)?k1[e]=!0:(T1[e]=!0,!1)}function ZE(e,t,o,l){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XE(e,t,o,l){if(t===null||typeof t>"u"||ZE(e,t,o,l))return!0;if(l)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ai(e,t,o,l,p,m,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=p,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=g}var ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ri[e]=new Ai(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ri[t]=new Ai(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ri[e]=new Ai(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ri[e]=new Ai(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ri[e]=new Ai(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ri[e]=new Ai(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ri[e]=new Ai(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ri[e]=new Ai(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ri[e]=new Ai(e,5,!1,e.toLowerCase(),null,!1,!1)});var lx=/[\-:]([a-z])/g;function cx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lx,cx);ri[t]=new Ai(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lx,cx);ri[t]=new Ai(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lx,cx);ri[t]=new Ai(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ri[e]=new Ai(e,1,!1,e.toLowerCase(),null,!1,!1)});ri.xlinkHref=new Ai("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ri[e]=new Ai(e,1,!1,e.toLowerCase(),null,!0,!0)});function ux(e,t,o,l){var p=ri.hasOwnProperty(t)?ri[t]:null;(p!==null?p.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XE(t,o,p,l)&&(o=null),l||p===null?qE(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):p.mustUseProperty?e[p.propertyName]=o===null?p.type===3?!1:"":o:(t=p.attributeName,l=p.attributeNamespace,o===null?e.removeAttribute(t):(p=p.type,o=p===3||p===4&&o===!0?"":""+o,l?e.setAttributeNS(l,t,o):e.setAttribute(t,o))))}var Ys=GE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cf=Symbol.for("react.element"),nu=Symbol.for("react.portal"),iu=Symbol.for("react.fragment"),hx=Symbol.for("react.strict_mode"),H_=Symbol.for("react.profiler"),lS=Symbol.for("react.provider"),cS=Symbol.for("react.context"),dx=Symbol.for("react.forward_ref"),q_=Symbol.for("react.suspense"),Z_=Symbol.for("react.suspense_list"),px=Symbol.for("react.memo"),Ra=Symbol.for("react.lazy"),uS=Symbol.for("react.offscreen"),I1=Symbol.iterator;function rd(e){return e===null||typeof e!="object"?null:(e=I1&&e[I1]||e["@@iterator"],typeof e=="function"?e:null)}var cn=Object.assign,a_;function gd(e){if(a_===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);a_=t&&t[1]||""}return`
`+a_+e}var l_=!1;function c_(e,t){if(!e||l_)return"";l_=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var l=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){l=M}e.call(t.prototype)}else{try{throw Error()}catch(M){l=M}e()}}catch(M){if(M&&l&&typeof M.stack=="string"){for(var p=M.stack.split(`
`),m=l.stack.split(`
`),g=p.length-1,u=m.length-1;1<=g&&0<=u&&p[g]!==m[u];)u--;for(;1<=g&&0<=u;g--,u--)if(p[g]!==m[u]){if(g!==1||u!==1)do if(g--,u--,0>u||p[g]!==m[u]){var I=`
`+p[g].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=g&&0<=u);break}}}finally{l_=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?gd(e):""}function KE(e){switch(e.tag){case 5:return gd(e.type);case 16:return gd("Lazy");case 13:return gd("Suspense");case 19:return gd("SuspenseList");case 0:case 2:case 15:return e=c_(e.type,!1),e;case 11:return e=c_(e.type.render,!1),e;case 1:return e=c_(e.type,!0),e;default:return""}}function X_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case iu:return"Fragment";case nu:return"Portal";case H_:return"Profiler";case hx:return"StrictMode";case q_:return"Suspense";case Z_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cS:return(e.displayName||"Context")+".Consumer";case lS:return(e._context.displayName||"Context")+".Provider";case dx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case px:return t=e.displayName||null,t!==null?t:X_(e.type)||"Memo";case Ra:t=e._payload,e=e._init;try{return X_(e(t))}catch{}}return null}function YE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X_(t);case 8:return t===hx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Za(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JE(e){var t=hS(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,m=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return p.call(this)},set:function(g){l=""+g,m.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tf(e){e._valueTracker||(e._valueTracker=JE(e))}function dS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),l="";return e&&(l=hS(e)?e.checked?"true":"false":e.value),e=l,e!==o?(t.setValue(e),!0):!1}function dm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function K_(e,t){var o=t.checked;return cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function E1(e,t){var o=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;o=Za(t.value!=null?t.value:o),e._wrapperState={initialChecked:l,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pS(e,t){t=t.checked,t!=null&&ux(e,"checked",t,!1)}function Y_(e,t){pS(e,t);var o=Za(t.value),l=t.type;if(o!=null)l==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?J_(e,t.type,o):t.hasOwnProperty("defaultValue")&&J_(e,t.type,Za(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function P1(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function J_(e,t,o){(t!=="number"||dm(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var yd=Array.isArray;function gu(e,t,o,l){if(e=e.options,t){t={};for(var p=0;p<o.length;p++)t["$"+o[p]]=!0;for(o=0;o<e.length;o++)p=t.hasOwnProperty("$"+e[o].value),e[o].selected!==p&&(e[o].selected=p),p&&l&&(e[o].defaultSelected=!0)}else{for(o=""+Za(o),t=null,p=0;p<e.length;p++){if(e[p].value===o){e[p].selected=!0,l&&(e[p].defaultSelected=!0);return}t!==null||e[p].disabled||(t=e[p])}t!==null&&(t.selected=!0)}}function Q_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function M1(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(Je(92));if(yd(o)){if(1<o.length)throw Error(Je(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:Za(o)}}function fS(e,t){var o=Za(t.value),l=Za(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),l!=null&&(e.defaultValue=""+l)}function A1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ev(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kf,gS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,l,p){MSApp.execUnsafeLocalFunction(function(){return e(t,o,l,p)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kf=kf||document.createElement("div"),kf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Od(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QE=["Webkit","ms","Moz","O"];Object.keys(Cd).forEach(function(e){QE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cd[t]=Cd[e]})});function yS(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Cd.hasOwnProperty(e)&&Cd[e]?(""+t).trim():t+"px"}function _S(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var l=o.indexOf("--")===0,p=yS(o,t[o],l);o==="float"&&(o="cssFloat"),l?e.setProperty(o,p):e[o]=p}}var eP=cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tv(e,t){if(t){if(eP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function rv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nv=null;function fx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var iv=null,yu=null,_u=null;function z1(e){if(e=cp(e)){if(typeof iv!="function")throw Error(Je(280));var t=e.stateNode;t&&(t=Xm(t),iv(e.stateNode,e.type,t))}}function vS(e){yu?_u?_u.push(e):_u=[e]:yu=e}function xS(){if(yu){var e=yu,t=_u;if(_u=yu=null,z1(e),t)for(e=0;e<t.length;e++)z1(t[e])}}function bS(e,t){return e(t)}function wS(){}var u_=!1;function SS(e,t,o){if(u_)return e(t,o);u_=!0;try{return bS(e,t,o)}finally{u_=!1,(yu!==null||_u!==null)&&(wS(),xS())}}function $d(e,t){var o=e.stateNode;if(o===null)return null;var l=Xm(o);if(l===null)return null;o=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(Je(231,t,typeof o));return o}var ov=!1;if(Gs)try{var nd={};Object.defineProperty(nd,"passive",{get:function(){ov=!0}}),window.addEventListener("test",nd,nd),window.removeEventListener("test",nd,nd)}catch{ov=!1}function tP(e,t,o,l,p,m,g,u,I){var M=Array.prototype.slice.call(arguments,3);try{t.apply(o,M)}catch(F){this.onError(F)}}var Td=!1,pm=null,fm=!1,sv=null,rP={onError:function(e){Td=!0,pm=e}};function nP(e,t,o,l,p,m,g,u,I){Td=!1,pm=null,tP.apply(rP,arguments)}function iP(e,t,o,l,p,m,g,u,I){if(nP.apply(this,arguments),Td){if(Td){var M=pm;Td=!1,pm=null}else throw Error(Je(198));fm||(fm=!0,sv=M)}}function Yl(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function CS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function R1(e){if(Yl(e)!==e)throw Error(Je(188))}function oP(e){var t=e.alternate;if(!t){if(t=Yl(e),t===null)throw Error(Je(188));return t!==e?null:e}for(var o=e,l=t;;){var p=o.return;if(p===null)break;var m=p.alternate;if(m===null){if(l=p.return,l!==null){o=l;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===o)return R1(p),e;if(m===l)return R1(p),t;m=m.sibling}throw Error(Je(188))}if(o.return!==l.return)o=p,l=m;else{for(var g=!1,u=p.child;u;){if(u===o){g=!0,o=p,l=m;break}if(u===l){g=!0,l=p,o=m;break}u=u.sibling}if(!g){for(u=m.child;u;){if(u===o){g=!0,o=m,l=p;break}if(u===l){g=!0,l=m,o=p;break}u=u.sibling}if(!g)throw Error(Je(189))}}if(o.alternate!==l)throw Error(Je(190))}if(o.tag!==3)throw Error(Je(188));return o.stateNode.current===o?e:t}function TS(e){return e=oP(e),e!==null?kS(e):null}function kS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kS(e);if(t!==null)return t;e=e.sibling}return null}var IS=po.unstable_scheduleCallback,D1=po.unstable_cancelCallback,sP=po.unstable_shouldYield,aP=po.unstable_requestPaint,xn=po.unstable_now,lP=po.unstable_getCurrentPriorityLevel,mx=po.unstable_ImmediatePriority,ES=po.unstable_UserBlockingPriority,mm=po.unstable_NormalPriority,cP=po.unstable_LowPriority,PS=po.unstable_IdlePriority,Gm=null,ms=null;function uP(e){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(Gm,e,void 0,(e.current.flags&128)===128)}catch{}}var Go=Math.clz32?Math.clz32:pP,hP=Math.log,dP=Math.LN2;function pP(e){return e>>>=0,e===0?32:31-(hP(e)/dP|0)|0}var If=64,Ef=4194304;function _d(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gm(e,t){var o=e.pendingLanes;if(o===0)return 0;var l=0,p=e.suspendedLanes,m=e.pingedLanes,g=o&268435455;if(g!==0){var u=g&~p;u!==0?l=_d(u):(m&=g,m!==0&&(l=_d(m)))}else g=o&~p,g!==0?l=_d(g):m!==0&&(l=_d(m));if(l===0)return 0;if(t!==0&&t!==l&&!(t&p)&&(p=l&-l,m=t&-t,p>=m||p===16&&(m&4194240)!==0))return t;if(l&4&&(l|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)o=31-Go(t),p=1<<o,l|=e[o],t&=~p;return l}function fP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mP(e,t){for(var o=e.suspendedLanes,l=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes;0<m;){var g=31-Go(m),u=1<<g,I=p[g];I===-1?(!(u&o)||u&l)&&(p[g]=fP(u,t)):I<=t&&(e.expiredLanes|=u),m&=~u}}function av(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function MS(){var e=If;return If<<=1,!(If&4194240)&&(If=64),e}function h_(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function ap(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Go(t),e[t]=o}function gP(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<o;){var p=31-Go(o),m=1<<p;t[p]=0,l[p]=-1,e[p]=-1,o&=~m}}function gx(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var l=31-Go(o),p=1<<l;p&t|e[l]&t&&(e[l]|=t),o&=~p}}var Br=0;function AS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var zS,yx,RS,DS,LS,lv=!1,Pf=[],$a=null,Na=null,ja=null,Nd=new Map,jd=new Map,La=[],yP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L1(e,t){switch(e){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":Nd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jd.delete(t.pointerId)}}function id(e,t,o,l,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:o,eventSystemFlags:l,nativeEvent:m,targetContainers:[p]},t!==null&&(t=cp(t),t!==null&&yx(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,p!==null&&t.indexOf(p)===-1&&t.push(p),e)}function _P(e,t,o,l,p){switch(t){case"focusin":return $a=id($a,e,t,o,l,p),!0;case"dragenter":return Na=id(Na,e,t,o,l,p),!0;case"mouseover":return ja=id(ja,e,t,o,l,p),!0;case"pointerover":var m=p.pointerId;return Nd.set(m,id(Nd.get(m)||null,e,t,o,l,p)),!0;case"gotpointercapture":return m=p.pointerId,jd.set(m,id(jd.get(m)||null,e,t,o,l,p)),!0}return!1}function BS(e){var t=Fl(e.target);if(t!==null){var o=Yl(t);if(o!==null){if(t=o.tag,t===13){if(t=CS(o),t!==null){e.blockedOn=t,LS(e.priority,function(){RS(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=cv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var l=new o.constructor(o.type,o);nv=l,o.target.dispatchEvent(l),nv=null}else return t=cp(o),t!==null&&yx(t),e.blockedOn=o,!1;t.shift()}return!0}function B1(e,t,o){Yf(e)&&o.delete(t)}function vP(){lv=!1,$a!==null&&Yf($a)&&($a=null),Na!==null&&Yf(Na)&&(Na=null),ja!==null&&Yf(ja)&&(ja=null),Nd.forEach(B1),jd.forEach(B1)}function od(e,t){e.blockedOn===t&&(e.blockedOn=null,lv||(lv=!0,po.unstable_scheduleCallback(po.unstable_NormalPriority,vP)))}function Vd(e){function t(p){return od(p,e)}if(0<Pf.length){od(Pf[0],e);for(var o=1;o<Pf.length;o++){var l=Pf[o];l.blockedOn===e&&(l.blockedOn=null)}}for($a!==null&&od($a,e),Na!==null&&od(Na,e),ja!==null&&od(ja,e),Nd.forEach(t),jd.forEach(t),o=0;o<La.length;o++)l=La[o],l.blockedOn===e&&(l.blockedOn=null);for(;0<La.length&&(o=La[0],o.blockedOn===null);)BS(o),o.blockedOn===null&&La.shift()}var vu=Ys.ReactCurrentBatchConfig,ym=!0;function xP(e,t,o,l){var p=Br,m=vu.transition;vu.transition=null;try{Br=1,_x(e,t,o,l)}finally{Br=p,vu.transition=m}}function bP(e,t,o,l){var p=Br,m=vu.transition;vu.transition=null;try{Br=4,_x(e,t,o,l)}finally{Br=p,vu.transition=m}}function _x(e,t,o,l){if(ym){var p=cv(e,t,o,l);if(p===null)b_(e,t,l,_m,o),L1(e,l);else if(_P(p,e,t,o,l))l.stopPropagation();else if(L1(e,l),t&4&&-1<yP.indexOf(e)){for(;p!==null;){var m=cp(p);if(m!==null&&zS(m),m=cv(e,t,o,l),m===null&&b_(e,t,l,_m,o),m===p)break;p=m}p!==null&&l.stopPropagation()}else b_(e,t,l,null,o)}}var _m=null;function cv(e,t,o,l){if(_m=null,e=fx(l),e=Fl(e),e!==null)if(t=Yl(e),t===null)e=null;else if(o=t.tag,o===13){if(e=CS(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _m=e,null}function FS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lP()){case mx:return 1;case ES:return 4;case mm:case cP:return 16;case PS:return 536870912;default:return 16}default:return 16}}var Fa=null,vx=null,Jf=null;function OS(){if(Jf)return Jf;var e,t=vx,o=t.length,l,p="value"in Fa?Fa.value:Fa.textContent,m=p.length;for(e=0;e<o&&t[e]===p[e];e++);var g=o-e;for(l=1;l<=g&&t[o-l]===p[m-l];l++);return Jf=p.slice(e,1<l?1-l:void 0)}function Qf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mf(){return!0}function F1(){return!1}function mo(e){function t(o,l,p,m,g){this._reactName=o,this._targetInst=p,this.type=l,this.nativeEvent=m,this.target=g,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(o=e[u],this[u]=o?o(m):m[u]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Mf:F1,this.isPropagationStopped=F1,this}return cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Mf)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Mf)},persist:function(){},isPersistent:Mf}),t}var Fu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xx=mo(Fu),lp=cn({},Fu,{view:0,detail:0}),wP=mo(lp),d_,p_,sd,Hm=cn({},lp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sd&&(sd&&e.type==="mousemove"?(d_=e.screenX-sd.screenX,p_=e.screenY-sd.screenY):p_=d_=0,sd=e),d_)},movementY:function(e){return"movementY"in e?e.movementY:p_}}),O1=mo(Hm),SP=cn({},Hm,{dataTransfer:0}),CP=mo(SP),TP=cn({},lp,{relatedTarget:0}),f_=mo(TP),kP=cn({},Fu,{animationName:0,elapsedTime:0,pseudoElement:0}),IP=mo(kP),EP=cn({},Fu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),PP=mo(EP),MP=cn({},Fu,{data:0}),$1=mo(MP),AP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RP[e])?!!t[e]:!1}function bx(){return DP}var LP=cn({},lp,{key:function(e){if(e.key){var t=AP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bx,charCode:function(e){return e.type==="keypress"?Qf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),BP=mo(LP),FP=cn({},Hm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N1=mo(FP),OP=cn({},lp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bx}),$P=mo(OP),NP=cn({},Fu,{propertyName:0,elapsedTime:0,pseudoElement:0}),jP=mo(NP),VP=cn({},Hm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),UP=mo(VP),WP=[9,13,27,32],wx=Gs&&"CompositionEvent"in window,kd=null;Gs&&"documentMode"in document&&(kd=document.documentMode);var GP=Gs&&"TextEvent"in window&&!kd,$S=Gs&&(!wx||kd&&8<kd&&11>=kd),j1=" ",V1=!1;function NS(e,t){switch(e){case"keyup":return WP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ou=!1;function HP(e,t){switch(e){case"compositionend":return jS(t);case"keypress":return t.which!==32?null:(V1=!0,j1);case"textInput":return e=t.data,e===j1&&V1?null:e;default:return null}}function qP(e,t){if(ou)return e==="compositionend"||!wx&&NS(e,t)?(e=OS(),Jf=vx=Fa=null,ou=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $S&&t.locale!=="ko"?null:t.data;default:return null}}var ZP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZP[e.type]:t==="textarea"}function VS(e,t,o,l){vS(l),t=vm(t,"onChange"),0<t.length&&(o=new xx("onChange","change",null,o,l),e.push({event:o,listeners:t}))}var Id=null,Ud=null;function XP(e){QS(e,0)}function qm(e){var t=lu(e);if(dS(t))return e}function KP(e,t){if(e==="change")return t}var US=!1;if(Gs){var m_;if(Gs){var g_="oninput"in document;if(!g_){var W1=document.createElement("div");W1.setAttribute("oninput","return;"),g_=typeof W1.oninput=="function"}m_=g_}else m_=!1;US=m_&&(!document.documentMode||9<document.documentMode)}function G1(){Id&&(Id.detachEvent("onpropertychange",WS),Ud=Id=null)}function WS(e){if(e.propertyName==="value"&&qm(Ud)){var t=[];VS(t,Ud,e,fx(e)),SS(XP,t)}}function YP(e,t,o){e==="focusin"?(G1(),Id=t,Ud=o,Id.attachEvent("onpropertychange",WS)):e==="focusout"&&G1()}function JP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qm(Ud)}function QP(e,t){if(e==="click")return qm(t)}function eM(e,t){if(e==="input"||e==="change")return qm(t)}function tM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qo=typeof Object.is=="function"?Object.is:tM;function Wd(e,t){if(qo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var p=o[l];if(!G_.call(t,p)||!qo(e[p],t[p]))return!1}return!0}function H1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function q1(e,t){var o=H1(e);e=0;for(var l;o;){if(o.nodeType===3){if(l=e+o.textContent.length,e<=t&&l>=t)return{node:o,offset:t-e};e=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=H1(o)}}function GS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?GS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function HS(){for(var e=window,t=dm();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=dm(e.document)}return t}function Sx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rM(e){var t=HS(),o=e.focusedElem,l=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&GS(o.ownerDocument.documentElement,o)){if(l!==null&&Sx(o)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var p=o.textContent.length,m=Math.min(l.start,p);l=l.end===void 0?m:Math.min(l.end,p),!e.extend&&m>l&&(p=l,l=m,m=p),p=q1(o,m);var g=q1(o,l);p&&g&&(e.rangeCount!==1||e.anchorNode!==p.node||e.anchorOffset!==p.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(p.node,p.offset),e.removeAllRanges(),m>l?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nM=Gs&&"documentMode"in document&&11>=document.documentMode,su=null,uv=null,Ed=null,hv=!1;function Z1(e,t,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;hv||su==null||su!==dm(l)||(l=su,"selectionStart"in l&&Sx(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ed&&Wd(Ed,l)||(Ed=l,l=vm(uv,"onSelect"),0<l.length&&(t=new xx("onSelect","select",null,t,o),e.push({event:t,listeners:l}),t.target=su)))}function Af(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var au={animationend:Af("Animation","AnimationEnd"),animationiteration:Af("Animation","AnimationIteration"),animationstart:Af("Animation","AnimationStart"),transitionend:Af("Transition","TransitionEnd")},y_={},qS={};Gs&&(qS=document.createElement("div").style,"AnimationEvent"in window||(delete au.animationend.animation,delete au.animationiteration.animation,delete au.animationstart.animation),"TransitionEvent"in window||delete au.transitionend.transition);function Zm(e){if(y_[e])return y_[e];if(!au[e])return e;var t=au[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in qS)return y_[e]=t[o];return e}var ZS=Zm("animationend"),XS=Zm("animationiteration"),KS=Zm("animationstart"),YS=Zm("transitionend"),JS=new Map,X1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(e,t){JS.set(e,t),Kl(t,[e])}for(var __=0;__<X1.length;__++){var v_=X1[__],iM=v_.toLowerCase(),oM=v_[0].toUpperCase()+v_.slice(1);Ja(iM,"on"+oM)}Ja(ZS,"onAnimationEnd");Ja(XS,"onAnimationIteration");Ja(KS,"onAnimationStart");Ja("dblclick","onDoubleClick");Ja("focusin","onFocus");Ja("focusout","onBlur");Ja(YS,"onTransitionEnd");Tu("onMouseEnter",["mouseout","mouseover"]);Tu("onMouseLeave",["mouseout","mouseover"]);Tu("onPointerEnter",["pointerout","pointerover"]);Tu("onPointerLeave",["pointerout","pointerover"]);Kl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sM=new Set("cancel close invalid load scroll toggle".split(" ").concat(vd));function K1(e,t,o){var l=e.type||"unknown-event";e.currentTarget=o,iP(l,t,void 0,e),e.currentTarget=null}function QS(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var l=e[o],p=l.event;l=l.listeners;e:{var m=void 0;if(t)for(var g=l.length-1;0<=g;g--){var u=l[g],I=u.instance,M=u.currentTarget;if(u=u.listener,I!==m&&p.isPropagationStopped())break e;K1(p,u,M),m=I}else for(g=0;g<l.length;g++){if(u=l[g],I=u.instance,M=u.currentTarget,u=u.listener,I!==m&&p.isPropagationStopped())break e;K1(p,u,M),m=I}}}if(fm)throw e=sv,fm=!1,sv=null,e}function Yr(e,t){var o=t[gv];o===void 0&&(o=t[gv]=new Set);var l=e+"__bubble";o.has(l)||(eC(t,e,2,!1),o.add(l))}function x_(e,t,o){var l=0;t&&(l|=4),eC(o,e,l,t)}var zf="_reactListening"+Math.random().toString(36).slice(2);function Gd(e){if(!e[zf]){e[zf]=!0,aS.forEach(function(o){o!=="selectionchange"&&(sM.has(o)||x_(o,!1,e),x_(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zf]||(t[zf]=!0,x_("selectionchange",!1,t))}}function eC(e,t,o,l){switch(FS(t)){case 1:var p=xP;break;case 4:p=bP;break;default:p=_x}o=p.bind(null,t,o,e),p=void 0,!ov||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(p=!0),l?p!==void 0?e.addEventListener(t,o,{capture:!0,passive:p}):e.addEventListener(t,o,!0):p!==void 0?e.addEventListener(t,o,{passive:p}):e.addEventListener(t,o,!1)}function b_(e,t,o,l,p){var m=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var u=l.stateNode.containerInfo;if(u===p||u.nodeType===8&&u.parentNode===p)break;if(g===4)for(g=l.return;g!==null;){var I=g.tag;if((I===3||I===4)&&(I=g.stateNode.containerInfo,I===p||I.nodeType===8&&I.parentNode===p))return;g=g.return}for(;u!==null;){if(g=Fl(u),g===null)return;if(I=g.tag,I===5||I===6){l=m=g;continue e}u=u.parentNode}}l=l.return}SS(function(){var M=m,F=fx(o),L=[];e:{var z=JS.get(e);if(z!==void 0){var J=xx,H=e;switch(e){case"keypress":if(Qf(o)===0)break e;case"keydown":case"keyup":J=BP;break;case"focusin":H="focus",J=f_;break;case"focusout":H="blur",J=f_;break;case"beforeblur":case"afterblur":J=f_;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=O1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=CP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=$P;break;case ZS:case XS:case KS:J=IP;break;case YS:J=jP;break;case"scroll":J=wP;break;case"wheel":J=UP;break;case"copy":case"cut":case"paste":J=PP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=N1}var re=(t&4)!==0,le=!re&&e==="scroll",V=re?z!==null?z+"Capture":null:z;re=[];for(var U=M,G;U!==null;){G=U;var Q=G.stateNode;if(G.tag===5&&Q!==null&&(G=Q,V!==null&&(Q=$d(U,V),Q!=null&&re.push(Hd(U,Q,G)))),le)break;U=U.return}0<re.length&&(z=new J(z,H,null,o,F),L.push({event:z,listeners:re}))}}if(!(t&7)){e:{if(z=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",z&&o!==nv&&(H=o.relatedTarget||o.fromElement)&&(Fl(H)||H[Hs]))break e;if((J||z)&&(z=F.window===F?F:(z=F.ownerDocument)?z.defaultView||z.parentWindow:window,J?(H=o.relatedTarget||o.toElement,J=M,H=H?Fl(H):null,H!==null&&(le=Yl(H),H!==le||H.tag!==5&&H.tag!==6)&&(H=null)):(J=null,H=M),J!==H)){if(re=O1,Q="onMouseLeave",V="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(re=N1,Q="onPointerLeave",V="onPointerEnter",U="pointer"),le=J==null?z:lu(J),G=H==null?z:lu(H),z=new re(Q,U+"leave",J,o,F),z.target=le,z.relatedTarget=G,Q=null,Fl(F)===M&&(re=new re(V,U+"enter",H,o,F),re.target=G,re.relatedTarget=le,Q=re),le=Q,J&&H)t:{for(re=J,V=H,U=0,G=re;G;G=qc(G))U++;for(G=0,Q=V;Q;Q=qc(Q))G++;for(;0<U-G;)re=qc(re),U--;for(;0<G-U;)V=qc(V),G--;for(;U--;){if(re===V||V!==null&&re===V.alternate)break t;re=qc(re),V=qc(V)}re=null}else re=null;J!==null&&Y1(L,z,J,re,!1),H!==null&&le!==null&&Y1(L,le,H,re,!0)}}e:{if(z=M?lu(M):window,J=z.nodeName&&z.nodeName.toLowerCase(),J==="select"||J==="input"&&z.type==="file")var fe=KP;else if(U1(z))if(US)fe=eM;else{fe=JP;var he=YP}else(J=z.nodeName)&&J.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(fe=QP);if(fe&&(fe=fe(e,M))){VS(L,fe,o,F);break e}he&&he(e,z,M),e==="focusout"&&(he=z._wrapperState)&&he.controlled&&z.type==="number"&&J_(z,"number",z.value)}switch(he=M?lu(M):window,e){case"focusin":(U1(he)||he.contentEditable==="true")&&(su=he,uv=M,Ed=null);break;case"focusout":Ed=uv=su=null;break;case"mousedown":hv=!0;break;case"contextmenu":case"mouseup":case"dragend":hv=!1,Z1(L,o,F);break;case"selectionchange":if(nM)break;case"keydown":case"keyup":Z1(L,o,F)}var _e;if(wx)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else ou?NS(e,o)&&(ge="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(ge="onCompositionStart");ge&&($S&&o.locale!=="ko"&&(ou||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&ou&&(_e=OS()):(Fa=F,vx="value"in Fa?Fa.value:Fa.textContent,ou=!0)),he=vm(M,ge),0<he.length&&(ge=new $1(ge,e,null,o,F),L.push({event:ge,listeners:he}),_e?ge.data=_e:(_e=jS(o),_e!==null&&(ge.data=_e)))),(_e=GP?HP(e,o):qP(e,o))&&(M=vm(M,"onBeforeInput"),0<M.length&&(F=new $1("onBeforeInput","beforeinput",null,o,F),L.push({event:F,listeners:M}),F.data=_e))}QS(L,t)})}function Hd(e,t,o){return{instance:e,listener:t,currentTarget:o}}function vm(e,t){for(var o=t+"Capture",l=[];e!==null;){var p=e,m=p.stateNode;p.tag===5&&m!==null&&(p=m,m=$d(e,o),m!=null&&l.unshift(Hd(e,m,p)),m=$d(e,t),m!=null&&l.push(Hd(e,m,p))),e=e.return}return l}function qc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Y1(e,t,o,l,p){for(var m=t._reactName,g=[];o!==null&&o!==l;){var u=o,I=u.alternate,M=u.stateNode;if(I!==null&&I===l)break;u.tag===5&&M!==null&&(u=M,p?(I=$d(o,m),I!=null&&g.unshift(Hd(o,I,u))):p||(I=$d(o,m),I!=null&&g.push(Hd(o,I,u)))),o=o.return}g.length!==0&&e.push({event:t,listeners:g})}var aM=/\r\n?/g,lM=/\u0000|\uFFFD/g;function J1(e){return(typeof e=="string"?e:""+e).replace(aM,`
`).replace(lM,"")}function Rf(e,t,o){if(t=J1(t),J1(e)!==t&&o)throw Error(Je(425))}function xm(){}var dv=null,pv=null;function fv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mv=typeof setTimeout=="function"?setTimeout:void 0,cM=typeof clearTimeout=="function"?clearTimeout:void 0,Q1=typeof Promise=="function"?Promise:void 0,uM=typeof queueMicrotask=="function"?queueMicrotask:typeof Q1<"u"?function(e){return Q1.resolve(null).then(e).catch(hM)}:mv;function hM(e){setTimeout(function(){throw e})}function w_(e,t){var o=t,l=0;do{var p=o.nextSibling;if(e.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(l===0){e.removeChild(p),Vd(t);return}l--}else o!=="$"&&o!=="$?"&&o!=="$!"||l++;o=p}while(o);Vd(t)}function Va(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ew(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var Ou=Math.random().toString(36).slice(2),ds="__reactFiber$"+Ou,qd="__reactProps$"+Ou,Hs="__reactContainer$"+Ou,gv="__reactEvents$"+Ou,dM="__reactListeners$"+Ou,pM="__reactHandles$"+Ou;function Fl(e){var t=e[ds];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Hs]||o[ds]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=ew(e);e!==null;){if(o=e[ds])return o;e=ew(e)}return t}e=o,o=e.parentNode}return null}function cp(e){return e=e[ds]||e[Hs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function lu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Je(33))}function Xm(e){return e[qd]||null}var yv=[],cu=-1;function Qa(e){return{current:e}}function Jr(e){0>cu||(e.current=yv[cu],yv[cu]=null,cu--)}function Zr(e,t){cu++,yv[cu]=e.current,e.current=t}var Xa={},yi=Qa(Xa),Gi=Qa(!1),Gl=Xa;function ku(e,t){var o=e.type.contextTypes;if(!o)return Xa;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var p={},m;for(m in o)p[m]=t[m];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=p),p}function Hi(e){return e=e.childContextTypes,e!=null}function bm(){Jr(Gi),Jr(yi)}function tw(e,t,o){if(yi.current!==Xa)throw Error(Je(168));Zr(yi,t),Zr(Gi,o)}function tC(e,t,o){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return o;l=l.getChildContext();for(var p in l)if(!(p in t))throw Error(Je(108,YE(e)||"Unknown",p));return cn({},o,l)}function wm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xa,Gl=yi.current,Zr(yi,e),Zr(Gi,Gi.current),!0}function rw(e,t,o){var l=e.stateNode;if(!l)throw Error(Je(169));o?(e=tC(e,t,Gl),l.__reactInternalMemoizedMergedChildContext=e,Jr(Gi),Jr(yi),Zr(yi,e)):Jr(Gi),Zr(Gi,o)}var js=null,Km=!1,S_=!1;function rC(e){js===null?js=[e]:js.push(e)}function fM(e){Km=!0,rC(e)}function el(){if(!S_&&js!==null){S_=!0;var e=0,t=Br;try{var o=js;for(Br=1;e<o.length;e++){var l=o[e];do l=l(!0);while(l!==null)}js=null,Km=!1}catch(p){throw js!==null&&(js=js.slice(e+1)),IS(mx,el),p}finally{Br=t,S_=!1}}return null}var uu=[],hu=0,Sm=null,Cm=0,Co=[],To=0,Hl=null,Vs=1,Us="";function Rl(e,t){uu[hu++]=Cm,uu[hu++]=Sm,Sm=e,Cm=t}function nC(e,t,o){Co[To++]=Vs,Co[To++]=Us,Co[To++]=Hl,Hl=e;var l=Vs;e=Us;var p=32-Go(l)-1;l&=~(1<<p),o+=1;var m=32-Go(t)+p;if(30<m){var g=p-p%5;m=(l&(1<<g)-1).toString(32),l>>=g,p-=g,Vs=1<<32-Go(t)+p|o<<p|l,Us=m+e}else Vs=1<<m|o<<p|l,Us=e}function Cx(e){e.return!==null&&(Rl(e,1),nC(e,1,0))}function Tx(e){for(;e===Sm;)Sm=uu[--hu],uu[hu]=null,Cm=uu[--hu],uu[hu]=null;for(;e===Hl;)Hl=Co[--To],Co[To]=null,Us=Co[--To],Co[To]=null,Vs=Co[--To],Co[To]=null}var uo=null,co=null,nn=!1,Uo=null;function iC(e,t){var o=Eo(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function nw(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,uo=e,co=Va(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,uo=e,co=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=Hl!==null?{id:Vs,overflow:Us}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=Eo(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,uo=e,co=null,!0):!1;default:return!1}}function _v(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vv(e){if(nn){var t=co;if(t){var o=t;if(!nw(e,t)){if(_v(e))throw Error(Je(418));t=Va(o.nextSibling);var l=uo;t&&nw(e,t)?iC(l,o):(e.flags=e.flags&-4097|2,nn=!1,uo=e)}}else{if(_v(e))throw Error(Je(418));e.flags=e.flags&-4097|2,nn=!1,uo=e}}}function iw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;uo=e}function Df(e){if(e!==uo)return!1;if(!nn)return iw(e),nn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fv(e.type,e.memoizedProps)),t&&(t=co)){if(_v(e))throw oC(),Error(Je(418));for(;t;)iC(e,t),t=Va(t.nextSibling)}if(iw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){co=Va(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}co=null}}else co=uo?Va(e.stateNode.nextSibling):null;return!0}function oC(){for(var e=co;e;)e=Va(e.nextSibling)}function Iu(){co=uo=null,nn=!1}function kx(e){Uo===null?Uo=[e]:Uo.push(e)}var mM=Ys.ReactCurrentBatchConfig;function ad(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Je(309));var l=o.stateNode}if(!l)throw Error(Je(147,e));var p=l,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(g){var u=p.refs;g===null?delete u[m]:u[m]=g},t._stringRef=m,t)}if(typeof e!="string")throw Error(Je(284));if(!o._owner)throw Error(Je(290,e))}return e}function Lf(e,t){throw e=Object.prototype.toString.call(t),Error(Je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ow(e){var t=e._init;return t(e._payload)}function sC(e){function t(V,U){if(e){var G=V.deletions;G===null?(V.deletions=[U],V.flags|=16):G.push(U)}}function o(V,U){if(!e)return null;for(;U!==null;)t(V,U),U=U.sibling;return null}function l(V,U){for(V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function p(V,U){return V=Ha(V,U),V.index=0,V.sibling=null,V}function m(V,U,G){return V.index=G,e?(G=V.alternate,G!==null?(G=G.index,G<U?(V.flags|=2,U):G):(V.flags|=2,U)):(V.flags|=1048576,U)}function g(V){return e&&V.alternate===null&&(V.flags|=2),V}function u(V,U,G,Q){return U===null||U.tag!==6?(U=M_(G,V.mode,Q),U.return=V,U):(U=p(U,G),U.return=V,U)}function I(V,U,G,Q){var fe=G.type;return fe===iu?F(V,U,G.props.children,Q,G.key):U!==null&&(U.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Ra&&ow(fe)===U.type)?(Q=p(U,G.props),Q.ref=ad(V,U,G),Q.return=V,Q):(Q=sm(G.type,G.key,G.props,null,V.mode,Q),Q.ref=ad(V,U,G),Q.return=V,Q)}function M(V,U,G,Q){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=A_(G,V.mode,Q),U.return=V,U):(U=p(U,G.children||[]),U.return=V,U)}function F(V,U,G,Q,fe){return U===null||U.tag!==7?(U=Ul(G,V.mode,Q,fe),U.return=V,U):(U=p(U,G),U.return=V,U)}function L(V,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=M_(""+U,V.mode,G),U.return=V,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Cf:return G=sm(U.type,U.key,U.props,null,V.mode,G),G.ref=ad(V,null,U),G.return=V,G;case nu:return U=A_(U,V.mode,G),U.return=V,U;case Ra:var Q=U._init;return L(V,Q(U._payload),G)}if(yd(U)||rd(U))return U=Ul(U,V.mode,G,null),U.return=V,U;Lf(V,U)}return null}function z(V,U,G,Q){var fe=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return fe!==null?null:u(V,U,""+G,Q);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Cf:return G.key===fe?I(V,U,G,Q):null;case nu:return G.key===fe?M(V,U,G,Q):null;case Ra:return fe=G._init,z(V,U,fe(G._payload),Q)}if(yd(G)||rd(G))return fe!==null?null:F(V,U,G,Q,null);Lf(V,G)}return null}function J(V,U,G,Q,fe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return V=V.get(G)||null,u(U,V,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Cf:return V=V.get(Q.key===null?G:Q.key)||null,I(U,V,Q,fe);case nu:return V=V.get(Q.key===null?G:Q.key)||null,M(U,V,Q,fe);case Ra:var he=Q._init;return J(V,U,G,he(Q._payload),fe)}if(yd(Q)||rd(Q))return V=V.get(G)||null,F(U,V,Q,fe,null);Lf(U,Q)}return null}function H(V,U,G,Q){for(var fe=null,he=null,_e=U,ge=U=0,Ae=null;_e!==null&&ge<G.length;ge++){_e.index>ge?(Ae=_e,_e=null):Ae=_e.sibling;var Re=z(V,_e,G[ge],Q);if(Re===null){_e===null&&(_e=Ae);break}e&&_e&&Re.alternate===null&&t(V,_e),U=m(Re,U,ge),he===null?fe=Re:he.sibling=Re,he=Re,_e=Ae}if(ge===G.length)return o(V,_e),nn&&Rl(V,ge),fe;if(_e===null){for(;ge<G.length;ge++)_e=L(V,G[ge],Q),_e!==null&&(U=m(_e,U,ge),he===null?fe=_e:he.sibling=_e,he=_e);return nn&&Rl(V,ge),fe}for(_e=l(V,_e);ge<G.length;ge++)Ae=J(_e,V,ge,G[ge],Q),Ae!==null&&(e&&Ae.alternate!==null&&_e.delete(Ae.key===null?ge:Ae.key),U=m(Ae,U,ge),he===null?fe=Ae:he.sibling=Ae,he=Ae);return e&&_e.forEach(function(De){return t(V,De)}),nn&&Rl(V,ge),fe}function re(V,U,G,Q){var fe=rd(G);if(typeof fe!="function")throw Error(Je(150));if(G=fe.call(G),G==null)throw Error(Je(151));for(var he=fe=null,_e=U,ge=U=0,Ae=null,Re=G.next();_e!==null&&!Re.done;ge++,Re=G.next()){_e.index>ge?(Ae=_e,_e=null):Ae=_e.sibling;var De=z(V,_e,Re.value,Q);if(De===null){_e===null&&(_e=Ae);break}e&&_e&&De.alternate===null&&t(V,_e),U=m(De,U,ge),he===null?fe=De:he.sibling=De,he=De,_e=Ae}if(Re.done)return o(V,_e),nn&&Rl(V,ge),fe;if(_e===null){for(;!Re.done;ge++,Re=G.next())Re=L(V,Re.value,Q),Re!==null&&(U=m(Re,U,ge),he===null?fe=Re:he.sibling=Re,he=Re);return nn&&Rl(V,ge),fe}for(_e=l(V,_e);!Re.done;ge++,Re=G.next())Re=J(_e,V,ge,Re.value,Q),Re!==null&&(e&&Re.alternate!==null&&_e.delete(Re.key===null?ge:Re.key),U=m(Re,U,ge),he===null?fe=Re:he.sibling=Re,he=Re);return e&&_e.forEach(function(Z){return t(V,Z)}),nn&&Rl(V,ge),fe}function le(V,U,G,Q){if(typeof G=="object"&&G!==null&&G.type===iu&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Cf:e:{for(var fe=G.key,he=U;he!==null;){if(he.key===fe){if(fe=G.type,fe===iu){if(he.tag===7){o(V,he.sibling),U=p(he,G.props.children),U.return=V,V=U;break e}}else if(he.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Ra&&ow(fe)===he.type){o(V,he.sibling),U=p(he,G.props),U.ref=ad(V,he,G),U.return=V,V=U;break e}o(V,he);break}else t(V,he);he=he.sibling}G.type===iu?(U=Ul(G.props.children,V.mode,Q,G.key),U.return=V,V=U):(Q=sm(G.type,G.key,G.props,null,V.mode,Q),Q.ref=ad(V,U,G),Q.return=V,V=Q)}return g(V);case nu:e:{for(he=G.key;U!==null;){if(U.key===he)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){o(V,U.sibling),U=p(U,G.children||[]),U.return=V,V=U;break e}else{o(V,U);break}else t(V,U);U=U.sibling}U=A_(G,V.mode,Q),U.return=V,V=U}return g(V);case Ra:return he=G._init,le(V,U,he(G._payload),Q)}if(yd(G))return H(V,U,G,Q);if(rd(G))return re(V,U,G,Q);Lf(V,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(o(V,U.sibling),U=p(U,G),U.return=V,V=U):(o(V,U),U=M_(G,V.mode,Q),U.return=V,V=U),g(V)):o(V,U)}return le}var Eu=sC(!0),aC=sC(!1),Tm=Qa(null),km=null,du=null,Ix=null;function Ex(){Ix=du=km=null}function Px(e){var t=Tm.current;Jr(Tm),e._currentValue=t}function xv(e,t,o){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===o)break;e=e.return}}function xu(e,t){km=e,Ix=du=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wi=!0),e.firstContext=null)}function Mo(e){var t=e._currentValue;if(Ix!==e)if(e={context:e,memoizedValue:t,next:null},du===null){if(km===null)throw Error(Je(308));du=e,km.dependencies={lanes:0,firstContext:e}}else du=du.next=e;return t}var Ol=null;function Mx(e){Ol===null?Ol=[e]:Ol.push(e)}function lC(e,t,o,l){var p=t.interleaved;return p===null?(o.next=o,Mx(t)):(o.next=p.next,p.next=o),t.interleaved=o,qs(e,l)}function qs(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var Da=!1;function Ax(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ws(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,o){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,br&2){var p=l.pending;return p===null?t.next=t:(t.next=p.next,p.next=t),l.pending=t,qs(e,o)}return p=l.interleaved,p===null?(t.next=t,Mx(l)):(t.next=p.next,p.next=t),l.interleaved=t,qs(e,o)}function em(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,gx(e,o)}}function sw(e,t){var o=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var p=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var g={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};m===null?p=m=g:m=m.next=g,o=o.next}while(o!==null);m===null?p=m=t:m=m.next=t}else p=m=t;o={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:l.shared,effects:l.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function Im(e,t,o,l){var p=e.updateQueue;Da=!1;var m=p.firstBaseUpdate,g=p.lastBaseUpdate,u=p.shared.pending;if(u!==null){p.shared.pending=null;var I=u,M=I.next;I.next=null,g===null?m=M:g.next=M,g=I;var F=e.alternate;F!==null&&(F=F.updateQueue,u=F.lastBaseUpdate,u!==g&&(u===null?F.firstBaseUpdate=M:u.next=M,F.lastBaseUpdate=I))}if(m!==null){var L=p.baseState;g=0,F=M=I=null,u=m;do{var z=u.lane,J=u.eventTime;if((l&z)===z){F!==null&&(F=F.next={eventTime:J,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var H=e,re=u;switch(z=t,J=o,re.tag){case 1:if(H=re.payload,typeof H=="function"){L=H.call(J,L,z);break e}L=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=re.payload,z=typeof H=="function"?H.call(J,L,z):H,z==null)break e;L=cn({},L,z);break e;case 2:Da=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,z=p.effects,z===null?p.effects=[u]:z.push(u))}else J={eventTime:J,lane:z,tag:u.tag,payload:u.payload,callback:u.callback,next:null},F===null?(M=F=J,I=L):F=F.next=J,g|=z;if(u=u.next,u===null){if(u=p.shared.pending,u===null)break;z=u,u=z.next,z.next=null,p.lastBaseUpdate=z,p.shared.pending=null}}while(!0);if(F===null&&(I=L),p.baseState=I,p.firstBaseUpdate=M,p.lastBaseUpdate=F,t=p.shared.interleaved,t!==null){p=t;do g|=p.lane,p=p.next;while(p!==t)}else m===null&&(p.shared.lanes=0);Zl|=g,e.lanes=g,e.memoizedState=L}}function aw(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],p=l.callback;if(p!==null){if(l.callback=null,l=o,typeof p!="function")throw Error(Je(191,p));p.call(l)}}}var up={},gs=Qa(up),Zd=Qa(up),Xd=Qa(up);function $l(e){if(e===up)throw Error(Je(174));return e}function zx(e,t){switch(Zr(Xd,t),Zr(Zd,e),Zr(gs,up),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ev(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ev(t,e)}Jr(gs),Zr(gs,t)}function Pu(){Jr(gs),Jr(Zd),Jr(Xd)}function uC(e){$l(Xd.current);var t=$l(gs.current),o=ev(t,e.type);t!==o&&(Zr(Zd,e),Zr(gs,o))}function Rx(e){Zd.current===e&&(Jr(gs),Jr(Zd))}var an=Qa(0);function Em(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var C_=[];function Dx(){for(var e=0;e<C_.length;e++)C_[e]._workInProgressVersionPrimary=null;C_.length=0}var tm=Ys.ReactCurrentDispatcher,T_=Ys.ReactCurrentBatchConfig,ql=0,ln=null,Rn=null,Wn=null,Pm=!1,Pd=!1,Kd=0,gM=0;function di(){throw Error(Je(321))}function Lx(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!qo(e[o],t[o]))return!1;return!0}function Bx(e,t,o,l,p,m){if(ql=m,ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tm.current=e===null||e.memoizedState===null?xM:bM,e=o(l,p),Pd){m=0;do{if(Pd=!1,Kd=0,25<=m)throw Error(Je(301));m+=1,Wn=Rn=null,t.updateQueue=null,tm.current=wM,e=o(l,p)}while(Pd)}if(tm.current=Mm,t=Rn!==null&&Rn.next!==null,ql=0,Wn=Rn=ln=null,Pm=!1,t)throw Error(Je(300));return e}function Fx(){var e=Kd!==0;return Kd=0,e}function cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?ln.memoizedState=Wn=e:Wn=Wn.next=e,Wn}function Ao(){if(Rn===null){var e=ln.alternate;e=e!==null?e.memoizedState:null}else e=Rn.next;var t=Wn===null?ln.memoizedState:Wn.next;if(t!==null)Wn=t,Rn=e;else{if(e===null)throw Error(Je(310));Rn=e,e={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Wn===null?ln.memoizedState=Wn=e:Wn=Wn.next=e}return Wn}function Yd(e,t){return typeof t=="function"?t(e):t}function k_(e){var t=Ao(),o=t.queue;if(o===null)throw Error(Je(311));o.lastRenderedReducer=e;var l=Rn,p=l.baseQueue,m=o.pending;if(m!==null){if(p!==null){var g=p.next;p.next=m.next,m.next=g}l.baseQueue=p=m,o.pending=null}if(p!==null){m=p.next,l=l.baseState;var u=g=null,I=null,M=m;do{var F=M.lane;if((ql&F)===F)I!==null&&(I=I.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),l=M.hasEagerState?M.eagerState:e(l,M.action);else{var L={lane:F,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};I===null?(u=I=L,g=l):I=I.next=L,ln.lanes|=F,Zl|=F}M=M.next}while(M!==null&&M!==m);I===null?g=l:I.next=u,qo(l,t.memoizedState)||(Wi=!0),t.memoizedState=l,t.baseState=g,t.baseQueue=I,o.lastRenderedState=l}if(e=o.interleaved,e!==null){p=e;do m=p.lane,ln.lanes|=m,Zl|=m,p=p.next;while(p!==e)}else p===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function I_(e){var t=Ao(),o=t.queue;if(o===null)throw Error(Je(311));o.lastRenderedReducer=e;var l=o.dispatch,p=o.pending,m=t.memoizedState;if(p!==null){o.pending=null;var g=p=p.next;do m=e(m,g.action),g=g.next;while(g!==p);qo(m,t.memoizedState)||(Wi=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),o.lastRenderedState=m}return[m,l]}function hC(){}function dC(e,t){var o=ln,l=Ao(),p=t(),m=!qo(l.memoizedState,p);if(m&&(l.memoizedState=p,Wi=!0),l=l.queue,Ox(mC.bind(null,o,l,e),[e]),l.getSnapshot!==t||m||Wn!==null&&Wn.memoizedState.tag&1){if(o.flags|=2048,Jd(9,fC.bind(null,o,l,p,t),void 0,null),Gn===null)throw Error(Je(349));ql&30||pC(o,t,p)}return p}function pC(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function fC(e,t,o,l){t.value=o,t.getSnapshot=l,gC(t)&&yC(e)}function mC(e,t,o){return o(function(){gC(t)&&yC(e)})}function gC(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!qo(e,o)}catch{return!0}}function yC(e){var t=qs(e,1);t!==null&&Ho(t,e,1,-1)}function lw(e){var t=cs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:e},t.queue=e,e=e.dispatch=vM.bind(null,ln,e),[t.memoizedState,e]}function Jd(e,t,o,l){return e={tag:e,create:t,destroy:o,deps:l,next:null},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(l=o.next,o.next=e,e.next=l,t.lastEffect=e)),e}function _C(){return Ao().memoizedState}function rm(e,t,o,l){var p=cs();ln.flags|=e,p.memoizedState=Jd(1|t,o,void 0,l===void 0?null:l)}function Ym(e,t,o,l){var p=Ao();l=l===void 0?null:l;var m=void 0;if(Rn!==null){var g=Rn.memoizedState;if(m=g.destroy,l!==null&&Lx(l,g.deps)){p.memoizedState=Jd(t,o,m,l);return}}ln.flags|=e,p.memoizedState=Jd(1|t,o,m,l)}function cw(e,t){return rm(8390656,8,e,t)}function Ox(e,t){return Ym(2048,8,e,t)}function vC(e,t){return Ym(4,2,e,t)}function xC(e,t){return Ym(4,4,e,t)}function bC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wC(e,t,o){return o=o!=null?o.concat([e]):null,Ym(4,4,bC.bind(null,t,e),o)}function $x(){}function SC(e,t){var o=Ao();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&Lx(t,l[1])?l[0]:(o.memoizedState=[e,t],e)}function CC(e,t){var o=Ao();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&Lx(t,l[1])?l[0]:(e=e(),o.memoizedState=[e,t],e)}function TC(e,t,o){return ql&21?(qo(o,t)||(o=MS(),ln.lanes|=o,Zl|=o,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wi=!0),e.memoizedState=o)}function yM(e,t){var o=Br;Br=o!==0&&4>o?o:4,e(!0);var l=T_.transition;T_.transition={};try{e(!1),t()}finally{Br=o,T_.transition=l}}function kC(){return Ao().memoizedState}function _M(e,t,o){var l=Ga(e);if(o={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null},IC(e))EC(t,o);else if(o=lC(e,t,o,l),o!==null){var p=Ei();Ho(o,e,l,p),PC(o,t,l)}}function vM(e,t,o){var l=Ga(e),p={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null};if(IC(e))EC(t,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var g=t.lastRenderedState,u=m(g,o);if(p.hasEagerState=!0,p.eagerState=u,qo(u,g)){var I=t.interleaved;I===null?(p.next=p,Mx(t)):(p.next=I.next,I.next=p),t.interleaved=p;return}}catch{}finally{}o=lC(e,t,p,l),o!==null&&(p=Ei(),Ho(o,e,l,p),PC(o,t,l))}}function IC(e){var t=e.alternate;return e===ln||t!==null&&t===ln}function EC(e,t){Pd=Pm=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function PC(e,t,o){if(o&4194240){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,gx(e,o)}}var Mm={readContext:Mo,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},xM={readContext:Mo,useCallback:function(e,t){return cs().memoizedState=[e,t===void 0?null:t],e},useContext:Mo,useEffect:cw,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,rm(4194308,4,bC.bind(null,t,e),o)},useLayoutEffect:function(e,t){return rm(4194308,4,e,t)},useInsertionEffect:function(e,t){return rm(4,2,e,t)},useMemo:function(e,t){var o=cs();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var l=cs();return t=o!==void 0?o(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=_M.bind(null,ln,e),[l.memoizedState,e]},useRef:function(e){var t=cs();return e={current:e},t.memoizedState=e},useState:lw,useDebugValue:$x,useDeferredValue:function(e){return cs().memoizedState=e},useTransition:function(){var e=lw(!1),t=e[0];return e=yM.bind(null,e[1]),cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var l=ln,p=cs();if(nn){if(o===void 0)throw Error(Je(407));o=o()}else{if(o=t(),Gn===null)throw Error(Je(349));ql&30||pC(l,t,o)}p.memoizedState=o;var m={value:o,getSnapshot:t};return p.queue=m,cw(mC.bind(null,l,m,e),[e]),l.flags|=2048,Jd(9,fC.bind(null,l,m,o,t),void 0,null),o},useId:function(){var e=cs(),t=Gn.identifierPrefix;if(nn){var o=Us,l=Vs;o=(l&~(1<<32-Go(l)-1)).toString(32)+o,t=":"+t+"R"+o,o=Kd++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=gM++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bM={readContext:Mo,useCallback:SC,useContext:Mo,useEffect:Ox,useImperativeHandle:wC,useInsertionEffect:vC,useLayoutEffect:xC,useMemo:CC,useReducer:k_,useRef:_C,useState:function(){return k_(Yd)},useDebugValue:$x,useDeferredValue:function(e){var t=Ao();return TC(t,Rn.memoizedState,e)},useTransition:function(){var e=k_(Yd)[0],t=Ao().memoizedState;return[e,t]},useMutableSource:hC,useSyncExternalStore:dC,useId:kC,unstable_isNewReconciler:!1},wM={readContext:Mo,useCallback:SC,useContext:Mo,useEffect:Ox,useImperativeHandle:wC,useInsertionEffect:vC,useLayoutEffect:xC,useMemo:CC,useReducer:I_,useRef:_C,useState:function(){return I_(Yd)},useDebugValue:$x,useDeferredValue:function(e){var t=Ao();return Rn===null?t.memoizedState=e:TC(t,Rn.memoizedState,e)},useTransition:function(){var e=I_(Yd)[0],t=Ao().memoizedState;return[e,t]},useMutableSource:hC,useSyncExternalStore:dC,useId:kC,unstable_isNewReconciler:!1};function jo(e,t){if(e&&e.defaultProps){t=cn({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}function bv(e,t,o,l){t=e.memoizedState,o=o(l,t),o=o==null?t:cn({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Jm={isMounted:function(e){return(e=e._reactInternals)?Yl(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var l=Ei(),p=Ga(e),m=Ws(l,p);m.payload=t,o!=null&&(m.callback=o),t=Ua(e,m,p),t!==null&&(Ho(t,e,p,l),em(t,e,p))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var l=Ei(),p=Ga(e),m=Ws(l,p);m.tag=1,m.payload=t,o!=null&&(m.callback=o),t=Ua(e,m,p),t!==null&&(Ho(t,e,p,l),em(t,e,p))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=Ei(),l=Ga(e),p=Ws(o,l);p.tag=2,t!=null&&(p.callback=t),t=Ua(e,p,l),t!==null&&(Ho(t,e,l,o),em(t,e,l))}};function uw(e,t,o,l,p,m,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,g):t.prototype&&t.prototype.isPureReactComponent?!Wd(o,l)||!Wd(p,m):!0}function MC(e,t,o){var l=!1,p=Xa,m=t.contextType;return typeof m=="object"&&m!==null?m=Mo(m):(p=Hi(t)?Gl:yi.current,l=t.contextTypes,m=(l=l!=null)?ku(e,p):Xa),t=new t(o,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jm,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=p,e.__reactInternalMemoizedMaskedChildContext=m),t}function hw(e,t,o,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,l),t.state!==e&&Jm.enqueueReplaceState(t,t.state,null)}function wv(e,t,o,l){var p=e.stateNode;p.props=o,p.state=e.memoizedState,p.refs={},Ax(e);var m=t.contextType;typeof m=="object"&&m!==null?p.context=Mo(m):(m=Hi(t)?Gl:yi.current,p.context=ku(e,m)),p.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(bv(e,t,m,o),p.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(t=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),t!==p.state&&Jm.enqueueReplaceState(p,p.state,null),Im(e,o,p,l),p.state=e.memoizedState),typeof p.componentDidMount=="function"&&(e.flags|=4194308)}function Mu(e,t){try{var o="",l=t;do o+=KE(l),l=l.return;while(l);var p=o}catch(m){p=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:p,digest:null}}function E_(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function Sv(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var SM=typeof WeakMap=="function"?WeakMap:Map;function AC(e,t,o){o=Ws(-1,o),o.tag=3,o.payload={element:null};var l=t.value;return o.callback=function(){zm||(zm=!0,Rv=l),Sv(e,t)},o}function zC(e,t,o){o=Ws(-1,o),o.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var p=t.value;o.payload=function(){return l(p)},o.callback=function(){Sv(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(o.callback=function(){Sv(e,t),typeof l!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),o}function dw(e,t,o){var l=e.pingCache;if(l===null){l=e.pingCache=new SM;var p=new Set;l.set(t,p)}else p=l.get(t),p===void 0&&(p=new Set,l.set(t,p));p.has(o)||(p.add(o),e=FM.bind(null,e,t,o),t.then(e,e))}function pw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function fw(e,t,o,l,p){return e.mode&1?(e.flags|=65536,e.lanes=p,e):(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=Ws(-1,1),t.tag=2,Ua(o,t,1))),o.lanes|=1),e)}var CM=Ys.ReactCurrentOwner,Wi=!1;function Ii(e,t,o,l){t.child=e===null?aC(t,null,o,l):Eu(t,e.child,o,l)}function mw(e,t,o,l,p){o=o.render;var m=t.ref;return xu(t,p),l=Bx(e,t,o,l,m,p),o=Fx(),e!==null&&!Wi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~p,Zs(e,t,p)):(nn&&o&&Cx(t),t.flags|=1,Ii(e,t,l,p),t.child)}function gw(e,t,o,l,p){if(e===null){var m=o.type;return typeof m=="function"&&!qx(m)&&m.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=m,RC(e,t,m,l,p)):(e=sm(o.type,null,l,t,t.mode,p),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!(e.lanes&p)){var g=m.memoizedProps;if(o=o.compare,o=o!==null?o:Wd,o(g,l)&&e.ref===t.ref)return Zs(e,t,p)}return t.flags|=1,e=Ha(m,l),e.ref=t.ref,e.return=t,t.child=e}function RC(e,t,o,l,p){if(e!==null){var m=e.memoizedProps;if(Wd(m,l)&&e.ref===t.ref)if(Wi=!1,t.pendingProps=l=m,(e.lanes&p)!==0)e.flags&131072&&(Wi=!0);else return t.lanes=e.lanes,Zs(e,t,p)}return Cv(e,t,o,l,p)}function DC(e,t,o){var l=t.pendingProps,p=l.children,m=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zr(fu,ao),ao|=o;else{if(!(o&1073741824))return e=m!==null?m.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Zr(fu,ao),ao|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=m!==null?m.baseLanes:o,Zr(fu,ao),ao|=l}else m!==null?(l=m.baseLanes|o,t.memoizedState=null):l=o,Zr(fu,ao),ao|=l;return Ii(e,t,p,o),t.child}function LC(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function Cv(e,t,o,l,p){var m=Hi(o)?Gl:yi.current;return m=ku(t,m),xu(t,p),o=Bx(e,t,o,l,m,p),l=Fx(),e!==null&&!Wi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~p,Zs(e,t,p)):(nn&&l&&Cx(t),t.flags|=1,Ii(e,t,o,p),t.child)}function yw(e,t,o,l,p){if(Hi(o)){var m=!0;wm(t)}else m=!1;if(xu(t,p),t.stateNode===null)nm(e,t),MC(t,o,l),wv(t,o,l,p),l=!0;else if(e===null){var g=t.stateNode,u=t.memoizedProps;g.props=u;var I=g.context,M=o.contextType;typeof M=="object"&&M!==null?M=Mo(M):(M=Hi(o)?Gl:yi.current,M=ku(t,M));var F=o.getDerivedStateFromProps,L=typeof F=="function"||typeof g.getSnapshotBeforeUpdate=="function";L||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==l||I!==M)&&hw(t,g,l,M),Da=!1;var z=t.memoizedState;g.state=z,Im(t,l,g,p),I=t.memoizedState,u!==l||z!==I||Gi.current||Da?(typeof F=="function"&&(bv(t,o,F,l),I=t.memoizedState),(u=Da||uw(t,o,u,l,z,I,M))?(L||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=I),g.props=l,g.state=I,g.context=M,l=u):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{g=t.stateNode,cC(e,t),u=t.memoizedProps,M=t.type===t.elementType?u:jo(t.type,u),g.props=M,L=t.pendingProps,z=g.context,I=o.contextType,typeof I=="object"&&I!==null?I=Mo(I):(I=Hi(o)?Gl:yi.current,I=ku(t,I));var J=o.getDerivedStateFromProps;(F=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==L||z!==I)&&hw(t,g,l,I),Da=!1,z=t.memoizedState,g.state=z,Im(t,l,g,p);var H=t.memoizedState;u!==L||z!==H||Gi.current||Da?(typeof J=="function"&&(bv(t,o,J,l),H=t.memoizedState),(M=Da||uw(t,o,M,l,z,H,I)||!1)?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,H,I),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,H,I)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=H),g.props=l,g.state=H,g.context=I,l=M):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),l=!1)}return Tv(e,t,o,l,m,p)}function Tv(e,t,o,l,p,m){LC(e,t);var g=(t.flags&128)!==0;if(!l&&!g)return p&&rw(t,o,!1),Zs(e,t,m);l=t.stateNode,CM.current=t;var u=g&&typeof o.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&g?(t.child=Eu(t,e.child,null,m),t.child=Eu(t,null,u,m)):Ii(e,t,u,m),t.memoizedState=l.state,p&&rw(t,o,!0),t.child}function BC(e){var t=e.stateNode;t.pendingContext?tw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tw(e,t.context,!1),zx(e,t.containerInfo)}function _w(e,t,o,l,p){return Iu(),kx(p),t.flags|=256,Ii(e,t,o,l),t.child}var kv={dehydrated:null,treeContext:null,retryLane:0};function Iv(e){return{baseLanes:e,cachePool:null,transitions:null}}function FC(e,t,o){var l=t.pendingProps,p=an.current,m=!1,g=(t.flags&128)!==0,u;if((u=g)||(u=e!==null&&e.memoizedState===null?!1:(p&2)!==0),u?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(p|=1),Zr(an,p&1),e===null)return vv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=l.children,e=l.fallback,m?(l=t.mode,m=t.child,g={mode:"hidden",children:g},!(l&1)&&m!==null?(m.childLanes=0,m.pendingProps=g):m=tg(g,l,0,null),e=Ul(e,l,o,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=Iv(o),t.memoizedState=kv,e):Nx(t,g));if(p=e.memoizedState,p!==null&&(u=p.dehydrated,u!==null))return TM(e,t,g,l,u,p,o);if(m){m=l.fallback,g=t.mode,p=e.child,u=p.sibling;var I={mode:"hidden",children:l.children};return!(g&1)&&t.child!==p?(l=t.child,l.childLanes=0,l.pendingProps=I,t.deletions=null):(l=Ha(p,I),l.subtreeFlags=p.subtreeFlags&14680064),u!==null?m=Ha(u,m):(m=Ul(m,g,o,null),m.flags|=2),m.return=t,l.return=t,l.sibling=m,t.child=l,l=m,m=t.child,g=e.child.memoizedState,g=g===null?Iv(o):{baseLanes:g.baseLanes|o,cachePool:null,transitions:g.transitions},m.memoizedState=g,m.childLanes=e.childLanes&~o,t.memoizedState=kv,l}return m=e.child,e=m.sibling,l=Ha(m,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=o),l.return=t,l.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=l,t.memoizedState=null,l}function Nx(e,t){return t=tg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bf(e,t,o,l){return l!==null&&kx(l),Eu(t,e.child,null,o),e=Nx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TM(e,t,o,l,p,m,g){if(o)return t.flags&256?(t.flags&=-257,l=E_(Error(Je(422))),Bf(e,t,g,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=l.fallback,p=t.mode,l=tg({mode:"visible",children:l.children},p,0,null),m=Ul(m,p,g,null),m.flags|=2,l.return=t,m.return=t,l.sibling=m,t.child=l,t.mode&1&&Eu(t,e.child,null,g),t.child.memoizedState=Iv(g),t.memoizedState=kv,m);if(!(t.mode&1))return Bf(e,t,g,null);if(p.data==="$!"){if(l=p.nextSibling&&p.nextSibling.dataset,l)var u=l.dgst;return l=u,m=Error(Je(419)),l=E_(m,l,void 0),Bf(e,t,g,l)}if(u=(g&e.childLanes)!==0,Wi||u){if(l=Gn,l!==null){switch(g&-g){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(l.suspendedLanes|g)?0:p,p!==0&&p!==m.retryLane&&(m.retryLane=p,qs(e,p),Ho(l,e,p,-1))}return Hx(),l=E_(Error(Je(421))),Bf(e,t,g,l)}return p.data==="$?"?(t.flags|=128,t.child=e.child,t=OM.bind(null,e),p._reactRetry=t,null):(e=m.treeContext,co=Va(p.nextSibling),uo=t,nn=!0,Uo=null,e!==null&&(Co[To++]=Vs,Co[To++]=Us,Co[To++]=Hl,Vs=e.id,Us=e.overflow,Hl=t),t=Nx(t,l.children),t.flags|=4096,t)}function vw(e,t,o){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),xv(e.return,t,o)}function P_(e,t,o,l,p){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:p}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=o,m.tailMode=p)}function OC(e,t,o){var l=t.pendingProps,p=l.revealOrder,m=l.tail;if(Ii(e,t,l.children,o),l=an.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vw(e,o,t);else if(e.tag===19)vw(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Zr(an,l),!(t.mode&1))t.memoizedState=null;else switch(p){case"forwards":for(o=t.child,p=null;o!==null;)e=o.alternate,e!==null&&Em(e)===null&&(p=o),o=o.sibling;o=p,o===null?(p=t.child,t.child=null):(p=o.sibling,o.sibling=null),P_(t,!1,p,o,m);break;case"backwards":for(o=null,p=t.child,t.child=null;p!==null;){if(e=p.alternate,e!==null&&Em(e)===null){t.child=p;break}e=p.sibling,p.sibling=o,o=p,p=e}P_(t,!0,o,null,m);break;case"together":P_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zs(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Zl|=t.lanes,!(o&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Je(153));if(t.child!==null){for(e=t.child,o=Ha(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Ha(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function kM(e,t,o){switch(t.tag){case 3:BC(t),Iu();break;case 5:uC(t);break;case 1:Hi(t.type)&&wm(t);break;case 4:zx(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,p=t.memoizedProps.value;Zr(Tm,l._currentValue),l._currentValue=p;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Zr(an,an.current&1),t.flags|=128,null):o&t.child.childLanes?FC(e,t,o):(Zr(an,an.current&1),e=Zs(e,t,o),e!==null?e.sibling:null);Zr(an,an.current&1);break;case 19:if(l=(o&t.childLanes)!==0,e.flags&128){if(l)return OC(e,t,o);t.flags|=128}if(p=t.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Zr(an,an.current),l)break;return null;case 22:case 23:return t.lanes=0,DC(e,t,o)}return Zs(e,t,o)}var $C,Ev,NC,jC;$C=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Ev=function(){};NC=function(e,t,o,l){var p=e.memoizedProps;if(p!==l){e=t.stateNode,$l(gs.current);var m=null;switch(o){case"input":p=K_(e,p),l=K_(e,l),m=[];break;case"select":p=cn({},p,{value:void 0}),l=cn({},l,{value:void 0}),m=[];break;case"textarea":p=Q_(e,p),l=Q_(e,l),m=[];break;default:typeof p.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=xm)}tv(o,l);var g;o=null;for(M in p)if(!l.hasOwnProperty(M)&&p.hasOwnProperty(M)&&p[M]!=null)if(M==="style"){var u=p[M];for(g in u)u.hasOwnProperty(g)&&(o||(o={}),o[g]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(Fd.hasOwnProperty(M)?m||(m=[]):(m=m||[]).push(M,null));for(M in l){var I=l[M];if(u=p!=null?p[M]:void 0,l.hasOwnProperty(M)&&I!==u&&(I!=null||u!=null))if(M==="style")if(u){for(g in u)!u.hasOwnProperty(g)||I&&I.hasOwnProperty(g)||(o||(o={}),o[g]="");for(g in I)I.hasOwnProperty(g)&&u[g]!==I[g]&&(o||(o={}),o[g]=I[g])}else o||(m||(m=[]),m.push(M,o)),o=I;else M==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,u=u?u.__html:void 0,I!=null&&u!==I&&(m=m||[]).push(M,I)):M==="children"?typeof I!="string"&&typeof I!="number"||(m=m||[]).push(M,""+I):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(Fd.hasOwnProperty(M)?(I!=null&&M==="onScroll"&&Yr("scroll",e),m||u===I||(m=[])):(m=m||[]).push(M,I))}o&&(m=m||[]).push("style",o);var M=m;(t.updateQueue=M)&&(t.flags|=4)}};jC=function(e,t,o,l){o!==l&&(t.flags|=4)};function ld(e,t){if(!nn)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function pi(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,l=0;if(t)for(var p=e.child;p!==null;)o|=p.lanes|p.childLanes,l|=p.subtreeFlags&14680064,l|=p.flags&14680064,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)o|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=l,e.childLanes=o,t}function IM(e,t,o){var l=t.pendingProps;switch(Tx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(t),null;case 1:return Hi(t.type)&&bm(),pi(t),null;case 3:return l=t.stateNode,Pu(),Jr(Gi),Jr(yi),Dx(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Df(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Uo!==null&&(Bv(Uo),Uo=null))),Ev(e,t),pi(t),null;case 5:Rx(t);var p=$l(Xd.current);if(o=t.type,e!==null&&t.stateNode!=null)NC(e,t,o,l,p),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(Je(166));return pi(t),null}if(e=$l(gs.current),Df(t)){l=t.stateNode,o=t.type;var m=t.memoizedProps;switch(l[ds]=t,l[qd]=m,e=(t.mode&1)!==0,o){case"dialog":Yr("cancel",l),Yr("close",l);break;case"iframe":case"object":case"embed":Yr("load",l);break;case"video":case"audio":for(p=0;p<vd.length;p++)Yr(vd[p],l);break;case"source":Yr("error",l);break;case"img":case"image":case"link":Yr("error",l),Yr("load",l);break;case"details":Yr("toggle",l);break;case"input":E1(l,m),Yr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!m.multiple},Yr("invalid",l);break;case"textarea":M1(l,m),Yr("invalid",l)}tv(o,m),p=null;for(var g in m)if(m.hasOwnProperty(g)){var u=m[g];g==="children"?typeof u=="string"?l.textContent!==u&&(m.suppressHydrationWarning!==!0&&Rf(l.textContent,u,e),p=["children",u]):typeof u=="number"&&l.textContent!==""+u&&(m.suppressHydrationWarning!==!0&&Rf(l.textContent,u,e),p=["children",""+u]):Fd.hasOwnProperty(g)&&u!=null&&g==="onScroll"&&Yr("scroll",l)}switch(o){case"input":Tf(l),P1(l,m,!0);break;case"textarea":Tf(l),A1(l);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(l.onclick=xm)}l=p,t.updateQueue=l,l!==null&&(t.flags|=4)}else{g=p.nodeType===9?p:p.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mS(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(o,{is:l.is}):(e=g.createElement(o),o==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,o),e[ds]=t,e[qd]=l,$C(e,t,!1,!1),t.stateNode=e;e:{switch(g=rv(o,l),o){case"dialog":Yr("cancel",e),Yr("close",e),p=l;break;case"iframe":case"object":case"embed":Yr("load",e),p=l;break;case"video":case"audio":for(p=0;p<vd.length;p++)Yr(vd[p],e);p=l;break;case"source":Yr("error",e),p=l;break;case"img":case"image":case"link":Yr("error",e),Yr("load",e),p=l;break;case"details":Yr("toggle",e),p=l;break;case"input":E1(e,l),p=K_(e,l),Yr("invalid",e);break;case"option":p=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},p=cn({},l,{value:void 0}),Yr("invalid",e);break;case"textarea":M1(e,l),p=Q_(e,l),Yr("invalid",e);break;default:p=l}tv(o,p),u=p;for(m in u)if(u.hasOwnProperty(m)){var I=u[m];m==="style"?_S(e,I):m==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&gS(e,I)):m==="children"?typeof I=="string"?(o!=="textarea"||I!=="")&&Od(e,I):typeof I=="number"&&Od(e,""+I):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Fd.hasOwnProperty(m)?I!=null&&m==="onScroll"&&Yr("scroll",e):I!=null&&ux(e,m,I,g))}switch(o){case"input":Tf(e),P1(e,l,!1);break;case"textarea":Tf(e),A1(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Za(l.value));break;case"select":e.multiple=!!l.multiple,m=l.value,m!=null?gu(e,!!l.multiple,m,!1):l.defaultValue!=null&&gu(e,!!l.multiple,l.defaultValue,!0);break;default:typeof p.onClick=="function"&&(e.onclick=xm)}switch(o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pi(t),null;case 6:if(e&&t.stateNode!=null)jC(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(Je(166));if(o=$l(Xd.current),$l(gs.current),Df(t)){if(l=t.stateNode,o=t.memoizedProps,l[ds]=t,(m=l.nodeValue!==o)&&(e=uo,e!==null))switch(e.tag){case 3:Rf(l.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rf(l.nodeValue,o,(e.mode&1)!==0)}m&&(t.flags|=4)}else l=(o.nodeType===9?o:o.ownerDocument).createTextNode(l),l[ds]=t,t.stateNode=l}return pi(t),null;case 13:if(Jr(an),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nn&&co!==null&&t.mode&1&&!(t.flags&128))oC(),Iu(),t.flags|=98560,m=!1;else if(m=Df(t),l!==null&&l.dehydrated!==null){if(e===null){if(!m)throw Error(Je(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(Je(317));m[ds]=t}else Iu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pi(t),m=!1}else Uo!==null&&(Bv(Uo),Uo=null),m=!0;if(!m)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||an.current&1?Dn===0&&(Dn=3):Hx())),t.updateQueue!==null&&(t.flags|=4),pi(t),null);case 4:return Pu(),Ev(e,t),e===null&&Gd(t.stateNode.containerInfo),pi(t),null;case 10:return Px(t.type._context),pi(t),null;case 17:return Hi(t.type)&&bm(),pi(t),null;case 19:if(Jr(an),m=t.memoizedState,m===null)return pi(t),null;if(l=(t.flags&128)!==0,g=m.rendering,g===null)if(l)ld(m,!1);else{if(Dn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=Em(e),g!==null){for(t.flags|=128,ld(m,!1),l=g.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=o,o=t.child;o!==null;)m=o,e=l,m.flags&=14680066,g=m.alternate,g===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=g.childLanes,m.lanes=g.lanes,m.child=g.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=g.memoizedProps,m.memoizedState=g.memoizedState,m.updateQueue=g.updateQueue,m.type=g.type,e=g.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Zr(an,an.current&1|2),t.child}e=e.sibling}m.tail!==null&&xn()>Au&&(t.flags|=128,l=!0,ld(m,!1),t.lanes=4194304)}else{if(!l)if(e=Em(g),e!==null){if(t.flags|=128,l=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),ld(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!nn)return pi(t),null}else 2*xn()-m.renderingStartTime>Au&&o!==1073741824&&(t.flags|=128,l=!0,ld(m,!1),t.lanes=4194304);m.isBackwards?(g.sibling=t.child,t.child=g):(o=m.last,o!==null?o.sibling=g:t.child=g,m.last=g)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=xn(),t.sibling=null,o=an.current,Zr(an,l?o&1|2:o&1),t):(pi(t),null);case 22:case 23:return Gx(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?ao&1073741824&&(pi(t),t.subtreeFlags&6&&(t.flags|=8192)):pi(t),null;case 24:return null;case 25:return null}throw Error(Je(156,t.tag))}function EM(e,t){switch(Tx(t),t.tag){case 1:return Hi(t.type)&&bm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pu(),Jr(Gi),Jr(yi),Dx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Rx(t),null;case 13:if(Jr(an),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Je(340));Iu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jr(an),null;case 4:return Pu(),null;case 10:return Px(t.type._context),null;case 22:case 23:return Gx(),null;case 24:return null;default:return null}}var Ff=!1,mi=!1,PM=typeof WeakSet=="function"?WeakSet:Set,bt=null;function pu(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(l){yn(e,t,l)}else o.current=null}function Pv(e,t,o){try{o()}catch(l){yn(e,t,l)}}var xw=!1;function MM(e,t){if(dv=ym,e=HS(),Sx(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var p=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var g=0,u=-1,I=-1,M=0,F=0,L=e,z=null;t:for(;;){for(var J;L!==o||p!==0&&L.nodeType!==3||(u=g+p),L!==m||l!==0&&L.nodeType!==3||(I=g+l),L.nodeType===3&&(g+=L.nodeValue.length),(J=L.firstChild)!==null;)z=L,L=J;for(;;){if(L===e)break t;if(z===o&&++M===p&&(u=g),z===m&&++F===l&&(I=g),(J=L.nextSibling)!==null)break;L=z,z=L.parentNode}L=J}o=u===-1||I===-1?null:{start:u,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(pv={focusedElem:e,selectionRange:o},ym=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){t=bt;try{var H=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var re=H.memoizedProps,le=H.memoizedState,V=t.stateNode,U=V.getSnapshotBeforeUpdate(t.elementType===t.type?re:jo(t.type,re),le);V.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(Q){yn(t,t.return,Q)}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}return H=xw,xw=!1,H}function Md(e,t,o){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&e)===e){var m=p.destroy;p.destroy=void 0,m!==void 0&&Pv(t,o,m)}p=p.next}while(p!==l)}}function Qm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var l=o.create;o.destroy=l()}o=o.next}while(o!==t)}}function Mv(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function VC(e){var t=e.alternate;t!==null&&(e.alternate=null,VC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ds],delete t[qd],delete t[gv],delete t[dM],delete t[pM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function UC(e){return e.tag===5||e.tag===3||e.tag===4}function bw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||UC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Av(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=xm));else if(l!==4&&(e=e.child,e!==null))for(Av(e,t,o),e=e.sibling;e!==null;)Av(e,t,o),e=e.sibling}function zv(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(zv(e,t,o),e=e.sibling;e!==null;)zv(e,t,o),e=e.sibling}var Qn=null,Vo=!1;function Aa(e,t,o){for(o=o.child;o!==null;)WC(e,t,o),o=o.sibling}function WC(e,t,o){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(Gm,o)}catch{}switch(o.tag){case 5:mi||pu(o,t);case 6:var l=Qn,p=Vo;Qn=null,Aa(e,t,o),Qn=l,Vo=p,Qn!==null&&(Vo?(e=Qn,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Qn.removeChild(o.stateNode));break;case 18:Qn!==null&&(Vo?(e=Qn,o=o.stateNode,e.nodeType===8?w_(e.parentNode,o):e.nodeType===1&&w_(e,o),Vd(e)):w_(Qn,o.stateNode));break;case 4:l=Qn,p=Vo,Qn=o.stateNode.containerInfo,Vo=!0,Aa(e,t,o),Qn=l,Vo=p;break;case 0:case 11:case 14:case 15:if(!mi&&(l=o.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){p=l=l.next;do{var m=p,g=m.destroy;m=m.tag,g!==void 0&&(m&2||m&4)&&Pv(o,t,g),p=p.next}while(p!==l)}Aa(e,t,o);break;case 1:if(!mi&&(pu(o,t),l=o.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=o.memoizedProps,l.state=o.memoizedState,l.componentWillUnmount()}catch(u){yn(o,t,u)}Aa(e,t,o);break;case 21:Aa(e,t,o);break;case 22:o.mode&1?(mi=(l=mi)||o.memoizedState!==null,Aa(e,t,o),mi=l):Aa(e,t,o);break;default:Aa(e,t,o)}}function ww(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new PM),t.forEach(function(l){var p=$M.bind(null,e,l);o.has(l)||(o.add(l),l.then(p,p))})}}function $o(e,t){var o=t.deletions;if(o!==null)for(var l=0;l<o.length;l++){var p=o[l];try{var m=e,g=t,u=g;e:for(;u!==null;){switch(u.tag){case 5:Qn=u.stateNode,Vo=!1;break e;case 3:Qn=u.stateNode.containerInfo,Vo=!0;break e;case 4:Qn=u.stateNode.containerInfo,Vo=!0;break e}u=u.return}if(Qn===null)throw Error(Je(160));WC(m,g,p),Qn=null,Vo=!1;var I=p.alternate;I!==null&&(I.return=null),p.return=null}catch(M){yn(p,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)GC(t,e),t=t.sibling}function GC(e,t){var o=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($o(t,e),ss(e),l&4){try{Md(3,e,e.return),Qm(3,e)}catch(re){yn(e,e.return,re)}try{Md(5,e,e.return)}catch(re){yn(e,e.return,re)}}break;case 1:$o(t,e),ss(e),l&512&&o!==null&&pu(o,o.return);break;case 5:if($o(t,e),ss(e),l&512&&o!==null&&pu(o,o.return),e.flags&32){var p=e.stateNode;try{Od(p,"")}catch(re){yn(e,e.return,re)}}if(l&4&&(p=e.stateNode,p!=null)){var m=e.memoizedProps,g=o!==null?o.memoizedProps:m,u=e.type,I=e.updateQueue;if(e.updateQueue=null,I!==null)try{u==="input"&&m.type==="radio"&&m.name!=null&&pS(p,m),rv(u,g);var M=rv(u,m);for(g=0;g<I.length;g+=2){var F=I[g],L=I[g+1];F==="style"?_S(p,L):F==="dangerouslySetInnerHTML"?gS(p,L):F==="children"?Od(p,L):ux(p,F,L,M)}switch(u){case"input":Y_(p,m);break;case"textarea":fS(p,m);break;case"select":var z=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!m.multiple;var J=m.value;J!=null?gu(p,!!m.multiple,J,!1):z!==!!m.multiple&&(m.defaultValue!=null?gu(p,!!m.multiple,m.defaultValue,!0):gu(p,!!m.multiple,m.multiple?[]:"",!1))}p[qd]=m}catch(re){yn(e,e.return,re)}}break;case 6:if($o(t,e),ss(e),l&4){if(e.stateNode===null)throw Error(Je(162));p=e.stateNode,m=e.memoizedProps;try{p.nodeValue=m}catch(re){yn(e,e.return,re)}}break;case 3:if($o(t,e),ss(e),l&4&&o!==null&&o.memoizedState.isDehydrated)try{Vd(t.containerInfo)}catch(re){yn(e,e.return,re)}break;case 4:$o(t,e),ss(e);break;case 13:$o(t,e),ss(e),p=e.child,p.flags&8192&&(m=p.memoizedState!==null,p.stateNode.isHidden=m,!m||p.alternate!==null&&p.alternate.memoizedState!==null||(Ux=xn())),l&4&&ww(e);break;case 22:if(F=o!==null&&o.memoizedState!==null,e.mode&1?(mi=(M=mi)||F,$o(t,e),mi=M):$o(t,e),ss(e),l&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!F&&e.mode&1)for(bt=e,F=e.child;F!==null;){for(L=bt=F;bt!==null;){switch(z=bt,J=z.child,z.tag){case 0:case 11:case 14:case 15:Md(4,z,z.return);break;case 1:pu(z,z.return);var H=z.stateNode;if(typeof H.componentWillUnmount=="function"){l=z,o=z.return;try{t=l,H.props=t.memoizedProps,H.state=t.memoizedState,H.componentWillUnmount()}catch(re){yn(l,o,re)}}break;case 5:pu(z,z.return);break;case 22:if(z.memoizedState!==null){Cw(L);continue}}J!==null?(J.return=z,bt=J):Cw(L)}F=F.sibling}e:for(F=null,L=e;;){if(L.tag===5){if(F===null){F=L;try{p=L.stateNode,M?(m=p.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(u=L.stateNode,I=L.memoizedProps.style,g=I!=null&&I.hasOwnProperty("display")?I.display:null,u.style.display=yS("display",g))}catch(re){yn(e,e.return,re)}}}else if(L.tag===6){if(F===null)try{L.stateNode.nodeValue=M?"":L.memoizedProps}catch(re){yn(e,e.return,re)}}else if((L.tag!==22&&L.tag!==23||L.memoizedState===null||L===e)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===e)break e;for(;L.sibling===null;){if(L.return===null||L.return===e)break e;F===L&&(F=null),L=L.return}F===L&&(F=null),L.sibling.return=L.return,L=L.sibling}}break;case 19:$o(t,e),ss(e),l&4&&ww(e);break;case 21:break;default:$o(t,e),ss(e)}}function ss(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(UC(o)){var l=o;break e}o=o.return}throw Error(Je(160))}switch(l.tag){case 5:var p=l.stateNode;l.flags&32&&(Od(p,""),l.flags&=-33);var m=bw(e);zv(e,m,p);break;case 3:case 4:var g=l.stateNode.containerInfo,u=bw(e);Av(e,u,g);break;default:throw Error(Je(161))}}catch(I){yn(e,e.return,I)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function AM(e,t,o){bt=e,HC(e)}function HC(e,t,o){for(var l=(e.mode&1)!==0;bt!==null;){var p=bt,m=p.child;if(p.tag===22&&l){var g=p.memoizedState!==null||Ff;if(!g){var u=p.alternate,I=u!==null&&u.memoizedState!==null||mi;u=Ff;var M=mi;if(Ff=g,(mi=I)&&!M)for(bt=p;bt!==null;)g=bt,I=g.child,g.tag===22&&g.memoizedState!==null?Tw(p):I!==null?(I.return=g,bt=I):Tw(p);for(;m!==null;)bt=m,HC(m),m=m.sibling;bt=p,Ff=u,mi=M}Sw(e)}else p.subtreeFlags&8772&&m!==null?(m.return=p,bt=m):Sw(e)}}function Sw(e){for(;bt!==null;){var t=bt;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mi||Qm(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!mi)if(o===null)l.componentDidMount();else{var p=t.elementType===t.type?o.memoizedProps:jo(t.type,o.memoizedProps);l.componentDidUpdate(p,o.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&aw(t,m,l);break;case 3:var g=t.updateQueue;if(g!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}aw(t,g,o)}break;case 5:var u=t.stateNode;if(o===null&&t.flags&4){o=u;var I=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&o.focus();break;case"img":I.src&&(o.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var F=M.memoizedState;if(F!==null){var L=F.dehydrated;L!==null&&Vd(L)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}mi||t.flags&512&&Mv(t)}catch(z){yn(t,t.return,z)}}if(t===e){bt=null;break}if(o=t.sibling,o!==null){o.return=t.return,bt=o;break}bt=t.return}}function Cw(e){for(;bt!==null;){var t=bt;if(t===e){bt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,bt=o;break}bt=t.return}}function Tw(e){for(;bt!==null;){var t=bt;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{Qm(4,t)}catch(I){yn(t,o,I)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var p=t.return;try{l.componentDidMount()}catch(I){yn(t,p,I)}}var m=t.return;try{Mv(t)}catch(I){yn(t,m,I)}break;case 5:var g=t.return;try{Mv(t)}catch(I){yn(t,g,I)}}}catch(I){yn(t,t.return,I)}if(t===e){bt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,bt=u;break}bt=t.return}}var zM=Math.ceil,Am=Ys.ReactCurrentDispatcher,jx=Ys.ReactCurrentOwner,Po=Ys.ReactCurrentBatchConfig,br=0,Gn=null,In=null,ti=0,ao=0,fu=Qa(0),Dn=0,Qd=null,Zl=0,eg=0,Vx=0,Ad=null,Ui=null,Ux=0,Au=1/0,$s=null,zm=!1,Rv=null,Wa=null,Of=!1,Oa=null,Rm=0,zd=0,Dv=null,im=-1,om=0;function Ei(){return br&6?xn():im!==-1?im:im=xn()}function Ga(e){return e.mode&1?br&2&&ti!==0?ti&-ti:mM.transition!==null?(om===0&&(om=MS()),om):(e=Br,e!==0||(e=window.event,e=e===void 0?16:FS(e.type)),e):1}function Ho(e,t,o,l){if(50<zd)throw zd=0,Dv=null,Error(Je(185));ap(e,o,l),(!(br&2)||e!==Gn)&&(e===Gn&&(!(br&2)&&(eg|=o),Dn===4&&Ba(e,ti)),qi(e,l),o===1&&br===0&&!(t.mode&1)&&(Au=xn()+500,Km&&el()))}function qi(e,t){var o=e.callbackNode;mP(e,t);var l=gm(e,e===Gn?ti:0);if(l===0)o!==null&&D1(o),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(o!=null&&D1(o),t===1)e.tag===0?fM(kw.bind(null,e)):rC(kw.bind(null,e)),uM(function(){!(br&6)&&el()}),o=null;else{switch(AS(l)){case 1:o=mx;break;case 4:o=ES;break;case 16:o=mm;break;case 536870912:o=PS;break;default:o=mm}o=eT(o,qC.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function qC(e,t){if(im=-1,om=0,br&6)throw Error(Je(327));var o=e.callbackNode;if(bu()&&e.callbackNode!==o)return null;var l=gm(e,e===Gn?ti:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=Dm(e,l);else{t=l;var p=br;br|=2;var m=XC();(Gn!==e||ti!==t)&&($s=null,Au=xn()+500,Vl(e,t));do try{LM();break}catch(u){ZC(e,u)}while(!0);Ex(),Am.current=m,br=p,In!==null?t=0:(Gn=null,ti=0,t=Dn)}if(t!==0){if(t===2&&(p=av(e),p!==0&&(l=p,t=Lv(e,p))),t===1)throw o=Qd,Vl(e,0),Ba(e,l),qi(e,xn()),o;if(t===6)Ba(e,l);else{if(p=e.current.alternate,!(l&30)&&!RM(p)&&(t=Dm(e,l),t===2&&(m=av(e),m!==0&&(l=m,t=Lv(e,m))),t===1))throw o=Qd,Vl(e,0),Ba(e,l),qi(e,xn()),o;switch(e.finishedWork=p,e.finishedLanes=l,t){case 0:case 1:throw Error(Je(345));case 2:Dl(e,Ui,$s);break;case 3:if(Ba(e,l),(l&130023424)===l&&(t=Ux+500-xn(),10<t)){if(gm(e,0)!==0)break;if(p=e.suspendedLanes,(p&l)!==l){Ei(),e.pingedLanes|=e.suspendedLanes&p;break}e.timeoutHandle=mv(Dl.bind(null,e,Ui,$s),t);break}Dl(e,Ui,$s);break;case 4:if(Ba(e,l),(l&4194240)===l)break;for(t=e.eventTimes,p=-1;0<l;){var g=31-Go(l);m=1<<g,g=t[g],g>p&&(p=g),l&=~m}if(l=p,l=xn()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*zM(l/1960))-l,10<l){e.timeoutHandle=mv(Dl.bind(null,e,Ui,$s),l);break}Dl(e,Ui,$s);break;case 5:Dl(e,Ui,$s);break;default:throw Error(Je(329))}}}return qi(e,xn()),e.callbackNode===o?qC.bind(null,e):null}function Lv(e,t){var o=Ad;return e.current.memoizedState.isDehydrated&&(Vl(e,t).flags|=256),e=Dm(e,t),e!==2&&(t=Ui,Ui=o,t!==null&&Bv(t)),e}function Bv(e){Ui===null?Ui=e:Ui.push.apply(Ui,e)}function RM(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var l=0;l<o.length;l++){var p=o[l],m=p.getSnapshot;p=p.value;try{if(!qo(m(),p))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ba(e,t){for(t&=~Vx,t&=~eg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-Go(t),l=1<<o;e[o]=-1,t&=~l}}function kw(e){if(br&6)throw Error(Je(327));bu();var t=gm(e,0);if(!(t&1))return qi(e,xn()),null;var o=Dm(e,t);if(e.tag!==0&&o===2){var l=av(e);l!==0&&(t=l,o=Lv(e,l))}if(o===1)throw o=Qd,Vl(e,0),Ba(e,t),qi(e,xn()),o;if(o===6)throw Error(Je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dl(e,Ui,$s),qi(e,xn()),null}function Wx(e,t){var o=br;br|=1;try{return e(t)}finally{br=o,br===0&&(Au=xn()+500,Km&&el())}}function Xl(e){Oa!==null&&Oa.tag===0&&!(br&6)&&bu();var t=br;br|=1;var o=Po.transition,l=Br;try{if(Po.transition=null,Br=1,e)return e()}finally{Br=l,Po.transition=o,br=t,!(br&6)&&el()}}function Gx(){ao=fu.current,Jr(fu)}function Vl(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,cM(o)),In!==null)for(o=In.return;o!==null;){var l=o;switch(Tx(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&bm();break;case 3:Pu(),Jr(Gi),Jr(yi),Dx();break;case 5:Rx(l);break;case 4:Pu();break;case 13:Jr(an);break;case 19:Jr(an);break;case 10:Px(l.type._context);break;case 22:case 23:Gx()}o=o.return}if(Gn=e,In=e=Ha(e.current,null),ti=ao=t,Dn=0,Qd=null,Vx=eg=Zl=0,Ui=Ad=null,Ol!==null){for(t=0;t<Ol.length;t++)if(o=Ol[t],l=o.interleaved,l!==null){o.interleaved=null;var p=l.next,m=o.pending;if(m!==null){var g=m.next;m.next=p,l.next=g}o.pending=l}Ol=null}return e}function ZC(e,t){do{var o=In;try{if(Ex(),tm.current=Mm,Pm){for(var l=ln.memoizedState;l!==null;){var p=l.queue;p!==null&&(p.pending=null),l=l.next}Pm=!1}if(ql=0,Wn=Rn=ln=null,Pd=!1,Kd=0,jx.current=null,o===null||o.return===null){Dn=1,Qd=t,In=null;break}e:{var m=e,g=o.return,u=o,I=t;if(t=ti,u.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var M=I,F=u,L=F.tag;if(!(F.mode&1)&&(L===0||L===11||L===15)){var z=F.alternate;z?(F.updateQueue=z.updateQueue,F.memoizedState=z.memoizedState,F.lanes=z.lanes):(F.updateQueue=null,F.memoizedState=null)}var J=pw(g);if(J!==null){J.flags&=-257,fw(J,g,u,m,t),J.mode&1&&dw(m,M,t),t=J,I=M;var H=t.updateQueue;if(H===null){var re=new Set;re.add(I),t.updateQueue=re}else H.add(I);break e}else{if(!(t&1)){dw(m,M,t),Hx();break e}I=Error(Je(426))}}else if(nn&&u.mode&1){var le=pw(g);if(le!==null){!(le.flags&65536)&&(le.flags|=256),fw(le,g,u,m,t),kx(Mu(I,u));break e}}m=I=Mu(I,u),Dn!==4&&(Dn=2),Ad===null?Ad=[m]:Ad.push(m),m=g;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var V=AC(m,I,t);sw(m,V);break e;case 1:u=I;var U=m.type,G=m.stateNode;if(!(m.flags&128)&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Wa===null||!Wa.has(G)))){m.flags|=65536,t&=-t,m.lanes|=t;var Q=zC(m,u,t);sw(m,Q);break e}}m=m.return}while(m!==null)}YC(o)}catch(fe){t=fe,In===o&&o!==null&&(In=o=o.return);continue}break}while(!0)}function XC(){var e=Am.current;return Am.current=Mm,e===null?Mm:e}function Hx(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),Gn===null||!(Zl&268435455)&&!(eg&268435455)||Ba(Gn,ti)}function Dm(e,t){var o=br;br|=2;var l=XC();(Gn!==e||ti!==t)&&($s=null,Vl(e,t));do try{DM();break}catch(p){ZC(e,p)}while(!0);if(Ex(),br=o,Am.current=l,In!==null)throw Error(Je(261));return Gn=null,ti=0,Dn}function DM(){for(;In!==null;)KC(In)}function LM(){for(;In!==null&&!sP();)KC(In)}function KC(e){var t=QC(e.alternate,e,ao);e.memoizedProps=e.pendingProps,t===null?YC(e):In=t,jx.current=null}function YC(e){var t=e;do{var o=t.alternate;if(e=t.return,t.flags&32768){if(o=EM(o,t),o!==null){o.flags&=32767,In=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dn=6,In=null;return}}else if(o=IM(o,t,ao),o!==null){In=o;return}if(t=t.sibling,t!==null){In=t;return}In=t=e}while(t!==null);Dn===0&&(Dn=5)}function Dl(e,t,o){var l=Br,p=Po.transition;try{Po.transition=null,Br=1,BM(e,t,o,l)}finally{Po.transition=p,Br=l}return null}function BM(e,t,o,l){do bu();while(Oa!==null);if(br&6)throw Error(Je(327));o=e.finishedWork;var p=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(Je(177));e.callbackNode=null,e.callbackPriority=0;var m=o.lanes|o.childLanes;if(gP(e,m),e===Gn&&(In=Gn=null,ti=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Of||(Of=!0,eT(mm,function(){return bu(),null})),m=(o.flags&15990)!==0,o.subtreeFlags&15990||m){m=Po.transition,Po.transition=null;var g=Br;Br=1;var u=br;br|=4,jx.current=null,MM(e,o),GC(o,e),rM(pv),ym=!!dv,pv=dv=null,e.current=o,AM(o),aP(),br=u,Br=g,Po.transition=m}else e.current=o;if(Of&&(Of=!1,Oa=e,Rm=p),m=e.pendingLanes,m===0&&(Wa=null),uP(o.stateNode),qi(e,xn()),t!==null)for(l=e.onRecoverableError,o=0;o<t.length;o++)p=t[o],l(p.value,{componentStack:p.stack,digest:p.digest});if(zm)throw zm=!1,e=Rv,Rv=null,e;return Rm&1&&e.tag!==0&&bu(),m=e.pendingLanes,m&1?e===Dv?zd++:(zd=0,Dv=e):zd=0,el(),null}function bu(){if(Oa!==null){var e=AS(Rm),t=Po.transition,o=Br;try{if(Po.transition=null,Br=16>e?16:e,Oa===null)var l=!1;else{if(e=Oa,Oa=null,Rm=0,br&6)throw Error(Je(331));var p=br;for(br|=4,bt=e.current;bt!==null;){var m=bt,g=m.child;if(bt.flags&16){var u=m.deletions;if(u!==null){for(var I=0;I<u.length;I++){var M=u[I];for(bt=M;bt!==null;){var F=bt;switch(F.tag){case 0:case 11:case 15:Md(8,F,m)}var L=F.child;if(L!==null)L.return=F,bt=L;else for(;bt!==null;){F=bt;var z=F.sibling,J=F.return;if(VC(F),F===M){bt=null;break}if(z!==null){z.return=J,bt=z;break}bt=J}}}var H=m.alternate;if(H!==null){var re=H.child;if(re!==null){H.child=null;do{var le=re.sibling;re.sibling=null,re=le}while(re!==null)}}bt=m}}if(m.subtreeFlags&2064&&g!==null)g.return=m,bt=g;else e:for(;bt!==null;){if(m=bt,m.flags&2048)switch(m.tag){case 0:case 11:case 15:Md(9,m,m.return)}var V=m.sibling;if(V!==null){V.return=m.return,bt=V;break e}bt=m.return}}var U=e.current;for(bt=U;bt!==null;){g=bt;var G=g.child;if(g.subtreeFlags&2064&&G!==null)G.return=g,bt=G;else e:for(g=U;bt!==null;){if(u=bt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Qm(9,u)}}catch(fe){yn(u,u.return,fe)}if(u===g){bt=null;break e}var Q=u.sibling;if(Q!==null){Q.return=u.return,bt=Q;break e}bt=u.return}}if(br=p,el(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(Gm,e)}catch{}l=!0}return l}finally{Br=o,Po.transition=t}}return!1}function Iw(e,t,o){t=Mu(o,t),t=AC(e,t,1),e=Ua(e,t,1),t=Ei(),e!==null&&(ap(e,1,t),qi(e,t))}function yn(e,t,o){if(e.tag===3)Iw(e,e,o);else for(;t!==null;){if(t.tag===3){Iw(t,e,o);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wa===null||!Wa.has(l))){e=Mu(o,e),e=zC(t,e,1),t=Ua(t,e,1),e=Ei(),t!==null&&(ap(t,1,e),qi(t,e));break}}t=t.return}}function FM(e,t,o){var l=e.pingCache;l!==null&&l.delete(t),t=Ei(),e.pingedLanes|=e.suspendedLanes&o,Gn===e&&(ti&o)===o&&(Dn===4||Dn===3&&(ti&130023424)===ti&&500>xn()-Ux?Vl(e,0):Vx|=o),qi(e,t)}function JC(e,t){t===0&&(e.mode&1?(t=Ef,Ef<<=1,!(Ef&130023424)&&(Ef=4194304)):t=1);var o=Ei();e=qs(e,t),e!==null&&(ap(e,t,o),qi(e,o))}function OM(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),JC(e,o)}function $M(e,t){var o=0;switch(e.tag){case 13:var l=e.stateNode,p=e.memoizedState;p!==null&&(o=p.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(Je(314))}l!==null&&l.delete(t),JC(e,o)}var QC;QC=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gi.current)Wi=!0;else{if(!(e.lanes&o)&&!(t.flags&128))return Wi=!1,kM(e,t,o);Wi=!!(e.flags&131072)}else Wi=!1,nn&&t.flags&1048576&&nC(t,Cm,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;nm(e,t),e=t.pendingProps;var p=ku(t,yi.current);xu(t,o),p=Bx(null,t,l,e,p,o);var m=Fx();return t.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hi(l)?(m=!0,wm(t)):m=!1,t.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Ax(t),p.updater=Jm,t.stateNode=p,p._reactInternals=t,wv(t,l,e,o),t=Tv(null,t,l,!0,m,o)):(t.tag=0,nn&&m&&Cx(t),Ii(null,t,p,o),t=t.child),t;case 16:l=t.elementType;e:{switch(nm(e,t),e=t.pendingProps,p=l._init,l=p(l._payload),t.type=l,p=t.tag=jM(l),e=jo(l,e),p){case 0:t=Cv(null,t,l,e,o);break e;case 1:t=yw(null,t,l,e,o);break e;case 11:t=mw(null,t,l,e,o);break e;case 14:t=gw(null,t,l,jo(l.type,e),o);break e}throw Error(Je(306,l,""))}return t;case 0:return l=t.type,p=t.pendingProps,p=t.elementType===l?p:jo(l,p),Cv(e,t,l,p,o);case 1:return l=t.type,p=t.pendingProps,p=t.elementType===l?p:jo(l,p),yw(e,t,l,p,o);case 3:e:{if(BC(t),e===null)throw Error(Je(387));l=t.pendingProps,m=t.memoizedState,p=m.element,cC(e,t),Im(t,l,null,o);var g=t.memoizedState;if(l=g.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){p=Mu(Error(Je(423)),t),t=_w(e,t,l,o,p);break e}else if(l!==p){p=Mu(Error(Je(424)),t),t=_w(e,t,l,o,p);break e}else for(co=Va(t.stateNode.containerInfo.firstChild),uo=t,nn=!0,Uo=null,o=aC(t,null,l,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Iu(),l===p){t=Zs(e,t,o);break e}Ii(e,t,l,o)}t=t.child}return t;case 5:return uC(t),e===null&&vv(t),l=t.type,p=t.pendingProps,m=e!==null?e.memoizedProps:null,g=p.children,fv(l,p)?g=null:m!==null&&fv(l,m)&&(t.flags|=32),LC(e,t),Ii(e,t,g,o),t.child;case 6:return e===null&&vv(t),null;case 13:return FC(e,t,o);case 4:return zx(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Eu(t,null,l,o):Ii(e,t,l,o),t.child;case 11:return l=t.type,p=t.pendingProps,p=t.elementType===l?p:jo(l,p),mw(e,t,l,p,o);case 7:return Ii(e,t,t.pendingProps,o),t.child;case 8:return Ii(e,t,t.pendingProps.children,o),t.child;case 12:return Ii(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(l=t.type._context,p=t.pendingProps,m=t.memoizedProps,g=p.value,Zr(Tm,l._currentValue),l._currentValue=g,m!==null)if(qo(m.value,g)){if(m.children===p.children&&!Gi.current){t=Zs(e,t,o);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var u=m.dependencies;if(u!==null){g=m.child;for(var I=u.firstContext;I!==null;){if(I.context===l){if(m.tag===1){I=Ws(-1,o&-o),I.tag=2;var M=m.updateQueue;if(M!==null){M=M.shared;var F=M.pending;F===null?I.next=I:(I.next=F.next,F.next=I),M.pending=I}}m.lanes|=o,I=m.alternate,I!==null&&(I.lanes|=o),xv(m.return,o,t),u.lanes|=o;break}I=I.next}}else if(m.tag===10)g=m.type===t.type?null:m.child;else if(m.tag===18){if(g=m.return,g===null)throw Error(Je(341));g.lanes|=o,u=g.alternate,u!==null&&(u.lanes|=o),xv(g,o,t),g=m.sibling}else g=m.child;if(g!==null)g.return=m;else for(g=m;g!==null;){if(g===t){g=null;break}if(m=g.sibling,m!==null){m.return=g.return,g=m;break}g=g.return}m=g}Ii(e,t,p.children,o),t=t.child}return t;case 9:return p=t.type,l=t.pendingProps.children,xu(t,o),p=Mo(p),l=l(p),t.flags|=1,Ii(e,t,l,o),t.child;case 14:return l=t.type,p=jo(l,t.pendingProps),p=jo(l.type,p),gw(e,t,l,p,o);case 15:return RC(e,t,t.type,t.pendingProps,o);case 17:return l=t.type,p=t.pendingProps,p=t.elementType===l?p:jo(l,p),nm(e,t),t.tag=1,Hi(l)?(e=!0,wm(t)):e=!1,xu(t,o),MC(t,l,p),wv(t,l,p,o),Tv(null,t,l,!0,e,o);case 19:return OC(e,t,o);case 22:return DC(e,t,o)}throw Error(Je(156,t.tag))};function eT(e,t){return IS(e,t)}function NM(e,t,o,l){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Eo(e,t,o,l){return new NM(e,t,o,l)}function qx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jM(e){if(typeof e=="function")return qx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dx)return 11;if(e===px)return 14}return 2}function Ha(e,t){var o=e.alternate;return o===null?(o=Eo(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function sm(e,t,o,l,p,m){var g=2;if(l=e,typeof e=="function")qx(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case iu:return Ul(o.children,p,m,t);case hx:g=8,p|=8;break;case H_:return e=Eo(12,o,t,p|2),e.elementType=H_,e.lanes=m,e;case q_:return e=Eo(13,o,t,p),e.elementType=q_,e.lanes=m,e;case Z_:return e=Eo(19,o,t,p),e.elementType=Z_,e.lanes=m,e;case uS:return tg(o,p,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lS:g=10;break e;case cS:g=9;break e;case dx:g=11;break e;case px:g=14;break e;case Ra:g=16,l=null;break e}throw Error(Je(130,e==null?e:typeof e,""))}return t=Eo(g,o,t,p),t.elementType=e,t.type=l,t.lanes=m,t}function Ul(e,t,o,l){return e=Eo(7,e,l,t),e.lanes=o,e}function tg(e,t,o,l){return e=Eo(22,e,l,t),e.elementType=uS,e.lanes=o,e.stateNode={isHidden:!1},e}function M_(e,t,o){return e=Eo(6,e,null,t),e.lanes=o,e}function A_(e,t,o){return t=Eo(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function VM(e,t,o,l,p){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h_(0),this.expirationTimes=h_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h_(0),this.identifierPrefix=l,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Zx(e,t,o,l,p,m,g,u,I){return e=new VM(e,t,o,u,I),t===1?(t=1,m===!0&&(t|=8)):t=0,m=Eo(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:l,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ax(m),e}function UM(e,t,o){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nu,key:l==null?null:""+l,children:e,containerInfo:t,implementation:o}}function tT(e){if(!e)return Xa;e=e._reactInternals;e:{if(Yl(e)!==e||e.tag!==1)throw Error(Je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Je(171))}if(e.tag===1){var o=e.type;if(Hi(o))return tC(e,o,t)}return t}function rT(e,t,o,l,p,m,g,u,I){return e=Zx(o,l,!0,e,p,m,g,u,I),e.context=tT(null),o=e.current,l=Ei(),p=Ga(o),m=Ws(l,p),m.callback=t??null,Ua(o,m,p),e.current.lanes=p,ap(e,p,l),qi(e,l),e}function rg(e,t,o,l){var p=t.current,m=Ei(),g=Ga(p);return o=tT(o),t.context===null?t.context=o:t.pendingContext=o,t=Ws(m,g),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=Ua(p,t,g),e!==null&&(Ho(e,p,g,m),em(e,p,g)),g}function Lm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ew(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function Xx(e,t){Ew(e,t),(e=e.alternate)&&Ew(e,t)}function WM(){return null}var nT=typeof reportError=="function"?reportError:function(e){console.error(e)};function Kx(e){this._internalRoot=e}ng.prototype.render=Kx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Je(409));rg(e,t,null,null)};ng.prototype.unmount=Kx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xl(function(){rg(null,e,null,null)}),t[Hs]=null}};function ng(e){this._internalRoot=e}ng.prototype.unstable_scheduleHydration=function(e){if(e){var t=DS();e={blockedOn:null,target:e,priority:t};for(var o=0;o<La.length&&t!==0&&t<La[o].priority;o++);La.splice(o,0,e),o===0&&BS(e)}};function Yx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ig(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pw(){}function GM(e,t,o,l,p){if(p){if(typeof l=="function"){var m=l;l=function(){var M=Lm(g);m.call(M)}}var g=rT(t,l,e,0,null,!1,!1,"",Pw);return e._reactRootContainer=g,e[Hs]=g.current,Gd(e.nodeType===8?e.parentNode:e),Xl(),g}for(;p=e.lastChild;)e.removeChild(p);if(typeof l=="function"){var u=l;l=function(){var M=Lm(I);u.call(M)}}var I=Zx(e,0,!1,null,null,!1,!1,"",Pw);return e._reactRootContainer=I,e[Hs]=I.current,Gd(e.nodeType===8?e.parentNode:e),Xl(function(){rg(t,I,o,l)}),I}function og(e,t,o,l,p){var m=o._reactRootContainer;if(m){var g=m;if(typeof p=="function"){var u=p;p=function(){var I=Lm(g);u.call(I)}}rg(t,g,e,p)}else g=GM(o,t,e,p,l);return Lm(g)}zS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=_d(t.pendingLanes);o!==0&&(gx(t,o|1),qi(t,xn()),!(br&6)&&(Au=xn()+500,el()))}break;case 13:Xl(function(){var l=qs(e,1);if(l!==null){var p=Ei();Ho(l,e,1,p)}}),Xx(e,1)}};yx=function(e){if(e.tag===13){var t=qs(e,134217728);if(t!==null){var o=Ei();Ho(t,e,134217728,o)}Xx(e,134217728)}};RS=function(e){if(e.tag===13){var t=Ga(e),o=qs(e,t);if(o!==null){var l=Ei();Ho(o,e,t,l)}Xx(e,t)}};DS=function(){return Br};LS=function(e,t){var o=Br;try{return Br=e,t()}finally{Br=o}};iv=function(e,t,o){switch(t){case"input":if(Y_(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var l=o[t];if(l!==e&&l.form===e.form){var p=Xm(l);if(!p)throw Error(Je(90));dS(l),Y_(l,p)}}}break;case"textarea":fS(e,o);break;case"select":t=o.value,t!=null&&gu(e,!!o.multiple,t,!1)}};bS=Wx;wS=Xl;var HM={usingClientEntryPoint:!1,Events:[cp,lu,Xm,vS,xS,Wx]},cd={findFiberByHostInstance:Fl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qM={bundleType:cd.bundleType,version:cd.version,rendererPackageName:cd.rendererPackageName,rendererConfig:cd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=TS(e),e===null?null:e.stateNode},findFiberByHostInstance:cd.findFiberByHostInstance||WM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{Gm=$f.inject(qM),ms=$f}catch{}}fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HM;fo.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yx(t))throw Error(Je(200));return UM(e,t,null,o)};fo.createRoot=function(e,t){if(!Yx(e))throw Error(Je(299));var o=!1,l="",p=nT;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=Zx(e,1,!1,null,null,o,!1,l,p),e[Hs]=t.current,Gd(e.nodeType===8?e.parentNode:e),new Kx(t)};fo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Je(188)):(e=Object.keys(e).join(","),Error(Je(268,e)));return e=TS(t),e=e===null?null:e.stateNode,e};fo.flushSync=function(e){return Xl(e)};fo.hydrate=function(e,t,o){if(!ig(t))throw Error(Je(200));return og(null,e,t,!0,o)};fo.hydrateRoot=function(e,t,o){if(!Yx(e))throw Error(Je(405));var l=o!=null&&o.hydratedSources||null,p=!1,m="",g=nT;if(o!=null&&(o.unstable_strictMode===!0&&(p=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),t=rT(t,null,e,1,o??null,p,!1,m,g),e[Hs]=t.current,Gd(e),l)for(e=0;e<l.length;e++)o=l[e],p=o._getVersion,p=p(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,p]:t.mutableSourceEagerHydrationData.push(o,p);return new ng(t)};fo.render=function(e,t,o){if(!ig(t))throw Error(Je(200));return og(null,e,t,!1,o)};fo.unmountComponentAtNode=function(e){if(!ig(e))throw Error(Je(40));return e._reactRootContainer?(Xl(function(){og(null,null,e,!1,function(){e._reactRootContainer=null,e[Hs]=null})}),!0):!1};fo.unstable_batchedUpdates=Wx;fo.unstable_renderSubtreeIntoContainer=function(e,t,o,l){if(!ig(o))throw Error(Je(200));if(e==null||e._reactInternals===void 0)throw Error(Je(38));return og(e,t,o,!1,l)};fo.version="18.3.1-next-f1338f8080-20240426";function iT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iT)}catch(e){console.error(e)}}iT(),iS.exports=fo;var Jx=iS.exports;const Nf=nx(Jx);var Mw=Jx;W_.createRoot=Mw.createRoot,W_.hydrateRoot=Mw.hydrateRoot;function Xs(e,...t){const o=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(l=>o.searchParams.append("args[]",l)),`Minified MUI error #${e}; visit ${o} for the full message.`}const ys="$$material";function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},Bm.apply(null,arguments)}function ZM(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function XM(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var KM=function(){function e(o){var l=this;this._insertTag=function(p){var m;l.tags.length===0?l.insertionPoint?m=l.insertionPoint.nextSibling:l.prepend?m=l.container.firstChild:m=l.before:m=l.tags[l.tags.length-1].nextSibling,l.container.insertBefore(p,m),l.tags.push(p)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(l){l.forEach(this._insertTag)},t.insert=function(l){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(XM(this));var p=this.tags[this.tags.length-1];if(this.isSpeedy){var m=ZM(p);try{m.insertRule(l,m.cssRules.length)}catch{}}else p.appendChild(document.createTextNode(l));this.ctr++},t.flush=function(){this.tags.forEach(function(l){var p;return(p=l.parentNode)==null?void 0:p.removeChild(l)}),this.tags=[],this.ctr=0},e}(),fi="-ms-",Fm="-moz-",Pr="-webkit-",oT="comm",Qx="rule",e0="decl",YM="@import",sT="@keyframes",JM="@layer",QM=Math.abs,sg=String.fromCharCode,eA=Object.assign;function tA(e,t){return ei(e,0)^45?(((t<<2^ei(e,0))<<2^ei(e,1))<<2^ei(e,2))<<2^ei(e,3):0}function aT(e){return e.trim()}function rA(e,t){return(e=t.exec(e))?e[0]:e}function Mr(e,t,o){return e.replace(t,o)}function Fv(e,t){return e.indexOf(t)}function ei(e,t){return e.charCodeAt(t)|0}function ep(e,t,o){return e.slice(t,o)}function us(e){return e.length}function t0(e){return e.length}function jf(e,t){return t.push(e),e}function nA(e,t){return e.map(t).join("")}var ag=1,zu=1,lT=0,Zi=0,kn=0,$u="";function lg(e,t,o,l,p,m,g){return{value:e,root:t,parent:o,type:l,props:p,children:m,line:ag,column:zu,length:g,return:""}}function ud(e,t){return eA(lg("",null,null,"",null,null,0),e,{length:-e.length},t)}function iA(){return kn}function oA(){return kn=Zi>0?ei($u,--Zi):0,zu--,kn===10&&(zu=1,ag--),kn}function ho(){return kn=Zi<lT?ei($u,Zi++):0,zu++,kn===10&&(zu=1,ag++),kn}function _s(){return ei($u,Zi)}function am(){return Zi}function hp(e,t){return ep($u,e,t)}function tp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cT(e){return ag=zu=1,lT=us($u=e),Zi=0,[]}function uT(e){return $u="",e}function lm(e){return aT(hp(Zi-1,Ov(e===91?e+2:e===40?e+1:e)))}function sA(e){for(;(kn=_s())&&kn<33;)ho();return tp(e)>2||tp(kn)>3?"":" "}function aA(e,t){for(;--t&&ho()&&!(kn<48||kn>102||kn>57&&kn<65||kn>70&&kn<97););return hp(e,am()+(t<6&&_s()==32&&ho()==32))}function Ov(e){for(;ho();)switch(kn){case e:return Zi;case 34:case 39:e!==34&&e!==39&&Ov(kn);break;case 40:e===41&&Ov(e);break;case 92:ho();break}return Zi}function lA(e,t){for(;ho()&&e+kn!==57;)if(e+kn===84&&_s()===47)break;return"/*"+hp(t,Zi-1)+"*"+sg(e===47?e:ho())}function cA(e){for(;!tp(_s());)ho();return hp(e,Zi)}function uA(e){return uT(cm("",null,null,null,[""],e=cT(e),0,[0],e))}function cm(e,t,o,l,p,m,g,u,I){for(var M=0,F=0,L=g,z=0,J=0,H=0,re=1,le=1,V=1,U=0,G="",Q=p,fe=m,he=l,_e=G;le;)switch(H=U,U=ho()){case 40:if(H!=108&&ei(_e,L-1)==58){Fv(_e+=Mr(lm(U),"&","&\f"),"&\f")!=-1&&(V=-1);break}case 34:case 39:case 91:_e+=lm(U);break;case 9:case 10:case 13:case 32:_e+=sA(H);break;case 92:_e+=aA(am()-1,7);continue;case 47:switch(_s()){case 42:case 47:jf(hA(lA(ho(),am()),t,o),I);break;default:_e+="/"}break;case 123*re:u[M++]=us(_e)*V;case 125*re:case 59:case 0:switch(U){case 0:case 125:le=0;case 59+F:V==-1&&(_e=Mr(_e,/\f/g,"")),J>0&&us(_e)-L&&jf(J>32?zw(_e+";",l,o,L-1):zw(Mr(_e," ","")+";",l,o,L-2),I);break;case 59:_e+=";";default:if(jf(he=Aw(_e,t,o,M,F,p,u,G,Q=[],fe=[],L),m),U===123)if(F===0)cm(_e,t,he,he,Q,m,L,u,fe);else switch(z===99&&ei(_e,3)===110?100:z){case 100:case 108:case 109:case 115:cm(e,he,he,l&&jf(Aw(e,he,he,0,0,p,u,G,p,Q=[],L),fe),p,fe,L,u,l?Q:fe);break;default:cm(_e,he,he,he,[""],fe,0,u,fe)}}M=F=J=0,re=V=1,G=_e="",L=g;break;case 58:L=1+us(_e),J=H;default:if(re<1){if(U==123)--re;else if(U==125&&re++==0&&oA()==125)continue}switch(_e+=sg(U),U*re){case 38:V=F>0?1:(_e+="\f",-1);break;case 44:u[M++]=(us(_e)-1)*V,V=1;break;case 64:_s()===45&&(_e+=lm(ho())),z=_s(),F=L=us(G=_e+=cA(am())),U++;break;case 45:H===45&&us(_e)==2&&(re=0)}}return m}function Aw(e,t,o,l,p,m,g,u,I,M,F){for(var L=p-1,z=p===0?m:[""],J=t0(z),H=0,re=0,le=0;H<l;++H)for(var V=0,U=ep(e,L+1,L=QM(re=g[H])),G=e;V<J;++V)(G=aT(re>0?z[V]+" "+U:Mr(U,/&\f/g,z[V])))&&(I[le++]=G);return lg(e,t,o,p===0?Qx:u,I,M,F)}function hA(e,t,o){return lg(e,t,o,oT,sg(iA()),ep(e,2,-2),0)}function zw(e,t,o,l){return lg(e,t,o,e0,ep(e,0,l),ep(e,l+1,-1),l)}function wu(e,t){for(var o="",l=t0(e),p=0;p<l;p++)o+=t(e[p],p,e,t)||"";return o}function dA(e,t,o,l){switch(e.type){case JM:if(e.children.length)break;case YM:case e0:return e.return=e.return||e.value;case oT:return"";case sT:return e.return=e.value+"{"+wu(e.children,l)+"}";case Qx:e.value=e.props.join(",")}return us(o=wu(e.children,l))?e.return=e.value+"{"+o+"}":""}function pA(e){var t=t0(e);return function(o,l,p,m){for(var g="",u=0;u<t;u++)g+=e[u](o,l,p,m)||"";return g}}function fA(e){return function(t){t.root||(t=t.return)&&e(t)}}function hT(e){var t=Object.create(null);return function(o){return t[o]===void 0&&(t[o]=e(o)),t[o]}}var mA=function(t,o,l){for(var p=0,m=0;p=m,m=_s(),p===38&&m===12&&(o[l]=1),!tp(m);)ho();return hp(t,Zi)},gA=function(t,o){var l=-1,p=44;do switch(tp(p)){case 0:p===38&&_s()===12&&(o[l]=1),t[l]+=mA(Zi-1,o,l);break;case 2:t[l]+=lm(p);break;case 4:if(p===44){t[++l]=_s()===58?"&\f":"",o[l]=t[l].length;break}default:t[l]+=sg(p)}while(p=ho());return t},yA=function(t,o){return uT(gA(cT(t),o))},Rw=new WeakMap,_A=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var o=t.value,l=t.parent,p=t.column===l.column&&t.line===l.line;l.type!=="rule";)if(l=l.parent,!l)return;if(!(t.props.length===1&&o.charCodeAt(0)!==58&&!Rw.get(l))&&!p){Rw.set(t,!0);for(var m=[],g=yA(o,m),u=l.props,I=0,M=0;I<g.length;I++)for(var F=0;F<u.length;F++,M++)t.props[M]=m[I]?g[I].replace(/&\f/g,u[F]):u[F]+" "+g[I]}}},vA=function(t){if(t.type==="decl"){var o=t.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(t.return="",t.value="")}};function dT(e,t){switch(tA(e,t)){case 5103:return Pr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Pr+e+Fm+e+fi+e+e;case 6828:case 4268:return Pr+e+fi+e+e;case 6165:return Pr+e+fi+"flex-"+e+e;case 5187:return Pr+e+Mr(e,/(\w+).+(:[^]+)/,Pr+"box-$1$2"+fi+"flex-$1$2")+e;case 5443:return Pr+e+fi+"flex-item-"+Mr(e,/flex-|-self/,"")+e;case 4675:return Pr+e+fi+"flex-line-pack"+Mr(e,/align-content|flex-|-self/,"")+e;case 5548:return Pr+e+fi+Mr(e,"shrink","negative")+e;case 5292:return Pr+e+fi+Mr(e,"basis","preferred-size")+e;case 6060:return Pr+"box-"+Mr(e,"-grow","")+Pr+e+fi+Mr(e,"grow","positive")+e;case 4554:return Pr+Mr(e,/([^-])(transform)/g,"$1"+Pr+"$2")+e;case 6187:return Mr(Mr(Mr(e,/(zoom-|grab)/,Pr+"$1"),/(image-set)/,Pr+"$1"),e,"")+e;case 5495:case 3959:return Mr(e,/(image-set\([^]*)/,Pr+"$1$`$1");case 4968:return Mr(Mr(e,/(.+:)(flex-)?(.*)/,Pr+"box-pack:$3"+fi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pr+e+e;case 4095:case 3583:case 4068:case 2532:return Mr(e,/(.+)-inline(.+)/,Pr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(us(e)-1-t>6)switch(ei(e,t+1)){case 109:if(ei(e,t+4)!==45)break;case 102:return Mr(e,/(.+:)(.+)-([^]+)/,"$1"+Pr+"$2-$3$1"+Fm+(ei(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Fv(e,"stretch")?dT(Mr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ei(e,t+1)!==115)break;case 6444:switch(ei(e,us(e)-3-(~Fv(e,"!important")&&10))){case 107:return Mr(e,":",":"+Pr)+e;case 101:return Mr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Pr+(ei(e,14)===45?"inline-":"")+"box$3$1"+Pr+"$2$3$1"+fi+"$2box$3")+e}break;case 5936:switch(ei(e,t+11)){case 114:return Pr+e+fi+Mr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Pr+e+fi+Mr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Pr+e+fi+Mr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Pr+e+fi+e+e}return e}var xA=function(t,o,l,p){if(t.length>-1&&!t.return)switch(t.type){case e0:t.return=dT(t.value,t.length);break;case sT:return wu([ud(t,{value:Mr(t.value,"@","@"+Pr)})],p);case Qx:if(t.length)return nA(t.props,function(m){switch(rA(m,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return wu([ud(t,{props:[Mr(m,/:(read-\w+)/,":"+Fm+"$1")]})],p);case"::placeholder":return wu([ud(t,{props:[Mr(m,/:(plac\w+)/,":"+Pr+"input-$1")]}),ud(t,{props:[Mr(m,/:(plac\w+)/,":"+Fm+"$1")]}),ud(t,{props:[Mr(m,/:(plac\w+)/,fi+"input-$1")]})],p)}return""})}},bA=[xA],wA=function(t){var o=t.key;if(o==="css"){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,function(re){var le=re.getAttribute("data-emotion");le.indexOf(" ")!==-1&&(document.head.appendChild(re),re.setAttribute("data-s",""))})}var p=t.stylisPlugins||bA,m={},g,u=[];g=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(re){for(var le=re.getAttribute("data-emotion").split(" "),V=1;V<le.length;V++)m[le[V]]=!0;u.push(re)});var I,M=[_A,vA];{var F,L=[dA,fA(function(re){F.insert(re)})],z=pA(M.concat(p,L)),J=function(le){return wu(uA(le),z)};I=function(le,V,U,G){F=U,J(le?le+"{"+V.styles+"}":V.styles),G&&(H.inserted[V.name]=!0)}}var H={key:o,sheet:new KM({key:o,container:g,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:m,registered:{},insert:I};return H.sheet.hydrate(u),H},pT={exports:{}},Fr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qn=typeof Symbol=="function"&&Symbol.for,r0=qn?Symbol.for("react.element"):60103,n0=qn?Symbol.for("react.portal"):60106,cg=qn?Symbol.for("react.fragment"):60107,ug=qn?Symbol.for("react.strict_mode"):60108,hg=qn?Symbol.for("react.profiler"):60114,dg=qn?Symbol.for("react.provider"):60109,pg=qn?Symbol.for("react.context"):60110,i0=qn?Symbol.for("react.async_mode"):60111,fg=qn?Symbol.for("react.concurrent_mode"):60111,mg=qn?Symbol.for("react.forward_ref"):60112,gg=qn?Symbol.for("react.suspense"):60113,SA=qn?Symbol.for("react.suspense_list"):60120,yg=qn?Symbol.for("react.memo"):60115,_g=qn?Symbol.for("react.lazy"):60116,CA=qn?Symbol.for("react.block"):60121,TA=qn?Symbol.for("react.fundamental"):60117,kA=qn?Symbol.for("react.responder"):60118,IA=qn?Symbol.for("react.scope"):60119;function go(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case r0:switch(e=e.type,e){case i0:case fg:case cg:case hg:case ug:case gg:return e;default:switch(e=e&&e.$$typeof,e){case pg:case mg:case _g:case yg:case dg:return e;default:return t}}case n0:return t}}}function fT(e){return go(e)===fg}Fr.AsyncMode=i0;Fr.ConcurrentMode=fg;Fr.ContextConsumer=pg;Fr.ContextProvider=dg;Fr.Element=r0;Fr.ForwardRef=mg;Fr.Fragment=cg;Fr.Lazy=_g;Fr.Memo=yg;Fr.Portal=n0;Fr.Profiler=hg;Fr.StrictMode=ug;Fr.Suspense=gg;Fr.isAsyncMode=function(e){return fT(e)||go(e)===i0};Fr.isConcurrentMode=fT;Fr.isContextConsumer=function(e){return go(e)===pg};Fr.isContextProvider=function(e){return go(e)===dg};Fr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===r0};Fr.isForwardRef=function(e){return go(e)===mg};Fr.isFragment=function(e){return go(e)===cg};Fr.isLazy=function(e){return go(e)===_g};Fr.isMemo=function(e){return go(e)===yg};Fr.isPortal=function(e){return go(e)===n0};Fr.isProfiler=function(e){return go(e)===hg};Fr.isStrictMode=function(e){return go(e)===ug};Fr.isSuspense=function(e){return go(e)===gg};Fr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===cg||e===fg||e===hg||e===ug||e===gg||e===SA||typeof e=="object"&&e!==null&&(e.$$typeof===_g||e.$$typeof===yg||e.$$typeof===dg||e.$$typeof===pg||e.$$typeof===mg||e.$$typeof===TA||e.$$typeof===kA||e.$$typeof===IA||e.$$typeof===CA)};Fr.typeOf=go;pT.exports=Fr;var EA=pT.exports,mT=EA,PA={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gT={};gT[mT.ForwardRef]=PA;gT[mT.Memo]=MA;var AA=!0;function yT(e,t,o){var l="";return o.split(" ").forEach(function(p){e[p]!==void 0?t.push(e[p]+";"):p&&(l+=p+" ")}),l}var o0=function(t,o,l){var p=t.key+"-"+o.name;(l===!1||AA===!1)&&t.registered[p]===void 0&&(t.registered[p]=o.styles)},s0=function(t,o,l){o0(t,o,l);var p=t.key+"-"+o.name;if(t.inserted[o.name]===void 0){var m=o;do t.insert(o===m?"."+p:"",m,t.sheet,!0),m=m.next;while(m!==void 0)}};function zA(e){for(var t=0,o,l=0,p=e.length;p>=4;++l,p-=4)o=e.charCodeAt(l)&255|(e.charCodeAt(++l)&255)<<8|(e.charCodeAt(++l)&255)<<16|(e.charCodeAt(++l)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(p){case 3:t^=(e.charCodeAt(l+2)&255)<<16;case 2:t^=(e.charCodeAt(l+1)&255)<<8;case 1:t^=e.charCodeAt(l)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var RA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},DA=/[A-Z]|^ms/g,LA=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_T=function(t){return t.charCodeAt(1)===45},Dw=function(t){return t!=null&&typeof t!="boolean"},z_=hT(function(e){return _T(e)?e:e.replace(DA,"-$&").toLowerCase()}),Lw=function(t,o){switch(t){case"animation":case"animationName":if(typeof o=="string")return o.replace(LA,function(l,p,m){return hs={name:p,styles:m,next:hs},p})}return RA[t]!==1&&!_T(t)&&typeof o=="number"&&o!==0?o+"px":o};function rp(e,t,o){if(o==null)return"";var l=o;if(l.__emotion_styles!==void 0)return l;switch(typeof o){case"boolean":return"";case"object":{var p=o;if(p.anim===1)return hs={name:p.name,styles:p.styles,next:hs},p.name;var m=o;if(m.styles!==void 0){var g=m.next;if(g!==void 0)for(;g!==void 0;)hs={name:g.name,styles:g.styles,next:hs},g=g.next;var u=m.styles+";";return u}return BA(e,t,o)}case"function":{if(e!==void 0){var I=hs,M=o(e);return hs=I,rp(e,t,M)}break}}var F=o;if(t==null)return F;var L=t[F];return L!==void 0?L:F}function BA(e,t,o){var l="";if(Array.isArray(o))for(var p=0;p<o.length;p++)l+=rp(e,t,o[p])+";";else for(var m in o){var g=o[m];if(typeof g!="object"){var u=g;t!=null&&t[u]!==void 0?l+=m+"{"+t[u]+"}":Dw(u)&&(l+=z_(m)+":"+Lw(m,u)+";")}else if(Array.isArray(g)&&typeof g[0]=="string"&&(t==null||t[g[0]]===void 0))for(var I=0;I<g.length;I++)Dw(g[I])&&(l+=z_(m)+":"+Lw(m,g[I])+";");else{var M=rp(e,t,g);switch(m){case"animation":case"animationName":{l+=z_(m)+":"+M+";";break}default:l+=m+"{"+M+"}"}}}return l}var Bw=/label:\s*([^\s;{]+)\s*(;|$)/g,hs;function dp(e,t,o){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var l=!0,p="";hs=void 0;var m=e[0];if(m==null||m.raw===void 0)l=!1,p+=rp(o,t,m);else{var g=m;p+=g[0]}for(var u=1;u<e.length;u++)if(p+=rp(o,t,e[u]),l){var I=m;p+=I[u]}Bw.lastIndex=0;for(var M="",F;(F=Bw.exec(p))!==null;)M+="-"+F[1];var L=zA(p)+M;return{name:L,styles:p,next:hs}}var FA=function(t){return t()},vT=U_.useInsertionEffect?U_.useInsertionEffect:!1,xT=vT||FA,Fw=vT||ee.useLayoutEffect,bT=ee.createContext(typeof HTMLElement<"u"?wA({key:"css"}):null);bT.Provider;var a0=function(t){return ee.forwardRef(function(o,l){var p=ee.useContext(bT);return t(o,p,l)})},pp=ee.createContext({}),l0={}.hasOwnProperty,$v="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",OA=function(t,o){var l={};for(var p in o)l0.call(o,p)&&(l[p]=o[p]);return l[$v]=t,l},$A=function(t){var o=t.cache,l=t.serialized,p=t.isStringTag;return o0(o,l,p),xT(function(){return s0(o,l,p)}),null},NA=a0(function(e,t,o){var l=e.css;typeof l=="string"&&t.registered[l]!==void 0&&(l=t.registered[l]);var p=e[$v],m=[l],g="";typeof e.className=="string"?g=yT(t.registered,m,e.className):e.className!=null&&(g=e.className+" ");var u=dp(m,void 0,ee.useContext(pp));g+=t.key+"-"+u.name;var I={};for(var M in e)l0.call(e,M)&&M!=="css"&&M!==$v&&(I[M]=e[M]);return I.className=g,o&&(I.ref=o),ee.createElement(ee.Fragment,null,ee.createElement($A,{cache:t,serialized:u,isStringTag:typeof p=="string"}),ee.createElement(p,I))}),jA=NA,Ow=function(t,o){var l=arguments;if(o==null||!l0.call(o,"css"))return ee.createElement.apply(void 0,l);var p=l.length,m=new Array(p);m[0]=jA,m[1]=OA(t,o);for(var g=2;g<p;g++)m[g]=l[g];return ee.createElement.apply(null,m)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Ow||(Ow={}));var VA=a0(function(e,t){var o=e.styles,l=dp([o],void 0,ee.useContext(pp)),p=ee.useRef();return Fw(function(){var m=t.key+"-global",g=new t.sheet.constructor({key:m,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,I=document.querySelector('style[data-emotion="'+m+" "+l.name+'"]');return t.sheet.tags.length&&(g.before=t.sheet.tags[0]),I!==null&&(u=!0,I.setAttribute("data-emotion",m),g.hydrate([I])),p.current=[g,u],function(){g.flush()}},[t]),Fw(function(){var m=p.current,g=m[0],u=m[1];if(u){m[1]=!1;return}if(l.next!==void 0&&s0(t,l.next,!0),g.tags.length){var I=g.tags[g.tags.length-1].nextElementSibling;g.before=I,g.flush()}t.insert("",l,g,!1)},[t,l.name]),null});function c0(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return dp(t)}function fp(){var e=c0.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var UA=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,WA=hT(function(e){return UA.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),GA=WA,HA=function(t){return t!=="theme"},$w=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?GA:HA},Nw=function(t,o,l){var p;if(o){var m=o.shouldForwardProp;p=t.__emotion_forwardProp&&m?function(g){return t.__emotion_forwardProp(g)&&m(g)}:m}return typeof p!="function"&&l&&(p=t.__emotion_forwardProp),p},qA=function(t){var o=t.cache,l=t.serialized,p=t.isStringTag;return o0(o,l,p),xT(function(){return s0(o,l,p)}),null},ZA=function e(t,o){var l=t.__emotion_real===t,p=l&&t.__emotion_base||t,m,g;o!==void 0&&(m=o.label,g=o.target);var u=Nw(t,o,l),I=u||$w(p),M=!I("as");return function(){var F=arguments,L=l&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(m!==void 0&&L.push("label:"+m+";"),F[0]==null||F[0].raw===void 0)L.push.apply(L,F);else{var z=F[0];L.push(z[0]);for(var J=F.length,H=1;H<J;H++)L.push(F[H],z[H])}var re=a0(function(le,V,U){var G=M&&le.as||p,Q="",fe=[],he=le;if(le.theme==null){he={};for(var _e in le)he[_e]=le[_e];he.theme=ee.useContext(pp)}typeof le.className=="string"?Q=yT(V.registered,fe,le.className):le.className!=null&&(Q=le.className+" ");var ge=dp(L.concat(fe),V.registered,he);Q+=V.key+"-"+ge.name,g!==void 0&&(Q+=" "+g);var Ae=M&&u===void 0?$w(G):I,Re={};for(var De in le)M&&De==="as"||Ae(De)&&(Re[De]=le[De]);return Re.className=Q,U&&(Re.ref=U),ee.createElement(ee.Fragment,null,ee.createElement(qA,{cache:V,serialized:ge,isStringTag:typeof G=="string"}),ee.createElement(G,Re))});return re.displayName=m!==void 0?m:"Styled("+(typeof p=="string"?p:p.displayName||p.name||"Component")+")",re.defaultProps=t.defaultProps,re.__emotion_real=re,re.__emotion_base=p,re.__emotion_styles=L,re.__emotion_forwardProp=u,Object.defineProperty(re,"toString",{value:function(){return"."+g}}),re.withComponent=function(le,V){var U=e(le,Bm({},o,V,{shouldForwardProp:Nw(re,V,!0)}));return U.apply(void 0,L)},re}},XA=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Nv=ZA.bind(null);XA.forEach(function(e){Nv[e]=Nv(e)});function KA(e){return e==null||Object.keys(e).length===0}function wT(e){const{styles:t,defaultTheme:o={}}=e,l=typeof t=="function"?p=>t(KA(p)?o:p):t;return q.jsx(VA,{styles:l})}function ST(e,t){return Nv(e,t)}function YA(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const jw=[];function qa(e){return jw[0]=e,dp(jw)}var CT={exports:{}},Hr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0=Symbol.for("react.transitional.element"),h0=Symbol.for("react.portal"),vg=Symbol.for("react.fragment"),xg=Symbol.for("react.strict_mode"),bg=Symbol.for("react.profiler"),wg=Symbol.for("react.consumer"),Sg=Symbol.for("react.context"),Cg=Symbol.for("react.forward_ref"),Tg=Symbol.for("react.suspense"),kg=Symbol.for("react.suspense_list"),Ig=Symbol.for("react.memo"),Eg=Symbol.for("react.lazy"),JA=Symbol.for("react.view_transition"),QA=Symbol.for("react.client.reference");function zo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case u0:switch(e=e.type,e){case vg:case bg:case xg:case Tg:case kg:case JA:return e;default:switch(e=e&&e.$$typeof,e){case Sg:case Cg:case Eg:case Ig:return e;case wg:return e;default:return t}}case h0:return t}}}Hr.ContextConsumer=wg;Hr.ContextProvider=Sg;Hr.Element=u0;Hr.ForwardRef=Cg;Hr.Fragment=vg;Hr.Lazy=Eg;Hr.Memo=Ig;Hr.Portal=h0;Hr.Profiler=bg;Hr.StrictMode=xg;Hr.Suspense=Tg;Hr.SuspenseList=kg;Hr.isContextConsumer=function(e){return zo(e)===wg};Hr.isContextProvider=function(e){return zo(e)===Sg};Hr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===u0};Hr.isForwardRef=function(e){return zo(e)===Cg};Hr.isFragment=function(e){return zo(e)===vg};Hr.isLazy=function(e){return zo(e)===Eg};Hr.isMemo=function(e){return zo(e)===Ig};Hr.isPortal=function(e){return zo(e)===h0};Hr.isProfiler=function(e){return zo(e)===bg};Hr.isStrictMode=function(e){return zo(e)===xg};Hr.isSuspense=function(e){return zo(e)===Tg};Hr.isSuspenseList=function(e){return zo(e)===kg};Hr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===vg||e===bg||e===xg||e===Tg||e===kg||typeof e=="object"&&e!==null&&(e.$$typeof===Eg||e.$$typeof===Ig||e.$$typeof===Sg||e.$$typeof===wg||e.$$typeof===Cg||e.$$typeof===QA||e.getModuleId!==void 0)};Hr.typeOf=zo;CT.exports=Hr;var TT=CT.exports;function ps(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function kT(e){if(ee.isValidElement(e)||TT.isValidElementType(e)||!ps(e))return e;const t={};return Object.keys(e).forEach(o=>{t[o]=kT(e[o])}),t}function gi(e,t,o={clone:!0}){const l=o.clone?{...e}:e;return ps(e)&&ps(t)&&Object.keys(t).forEach(p=>{ee.isValidElement(t[p])||TT.isValidElementType(t[p])?l[p]=t[p]:ps(t[p])&&Object.prototype.hasOwnProperty.call(e,p)&&ps(e[p])?l[p]=gi(e[p],t[p],o):o.clone?l[p]=ps(t[p])?kT(t[p]):t[p]:l[p]=t[p]}),l}const ez=e=>{const t=Object.keys(e).map(o=>({key:o,val:e[o]}))||[];return t.sort((o,l)=>o.val-l.val),t.reduce((o,l)=>({...o,[l.key]:l.val}),{})};function tz(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:o="px",step:l=5,...p}=e,m=ez(t),g=Object.keys(m);function u(z){return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${o})`}function I(z){return`@media (max-width:${(typeof t[z]=="number"?t[z]:z)-l/100}${o})`}function M(z,J){const H=g.indexOf(J);return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${o}) and (max-width:${(H!==-1&&typeof t[g[H]]=="number"?t[g[H]]:J)-l/100}${o})`}function F(z){return g.indexOf(z)+1<g.length?M(z,g[g.indexOf(z)+1]):u(z)}function L(z){const J=g.indexOf(z);return J===0?u(g[1]):J===g.length-1?I(g[J]):M(z,g[g.indexOf(z)+1]).replace("@media","@media not all and")}return{keys:g,values:m,up:u,down:I,between:M,only:F,not:L,unit:o,...p}}function Vw(e,t){if(!e.containerQueries)return t;const o=Object.keys(t).filter(l=>l.startsWith("@container")).sort((l,p)=>{var g,u;const m=/min-width:\s*([0-9.]+)/;return+(((g=l.match(m))==null?void 0:g[1])||0)-+(((u=p.match(m))==null?void 0:u[1])||0)});return o.length?o.reduce((l,p)=>{const m=t[p];return delete l[p],l[p]=m,l},{...t}):t}function rz(e,t){return t==="@"||t.startsWith("@")&&(e.some(o=>t.startsWith(`@${o}`))||!!t.match(/^@\d/))}function nz(e,t){const o=t.match(/^@([^/]+)?\/?(.+)?$/);if(!o)return null;const[,l,p]=o,m=Number.isNaN(+l)?l||0:+l;return e.containerQueries(p).up(m)}function iz(e){const t=(m,g)=>m.replace("@media",g?`@container ${g}`:"@container");function o(m,g){m.up=(...u)=>t(e.breakpoints.up(...u),g),m.down=(...u)=>t(e.breakpoints.down(...u),g),m.between=(...u)=>t(e.breakpoints.between(...u),g),m.only=(...u)=>t(e.breakpoints.only(...u),g),m.not=(...u)=>{const I=t(e.breakpoints.not(...u),g);return I.includes("not all and")?I.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):I}}const l={},p=m=>(o(l,m),l);return o(p),{...e,containerQueries:p}}const oz={borderRadius:4};function Rd(e,t){return t?gi(e,t,{clone:!1}):e}const Pg={xs:0,sm:600,md:900,lg:1200,xl:1536},Uw={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Pg[e]}px)`},sz={containerQueries:e=>({up:t=>{let o=typeof t=="number"?t:Pg[t]||t;return typeof o=="number"&&(o=`${o}px`),e?`@container ${e} (min-width:${o})`:`@container (min-width:${o})`}})};function Ks(e,t,o){const l=e.theme||{};if(Array.isArray(t)){const m=l.breakpoints||Uw;return t.reduce((g,u,I)=>(g[m.up(m.keys[I])]=o(t[I]),g),{})}if(typeof t=="object"){const m=l.breakpoints||Uw;return Object.keys(t).reduce((g,u)=>{if(rz(m.keys,u)){const I=nz(l.containerQueries?l:sz,u);I&&(g[I]=o(t[u],u))}else if(Object.keys(m.values||Pg).includes(u)){const I=m.up(u);g[I]=o(t[u],u)}else{const I=u;g[I]=t[I]}return g},{})}return o(t)}function az(e={}){var o;return((o=e.keys)==null?void 0:o.reduce((l,p)=>{const m=e.up(p);return l[m]={},l},{}))||{}}function Ww(e,t){return e.reduce((o,l)=>{const p=o[l];return(!p||Object.keys(p).length===0)&&delete o[l],o},t)}function ht(e){if(typeof e!="string")throw new Error(Xs(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Mg(e,t,o=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&o){const l=`vars.${t}`.split(".").reduce((p,m)=>p&&p[m]?p[m]:null,e);if(l!=null)return l}return t.split(".").reduce((l,p)=>l&&l[p]!=null?l[p]:null,e)}function Om(e,t,o,l=o){let p;return typeof e=="function"?p=e(o):Array.isArray(e)?p=e[o]||l:p=Mg(e,o)||l,t&&(p=t(p,l,e)),p}function bn(e){const{prop:t,cssProperty:o=e.prop,themeKey:l,transform:p}=e,m=g=>{if(g[t]==null)return null;const u=g[t],I=g.theme,M=Mg(I,l)||{};return Ks(g,u,L=>{let z=Om(M,p,L);return L===z&&typeof L=="string"&&(z=Om(M,p,`${t}${L==="default"?"":ht(L)}`,L)),o===!1?z:{[o]:z}})};return m.propTypes={},m.filterProps=[t],m}function lz(e){const t={};return o=>(t[o]===void 0&&(t[o]=e(o)),t[o])}const cz={m:"margin",p:"padding"},uz={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Gw={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},hz=lz(e=>{if(e.length>2)if(Gw[e])e=Gw[e];else return[e];const[t,o]=e.split(""),l=cz[t],p=uz[o]||"";return Array.isArray(p)?p.map(m=>l+m):[l+p]}),d0=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],p0=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...d0,...p0];function mp(e,t,o,l){const p=Mg(e,t,!0)??o;return typeof p=="number"||typeof p=="string"?m=>typeof m=="string"?m:typeof p=="string"?p.startsWith("var(")&&m===0?0:p.startsWith("var(")&&m===1?p:`calc(${m} * ${p})`:p*m:Array.isArray(p)?m=>{if(typeof m=="string")return m;const g=Math.abs(m),u=p[g];return m>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof p=="function"?p:()=>{}}function f0(e){return mp(e,"spacing",8)}function gp(e,t){return typeof t=="string"||t==null?t:e(t)}function dz(e,t){return o=>e.reduce((l,p)=>(l[p]=gp(t,o),l),{})}function pz(e,t,o,l){if(!t.includes(o))return null;const p=hz(o),m=dz(p,l),g=e[o];return Ks(e,g,m)}function IT(e,t){const o=f0(e.theme);return Object.keys(e).map(l=>pz(e,t,l,o)).reduce(Rd,{})}function mn(e){return IT(e,d0)}mn.propTypes={};mn.filterProps=d0;function gn(e){return IT(e,p0)}gn.propTypes={};gn.filterProps=p0;function ET(e=8,t=f0({spacing:e})){if(e.mui)return e;const o=(...l)=>(l.length===0?[1]:l).map(m=>{const g=t(m);return typeof g=="number"?`${g}px`:g}).join(" ");return o.mui=!0,o}function Ag(...e){const t=e.reduce((l,p)=>(p.filterProps.forEach(m=>{l[m]=p}),l),{}),o=l=>Object.keys(l).reduce((p,m)=>t[m]?Rd(p,t[m](l)):p,{});return o.propTypes={},o.filterProps=e.reduce((l,p)=>l.concat(p.filterProps),[]),o}function ko(e){return typeof e!="number"?e:`${e}px solid`}function Ro(e,t){return bn({prop:e,themeKey:"borders",transform:t})}const fz=Ro("border",ko),mz=Ro("borderTop",ko),gz=Ro("borderRight",ko),yz=Ro("borderBottom",ko),_z=Ro("borderLeft",ko),vz=Ro("borderColor"),xz=Ro("borderTopColor"),bz=Ro("borderRightColor"),wz=Ro("borderBottomColor"),Sz=Ro("borderLeftColor"),Cz=Ro("outline",ko),Tz=Ro("outlineColor"),zg=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=mp(e.theme,"shape.borderRadius",4),o=l=>({borderRadius:gp(t,l)});return Ks(e,e.borderRadius,o)}return null};zg.propTypes={};zg.filterProps=["borderRadius"];Ag(fz,mz,gz,yz,_z,vz,xz,bz,wz,Sz,zg,Cz,Tz);const Rg=e=>{if(e.gap!==void 0&&e.gap!==null){const t=mp(e.theme,"spacing",8),o=l=>({gap:gp(t,l)});return Ks(e,e.gap,o)}return null};Rg.propTypes={};Rg.filterProps=["gap"];const Dg=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=mp(e.theme,"spacing",8),o=l=>({columnGap:gp(t,l)});return Ks(e,e.columnGap,o)}return null};Dg.propTypes={};Dg.filterProps=["columnGap"];const Lg=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=mp(e.theme,"spacing",8),o=l=>({rowGap:gp(t,l)});return Ks(e,e.rowGap,o)}return null};Lg.propTypes={};Lg.filterProps=["rowGap"];const kz=bn({prop:"gridColumn"}),Iz=bn({prop:"gridRow"}),Ez=bn({prop:"gridAutoFlow"}),Pz=bn({prop:"gridAutoColumns"}),Mz=bn({prop:"gridAutoRows"}),Az=bn({prop:"gridTemplateColumns"}),zz=bn({prop:"gridTemplateRows"}),Rz=bn({prop:"gridTemplateAreas"}),Dz=bn({prop:"gridArea"});Ag(Rg,Dg,Lg,kz,Iz,Ez,Pz,Mz,Az,zz,Rz,Dz);function Su(e,t){return t==="grey"?t:e}const Lz=bn({prop:"color",themeKey:"palette",transform:Su}),Bz=bn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Su}),Fz=bn({prop:"backgroundColor",themeKey:"palette",transform:Su});Ag(Lz,Bz,Fz);function lo(e){return e<=1&&e!==0?`${e*100}%`:e}const Oz=bn({prop:"width",transform:lo}),m0=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=o=>{var p,m,g,u,I;const l=((g=(m=(p=e.theme)==null?void 0:p.breakpoints)==null?void 0:m.values)==null?void 0:g[o])||Pg[o];return l?((I=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:I.unit)!=="px"?{maxWidth:`${l}${e.theme.breakpoints.unit}`}:{maxWidth:l}:{maxWidth:lo(o)}};return Ks(e,e.maxWidth,t)}return null};m0.filterProps=["maxWidth"];const $z=bn({prop:"minWidth",transform:lo}),Nz=bn({prop:"height",transform:lo}),jz=bn({prop:"maxHeight",transform:lo}),Vz=bn({prop:"minHeight",transform:lo});bn({prop:"size",cssProperty:"width",transform:lo});bn({prop:"size",cssProperty:"height",transform:lo});const Uz=bn({prop:"boxSizing"});Ag(Oz,m0,$z,Nz,jz,Vz,Uz);const yp={border:{themeKey:"borders",transform:ko},borderTop:{themeKey:"borders",transform:ko},borderRight:{themeKey:"borders",transform:ko},borderBottom:{themeKey:"borders",transform:ko},borderLeft:{themeKey:"borders",transform:ko},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ko},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:zg},color:{themeKey:"palette",transform:Su},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Su},backgroundColor:{themeKey:"palette",transform:Su},p:{style:gn},pt:{style:gn},pr:{style:gn},pb:{style:gn},pl:{style:gn},px:{style:gn},py:{style:gn},padding:{style:gn},paddingTop:{style:gn},paddingRight:{style:gn},paddingBottom:{style:gn},paddingLeft:{style:gn},paddingX:{style:gn},paddingY:{style:gn},paddingInline:{style:gn},paddingInlineStart:{style:gn},paddingInlineEnd:{style:gn},paddingBlock:{style:gn},paddingBlockStart:{style:gn},paddingBlockEnd:{style:gn},m:{style:mn},mt:{style:mn},mr:{style:mn},mb:{style:mn},ml:{style:mn},mx:{style:mn},my:{style:mn},margin:{style:mn},marginTop:{style:mn},marginRight:{style:mn},marginBottom:{style:mn},marginLeft:{style:mn},marginX:{style:mn},marginY:{style:mn},marginInline:{style:mn},marginInlineStart:{style:mn},marginInlineEnd:{style:mn},marginBlock:{style:mn},marginBlockStart:{style:mn},marginBlockEnd:{style:mn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Rg},rowGap:{style:Lg},columnGap:{style:Dg},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:lo},maxWidth:{style:m0},minWidth:{transform:lo},height:{transform:lo},maxHeight:{transform:lo},minHeight:{transform:lo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Wz(...e){const t=e.reduce((l,p)=>l.concat(Object.keys(p)),[]),o=new Set(t);return e.every(l=>o.size===Object.keys(l).length)}function Gz(e,t){return typeof e=="function"?e(t):e}function Hz(){function e(o,l,p,m){const g={[o]:l,theme:p},u=m[o];if(!u)return{[o]:l};const{cssProperty:I=o,themeKey:M,transform:F,style:L}=u;if(l==null)return null;if(M==="typography"&&l==="inherit")return{[o]:l};const z=Mg(p,M)||{};return L?L(g):Ks(g,l,H=>{let re=Om(z,F,H);return H===re&&typeof H=="string"&&(re=Om(z,F,`${o}${H==="default"?"":ht(H)}`,H)),I===!1?re:{[I]:re}})}function t(o){const{sx:l,theme:p={},nested:m}=o||{};if(!l)return null;const g=p.unstable_sxConfig??yp;function u(I){let M=I;if(typeof I=="function")M=I(p);else if(typeof I!="object")return I;if(!M)return null;const F=az(p.breakpoints),L=Object.keys(F);let z=F;return Object.keys(M).forEach(J=>{const H=Gz(M[J],p);if(H!=null)if(typeof H=="object")if(g[J])z=Rd(z,e(J,H,p,g));else{const re=Ks({theme:p},H,le=>({[J]:le}));Wz(re,H)?z[J]=t({sx:H,theme:p,nested:!0}):z=Rd(z,re)}else z=Rd(z,e(J,H,p,g))}),!m&&p.modularCssLayers?{"@layer sx":Vw(p,Ww(L,z))}:Vw(p,Ww(L,z))}return Array.isArray(l)?l.map(u):u(l)}return t}const Ka=Hz();Ka.filterProps=["sx"];function qz(e,t){var l;const o=this;if(o.vars){if(!((l=o.colorSchemes)!=null&&l[e])||typeof o.getColorSchemeSelector!="function")return{};let p=o.getColorSchemeSelector(e);return p==="&"?t:((p.includes("data-")||p.includes("."))&&(p=`*:where(${p.replace(/\s*&$/,"")}) &`),{[p]:t})}return o.palette.mode===e?t:{}}function _p(e={},...t){const{breakpoints:o={},palette:l={},spacing:p,shape:m={},...g}=e,u=tz(o),I=ET(p);let M=gi({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...l},spacing:I,shape:{...oz,...m}},g);return M=iz(M),M.applyStyles=qz,M=t.reduce((F,L)=>gi(F,L),M),M.unstable_sxConfig={...yp,...g==null?void 0:g.unstable_sxConfig},M.unstable_sx=function(L){return Ka({sx:L,theme:this})},M}function Zz(e){return Object.keys(e).length===0}function g0(e=null){const t=ee.useContext(pp);return!t||Zz(t)?e:t}const Xz=_p();function vp(e=Xz){return g0(e)}function R_(e){const t=qa(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function PT({styles:e,themeId:t,defaultTheme:o={}}){const l=vp(o),p=t&&l[t]||l;let m=typeof e=="function"?e(p):e;return p.modularCssLayers&&(Array.isArray(m)?m=m.map(g=>R_(typeof g=="function"?g(p):g)):m=R_(m)),q.jsx(wT,{styles:m})}const Kz=e=>{var l;const t={systemProps:{},otherProps:{}},o=((l=e==null?void 0:e.theme)==null?void 0:l.unstable_sxConfig)??yp;return Object.keys(e).forEach(p=>{o[p]?t.systemProps[p]=e[p]:t.otherProps[p]=e[p]}),t};function y0(e){const{sx:t,...o}=e,{systemProps:l,otherProps:p}=Kz(o);let m;return Array.isArray(t)?m=[l,...t]:typeof t=="function"?m=(...g)=>{const u=t(...g);return ps(u)?{...l,...u}:l}:m={...l,...t},{...p,sx:m}}const Hw=e=>e,Yz=()=>{let e=Hw;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Hw}}},MT=Yz();function AT(e){var t,o,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e)){var p=e.length;for(t=0;t<p;t++)e[t]&&(o=AT(e[t]))&&(l&&(l+=" "),l+=o)}else for(o in e)e[o]&&(l&&(l+=" "),l+=o);return l}function wt(){for(var e,t,o=0,l="",p=arguments.length;o<p;o++)(e=arguments[o])&&(t=AT(e))&&(l&&(l+=" "),l+=t);return l}function Jz(e={}){const{themeId:t,defaultTheme:o,defaultClassName:l="MuiBox-root",generateClassName:p}=e,m=ST("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(Ka);return ee.forwardRef(function(I,M){const F=vp(o),{className:L,component:z="div",...J}=y0(I);return q.jsx(m,{as:z,ref:M,className:wt(L,p?p(l):l),theme:t&&F[t]||F,...J})})}const Qz={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Kt(e,t,o="Mui"){const l=Qz[t];return l?`${o}-${l}`:`${MT.generate(e)}-${t}`}function Yt(e,t,o="Mui"){const l={};return t.forEach(p=>{l[p]=Kt(e,p,o)}),l}function zT(e){const{variants:t,...o}=e,l={variants:t,style:qa(o),isProcessed:!0};return l.style===o||t&&t.forEach(p=>{typeof p.style!="function"&&(p.style=qa(p.style))}),l}const eR=_p();function D_(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Nl(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function tR(e){return e?(t,o)=>o[e]:null}function rR(e,t,o){e.theme=iR(e.theme)?o:e.theme[t]||e.theme}function um(e,t,o){const l=typeof t=="function"?t(e):t;if(Array.isArray(l))return l.flatMap(p=>um(e,p,o));if(Array.isArray(l==null?void 0:l.variants)){let p;if(l.isProcessed)p=o?Nl(l.style,o):l.style;else{const{variants:m,...g}=l;p=o?Nl(qa(g),o):g}return RT(e,l.variants,[p],o)}return l!=null&&l.isProcessed?o?Nl(qa(l.style),o):l.style:o?Nl(qa(l),o):l}function RT(e,t,o=[],l=void 0){var m;let p;e:for(let g=0;g<t.length;g+=1){const u=t[g];if(typeof u.props=="function"){if(p??(p={...e,...e.ownerState,ownerState:e.ownerState}),!u.props(p))continue}else for(const I in u.props)if(e[I]!==u.props[I]&&((m=e.ownerState)==null?void 0:m[I])!==u.props[I])continue e;typeof u.style=="function"?(p??(p={...e,...e.ownerState,ownerState:e.ownerState}),o.push(l?Nl(qa(u.style(p)),l):u.style(p))):o.push(l?Nl(qa(u.style),l):u.style)}return o}function DT(e={}){const{themeId:t,defaultTheme:o=eR,rootShouldForwardProp:l=D_,slotShouldForwardProp:p=D_}=e;function m(u){rR(u,t,o)}return(u,I={})=>{YA(u,he=>he.filter(_e=>_e!==Ka));const{name:M,slot:F,skipVariantsResolver:L,skipSx:z,overridesResolver:J=tR(sR(F)),...H}=I,re=M&&M.startsWith("Mui")||F?"components":"custom",le=L!==void 0?L:F&&F!=="Root"&&F!=="root"||!1,V=z||!1;let U=D_;F==="Root"||F==="root"?U=l:F?U=p:oR(u)&&(U=void 0);const G=ST(u,{shouldForwardProp:U,label:nR(),...H}),Q=he=>{if(he.__emotion_real===he)return he;if(typeof he=="function")return function(ge){return um(ge,he,ge.theme.modularCssLayers?re:void 0)};if(ps(he)){const _e=zT(he);return function(Ae){return _e.variants?um(Ae,_e,Ae.theme.modularCssLayers?re:void 0):Ae.theme.modularCssLayers?Nl(_e.style,re):_e.style}}return he},fe=(...he)=>{const _e=[],ge=he.map(Q),Ae=[];if(_e.push(m),M&&J&&Ae.push(function(Me){var Ke,be;const Le=(be=(Ke=Me.theme.components)==null?void 0:Ke[M])==null?void 0:be.styleOverrides;if(!Le)return null;const $e={};for(const Ee in Le)$e[Ee]=um(Me,Le[Ee],Me.theme.modularCssLayers?"theme":void 0);return J(Me,$e)}),M&&!le&&Ae.push(function(Me){var $e,Ke;const Ie=Me.theme,Le=(Ke=($e=Ie==null?void 0:Ie.components)==null?void 0:$e[M])==null?void 0:Ke.variants;return Le?RT(Me,Le,[],Me.theme.modularCssLayers?"theme":void 0):null}),V||Ae.push(Ka),Array.isArray(ge[0])){const Z=ge.shift(),Me=new Array(_e.length).fill(""),Ie=new Array(Ae.length).fill("");let Le;Le=[...Me,...Z,...Ie],Le.raw=[...Me,...Z.raw,...Ie],_e.unshift(Le)}const Re=[..._e,...ge,...Ae],De=G(...Re);return u.muiName&&(De.muiName=u.muiName),De};return G.withConfig&&(fe.withConfig=G.withConfig),fe}}function nR(e,t){return void 0}function iR(e){for(const t in e)return!1;return!0}function oR(e){return typeof e=="string"&&e.charCodeAt(0)>96}function sR(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const LT=DT();function np(e,t,o=!1){const l={...t};for(const p in e)if(Object.prototype.hasOwnProperty.call(e,p)){const m=p;if(m==="components"||m==="slots")l[m]={...e[m],...l[m]};else if(m==="componentsProps"||m==="slotProps"){const g=e[m],u=t[m];if(!u)l[m]=g||{};else if(!g)l[m]=u;else{l[m]={...u};for(const I in g)if(Object.prototype.hasOwnProperty.call(g,I)){const M=I;l[m][M]=np(g[M],u[M],o)}}}else m==="className"&&o&&t.className?l.className=wt(e==null?void 0:e.className,t==null?void 0:t.className):m==="style"&&o&&t.style?l.style={...e==null?void 0:e.style,...t==null?void 0:t.style}:l[m]===void 0&&(l[m]=e[m])}return l}function aR(e){const{theme:t,name:o,props:l}=e;return!t||!t.components||!t.components[o]||!t.components[o].defaultProps?l:np(t.components[o].defaultProps,l)}function BT({props:e,name:t,defaultTheme:o,themeId:l}){let p=vp(o);return l&&(p=p[l]||p),aR({theme:p,name:t,props:e})}const Zo=typeof window<"u"?ee.useLayoutEffect:ee.useEffect;function lR(e,t=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,o))}function _0(e,t=0,o=1){return lR(e,t,o)}function cR(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let o=e.match(t);return o&&o[0].length===1&&(o=o.map(l=>l+l)),o?`rgb${o.length===4?"a":""}(${o.map((l,p)=>p<3?parseInt(l,16):Math.round(parseInt(l,16)/255*1e3)/1e3).join(", ")})`:""}function Ya(e){if(e.type)return e;if(e.charAt(0)==="#")return Ya(cR(e));const t=e.indexOf("("),o=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(o))throw new Error(Xs(9,e));let l=e.substring(t+1,e.length-1),p;if(o==="color"){if(l=l.split(" "),p=l.shift(),l.length===4&&l[3].charAt(0)==="/"&&(l[3]=l[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(p))throw new Error(Xs(10,p))}else l=l.split(",");return l=l.map(m=>parseFloat(m)),{type:o,values:l,colorSpace:p}}const uR=e=>{const t=Ya(e);return t.values.slice(0,3).map((o,l)=>t.type.includes("hsl")&&l!==0?`${o}%`:o).join(" ")},xd=(e,t)=>{try{return uR(e)}catch{return e}};function Bg(e){const{type:t,colorSpace:o}=e;let{values:l}=e;return t.includes("rgb")?l=l.map((p,m)=>m<3?parseInt(p,10):p):t.includes("hsl")&&(l[1]=`${l[1]}%`,l[2]=`${l[2]}%`),t.includes("color")?l=`${o} ${l.join(" ")}`:l=`${l.join(", ")}`,`${t}(${l})`}function FT(e){e=Ya(e);const{values:t}=e,o=t[0],l=t[1]/100,p=t[2]/100,m=l*Math.min(p,1-p),g=(M,F=(M+o/30)%12)=>p-m*Math.max(Math.min(F-3,9-F,1),-1);let u="rgb";const I=[Math.round(g(0)*255),Math.round(g(8)*255),Math.round(g(4)*255)];return e.type==="hsla"&&(u+="a",I.push(t[3])),Bg({type:u,values:I})}function jv(e){e=Ya(e);let t=e.type==="hsl"||e.type==="hsla"?Ya(FT(e)).values:e.values;return t=t.map(o=>(e.type!=="color"&&(o/=255),o<=.03928?o/12.92:((o+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function hR(e,t){const o=jv(e),l=jv(t);return(Math.max(o,l)+.05)/(Math.min(o,l)+.05)}function $m(e,t){return e=Ya(e),t=_0(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Bg(e)}function El(e,t,o){try{return $m(e,t)}catch{return e}}function Fg(e,t){if(e=Ya(e),t=_0(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let o=0;o<3;o+=1)e.values[o]*=1-t;return Bg(e)}function Dr(e,t,o){try{return Fg(e,t)}catch{return e}}function Og(e,t){if(e=Ya(e),t=_0(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let o=0;o<3;o+=1)e.values[o]+=(255-e.values[o])*t;else if(e.type.includes("color"))for(let o=0;o<3;o+=1)e.values[o]+=(1-e.values[o])*t;return Bg(e)}function Lr(e,t,o){try{return Og(e,t)}catch{return e}}function dR(e,t=.15){return jv(e)>.5?Fg(e,t):Og(e,t)}function Vf(e,t,o){try{return dR(e,t)}catch{return e}}const OT=ee.createContext(null);function v0(){return ee.useContext(OT)}const pR=typeof Symbol=="function"&&Symbol.for,fR=pR?Symbol.for("mui.nested"):"__THEME_NESTED__";function mR(e,t){return typeof t=="function"?t(e):{...e,...t}}function gR(e){const{children:t,theme:o}=e,l=v0(),p=ee.useMemo(()=>{const m=l===null?{...o}:mR(l,o);return m!=null&&(m[fR]=l!==null),m},[o,l]);return q.jsx(OT.Provider,{value:p,children:t})}const $T=ee.createContext();function yR({value:e,...t}){return q.jsx($T.Provider,{value:e??!0,...t})}const NT=()=>ee.useContext($T)??!1,jT=ee.createContext(void 0);function _R({value:e,children:t}){return q.jsx(jT.Provider,{value:e,children:t})}function vR(e){const{theme:t,name:o,props:l}=e;if(!t||!t.components||!t.components[o])return l;const p=t.components[o];return p.defaultProps?np(p.defaultProps,l,t.components.mergeClassNameAndStyle):!p.styleOverrides&&!p.variants?np(p,l,t.components.mergeClassNameAndStyle):l}function xR({props:e,name:t}){const o=ee.useContext(jT);return vR({props:e,name:t,theme:{components:o}})}let qw=0;function bR(e){const[t,o]=ee.useState(e),l=e||t;return ee.useEffect(()=>{t==null&&(qw+=1,o(`mui-${qw}`))},[t]),l}const wR={...U_},Zw=wR.useId;function Nu(e){if(Zw!==void 0){const t=Zw();return e??t}return bR(e)}function SR(e){const t=g0(),o=Nu()||"",{modularCssLayers:l}=e;let p="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!l||t!==null?p="":typeof l=="string"?p=l.replace(/mui(?!\.)/g,p):p=`@layer ${p};`,Zo(()=>{var u,I;const m=document.querySelector("head");if(!m)return;const g=m.firstChild;if(p){if(g&&((u=g.hasAttribute)!=null&&u.call(g,"data-mui-layer-order"))&&g.getAttribute("data-mui-layer-order")===o)return;const M=document.createElement("style");M.setAttribute("data-mui-layer-order",o),M.textContent=p,m.prepend(M)}else(I=m.querySelector(`style[data-mui-layer-order="${o}"]`))==null||I.remove()},[p,o]),p?q.jsx(PT,{styles:p}):null}const Xw={};function Kw(e,t,o,l=!1){return ee.useMemo(()=>{const p=e&&t[e]||t;if(typeof o=="function"){const m=o(p),g=e?{...t,[e]:m}:m;return l?()=>g:g}return e?{...t,[e]:o}:{...t,...o}},[e,t,o,l])}function VT(e){const{children:t,theme:o,themeId:l}=e,p=g0(Xw),m=v0()||Xw,g=Kw(l,p,o),u=Kw(l,m,o,!0),I=(l?g[l]:g).direction==="rtl",M=SR(g);return q.jsx(gR,{theme:u,children:q.jsx(pp.Provider,{value:g,children:q.jsx(yR,{value:I,children:q.jsxs(_R,{value:l?g[l].components:g.components,children:[M,t]})})})})}const Yw={theme:void 0};function CR(e){let t,o;return function(p){let m=t;return(m===void 0||p.theme!==o)&&(Yw.theme=p.theme,m=zT(e(Yw)),t=m,o=p.theme),m}}const x0="mode",b0="color-scheme",TR="data-color-scheme";function kR(e){const{defaultMode:t="system",defaultLightColorScheme:o="light",defaultDarkColorScheme:l="dark",modeStorageKey:p=x0,colorSchemeStorageKey:m=b0,attribute:g=TR,colorSchemeNode:u="document.documentElement",nonce:I}=e||{};let M="",F=g;if(g==="class"&&(F=".%s"),g==="data"&&(F="[data-%s]"),F.startsWith(".")){const z=F.substring(1);M+=`${u}.classList.remove('${z}'.replace('%s', light), '${z}'.replace('%s', dark));
      ${u}.classList.add('${z}'.replace('%s', colorScheme));`}const L=F.match(/\[([^[\]]+)\]/);if(L){const[z,J]=L[1].split("=");J||(M+=`${u}.removeAttribute('${z}'.replace('%s', light));
      ${u}.removeAttribute('${z}'.replace('%s', dark));`),M+=`
      ${u}.setAttribute('${z}'.replace('%s', colorScheme), ${J?`${J}.replace('%s', colorScheme)`:'""'});`}else F!==".%s"&&(M+=`${u}.setAttribute('${F}', colorScheme);`);return q.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?I:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${p}') || '${t}';
  const dark = localStorage.getItem('${m}-dark') || '${l}';
  const light = localStorage.getItem('${m}-light') || '${o}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${M}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function IR(){}const ER=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(o){if(typeof window>"u")return;if(!t)return o;let l;try{l=t.localStorage.getItem(e)}catch{}return l||o},set:o=>{if(t)try{t.localStorage.setItem(e,o)}catch{}},subscribe:o=>{if(!t)return IR;const l=p=>{const m=p.newValue;p.key===e&&o(m)};return t.addEventListener("storage",l),()=>{t.removeEventListener("storage",l)}}});function L_(){}function Jw(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function UT(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function PR(e){return UT(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function MR(e){const{defaultMode:t="light",defaultLightColorScheme:o,defaultDarkColorScheme:l,supportedColorSchemes:p=[],modeStorageKey:m=x0,colorSchemeStorageKey:g=b0,storageWindow:u=typeof window>"u"?void 0:window,storageManager:I=ER,noSsr:M=!1}=e,F=p.join(","),L=p.length>1,z=ee.useMemo(()=>I==null?void 0:I({key:m,storageWindow:u}),[I,m,u]),J=ee.useMemo(()=>I==null?void 0:I({key:`${g}-light`,storageWindow:u}),[I,g,u]),H=ee.useMemo(()=>I==null?void 0:I({key:`${g}-dark`,storageWindow:u}),[I,g,u]),[re,le]=ee.useState(()=>{const ge=(z==null?void 0:z.get(t))||t,Ae=(J==null?void 0:J.get(o))||o,Re=(H==null?void 0:H.get(l))||l;return{mode:ge,systemMode:Jw(ge),lightColorScheme:Ae,darkColorScheme:Re}}),[V,U]=ee.useState(M||!L);ee.useEffect(()=>{U(!0)},[]);const G=PR(re),Q=ee.useCallback(ge=>{le(Ae=>{if(ge===Ae.mode)return Ae;const Re=ge??t;return z==null||z.set(Re),{...Ae,mode:Re,systemMode:Jw(Re)}})},[z,t]),fe=ee.useCallback(ge=>{ge?typeof ge=="string"?ge&&!F.includes(ge)?console.error(`\`${ge}\` does not exist in \`theme.colorSchemes\`.`):le(Ae=>{const Re={...Ae};return UT(Ae,De=>{De==="light"&&(J==null||J.set(ge),Re.lightColorScheme=ge),De==="dark"&&(H==null||H.set(ge),Re.darkColorScheme=ge)}),Re}):le(Ae=>{const Re={...Ae},De=ge.light===null?o:ge.light,Z=ge.dark===null?l:ge.dark;return De&&(F.includes(De)?(Re.lightColorScheme=De,J==null||J.set(De)):console.error(`\`${De}\` does not exist in \`theme.colorSchemes\`.`)),Z&&(F.includes(Z)?(Re.darkColorScheme=Z,H==null||H.set(Z)):console.error(`\`${Z}\` does not exist in \`theme.colorSchemes\`.`)),Re}):le(Ae=>(J==null||J.set(o),H==null||H.set(l),{...Ae,lightColorScheme:o,darkColorScheme:l}))},[F,J,H,o,l]),he=ee.useCallback(ge=>{re.mode==="system"&&le(Ae=>{const Re=ge!=null&&ge.matches?"dark":"light";return Ae.systemMode===Re?Ae:{...Ae,systemMode:Re}})},[re.mode]),_e=ee.useRef(he);return _e.current=he,ee.useEffect(()=>{if(typeof window.matchMedia!="function"||!L)return;const ge=(...Re)=>_e.current(...Re),Ae=window.matchMedia("(prefers-color-scheme: dark)");return Ae.addListener(ge),ge(Ae),()=>{Ae.removeListener(ge)}},[L]),ee.useEffect(()=>{if(L){const ge=(z==null?void 0:z.subscribe(De=>{(!De||["light","dark","system"].includes(De))&&Q(De||t)}))||L_,Ae=(J==null?void 0:J.subscribe(De=>{(!De||F.match(De))&&fe({light:De})}))||L_,Re=(H==null?void 0:H.subscribe(De=>{(!De||F.match(De))&&fe({dark:De})}))||L_;return()=>{ge(),Ae(),Re()}}},[fe,Q,F,t,u,L,z,J,H]),{...re,mode:V?re.mode:void 0,systemMode:V?re.systemMode:void 0,colorScheme:V?G:void 0,setMode:Q,setColorScheme:fe}}const AR="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function zR(e){const{themeId:t,theme:o={},modeStorageKey:l=x0,colorSchemeStorageKey:p=b0,disableTransitionOnChange:m=!1,defaultColorScheme:g,resolveTheme:u}=e,I={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},M=ee.createContext(void 0),F=()=>ee.useContext(M)||I,L={},z={};function J(V){var En,Ln,Xe,hn;const{children:U,theme:G,modeStorageKey:Q=l,colorSchemeStorageKey:fe=p,disableTransitionOnChange:he=m,storageManager:_e,storageWindow:ge=typeof window>"u"?void 0:window,documentNode:Ae=typeof document>"u"?void 0:document,colorSchemeNode:Re=typeof document>"u"?void 0:document.documentElement,disableNestedContext:De=!1,disableStyleSheetGeneration:Z=!1,defaultMode:Me="system",forceThemeRerender:Ie=!1,noSsr:Le}=V,$e=ee.useRef(!1),Ke=v0(),be=ee.useContext(M),Ee=!!be&&!De,We=ee.useMemo(()=>G||(typeof o=="function"?o():o),[G]),Ze=We[t],Ge=Ze||We,{colorSchemes:St=L,components:Dt=z,cssVarPrefix:$t}=Ge,Vt=Object.keys(St).filter(ar=>!!St[ar]).join(","),Rt=ee.useMemo(()=>Vt.split(","),[Vt]),cr=typeof g=="string"?g:g.light,Ut=typeof g=="string"?g:g.dark,Ct=St[cr]&&St[Ut]?Me:((Ln=(En=St[Ge.defaultColorScheme])==null?void 0:En.palette)==null?void 0:Ln.mode)||((Xe=Ge.palette)==null?void 0:Xe.mode),{mode:qt,setMode:Ht,systemMode:yr,lightColorScheme:Nt,darkColorScheme:sr,colorScheme:ze,setColorScheme:Or}=MR({supportedColorSchemes:Rt,defaultLightColorScheme:cr,defaultDarkColorScheme:Ut,modeStorageKey:Q,colorSchemeStorageKey:fe,defaultMode:Ct,storageManager:_e,storageWindow:ge,noSsr:Le});let Cr=qt,At=ze;Ee&&(Cr=be.mode,At=be.colorScheme);let er=At||Ge.defaultColorScheme;Ge.vars&&!Ie&&(er=Ge.defaultColorScheme);const xr=ee.useMemo(()=>{var $r;const ar=(($r=Ge.generateThemeVars)==null?void 0:$r.call(Ge))||Ge.vars,zt={...Ge,components:Dt,colorSchemes:St,cssVarPrefix:$t,vars:ar};if(typeof zt.generateSpacing=="function"&&(zt.spacing=zt.generateSpacing()),er){const qe=St[er];qe&&typeof qe=="object"&&Object.keys(qe).forEach(Tt=>{qe[Tt]&&typeof qe[Tt]=="object"?zt[Tt]={...zt[Tt],...qe[Tt]}:zt[Tt]=qe[Tt]})}return u?u(zt):zt},[Ge,er,Dt,St,$t]),_t=Ge.colorSchemeSelector;Zo(()=>{if(At&&Re&&_t&&_t!=="media"){const ar=_t;let zt=_t;if(ar==="class"&&(zt=".%s"),ar==="data"&&(zt="[data-%s]"),ar!=null&&ar.startsWith("data-")&&!ar.includes("%s")&&(zt=`[${ar}="%s"]`),zt.startsWith("."))Re.classList.remove(...Rt.map($r=>zt.substring(1).replace("%s",$r))),Re.classList.add(zt.substring(1).replace("%s",At));else{const $r=zt.replace("%s",At).match(/\[([^\]]+)\]/);if($r){const[qe,Tt]=$r[1].split("=");Tt||Rt.forEach(Pt=>{Re.removeAttribute(qe.replace(At,Pt))}),Re.setAttribute(qe,Tt?Tt.replace(/"|'/g,""):"")}else Re.setAttribute(zt,At)}}},[At,_t,Re,Rt]),ee.useEffect(()=>{let ar;if(he&&$e.current&&Ae){const zt=Ae.createElement("style");zt.appendChild(Ae.createTextNode(AR)),Ae.head.appendChild(zt),window.getComputedStyle(Ae.body),ar=setTimeout(()=>{Ae.head.removeChild(zt)},1)}return()=>{clearTimeout(ar)}},[At,he,Ae]),ee.useEffect(()=>($e.current=!0,()=>{$e.current=!1}),[]);const _n=ee.useMemo(()=>({allColorSchemes:Rt,colorScheme:At,darkColorScheme:sr,lightColorScheme:Nt,mode:Cr,setColorScheme:Or,setMode:Ht,systemMode:yr}),[Rt,At,sr,Nt,Cr,Or,Ht,yr,xr.colorSchemeSelector]);let Tr=!0;(Z||Ge.cssVariables===!1||Ee&&(Ke==null?void 0:Ke.cssVarPrefix)===$t)&&(Tr=!1);const un=q.jsxs(ee.Fragment,{children:[q.jsx(VT,{themeId:Ze?t:void 0,theme:xr,children:U}),Tr&&q.jsx(wT,{styles:((hn=xr.generateStyleSheets)==null?void 0:hn.call(xr))||[]})]});return Ee?un:q.jsx(M.Provider,{value:_n,children:un})}const H=typeof g=="string"?g:g.light,re=typeof g=="string"?g:g.dark;return{CssVarsProvider:J,useColorScheme:F,getInitColorSchemeScript:V=>kR({colorSchemeStorageKey:p,defaultLightColorScheme:H,defaultDarkColorScheme:re,modeStorageKey:l,...V})}}function RR(e=""){function t(...l){if(!l.length)return"";const p=l[0];return typeof p=="string"&&!p.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${p}${t(...l.slice(1))})`:`, ${p}`}return(l,...p)=>`var(--${e?`${e}-`:""}${l}${t(...p)})`}const Qw=(e,t,o,l=[])=>{let p=e;t.forEach((m,g)=>{g===t.length-1?Array.isArray(p)?p[Number(m)]=o:p&&typeof p=="object"&&(p[m]=o):p&&typeof p=="object"&&(p[m]||(p[m]=l.includes(m)?[]:{}),p=p[m])})},DR=(e,t,o)=>{function l(p,m=[],g=[]){Object.entries(p).forEach(([u,I])=>{(!o||o&&!o([...m,u]))&&I!=null&&(typeof I=="object"&&Object.keys(I).length>0?l(I,[...m,u],Array.isArray(I)?[...g,u]:g):t([...m,u],I,g))})}l(e)},LR=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(l=>e.includes(l))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function B_(e,t){const{prefix:o,shouldSkipGeneratingVar:l}=t||{},p={},m={},g={};return DR(e,(u,I,M)=>{if((typeof I=="string"||typeof I=="number")&&(!l||!l(u,I))){const F=`--${o?`${o}-`:""}${u.join("-")}`,L=LR(u,I);Object.assign(p,{[F]:L}),Qw(m,u,`var(${F})`,M),Qw(g,u,`var(${F}, ${L})`,M)}},u=>u[0]==="vars"),{css:p,vars:m,varsWithDefaults:g}}function BR(e,t={}){const{getSelector:o=V,disableCssColorScheme:l,colorSchemeSelector:p,enableContrastVars:m}=t,{colorSchemes:g={},components:u,defaultColorScheme:I="light",...M}=e,{vars:F,css:L,varsWithDefaults:z}=B_(M,t);let J=z;const H={},{[I]:re,...le}=g;if(Object.entries(le||{}).forEach(([Q,fe])=>{const{vars:he,css:_e,varsWithDefaults:ge}=B_(fe,t);J=gi(J,ge),H[Q]={css:_e,vars:he}}),re){const{css:Q,vars:fe,varsWithDefaults:he}=B_(re,t);J=gi(J,he),H[I]={css:Q,vars:fe}}function V(Q,fe){var _e,ge;let he=p;if(p==="class"&&(he=".%s"),p==="data"&&(he="[data-%s]"),p!=null&&p.startsWith("data-")&&!p.includes("%s")&&(he=`[${p}="%s"]`),Q){if(he==="media")return e.defaultColorScheme===Q?":root":{[`@media (prefers-color-scheme: ${((ge=(_e=g[Q])==null?void 0:_e.palette)==null?void 0:ge.mode)||Q})`]:{":root":fe}};if(he)return e.defaultColorScheme===Q?`:root, ${he.replace("%s",String(Q))}`:he.replace("%s",String(Q))}return":root"}return{vars:J,generateThemeVars:()=>{let Q={...F};return Object.entries(H).forEach(([,{vars:fe}])=>{Q=gi(Q,fe)}),Q},generateStyleSheets:()=>{var Ae,Re;const Q=[],fe=e.defaultColorScheme||"light";function he(De,Z){Object.keys(Z).length&&Q.push(typeof De=="string"?{[De]:{...Z}}:De)}he(o(void 0,{...L}),L);const{[fe]:_e,...ge}=H;if(_e){const{css:De}=_e,Z=(Re=(Ae=g[fe])==null?void 0:Ae.palette)==null?void 0:Re.mode,Me=!l&&Z?{colorScheme:Z,...De}:{...De};he(o(fe,{...Me}),Me)}return Object.entries(ge).forEach(([De,{css:Z}])=>{var Le,$e;const Me=($e=(Le=g[De])==null?void 0:Le.palette)==null?void 0:$e.mode,Ie=!l&&Me?{colorScheme:Me,...Z}:{...Z};he(o(De,{...Ie}),Ie)}),m&&Q.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),Q}}}function FR(e){return function(o){return e==="media"?`@media (prefers-color-scheme: ${o})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${o}"] &`:e==="class"?`.${o} &`:e==="data"?`[data-${o}] &`:`${e.replace("%s",o)} &`:"&"}}function Jt(e,t,o=void 0){const l={};for(const p in e){const m=e[p];let g="",u=!0;for(let I=0;I<m.length;I+=1){const M=m[I];M&&(g+=(u===!0?"":" ")+t(M),u=!1,o&&o[M]&&(g+=" "+o[M]))}l[p]=g}return l}const OR=_p(),$R=LT("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${ht(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),NR=e=>BT({props:e,name:"MuiContainer",defaultTheme:OR}),jR=(e,t)=>{const o=I=>Kt(t,I),{classes:l,fixed:p,disableGutters:m,maxWidth:g}=e,u={root:["root",g&&`maxWidth${ht(String(g))}`,p&&"fixed",m&&"disableGutters"]};return Jt(u,o,l)};function VR(e={}){const{createStyledComponent:t=$R,useThemeProps:o=NR,componentName:l="MuiContainer"}=e,p=t(({theme:g,ownerState:u})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!u.disableGutters&&{paddingLeft:g.spacing(2),paddingRight:g.spacing(2),[g.breakpoints.up("sm")]:{paddingLeft:g.spacing(3),paddingRight:g.spacing(3)}}}),({theme:g,ownerState:u})=>u.fixed&&Object.keys(g.breakpoints.values).reduce((I,M)=>{const F=M,L=g.breakpoints.values[F];return L!==0&&(I[g.breakpoints.up(F)]={maxWidth:`${L}${g.breakpoints.unit}`}),I},{}),({theme:g,ownerState:u})=>({...u.maxWidth==="xs"&&{[g.breakpoints.up("xs")]:{maxWidth:Math.max(g.breakpoints.values.xs,444)}},...u.maxWidth&&u.maxWidth!=="xs"&&{[g.breakpoints.up(u.maxWidth)]:{maxWidth:`${g.breakpoints.values[u.maxWidth]}${g.breakpoints.unit}`}}}));return ee.forwardRef(function(u,I){const M=o(u),{className:F,component:L="div",disableGutters:z=!1,fixed:J=!1,maxWidth:H="lg",classes:re,...le}=M,V={...M,component:L,disableGutters:z,fixed:J,maxWidth:H},U=jR(V,l);return q.jsx(p,{as:L,ownerState:V,className:wt(U.root,F),ref:I,...le})})}function Dd(e,t){var o,l,p;return ee.isValidElement(e)&&t.indexOf(e.type.muiName??((p=(l=(o=e.type)==null?void 0:o._payload)==null?void 0:l.value)==null?void 0:p.muiName))!==-1}const UR=(e,t)=>e.filter(o=>t.includes(o)),ju=(e,t,o)=>{const l=e.keys[0];Array.isArray(t)?t.forEach((p,m)=>{o((g,u)=>{m<=e.keys.length-1&&(m===0?Object.assign(g,u):g[e.up(e.keys[m])]=u)},p)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:UR(e.keys,Object.keys(t))).forEach(m=>{if(e.keys.includes(m)){const g=t[m];g!==void 0&&o((u,I)=>{l===m?Object.assign(u,I):u[e.up(m)]=I},g)}}):(typeof t=="number"||typeof t=="string")&&o((p,m)=>{Object.assign(p,m)},t)};function Nm(e){return`--Grid-${e}Spacing`}function $g(e){return`--Grid-parent-${e}Spacing`}const e2="--Grid-columns",Cu="--Grid-parent-columns",WR=({theme:e,ownerState:t})=>{const o={};return ju(e.breakpoints,t.size,(l,p)=>{let m={};p==="grow"&&(m={flexBasis:0,flexGrow:1,maxWidth:"100%"}),p==="auto"&&(m={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof p=="number"&&(m={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${p} / var(${Cu}) - (var(${Cu}) - ${p}) * (var(${$g("column")}) / var(${Cu})))`}),l(o,m)}),o},GR=({theme:e,ownerState:t})=>{const o={};return ju(e.breakpoints,t.offset,(l,p)=>{let m={};p==="auto"&&(m={marginLeft:"auto"}),typeof p=="number"&&(m={marginLeft:p===0?"0px":`calc(100% * ${p} / var(${Cu}) + var(${$g("column")}) * ${p} / var(${Cu}))`}),l(o,m)}),o},HR=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={[e2]:12};return ju(e.breakpoints,t.columns,(l,p)=>{const m=p??12;l(o,{[e2]:m,"> *":{[Cu]:m}})}),o},qR=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={};return ju(e.breakpoints,t.rowSpacing,(l,p)=>{var g;const m=typeof p=="string"?p:(g=e.spacing)==null?void 0:g.call(e,p);l(o,{[Nm("row")]:m,"> *":{[$g("row")]:m}})}),o},ZR=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={};return ju(e.breakpoints,t.columnSpacing,(l,p)=>{var g;const m=typeof p=="string"?p:(g=e.spacing)==null?void 0:g.call(e,p);l(o,{[Nm("column")]:m,"> *":{[$g("column")]:m}})}),o},XR=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={};return ju(e.breakpoints,t.direction,(l,p)=>{l(o,{flexDirection:p})}),o},KR=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${Nm("row")}) var(${Nm("column")})`}}),YR=e=>{const t=[];return Object.entries(e).forEach(([o,l])=>{l!==!1&&l!==void 0&&t.push(`grid-${o}-${String(l)}`)}),t},JR=(e,t="xs")=>{function o(l){return l===void 0?!1:typeof l=="string"&&!Number.isNaN(Number(l))||typeof l=="number"&&l>0}if(o(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const l=[];return Object.entries(e).forEach(([p,m])=>{o(m)&&l.push(`spacing-${p}-${String(m)}`)}),l}return[]},QR=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,o])=>`direction-${t}-${o}`):[`direction-xs-${String(e)}`];function e5(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(o=>{e[o]!==void 0&&delete e[o]})}const t5=_p(),r5=LT("div",{name:"MuiGrid",slot:"Root"});function n5(e){return BT({props:e,name:"MuiGrid",defaultTheme:t5})}function i5(e={}){const{createStyledComponent:t=r5,useThemeProps:o=n5,useTheme:l=vp,componentName:p="MuiGrid"}=e,m=(M,F)=>{const{container:L,direction:z,spacing:J,wrap:H,size:re}=M,le={root:["root",L&&"container",H!=="wrap"&&`wrap-xs-${String(H)}`,...QR(z),...YR(re),...L?JR(J,F.breakpoints.keys[0]):[]]};return Jt(le,V=>Kt(p,V),{})};function g(M,F,L=()=>!0){const z={};return M===null||(Array.isArray(M)?M.forEach((J,H)=>{J!==null&&L(J)&&F.keys[H]&&(z[F.keys[H]]=J)}):typeof M=="object"?Object.keys(M).forEach(J=>{const H=M[J];H!=null&&L(H)&&(z[J]=H)}):z[F.keys[0]]=M),z}const u=t(HR,ZR,qR,WR,XR,KR,GR),I=ee.forwardRef(function(F,L){const z=l(),J=o(F),H=y0(J);e5(H,z.breakpoints);const{className:re,children:le,columns:V=12,container:U=!1,component:G="div",direction:Q="row",wrap:fe="wrap",size:he={},offset:_e={},spacing:ge=0,rowSpacing:Ae=ge,columnSpacing:Re=ge,unstable_level:De=0,...Z}=H,Me=g(he,z.breakpoints,Ze=>Ze!==!1),Ie=g(_e,z.breakpoints),Le=F.columns??(De?void 0:V),$e=F.spacing??(De?void 0:ge),Ke=F.rowSpacing??F.spacing??(De?void 0:Ae),be=F.columnSpacing??F.spacing??(De?void 0:Re),Ee={...H,level:De,columns:Le,container:U,direction:Q,wrap:fe,spacing:$e,rowSpacing:Ke,columnSpacing:be,size:Me,offset:Ie},We=m(Ee,z);return q.jsx(u,{ref:L,as:G,ownerState:Ee,className:wt(We.root,re),...Z,children:ee.Children.map(le,Ze=>{var Ge;return ee.isValidElement(Ze)&&Dd(Ze,["Grid"])&&U&&Ze.props.container?ee.cloneElement(Ze,{unstable_level:((Ge=Ze.props)==null?void 0:Ge.unstable_level)??De+1}):Ze})})});return I.muiName="Grid",I}const ip={black:"#000",white:"#fff"},o5={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Zc={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Xc={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},hd={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Kc={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Yc={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Jc={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function WT(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ip.white,default:ip.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const GT=WT();function HT(){return{text:{primary:ip.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ip.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Vv=HT();function t2(e,t,o,l){const p=l.light||l,m=l.dark||l*1.5;e[t]||(e.hasOwnProperty(o)?e[t]=e[o]:t==="light"?e.light=Og(e.main,p):t==="dark"&&(e.dark=Fg(e.main,m)))}function r2(e,t,o,l,p){const m=p.light||p,g=p.dark||p*1.5;t[o]||(t.hasOwnProperty(l)?t[o]=t[l]:o==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(m*100).toFixed(0)}%)`:o==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(g*100).toFixed(0)}%)`))}function s5(e="light"){return e==="dark"?{main:Kc[200],light:Kc[50],dark:Kc[400]}:{main:Kc[700],light:Kc[400],dark:Kc[800]}}function a5(e="light"){return e==="dark"?{main:Zc[200],light:Zc[50],dark:Zc[400]}:{main:Zc[500],light:Zc[300],dark:Zc[700]}}function l5(e="light"){return e==="dark"?{main:Xc[500],light:Xc[300],dark:Xc[700]}:{main:Xc[700],light:Xc[400],dark:Xc[800]}}function c5(e="light"){return e==="dark"?{main:Yc[400],light:Yc[300],dark:Yc[700]}:{main:Yc[700],light:Yc[500],dark:Yc[900]}}function u5(e="light"){return e==="dark"?{main:Jc[400],light:Jc[300],dark:Jc[700]}:{main:Jc[800],light:Jc[500],dark:Jc[900]}}function h5(e="light"){return e==="dark"?{main:hd[400],light:hd[300],dark:hd[700]}:{main:"#ed6c02",light:hd[500],dark:hd[900]}}function d5(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function w0(e){const{mode:t="light",contrastThreshold:o=3,tonalOffset:l=.2,colorSpace:p,...m}=e,g=e.primary||s5(t),u=e.secondary||a5(t),I=e.error||l5(t),M=e.info||c5(t),F=e.success||u5(t),L=e.warning||h5(t);function z(le){return p?d5(le):hR(le,Vv.text.primary)>=o?Vv.text.primary:GT.text.primary}const J=({color:le,name:V,mainShade:U=500,lightShade:G=300,darkShade:Q=700})=>{if(le={...le},!le.main&&le[U]&&(le.main=le[U]),!le.hasOwnProperty("main"))throw new Error(Xs(11,V?` (${V})`:"",U));if(typeof le.main!="string")throw new Error(Xs(12,V?` (${V})`:"",JSON.stringify(le.main)));return p?(r2(p,le,"light",G,l),r2(p,le,"dark",Q,l)):(t2(le,"light",G,l),t2(le,"dark",Q,l)),le.contrastText||(le.contrastText=z(le.main)),le};let H;return t==="light"?H=WT():t==="dark"&&(H=HT()),gi({common:{...ip},mode:t,primary:J({color:g,name:"primary"}),secondary:J({color:u,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:J({color:I,name:"error"}),warning:J({color:L,name:"warning"}),info:J({color:M,name:"info"}),success:J({color:F,name:"success"}),grey:o5,contrastThreshold:o,getContrastText:z,augmentColor:J,tonalOffset:l,...H},m)}function p5(e){const t={};return Object.entries(e).forEach(l=>{const[p,m]=l;typeof m=="object"&&(t[p]=`${m.fontStyle?`${m.fontStyle} `:""}${m.fontVariant?`${m.fontVariant} `:""}${m.fontWeight?`${m.fontWeight} `:""}${m.fontStretch?`${m.fontStretch} `:""}${m.fontSize||""}${m.lineHeight?`/${m.lineHeight} `:""}${m.fontFamily||""}`)}),t}function f5(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function m5(e){return Math.round(e*1e5)/1e5}const n2={textTransform:"uppercase"},i2='"Roboto", "Helvetica", "Arial", sans-serif';function qT(e,t){const{fontFamily:o=i2,fontSize:l=14,fontWeightLight:p=300,fontWeightRegular:m=400,fontWeightMedium:g=500,fontWeightBold:u=700,htmlFontSize:I=16,allVariants:M,pxToRem:F,...L}=typeof t=="function"?t(e):t,z=l/14,J=F||(le=>`${le/I*z}rem`),H=(le,V,U,G,Q)=>({fontFamily:o,fontWeight:le,fontSize:J(V),lineHeight:U,...o===i2?{letterSpacing:`${m5(G/V)}em`}:{},...Q,...M}),re={h1:H(p,96,1.167,-1.5),h2:H(p,60,1.2,-.5),h3:H(m,48,1.167,0),h4:H(m,34,1.235,.25),h5:H(m,24,1.334,0),h6:H(g,20,1.6,.15),subtitle1:H(m,16,1.75,.15),subtitle2:H(g,14,1.57,.1),body1:H(m,16,1.5,.15),body2:H(m,14,1.43,.15),button:H(g,14,1.75,.4,n2),caption:H(m,12,1.66,.4),overline:H(m,12,2.66,1,n2),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return gi({htmlFontSize:I,pxToRem:J,fontFamily:o,fontSize:l,fontWeightLight:p,fontWeightRegular:m,fontWeightMedium:g,fontWeightBold:u,...re},L,{clone:!1})}const g5=.2,y5=.14,_5=.12;function rn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${g5})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${y5})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${_5})`].join(",")}const v5=["none",rn(0,2,1,-1,0,1,1,0,0,1,3,0),rn(0,3,1,-2,0,2,2,0,0,1,5,0),rn(0,3,3,-2,0,3,4,0,0,1,8,0),rn(0,2,4,-1,0,4,5,0,0,1,10,0),rn(0,3,5,-1,0,5,8,0,0,1,14,0),rn(0,3,5,-1,0,6,10,0,0,1,18,0),rn(0,4,5,-2,0,7,10,1,0,2,16,1),rn(0,5,5,-3,0,8,10,1,0,3,14,2),rn(0,5,6,-3,0,9,12,1,0,3,16,2),rn(0,6,6,-3,0,10,14,1,0,4,18,3),rn(0,6,7,-4,0,11,15,1,0,4,20,3),rn(0,7,8,-4,0,12,17,2,0,5,22,4),rn(0,7,8,-4,0,13,19,2,0,5,24,4),rn(0,7,9,-4,0,14,21,2,0,5,26,4),rn(0,8,9,-5,0,15,22,2,0,6,28,5),rn(0,8,10,-5,0,16,24,2,0,6,30,5),rn(0,8,11,-5,0,17,26,2,0,6,32,5),rn(0,9,11,-5,0,18,28,2,0,7,34,6),rn(0,9,12,-6,0,19,29,2,0,7,36,6),rn(0,10,13,-6,0,20,31,3,0,8,38,7),rn(0,10,13,-6,0,21,33,3,0,8,40,7),rn(0,10,14,-6,0,22,35,3,0,8,42,7),rn(0,11,14,-7,0,23,36,3,0,9,44,8),rn(0,11,15,-7,0,24,38,3,0,9,46,8)],x5={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},b5={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function o2(e){return`${Math.round(e)}ms`}function w5(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function S5(e){const t={...x5,...e.easing},o={...b5,...e.duration};return{getAutoHeightDuration:w5,create:(p=["all"],m={})=>{const{duration:g=o.standard,easing:u=t.easeInOut,delay:I=0,...M}=m;return(Array.isArray(p)?p:[p]).map(F=>`${F} ${typeof g=="string"?g:o2(g)} ${u} ${typeof I=="string"?I:o2(I)}`).join(",")},...e,easing:t,duration:o}}const C5={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function T5(e){return ps(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function ZT(e={}){const t={...e};function o(l){const p=Object.entries(l);for(let m=0;m<p.length;m++){const[g,u]=p[m];!T5(u)||g.startsWith("unstable_")?delete l[g]:ps(u)&&(l[g]={...u},o(l[g]))}}return o(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function s2(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const k5=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let o=0;for(let l=0;l<t.length;l+=1)o+=+t[l];return o};function I5(e){Object.assign(e,{alpha(t,o){const l=this||e;return l.colorSpace?`oklch(from ${t} l c h / ${typeof o=="string"?`calc(${o})`:o})`:l.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof o=="string"?`calc(${o})`:o})`:$m(t,k5(o))},lighten(t,o){const l=this||e;return l.colorSpace?`color-mix(in ${l.colorSpace}, ${t}, #fff ${s2(o)})`:Og(t,o)},darken(t,o){const l=this||e;return l.colorSpace?`color-mix(in ${l.colorSpace}, ${t}, #000 ${s2(o)})`:Fg(t,o)}})}function Uv(e={},...t){const{breakpoints:o,mixins:l={},spacing:p,palette:m={},transitions:g={},typography:u={},shape:I,colorSpace:M,...F}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Xs(20));const L=w0({...m,colorSpace:M}),z=_p(e);let J=gi(z,{mixins:f5(z.breakpoints,l),palette:L,shadows:v5.slice(),typography:qT(L,u),transitions:S5(g),zIndex:{...C5}});return J=gi(J,F),J=t.reduce((H,re)=>gi(H,re),J),J.unstable_sxConfig={...yp,...F==null?void 0:F.unstable_sxConfig},J.unstable_sx=function(re){return Ka({sx:re,theme:this})},J.toRuntimeSource=ZT,I5(J),J}function Wv(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const E5=[...Array(25)].map((e,t)=>{if(t===0)return"none";const o=Wv(t);return`linear-gradient(rgba(255 255 255 / ${o}), rgba(255 255 255 / ${o}))`});function XT(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function KT(e){return e==="dark"?E5:[]}function P5(e){const{palette:t={mode:"light"},opacity:o,overlays:l,colorSpace:p,...m}=e,g=w0({...t,colorSpace:p});return{palette:g,opacity:{...XT(g.mode),...o},overlays:l||KT(g.mode),...m}}function M5(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const A5=e=>[...[...Array(25)].map((t,o)=>`--${e?`${e}-`:""}overlays-${o}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],z5=e=>(t,o)=>{const l=e.rootSelector||":root",p=e.colorSchemeSelector;let m=p;if(p==="class"&&(m=".%s"),p==="data"&&(m="[data-%s]"),p!=null&&p.startsWith("data-")&&!p.includes("%s")&&(m=`[${p}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const g={};return A5(e.cssVarPrefix).forEach(u=>{g[u]=o[u],delete o[u]}),m==="media"?{[l]:o,"@media (prefers-color-scheme: dark)":{[l]:g}}:m?{[m.replace("%s",t)]:g,[`${l}, ${m.replace("%s",t)}`]:o}:{[l]:{...o,...g}}}if(m&&m!=="media")return`${l}, ${m.replace("%s",String(t))}`}else if(t){if(m==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[l]:o}};if(m)return m.replace("%s",String(t))}return l};function R5(e,t){t.forEach(o=>{e[o]||(e[o]={})})}function je(e,t,o){!e[t]&&o&&(e[t]=o)}function bd(e){return typeof e!="string"||!e.startsWith("hsl")?e:FT(e)}function Fs(e,t){`${t}Channel`in e||(e[`${t}Channel`]=xd(bd(e[t])))}function D5(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const as=e=>{try{return e()}catch{}},L5=(e="mui")=>RR(e);function F_(e,t,o,l,p){if(!o)return;o=o===!0?{}:o;const m=p==="dark"?"dark":"light";if(!l){t[p]=P5({...o,palette:{mode:m,...o==null?void 0:o.palette},colorSpace:e});return}const{palette:g,...u}=Uv({...l,palette:{mode:m,...o==null?void 0:o.palette},colorSpace:e});return t[p]={...o,palette:g,opacity:{...XT(m),...o==null?void 0:o.opacity},overlays:(o==null?void 0:o.overlays)||KT(m)},u}function B5(e={},...t){const{colorSchemes:o={light:!0},defaultColorScheme:l,disableCssColorScheme:p=!1,cssVarPrefix:m="mui",nativeColor:g=!1,shouldSkipGeneratingVar:u=M5,colorSchemeSelector:I=o.light&&o.dark?"media":void 0,rootSelector:M=":root",...F}=e,L=Object.keys(o)[0],z=l||(o.light&&L!=="light"?"light":L),J=L5(m),{[z]:H,light:re,dark:le,...V}=o,U={...V};let G=H;if((z==="dark"&&!("dark"in o)||z==="light"&&!("light"in o))&&(G=!0),!G)throw new Error(Xs(21,z));let Q;g&&(Q="oklch");const fe=F_(Q,U,G,F,z);re&&!U.light&&F_(Q,U,re,void 0,"light"),le&&!U.dark&&F_(Q,U,le,void 0,"dark");let he={defaultColorScheme:z,...fe,cssVarPrefix:m,colorSchemeSelector:I,rootSelector:M,getCssVar:J,colorSchemes:U,font:{...p5(fe.typography),...fe.font},spacing:D5(F.spacing)};Object.keys(he.colorSchemes).forEach(De=>{const Z=he.colorSchemes[De].palette,Me=Le=>{const $e=Le.split("-"),Ke=$e[1],be=$e[2];return J(Le,Z[Ke][be])};Z.mode==="light"&&(je(Z.common,"background","#fff"),je(Z.common,"onBackground","#000")),Z.mode==="dark"&&(je(Z.common,"background","#000"),je(Z.common,"onBackground","#fff"));function Ie(Le,$e,Ke){if(Q){let be;return Le===El&&(be=`transparent ${((1-Ke)*100).toFixed(0)}%`),Le===Dr&&(be=`#000 ${(Ke*100).toFixed(0)}%`),Le===Lr&&(be=`#fff ${(Ke*100).toFixed(0)}%`),`color-mix(in ${Q}, ${$e}, ${be})`}return Le($e,Ke)}if(R5(Z,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),Z.mode==="light"){je(Z.Alert,"errorColor",Ie(Dr,Z.error.light,.6)),je(Z.Alert,"infoColor",Ie(Dr,Z.info.light,.6)),je(Z.Alert,"successColor",Ie(Dr,Z.success.light,.6)),je(Z.Alert,"warningColor",Ie(Dr,Z.warning.light,.6)),je(Z.Alert,"errorFilledBg",Me("palette-error-main")),je(Z.Alert,"infoFilledBg",Me("palette-info-main")),je(Z.Alert,"successFilledBg",Me("palette-success-main")),je(Z.Alert,"warningFilledBg",Me("palette-warning-main")),je(Z.Alert,"errorFilledColor",as(()=>Z.getContrastText(Z.error.main))),je(Z.Alert,"infoFilledColor",as(()=>Z.getContrastText(Z.info.main))),je(Z.Alert,"successFilledColor",as(()=>Z.getContrastText(Z.success.main))),je(Z.Alert,"warningFilledColor",as(()=>Z.getContrastText(Z.warning.main))),je(Z.Alert,"errorStandardBg",Ie(Lr,Z.error.light,.9)),je(Z.Alert,"infoStandardBg",Ie(Lr,Z.info.light,.9)),je(Z.Alert,"successStandardBg",Ie(Lr,Z.success.light,.9)),je(Z.Alert,"warningStandardBg",Ie(Lr,Z.warning.light,.9)),je(Z.Alert,"errorIconColor",Me("palette-error-main")),je(Z.Alert,"infoIconColor",Me("palette-info-main")),je(Z.Alert,"successIconColor",Me("palette-success-main")),je(Z.Alert,"warningIconColor",Me("palette-warning-main")),je(Z.AppBar,"defaultBg",Me("palette-grey-100")),je(Z.Avatar,"defaultBg",Me("palette-grey-400")),je(Z.Button,"inheritContainedBg",Me("palette-grey-300")),je(Z.Button,"inheritContainedHoverBg",Me("palette-grey-A100")),je(Z.Chip,"defaultBorder",Me("palette-grey-400")),je(Z.Chip,"defaultAvatarColor",Me("palette-grey-700")),je(Z.Chip,"defaultIconColor",Me("palette-grey-700")),je(Z.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),je(Z.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),je(Z.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),je(Z.LinearProgress,"primaryBg",Ie(Lr,Z.primary.main,.62)),je(Z.LinearProgress,"secondaryBg",Ie(Lr,Z.secondary.main,.62)),je(Z.LinearProgress,"errorBg",Ie(Lr,Z.error.main,.62)),je(Z.LinearProgress,"infoBg",Ie(Lr,Z.info.main,.62)),je(Z.LinearProgress,"successBg",Ie(Lr,Z.success.main,.62)),je(Z.LinearProgress,"warningBg",Ie(Lr,Z.warning.main,.62)),je(Z.Skeleton,"bg",Q?Ie(El,Z.text.primary,.11):`rgba(${Me("palette-text-primaryChannel")} / 0.11)`),je(Z.Slider,"primaryTrack",Ie(Lr,Z.primary.main,.62)),je(Z.Slider,"secondaryTrack",Ie(Lr,Z.secondary.main,.62)),je(Z.Slider,"errorTrack",Ie(Lr,Z.error.main,.62)),je(Z.Slider,"infoTrack",Ie(Lr,Z.info.main,.62)),je(Z.Slider,"successTrack",Ie(Lr,Z.success.main,.62)),je(Z.Slider,"warningTrack",Ie(Lr,Z.warning.main,.62));const Le=Q?Ie(Dr,Z.background.default,.6825):Vf(Z.background.default,.8);je(Z.SnackbarContent,"bg",Le),je(Z.SnackbarContent,"color",as(()=>Q?Vv.text.primary:Z.getContrastText(Le))),je(Z.SpeedDialAction,"fabHoverBg",Vf(Z.background.paper,.15)),je(Z.StepConnector,"border",Me("palette-grey-400")),je(Z.StepContent,"border",Me("palette-grey-400")),je(Z.Switch,"defaultColor",Me("palette-common-white")),je(Z.Switch,"defaultDisabledColor",Me("palette-grey-100")),je(Z.Switch,"primaryDisabledColor",Ie(Lr,Z.primary.main,.62)),je(Z.Switch,"secondaryDisabledColor",Ie(Lr,Z.secondary.main,.62)),je(Z.Switch,"errorDisabledColor",Ie(Lr,Z.error.main,.62)),je(Z.Switch,"infoDisabledColor",Ie(Lr,Z.info.main,.62)),je(Z.Switch,"successDisabledColor",Ie(Lr,Z.success.main,.62)),je(Z.Switch,"warningDisabledColor",Ie(Lr,Z.warning.main,.62)),je(Z.TableCell,"border",Ie(Lr,Ie(El,Z.divider,1),.88)),je(Z.Tooltip,"bg",Ie(El,Z.grey[700],.92))}if(Z.mode==="dark"){je(Z.Alert,"errorColor",Ie(Lr,Z.error.light,.6)),je(Z.Alert,"infoColor",Ie(Lr,Z.info.light,.6)),je(Z.Alert,"successColor",Ie(Lr,Z.success.light,.6)),je(Z.Alert,"warningColor",Ie(Lr,Z.warning.light,.6)),je(Z.Alert,"errorFilledBg",Me("palette-error-dark")),je(Z.Alert,"infoFilledBg",Me("palette-info-dark")),je(Z.Alert,"successFilledBg",Me("palette-success-dark")),je(Z.Alert,"warningFilledBg",Me("palette-warning-dark")),je(Z.Alert,"errorFilledColor",as(()=>Z.getContrastText(Z.error.dark))),je(Z.Alert,"infoFilledColor",as(()=>Z.getContrastText(Z.info.dark))),je(Z.Alert,"successFilledColor",as(()=>Z.getContrastText(Z.success.dark))),je(Z.Alert,"warningFilledColor",as(()=>Z.getContrastText(Z.warning.dark))),je(Z.Alert,"errorStandardBg",Ie(Dr,Z.error.light,.9)),je(Z.Alert,"infoStandardBg",Ie(Dr,Z.info.light,.9)),je(Z.Alert,"successStandardBg",Ie(Dr,Z.success.light,.9)),je(Z.Alert,"warningStandardBg",Ie(Dr,Z.warning.light,.9)),je(Z.Alert,"errorIconColor",Me("palette-error-main")),je(Z.Alert,"infoIconColor",Me("palette-info-main")),je(Z.Alert,"successIconColor",Me("palette-success-main")),je(Z.Alert,"warningIconColor",Me("palette-warning-main")),je(Z.AppBar,"defaultBg",Me("palette-grey-900")),je(Z.AppBar,"darkBg",Me("palette-background-paper")),je(Z.AppBar,"darkColor",Me("palette-text-primary")),je(Z.Avatar,"defaultBg",Me("palette-grey-600")),je(Z.Button,"inheritContainedBg",Me("palette-grey-800")),je(Z.Button,"inheritContainedHoverBg",Me("palette-grey-700")),je(Z.Chip,"defaultBorder",Me("palette-grey-700")),je(Z.Chip,"defaultAvatarColor",Me("palette-grey-300")),je(Z.Chip,"defaultIconColor",Me("palette-grey-300")),je(Z.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),je(Z.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),je(Z.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),je(Z.LinearProgress,"primaryBg",Ie(Dr,Z.primary.main,.5)),je(Z.LinearProgress,"secondaryBg",Ie(Dr,Z.secondary.main,.5)),je(Z.LinearProgress,"errorBg",Ie(Dr,Z.error.main,.5)),je(Z.LinearProgress,"infoBg",Ie(Dr,Z.info.main,.5)),je(Z.LinearProgress,"successBg",Ie(Dr,Z.success.main,.5)),je(Z.LinearProgress,"warningBg",Ie(Dr,Z.warning.main,.5)),je(Z.Skeleton,"bg",Q?Ie(El,Z.text.primary,.13):`rgba(${Me("palette-text-primaryChannel")} / 0.13)`),je(Z.Slider,"primaryTrack",Ie(Dr,Z.primary.main,.5)),je(Z.Slider,"secondaryTrack",Ie(Dr,Z.secondary.main,.5)),je(Z.Slider,"errorTrack",Ie(Dr,Z.error.main,.5)),je(Z.Slider,"infoTrack",Ie(Dr,Z.info.main,.5)),je(Z.Slider,"successTrack",Ie(Dr,Z.success.main,.5)),je(Z.Slider,"warningTrack",Ie(Dr,Z.warning.main,.5));const Le=Q?Ie(Lr,Z.background.default,.985):Vf(Z.background.default,.98);je(Z.SnackbarContent,"bg",Le),je(Z.SnackbarContent,"color",as(()=>Q?GT.text.primary:Z.getContrastText(Le))),je(Z.SpeedDialAction,"fabHoverBg",Vf(Z.background.paper,.15)),je(Z.StepConnector,"border",Me("palette-grey-600")),je(Z.StepContent,"border",Me("palette-grey-600")),je(Z.Switch,"defaultColor",Me("palette-grey-300")),je(Z.Switch,"defaultDisabledColor",Me("palette-grey-600")),je(Z.Switch,"primaryDisabledColor",Ie(Dr,Z.primary.main,.55)),je(Z.Switch,"secondaryDisabledColor",Ie(Dr,Z.secondary.main,.55)),je(Z.Switch,"errorDisabledColor",Ie(Dr,Z.error.main,.55)),je(Z.Switch,"infoDisabledColor",Ie(Dr,Z.info.main,.55)),je(Z.Switch,"successDisabledColor",Ie(Dr,Z.success.main,.55)),je(Z.Switch,"warningDisabledColor",Ie(Dr,Z.warning.main,.55)),je(Z.TableCell,"border",Ie(Dr,Ie(El,Z.divider,1),.68)),je(Z.Tooltip,"bg",Ie(El,Z.grey[700],.92))}Fs(Z.background,"default"),Fs(Z.background,"paper"),Fs(Z.common,"background"),Fs(Z.common,"onBackground"),Fs(Z,"divider"),Object.keys(Z).forEach(Le=>{const $e=Z[Le];Le!=="tonalOffset"&&$e&&typeof $e=="object"&&($e.main&&je(Z[Le],"mainChannel",xd(bd($e.main))),$e.light&&je(Z[Le],"lightChannel",xd(bd($e.light))),$e.dark&&je(Z[Le],"darkChannel",xd(bd($e.dark))),$e.contrastText&&je(Z[Le],"contrastTextChannel",xd(bd($e.contrastText))),Le==="text"&&(Fs(Z[Le],"primary"),Fs(Z[Le],"secondary")),Le==="action"&&($e.active&&Fs(Z[Le],"active"),$e.selected&&Fs(Z[Le],"selected")))})}),he=t.reduce((De,Z)=>gi(De,Z),he);const _e={prefix:m,disableCssColorScheme:p,shouldSkipGeneratingVar:u,getSelector:z5(he),enableContrastVars:g},{vars:ge,generateThemeVars:Ae,generateStyleSheets:Re}=BR(he,_e);return he.vars=ge,Object.entries(he.colorSchemes[he.defaultColorScheme]).forEach(([De,Z])=>{he[De]=Z}),he.generateThemeVars=Ae,he.generateStyleSheets=Re,he.generateSpacing=function(){return ET(F.spacing,f0(this))},he.getColorSchemeSelector=FR(I),he.spacing=he.generateSpacing(),he.shouldSkipGeneratingVar=u,he.unstable_sxConfig={...yp,...F==null?void 0:F.unstable_sxConfig},he.unstable_sx=function(Z){return Ka({sx:Z,theme:this})},he.toRuntimeSource=ZT,he}function a2(e,t,o){e.colorSchemes&&o&&(e.colorSchemes[t]={...o!==!0&&o,palette:w0({...o===!0?{}:o.palette,mode:t})})}function Ng(e={},...t){const{palette:o,cssVariables:l=!1,colorSchemes:p=o?void 0:{light:!0},defaultColorScheme:m=o==null?void 0:o.mode,...g}=e,u=m||"light",I=p==null?void 0:p[u],M={...p,...o?{[u]:{...typeof I!="boolean"&&I,palette:o}}:void 0};if(l===!1){if(!("colorSchemes"in e))return Uv(e,...t);let F=o;"palette"in e||M[u]&&(M[u]!==!0?F=M[u].palette:u==="dark"&&(F={mode:"dark"}));const L=Uv({...e,palette:F},...t);return L.defaultColorScheme=u,L.colorSchemes=M,L.palette.mode==="light"&&(L.colorSchemes.light={...M.light!==!0&&M.light,palette:L.palette},a2(L,"dark",M.dark)),L.palette.mode==="dark"&&(L.colorSchemes.dark={...M.dark!==!0&&M.dark,palette:L.palette},a2(L,"light",M.light)),L}return!o&&!("light"in M)&&u==="light"&&(M.light=!0),B5({...g,colorSchemes:M,defaultColorScheme:u,...typeof l!="boolean"&&l},...t)}const S0=Ng();function Jl(){const e=vp(S0);return e[ys]||e}function YT(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const zi=e=>YT(e)&&e!=="classes",at=DT({themeId:ys,defaultTheme:S0,rootShouldForwardProp:zi});function F5({theme:e,...t}){const o=ys in e?e[ys]:void 0;return q.jsx(VT,{...t,themeId:o?ys:void 0,theme:o||e})}const Uf={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:O5}=zR({themeId:ys,theme:()=>Ng({cssVariables:!0}),colorSchemeStorageKey:Uf.colorSchemeStorageKey,modeStorageKey:Uf.modeStorageKey,defaultColorScheme:{light:Uf.defaultLightColorScheme,dark:Uf.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:qT(e.palette,e.typography)};return t.unstable_sx=function(l){return Ka({sx:l,theme:this})},t}}),$5=O5;function N5({theme:e,...t}){const o=ee.useMemo(()=>{if(typeof e=="function")return e;const l=ys in e?e[ys]:e;return"colorSchemes"in l?null:"vars"in l?e:{...e,vars:null}},[e]);return o?q.jsx(F5,{theme:o,...t}):q.jsx($5,{theme:e,...t})}function j5(e){return q.jsx(PT,{...e,defaultTheme:S0,themeId:ys})}function C0(e){return function(o){return q.jsx(j5,{styles:typeof e=="function"?l=>e({theme:l,...o}):e})}}function V5(){return y0}function Qt(e){return xR(e)}const Gv=typeof C0({})=="function",U5=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),W5=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),JT=(e,t=!1)=>{var m,g;const o={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([u,I])=>{var F,L;const M=e.getColorSchemeSelector(u);M.startsWith("@")?o[M]={":root":{colorScheme:(F=I.palette)==null?void 0:F.mode}}:o[M.replace(/\s*&/,"")]={colorScheme:(L=I.palette)==null?void 0:L.mode}});let l={html:U5(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...W5(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...o};const p=(g=(m=e.components)==null?void 0:m.MuiCssBaseline)==null?void 0:g.styleOverrides;return p&&(l=[l,p]),l},hm="mui-ecs",G5=e=>{const t=JT(e,!1),o=Array.isArray(t)?t[0]:t;return!e.vars&&o&&(o.html[`:root:has(${hm})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([l,p])=>{var g,u;const m=e.getColorSchemeSelector(l);m.startsWith("@")?o[m]={[`:root:not(:has(.${hm}))`]:{colorScheme:(g=p.palette)==null?void 0:g.mode}}:o[m.replace(/\s*&/,"")]={[`&:not(:has(.${hm}))`]:{colorScheme:(u=p.palette)==null?void 0:u.mode}}}),t},H5=C0(Gv?({theme:e,enableColorScheme:t})=>JT(e,t):({theme:e})=>G5(e));function q5(e){const t=Qt({props:e,name:"MuiCssBaseline"}),{children:o,enableColorScheme:l=!1}=t;return q.jsxs(ee.Fragment,{children:[Gv&&q.jsx(H5,{enableColorScheme:l}),!Gv&&!l&&q.jsx("span",{className:hm,style:{display:"none"}}),o]})}var QT={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(o,l){e.exports=l()})(wE,function(){var o={},l={};function p(g,u,I){if(l[g]=I,g==="index"){var M="var sharedModule = {}; ("+l.shared+")(sharedModule); ("+l.worker+")(sharedModule);",F={};return l.shared(F),l.index(o,F),typeof window<"u"&&o.setWorkerUrl(window.URL.createObjectURL(new Blob([M],{type:"text/javascript"}))),o}}p("shared",["exports"],function(g){function u(i,n,s,c){return new(s||(s=Promise))(function(f,v){function x(k){try{S(c.next(k))}catch(E){v(E)}}function b(k){try{S(c.throw(k))}catch(E){v(E)}}function S(k){var E;k.done?f(k.value):(E=k.value,E instanceof s?E:new s(function(A){A(E)})).then(x,b)}S((c=c.apply(i,n||[])).next())})}function I(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}typeof SuppressedError=="function"&&SuppressedError;var M=F;function F(i,n){this.x=i,this.y=n}F.prototype={clone:function(){return new F(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,n){return this.clone()._rotateAround(i,n)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var n=i.x-this.x,s=i.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult:function(i){var n=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=n,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var n=Math.cos(i),s=Math.sin(i),c=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=c,this},_rotateAround:function(i,n){var s=Math.cos(i),c=Math.sin(i),f=n.y+c*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-c*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},F.convert=function(i){return i instanceof F?i:Array.isArray(i)?new F(i[0],i[1]):i};var L=I(M),z=J;function J(i,n,s,c){this.cx=3*i,this.bx=3*(s-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=s,this.p2y=c}J.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var s=i,c=0;c<8;c++){var f=this.sampleCurveX(s)-i;if(Math.abs(f)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,b=1;for(s=i,c=0;c<20&&(f=this.sampleCurveX(s),!(Math.abs(f-i)<n));c++)i>f?x=s:b=s,s=.5*(b-x)+x;return s},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var H=I(z);let re,le;function V(){return re==null&&(re=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),re}function U(){if(le==null&&(le=!1,V())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let c=0;c<5*5;c++){const f=4*c;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(c%5,Math.floor(c/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let c=0;c<5*5*4;c++)if(c%4!=3&&s[c]!==c){le=!0;break}}}return le||!1}function G(i,n,s,c){const f=new H(i,n,s,c);return v=>f.solve(v)}const Q=G(.25,.1,.25,1);function fe(i,n,s){return Math.min(s,Math.max(n,i))}function he(i,n,s){const c=s-n,f=((i-n)%c+c)%c+n;return f===n?s:f}function _e(i,...n){for(const s of n)for(const c in s)i[c]=s[c];return i}let ge=1;function Ae(i,n,s){const c={};for(const f in i)c[f]=n.call(this,i[f],f,i);return c}function Re(i,n,s){const c={};for(const f in i)n.call(this,i[f],f,i)&&(c[f]=i[f]);return c}function De(i){return Array.isArray(i)?i.map(De):typeof i=="object"&&i?Ae(i,De):i}const Z={};function Me(i){Z[i]||(typeof console<"u"&&console.warn(i),Z[i]=!0)}function Ie(i,n,s){return(s.y-i.y)*(n.x-i.x)>(n.y-i.y)*(s.x-i.x)}function Le(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let $e=null;function Ke(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ee(i,n,s,c,f){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(i,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const b=x.startsWith("BGR"),S=new Uint8ClampedArray(c*f*4);if(yield v.copyTo(S,function(k,E,A,B,N){const W=4*Math.max(-E,0),X=(Math.max(0,A)-A)*B*4+W,oe=4*B,ce=Math.max(0,E),ke=Math.max(0,A);return{rect:{x:ce,y:ke,width:Math.min(k.width,E+B)-ce,height:Math.min(k.height,A+N)-ke},layout:[{offset:X,stride:oe}]}}(i,n,s,c,f)),b)for(let k=0;k<S.length;k+=4){const E=S[k];S[k]=S[k+2],S[k+2]=E}return S}finally{v.close()}})}let We,Ze;const Ge="AbortError";function St(){return new Error(Ge)}const Dt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function $t(i){return Dt.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const Vt="global-dispatcher";class Rt extends Error{constructor(n,s,c,f){super(`AJAXError: ${s} (${n}): ${c}`),this.status=n,this.statusText=s,this.url=c,this.body=f}}const cr=()=>Le(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ut=function(i,n){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const c=$t(i.url);if(c)return c(i,n);if(Le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:Vt},n)}if(!(/^file:/.test(s=i.url)||/^file:/.test(cr())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(c,f){return u(this,void 0,void 0,function*(){const v=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:cr(),signal:f.signal});c.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const k=yield x.blob();throw new Rt(x.status,x.statusText,c.url,k)}let b;b=c.type==="arrayBuffer"||c.type==="image"?x.arrayBuffer():c.type==="json"?x.json():x.text();const S=yield b;if(f.signal.aborted)throw St();return{data:S,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(i,n);if(Le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:Vt},n)}var s;return function(c,f){return new Promise((v,x)=>{var b;const S=new XMLHttpRequest;S.open(c.method||"GET",c.url,!0),c.type!=="arrayBuffer"&&c.type!=="image"||(S.responseType="arraybuffer");for(const k in c.headers)S.setRequestHeader(k,c.headers[k]);c.type==="json"&&(S.responseType="text",!((b=c.headers)===null||b===void 0)&&b.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=c.credentials==="include",S.onerror=()=>{x(new Error(S.statusText))},S.onload=()=>{if(!f.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let k=S.response;if(c.type==="json")try{k=JSON.parse(S.response)}catch(E){return void x(E)}v({data:k,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const k=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});x(new Rt(S.status,S.statusText,c.url,k))}},f.signal.addEventListener("abort",()=>{S.abort(),x(St())}),S.send(c.body)})}(i,n)};function Ct(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const n=new URL(i),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function qt(i,n,s){s[i]&&s[i].indexOf(n)!==-1||(s[i]=s[i]||[],s[i].push(n))}function Ht(i,n,s){if(s&&s[i]){const c=s[i].indexOf(n);c!==-1&&s[i].splice(c,1)}}class yr{constructor(n,s={}){_e(this,s),this.type=n}}class Nt extends yr{constructor(n,s={}){super("error",_e({error:n},s))}}class sr{on(n,s){return this._listeners=this._listeners||{},qt(n,s,this._listeners),this}off(n,s){return Ht(n,s,this._listeners),Ht(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},qt(n,s,this._oneTimeListeners),this):new Promise(c=>this.once(n,c))}fire(n,s){typeof n=="string"&&(n=new yr(n,s||{}));const c=n.type;if(this.listens(c)){n.target=this;const f=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const b of f)b.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const b of v)Ht(c,b,this._oneTimeListeners),b.call(this,n);const x=this._eventedParent;x&&(_e(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Nt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Or=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Cr(i,n){const s={};for(const c in i)c!=="ref"&&(s[c]=i[c]);return Or.forEach(c=>{c in n&&(s[c]=n[c])}),s}function At(i,n){if(Array.isArray(i)){if(!Array.isArray(n)||i.length!==n.length)return!1;for(let s=0;s<i.length;s++)if(!At(i[s],n[s]))return!1;return!0}if(typeof i=="object"&&i!==null&&n!==null){if(typeof n!="object"||Object.keys(i).length!==Object.keys(n).length)return!1;for(const s in i)if(!At(i[s],n[s]))return!1;return!0}return i===n}function er(i,n){i.push(n)}function xr(i,n,s){er(s,{command:"addSource",args:[i,n[i]]})}function _t(i,n,s){er(n,{command:"removeSource",args:[i]}),s[i]=!0}function _n(i,n,s,c){_t(i,s,c),xr(i,n,s)}function Tr(i,n,s){let c;for(c in i[s])if(Object.prototype.hasOwnProperty.call(i[s],c)&&c!=="data"&&!At(i[s][c],n[s][c]))return!1;for(c in n[s])if(Object.prototype.hasOwnProperty.call(n[s],c)&&c!=="data"&&!At(i[s][c],n[s][c]))return!1;return!0}function un(i,n,s,c,f,v){i=i||{},n=n||{};for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&(At(i[x],n[x])||s.push({command:v,args:[c,x,n[x],f]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(i,x)&&(At(i[x],n[x])||s.push({command:v,args:[c,x,n[x],f]}))}function En(i){return i.id}function Ln(i,n){return i[n.id]=n,i}class Xe{constructor(n,s,c,f){this.message=(n?`${n}: `:"")+c,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function hn(i,...n){for(const s of n)for(const c in s)i[c]=s[c];return i}class ar extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class zt{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[c,f]of s)this.bindings[c]=f}concat(n){return new zt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const $r={kind:"null"},qe={kind:"number"},Tt={kind:"string"},Pt={kind:"boolean"},Pn={kind:"color"},ni={kind:"object"},Ft={kind:"value"},_i={kind:"collator"},Di={kind:"formatted"},kt={kind:"padding"},ur={kind:"resolvedImage"},ne={kind:"variableAnchorOffsetCollection"};function O(i,n){return{kind:"array",itemType:i,N:n}}function $(i){if(i.kind==="array"){const n=$(i.itemType);return typeof i.N=="number"?`array<${n}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${n}>`}return i.kind}const K=[$r,qe,Tt,Pt,Pn,Di,ni,O(Ft),kt,ur,ne];function se(i,n){if(n.kind==="error")return null;if(i.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!se(i.itemType,n.itemType))&&(typeof i.N!="number"||i.N===n.N))return null}else{if(i.kind===n.kind)return null;if(i.kind==="value"){for(const s of K)if(!se(s,n))return null}}return`Expected ${$(i)} but found ${$(n)} instead.`}function ve(i,n){return n.some(s=>s.kind===i.kind)}function we(i,n){return n.some(s=>s==="null"?i===null:s==="array"?Array.isArray(i):s==="object"?i&&!Array.isArray(i)&&typeof i=="object":s===typeof i)}function Te(i,n){return i.kind==="array"&&n.kind==="array"?i.itemType.kind===n.itemType.kind&&typeof i.N=="number":i.kind===n.kind}const pe=.96422,Oe=.82521,Ue=4/29,Be=6/29,Qe=3*Be*Be,xt=Be*Be*Be,It=Math.PI/180,hr=180/Math.PI;function jt(i){return(i%=360)<0&&(i+=360),i}function dr([i,n,s,c]){let f,v;const x=dn((.2225045*(i=tr(i))+.7168786*(n=tr(n))+.0606169*(s=tr(s)))/1);i===n&&n===s?f=v=x:(f=dn((.4360747*i+.3850649*n+.1430804*s)/pe),v=dn((.0139322*i+.0971045*n+.7141733*s)/Oe));const b=116*x-16;return[b<0?0:b,500*(f-x),200*(x-v),c]}function tr(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function dn(i){return i>xt?Math.pow(i,1/3):i/Qe+Ue}function Xr([i,n,s,c]){let f=(i+16)/116,v=isNaN(n)?f:f+n/500,x=isNaN(s)?f:f-s/200;return f=1*wr(f),v=pe*wr(v),x=Oe*wr(x),[Zt(3.1338561*v-1.6168667*f-.4906146*x),Zt(-.9787684*v+1.9161415*f+.033454*x),Zt(.0719453*v-.2289914*f+1.4052427*x),c]}function Zt(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function wr(i){return i>Be?i*i*i:Qe*(i-Ue)}function Gr(i){return parseInt(i.padEnd(2,i),16)/255}function wn(i,n){return Mn(n?i/100:i,0,1)}function Mn(i,n,s){return Math.min(Math.max(n,i),s)}function Zn(i){return!i.some(Number.isNaN)}const Js={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Sr{constructor(n,s,c,f=1,v=!0){this.r=n,this.g=s,this.b=c,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,s,c,f]))}static parse(n){if(n instanceof Sr)return n;if(typeof n!="string")return;const s=function(c){if((c=c.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Js[c];if(f){const[x,b,S]=f;return[x/255,b/255,S/255,1]}if(c.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(c)){const x=c.length<6?1:2;let b=1;return[Gr(c.slice(b,b+=x)),Gr(c.slice(b,b+=x)),Gr(c.slice(b,b+=x)),Gr(c.slice(b,b+x)||"ff")]}if(c.startsWith("rgb")){const x=c.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,S,k,E,A,B,N,W,X,oe,ce,ke]=x,ye=[E||" ",N||" ",oe].join("");if(ye==="  "||ye==="  /"||ye===",,"||ye===",,,"){const Ce=[k,B,X].join(""),Fe=Ce==="%%%"?100:Ce===""?255:0;if(Fe){const He=[Mn(+S/Fe,0,1),Mn(+A/Fe,0,1),Mn(+W/Fe,0,1),ce?wn(+ce,ke):1];if(Zn(He))return He}}return}}const v=c.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,b,S,k,E,A,B,N,W]=v,X=[S||" ",E||" ",B].join("");if(X==="  "||X==="  /"||X===",,"||X===",,,"){const oe=[+b,Mn(+k,0,100),Mn(+A,0,100),N?wn(+N,W):1];if(Zn(oe))return function([ce,ke,ye,Ce]){function Fe(He){const lt=(He+ce/30)%12,Et=ke*Math.min(ye,1-ye);return ye-Et*Math.max(-1,Math.min(lt-3,9-lt,1))}return ce=jt(ce),ke/=100,ye/=100,[Fe(0),Fe(8),Fe(4),Ce]}(oe)}}}(n);return s?new Sr(...s,!1):void 0}get rgb(){const{r:n,g:s,b:c,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[n/v,s/v,c/v,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,c,f,v]=dr(n),x=Math.sqrt(c*c+f*f);return[Math.round(1e4*x)?jt(Math.atan2(f,c)*hr):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",dr(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,c,f]=this.rgb;return`rgba(${[n,s,c].map(v=>Math.round(255*v)).join(",")},${f})`}}Sr.black=new Sr(0,0,0,1),Sr.white=new Sr(1,1,1,1),Sr.transparent=new Sr(0,0,0,0),Sr.red=new Sr(1,0,0,1);class qu{constructor(n,s,c){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Zu{constructor(n,s,c,f,v){this.text=n,this.image=s,this.scale=c,this.fontStack=f,this.textColor=v}}class vi{constructor(n){this.sections=n}static fromString(n){return new vi([new Zu(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof vi?n:vi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class xi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof xi)return n;if(typeof n=="number")return new xi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new xi(n)}}toString(){return JSON.stringify(this.values)}}const Gg=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Li{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Li)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const c=n[s],f=n[s+1];if(typeof c!="string"||!Gg.has(c)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Li(n)}}toString(){return JSON.stringify(this.values)}}class bi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new bi({name:n,available:!1}):null}}function Qs(i,n,s,c){return typeof i=="number"&&i>=0&&i<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[i,n,s,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[i,n,s,c]:[i,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xs(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Sr||i instanceof qu||i instanceof vi||i instanceof xi||i instanceof Li||i instanceof bi)return!0;if(Array.isArray(i)){for(const n of i)if(!xs(n))return!1;return!0}if(typeof i=="object"){for(const n in i)if(!xs(i[n]))return!1;return!0}return!1}function pn(i){if(i===null)return $r;if(typeof i=="string")return Tt;if(typeof i=="boolean")return Pt;if(typeof i=="number")return qe;if(i instanceof Sr)return Pn;if(i instanceof qu)return _i;if(i instanceof vi)return Di;if(i instanceof xi)return kt;if(i instanceof Li)return ne;if(i instanceof bi)return ur;if(Array.isArray(i)){const n=i.length;let s;for(const c of i){const f=pn(c);if(s){if(s===f)continue;s=Ft;break}s=f}return O(s||Ft,n)}return ni}function tl(i){const n=typeof i;return i===null?"":n==="string"||n==="number"||n==="boolean"?String(i):i instanceof Sr||i instanceof vi||i instanceof xi||i instanceof Li||i instanceof bi?i.toString():JSON.stringify(i)}class Xi{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!xs(n[1]))return s.error("invalid value");const c=n[1];let f=pn(c);const v=s.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new Xi(f,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class on{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Ql={string:Tt,number:qe,boolean:Pt,object:ni};class Ki{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let c,f=1;const v=n[0];if(v==="array"){let b,S;if(n.length>2){const k=n[1];if(typeof k!="string"||!(k in Ql)||k==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=Ql[k],f++}else b=Ft;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);S=n[2],f++}c=O(b,S)}else{if(!Ql[v])throw new Error(`Types doesn't contain name = ${v}`);c=Ql[v]}const x=[];for(;f<n.length;f++){const b=s.parse(n[f],f,Ft);if(!b)return null;x.push(b)}return new Ki(c,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const c=this.args[s].evaluate(n);if(!se(this.type,pn(c)))return c;if(s===this.args.length-1)throw new on(`Expected value to be of type ${$(this.type)}, but found ${$(pn(c))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Xu={"to-boolean":Pt,"to-color":Pn,"to-number":qe,"to-string":Tt};class Yi{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const c=n[0];if(!Xu[c])throw new Error(`Can't parse ${c} as it is not part of the known types`);if((c==="to-boolean"||c==="to-string")&&n.length!==2)return s.error("Expected one argument.");const f=Xu[c],v=[];for(let x=1;x<n.length;x++){const b=s.parse(n[x],x,Ft);if(!b)return null;v.push(b)}return new Yi(f,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,c;for(const f of this.args){if(s=f.evaluate(n),c=null,s instanceof Sr)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(c=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Qs(s[0],s[1],s[2],s[3]),!c))return new Sr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new on(c||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const c of this.args){s=c.evaluate(n);const f=xi.parse(s);if(f)return f}throw new on(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const c of this.args){s=c.evaluate(n);const f=Li.parse(s);if(f)return f}throw new on(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const c of this.args){if(s=c.evaluate(n),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new on(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return vi.fromString(tl(this.args[0].evaluate(n)));case"resolvedImage":return bi.fromString(tl(this.args[0].evaluate(n)));default:return tl(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Hg=["Unknown","Point","LineString","Polygon"];class ec{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Hg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Sr.parse(n)),s}}class bs{constructor(n,s,c=[],f,v=new zt,x=[]){this.registry=n,this.path=c,this.key=c.map(b=>`[${b}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=s}parse(n,s,c,f,v={}){return s?this.concat(s,c,f)._parse(n,v):this._parse(n,v)}_parse(n,s){function c(f,v,x){return x==="assert"?new Ki(v,[f]):x==="coerce"?new Yi(v,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const b=this.expectedType,S=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||S.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(b.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||S.kind!=="value"&&S.kind!=="array"){if(this.checkSubtype(b,S))return null}else x=c(x,b,s.typeAnnotation||"coerce");else x=c(x,b,s.typeAnnotation||"coerce");else x=c(x,b,s.typeAnnotation||"coerce");else x=c(x,b,s.typeAnnotation||"assert")}if(!(x instanceof Xi)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const b=new ec;try{x=new Xi(x.type,x.evaluate(b))}catch(S){return this.error(S.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,c){const f=typeof n=="number"?this.path.concat(n):this.path,v=c?this.scope.concat(c):this.scope;return new bs(this.registry,this._isConstant,f,s||null,v,this.errors)}error(n,...s){const c=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new ar(c,n))}checkSubtype(n,s){const c=se(n,s);return c&&this.error(c),c}}class Jo{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const c=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const b=s.parse(n[v+1],v+1);if(!b)return null;c.push([x,b])}const f=s.parse(n[n.length-1],n.length-1,s.expectedType,c);return f?new Jo(c,f):null}outputDefined(){return this.result.outputDefined()}}class _r{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const c=n[1];return s.scope.has(c)?new _r(c,s.scope.get(c)):s.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Ku{constructor(n,s,c){this.type=n,this.index=s,this.input=c}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,qe),f=s.parse(n[2],2,O(s.expectedType||Ft));return c&&f?new Ku(f.type.itemType,c,f):null}evaluate(n){const s=this.index.evaluate(n),c=this.input.evaluate(n);if(s<0)throw new on(`Array index out of bounds: ${s} < 0.`);if(s>=c.length)throw new on(`Array index out of bounds: ${s} > ${c.length-1}.`);if(s!==Math.floor(s))throw new on(`Array index must be an integer, but found ${s} instead.`);return c[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Yu{constructor(n,s){this.type=Pt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,Ft),f=s.parse(n[2],2,Ft);return c&&f?ve(c.type,[Pt,Tt,qe,$r,Ft])?new Yu(c,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(c.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!c)return!1;if(!we(s,["boolean","string","number","null"]))throw new on(`Expected first argument to be of type boolean, string, number or null, but found ${$(pn(s))} instead.`);if(!we(c,["string","array"]))throw new on(`Expected second argument to be of type array or string, but found ${$(pn(c))} instead.`);return c.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class ea{constructor(n,s,c){this.type=qe,this.needle=n,this.haystack=s,this.fromIndex=c}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,Ft),f=s.parse(n[2],2,Ft);if(!c||!f)return null;if(!ve(c.type,[Pt,Tt,qe,$r,Ft]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(c.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,qe);return v?new ea(c,f,v):null}return new ea(c,f)}evaluate(n){const s=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!we(s,["boolean","string","number","null"]))throw new on(`Expected first argument to be of type boolean, string, number or null, but found ${$(pn(s))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(n)),we(c,["string"])){const v=c.indexOf(s,f);return v===-1?-1:[...c.slice(0,v)].length}if(we(c,["array"]))return c.indexOf(s,f);throw new on(`Expected second argument to be of type array or string, but found ${$(pn(c))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Ju{constructor(n,s,c,f,v,x){this.inputType=n,this.type=s,this.input=c,this.cases=f,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let c,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v={},x=[];for(let k=2;k<n.length-1;k+=2){let E=n[k];const A=n[k+1];Array.isArray(E)||(E=[E]);const B=s.concat(k);if(E.length===0)return B.error("Expected at least one branch label.");for(const W of E){if(typeof W!="number"&&typeof W!="string")return B.error("Branch labels must be numbers or strings.");if(typeof W=="number"&&Math.abs(W)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof W=="number"&&Math.floor(W)!==W)return B.error("Numeric branch labels must be integer values.");if(c){if(B.checkSubtype(c,pn(W)))return null}else c=pn(W);if(v[String(W)]!==void 0)return B.error("Branch labels must be unique.");v[String(W)]=x.length}const N=s.parse(A,k,f);if(!N)return null;f=f||N.type,x.push(N)}const b=s.parse(n[1],1,Ft);if(!b)return null;const S=s.parse(n[n.length-1],n.length-1,f);return S?b.type.kind!=="value"&&s.concat(1).checkSubtype(c,b.type)?null:new Ju(c,f,b,v,x,S):null}evaluate(n){const s=this.input.evaluate(n);return(pn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class tc{constructor(n,s,c){this.type=n,this.branches=s,this.otherwise=c}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let c;s.expectedType&&s.expectedType.kind!=="value"&&(c=s.expectedType);const f=[];for(let x=1;x<n.length-1;x+=2){const b=s.parse(n[x],x,Pt);if(!b)return null;const S=s.parse(n[x+1],x+1,c);if(!S)return null;f.push([b,S]),c=c||S.type}const v=s.parse(n[n.length-1],n.length-1,c);if(!v)return null;if(!c)throw new Error("Can't infer output type");return new tc(c,f,v)}evaluate(n){for(const[s,c]of this.branches)if(s.evaluate(n))return c.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,c]of this.branches)n(s),n(c);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class rl{constructor(n,s,c,f){this.type=n,this.input=s,this.beginIndex=c,this.endIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,Ft),f=s.parse(n[2],2,qe);if(!c||!f)return null;if(!ve(c.type,[O(Ft),Tt,Ft]))return s.error(`Expected first argument to be of type array or string, but found ${$(c.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,qe);return v?new rl(c.type,c,f,v):null}return new rl(c.type,c,f)}evaluate(n){const s=this.input.evaluate(n),c=this.beginIndex.evaluate(n);let f;if(this.endIndex&&(f=this.endIndex.evaluate(n)),we(s,["string"]))return[...s].slice(c,f).join("");if(we(s,["array"]))return s.slice(c,f);throw new on(`Expected first argument to be of type array or string, but found ${$(pn(s))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function rc(i,n){const s=i.length-1;let c,f,v=0,x=s,b=0;for(;v<=x;)if(b=Math.floor((v+x)/2),c=i[b],f=i[b+1],c<=n){if(b===s||n<f)return b;v=b+1}else{if(!(c>n))throw new on("Input is not a number.");x=b-1}return 0}class ta{constructor(n,s,c){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[f,v]of c)this.labels.push(f),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const c=s.parse(n[1],1,qe);if(!c)return null;const f=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const b=x===1?-1/0:n[x],S=n[x+1],k=x,E=x+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(f.length&&f[f.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const A=s.parse(S,E,v);if(!A)return null;v=v||A.type,f.push([b,A])}return new ta(v,c,f)}evaluate(n){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return c[0].evaluate(n);const v=s.length;return f>=s[v-1]?c[v-1].evaluate(n):c[rc(s,f)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function xp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var qg=bp;function bp(i,n,s,c){this.cx=3*i,this.bx=3*(s-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=s,this.p2y=c}bp.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var s=i,c=0;c<8;c++){var f=this.sampleCurveX(s)-i;if(Math.abs(f)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,b=1;for(s=i,c=0;c<20&&(f=this.sampleCurveX(s),!(Math.abs(f-i)<n));c++)i>f?x=s:b=s,s=.5*(b-x)+x;return s},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var Zg=xp(qg);function ws(i,n,s){return i+s*(n-i)}function nl(i,n,s){return i.map((c,f)=>ws(c,n[f],s))}const ii={number:ws,color:function(i,n,s,c="rgb"){switch(c){case"rgb":{const[f,v,x,b]=nl(i.rgb,n.rgb,s);return new Sr(f,v,x,b,!1)}case"hcl":{const[f,v,x,b]=i.hcl,[S,k,E,A]=n.hcl;let B,N;if(isNaN(f)||isNaN(S))isNaN(f)?isNaN(S)?B=NaN:(B=S,x!==1&&x!==0||(N=k)):(B=f,E!==1&&E!==0||(N=v));else{let ke=S-f;S>f&&ke>180?ke-=360:S<f&&f-S>180&&(ke+=360),B=f+s*ke}const[W,X,oe,ce]=function([ke,ye,Ce,Fe]){return ke=isNaN(ke)?0:ke*It,Xr([Ce,Math.cos(ke)*ye,Math.sin(ke)*ye,Fe])}([B,N??ws(v,k,s),ws(x,E,s),ws(b,A,s)]);return new Sr(W,X,oe,ce,!1)}case"lab":{const[f,v,x,b]=Xr(nl(i.lab,n.lab,s));return new Sr(f,v,x,b,!1)}}},array:nl,padding:function(i,n,s){return new xi(nl(i.values,n.values,s))},variableAnchorOffsetCollection:function(i,n,s){const c=i.values,f=n.values;if(c.length!==f.length)throw new on(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<c.length;x+=2){if(c[x]!==f[x])throw new on(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${c[x]}, to[${x}]: ${f[x]}`);v.push(c[x]);const[b,S]=c[x+1],[k,E]=f[x+1];v.push([ws(b,k,s),ws(S,E,s)])}return new Li(v)}};class oi{constructor(n,s,c,f,v){this.type=n,this.operator=s,this.interpolation=c,this.input=f,this.labels=[],this.outputs=[];for(const[x,b]of v)this.labels.push(x),this.outputs.push(b)}static interpolationFactor(n,s,c,f){let v=0;if(n.name==="exponential")v=nc(s,n.base,c,f);else if(n.name==="linear")v=nc(s,1,c,f);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new Zg(x[0],x[1],x[2],x[3]).solve(nc(s,1,c,f))}return v}static parse(n,s){let[c,f,v,...x]=n;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const k=f[1];if(typeof k!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:k}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const k=f.slice(1);if(k.length!==4||k.some(E=>typeof E!="number"||E<0||E>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:k}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,qe),!v)return null;const b=[];let S=null;c==="interpolate-hcl"||c==="interpolate-lab"?S=Pn:s.expectedType&&s.expectedType.kind!=="value"&&(S=s.expectedType);for(let k=0;k<x.length;k+=2){const E=x[k],A=x[k+1],B=k+3,N=k+4;if(typeof E!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(b.length&&b[b.length-1][0]>=E)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);const W=s.parse(A,N,S);if(!W)return null;S=S||W.type,b.push([E,W])}return Te(S,qe)||Te(S,Pn)||Te(S,kt)||Te(S,ne)||Te(S,O(qe))?new oi(S,c,f,v,b):s.error(`Type ${$(S)} is not interpolatable.`)}evaluate(n){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return c[0].evaluate(n);const v=s.length;if(f>=s[v-1])return c[v-1].evaluate(n);const x=rc(s,f),b=oi.interpolationFactor(this.interpolation,f,s[x],s[x+1]),S=c[x].evaluate(n),k=c[x+1].evaluate(n);switch(this.operator){case"interpolate":return ii[this.type.kind](S,k,b);case"interpolate-hcl":return ii.color(S,k,b,"hcl");case"interpolate-lab":return ii.color(S,k,b,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function nc(i,n,s,c){const f=c-s,v=i-s;return f===0?0:n===1?v/f:(Math.pow(n,v)-1)/(Math.pow(n,f)-1)}class ic{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let c=null;const f=s.expectedType;f&&f.kind!=="value"&&(c=f);const v=[];for(const b of n.slice(1)){const S=s.parse(b,1+v.length,c,void 0,{typeAnnotation:"omit"});if(!S)return null;c=c||S.type,v.push(S)}if(!c)throw new Error("No output type");const x=f&&v.some(b=>se(f,b.type));return new ic(x?Ft:c,v)}evaluate(n){let s,c=null,f=0;for(const v of this.args)if(f++,c=v.evaluate(n),c&&c instanceof bi&&!c.available&&(s||(s=c.name),c=null,f===this.args.length&&(c=s)),c!==null)break;return c}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function oc(i,n){return i==="=="||i==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function wp(i,n,s,c){return c.compare(n,s)===0}function ra(i,n,s){const c=i!=="=="&&i!=="!=";return class ek{constructor(v,x,b){this.type=Pt,this.lhs=v,this.rhs=x,this.collator=b,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const b=v[0];let S=x.parse(v[1],1,Ft);if(!S)return null;if(!oc(b,S.type))return x.concat(1).error(`"${b}" comparisons are not supported for type '${$(S.type)}'.`);let k=x.parse(v[2],2,Ft);if(!k)return null;if(!oc(b,k.type))return x.concat(2).error(`"${b}" comparisons are not supported for type '${$(k.type)}'.`);if(S.type.kind!==k.type.kind&&S.type.kind!=="value"&&k.type.kind!=="value")return x.error(`Cannot compare types '${$(S.type)}' and '${$(k.type)}'.`);c&&(S.type.kind==="value"&&k.type.kind!=="value"?S=new Ki(k.type,[S]):S.type.kind!=="value"&&k.type.kind==="value"&&(k=new Ki(S.type,[k])));let E=null;if(v.length===4){if(S.type.kind!=="string"&&k.type.kind!=="string"&&S.type.kind!=="value"&&k.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(E=x.parse(v[3],3,_i),!E)return null}return new ek(S,k,E)}evaluate(v){const x=this.lhs.evaluate(v),b=this.rhs.evaluate(v);if(c&&this.hasUntypedArgument){const S=pn(x),k=pn(b);if(S.kind!==k.kind||S.kind!=="string"&&S.kind!=="number")throw new on(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${k.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const S=pn(x),k=pn(b);if(S.kind!=="string"||k.kind!=="string")return n(v,x,b)}return this.collator?s(v,x,b,this.collator.evaluate(v)):n(v,x,b)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Xg=ra("==",function(i,n,s){return n===s},wp),Sp=ra("!=",function(i,n,s){return n!==s},function(i,n,s,c){return!wp(0,n,s,c)}),Cp=ra("<",function(i,n,s){return n<s},function(i,n,s,c){return c.compare(n,s)<0}),Kg=ra(">",function(i,n,s){return n>s},function(i,n,s,c){return c.compare(n,s)>0}),Yg=ra("<=",function(i,n,s){return n<=s},function(i,n,s,c){return c.compare(n,s)<=0}),Tp=ra(">=",function(i,n,s){return n>=s},function(i,n,s,c){return c.compare(n,s)>=0});class il{constructor(n,s,c){this.type=_i,this.locale=c,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const c=n[1];if(typeof c!="object"||Array.isArray(c))return s.error("Collator options argument must be an object.");const f=s.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,Pt);if(!f)return null;const v=s.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,Pt);if(!v)return null;let x=null;return c.locale&&(x=s.parse(c.locale,1,Tt),!x)?null:new il(f,v,x)}evaluate(n){return new qu(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class Qu{constructor(n,s,c,f,v){this.type=Tt,this.number=n,this.locale=s,this.currency=c,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const c=s.parse(n[1],1,qe);if(!c)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=s.parse(f.locale,1,Tt),!v))return null;let x=null;if(f.currency&&(x=s.parse(f.currency,1,Tt),!x))return null;let b=null;if(f["min-fraction-digits"]&&(b=s.parse(f["min-fraction-digits"],1,qe),!b))return null;let S=null;return f["max-fraction-digits"]&&(S=s.parse(f["max-fraction-digits"],1,qe),!S)?null:new Qu(c,v,x,b,S)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class sc{constructor(n){this.type=Di,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const c=n[1];if(!Array.isArray(c)&&typeof c=="object")return s.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=n.length-1;++x){const b=n[x];if(v&&typeof b=="object"&&!Array.isArray(b)){v=!1;let S=null;if(b["font-scale"]&&(S=s.parse(b["font-scale"],1,qe),!S))return null;let k=null;if(b["text-font"]&&(k=s.parse(b["text-font"],1,O(Tt)),!k))return null;let E=null;if(b["text-color"]&&(E=s.parse(b["text-color"],1,Pn),!E))return null;const A=f[f.length-1];A.scale=S,A.font=k,A.textColor=E}else{const S=s.parse(n[x],1,Ft);if(!S)return null;const k=S.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:S,scale:null,font:null,textColor:null})}}return new sc(f)}evaluate(n){return new vi(this.sections.map(s=>{const c=s.content.evaluate(n);return pn(c)===ur?new Zu("",c,null,null,null):new Zu(tl(c),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class eh{constructor(n){this.type=ur,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const c=s.parse(n[1],1,Tt);return c?new eh(c):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),c=bi.fromString(s);return c&&n.availableImages&&(c.available=n.availableImages.indexOf(s)>-1),c}eachChild(n){n(this.input)}outputDefined(){return!1}}class th{constructor(n){this.type=qe,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const c=s.parse(n[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${$(c.type)} instead.`):new th(c):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new on(`Expected value to be of type string or array, but found ${$(pn(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const yo=8192;function Jg(i,n){const s=(180+i[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(s*f*yo),Math.round(c*f*yo)]}function rh(i,n){const s=Math.pow(2,n.z);return[(f=(i[0]/yo+n.x)/s,360*f-180),(c=(i[1]/yo+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90)];var c,f}function Ss(i,n){i[0]=Math.min(i[0],n[0]),i[1]=Math.min(i[1],n[1]),i[2]=Math.max(i[2],n[0]),i[3]=Math.max(i[3],n[1])}function Qo(i,n){return!(i[0]<=n[0]||i[2]>=n[2]||i[1]<=n[1]||i[3]>=n[3])}function vr(i,n,s){const c=i[0]-n[0],f=i[1]-n[1],v=i[0]-s[0],x=i[1]-s[1];return c*x-v*f==0&&c*v<=0&&f*x<=0}function ac(i,n,s,c){return(f=[c[0]-s[0],c[1]-s[1]])[0]*(v=[n[0]-i[0],n[1]-i[1]])[1]-f[1]*v[0]!=0&&!(!Ip(i,n,s,c)||!Ip(s,c,i,n));var f,v}function Qg(i,n,s){for(const c of s)for(let f=0;f<c.length-1;++f)if(ac(i,n,c[f],c[f+1]))return!0;return!1}function na(i,n,s=!1){let c=!1;for(const b of n)for(let S=0;S<b.length-1;S++){if(vr(i,b[S],b[S+1]))return s;(v=b[S])[1]>(f=i)[1]!=(x=b[S+1])[1]>f[1]&&f[0]<(x[0]-v[0])*(f[1]-v[1])/(x[1]-v[1])+v[0]&&(c=!c)}var f,v,x;return c}function ey(i,n){for(const s of n)if(na(i,s))return!0;return!1}function kp(i,n){for(const s of i)if(!na(s,n))return!1;for(let s=0;s<i.length-1;++s)if(Qg(i[s],i[s+1],n))return!1;return!0}function ty(i,n){for(const s of n)if(kp(i,s))return!0;return!1}function Ip(i,n,s,c){const f=c[0]-s[0],v=c[1]-s[1],x=(i[0]-s[0])*v-f*(i[1]-s[1]),b=(n[0]-s[0])*v-f*(n[1]-s[1]);return x>0&&b<0||x<0&&b>0}function nh(i,n,s){const c=[];for(let f=0;f<i.length;f++){const v=[];for(let x=0;x<i[f].length;x++){const b=Jg(i[f][x],s);Ss(n,b),v.push(b)}c.push(v)}return c}function Ep(i,n,s){const c=[];for(let f=0;f<i.length;f++){const v=nh(i[f],n,s);c.push(v)}return c}function Pp(i,n,s,c){if(i[0]<s[0]||i[0]>s[2]){const f=.5*c;let v=i[0]-s[0]>f?-c:s[0]-i[0]>f?c:0;v===0&&(v=i[0]-s[2]>f?-c:s[2]-i[0]>f?c:0),i[0]+=v}Ss(n,i)}function Mp(i,n,s,c){const f=Math.pow(2,c.z)*yo,v=[c.x*yo,c.y*yo],x=[];for(const b of i)for(const S of b){const k=[S.x+v[0],S.y+v[1]];Pp(k,n,s,f),x.push(k)}return x}function Ap(i,n,s,c){const f=Math.pow(2,c.z)*yo,v=[c.x*yo,c.y*yo],x=[];for(const S of i){const k=[];for(const E of S){const A=[E.x+v[0],E.y+v[1]];Ss(n,A),k.push(A)}x.push(k)}if(n[2]-n[0]<=f/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const S of x)for(const k of S)Pp(k,n,s,f)}var b;return x}class Cs{constructor(n,s){this.type=Pt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(xs(n[1])){const c=n[1];if(c.type==="FeatureCollection"){const f=[];for(const v of c.features){const{type:x,coordinates:b}=v.geometry;x==="Polygon"&&f.push(b),x==="MultiPolygon"&&f.push(...b)}if(f.length)return new Cs(c,{type:"MultiPolygon",coordinates:f})}else if(c.type==="Feature"){const f=c.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Cs(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new Cs(c,c)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,c){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(c.type==="Polygon"){const b=nh(c.coordinates,v,x),S=Mp(s.geometry(),f,v,x);if(!Qo(f,v))return!1;for(const k of S)if(!na(k,b))return!1}if(c.type==="MultiPolygon"){const b=Ep(c.coordinates,v,x),S=Mp(s.geometry(),f,v,x);if(!Qo(f,v))return!1;for(const k of S)if(!ey(k,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,c){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(c.type==="Polygon"){const b=nh(c.coordinates,v,x),S=Ap(s.geometry(),f,v,x);if(!Qo(f,v))return!1;for(const k of S)if(!kp(k,b))return!1}if(c.type==="MultiPolygon"){const b=Ep(c.coordinates,v,x),S=Ap(s.geometry(),f,v,x);if(!Qo(f,v))return!1;for(const k of S)if(!ty(k,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let zp=class{constructor(i=[],n=(s,c)=>s<c?-1:s>c?1:0){if(this.data=i,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:n,compare:s}=this,c=n[i];for(;i>0;){const f=i-1>>1,v=n[f];if(s(c,v)>=0)break;n[i]=v,i=f}n[i]=c}_down(i){const{data:n,compare:s}=this,c=this.length>>1,f=n[i];for(;i<c;){let v=1+(i<<1);const x=v+1;if(x<this.length&&s(n[x],n[v])<0&&(v=x),s(n[v],f)>=0)break;n[i]=n[v],i=v}n[i]=f}};function ry(i,n,s,c,f){Rp(i,n,s,c||i.length-1,f||ny)}function Rp(i,n,s,c,f){for(;c>s;){if(c-s>600){var v=c-s+1,x=n-s+1,b=Math.log(v),S=.5*Math.exp(2*b/3),k=.5*Math.sqrt(b*S*(v-S)/v)*(x-v/2<0?-1:1);Rp(i,n,Math.max(s,Math.floor(n-x*S/v+k)),Math.min(c,Math.floor(n+(v-x)*S/v+k)),f)}var E=i[n],A=s,B=c;for(ol(i,s,n),f(i[c],E)>0&&ol(i,s,c);A<B;){for(ol(i,A,B),A++,B--;f(i[A],E)<0;)A++;for(;f(i[B],E)>0;)B--}f(i[s],E)===0?ol(i,s,B):ol(i,++B,c),B<=n&&(s=B+1),n<=B&&(c=B-1)}}function ol(i,n,s){var c=i[n];i[n]=i[s],i[s]=c}function ny(i,n){return i<n?-1:i>n?1:0}function lc(i,n){if(i.length<=1)return[i];const s=[];let c,f;for(const v of i){const x=oy(v);x!==0&&(v.area=Math.abs(x),f===void 0&&(f=x<0),f===x<0?(c&&s.push(c),c=[v]):c.push(v))}if(c&&s.push(c),n>1)for(let v=0;v<s.length;v++)s[v].length<=n||(ry(s[v],n,1,s[v].length-1,iy),s[v]=s[v].slice(0,n));return s}function iy(i,n){return n.area-i.area}function oy(i){let n=0;for(let s,c,f=0,v=i.length,x=v-1;f<v;x=f++)s=i[f],c=i[x],n+=(c.x-s.x)*(s.y+c.y);return n}const Dp=1/298.257223563,Lp=Dp*(2-Dp),Bp=Math.PI/180;class ih{constructor(n){const s=6378.137*Bp*1e3,c=Math.cos(n*Bp),f=1/(1-Lp*(1-c*c)),v=Math.sqrt(f);this.kx=s*v*c,this.ky=s*v*f*(1-Lp)}distance(n,s){const c=this.wrap(n[0]-s[0])*this.kx,f=(n[1]-s[1])*this.ky;return Math.sqrt(c*c+f*f)}pointOnLine(n,s){let c,f,v,x,b=1/0;for(let S=0;S<n.length-1;S++){let k=n[S][0],E=n[S][1],A=this.wrap(n[S+1][0]-k)*this.kx,B=(n[S+1][1]-E)*this.ky,N=0;A===0&&B===0||(N=(this.wrap(s[0]-k)*this.kx*A+(s[1]-E)*this.ky*B)/(A*A+B*B),N>1?(k=n[S+1][0],E=n[S+1][1]):N>0&&(k+=A/this.kx*N,E+=B/this.ky*N)),A=this.wrap(s[0]-k)*this.kx,B=(s[1]-E)*this.ky;const W=A*A+B*B;W<b&&(b=W,c=k,f=E,v=S,x=N)}return{point:[c,f],index:v,t:Math.max(0,Math.min(1,x))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Fp(i,n){return n[0]-i[0]}function cc(i){return i[1]-i[0]+1}function Do(i,n){return i[1]>=i[0]&&i[1]<n}function oh(i,n){if(i[0]>i[1])return[null,null];const s=cc(i);if(n){if(s===2)return[i,null];const f=Math.floor(s/2);return[[i[0],i[0]+f],[i[0]+f,i[1]]]}if(s===1)return[i,null];const c=Math.floor(s/2)-1;return[[i[0],i[0]+c],[i[0]+c+1,i[1]]]}function sh(i,n){if(!Do(n,i.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let c=n[0];c<=n[1];++c)Ss(s,i[c]);return s}function ah(i){const n=[1/0,1/0,-1/0,-1/0];for(const s of i)for(const c of s)Ss(n,c);return n}function uc(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function lh(i,n,s){if(!uc(i)||!uc(n))return NaN;let c=0,f=0;return i[2]<n[0]&&(c=n[0]-i[2]),i[0]>n[2]&&(c=i[0]-n[2]),i[1]>n[3]&&(f=i[1]-n[3]),i[3]<n[1]&&(f=n[1]-i[3]),s.distance([0,0],[c,f])}function Ts(i,n,s){const c=s.pointOnLine(n,i);return s.distance(i,c.point)}function ch(i,n,s,c,f){const v=Math.min(Ts(i,[s,c],f),Ts(n,[s,c],f)),x=Math.min(Ts(s,[i,n],f),Ts(c,[i,n],f));return Math.min(v,x)}function sy(i,n,s,c,f){if(!Do(n,i.length)||!Do(c,s.length))return 1/0;let v=1/0;for(let x=n[0];x<n[1];++x){const b=i[x],S=i[x+1];for(let k=c[0];k<c[1];++k){const E=s[k],A=s[k+1];if(ac(b,S,E,A))return 0;v=Math.min(v,ch(b,S,E,A,f))}}return v}function Qr(i,n,s,c,f){if(!Do(n,i.length)||!Do(c,s.length))return NaN;let v=1/0;for(let x=n[0];x<=n[1];++x)for(let b=c[0];b<=c[1];++b)if(v=Math.min(v,f.distance(i[x],s[b])),v===0)return v;return v}function ay(i,n,s){if(na(i,n,!0))return 0;let c=1/0;for(const f of n){const v=f[0],x=f[f.length-1];if(v!==x&&(c=Math.min(c,Ts(i,[x,v],s)),c===0))return c;const b=s.pointOnLine(f,i);if(c=Math.min(c,s.distance(i,b.point)),c===0)return c}return c}function Xt(i,n,s,c){if(!Do(n,i.length))return NaN;for(let v=n[0];v<=n[1];++v)if(na(i[v],s,!0))return 0;let f=1/0;for(let v=n[0];v<n[1];++v){const x=i[v],b=i[v+1];for(const S of s)for(let k=0,E=S.length,A=E-1;k<E;A=k++){const B=S[A],N=S[k];if(ac(x,b,B,N))return 0;f=Math.min(f,ch(x,b,B,N,c))}}return f}function hc(i,n){for(const s of i)for(const c of s)if(na(c,n,!0))return!0;return!1}function zr(i,n,s,c=1/0){const f=ah(i),v=ah(n);if(c!==1/0&&lh(f,v,s)>=c)return c;if(Qo(f,v)){if(hc(i,n))return 0}else if(hc(n,i))return 0;let x=1/0;for(const b of i)for(let S=0,k=b.length,E=k-1;S<k;E=S++){const A=b[E],B=b[S];for(const N of n)for(let W=0,X=N.length,oe=X-1;W<X;oe=W++){const ce=N[oe],ke=N[W];if(ac(A,B,ce,ke))return 0;x=Math.min(x,ch(A,B,ce,ke,s))}}return x}function kr(i,n,s,c,f,v){if(!v)return;const x=lh(sh(c,v),f,s);x<n&&i.push([x,v,[0,0]])}function ks(i,n,s,c,f,v,x){if(!v||!x)return;const b=lh(sh(c,v),sh(f,x),s);b<n&&i.push([b,v,x])}function sl(i,n,s,c,f=1/0){let v=Math.min(c.distance(i[0],s[0][0]),f);if(v===0)return v;const x=new zp([[0,[0,i.length-1],[0,0]]],Fp),b=ah(s);for(;x.length>0;){const S=x.pop();if(S[0]>=v)continue;const k=S[1],E=n?50:100;if(cc(k)<=E){if(!Do(k,i.length))return NaN;if(n){const A=Xt(i,k,s,c);if(isNaN(A)||A===0)return A;v=Math.min(v,A)}else for(let A=k[0];A<=k[1];++A){const B=ay(i[A],s,c);if(v=Math.min(v,B),v===0)return 0}}else{const A=oh(k,n);kr(x,v,c,i,b,A[0]),kr(x,v,c,i,b,A[1])}}return v}function al(i,n,s,c,f,v=1/0){let x=Math.min(v,f.distance(i[0],s[0]));if(x===0)return x;const b=new zp([[0,[0,i.length-1],[0,s.length-1]]],Fp);for(;b.length>0;){const S=b.pop();if(S[0]>=x)continue;const k=S[1],E=S[2],A=n?50:100,B=c?50:100;if(cc(k)<=A&&cc(E)<=B){if(!Do(k,i.length)&&Do(E,s.length))return NaN;let N;if(n&&c)N=sy(i,k,s,E,f),x=Math.min(x,N);else if(n&&!c){const W=i.slice(k[0],k[1]+1);for(let X=E[0];X<=E[1];++X)if(N=Ts(s[X],W,f),x=Math.min(x,N),x===0)return x}else if(!n&&c){const W=s.slice(E[0],E[1]+1);for(let X=k[0];X<=k[1];++X)if(N=Ts(i[X],W,f),x=Math.min(x,N),x===0)return x}else N=Qr(i,k,s,E,f),x=Math.min(x,N)}else{const N=oh(k,n),W=oh(E,c);ks(b,x,f,i,s,N[0],W[0]),ks(b,x,f,i,s,N[0],W[1]),ks(b,x,f,i,s,N[1],W[0]),ks(b,x,f,i,s,N[1],W[1])}}return x}function uh(i){return i.type==="MultiPolygon"?i.coordinates.map(n=>({type:"Polygon",coordinates:n})):i.type==="MultiLineString"?i.coordinates.map(n=>({type:"LineString",coordinates:n})):i.type==="MultiPoint"?i.coordinates.map(n=>({type:"Point",coordinates:n})):[i]}class Is{constructor(n,s){this.type=qe,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(xs(n[1])){const c=n[1];if(c.type==="FeatureCollection")return new Is(c,c.features.map(f=>uh(f.geometry)).flat());if(c.type==="Feature")return new Is(c,uh(c.geometry));if("type"in c&&"coordinates"in c)return new Is(c,uh(c))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,c){const f=s.geometry(),v=f.flat().map(S=>rh([S.x,S.y],s.canonical));if(f.length===0)return NaN;const x=new ih(v[0][1]);let b=1/0;for(const S of c){switch(S.type){case"Point":b=Math.min(b,al(v,!1,[S.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,al(v,!1,S.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,sl(v,!1,S.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,c){const f=s.geometry(),v=f.flat().map(S=>rh([S.x,S.y],s.canonical));if(f.length===0)return NaN;const x=new ih(v[0][1]);let b=1/0;for(const S of c){switch(S.type){case"Point":b=Math.min(b,al(v,!0,[S.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,al(v,!0,S.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,sl(v,!0,S.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,c){const f=s.geometry();if(f.length===0||f[0].length===0)return NaN;const v=lc(f,0).map(S=>S.map(k=>k.map(E=>rh([E.x,E.y],s.canonical)))),x=new ih(v[0][0][0][1]);let b=1/0;for(const S of c)for(const k of v){switch(S.type){case"Point":b=Math.min(b,sl([S.coordinates],!1,k,x,b));break;case"LineString":b=Math.min(b,sl(S.coordinates,!0,k,x,b));break;case"Polygon":b=Math.min(b,zr(k,S.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ia={"==":Xg,"!=":Sp,">":Kg,"<":Cp,">=":Tp,"<=":Yg,array:Ki,at:Ku,boolean:Ki,case:tc,coalesce:ic,collator:il,format:sc,image:eh,in:Yu,"index-of":ea,interpolate:oi,"interpolate-hcl":oi,"interpolate-lab":oi,length:th,let:Jo,literal:Xi,match:Ju,number:Ki,"number-format":Qu,object:Ki,slice:rl,step:ta,string:Ki,"to-boolean":Yi,"to-color":Yi,"to-number":Yi,"to-string":Yi,var:_r,within:Cs,distance:Is};class Bi{constructor(n,s,c,f){this.name=n,this.type=s,this._evaluate=c,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const c=n[0],f=Bi.definitions[c];if(!f)return s.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,b=x.filter(([k])=>!Array.isArray(k)||k.length===n.length-1);let S=null;for(const[k,E]of b){S=new bs(s.registry,ll,s.path,null,s.scope);const A=[];let B=!1;for(let N=1;N<n.length;N++){const W=n[N],X=Array.isArray(k)?k[N-1]:k.type,oe=S.parse(W,1+A.length,X);if(!oe){B=!0;break}A.push(oe)}if(!B)if(Array.isArray(k)&&k.length!==A.length)S.error(`Expected ${k.length} arguments, but found ${A.length} instead.`);else{for(let N=0;N<A.length;N++){const W=Array.isArray(k)?k[N]:k.type,X=A[N];S.concat(N+1).checkSubtype(W,X.type)}if(S.errors.length===0)return new Bi(c,v,E,A)}}if(b.length===1)s.errors.push(...S.errors);else{const k=(b.length?b:x).map(([A])=>{return B=A,Array.isArray(B)?`(${B.map($).join(", ")})`:`(${$(B.type)}...)`;var B}).join(" | "),E=[];for(let A=1;A<n.length;A++){const B=s.parse(n[A],1+E.length);if(!B)return null;E.push($(B.type))}s.error(`Expected arguments of type ${k}, but found (${E.join(", ")}) instead.`)}return null}static register(n,s){Bi.definitions=s;for(const c in s)n[c]=Bi}}function hh(i,[n,s,c,f]){n=n.evaluate(i),s=s.evaluate(i),c=c.evaluate(i);const v=f?f.evaluate(i):1,x=Qs(n,s,c,v);if(x)throw new on(x);return new Sr(n/255,s/255,c/255,v,!1)}function dh(i,n){return i in n}function ph(i,n){const s=n[i];return s===void 0?null:s}function Es(i){return{type:i}}function ll(i){if(i instanceof _r)return ll(i.boundExpression);if(i instanceof Bi&&i.name==="error"||i instanceof il||i instanceof Cs||i instanceof Is)return!1;const n=i instanceof Yi||i instanceof Ki;let s=!0;return i.eachChild(c=>{s=n?s&&ll(c):s&&c instanceof Xi}),!!s&&cl(i)&&ul(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function cl(i){if(i instanceof Bi&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Cs||i instanceof Is)return!1;let n=!0;return i.eachChild(s=>{n&&!cl(s)&&(n=!1)}),n}function oa(i){if(i instanceof Bi&&i.name==="feature-state")return!1;let n=!0;return i.eachChild(s=>{n&&!oa(s)&&(n=!1)}),n}function ul(i,n){if(i instanceof Bi&&n.indexOf(i.name)>=0)return!1;let s=!0;return i.eachChild(c=>{s&&!ul(c,n)&&(s=!1)}),s}function dc(i){return{result:"success",value:i}}function sa(i){return{result:"error",value:i}}function aa(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Op(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function fh(i){return!!i.expression&&i.expression.interpolated}function mr(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function pc(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function ly(i){return i}function $p(i,n){const s=n.type==="color",c=i.stops&&typeof i.stops[0][0]=="object",f=c||!(c||i.property!==void 0),v=i.type||(fh(n)?"exponential":"interval");if(s||n.type==="padding"){const E=s?Sr.parse:xi.parse;(i=hn({},i)).stops&&(i.stops=i.stops.map(A=>[A[0],E(A[1])])),i.default=E(i.default?i.default:n.default)}if(i.colorSpace&&(x=i.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var x;let b,S,k;if(v==="exponential")b=jp;else if(v==="interval")b=fc;else if(v==="categorical"){b=Np,S=Object.create(null);for(const E of i.stops)S[E[0]]=E[1];k=typeof i.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);b=Vp}if(c){const E={},A=[];for(let W=0;W<i.stops.length;W++){const X=i.stops[W],oe=X[0].zoom;E[oe]===void 0&&(E[oe]={zoom:oe,type:i.type,property:i.property,default:i.default,stops:[]},A.push(oe)),E[oe].stops.push([X[0].value,X[1]])}const B=[];for(const W of A)B.push([E[W].zoom,$p(E[W],n)]);const N={name:"linear"};return{kind:"composite",interpolationType:N,interpolationFactor:oi.interpolationFactor.bind(void 0,N),zoomStops:B.map(W=>W[0]),evaluate:({zoom:W},X)=>jp({stops:B,base:i.base},n,W).evaluate(W,X)}}if(f){const E=v==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:oi.interpolationFactor.bind(void 0,E),zoomStops:i.stops.map(A=>A[0]),evaluate:({zoom:A})=>b(i,n,A,S,k)}}return{kind:"source",evaluate(E,A){const B=A&&A.properties?A.properties[i.property]:void 0;return B===void 0?la(i.default,n.default):b(i,n,B,S,k)}}}function la(i,n,s){return i!==void 0?i:n!==void 0?n:s!==void 0?s:void 0}function Np(i,n,s,c,f){return la(typeof s===f?c[s]:void 0,i.default,n.default)}function fc(i,n,s){if(mr(s)!=="number")return la(i.default,n.default);const c=i.stops.length;if(c===1||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[c-1][0])return i.stops[c-1][1];const f=rc(i.stops.map(v=>v[0]),s);return i.stops[f][1]}function jp(i,n,s){const c=i.base!==void 0?i.base:1;if(mr(s)!=="number")return la(i.default,n.default);const f=i.stops.length;if(f===1||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[f-1][0])return i.stops[f-1][1];const v=rc(i.stops.map(E=>E[0]),s),x=function(E,A,B,N){const W=N-B,X=E-B;return W===0?0:A===1?X/W:(Math.pow(A,X)-1)/(Math.pow(A,W)-1)}(s,c,i.stops[v][0],i.stops[v+1][0]),b=i.stops[v][1],S=i.stops[v+1][1],k=ii[n.type]||ly;return typeof b.evaluate=="function"?{evaluate(...E){const A=b.evaluate.apply(void 0,E),B=S.evaluate.apply(void 0,E);if(A!==void 0&&B!==void 0)return k(A,B,x,i.colorSpace)}}:k(b,S,x,i.colorSpace)}function Vp(i,n,s){switch(n.type){case"color":s=Sr.parse(s);break;case"formatted":s=vi.fromString(s.toString());break;case"resolvedImage":s=bi.fromString(s.toString());break;case"padding":s=xi.parse(s);break;default:mr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return la(s,i.default,n.default)}Bi.register(ia,{error:[{kind:"error"},[Tt],(i,[n])=>{throw new on(n.evaluate(i))}],typeof:[Tt,[Ft],(i,[n])=>$(pn(n.evaluate(i)))],"to-rgba":[O(qe,4),[Pn],(i,[n])=>{const[s,c,f,v]=n.evaluate(i).rgb;return[255*s,255*c,255*f,v]}],rgb:[Pn,[qe,qe,qe],hh],rgba:[Pn,[qe,qe,qe,qe],hh],has:{type:Pt,overloads:[[[Tt],(i,[n])=>dh(n.evaluate(i),i.properties())],[[Tt,ni],(i,[n,s])=>dh(n.evaluate(i),s.evaluate(i))]]},get:{type:Ft,overloads:[[[Tt],(i,[n])=>ph(n.evaluate(i),i.properties())],[[Tt,ni],(i,[n,s])=>ph(n.evaluate(i),s.evaluate(i))]]},"feature-state":[Ft,[Tt],(i,[n])=>ph(n.evaluate(i),i.featureState||{})],properties:[ni,[],i=>i.properties()],"geometry-type":[Tt,[],i=>i.geometryType()],id:[Ft,[],i=>i.id()],zoom:[qe,[],i=>i.globals.zoom],"heatmap-density":[qe,[],i=>i.globals.heatmapDensity||0],"line-progress":[qe,[],i=>i.globals.lineProgress||0],accumulated:[Ft,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[qe,Es(qe),(i,n)=>{let s=0;for(const c of n)s+=c.evaluate(i);return s}],"*":[qe,Es(qe),(i,n)=>{let s=1;for(const c of n)s*=c.evaluate(i);return s}],"-":{type:qe,overloads:[[[qe,qe],(i,[n,s])=>n.evaluate(i)-s.evaluate(i)],[[qe],(i,[n])=>-n.evaluate(i)]]},"/":[qe,[qe,qe],(i,[n,s])=>n.evaluate(i)/s.evaluate(i)],"%":[qe,[qe,qe],(i,[n,s])=>n.evaluate(i)%s.evaluate(i)],ln2:[qe,[],()=>Math.LN2],pi:[qe,[],()=>Math.PI],e:[qe,[],()=>Math.E],"^":[qe,[qe,qe],(i,[n,s])=>Math.pow(n.evaluate(i),s.evaluate(i))],sqrt:[qe,[qe],(i,[n])=>Math.sqrt(n.evaluate(i))],log10:[qe,[qe],(i,[n])=>Math.log(n.evaluate(i))/Math.LN10],ln:[qe,[qe],(i,[n])=>Math.log(n.evaluate(i))],log2:[qe,[qe],(i,[n])=>Math.log(n.evaluate(i))/Math.LN2],sin:[qe,[qe],(i,[n])=>Math.sin(n.evaluate(i))],cos:[qe,[qe],(i,[n])=>Math.cos(n.evaluate(i))],tan:[qe,[qe],(i,[n])=>Math.tan(n.evaluate(i))],asin:[qe,[qe],(i,[n])=>Math.asin(n.evaluate(i))],acos:[qe,[qe],(i,[n])=>Math.acos(n.evaluate(i))],atan:[qe,[qe],(i,[n])=>Math.atan(n.evaluate(i))],min:[qe,Es(qe),(i,n)=>Math.min(...n.map(s=>s.evaluate(i)))],max:[qe,Es(qe),(i,n)=>Math.max(...n.map(s=>s.evaluate(i)))],abs:[qe,[qe],(i,[n])=>Math.abs(n.evaluate(i))],round:[qe,[qe],(i,[n])=>{const s=n.evaluate(i);return s<0?-Math.round(-s):Math.round(s)}],floor:[qe,[qe],(i,[n])=>Math.floor(n.evaluate(i))],ceil:[qe,[qe],(i,[n])=>Math.ceil(n.evaluate(i))],"filter-==":[Pt,[Tt,Ft],(i,[n,s])=>i.properties()[n.value]===s.value],"filter-id-==":[Pt,[Ft],(i,[n])=>i.id()===n.value],"filter-type-==":[Pt,[Tt],(i,[n])=>i.geometryType()===n.value],"filter-<":[Pt,[Tt,Ft],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c<f}],"filter-id-<":[Pt,[Ft],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s<c}],"filter->":[Pt,[Tt,Ft],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c>f}],"filter-id->":[Pt,[Ft],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s>c}],"filter-<=":[Pt,[Tt,Ft],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c<=f}],"filter-id-<=":[Pt,[Ft],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s<=c}],"filter->=":[Pt,[Tt,Ft],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c>=f}],"filter-id->=":[Pt,[Ft],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s>=c}],"filter-has":[Pt,[Ft],(i,[n])=>n.value in i.properties()],"filter-has-id":[Pt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Pt,[O(Tt)],(i,[n])=>n.value.indexOf(i.geometryType())>=0],"filter-id-in":[Pt,[O(Ft)],(i,[n])=>n.value.indexOf(i.id())>=0],"filter-in-small":[Pt,[Tt,O(Ft)],(i,[n,s])=>s.value.indexOf(i.properties()[n.value])>=0],"filter-in-large":[Pt,[Tt,O(Ft)],(i,[n,s])=>function(c,f,v,x){for(;v<=x;){const b=v+x>>1;if(f[b]===c)return!0;f[b]>c?x=b-1:v=b+1}return!1}(i.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Pt,overloads:[[[Pt,Pt],(i,[n,s])=>n.evaluate(i)&&s.evaluate(i)],[Es(Pt),(i,n)=>{for(const s of n)if(!s.evaluate(i))return!1;return!0}]]},any:{type:Pt,overloads:[[[Pt,Pt],(i,[n,s])=>n.evaluate(i)||s.evaluate(i)],[Es(Pt),(i,n)=>{for(const s of n)if(s.evaluate(i))return!0;return!1}]]},"!":[Pt,[Pt],(i,[n])=>!n.evaluate(i)],"is-supported-script":[Pt,[Tt],(i,[n])=>{const s=i.globals&&i.globals.isSupportedScript;return!s||s(n.evaluate(i))}],upcase:[Tt,[Tt],(i,[n])=>n.evaluate(i).toUpperCase()],downcase:[Tt,[Tt],(i,[n])=>n.evaluate(i).toLowerCase()],concat:[Tt,Es(Ft),(i,n)=>n.map(s=>tl(s.evaluate(i))).join("")],"resolved-locale":[Tt,[_i],(i,[n])=>n.evaluate(i).resolvedLocale()]});class mc{constructor(n,s){var c;this.expression=n,this._warningHistory={},this._evaluator=new ec,this._defaultValue=s?(c=s).type==="color"&&pc(c.default)?new Sr(0,0,0,0):c.type==="color"?Sr.parse(c.default)||null:c.type==="padding"?xi.parse(c.default)||null:c.type==="variableAnchorOffsetCollection"?Li.parse(c.default)||null:c.default===void 0?null:c.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,c,f,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=c,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,c,f,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=c||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new on(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function gc(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in ia}function ca(i,n){const s=new bs(ia,ll,[],n?function(f){const v={color:Pn,string:Tt,number:qe,enum:Tt,boolean:Pt,formatted:Di,padding:kt,resolvedImage:ur,variableAnchorOffsetCollection:ne};return f.type==="array"?O(v[f.value]||Ft,f.length):v[f.type]}(n):void 0),c=s.parse(i,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?dc(new mc(c,n)):sa(s.errors)}class ua{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!oa(s.expression)}evaluateWithoutErrorHandling(n,s,c,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,c,f,v,x)}evaluate(n,s,c,f,v,x){return this._styleExpression.evaluate(n,s,c,f,v,x)}}class ha{constructor(n,s,c,f){this.kind=n,this.zoomStops=c,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!oa(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,s,c,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,c,f,v,x)}evaluate(n,s,c,f,v,x){return this._styleExpression.evaluate(n,s,c,f,v,x)}interpolationFactor(n,s,c){return this.interpolationType?oi.interpolationFactor(this.interpolationType,n,s,c):0}}function mh(i,n){const s=ca(i,n);if(s.result==="error")return s;const c=s.value.expression,f=cl(c);if(!f&&!aa(n))return sa([new ar("","data expressions not supported")]);const v=ul(c,["zoom"]);if(!v&&!Op(n))return sa([new ar("","zoom expressions not supported")]);const x=hl(c);return x||v?x instanceof ar?sa([x]):x instanceof oi&&!fh(n)?sa([new ar("",'"interpolate" expressions cannot be used with this property')]):dc(x?new ha(f?"camera":"composite",s.value,x.labels,x instanceof oi?x.interpolation:void 0):new ua(f?"constant":"source",s.value)):sa([new ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class da{constructor(n,s){this._parameters=n,this._specification=s,hn(this,$p(this._parameters,this._specification))}static deserialize(n){return new da(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function hl(i){let n=null;if(i instanceof Jo)n=hl(i.result);else if(i instanceof ic){for(const s of i.args)if(n=hl(s),n)break}else(i instanceof ta||i instanceof oi)&&i.input instanceof Bi&&i.input.name==="zoom"&&(n=i);return n instanceof ar||i.eachChild(s=>{const c=hl(s);c instanceof ar?n=c:!n&&c?n=new ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&c&&n!==c&&(n=new ar("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function yc(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const n of i.slice(1))if(!yc(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const _c={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gh(i){if(i==null)return{filter:()=>!0,needGeometry:!1};yc(i)||(i=vc(i));const n=ca(i,_c);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,c,f)=>n.value.evaluate(s,c,{},f),needGeometry:Up(i)}}function cy(i,n){return i<n?-1:i>n?1:0}function Up(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let n=1;n<i.length;n++)if(Up(i[n]))return!0;return!1}function vc(i){if(!i)return!0;const n=i[0];return i.length<=1?n!=="any":n==="=="?yh(i[1],i[2],"=="):n==="!="?Bn(yh(i[1],i[2],"==")):n==="<"||n===">"||n==="<="||n===">="?yh(i[1],i[2],n):n==="any"?(s=i.slice(1),["any"].concat(s.map(vc))):n==="all"?["all"].concat(i.slice(1).map(vc)):n==="none"?["all"].concat(i.slice(1).map(vc).map(Bn)):n==="in"?dl(i[1],i.slice(2)):n==="!in"?Bn(dl(i[1],i.slice(2))):n==="has"?pl(i[1]):n!=="!has"||Bn(pl(i[1]));var s}function yh(i,n,s){switch(i){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,i,n]}}function dl(i,n){if(n.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",i,["literal",n.sort(cy)]]:["filter-in-small",i,["literal",n]]}}function pl(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Bn(i){return["!",i]}function Ps(i){const n=typeof i;if(n==="number"||n==="boolean"||n==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let f="[";for(const v of i)f+=`${Ps(v)},`;return`${f}]`}const s=Object.keys(i).sort();let c="{";for(let f=0;f<s.length;f++)c+=`${JSON.stringify(s[f])}:${Ps(i[s[f]])},`;return`${c}}`}function Wp(i){let n="";for(const s of Or)n+=`/${Ps(i[s])}`;return n}function Gp(i){const n=i.value;return n?[new Xe(i.key,n,"constants have been deprecated as of v8")]:[]}function en(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Ji(i){if(Array.isArray(i))return i.map(Ji);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const n={};for(const s in i)n[s]=Ji(i[s]);return n}return en(i)}function wi(i){const n=i.key,s=i.value,c=i.valueSpec||{},f=i.objectElementValidators||{},v=i.style,x=i.styleSpec,b=i.validateSpec;let S=[];const k=mr(s);if(k!=="object")return[new Xe(n,s,`object expected, ${k} found`)];for(const E in s){const A=E.split(".")[0],B=c[A]||c["*"];let N;if(f[A])N=f[A];else if(c[A])N=b;else if(f["*"])N=f["*"];else{if(!c["*"]){S.push(new Xe(n,s[E],`unknown property "${E}"`));continue}N=b}S=S.concat(N({key:(n&&`${n}.`)+E,value:s[E],valueSpec:B,style:v,styleSpec:x,object:s,objectKey:E,validateSpec:b},s))}for(const E in c)f[E]||c[E].required&&c[E].default===void 0&&s[E]===void 0&&S.push(new Xe(n,s,`missing required property "${E}"`));return S}function fl(i){const n=i.value,s=i.valueSpec,c=i.style,f=i.styleSpec,v=i.key,x=i.arrayElementValidator||i.validateSpec;if(mr(n)!=="array")return[new Xe(v,n,`array expected, ${mr(n)} found`)];if(s.length&&n.length!==s.length)return[new Xe(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Xe(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let b={type:s.value,values:s.values};f.$version<7&&(b.function=s.function),mr(s.value)==="object"&&(b=s.value);let S=[];for(let k=0;k<n.length;k++)S=S.concat(x({array:n,arrayIndex:k,value:n[k],valueSpec:b,validateSpec:i.validateSpec,style:c,styleSpec:f,key:`${v}[${k}]`}));return S}function _h(i){const n=i.key,s=i.value,c=i.valueSpec;let f=mr(s);return f==="number"&&s!=s&&(f="NaN"),f!=="number"?[new Xe(n,s,`number expected, ${f} found`)]:"minimum"in c&&s<c.minimum?[new Xe(n,s,`${s} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&s>c.maximum?[new Xe(n,s,`${s} is greater than the maximum value ${c.maximum}`)]:[]}function xc(i){const n=i.valueSpec,s=en(i.value.type);let c,f,v,x={};const b=s!=="categorical"&&i.value.property===void 0,S=!b,k=mr(i.value.stops)==="array"&&mr(i.value.stops[0])==="array"&&mr(i.value.stops[0][0])==="object",E=wi({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(N){if(s==="identity")return[new Xe(N.key,N.value,'identity function may not have a "stops" property')];let W=[];const X=N.value;return W=W.concat(fl({key:N.key,value:X,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:A})),mr(X)==="array"&&X.length===0&&W.push(new Xe(N.key,X,"array must have at least one stop")),W},default:function(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:n,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}});return s==="identity"&&b&&E.push(new Xe(i.key,i.value,'missing required property "property"')),s==="identity"||i.value.stops||E.push(new Xe(i.key,i.value,'missing required property "stops"')),s==="exponential"&&i.valueSpec.expression&&!fh(i.valueSpec)&&E.push(new Xe(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!aa(i.valueSpec)?E.push(new Xe(i.key,i.value,"property functions not supported")):b&&!Op(i.valueSpec)&&E.push(new Xe(i.key,i.value,"zoom functions not supported"))),s!=="categorical"&&!k||i.value.property!==void 0||E.push(new Xe(i.key,i.value,'"property" property is required')),E;function A(N){let W=[];const X=N.value,oe=N.key;if(mr(X)!=="array")return[new Xe(oe,X,`array expected, ${mr(X)} found`)];if(X.length!==2)return[new Xe(oe,X,`array length 2 expected, length ${X.length} found`)];if(k){if(mr(X[0])!=="object")return[new Xe(oe,X,`object expected, ${mr(X[0])} found`)];if(X[0].zoom===void 0)return[new Xe(oe,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Xe(oe,X,"object stop key must have value")];if(v&&v>en(X[0].zoom))return[new Xe(oe,X[0].zoom,"stop zoom values must appear in ascending order")];en(X[0].zoom)!==v&&(v=en(X[0].zoom),f=void 0,x={}),W=W.concat(wi({key:`${oe}[0]`,value:X[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:_h,value:B}}))}else W=W.concat(B({key:`${oe}[0]`,value:X[0],validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},X));return gc(Ji(X[1]))?W.concat([new Xe(`${oe}[1]`,X[1],"expressions are not allowed in function stops.")]):W.concat(N.validateSpec({key:`${oe}[1]`,value:X[1],valueSpec:n,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function B(N,W){const X=mr(N.value),oe=en(N.value),ce=N.value!==null?N.value:W;if(c){if(X!==c)return[new Xe(N.key,ce,`${X} stop domain type must match previous stop domain type ${c}`)]}else c=X;if(X!=="number"&&X!=="string"&&X!=="boolean")return[new Xe(N.key,ce,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&s!=="categorical"){let ke=`number expected, ${X} found`;return aa(n)&&s===void 0&&(ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xe(N.key,ce,ke)]}return s!=="categorical"||X!=="number"||isFinite(oe)&&Math.floor(oe)===oe?s!=="categorical"&&X==="number"&&f!==void 0&&oe<f?[new Xe(N.key,ce,"stop domain values must appear in ascending order")]:(f=oe,s==="categorical"&&oe in x?[new Xe(N.key,ce,"stop domain values must be unique")]:(x[oe]=!0,[])):[new Xe(N.key,ce,`integer expected, found ${oe}`)]}}function pa(i){const n=(i.expressionContext==="property"?mh:ca)(Ji(i.value),i.valueSpec);if(n.result==="error")return n.value.map(c=>new Xe(`${i.key}${c.key}`,i.value,c.message));const s=n.value.expression||n.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!s.outputDefined())return[new Xe(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!oa(s))return[new Xe(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!oa(s))return[new Xe(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!ul(s,["zoom","feature-state"]))return[new Xe(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!cl(s))return[new Xe(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Lo(i){const n=i.key,s=i.value,c=i.valueSpec,f=[];return Array.isArray(c.values)?c.values.indexOf(en(s))===-1&&f.push(new Xe(n,s,`expected one of [${c.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(c.values).indexOf(en(s))===-1&&f.push(new Xe(n,s,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function vh(i){return yc(Ji(i.value))?pa(hn({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):bc(i)}function bc(i){const n=i.value,s=i.key;if(mr(n)!=="array")return[new Xe(s,n,`array expected, ${mr(n)} found`)];const c=i.styleSpec;let f,v=[];if(n.length<1)return[new Xe(s,n,"filter array must have at least 1 element")];switch(v=v.concat(Lo({key:`${s}[0]`,value:n[0],valueSpec:c.filter_operator,style:i.style,styleSpec:i.styleSpec})),en(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&en(n[1])==="$type"&&v.push(new Xe(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Xe(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=mr(n[1]),f!=="string"&&v.push(new Xe(`${s}[1]`,n[1],`string expected, ${f} found`)));for(let x=2;x<n.length;x++)f=mr(n[x]),en(n[1])==="$type"?v=v.concat(Lo({key:`${s}[${x}]`,value:n[x],valueSpec:c.geometry_type,style:i.style,styleSpec:i.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new Xe(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(bc({key:`${s}[${x}]`,value:n[x],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":f=mr(n[1]),n.length!==2?v.push(new Xe(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new Xe(`${s}[1]`,n[1],`string expected, ${f} found`))}return v}function xh(i,n){const s=i.key,c=i.validateSpec,f=i.style,v=i.styleSpec,x=i.value,b=i.objectKey,S=v[`${n}_${i.layerType}`];if(!S)return[];const k=b.match(/^(.*)-transition$/);if(n==="paint"&&k&&S[k[1]]&&S[k[1]].transition)return c({key:s,value:x,valueSpec:v.transition,style:f,styleSpec:v});const E=i.valueSpec||S[b];if(!E)return[new Xe(s,x,`unknown property "${b}"`)];let A;if(mr(x)==="string"&&aa(E)&&!E.tokens&&(A=/^{([^}]+)}$/.exec(x)))return[new Xe(s,x,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(A[1])} }\`.`)];const B=[];return i.layerType==="symbol"&&(b==="text-field"&&f&&!f.glyphs&&B.push(new Xe(s,x,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&pc(Ji(x))&&en(x.type)==="identity"&&B.push(new Xe(s,x,'"text-font" does not support identity functions'))),B.concat(c({key:i.key,value:x,valueSpec:E,style:f,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:b}))}function wc(i){return xh(i,"paint")}function bh(i){return xh(i,"layout")}function wh(i){let n=[];const s=i.value,c=i.key,f=i.style,v=i.styleSpec;s.type||s.ref||n.push(new Xe(c,s,'either "type" or "ref" is required'));let x=en(s.type);const b=en(s.ref);if(s.id){const S=en(s.id);for(let k=0;k<i.arrayIndex;k++){const E=f.layers[k];en(E.id)===S&&n.push(new Xe(c,s.id,`duplicate layer id "${s.id}", previously used at line ${E.id.__line__}`))}}if("ref"in s){let S;["type","source","source-layer","filter","layout"].forEach(k=>{k in s&&n.push(new Xe(c,s[k],`"${k}" is prohibited for ref layers`))}),f.layers.forEach(k=>{en(k.id)===b&&(S=k)}),S?S.ref?n.push(new Xe(c,s.ref,"ref cannot reference another ref layer")):x=en(S.type):n.push(new Xe(c,s.ref,`ref layer "${b}" not found`))}else if(x!=="background")if(s.source){const S=f.sources&&f.sources[s.source],k=S&&en(S.type);S?k==="vector"&&x==="raster"?n.push(new Xe(c,s.source,`layer "${s.id}" requires a raster source`)):k!=="raster-dem"&&x==="hillshade"?n.push(new Xe(c,s.source,`layer "${s.id}" requires a raster-dem source`)):k==="raster"&&x!=="raster"?n.push(new Xe(c,s.source,`layer "${s.id}" requires a vector source`)):k!=="vector"||s["source-layer"]?k==="raster-dem"&&x!=="hillshade"?n.push(new Xe(c,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||k==="geojson"&&S.lineMetrics||n.push(new Xe(c,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Xe(c,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Xe(c,s.source,`source "${s.source}" not found`))}else n.push(new Xe(c,s,'missing required property "source"'));return n=n.concat(wi({key:c,value:s,valueSpec:v.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${c}.type`,value:s.type,valueSpec:v.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:s,objectKey:"type"}),filter:vh,layout:S=>wi({layer:s,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>bh(hn({layerType:x},k))}}),paint:S=>wi({layer:s,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":k=>wc(hn({layerType:x},k))}})}})),n}function Ms(i){const n=i.value,s=i.key,c=mr(n);return c!=="string"?[new Xe(s,n,`string expected, ${c} found`)]:[]}const Sc={promoteId:function({key:i,value:n}){if(mr(n)==="string")return Ms({key:i,value:n});{const s=[];for(const c in n)s.push(...Ms({key:`${i}.${c}`,value:n[c]}));return s}}};function ml(i){const n=i.value,s=i.key,c=i.styleSpec,f=i.style,v=i.validateSpec;if(!n.type)return[new Xe(s,n,'"type" is required')];const x=en(n.type);let b;switch(x){case"vector":case"raster":return b=wi({key:s,value:n,valueSpec:c[`source_${x.replace("-","_")}`],style:i.style,styleSpec:c,objectElementValidators:Sc,validateSpec:v}),b;case"raster-dem":return b=function(S){var k;const E=(k=S.sourceName)!==null&&k!==void 0?k:"",A=S.value,B=S.styleSpec,N=B.source_raster_dem,W=S.style;let X=[];const oe=mr(A);if(A===void 0)return X;if(oe!=="object")return X.push(new Xe("source_raster_dem",A,`object expected, ${oe} found`)),X;const ce=en(A.encoding)==="custom",ke=["redFactor","greenFactor","blueFactor","baseShift"],ye=S.value.encoding?`"${S.value.encoding}"`:"Default";for(const Ce in A)!ce&&ke.includes(Ce)?X.push(new Xe(Ce,A[Ce],`In "${E}": "${Ce}" is only valid when "encoding" is set to "custom". ${ye} encoding found`)):N[Ce]?X=X.concat(S.validateSpec({key:Ce,value:A[Ce],valueSpec:N[Ce],validateSpec:S.validateSpec,style:W,styleSpec:B})):X.push(new Xe(Ce,A[Ce],`unknown property "${Ce}"`));return X}({sourceName:s,value:n,style:i.style,styleSpec:c,validateSpec:v}),b;case"geojson":if(b=wi({key:s,value:n,valueSpec:c.source_geojson,style:f,styleSpec:c,validateSpec:v,objectElementValidators:Sc}),n.cluster)for(const S in n.clusterProperties){const[k,E]=n.clusterProperties[S],A=typeof k=="string"?[k,["accumulated"],["get",S]]:k;b.push(...pa({key:`${s}.${S}.map`,value:E,expressionContext:"cluster-map"})),b.push(...pa({key:`${s}.${S}.reduce`,value:A,expressionContext:"cluster-reduce"}))}return b;case"video":return wi({key:s,value:n,valueSpec:c.source_video,style:f,validateSpec:v,styleSpec:c});case"image":return wi({key:s,value:n,valueSpec:c.source_image,style:f,validateSpec:v,styleSpec:c});case"canvas":return[new Xe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Lo({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Sh(i){const n=i.value,s=i.styleSpec,c=s.light,f=i.style;let v=[];const x=mr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Xe("light",n,`object expected, ${x} found`)]),v;for(const b in n){const S=b.match(/^(.*)-transition$/);v=v.concat(S&&c[S[1]]&&c[S[1]].transition?i.validateSpec({key:b,value:n[b],valueSpec:s.transition,validateSpec:i.validateSpec,style:f,styleSpec:s}):c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],validateSpec:i.validateSpec,style:f,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)])}return v}function Ch(i){const n=i.value,s=i.styleSpec,c=s.sky,f=i.style,v=mr(n);if(n===void 0)return[];if(v!=="object")return[new Xe("sky",n,`object expected, ${v} found`)];let x=[];for(const b in n)x=x.concat(c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],style:f,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)]);return x}function Th(i){const n=i.value,s=i.styleSpec,c=s.terrain,f=i.style;let v=[];const x=mr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Xe("terrain",n,`object expected, ${x} found`)]),v;for(const b in n)v=v.concat(c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],validateSpec:i.validateSpec,style:f,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)]);return v}function kh(i){let n=[];const s=i.value,c=i.key;if(Array.isArray(s)){const f=[],v=[];for(const x in s)s[x].id&&f.includes(s[x].id)&&n.push(new Xe(c,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),f.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new Xe(c,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(wi({key:`${c}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return n}return Ms({key:c,value:s})}const Cc={"*":()=>[],array:fl,boolean:function(i){const n=i.value,s=i.key,c=mr(n);return c!=="boolean"?[new Xe(s,n,`boolean expected, ${c} found`)]:[]},number:_h,color:function(i){const n=i.key,s=i.value,c=mr(s);return c!=="string"?[new Xe(n,s,`color expected, ${c} found`)]:Sr.parse(String(s))?[]:[new Xe(n,s,`color expected, "${s}" found`)]},constants:Gp,enum:Lo,filter:vh,function:xc,layer:wh,object:wi,source:ml,light:Sh,sky:Ch,terrain:Th,projection:function(i){const n=i.value,s=i.styleSpec,c=s.projection,f=i.style,v=mr(n);if(n===void 0)return[];if(v!=="object")return[new Xe("projection",n,`object expected, ${v} found`)];let x=[];for(const b in n)x=x.concat(c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],style:f,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)]);return x},string:Ms,formatted:function(i){return Ms(i).length===0?[]:pa(i)},resolvedImage:function(i){return Ms(i).length===0?[]:pa(i)},padding:function(i){const n=i.key,s=i.value;if(mr(s)==="array"){if(s.length<1||s.length>4)return[new Xe(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const c={type:"number"};let f=[];for(let v=0;v<s.length;v++)f=f.concat(i.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:i.validateSpec,valueSpec:c}));return f}return _h({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const n=i.key,s=i.value,c=mr(s),f=i.styleSpec;if(c!=="array"||s.length<1||s.length%2!=0)return[new Xe(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Lo({key:`${n}[${x}]`,value:s[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(fl({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:f}));return v},sprite:kh};function gl(i){const n=i.value,s=i.valueSpec,c=i.styleSpec;return i.validateSpec=gl,s.expression&&pc(en(n))?xc(i):s.expression&&gc(Ji(n))?pa(i):s.type&&Cc[s.type]?Cc[s.type](i):wi(hn({},i,{valueSpec:s.type?c[s.type]:s}))}function Hp(i){const n=i.value,s=i.key,c=Ms(i);return c.length||(n.indexOf("{fontstack}")===-1&&c.push(new Xe(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&c.push(new Xe(s,n,'"glyphs" url must include a "{range}" token'))),c}function Fi(i,n=ze){let s=[];return s=s.concat(gl({key:"",value:i,valueSpec:n.$root,styleSpec:n,style:i,validateSpec:gl,objectElementValidators:{glyphs:Hp,"*":()=>[]}})),i.constants&&(s=s.concat(Gp({key:"constants",value:i.constants}))),Ih(s)}function _o(i){return function(n){return i({...n,validateSpec:gl})}}function Ih(i){return[].concat(i).sort((n,s)=>n.line-s.line)}function Qi(i){return function(...n){return Ih(i.apply(this,n))}}Fi.source=Qi(_o(ml)),Fi.sprite=Qi(_o(kh)),Fi.glyphs=Qi(_o(Hp)),Fi.light=Qi(_o(Sh)),Fi.sky=Qi(_o(Ch)),Fi.terrain=Qi(_o(Th)),Fi.layer=Qi(_o(wh)),Fi.filter=Qi(_o(vh)),Fi.paintProperty=Qi(_o(wc)),Fi.layoutProperty=Qi(_o(bh));const As=Fi,uy=As.light,hy=As.sky,qp=As.paintProperty,Zp=As.layoutProperty;function Eh(i,n){let s=!1;if(n&&n.length)for(const c of n)i.fire(new Nt(new Error(c.message))),s=!0;return s}class fa{constructor(n,s,c){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(c=x[2]);for(let S=0;S<this.d*this.d;S++){const k=x[3+S],E=x[3+S+1];f.push(k===E?null:x.subarray(k,E))}const b=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],b),this.bboxes=x.subarray(b),this.insert=this._insertReadonly}else{this.d=s+2*c;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=c,this.scale=s/n,this.uid=0;const v=c/s*n;this.min=-v,this.max=n+v}insert(n,s,c,f,v){this._forEachCell(s,c,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,c,f,v,x){this.cells[v].push(x)}query(n,s,c,f,v){const x=this.min,b=this.max;if(n<=x&&s<=x&&b<=c&&b<=f&&!v)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(n,s,c,f,this._queryCell,S,{},v),S}}_queryCell(n,s,c,f,v,x,b,S){const k=this.cells[v];if(k!==null){const E=this.keys,A=this.bboxes;for(let B=0;B<k.length;B++){const N=k[B];if(b[N]===void 0){const W=4*N;(S?S(A[W+0],A[W+1],A[W+2],A[W+3]):n<=A[W+2]&&s<=A[W+3]&&c>=A[W+0]&&f>=A[W+1])?(b[N]=!0,x.push(E[N])):b[N]=!1}}}}_forEachCell(n,s,c,f,v,x,b,S){const k=this._convertToCellCoord(n),E=this._convertToCellCoord(s),A=this._convertToCellCoord(c),B=this._convertToCellCoord(f);for(let N=k;N<=A;N++)for(let W=E;W<=B;W++){const X=this.d*W+N;if((!S||S(this._convertFromCellCoord(N),this._convertFromCellCoord(W),this._convertFromCellCoord(N+1),this._convertFromCellCoord(W+1)))&&v.call(this,n,s,c,f,X,x,b,S))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let c=0;for(let x=0;x<this.cells.length;x++)c+=this.cells[x].length;const f=new Int32Array(s+c+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const b=n[x];f[3+x]=v,f.set(b,v),v+=b.length}return f[3+n.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+n.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(n,s){const c=n.toArrayBuffer();return s&&s.push(c),{buffer:c}}static deserialize(n){return new fa(n.buffer)}}const Oi={};function dt(i,n,s={}){if(Oi[i])throw new Error(`${i} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:i,writeable:!1}),Oi[i]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}dt("Object",Object),dt("TransferableGridIndex",fa),dt("Color",Sr),dt("Error",Error),dt("AJAXError",Rt),dt("ResolvedImage",bi),dt("StylePropertyFunction",da),dt("StyleExpression",mc,{omit:["_evaluator"]}),dt("ZoomDependentExpression",ha),dt("ZoomConstantExpression",ua),dt("CompoundExpression",Bi,{omit:["_evaluate"]});for(const i in ia)ia[i]._classRegistryKey||dt(`Expression_${i}`,ia[i]);function Tc(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Ph(i){return i.$name||i.constructor._classRegistryKey}function Xp(i){return!function(n){if(n===null||typeof n!="object")return!1;const s=Ph(n);return!(!s||s==="Object")}(i)&&(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||Tc(i)||Ke(i)||ArrayBuffer.isView(i)||i instanceof ImageData)}function ma(i,n){if(Xp(i))return(Tc(i)||Ke(i))&&n&&n.push(i),ArrayBuffer.isView(i)&&n&&n.push(i.buffer),i instanceof ImageData&&n&&n.push(i.data.buffer),i;if(Array.isArray(i)){const v=[];for(const x of i)v.push(ma(x,n));return v}if(typeof i!="object")throw new Error("can't serialize object of type "+typeof i);const s=Ph(i);if(!s)throw new Error(`can't serialize object of unregistered class ${i.constructor.name}`);if(!Oi[s])throw new Error(`${s} is not registered.`);const{klass:c}=Oi[s],f=c.serialize?c.serialize(i,n):{};if(c.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in i){if(!i.hasOwnProperty(v)||Oi[s].omit.indexOf(v)>=0)continue;const x=i[v];f[v]=Oi[s].shallow.indexOf(v)>=0?x:ma(x,n)}i instanceof Error&&(f.message=i.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(f.$name=s),f}function ga(i){if(Xp(i))return i;if(Array.isArray(i))return i.map(ga);if(typeof i!="object")throw new Error("can't deserialize object of type "+typeof i);const n=Ph(i)||"Object";if(!Oi[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Oi[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(i);const c=Object.create(s.prototype);for(const f of Object.keys(i)){if(f==="$name")continue;const v=i[f];c[f]=Oi[n].shallow.indexOf(f)>=0?v:ga(v)}return c}class Mh{constructor(){this.first=!0}update(n,s){const c=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=c,!0))}}const ir={"Latin-1 Supplement":i=>i>=128&&i<=255,"Hangul Jamo":i=>i>=4352&&i<=4607,Khmer:i=>i>=6016&&i<=6143,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Katakana:i=>i>=12448&&i<=12543,Kanbun:i=>i>=12688&&i<=12703,"CJK Strokes":i=>i>=12736&&i<=12783,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"Private Use Area":i=>i>=57344&&i<=63743,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Ah(i){for(const n of i)if(Rh(n.charCodeAt(0)))return!0;return!1}function dy(i){for(const n of i)if(!ya(n.charCodeAt(0)))return!1;return!0}function zh(i){const n=i.map(s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}}).filter(s=>s);return new RegExp(n.join("|"),"u")}const py=zh(["Arab","Dupl","Mong","Ougr","Syrc"]);function ya(i){return!py.test(String.fromCodePoint(i))}const Kp=zh(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Rh(i){return!(i!==746&&i!==747&&(i<4352||!(ir["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||ir["CJK Compatibility"](i)||ir["CJK Strokes"](i)||!(!ir["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||ir["Enclosed CJK Letters and Months"](i)||ir["Ideographic Description Characters"](i)||ir.Kanbun(i)||ir.Katakana(i)&&i!==12540||!(!ir["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!ir["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||ir["Vertical Forms"](i)||ir["Yijing Hexagram Symbols"](i)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(i))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(i))||Kp.test(String.fromCodePoint(i)))))}function Yp(i){return!(Rh(i)||function(n){return!!(ir["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||ir["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||ir["Letterlike Symbols"](n)||ir["Number Forms"](n)||ir["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||ir["Control Pictures"](n)&&n!==9251||ir["Optical Character Recognition"](n)||ir["Enclosed Alphanumerics"](n)||ir["Geometric Shapes"](n)||ir["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||ir["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||ir["CJK Symbols and Punctuation"](n)||ir.Katakana(n)||ir["Private Use Area"](n)||ir["CJK Compatibility Forms"](n)||ir["Small Form Variants"](n)||ir["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(i))}const fy=zh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Dh(i){return fy.test(String.fromCodePoint(i))}function my(i,n){return!(!n&&Dh(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||ir.Khmer(i))}function gy(i){for(const n of i)if(Dh(n.charCodeAt(0)))return!0;return!1}const Si=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Nr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mh,this.transition={})}isSupportedScript(n){return function(s,c){for(const f of s)if(!my(f.charCodeAt(0),c))return!1;return!0}(n,Si.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),c=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*s}}}class _a{constructor(n,s){this.property=n,this.value=s,this.expression=function(c,f){if(pc(c))return new da(c,f);if(gc(c)){const v=mh(c,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=c;return f.type==="color"&&typeof c=="string"?v=Sr.parse(c):f.type!=="padding"||typeof c!="number"&&!Array.isArray(c)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(c)&&(v=Li.parse(c)):v=xi.parse(c),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,c){return this.property.possiblyEvaluate(this,n,s,c)}}class kc{constructor(n){this.property=n,this.value=new _a(n,void 0)}transitioned(n,s){return new Jp(this.property,this.value,s,_e({},n.transition,this.transition),n.now)}untransitioned(){return new Jp(this.property,this.value,null,{},0)}}class Ic{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return De(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new kc(this._values[n].property)),this._values[n].value=new _a(this._values[n].property,s===null?void 0:De(s))}getTransition(n){return De(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new kc(this._values[n].property)),this._values[n].transition=De(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(n[s]=c);const f=this.getTransition(s);f!==void 0&&(n[`${s}-transition`]=f)}return n}transitioned(n,s){const c=new yl(this._properties);for(const f of Object.keys(this._values))c._values[f]=this._values[f].transitioned(n,s._values[f]);return c}untransitioned(){const n=new yl(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Jp{constructor(n,s,c,f,v){this.property=n,this.value=s,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=c)}possiblyEvaluate(n,s,c){const f=n.now||0,v=this.value.possiblyEvaluate(n,s,c),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(n,s,c);{const b=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,c),v,function(S){if(S<=0)return 0;if(S>=1)return 1;const k=S*S,E=k*S;return 4*(S<.5?E:3*(S-k)+E-.75)}(b))}}return v}}class yl{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,c){const f=new vl(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,c);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class _l{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return De(this._values[n].value)}setValue(n,s){this._values[n]=new _a(this._values[n].property,s===null?void 0:De(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(n[s]=c)}return n}possiblyEvaluate(n,s,c){const f=new vl(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,c);return f}}class vo{constructor(n,s,c){this.property=n,this.value=s,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,c,f){return this.property.evaluate(this.value,this.parameters,n,s,c,f)}}class vl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class ft{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,c){const f=ii[this.specification.type];return f?f(n,s,c):n}}class Mt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,c,f){return new vo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},c,f)}:n.expression,s)}interpolate(n,s,c){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new vo(this,{kind:"constant",value:void 0},n.parameters);const f=ii[this.specification.type];if(f){const v=f(n.value.value,s.value.value,c);return new vo(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,c,f,v,x){return n.kind==="constant"?n.value:n.evaluate(s,c,f,v,x)}}class Ec extends Mt{possiblyEvaluate(n,s,c,f){if(n.value===void 0)return new vo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},c,f),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,b=this._calculate(x,x,x,s);return new vo(this,{kind:"constant",value:b},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new vo(this,{kind:"constant",value:v},s)}return new vo(this,n.expression,s)}evaluate(n,s,c,f,v,x){if(n.kind==="source"){const b=n.evaluate(s,c,f,v,x);return this._calculate(b,b,b,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},c,f),n.evaluate({zoom:Math.floor(s.zoom)},c,f),n.evaluate({zoom:Math.floor(s.zoom)+1},c,f),s):n.value}_calculate(n,s,c,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:c,to:s}}interpolate(n){return n}}class Pc{constructor(n){this.specification=n}possiblyEvaluate(n,s,c,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},c,f);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new Nr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Nr(Math.floor(s.zoom),s)),n.expression.evaluate(new Nr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,c,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:c,to:s}}interpolate(n){return n}}class Lh{constructor(n){this.specification=n}possiblyEvaluate(n,s,c,f){return!!n.expression.evaluate(s,null,{},c,f)}interpolate(){return!1}}class _{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const c=n[s];c.specification.overridable&&this.overridableProperties.push(s);const f=this.defaultPropertyValues[s]=new _a(c,void 0),v=this.defaultTransitionablePropertyValues[s]=new kc(c);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=f.possiblyEvaluate({})}}}dt("DataDrivenProperty",Mt),dt("DataConstantProperty",ft),dt("CrossFadedDataDrivenProperty",Ec),dt("CrossFadedProperty",Pc),dt("ColorRampProperty",Lh);const r="-transition";class a extends sr{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new _l(s.layout)),s.paint)){this._transitionablePaint=new Ic(s.paint);for(const c in n.paint)this.setPaintProperty(c,n.paint[c],{validate:!1});for(const c in n.layout)this.setLayoutProperty(c,n.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vl(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,c={}){s!=null&&this._validate(Zp,`layers.${this.id}.layout.${n}`,n,s,c)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(r)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,c={}){if(s!=null&&this._validate(qp,`layers.${this.id}.paint.${n}`,n,s,c))return!1;if(n.endsWith(r))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const f=this._transitionablePaint._values[n],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),b=f.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const S=this._transitionablePaint._values[n].value;return S.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,b,S)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,c){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Re(n,(s,c)=>!(s===void 0||c==="layout"&&!Object.keys(s).length||c==="paint"&&!Object.keys(s).length))}_validate(n,s,c,f,v={}){return(!v||v.validate!==!1)&&Eh(this,n.call(As,{key:s,layerType:this.type,objectKey:c,value:f,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof vo&&aa(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const h={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class d{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function w(i,n=1){let s=0,c=0;return{members:i.map(f=>{const v=h[f.type].BYTES_PER_ELEMENT,x=s=C(s,Math.max(n,v)),b=f.components||1;return c=Math.max(c,v),s+=v*b,{name:f.name,type:f.type,components:b,offset:x}}),size:C(s,Math.max(c,n)),alignment:n}}function C(i,n){return Math.ceil(i/n)*n}class T extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const c=this.length;return this.resize(c+1),this.emplace(c,n,s)}emplace(n,s,c){const f=2*n;return this.int16[f+0]=s,this.int16[f+1]=c,n}}T.prototype.bytesPerElement=4,dt("StructArrayLayout2i4",T);class P extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=c,this.int16[v+2]=f,n}}P.prototype.bytesPerElement=6,dt("StructArrayLayout3i6",P);class R extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,c,f)}emplace(n,s,c,f,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=c,this.int16[x+2]=f,this.int16[x+3]=v,n}}R.prototype.bytesPerElement=8,dt("StructArrayLayout4i8",R);class D extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=6*n;return this.int16[S+0]=s,this.int16[S+1]=c,this.int16[S+2]=f,this.int16[S+3]=v,this.int16[S+4]=x,this.int16[S+5]=b,n}}D.prototype.bytesPerElement=12,dt("StructArrayLayout2i4i12",D);class j extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=4*n,k=8*n;return this.int16[S+0]=s,this.int16[S+1]=c,this.uint8[k+4]=f,this.uint8[k+5]=v,this.uint8[k+6]=x,this.uint8[k+7]=b,n}}j.prototype.bytesPerElement=8,dt("StructArrayLayout2i4ub8",j);class Y extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const c=this.length;return this.resize(c+1),this.emplace(c,n,s)}emplace(n,s,c){const f=2*n;return this.float32[f+0]=s,this.float32[f+1]=c,n}}Y.prototype.bytesPerElement=8,dt("StructArrayLayout2f8",Y);class te extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,k,E){const A=this.length;return this.resize(A+1),this.emplace(A,n,s,c,f,v,x,b,S,k,E)}emplace(n,s,c,f,v,x,b,S,k,E,A){const B=10*n;return this.uint16[B+0]=s,this.uint16[B+1]=c,this.uint16[B+2]=f,this.uint16[B+3]=v,this.uint16[B+4]=x,this.uint16[B+5]=b,this.uint16[B+6]=S,this.uint16[B+7]=k,this.uint16[B+8]=E,this.uint16[B+9]=A,n}}te.prototype.bytesPerElement=20,dt("StructArrayLayout10ui20",te);class ae extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,k,E,A,B){const N=this.length;return this.resize(N+1),this.emplace(N,n,s,c,f,v,x,b,S,k,E,A,B)}emplace(n,s,c,f,v,x,b,S,k,E,A,B,N){const W=12*n;return this.int16[W+0]=s,this.int16[W+1]=c,this.int16[W+2]=f,this.int16[W+3]=v,this.uint16[W+4]=x,this.uint16[W+5]=b,this.uint16[W+6]=S,this.uint16[W+7]=k,this.int16[W+8]=E,this.int16[W+9]=A,this.int16[W+10]=B,this.int16[W+11]=N,n}}ae.prototype.bytesPerElement=24,dt("StructArrayLayout4i4ui4i24",ae);class ue extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=c,this.float32[v+2]=f,n}}ue.prototype.bytesPerElement=12,dt("StructArrayLayout3f12",ue);class de extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}de.prototype.bytesPerElement=4,dt("StructArrayLayout1ul4",de);class me extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,k){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,c,f,v,x,b,S,k)}emplace(n,s,c,f,v,x,b,S,k,E){const A=10*n,B=5*n;return this.int16[A+0]=s,this.int16[A+1]=c,this.int16[A+2]=f,this.int16[A+3]=v,this.int16[A+4]=x,this.int16[A+5]=b,this.uint32[B+3]=S,this.uint16[A+8]=k,this.uint16[A+9]=E,n}}me.prototype.bytesPerElement=20,dt("StructArrayLayout6i1ul2ui20",me);class ie extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=6*n;return this.int16[S+0]=s,this.int16[S+1]=c,this.int16[S+2]=f,this.int16[S+3]=v,this.int16[S+4]=x,this.int16[S+5]=b,n}}ie.prototype.bytesPerElement=12,dt("StructArrayLayout2i2i2i12",ie);class xe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,c,f,v)}emplace(n,s,c,f,v,x){const b=4*n,S=8*n;return this.float32[b+0]=s,this.float32[b+1]=c,this.float32[b+2]=f,this.int16[S+6]=v,this.int16[S+7]=x,n}}xe.prototype.bytesPerElement=16,dt("StructArrayLayout2f1f2i16",xe);class Se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=16*n,k=4*n,E=8*n;return this.uint8[S+0]=s,this.uint8[S+1]=c,this.float32[k+1]=f,this.float32[k+2]=v,this.int16[E+6]=x,this.int16[E+7]=b,n}}Se.prototype.bytesPerElement=16,dt("StructArrayLayout2ub2f2i16",Se);class Pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=c,this.uint16[v+2]=f,n}}Pe.prototype.bytesPerElement=6,dt("StructArrayLayout3ui6",Pe);class Ve extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,k,E,A,B,N,W,X,oe,ce){const ke=this.length;return this.resize(ke+1),this.emplace(ke,n,s,c,f,v,x,b,S,k,E,A,B,N,W,X,oe,ce)}emplace(n,s,c,f,v,x,b,S,k,E,A,B,N,W,X,oe,ce,ke){const ye=24*n,Ce=12*n,Fe=48*n;return this.int16[ye+0]=s,this.int16[ye+1]=c,this.uint16[ye+2]=f,this.uint16[ye+3]=v,this.uint32[Ce+2]=x,this.uint32[Ce+3]=b,this.uint32[Ce+4]=S,this.uint16[ye+10]=k,this.uint16[ye+11]=E,this.uint16[ye+12]=A,this.float32[Ce+7]=B,this.float32[Ce+8]=N,this.uint8[Fe+36]=W,this.uint8[Fe+37]=X,this.uint8[Fe+38]=oe,this.uint32[Ce+10]=ce,this.int16[ye+22]=ke,n}}Ve.prototype.bytesPerElement=48,dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ve);class Ye extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,k,E,A,B,N,W,X,oe,ce,ke,ye,Ce,Fe,He,lt,Et,ot,nt,yt,pt){const ut=this.length;return this.resize(ut+1),this.emplace(ut,n,s,c,f,v,x,b,S,k,E,A,B,N,W,X,oe,ce,ke,ye,Ce,Fe,He,lt,Et,ot,nt,yt,pt)}emplace(n,s,c,f,v,x,b,S,k,E,A,B,N,W,X,oe,ce,ke,ye,Ce,Fe,He,lt,Et,ot,nt,yt,pt,ut){const Ne=32*n,vt=16*n;return this.int16[Ne+0]=s,this.int16[Ne+1]=c,this.int16[Ne+2]=f,this.int16[Ne+3]=v,this.int16[Ne+4]=x,this.int16[Ne+5]=b,this.int16[Ne+6]=S,this.int16[Ne+7]=k,this.uint16[Ne+8]=E,this.uint16[Ne+9]=A,this.uint16[Ne+10]=B,this.uint16[Ne+11]=N,this.uint16[Ne+12]=W,this.uint16[Ne+13]=X,this.uint16[Ne+14]=oe,this.uint16[Ne+15]=ce,this.uint16[Ne+16]=ke,this.uint16[Ne+17]=ye,this.uint16[Ne+18]=Ce,this.uint16[Ne+19]=Fe,this.uint16[Ne+20]=He,this.uint16[Ne+21]=lt,this.uint16[Ne+22]=Et,this.uint32[vt+12]=ot,this.float32[vt+13]=nt,this.float32[vt+14]=yt,this.uint16[Ne+30]=pt,this.uint16[Ne+31]=ut,n}}Ye.prototype.bytesPerElement=64,dt("StructArrayLayout8i15ui1ul2f2ui64",Ye);class it extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}it.prototype.bytesPerElement=4,dt("StructArrayLayout1f4",it);class ct extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=c,this.float32[v+2]=f,n}}ct.prototype.bytesPerElement=12,dt("StructArrayLayout1ui2f12",ct);class tt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=c,this.uint16[v+3]=f,n}}tt.prototype.bytesPerElement=8,dt("StructArrayLayout1ul2ui8",tt);class et extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const c=this.length;return this.resize(c+1),this.emplace(c,n,s)}emplace(n,s,c){const f=2*n;return this.uint16[f+0]=s,this.uint16[f+1]=c,n}}et.prototype.bytesPerElement=4,dt("StructArrayLayout2ui4",et);class mt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}mt.prototype.bytesPerElement=2,dt("StructArrayLayout1ui2",mt);class Ot extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,c,f)}emplace(n,s,c,f,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=c,this.float32[x+2]=f,this.float32[x+3]=v,n}}Ot.prototype.bytesPerElement=16,dt("StructArrayLayout4f16",Ot);class rt extends d{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new L(this.anchorPointX,this.anchorPointY)}}rt.prototype.size=20;class st extends me{get(n){return new rt(this,n)}}dt("CollisionBoxArray",st);class Lt extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Lt.prototype.size=48;class jr extends Ve{get(n){return new Lt(this,n)}}dt("PlacedSymbolArray",jr);class Wt extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Wt.prototype.size=64;class rr extends Ye{get(n){return new Wt(this,n)}}dt("SymbolInstanceArray",rr);class Vr extends it{getoffsetX(n){return this.float32[1*n+0]}}dt("GlyphOffsetArray",Vr);class Fn extends P{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}dt("SymbolLineVertexArray",Fn);class eo extends d{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}eo.prototype.size=12;class Ur extends ct{get(n){return new eo(this,n)}}dt("TextAnchorOffsetArray",Ur);class si extends d{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}si.prototype.size=8;class Xn extends tt{get(n){return new si(this,n)}}dt("FeatureIndexArray",Xn);class On extends T{}class Kn extends T{}class xo extends T{}class va extends D{}class Mc extends j{}class xa extends Y{}class $i extends te{}class Ac extends ae{}class Bh extends ue{}class Ni extends de{}class ji extends ie{}class es extends Se{}class to extends Pe{}class An extends et{}const $n=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ci}=$n;class or{constructor(n=[]){this.segments=n}prepareSegment(n,s,c,f){let v=this.segments[this.segments.length-1];return n>or.MAX_VERTEX_ARRAY_LENGTH&&Me(`Max vertices per segment is ${or.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>or.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:s.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,c,f){return new or([{vertexOffset:n,primitiveOffset:s,vertexLength:c,primitiveLength:f,vaos:{},sortKey:0}])}}function zs(i,n){return 256*(i=fe(Math.floor(i),0,255))+fe(Math.floor(n),0,255)}or.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dt("SegmentVector",or);const ba=w([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var wa={exports:{}},Qp={exports:{}};Qp.exports=function(i,n){var s,c,f,v,x,b,S,k;for(c=i.length-(s=3&i.length),f=n,x=3432918353,b=461845907,k=0;k<c;)S=255&i.charCodeAt(k)|(255&i.charCodeAt(++k))<<8|(255&i.charCodeAt(++k))<<16|(255&i.charCodeAt(++k))<<24,++k,f=27492+(65535&(v=5*(65535&(f=(f^=S=(65535&(S=(S=(65535&S)*x+(((S>>>16)*x&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(S=0,s){case 3:S^=(255&i.charCodeAt(k+2))<<16;case 2:S^=(255&i.charCodeAt(k+1))<<8;case 1:f^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(k)))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295}return f^=i.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var yy=Qp.exports,ef={exports:{}};ef.exports=function(i,n){for(var s,c=i.length,f=n^c,v=0;c>=4;)s=1540483477*(65535&(s=255&i.charCodeAt(v)|(255&i.charCodeAt(++v))<<8|(255&i.charCodeAt(++v))<<16|(255&i.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),c-=4,++v;switch(c){case 3:f^=(255&i.charCodeAt(v+2))<<16;case 2:f^=(255&i.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&i.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var ts=yy,tf=ef.exports;wa.exports=ts,wa.exports.murmur3=ts,wa.exports.murmur2=tf;var zc=I(wa.exports);class xl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,c,f){this.ids.push(Rc(n)),this.positions.push(s,c,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Rc(n);let c=0,f=this.ids.length-1;for(;c<f;){const x=c+f>>1;this.ids[x]>=s?f=x:c=x+1}const v=[];for(;this.ids[c]===s;)v.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return v}static serialize(n,s){const c=new Float64Array(n.ids),f=new Uint32Array(n.positions);return Dc(c,f,0,c.length-1),s&&s.push(c.buffer,f.buffer),{ids:c,positions:f}}static deserialize(n){const s=new xl;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Rc(i){const n=+i;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:zc(String(i))}function Dc(i,n,s,c){for(;s<c;){const f=i[s+c>>1];let v=s-1,x=c+1;for(;;){do v++;while(i[v]<f);do x--;while(i[x]>f);if(v>=x)break;Sa(i,v,x),Sa(n,3*v,3*x),Sa(n,3*v+1,3*x+1),Sa(n,3*v+2,3*x+2)}x-s<c-x?(Dc(i,n,s,x),s=x+1):(Dc(i,n,x+1,c),c=x)}}function Sa(i,n,s){const c=i[n];i[n]=i[s],i[s]=c}dt("FeaturePositionMap",xl);class bl{constructor(n,s){this.gl=n.gl,this.location=s}}class rf extends bl{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class $0 extends bl{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class N0 extends bl{constructor(n,s){super(n,s),this.current=Sr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Ik=new Float32Array(16);function _y(i){return[zs(255*i.r,255*i.g),zs(255*i.b,255*i.a)]}class Fh{constructor(n,s,c){this.value=n,this.uniformNames=s.map(f=>`u_${f}`),this.type=c}setUniform(n,s,c){n.set(c.constantOr(this.value))}getBinding(n,s,c){return this.type==="color"?new N0(n,s):new rf(n,s)}}class Lc{constructor(n,s){this.uniformNames=s.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,c,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,c){return c.substr(0,9)==="u_pattern"?new $0(n,s):new rf(n,s)}}class Rs{constructor(n,s,c,f){this.expression=n,this.type=c,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,s,c,f,v){const x=this.paintVertexArray.length,b=this.expression.evaluate(new Nr(0),s,{},f,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,b)}updatePaintArray(n,s,c,f){const v=this.expression.evaluate({zoom:0},c,f);this._setPaintValue(n,s,v)}_setPaintValue(n,s,c){if(this.type==="color"){const f=_y(c);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=n;f<s;f++)this.paintVertexArray.emplace(f,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Bo{constructor(n,s,c,f,v,x){this.expression=n,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=c,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,c,f,v){const x=this.expression.evaluate(new Nr(this.zoom),s,{},f,[],v),b=this.expression.evaluate(new Nr(this.zoom+1),s,{},f,[],v),S=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(S,n,x,b)}updatePaintArray(n,s,c,f){const v=this.expression.evaluate({zoom:this.zoom},c,f),x=this.expression.evaluate({zoom:this.zoom+1},c,f);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,c,f){if(this.type==="color"){const v=_y(c),x=_y(f);for(let b=n;b<s;b++)this.paintVertexArray.emplace(b,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,c,f);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const c=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,f=fe(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,s,c){return new rf(n,s)}}class Ca{constructor(n,s,c,f,v,x){this.expression=n,this.type=s,this.useIntegerZoom=c,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,c){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,s.patterns&&s.patterns[this.layerId],c)}updatePaintArray(n,s,c,f,v){this._setPaintValues(n,s,c.patterns&&c.patterns[this.layerId],v)}_setPaintValues(n,s,c,f){if(!f||!c)return;const{min:v,mid:x,max:b}=c,S=f[v],k=f[x],E=f[b];if(S&&k&&E)for(let A=n;A<s;A++)this.zoomInPaintVertexArray.emplace(A,k.tl[0],k.tl[1],k.br[0],k.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],k.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(A,k.tl[0],k.tl[1],k.br[0],k.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],k.pixelRatio,E.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ba.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ba.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class j0{constructor(n,s,c){this.binders={},this._buffers=[];const f=[];for(const v in n.paint._values){if(!c(v))continue;const x=n.paint.get(v);if(!(x instanceof vo&&aa(x.property.specification)))continue;const b=Ek(v,n.type),S=x.value,k=x.property.specification.type,E=x.property.useIntegerZoom,A=x.property.specification["property-type"],B=A==="cross-faded"||A==="cross-faded-data-driven";if(S.kind==="constant")this.binders[v]=B?new Lc(S.value,b):new Fh(S.value,b,k),f.push(`/u_${v}`);else if(S.kind==="source"||B){const N=V0(v,k,"source");this.binders[v]=B?new Ca(S,k,E,s,N,n.id):new Rs(S,b,k,N),f.push(`/a_${v}`)}else{const N=V0(v,k,"composite");this.binders[v]=new Bo(S,b,k,E,s,N),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Rs||s instanceof Bo?s.maxValue:0}populatePaintArrays(n,s,c,f,v){for(const x in this.binders){const b=this.binders[x];(b instanceof Rs||b instanceof Bo||b instanceof Ca)&&b.populatePaintArray(n,s,c,f,v)}}setConstantPatternPositions(n,s){for(const c in this.binders){const f=this.binders[c];f instanceof Lc&&f.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,c,f,v){let x=!1;for(const b in n){const S=s.getPositions(b);for(const k of S){const E=c.feature(k.index);for(const A in this.binders){const B=this.binders[A];if((B instanceof Rs||B instanceof Bo||B instanceof Ca)&&B.expression.isStateDependent===!0){const N=f.paint.get(A);B.expression=N.value,B.updatePaintArray(k.start,k.end,E,n[b],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const c=this.binders[s];(c instanceof Fh||c instanceof Lc)&&n.push(...c.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Rs||c instanceof Bo)for(let f=0;f<c.paintVertexAttributes.length;f++)n.push(c.paintVertexAttributes[f].name);else if(c instanceof Ca)for(let f=0;f<ba.members.length;f++)n.push(ba.members[f].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Fh||c instanceof Lc||c instanceof Bo)for(const f of c.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const c=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof Fh||v instanceof Lc||v instanceof Bo){for(const x of v.uniformNames)if(s[x]){const b=v.getBinding(n,s[x],x);c.push({name:x,property:f,binding:b})}}}return c}setUniforms(n,s,c,f){for(const{name:v,property:x,binding:b}of s)this.binders[x].setUniform(b,f,c.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const c=this.binders[s];if(n&&c instanceof Ca){const f=n.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(c instanceof Rs||c instanceof Bo)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(n){for(const s in this.binders){const c=this.binders[s];(c instanceof Rs||c instanceof Bo||c instanceof Ca)&&c.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Rs||s instanceof Bo||s instanceof Ca)&&s.destroy()}}}class wl{constructor(n,s,c=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new j0(f,s,c);this.needsUpload=!1,this._featureMap=new xl,this._bufferOffset=0}populatePaintArrays(n,s,c,f,v,x){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,s,f,v,x);s.id!==void 0&&this._featureMap.add(s.id,c,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,c,f){for(const v of c)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Ek(i,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${n}-`,"").replace(/-/g,"_")]}function V0(i,n,s){const c={color:{source:Y,composite:Ot},number:{source:it,composite:Y}},f=function(v){return{"line-pattern":{source:$i,composite:$i},"fill-pattern":{source:$i,composite:$i},"fill-extrusion-pattern":{source:$i,composite:$i}}[v]}(i);return f&&f[s]||c[n][s]}dt("ConstantBinder",Fh),dt("CrossFadedConstantBinder",Lc),dt("SourceExpressionBinder",Rs),dt("CrossFadedCompositeBinder",Ca),dt("CompositeExpressionBinder",Bo),dt("ProgramConfiguration",j0,{omit:["_buffers"]}),dt("ProgramConfigurationSet",wl);const fn=8192,vy=Math.pow(2,14)-1,U0=-vy-1;function Sl(i){const n=fn/i.extent,s=i.loadGeometry();for(let c=0;c<s.length;c++){const f=s[c];for(let v=0;v<f.length;v++){const x=f[v],b=Math.round(x.x*n),S=Math.round(x.y*n);x.x=fe(b,U0,vy),x.y=fe(S,U0,vy),(b<x.x||b>x.x+1||S<x.y||S>x.y+1)&&Me("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Cl(i,n){return{type:i.type,id:i.id,properties:i.properties,geometry:n?Sl(i):[]}}function nf(i,n,s,c,f){i.emplaceBack(2*n+(c+1)/2,2*s+(f+1)/2)}class xy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Kn,this.indexArray=new to,this.segments=new or,this.programConfigurations=new wl(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){const f=this.layers[0],v=[];let x=null,b=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),b=!x.isConstant());for(const{feature:S,id:k,index:E,sourceLayerIndex:A}of n){const B=this.layers[0]._featureFilter.needGeometry,N=Cl(S,B);if(!this.layers[0]._featureFilter.filter(new Nr(this.zoom),N,c))continue;const W=b?x.evaluate(N,{},c):void 0,X={id:k,properties:S.properties,type:S.type,sourceLayerIndex:A,index:E,geometry:B?N.geometry:Sl(S),patterns:{},sortKey:W};v.push(X)}b&&v.sort((S,k)=>S.sortKey-k.sortKey);for(const S of v){const{geometry:k,index:E,sourceLayerIndex:A}=S,B=n[E].feature;this.addFeature(S,k,E,c),s.featureIndex.insert(B,k,E,A,this.index)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ci),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,c,f){for(const v of s)for(const x of v){const b=x.x,S=x.y;if(b<0||b>=fn||S<0||S>=fn)continue;const k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),E=k.vertexLength;nf(this.layoutVertexArray,b,S,-1,-1),nf(this.layoutVertexArray,b,S,1,-1),nf(this.layoutVertexArray,b,S,1,1),nf(this.layoutVertexArray,b,S,-1,1),this.indexArray.emplaceBack(E,E+1,E+2),this.indexArray.emplaceBack(E,E+3,E+2),k.vertexLength+=4,k.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,{},f)}}function W0(i,n){for(let s=0;s<i.length;s++)if(Bc(n,i[s]))return!0;for(let s=0;s<n.length;s++)if(Bc(i,n[s]))return!0;return!!by(i,n)}function Pk(i,n,s){return!!Bc(i,n)||!!wy(n,i,s)}function G0(i,n){if(i.length===1)return q0(n,i[0]);for(let s=0;s<n.length;s++){const c=n[s];for(let f=0;f<c.length;f++)if(Bc(i,c[f]))return!0}for(let s=0;s<i.length;s++)if(q0(n,i[s]))return!0;for(let s=0;s<n.length;s++)if(by(i,n[s]))return!0;return!1}function Mk(i,n,s){if(i.length>1){if(by(i,n))return!0;for(let c=0;c<n.length;c++)if(wy(n[c],i,s))return!0}for(let c=0;c<i.length;c++)if(wy(i[c],n,s))return!0;return!1}function by(i,n){if(i.length===0||n.length===0)return!1;for(let s=0;s<i.length-1;s++){const c=i[s],f=i[s+1];for(let v=0;v<n.length-1;v++)if(Ak(c,f,n[v],n[v+1]))return!0}return!1}function Ak(i,n,s,c){return Ie(i,s,c)!==Ie(n,s,c)&&Ie(i,n,s)!==Ie(i,n,c)}function wy(i,n,s){const c=s*s;if(n.length===1)return i.distSqr(n[0])<c;for(let f=1;f<n.length;f++)if(H0(i,n[f-1],n[f])<c)return!0;return!1}function H0(i,n,s){const c=n.distSqr(s);if(c===0)return i.distSqr(n);const f=((i.x-n.x)*(s.x-n.x)+(i.y-n.y)*(s.y-n.y))/c;return i.distSqr(f<0?n:f>1?s:s.sub(n)._mult(f)._add(n))}function q0(i,n){let s,c,f,v=!1;for(let x=0;x<i.length;x++){s=i[x];for(let b=0,S=s.length-1;b<s.length;S=b++)c=s[b],f=s[S],c.y>n.y!=f.y>n.y&&n.x<(f.x-c.x)*(n.y-c.y)/(f.y-c.y)+c.x&&(v=!v)}return v}function Bc(i,n){let s=!1;for(let c=0,f=i.length-1;c<i.length;f=c++){const v=i[c],x=i[f];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function zk(i,n,s){const c=s[0],f=s[2];if(i.x<c.x&&n.x<c.x||i.x>f.x&&n.x>f.x||i.y<c.y&&n.y<c.y||i.y>f.y&&n.y>f.y)return!1;const v=Ie(i,n,s[0]);return v!==Ie(i,n,s[1])||v!==Ie(i,n,s[2])||v!==Ie(i,n,s[3])}function Oh(i,n,s){const c=n.paint.get(i).value;return c.kind==="constant"?c.value:s.programConfigurations.get(n.id).getMaxValue(i)}function of(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function sf(i,n,s,c,f){if(!n[0]&&!n[1])return i;const v=L.convert(n)._mult(f);s==="viewport"&&v._rotate(-c);const x=[];for(let b=0;b<i.length;b++)x.push(i[b].sub(v));return x}let Z0,X0;dt("CircleBucket",xy,{omit:["layers"]});var Rk={get paint(){return X0=X0||new _({"circle-radius":new Mt(ze.paint_circle["circle-radius"]),"circle-color":new Mt(ze.paint_circle["circle-color"]),"circle-blur":new Mt(ze.paint_circle["circle-blur"]),"circle-opacity":new Mt(ze.paint_circle["circle-opacity"]),"circle-translate":new ft(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new ft(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ft(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ft(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mt(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mt(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mt(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return Z0=Z0||new _({"circle-sort-key":new Mt(ze.layout_circle["circle-sort-key"])})}},ai=1e-6,Fc=typeof Float32Array<"u"?Float32Array:Array;function Sy(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function K0(i,n,s){var c=n[0],f=n[1],v=n[2],x=n[3],b=n[4],S=n[5],k=n[6],E=n[7],A=n[8],B=n[9],N=n[10],W=n[11],X=n[12],oe=n[13],ce=n[14],ke=n[15],ye=s[0],Ce=s[1],Fe=s[2],He=s[3];return i[0]=ye*c+Ce*b+Fe*A+He*X,i[1]=ye*f+Ce*S+Fe*B+He*oe,i[2]=ye*v+Ce*k+Fe*N+He*ce,i[3]=ye*x+Ce*E+Fe*W+He*ke,i[4]=(ye=s[4])*c+(Ce=s[5])*b+(Fe=s[6])*A+(He=s[7])*X,i[5]=ye*f+Ce*S+Fe*B+He*oe,i[6]=ye*v+Ce*k+Fe*N+He*ce,i[7]=ye*x+Ce*E+Fe*W+He*ke,i[8]=(ye=s[8])*c+(Ce=s[9])*b+(Fe=s[10])*A+(He=s[11])*X,i[9]=ye*f+Ce*S+Fe*B+He*oe,i[10]=ye*v+Ce*k+Fe*N+He*ce,i[11]=ye*x+Ce*E+Fe*W+He*ke,i[12]=(ye=s[12])*c+(Ce=s[13])*b+(Fe=s[14])*A+(He=s[15])*X,i[13]=ye*f+Ce*S+Fe*B+He*oe,i[14]=ye*v+Ce*k+Fe*N+He*ce,i[15]=ye*x+Ce*E+Fe*W+He*ke,i}Math.hypot||(Math.hypot=function(){for(var i=0,n=arguments.length;n--;)i+=arguments[n]*arguments[n];return Math.sqrt(i)});var $h,Dk=K0;function af(i,n,s){var c=n[0],f=n[1],v=n[2],x=n[3];return i[0]=s[0]*c+s[4]*f+s[8]*v+s[12]*x,i[1]=s[1]*c+s[5]*f+s[9]*v+s[13]*x,i[2]=s[2]*c+s[6]*f+s[10]*v+s[14]*x,i[3]=s[3]*c+s[7]*f+s[11]*v+s[15]*x,i}$h=new Fc(4),Fc!=Float32Array&&($h[0]=0,$h[1]=0,$h[2]=0,$h[3]=0);class Lk extends a{constructor(n){super(n,Rk)}createBucket(n){return new xy(n)}queryRadius(n){const s=n;return Oh("circle-radius",this,s)+Oh("circle-stroke-width",this,s)+of(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,c,f,v,x,b,S){const k=sf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,b),E=this.paint.get("circle-radius").evaluate(s,c)+this.paint.get("circle-stroke-width").evaluate(s,c),A=this.paint.get("circle-pitch-alignment")==="map",B=A?k:function(W,X){return W.map(oe=>Y0(oe,X))}(k,S),N=A?E*b:E;for(const W of f)for(const X of W){const oe=A?X:Y0(X,S);let ce=N;const ke=af([],[X.x,X.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ce*=ke[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ce*=x.cameraToCenterDistance/ke[3]),Pk(B,oe,ce))return!0}return!1}}function Y0(i,n){const s=af([],[i.x,i.y,0,1],n);return new L(s[0]/s[3],s[1]/s[3])}class J0 extends xy{}let Q0;dt("HeatmapBucket",J0,{omit:["layers"]});var Bk={get paint(){return Q0=Q0||new _({"heatmap-radius":new Mt(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mt(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ft(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lh(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ft(ze.paint_heatmap["heatmap-opacity"])})}};function Cy(i,{width:n,height:s},c,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*s*c)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*s*c}`)}else f=new Uint8Array(n*s*c);return i.width=n,i.height=s,i.data=f,i}function eb(i,{width:n,height:s},c){if(n===i.width&&s===i.height)return;const f=Cy({},{width:n,height:s},c);Ty(i,f,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,n),height:Math.min(i.height,s)},c),i.width=n,i.height=s,i.data=f.data}function Ty(i,n,s,c,f,v){if(f.width===0||f.height===0)return n;if(f.width>i.width||f.height>i.height||s.x>i.width-f.width||s.y>i.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||c.x>n.width-f.width||c.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=i.data,b=n.data;if(x===b)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<f.height;S++){const k=((s.y+S)*i.width+s.x)*v,E=((c.y+S)*n.width+c.x)*v;for(let A=0;A<f.width*v;A++)b[E+A]=x[k+A]}return n}class Nh{constructor(n,s){Cy(this,n,1,s)}resize(n){eb(this,n,1)}clone(){return new Nh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,c,f,v){Ty(n,s,c,f,v,1)}}class ro{constructor(n,s){Cy(this,n,4,s)}resize(n){eb(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ro({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,c,f,v){Ty(n,s,c,f,v,4)}}function tb(i){const n={},s=i.resolution||256,c=i.clips?i.clips.length:1,f=i.image||new ro({width:s,height:c});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,b,S)=>{n[i.evaluationKey]=S;const k=i.expression.evaluate(n);f.data[x+b+0]=Math.floor(255*k.r/k.a),f.data[x+b+1]=Math.floor(255*k.g/k.a),f.data[x+b+2]=Math.floor(255*k.b/k.a),f.data[x+b+3]=Math.floor(255*k.a)};if(i.clips)for(let x=0,b=0;x<c;++x,b+=4*s)for(let S=0,k=0;S<s;S++,k+=4){const E=S/(s-1),{start:A,end:B}=i.clips[x];v(b,k,A*(1-E)+B*E)}else for(let x=0,b=0;x<s;x++,b+=4)v(0,b,x/(s-1));return f}dt("AlphaImage",Nh),dt("RGBAImage",ro);const ky="big-fb";class Fk extends a{createBucket(n){return new J0(n)}constructor(n){super(n,Bk),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=tb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ky)&&this.heatmapFbos.delete(ky)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let rb;var Ok={get paint(){return rb=rb||new _({"hillshade-illumination-direction":new ft(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ft(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ft(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ft(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ft(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ft(ze.paint_hillshade["hillshade-accent-color"])})}};class $k extends a{constructor(n){super(n,Ok)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Nk=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:jk}=Nk;function nb(i,n,s=2){const c=n&&n.length,f=c?n[0]*s:i.length;let v=ib(i,0,f,s,!0);const x=[];if(!v||v.next===v.prev)return x;let b,S,k;if(c&&(v=function(E,A,B,N){const W=[];for(let X=0,oe=A.length;X<oe;X++){const ce=ib(E,A[X]*N,X<oe-1?A[X+1]*N:E.length,N,!1);ce===ce.next&&(ce.steiner=!0),W.push(Xk(ce))}W.sort(Hk);for(let X=0;X<W.length;X++)B=qk(W[X],B);return B}(i,n,v,s)),i.length>80*s){b=1/0,S=1/0;let E=-1/0,A=-1/0;for(let B=s;B<f;B+=s){const N=i[B],W=i[B+1];N<b&&(b=N),W<S&&(S=W),N>E&&(E=N),W>A&&(A=W)}k=Math.max(E-b,A-S),k=k!==0?32767/k:0}return jh(v,x,s,b,S,k,0),x}function ib(i,n,s,c,f){let v;if(f===function(x,b,S,k){let E=0;for(let A=b,B=S-k;A<S;A+=k)E+=(x[B]-x[A])*(x[A+1]+x[B+1]),B=A;return E}(i,n,s,c)>0)for(let x=n;x<s;x+=c)v=ab(x/c|0,i[x],i[x+1],v);else for(let x=s-c;x>=n;x-=c)v=ab(x/c|0,i[x],i[x+1],v);return v&&lf(v,v.next)&&(Uh(v),v=v.next),v}function Tl(i,n){if(!i)return i;n||(n=i);let s,c=i;do if(s=!1,c.steiner||!lf(c,c.next)&&sn(c.prev,c,c.next)!==0)c=c.next;else{if(Uh(c),c=n=c.prev,c===c.next)break;s=!0}while(s||c!==n);return n}function jh(i,n,s,c,f,v,x){if(!i)return;!x&&v&&function(S,k,E,A){let B=S;do B.z===0&&(B.z=Iy(B.x,B.y,k,E,A)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==S);B.prevZ.nextZ=null,B.prevZ=null,function(N){let W,X=1;do{let oe,ce=N;N=null;let ke=null;for(W=0;ce;){W++;let ye=ce,Ce=0;for(let He=0;He<X&&(Ce++,ye=ye.nextZ,ye);He++);let Fe=X;for(;Ce>0||Fe>0&&ye;)Ce!==0&&(Fe===0||!ye||ce.z<=ye.z)?(oe=ce,ce=ce.nextZ,Ce--):(oe=ye,ye=ye.nextZ,Fe--),ke?ke.nextZ=oe:N=oe,oe.prevZ=ke,ke=oe;ce=ye}ke.nextZ=null,X*=2}while(W>1)}(B)}(i,c,f,v);let b=i;for(;i.prev!==i.next;){const S=i.prev,k=i.next;if(v?Uk(i,c,f,v):Vk(i))n.push(S.i,i.i,k.i),Uh(i),i=k.next,b=k.next;else if((i=k)===b){x?x===1?jh(i=Wk(Tl(i),n),n,s,c,f,v,2):x===2&&Gk(i,n,s,c,f,v):jh(Tl(i),n,s,c,f,v,1);break}}}function Vk(i){const n=i.prev,s=i,c=i.next;if(sn(n,s,c)>=0)return!1;const f=n.x,v=s.x,x=c.x,b=n.y,S=s.y,k=c.y,E=f<v?f<x?f:x:v<x?v:x,A=b<S?b<k?b:k:S<k?S:k,B=f>v?f>x?f:x:v>x?v:x,N=b>S?b>k?b:k:S>k?S:k;let W=c.next;for(;W!==n;){if(W.x>=E&&W.x<=B&&W.y>=A&&W.y<=N&&Oc(f,b,v,S,x,k,W.x,W.y)&&sn(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function Uk(i,n,s,c){const f=i.prev,v=i,x=i.next;if(sn(f,v,x)>=0)return!1;const b=f.x,S=v.x,k=x.x,E=f.y,A=v.y,B=x.y,N=b<S?b<k?b:k:S<k?S:k,W=E<A?E<B?E:B:A<B?A:B,X=b>S?b>k?b:k:S>k?S:k,oe=E>A?E>B?E:B:A>B?A:B,ce=Iy(N,W,n,s,c),ke=Iy(X,oe,n,s,c);let ye=i.prevZ,Ce=i.nextZ;for(;ye&&ye.z>=ce&&Ce&&Ce.z<=ke;){if(ye.x>=N&&ye.x<=X&&ye.y>=W&&ye.y<=oe&&ye!==f&&ye!==x&&Oc(b,E,S,A,k,B,ye.x,ye.y)&&sn(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,Ce.x>=N&&Ce.x<=X&&Ce.y>=W&&Ce.y<=oe&&Ce!==f&&Ce!==x&&Oc(b,E,S,A,k,B,Ce.x,Ce.y)&&sn(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;ye&&ye.z>=ce;){if(ye.x>=N&&ye.x<=X&&ye.y>=W&&ye.y<=oe&&ye!==f&&ye!==x&&Oc(b,E,S,A,k,B,ye.x,ye.y)&&sn(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;Ce&&Ce.z<=ke;){if(Ce.x>=N&&Ce.x<=X&&Ce.y>=W&&Ce.y<=oe&&Ce!==f&&Ce!==x&&Oc(b,E,S,A,k,B,Ce.x,Ce.y)&&sn(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function Wk(i,n){let s=i;do{const c=s.prev,f=s.next.next;!lf(c,f)&&ob(c,s,s.next,f)&&Vh(c,f)&&Vh(f,c)&&(n.push(c.i,s.i,f.i),Uh(s),Uh(s.next),s=i=f),s=s.next}while(s!==i);return Tl(s)}function Gk(i,n,s,c,f,v){let x=i;do{let b=x.next.next;for(;b!==x.prev;){if(x.i!==b.i&&Kk(x,b)){let S=sb(x,b);return x=Tl(x,x.next),S=Tl(S,S.next),jh(x,n,s,c,f,v,0),void jh(S,n,s,c,f,v,0)}b=b.next}x=x.next}while(x!==i)}function Hk(i,n){return i.x-n.x}function qk(i,n){const s=function(f,v){let x=v;const b=f.x,S=f.y;let k,E=-1/0;do{if(S<=x.y&&S>=x.next.y&&x.next.y!==x.y){const X=x.x+(S-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(X<=b&&X>E&&(E=X,k=x.x<x.next.x?x:x.next,X===b))return k}x=x.next}while(x!==v);if(!k)return null;const A=k,B=k.x,N=k.y;let W=1/0;x=k;do{if(b>=x.x&&x.x>=B&&b!==x.x&&Oc(S<N?b:E,S,B,N,S<N?E:b,S,x.x,x.y)){const X=Math.abs(S-x.y)/(b-x.x);Vh(x,f)&&(X<W||X===W&&(x.x>k.x||x.x===k.x&&Zk(k,x)))&&(k=x,W=X)}x=x.next}while(x!==A);return k}(i,n);if(!s)return n;const c=sb(s,i);return Tl(c,c.next),Tl(s,s.next)}function Zk(i,n){return sn(i.prev,i,n.prev)<0&&sn(n.next,i,i.next)<0}function Iy(i,n,s,c,f){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-s)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-c)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Xk(i){let n=i,s=i;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==i);return s}function Oc(i,n,s,c,f,v,x,b){return(f-x)*(n-b)>=(i-x)*(v-b)&&(i-x)*(c-b)>=(s-x)*(n-b)&&(s-x)*(v-b)>=(f-x)*(c-b)}function Kk(i,n){return i.next.i!==n.i&&i.prev.i!==n.i&&!function(s,c){let f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==c.i&&f.next.i!==c.i&&ob(f,f.next,s,c))return!0;f=f.next}while(f!==s);return!1}(i,n)&&(Vh(i,n)&&Vh(n,i)&&function(s,c){let f=s,v=!1;const x=(s.x+c.x)/2,b=(s.y+c.y)/2;do f.y>b!=f.next.y>b&&f.next.y!==f.y&&x<(f.next.x-f.x)*(b-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==s);return v}(i,n)&&(sn(i.prev,i,n.prev)||sn(i,n.prev,n))||lf(i,n)&&sn(i.prev,i,i.next)>0&&sn(n.prev,n,n.next)>0)}function sn(i,n,s){return(n.y-i.y)*(s.x-n.x)-(n.x-i.x)*(s.y-n.y)}function lf(i,n){return i.x===n.x&&i.y===n.y}function ob(i,n,s,c){const f=uf(sn(i,n,s)),v=uf(sn(i,n,c)),x=uf(sn(s,c,i)),b=uf(sn(s,c,n));return f!==v&&x!==b||!(f!==0||!cf(i,s,n))||!(v!==0||!cf(i,c,n))||!(x!==0||!cf(s,i,c))||!(b!==0||!cf(s,n,c))}function cf(i,n,s){return n.x<=Math.max(i.x,s.x)&&n.x>=Math.min(i.x,s.x)&&n.y<=Math.max(i.y,s.y)&&n.y>=Math.min(i.y,s.y)}function uf(i){return i>0?1:i<0?-1:0}function Vh(i,n){return sn(i.prev,i,i.next)<0?sn(i,n,i.next)>=0&&sn(i,i.prev,n)>=0:sn(i,n,i.prev)<0||sn(i,i.next,n)<0}function sb(i,n){const s=Ey(i.i,i.x,i.y),c=Ey(n.i,n.x,n.y),f=i.next,v=n.prev;return i.next=n,n.prev=i,s.next=f,f.prev=s,c.next=s,s.prev=c,v.next=c,c.prev=v,c}function ab(i,n,s,c){const f=Ey(i,n,s);return c?(f.next=c.next,f.prev=c,c.next.prev=f,c.next=f):(f.prev=f,f.next=f),f}function Uh(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Ey(i,n,s){return{i,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Py(i,n,s){const c=s.patternDependencies;let f=!1;for(const v of n){const x=v.paint.get(`${i}-pattern`);x.isConstant()||(f=!0);const b=x.constantOr(null);b&&(f=!0,c[b.to]=!0,c[b.from]=!0)}return f}function My(i,n,s,c,f){const v=f.patternDependencies;for(const x of n){const b=x.paint.get(`${i}-pattern`).value;if(b.kind!=="constant"){let S=b.evaluate({zoom:c-1},s,{},f.availableImages),k=b.evaluate({zoom:c},s,{},f.availableImages),E=b.evaluate({zoom:c+1},s,{},f.availableImages);S=S&&S.name?S.name:S,k=k&&k.name?k.name:k,E=E&&E.name?E.name:E,v[S]=!0,v[k]=!0,v[E]=!0,s.patterns[x.id]={min:S,mid:k,max:E}}}return s}class Ay{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xo,this.indexArray=new to,this.indexArray2=new An,this.programConfigurations=new wl(n.layers,n.zoom),this.segments=new or,this.segments2=new or,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){this.hasPattern=Py("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:b,id:S,index:k,sourceLayerIndex:E}of n){const A=this.layers[0]._featureFilter.needGeometry,B=Cl(b,A);if(!this.layers[0]._featureFilter.filter(new Nr(this.zoom),B,c))continue;const N=v?f.evaluate(B,{},c,s.availableImages):void 0,W={id:S,properties:b.properties,type:b.type,sourceLayerIndex:E,index:k,geometry:A?B.geometry:Sl(b),patterns:{},sortKey:N};x.push(W)}v&&x.sort((b,S)=>b.sortKey-S.sortKey);for(const b of x){const{geometry:S,index:k,sourceLayerIndex:E}=b;if(this.hasPattern){const A=My("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(A)}else this.addFeature(b,S,k,c,{});s.featureIndex.insert(n[k].feature,S,k,E,this.index)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}addFeatures(n,s,c){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,jk),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,c,f,v){for(const x of lc(s,500)){let b=0;for(const N of x)b+=N.length;const S=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),k=S.vertexLength,E=[],A=[];for(const N of x){if(N.length===0)continue;N!==x[0]&&A.push(E.length/2);const W=this.segments2.prepareSegment(N.length,this.layoutVertexArray,this.indexArray2),X=W.vertexLength;this.layoutVertexArray.emplaceBack(N[0].x,N[0].y),this.indexArray2.emplaceBack(X+N.length-1,X),E.push(N[0].x),E.push(N[0].y);for(let oe=1;oe<N.length;oe++)this.layoutVertexArray.emplaceBack(N[oe].x,N[oe].y),this.indexArray2.emplaceBack(X+oe-1,X+oe),E.push(N[oe].x),E.push(N[oe].y);W.vertexLength+=N.length,W.primitiveLength+=N.length}const B=nb(E,A);for(let N=0;N<B.length;N+=3)this.indexArray.emplaceBack(k+B[N],k+B[N+1],k+B[N+2]);S.vertexLength+=b,S.primitiveLength+=B.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,f)}}let lb,cb;dt("FillBucket",Ay,{omit:["layers","patternFeatures"]});var Yk={get paint(){return cb=cb||new _({"fill-antialias":new ft(ze.paint_fill["fill-antialias"]),"fill-opacity":new Mt(ze.paint_fill["fill-opacity"]),"fill-color":new Mt(ze.paint_fill["fill-color"]),"fill-outline-color":new Mt(ze.paint_fill["fill-outline-color"]),"fill-translate":new ft(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new ft(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ec(ze.paint_fill["fill-pattern"])})},get layout(){return lb=lb||new _({"fill-sort-key":new Mt(ze.layout_fill["fill-sort-key"])})}};class Jk extends a{constructor(n){super(n,Yk)}recalculate(n,s){super.recalculate(n,s);const c=this.paint._values["fill-outline-color"];c.value.kind==="constant"&&c.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Ay(n)}queryRadius(){return of(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,c,f,v,x,b){return G0(sf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,b),f)}isTileClipped(){return!0}}const Qk=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),eI=w([{name:"a_centroid",components:2,type:"Int16"}],4),{members:tI}=Qk;var Ta={},rI=M,ub=$c;function $c(i,n,s,c,f){this.properties={},this.extent=s,this.type=0,this._pbf=i,this._geometry=-1,this._keys=c,this._values=f,i.readFields(nI,this,n)}function nI(i,n,s){i==1?n.id=s.readVarint():i==2?function(c,f){for(var v=c.readVarint()+c.pos;c.pos<v;){var x=f._keys[c.readVarint()],b=f._values[c.readVarint()];f.properties[x]=b}}(s,n):i==3?n.type=s.readVarint():i==4&&(n._geometry=s.pos)}function iI(i){for(var n,s,c=0,f=0,v=i.length,x=v-1;f<v;x=f++)c+=((s=i[x]).x-(n=i[f]).x)*(n.y+s.y);return c}$c.types=["Unknown","Point","LineString","Polygon"],$c.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var n,s=i.readVarint()+i.pos,c=1,f=0,v=0,x=0,b=[];i.pos<s;){if(f<=0){var S=i.readVarint();c=7&S,f=S>>3}if(f--,c===1||c===2)v+=i.readSVarint(),x+=i.readSVarint(),c===1&&(n&&b.push(n),n=[]),n.push(new rI(v,x));else{if(c!==7)throw new Error("unknown command "+c);n&&n.push(n[0].clone())}}return n&&b.push(n),b},$c.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var n=i.readVarint()+i.pos,s=1,c=0,f=0,v=0,x=1/0,b=-1/0,S=1/0,k=-1/0;i.pos<n;){if(c<=0){var E=i.readVarint();s=7&E,c=E>>3}if(c--,s===1||s===2)(f+=i.readSVarint())<x&&(x=f),f>b&&(b=f),(v+=i.readSVarint())<S&&(S=v),v>k&&(k=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,S,b,k]},$c.prototype.toGeoJSON=function(i,n,s){var c,f,v=this.extent*Math.pow(2,s),x=this.extent*i,b=this.extent*n,S=this.loadGeometry(),k=$c.types[this.type];function E(N){for(var W=0;W<N.length;W++){var X=N[W];N[W]=[360*(X.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+b)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(c=0;c<S.length;c++)A[c]=S[c][0];E(S=A);break;case 2:for(c=0;c<S.length;c++)E(S[c]);break;case 3:for(S=function(N){var W=N.length;if(W<=1)return[N];for(var X,oe,ce=[],ke=0;ke<W;ke++){var ye=iI(N[ke]);ye!==0&&(oe===void 0&&(oe=ye<0),oe===ye<0?(X&&ce.push(X),X=[N[ke]]):X.push(N[ke]))}return X&&ce.push(X),ce}(S),c=0;c<S.length;c++)for(f=0;f<S[c].length;f++)E(S[c][f])}S.length===1?S=S[0]:k="Multi"+k;var B={type:"Feature",geometry:{type:k,coordinates:S},properties:this.properties};return"id"in this&&(B.id=this.id),B};var oI=ub,hb=db;function db(i,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(sI,this,n),this.length=this._features.length}function sI(i,n,s){i===15?n.version=s.readVarint():i===1?n.name=s.readString():i===5?n.extent=s.readVarint():i===2?n._features.push(s.pos):i===3?n._keys.push(s.readString()):i===4&&n._values.push(function(c){for(var f=null,v=c.readVarint()+c.pos;c.pos<v;){var x=c.readVarint()>>3;f=x===1?c.readString():x===2?c.readFloat():x===3?c.readDouble():x===4?c.readVarint64():x===5?c.readVarint():x===6?c.readSVarint():x===7?c.readBoolean():null}return f}(s))}db.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var n=this._pbf.readVarint()+this._pbf.pos;return new oI(this._pbf,n,this.extent,this._keys,this._values)};var aI=hb;function lI(i,n,s){if(i===3){var c=new aI(s,s.readVarint()+s.pos);c.length&&(n[c.name]=c)}}Ta.VectorTile=function(i,n){this.layers=i.readFields(lI,{},n)},Ta.VectorTileFeature=ub,Ta.VectorTileLayer=hb;const cI=Ta.VectorTileFeature.types,zy=Math.pow(2,13);function Wh(i,n,s,c,f,v,x,b){i.emplaceBack(n,s,2*Math.floor(c*zy)+x,f*zy*2,v*zy*2,Math.round(b))}class Ry{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new va,this.centroidVertexArray=new On,this.indexArray=new to,this.programConfigurations=new wl(n.layers,n.zoom),this.segments=new or,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){this.features=[],this.hasPattern=Py("fill-extrusion",this.layers,s);for(const{feature:f,id:v,index:x,sourceLayerIndex:b}of n){const S=this.layers[0]._featureFilter.needGeometry,k=Cl(f,S);if(!this.layers[0]._featureFilter.filter(new Nr(this.zoom),k,c))continue;const E={id:v,sourceLayerIndex:b,index:x,geometry:S?k.geometry:Sl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(My("fill-extrusion",this.layers,E,this.zoom,s)):this.addFeature(E,E.geometry,x,c,{}),s.featureIndex.insert(f,E.geometry,x,b,this.index,!0)}}addFeatures(n,s,c){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,s,c)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,tI),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,eI.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,c,f,v){for(const x of lc(s,500)){const b={x:0,y:0,vertexCount:0};let S=0;for(const W of x)S+=W.length;let k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const W of x){if(W.length===0||hI(W))continue;let X=0;for(let oe=0;oe<W.length;oe++){const ce=W[oe];if(oe>=1){const ke=W[oe-1];if(!uI(ce,ke)){k.vertexLength+4>or.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ye=ce.sub(ke)._perp()._unit(),Ce=ke.dist(ce);X+Ce>32768&&(X=0),Wh(this.layoutVertexArray,ce.x,ce.y,ye.x,ye.y,0,0,X),Wh(this.layoutVertexArray,ce.x,ce.y,ye.x,ye.y,0,1,X),b.x+=2*ce.x,b.y+=2*ce.y,b.vertexCount+=2,X+=Ce,Wh(this.layoutVertexArray,ke.x,ke.y,ye.x,ye.y,0,0,X),Wh(this.layoutVertexArray,ke.x,ke.y,ye.x,ye.y,0,1,X),b.x+=2*ke.x,b.y+=2*ke.y,b.vertexCount+=2;const Fe=k.vertexLength;this.indexArray.emplaceBack(Fe,Fe+2,Fe+1),this.indexArray.emplaceBack(Fe+1,Fe+2,Fe+3),k.vertexLength+=4,k.primitiveLength+=2}}}}if(k.vertexLength+S>or.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),cI[n.type]!=="Polygon")continue;const E=[],A=[],B=k.vertexLength;for(const W of x)if(W.length!==0){W!==x[0]&&A.push(E.length/2);for(let X=0;X<W.length;X++){const oe=W[X];Wh(this.layoutVertexArray,oe.x,oe.y,0,0,1,1,0),b.x+=oe.x,b.y+=oe.y,b.vertexCount+=1,E.push(oe.x),E.push(oe.y)}}const N=nb(E,A);for(let W=0;W<N.length;W+=3)this.indexArray.emplaceBack(B+N[W],B+N[W+2],B+N[W+1]);k.primitiveLength+=N.length/3,k.vertexLength+=S;for(let W=0;W<b.vertexCount;W++){const X=Math.floor(b.x/b.vertexCount),oe=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(X,oe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,f)}}function uI(i,n){return i.x===n.x&&(i.x<0||i.x>fn)||i.y===n.y&&(i.y<0||i.y>fn)}function hI(i){return i.every(n=>n.x<0)||i.every(n=>n.x>fn)||i.every(n=>n.y<0)||i.every(n=>n.y>fn)}let pb;dt("FillExtrusionBucket",Ry,{omit:["layers","features"]});var dI={get paint(){return pb=pb||new _({"fill-extrusion-opacity":new ft(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mt(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ft(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ft(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ec(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mt(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mt(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ft(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class pI extends a{constructor(n){super(n,dI)}createBucket(n){return new Ry(n)}queryRadius(){return of(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,c,f,v,x,b,S){const k=sf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,b),E=this.paint.get("fill-extrusion-height").evaluate(s,c),A=this.paint.get("fill-extrusion-base").evaluate(s,c),B=function(W,X,oe,ce){const ke=[];for(const ye of W){const Ce=[ye.x,ye.y,0,1];af(Ce,Ce,X),ke.push(new L(Ce[0]/Ce[3],Ce[1]/Ce[3]))}return ke}(k,S),N=function(W,X,oe,ce){const ke=[],ye=[],Ce=ce[8]*X,Fe=ce[9]*X,He=ce[10]*X,lt=ce[11]*X,Et=ce[8]*oe,ot=ce[9]*oe,nt=ce[10]*oe,yt=ce[11]*oe;for(const pt of W){const ut=[],Ne=[];for(const vt of pt){const gt=vt.x,Bt=vt.y,Ar=ce[0]*gt+ce[4]*Bt+ce[12],Er=ce[1]*gt+ce[5]*Bt+ce[13],Sn=ce[2]*gt+ce[6]*Bt+ce[14],bo=ce[3]*gt+ce[7]*Bt+ce[15],jn=Sn+He,Cn=bo+lt,li=Ar+Et,ci=Er+ot,ui=Sn+nt,tn=bo+yt,Tn=new L((Ar+Ce)/Cn,(Er+Fe)/Cn);Tn.z=jn/Cn,ut.push(Tn);const Yn=new L(li/tn,ci/tn);Yn.z=ui/tn,Ne.push(Yn)}ke.push(ut),ye.push(Ne)}return[ke,ye]}(f,A,E,S);return function(W,X,oe){let ce=1/0;G0(oe,X)&&(ce=fb(oe,X[0]));for(let ke=0;ke<X.length;ke++){const ye=X[ke],Ce=W[ke];for(let Fe=0;Fe<ye.length-1;Fe++){const He=ye[Fe],lt=[He,ye[Fe+1],Ce[Fe+1],Ce[Fe],He];W0(oe,lt)&&(ce=Math.min(ce,fb(oe,lt)))}}return ce!==1/0&&ce}(N[0],N[1],B)}}function Gh(i,n){return i.x*n.x+i.y*n.y}function fb(i,n){if(i.length===1){let s=0;const c=n[s++];let f;for(;!f||c.equals(f);)if(f=n[s++],!f)return 1/0;for(;s<n.length;s++){const v=n[s],x=i[0],b=f.sub(c),S=v.sub(c),k=x.sub(c),E=Gh(b,b),A=Gh(b,S),B=Gh(S,S),N=Gh(k,b),W=Gh(k,S),X=E*B-A*A,oe=(B*N-A*W)/X,ce=(E*W-A*N)/X,ke=c.z*(1-oe-ce)+f.z*oe+v.z*ce;if(isFinite(ke))return ke}return 1/0}{let s=1/0;for(const c of n)s=Math.min(s,c.z);return s}}const fI=w([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:mI}=fI,gI=w([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:yI}=gI,_I=Ta.VectorTileFeature.types,vI=Math.cos(Math.PI/180*37.5),mb=Math.pow(2,14)/.5;class Dy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Mc,this.layoutVertexArray2=new xa,this.indexArray=new to,this.programConfigurations=new wl(n.layers,n.zoom),this.segments=new or,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){this.hasPattern=Py("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:b,id:S,index:k,sourceLayerIndex:E}of n){const A=this.layers[0]._featureFilter.needGeometry,B=Cl(b,A);if(!this.layers[0]._featureFilter.filter(new Nr(this.zoom),B,c))continue;const N=v?f.evaluate(B,{},c):void 0,W={id:S,properties:b.properties,type:b.type,sourceLayerIndex:E,index:k,geometry:A?B.geometry:Sl(b),patterns:{},sortKey:N};x.push(W)}v&&x.sort((b,S)=>b.sortKey-S.sortKey);for(const b of x){const{geometry:S,index:k,sourceLayerIndex:E}=b;if(this.hasPattern){const A=My("line",this.layers,b,this.zoom,s);this.patternFeatures.push(A)}else this.addFeature(b,S,k,c,{});s.featureIndex.insert(n[k].feature,S,k,E,this.index)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}addFeatures(n,s,c){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,yI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,mI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,c,f,v){const x=this.layers[0].layout,b=x.get("line-join").evaluate(n,{}),S=x.get("line-cap"),k=x.get("line-miter-limit"),E=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const A of s)this.addLine(A,n,b,S,k,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,f)}addLine(n,s,c,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ce=0;ce<n.length-1;ce++)this.totalDistance+=n[ce].dist(n[ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=_I[s.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let k=0;for(;k<S-1&&n[k].equals(n[k+1]);)k++;if(S<(b?3:2))return;c==="bevel"&&(v=1.05);const E=this.overscaling<=16?15*fn/(512*this.overscaling):0,A=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let B,N,W,X,oe;this.e1=this.e2=-1,b&&(B=n[S-2],oe=n[k].sub(B)._unit()._perp());for(let ce=k;ce<S;ce++){if(W=ce===S-1?b?n[k+1]:void 0:n[ce+1],W&&n[ce].equals(W))continue;oe&&(X=oe),B&&(N=B),B=n[ce],oe=W?W.sub(B)._unit()._perp():X,X=X||oe;let ke=X.add(oe);ke.x===0&&ke.y===0||ke._unit();const ye=X.x*oe.x+X.y*oe.y,Ce=ke.x*oe.x+ke.y*oe.y,Fe=Ce!==0?1/Ce:1/0,He=2*Math.sqrt(2-2*Ce),lt=Ce<vI&&N&&W,Et=X.x*oe.y-X.y*oe.x>0;if(lt&&ce>k){const yt=B.dist(N);if(yt>2*E){const pt=B.sub(B.sub(N)._mult(E/yt)._round());this.updateDistance(N,pt),this.addCurrentVertex(pt,X,0,0,A),N=pt}}const ot=N&&W;let nt=ot?c:b?"butt":f;if(ot&&nt==="round"&&(Fe<x?nt="miter":Fe<=2&&(nt="fakeround")),nt==="miter"&&Fe>v&&(nt="bevel"),nt==="bevel"&&(Fe>2&&(nt="flipbevel"),Fe<v&&(nt="miter")),N&&this.updateDistance(N,B),nt==="miter")ke._mult(Fe),this.addCurrentVertex(B,ke,0,0,A);else if(nt==="flipbevel"){if(Fe>100)ke=oe.mult(-1);else{const yt=Fe*X.add(oe).mag()/X.sub(oe).mag();ke._perp()._mult(yt*(Et?-1:1))}this.addCurrentVertex(B,ke,0,0,A),this.addCurrentVertex(B,ke.mult(-1),0,0,A)}else if(nt==="bevel"||nt==="fakeround"){const yt=-Math.sqrt(Fe*Fe-1),pt=Et?yt:0,ut=Et?0:yt;if(N&&this.addCurrentVertex(B,X,pt,ut,A),nt==="fakeround"){const Ne=Math.round(180*He/Math.PI/20);for(let vt=1;vt<Ne;vt++){let gt=vt/Ne;if(gt!==.5){const Ar=gt-.5;gt+=gt*Ar*(gt-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*Ar*Ar+(.848013+ye*(.215638*ye-1.06021)))}const Bt=oe.sub(X)._mult(gt)._add(X)._unit()._mult(Et?-1:1);this.addHalfVertex(B,Bt.x,Bt.y,!1,Et,0,A)}}W&&this.addCurrentVertex(B,oe,-pt,-ut,A)}else if(nt==="butt")this.addCurrentVertex(B,ke,0,0,A);else if(nt==="square"){const yt=N?1:-1;this.addCurrentVertex(B,ke,yt,yt,A)}else nt==="round"&&(N&&(this.addCurrentVertex(B,X,0,0,A),this.addCurrentVertex(B,X,1,1,A,!0)),W&&(this.addCurrentVertex(B,oe,-1,-1,A,!0),this.addCurrentVertex(B,oe,0,0,A)));if(lt&&ce<S-1){const yt=B.dist(W);if(yt>2*E){const pt=B.add(W.sub(B)._mult(E/yt)._round());this.updateDistance(B,pt),this.addCurrentVertex(pt,oe,0,0,A),B=pt}}}}addCurrentVertex(n,s,c,f,v,x=!1){const b=s.y*f-s.x,S=-s.y-s.x*f;this.addHalfVertex(n,s.x+s.y*c,s.y-s.x*c,x,!1,c,v),this.addHalfVertex(n,b,S,x,!0,-f,v),this.distance>mb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,c,f,v,x))}addHalfVertex({x:n,y:s},c,f,v,x,b,S){const k=.5*(this.lineClips?this.scaledDistance*(mb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*c)+128,Math.round(63*f)+128,1+(b===0?0:b<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const E=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,E),S.primitiveLength++),x?this.e2=E:this.e1=E}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let gb,yb;dt("LineBucket",Dy,{omit:["layers","patternFeatures"]});var _b={get paint(){return yb=yb||new _({"line-opacity":new Mt(ze.paint_line["line-opacity"]),"line-color":new Mt(ze.paint_line["line-color"]),"line-translate":new ft(ze.paint_line["line-translate"]),"line-translate-anchor":new ft(ze.paint_line["line-translate-anchor"]),"line-width":new Mt(ze.paint_line["line-width"]),"line-gap-width":new Mt(ze.paint_line["line-gap-width"]),"line-offset":new Mt(ze.paint_line["line-offset"]),"line-blur":new Mt(ze.paint_line["line-blur"]),"line-dasharray":new Pc(ze.paint_line["line-dasharray"]),"line-pattern":new Ec(ze.paint_line["line-pattern"]),"line-gradient":new Lh(ze.paint_line["line-gradient"])})},get layout(){return gb=gb||new _({"line-cap":new ft(ze.layout_line["line-cap"]),"line-join":new Mt(ze.layout_line["line-join"]),"line-miter-limit":new ft(ze.layout_line["line-miter-limit"]),"line-round-limit":new ft(ze.layout_line["line-round-limit"]),"line-sort-key":new Mt(ze.layout_line["line-sort-key"])})}};class xI extends Mt{possiblyEvaluate(n,s){return s=new Nr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,c,f){return s=_e({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,c,f)}}let hf;class bI extends a{constructor(n){super(n,_b),this.gradientVersion=0,hf||(hf=new xI(_b.paint.properties["line-width"].specification),hf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(c){return c._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof ta,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=hf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Dy(n)}queryRadius(n){const s=n,c=vb(Oh("line-width",this,s),Oh("line-gap-width",this,s)),f=Oh("line-offset",this,s);return c/2+Math.abs(f)+of(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,c,f,v,x,b){const S=sf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,b),k=b/2*vb(this.paint.get("line-width").evaluate(s,c),this.paint.get("line-gap-width").evaluate(s,c)),E=this.paint.get("line-offset").evaluate(s,c);return E&&(f=function(A,B){const N=[];for(let W=0;W<A.length;W++){const X=A[W],oe=[];for(let ce=0;ce<X.length;ce++){const ke=X[ce-1],ye=X[ce],Ce=X[ce+1],Fe=ce===0?new L(0,0):ye.sub(ke)._unit()._perp(),He=ce===X.length-1?new L(0,0):Ce.sub(ye)._unit()._perp(),lt=Fe._add(He)._unit(),Et=lt.x*He.x+lt.y*He.y;Et!==0&&lt._mult(1/Et),oe.push(lt._mult(B)._add(ye))}N.push(oe)}return N}(f,E*b)),function(A,B,N){for(let W=0;W<B.length;W++){const X=B[W];if(A.length>=3){for(let oe=0;oe<X.length;oe++)if(Bc(A,X[oe]))return!0}if(Mk(A,X,N))return!0}return!1}(S,f,k)}isTileClipped(){return!0}}function vb(i,n){return n>0?n+2*i:i}const wI=w([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),SI=w([{name:"a_projected_pos",components:3,type:"Float32"}],4);w([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const CI=w([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);w([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const xb=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),TI=w([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function kI(i,n,s){return i.sections.forEach(c=>{c.text=function(f,v,x){const b=v.layout.get("text-transform").evaluate(x,{});return b==="uppercase"?f=f.toLocaleUpperCase():b==="lowercase"&&(f=f.toLocaleLowerCase()),Si.applyArabicShaping&&(f=Si.applyArabicShaping(f)),f}(c.text,n,s)}),i}w([{name:"triangle",components:3,type:"Uint16"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),w([{type:"Float32",name:"offsetX"}]),w([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),w([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Hh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var vn=24,bb=Ir,wb=function(i,n,s,c,f){var v,x,b=8*f-c-1,S=(1<<b)-1,k=S>>1,E=-7,A=f-1,B=-1,N=i[n+A];for(A+=B,v=N&(1<<-E)-1,N>>=-E,E+=b;E>0;v=256*v+i[n+A],A+=B,E-=8);for(x=v&(1<<-E)-1,v>>=-E,E+=c;E>0;x=256*x+i[n+A],A+=B,E-=8);if(v===0)v=1-k;else{if(v===S)return x?NaN:1/0*(N?-1:1);x+=Math.pow(2,c),v-=k}return(N?-1:1)*x*Math.pow(2,v-c)},Sb=function(i,n,s,c,f,v){var x,b,S,k=8*v-f-1,E=(1<<k)-1,A=E>>1,B=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=0,W=1,X=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,x=E):(x=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-x))<1&&(x--,S*=2),(n+=x+A>=1?B/S:B*Math.pow(2,1-A))*S>=2&&(x++,S/=2),x+A>=E?(b=0,x=E):x+A>=1?(b=(n*S-1)*Math.pow(2,f),x+=A):(b=n*Math.pow(2,A-1)*Math.pow(2,f),x=0));f>=8;i[s+N]=255&b,N+=W,b/=256,f-=8);for(x=x<<f|b,k+=f;k>0;i[s+N]=255&x,N+=W,x/=256,k-=8);i[s+N-W]|=128*X};function Ir(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Ir.Varint=0,Ir.Fixed64=1,Ir.Bytes=2,Ir.Fixed32=5;var Ly=4294967296,Cb=1/Ly,Tb=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Ds(i){return i.type===Ir.Bytes?i.readVarint()+i.pos:i.pos+1}function Nc(i,n,s){return s?4294967296*n+(i>>>0):4294967296*(n>>>0)+(i>>>0)}function kb(i,n,s){var c=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(c);for(var f=s.pos-1;f>=i;f--)s.buf[f+c]=s.buf[f]}function II(i,n){for(var s=0;s<i.length;s++)n.writeVarint(i[s])}function EI(i,n){for(var s=0;s<i.length;s++)n.writeSVarint(i[s])}function PI(i,n){for(var s=0;s<i.length;s++)n.writeFloat(i[s])}function MI(i,n){for(var s=0;s<i.length;s++)n.writeDouble(i[s])}function AI(i,n){for(var s=0;s<i.length;s++)n.writeBoolean(i[s])}function zI(i,n){for(var s=0;s<i.length;s++)n.writeFixed32(i[s])}function RI(i,n){for(var s=0;s<i.length;s++)n.writeSFixed32(i[s])}function DI(i,n){for(var s=0;s<i.length;s++)n.writeFixed64(i[s])}function LI(i,n){for(var s=0;s<i.length;s++)n.writeSFixed64(i[s])}function df(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+16777216*i[n+3]}function jc(i,n,s){i[s]=n,i[s+1]=n>>>8,i[s+2]=n>>>16,i[s+3]=n>>>24}function Ib(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+(i[n+3]<<24)}Ir.prototype={destroy:function(){this.buf=null},readFields:function(i,n,s){for(s=s||this.length;this.pos<s;){var c=this.readVarint(),f=c>>3,v=this.pos;this.type=7&c,i(f,n,this),this.pos===v&&this.skip(c)}return n},readMessage:function(i,n){return this.readFields(i,n,this.readVarint()+this.pos)},readFixed32:function(){var i=df(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Ib(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=df(this.buf,this.pos)+df(this.buf,this.pos+4)*Ly;return this.pos+=8,i},readSFixed64:function(){var i=df(this.buf,this.pos)+Ib(this.buf,this.pos+4)*Ly;return this.pos+=8,i},readFloat:function(){var i=wb(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=wb(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var n,s,c=this.buf;return n=127&(s=c[this.pos++]),s<128?n:(n|=(127&(s=c[this.pos++]))<<7,s<128?n:(n|=(127&(s=c[this.pos++]))<<14,s<128?n:(n|=(127&(s=c[this.pos++]))<<21,s<128?n:function(f,v,x){var b,S,k=x.buf;if(b=(112&(S=k[x.pos++]))>>4,S<128||(b|=(127&(S=k[x.pos++]))<<3,S<128)||(b|=(127&(S=k[x.pos++]))<<10,S<128)||(b|=(127&(S=k[x.pos++]))<<17,S<128)||(b|=(127&(S=k[x.pos++]))<<24,S<128)||(b|=(1&(S=k[x.pos++]))<<31,S<128))return Nc(f,b,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=c[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=12&&Tb?function(s,c,f){return Tb.decode(s.subarray(c,f))}(this.buf,n,i):function(s,c,f){for(var v="",x=c;x<f;){var b,S,k,E=s[x],A=null,B=E>239?4:E>223?3:E>191?2:1;if(x+B>f)break;B===1?E<128&&(A=E):B===2?(192&(b=s[x+1]))==128&&(A=(31&E)<<6|63&b)<=127&&(A=null):B===3?(S=s[x+2],(192&(b=s[x+1]))==128&&(192&S)==128&&((A=(15&E)<<12|(63&b)<<6|63&S)<=2047||A>=55296&&A<=57343)&&(A=null)):B===4&&(S=s[x+2],k=s[x+3],(192&(b=s[x+1]))==128&&(192&S)==128&&(192&k)==128&&((A=(15&E)<<18|(63&b)<<12|(63&S)<<6|63&k)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,B=1):A>65535&&(A-=65536,v+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),v+=String.fromCharCode(A),x+=B}return v}(this.buf,n,i)},readBytes:function(){var i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n},readPackedVarint:function(i,n){if(this.type!==Ir.Bytes)return i.push(this.readVarint(n));var s=Ds(this);for(i=i||[];this.pos<s;)i.push(this.readVarint(n));return i},readPackedSVarint:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSVarint());var n=Ds(this);for(i=i||[];this.pos<n;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Ir.Bytes)return i.push(this.readBoolean());var n=Ds(this);for(i=i||[];this.pos<n;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFloat());var n=Ds(this);for(i=i||[];this.pos<n;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Ir.Bytes)return i.push(this.readDouble());var n=Ds(this);for(i=i||[];this.pos<n;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFixed32());var n=Ds(this);for(i=i||[];this.pos<n;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSFixed32());var n=Ds(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Ir.Bytes)return i.push(this.readFixed64());var n=Ds(this);for(i=i||[];this.pos<n;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Ir.Bytes)return i.push(this.readSFixed64());var n=Ds(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed64());return i},skip:function(i){var n=7&i;if(n===Ir.Varint)for(;this.buf[this.pos++]>127;);else if(n===Ir.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Ir.Fixed32)this.pos+=4;else{if(n!==Ir.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(i,n){this.writeVarint(i<<3|n)},realloc:function(i){for(var n=this.length||16;n<this.pos+i;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),jc(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),jc(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),jc(this.buf,-1&i,this.pos),jc(this.buf,Math.floor(i*Cb),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),jc(this.buf,-1&i,this.pos),jc(this.buf,Math.floor(i*Cb),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(n,s){var c,f;if(n>=0?(c=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(c=~(-n%4294967296))?c=c+1|0:(c=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,b){b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,b.buf[b.pos]=127&(v>>>=7)}(c,0,s),function(v,x){var b=(7&v)<<4;x.buf[x.pos++]|=b|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,s)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var n=this.pos;this.pos=function(c,f,v){for(var x,b,S=0;S<f.length;S++){if((x=f.charCodeAt(S))>55295&&x<57344){if(!b){x>56319||S+1===f.length?(c[v++]=239,c[v++]=191,c[v++]=189):b=x;continue}if(x<56320){c[v++]=239,c[v++]=191,c[v++]=189,b=x;continue}x=b-55296<<10|x-56320|65536,b=null}else b&&(c[v++]=239,c[v++]=191,c[v++]=189,b=null);x<128?c[v++]=x:(x<2048?c[v++]=x>>6|192:(x<65536?c[v++]=x>>12|224:(c[v++]=x>>18|240,c[v++]=x>>12&63|128),c[v++]=x>>6&63|128),c[v++]=63&x|128)}return v}(this.buf,i,this.pos);var s=this.pos-n;s>=128&&kb(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(i){this.realloc(4),Sb(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Sb(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var n=i.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=i[s]},writeRawMessage:function(i,n){this.pos++;var s=this.pos;i(n,this);var c=this.pos-s;c>=128&&kb(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeMessage:function(i,n,s){this.writeTag(i,Ir.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(i,n){n.length&&this.writeMessage(i,II,n)},writePackedSVarint:function(i,n){n.length&&this.writeMessage(i,EI,n)},writePackedBoolean:function(i,n){n.length&&this.writeMessage(i,AI,n)},writePackedFloat:function(i,n){n.length&&this.writeMessage(i,PI,n)},writePackedDouble:function(i,n){n.length&&this.writeMessage(i,MI,n)},writePackedFixed32:function(i,n){n.length&&this.writeMessage(i,zI,n)},writePackedSFixed32:function(i,n){n.length&&this.writeMessage(i,RI,n)},writePackedFixed64:function(i,n){n.length&&this.writeMessage(i,DI,n)},writePackedSFixed64:function(i,n){n.length&&this.writeMessage(i,LI,n)},writeBytesField:function(i,n){this.writeTag(i,Ir.Bytes),this.writeBytes(n)},writeFixed32Field:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeSFixed64(n)},writeVarintField:function(i,n){this.writeTag(i,Ir.Varint),this.writeVarint(n)},writeSVarintField:function(i,n){this.writeTag(i,Ir.Varint),this.writeSVarint(n)},writeStringField:function(i,n){this.writeTag(i,Ir.Bytes),this.writeString(n)},writeFloatField:function(i,n){this.writeTag(i,Ir.Fixed32),this.writeFloat(n)},writeDoubleField:function(i,n){this.writeTag(i,Ir.Fixed64),this.writeDouble(n)},writeBooleanField:function(i,n){this.writeVarintField(i,!!n)}};var By=I(bb);const Fy=3;function BI(i,n,s){i===1&&s.readMessage(FI,n)}function FI(i,n,s){if(i===3){const{id:c,bitmap:f,width:v,height:x,left:b,top:S,advance:k}=s.readMessage(OI,{});n.push({id:c,bitmap:new Nh({width:v+2*Fy,height:x+2*Fy},f),metrics:{width:v,height:x,left:b,top:S,advance:k}})}}function OI(i,n,s){i===1?n.id=s.readVarint():i===2?n.bitmap=s.readBytes():i===3?n.width=s.readVarint():i===4?n.height=s.readVarint():i===5?n.left=s.readSVarint():i===6?n.top=s.readSVarint():i===7&&(n.advance=s.readVarint())}const Eb=Fy;function Pb(i){let n=0,s=0;for(const x of i)n+=x.w*x.h,s=Math.max(s,x.w);i.sort((x,b)=>b.h-x.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let f=0,v=0;for(const x of i)for(let b=c.length-1;b>=0;b--){const S=c[b];if(!(x.w>S.w||x.h>S.h)){if(x.x=S.x,x.y=S.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===S.w&&x.h===S.h){const k=c.pop();b<c.length&&(c[b]=k)}else x.h===S.h?(S.x+=x.w,S.w-=x.w):x.w===S.w?(S.y+=x.h,S.h-=x.h):(c.push({x:S.x+x.w,y:S.y,w:S.w-x.w,h:x.h}),S.y+=x.h,S.h-=x.h);break}}return{w:f,h:v,fill:n/(f*v)||0}}const Ti=1;class Oy{constructor(n,{pixelRatio:s,version:c,stretchX:f,stretchY:v,content:x,textFitWidth:b,textFitHeight:S}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=f,this.stretchY=v,this.content=x,this.version=c,this.textFitWidth=b,this.textFitHeight=S}get tl(){return[this.paddedRect.x+Ti,this.paddedRect.y+Ti]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ti,this.paddedRect.y+this.paddedRect.h-Ti]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ti)/this.pixelRatio,(this.paddedRect.h-2*Ti)/this.pixelRatio]}}class Mb{constructor(n,s){const c={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,c,v),this.addImages(s,f,v);const{w:x,h:b}=Pb(v),S=new ro({width:x||1,height:b||1});for(const k in n){const E=n[k],A=c[k].paddedRect;ro.copy(E.data,S,{x:0,y:0},{x:A.x+Ti,y:A.y+Ti},E.data)}for(const k in s){const E=s[k],A=f[k].paddedRect,B=A.x+Ti,N=A.y+Ti,W=E.data.width,X=E.data.height;ro.copy(E.data,S,{x:0,y:0},{x:B,y:N},E.data),ro.copy(E.data,S,{x:0,y:X-1},{x:B,y:N-1},{width:W,height:1}),ro.copy(E.data,S,{x:0,y:0},{x:B,y:N+X},{width:W,height:1}),ro.copy(E.data,S,{x:W-1,y:0},{x:B-1,y:N},{width:1,height:X}),ro.copy(E.data,S,{x:0,y:0},{x:B+W,y:N},{width:1,height:X})}this.image=S,this.iconPositions=c,this.patternPositions=f}addImages(n,s,c){for(const f in n){const v=n[f],x={x:0,y:0,w:v.data.width+2*Ti,h:v.data.height+2*Ti};c.push(x),s[f]=new Oy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in n.updatedImages)this.patchUpdatedImage(this.iconPositions[c],n.getImage(c),s),this.patchUpdatedImage(this.patternPositions[c],n.getImage(c),s)}patchUpdatedImage(n,s,c){if(!n||!s||n.version===s.version)return;n.version=s.version;const[f,v]=n.tl;c.update(s.data,void 0,{x:f,y:v})}}var ka;dt("ImagePosition",Oy),dt("ImageAtlas",Mb),g.ah=void 0,(ka=g.ah||(g.ah={}))[ka.none=0]="none",ka[ka.horizontal=1]="horizontal",ka[ka.vertical=2]="vertical",ka[ka.horizontalOnly=3]="horizontalOnly";const qh=-17;class Zh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const c=new Zh;return c.scale=n||1,c.fontStack=s,c}static forImage(n){const s=new Zh;return s.imageName=n,s}}class Vc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const c=new Vc;for(let f=0;f<n.sections.length;f++){const v=n.sections[f];v.image?c.addImageSection(v):c.addTextSection(v,s)}return c}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let c=0;c<n.length;c++){const f=n.charCodeAt(c+1)||null,v=n.charCodeAt(c-1)||null;s+=f&&Yp(f)&&!Hh[n[c+1]]||v&&Yp(v)&&!Hh[n[c-1]]||!Hh[n[c]]?n[c]:Hh[n[c]]}return s}(this.text)}trim(){let n=0;for(let c=0;c<this.text.length&&ff[this.text.charCodeAt(c)];c++)n++;let s=this.text.length;for(let c=this.text.length-1;c>=0&&c>=n&&ff[this.text.charCodeAt(c)];c--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const c=new Vc;return c.text=this.text.substring(n,s),c.sectionIndex=this.sectionIndex.slice(n,s),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Zh.forText(n.scale,n.fontStack||s));const c=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(c)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Me("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(Zh.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Me("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function pf(i,n,s,c,f,v,x,b,S,k,E,A,B,N,W){const X=Vc.fromFeature(i,f);let oe;A===g.ah.vertical&&X.verticalizePunctuation();const{processBidirectionalText:ce,processStyledBidirectionalText:ke}=Si;if(ce&&X.sections.length===1){oe=[];const Fe=ce(X.toString(),$y(X,k,v,n,c,N));for(const He of Fe){const lt=new Vc;lt.text=He,lt.sections=X.sections;for(let Et=0;Et<He.length;Et++)lt.sectionIndex.push(0);oe.push(lt)}}else if(ke){oe=[];const Fe=ke(X.text,X.sectionIndex,$y(X,k,v,n,c,N));for(const He of Fe){const lt=new Vc;lt.text=He[0],lt.sectionIndex=He[1],lt.sections=X.sections,oe.push(lt)}}else oe=function(Fe,He){const lt=[],Et=Fe.text;let ot=0;for(const nt of He)lt.push(Fe.substring(ot,nt)),ot=nt;return ot<Et.length&&lt.push(Fe.substring(ot,Et.length)),lt}(X,$y(X,k,v,n,c,N));const ye=[],Ce={positionedLines:ye,text:X.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:A,iconsInText:!1,verticalizable:!1};return function(Fe,He,lt,Et,ot,nt,yt,pt,ut,Ne,vt,gt){let Bt=0,Ar=qh,Er=0,Sn=0;const bo=pt==="right"?1:pt==="left"?0:.5;let jn=0;for(const tn of ot){tn.trim();const Tn=tn.getMaxScale(),Yn=(Tn-1)*vn,Vn={positionedGlyphs:[],lineOffset:0};Fe.positionedLines[jn]=Vn;const hi=Vn.positionedGlyphs;let Un=0;if(!tn.length()){Ar+=nt,++jn;continue}for(let ki=0;ki<tn.length();ki++){const gr=tn.getSection(ki),Rr=tn.getSectionIndex(ki),Wr=tn.getCharCode(ki);let Vi=0,Kr=null,Hc=null,ns=null,is=vn;const wo=!(ut===g.ah.horizontal||!vt&&!Rh(Wr)||vt&&(ff[Wr]||(Cn=Wr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Cn)))));if(gr.imageName){const oo=Et[gr.imageName];if(!oo)continue;ns=gr.imageName,Fe.iconsInText=Fe.iconsInText||!0,Hc=oo.paddedRect;const zn=oo.displaySize;gr.scale=gr.scale*vn/gt,Kr={width:zn[0],height:zn[1],left:Ti,top:-Eb,advance:wo?zn[1]:zn[0]},Vi=Yn+(vn-zn[1]*gr.scale),is=Kr.advance;const Ls=wo?zn[0]*gr.scale-vn*Tn:zn[1]*gr.scale-vn*Tn;Ls>0&&Ls>Un&&(Un=Ls)}else{const oo=lt[gr.fontStack],zn=oo&&oo[Wr];if(zn&&zn.rect)Hc=zn.rect,Kr=zn.metrics;else{const Ls=He[gr.fontStack],ed=Ls&&Ls[Wr];if(!ed)continue;Kr=ed.metrics}Vi=(Tn-gr.scale)*vn}wo?(Fe.verticalizable=!0,hi.push({glyph:Wr,imageName:ns,x:Bt,y:Ar+Vi,vertical:wo,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:Rr,metrics:Kr,rect:Hc}),Bt+=is*gr.scale+Ne):(hi.push({glyph:Wr,imageName:ns,x:Bt,y:Ar+Vi,vertical:wo,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:Rr,metrics:Kr,rect:Hc}),Bt+=Kr.advance*gr.scale+Ne)}hi.length!==0&&(Er=Math.max(Bt-Ne,Er),VI(hi,0,hi.length-1,bo,Un)),Bt=0;const io=nt*Tn+Un;Vn.lineOffset=Math.max(Un,Yn),Ar+=io,Sn=Math.max(io,Sn),++jn}var Cn;const li=Ar-qh,{horizontalAlign:ci,verticalAlign:ui}=Ny(yt);(function(tn,Tn,Yn,Vn,hi,Un,io,ki,gr){const Rr=(Tn-Yn)*hi;let Wr=0;Wr=Un!==io?-ki*Vn-qh:(-Vn*gr+.5)*io;for(const Vi of tn)for(const Kr of Vi.positionedGlyphs)Kr.x+=Rr,Kr.y+=Wr})(Fe.positionedLines,bo,ci,ui,Er,Sn,nt,li,ot.length),Fe.top+=-ui*li,Fe.bottom=Fe.top+li,Fe.left+=-ci*Er,Fe.right=Fe.left+Er}(Ce,n,s,c,oe,x,b,S,A,k,B,W),!function(Fe){for(const He of Fe)if(He.positionedGlyphs.length!==0)return!1;return!0}(ye)&&Ce}const ff={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$I={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},NI={40:!0};function Ab(i,n,s,c,f,v){if(n.imageName){const x=c[n.imageName];return x?x.displaySize[0]*n.scale*vn/v+f:0}{const x=s[n.fontStack],b=x&&x[i];return b?b.metrics.advance*n.scale+f:0}}function zb(i,n,s,c){const f=Math.pow(i-n,2);return c?i<n?f/2:2*f:f+Math.abs(s)*s}function jI(i,n,s){let c=0;return i===10&&(c-=1e4),s&&(c+=150),i!==40&&i!==65288||(c+=50),n!==41&&n!==65289||(c+=50),c}function Rb(i,n,s,c,f,v){let x=null,b=zb(n,s,f,v);for(const S of c){const k=zb(n-S.x,s,f,v)+S.badness;k<=b&&(x=S,b=k)}return{index:i,x:n,priorBreak:x,badness:b}}function Db(i){return i?Db(i.priorBreak).concat(i.index):[]}function $y(i,n,s,c,f,v){if(!i)return[];const x=[],b=function(A,B,N,W,X,oe){let ce=0;for(let ke=0;ke<A.length();ke++){const ye=A.getSection(ke);ce+=Ab(A.getCharCode(ke),ye,W,X,B,oe)}return ce/Math.max(1,Math.ceil(ce/N))}(i,n,s,c,f,v),S=i.text.indexOf("")>=0;let k=0;for(let A=0;A<i.length();A++){const B=i.getSection(A),N=i.getCharCode(A);if(ff[N]||(k+=Ab(N,B,c,f,n,v)),A<i.length()-1){const W=!((E=N)<11904)&&(!!ir["CJK Compatibility Forms"](E)||!!ir["CJK Compatibility"](E)||!!ir["CJK Strokes"](E)||!!ir["CJK Symbols and Punctuation"](E)||!!ir["Enclosed CJK Letters and Months"](E)||!!ir["Halfwidth and Fullwidth Forms"](E)||!!ir["Ideographic Description Characters"](E)||!!ir["Vertical Forms"](E)||Kp.test(String.fromCodePoint(E)));($I[N]||W||B.imageName||A!==i.length()-2&&NI[i.getCharCode(A+1)])&&x.push(Rb(A+1,k,b,x,jI(N,i.getCharCode(A+1),W&&S),!1))}}var E;return Db(Rb(i.length(),k,b,x,0,!0))}function Ny(i){let n=.5,s=.5;switch(i){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function VI(i,n,s,c,f){if(!c&&!f)return;const v=i[s],x=(i[s].x+v.metrics.advance*v.scale)*c;for(let b=n;b<=s;b++)i[b].x-=x,i[b].y+=f}function UI(i,n,s){const{horizontalAlign:c,verticalAlign:f}=Ny(s),v=n[0]-i.displaySize[0]*c,x=n[1]-i.displaySize[1]*f;return{image:i,top:x,bottom:x+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function Lb(i){var n,s;let c=i.left,f=i.top,v=i.right-c,x=i.bottom-f;const b=(n=i.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",S=(s=i.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",k=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(S==="proportional"){if(b==="stretchOnly"&&v/x<k||b==="proportional"){const E=Math.ceil(x*k);c*=E/v,v=E}}else if(b==="proportional"&&S==="stretchOnly"&&k!==0&&v/x>k){const E=Math.ceil(v/k);f*=E/x,x=E}return{x1:c,y1:f,x2:c+v,y2:f+x}}function Bb(i,n,s,c,f,v){const x=i.image;let b;if(x.content){const oe=x.content,ce=x.pixelRatio||1;b=[oe[0]/ce,oe[1]/ce,x.displaySize[0]-oe[2]/ce,x.displaySize[1]-oe[3]/ce]}const S=n.left*v,k=n.right*v;let E,A,B,N;s==="width"||s==="both"?(N=f[0]+S-c[3],A=f[0]+k+c[1]):(N=f[0]+(S+k-x.displaySize[0])/2,A=N+x.displaySize[0]);const W=n.top*v,X=n.bottom*v;return s==="height"||s==="both"?(E=f[1]+W-c[0],B=f[1]+X+c[2]):(E=f[1]+(W+X-x.displaySize[1])/2,B=E+x.displaySize[1]),{image:x,top:E,right:A,bottom:B,left:N,collisionPadding:b}}const Xh=255,rs=128,Ia=Xh*rs;function Fb(i,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Nr(i+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:f}=s;let v=0;for(;v<c.length&&c[v]<=i;)v++;v=Math.max(0,v-1);let x=v;for(;x<c.length&&c[x]<i+1;)x++;x=Math.min(c.length-1,x);const b=c[v],S=c[x];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:S,interpolationType:f}:{kind:"camera",minZoom:b,maxZoom:S,minSize:s.evaluate(new Nr(b)),maxSize:s.evaluate(new Nr(S)),interpolationType:f}}}function jy(i,n,s){let c="never";const f=i.get(n);return f?c=f:i.get(s)&&(c="always"),c}const WI=Ta.VectorTileFeature.types,GI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function mf(i,n,s,c,f,v,x,b,S,k,E,A,B){const N=b?Math.min(Ia,Math.round(b[0])):0,W=b?Math.min(Ia,Math.round(b[1])):0;i.emplaceBack(n,s,Math.round(32*c),Math.round(32*f),v,x,(N<<1)+(S?1:0),W,16*k,16*E,256*A,256*B)}function Vy(i,n,s){i.emplaceBack(n.x,n.y,s),i.emplaceBack(n.x,n.y,s),i.emplaceBack(n.x,n.y,s),i.emplaceBack(n.x,n.y,s)}function HI(i){for(const n of i.sections)if(gy(n.text))return!0;return!1}class Uy{constructor(n){this.layoutVertexArray=new Ac,this.indexArray=new to,this.programConfigurations=n,this.segments=new or,this.dynamicLayoutVertexArray=new Bh,this.opacityVertexArray=new Ni,this.hasVisibleVertices=!1,this.placedSymbolArray=new jr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,c,f){this.isEmpty()||(c&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,wI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,SI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,GI,!0),this.opacityVertexBuffer.itemSize=1),(c||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}dt("SymbolBuffers",Uy);class Wy{constructor(n,s,c){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new c,this.segments=new or,this.collisionVertexArray=new es}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,CI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}dt("CollisionBuffers",Wy);class Uc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Sy([]),this.placementViewportMatrix=Sy([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fb(this.zoom,s["text-size"]),this.iconSizeData=Fb(this.zoom,s["icon-size"]);const c=this.layers[0].layout,f=c.get("symbol-sort-key"),v=c.get("symbol-z-order");this.canOverlap=jy(c,"text-overlap","text-allow-overlap")!=="never"||jy(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(x=>g.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Uy(new wl(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Uy(new wl(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Vr,this.lineVertexArray=new Fn,this.symbolInstances=new rr,this.textAnchorOffsets=new Ur}calculateGlyphDependencies(n,s,c,f,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(c||f)&&v){const b=Hh[n.charAt(x)];b&&(s[b.charCodeAt(0)]=!0)}}populate(n,s,c){const f=this.layers[0],v=f.layout,x=v.get("text-font"),b=v.get("text-field"),S=v.get("icon-image"),k=(b.value.kind!=="constant"||b.value.value instanceof vi&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),E=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,A=v.get("symbol-sort-key");if(this.features=[],!k&&!E)return;const B=s.iconDependencies,N=s.glyphDependencies,W=s.availableImages,X=new Nr(this.zoom);for(const{feature:oe,id:ce,index:ke,sourceLayerIndex:ye}of n){const Ce=f._featureFilter.needGeometry,Fe=Cl(oe,Ce);if(!f._featureFilter.filter(X,Fe,c))continue;let He,lt;if(Ce||(Fe.geometry=Sl(oe)),k){const ot=f.getValueAndResolveTokens("text-field",Fe,c,W),nt=vi.factory(ot),yt=this.hasRTLText=this.hasRTLText||HI(nt);(!yt||Si.getRTLTextPluginStatus()==="unavailable"||yt&&Si.isParsed())&&(He=kI(nt,f,Fe))}if(E){const ot=f.getValueAndResolveTokens("icon-image",Fe,c,W);lt=ot instanceof bi?ot:bi.fromString(ot)}if(!He&&!lt)continue;const Et=this.sortFeaturesByKey?A.evaluate(Fe,{},c):void 0;if(this.features.push({id:ce,text:He,icon:lt,index:ke,sourceLayerIndex:ye,geometry:Fe.geometry,properties:oe.properties,type:WI[oe.type],sortKey:Et}),lt&&(B[lt.name]=!0),He){const ot=x.evaluate(Fe,{},c).join(","),nt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.ah.vertical)>=0;for(const yt of He.sections)if(yt.image)B[yt.image.name]=!0;else{const pt=Ah(He.toString()),ut=yt.fontStack||ot,Ne=N[ut]=N[ut]||{};this.calculateGlyphDependencies(yt.text,Ne,nt,this.allowVerticalPlacement,pt)}}}v.get("symbol-placement")==="line"&&(this.features=function(oe){const ce={},ke={},ye=[];let Ce=0;function Fe(ot){ye.push(oe[ot]),Ce++}function He(ot,nt,yt){const pt=ke[ot];return delete ke[ot],ke[nt]=pt,ye[pt].geometry[0].pop(),ye[pt].geometry[0]=ye[pt].geometry[0].concat(yt[0]),pt}function lt(ot,nt,yt){const pt=ce[nt];return delete ce[nt],ce[ot]=pt,ye[pt].geometry[0].shift(),ye[pt].geometry[0]=yt[0].concat(ye[pt].geometry[0]),pt}function Et(ot,nt,yt){const pt=yt?nt[0][nt[0].length-1]:nt[0][0];return`${ot}:${pt.x}:${pt.y}`}for(let ot=0;ot<oe.length;ot++){const nt=oe[ot],yt=nt.geometry,pt=nt.text?nt.text.toString():null;if(!pt){Fe(ot);continue}const ut=Et(pt,yt),Ne=Et(pt,yt,!0);if(ut in ke&&Ne in ce&&ke[ut]!==ce[Ne]){const vt=lt(ut,Ne,yt),gt=He(ut,Ne,ye[vt].geometry);delete ce[ut],delete ke[Ne],ke[Et(pt,ye[gt].geometry,!0)]=gt,ye[vt].geometry=null}else ut in ke?He(ut,Ne,yt):Ne in ce?lt(ut,Ne,yt):(Fe(ot),ce[ut]=Ce-1,ke[Ne]=Ce-1)}return ye.filter(ot=>ot.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((oe,ce)=>oe.sortKey-ce.sortKey)}update(n,s,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,c),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const c=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let b=n.segment+1;b<s.length;b++)x[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:f},b<s.length-1&&(f+=s[b+1].dist(s[b]));for(let b=n.segment||0;b>=0;b--)x[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:v},b>0&&(v+=s[b-1].dist(s[b]));for(let b=0;b<s.length;b++){const S=x[b];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(n,s,c,f,v,x,b,S,k,E,A,B){const N=n.indexArray,W=n.layoutVertexArray,X=n.segments.prepareSegment(4*s.length,W,N,this.canOverlap?x.sortKey:void 0),oe=this.glyphOffsetArray.length,ce=X.vertexLength,ke=this.allowVerticalPlacement&&b===g.ah.vertical?Math.PI/2:0,ye=x.text&&x.text.sections;for(let Ce=0;Ce<s.length;Ce++){const{tl:Fe,tr:He,bl:lt,br:Et,tex:ot,pixelOffsetTL:nt,pixelOffsetBR:yt,minFontScaleX:pt,minFontScaleY:ut,glyphOffset:Ne,isSDF:vt,sectionIndex:gt}=s[Ce],Bt=X.vertexLength,Ar=Ne[1];mf(W,S.x,S.y,Fe.x,Ar+Fe.y,ot.x,ot.y,c,vt,nt.x,nt.y,pt,ut),mf(W,S.x,S.y,He.x,Ar+He.y,ot.x+ot.w,ot.y,c,vt,yt.x,nt.y,pt,ut),mf(W,S.x,S.y,lt.x,Ar+lt.y,ot.x,ot.y+ot.h,c,vt,nt.x,yt.y,pt,ut),mf(W,S.x,S.y,Et.x,Ar+Et.y,ot.x+ot.w,ot.y+ot.h,c,vt,yt.x,yt.y,pt,ut),Vy(n.dynamicLayoutVertexArray,S,ke),N.emplaceBack(Bt,Bt+1,Bt+2),N.emplaceBack(Bt+1,Bt+2,Bt+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ne[0]),Ce!==s.length-1&&gt===s[Ce+1].sectionIndex||n.programConfigurations.populatePaintArrays(W.length,x,x.index,{},B,ye&&ye[gt])}n.placedSymbolArray.emplaceBack(S.x,S.y,oe,this.glyphOffsetArray.length-oe,ce,k,E,S.segment,c?c[0]:0,c?c[1]:0,f[0],f[1],b,0,!1,0,A)}_addCollisionDebugVertex(n,s,c,f,v,x){return s.emplaceBack(0,0),n.emplaceBack(c.x,c.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,c,f,v,x,b){const S=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),k=S.vertexLength,E=v.layoutVertexArray,A=v.collisionVertexArray,B=b.anchorX,N=b.anchorY;this._addCollisionDebugVertex(E,A,x,B,N,new L(n,s)),this._addCollisionDebugVertex(E,A,x,B,N,new L(c,s)),this._addCollisionDebugVertex(E,A,x,B,N,new L(c,f)),this._addCollisionDebugVertex(E,A,x,B,N,new L(n,f)),S.vertexLength+=4;const W=v.indexArray;W.emplaceBack(k,k+1),W.emplaceBack(k+1,k+2),W.emplaceBack(k+2,k+3),W.emplaceBack(k+3,k),S.primitiveLength+=4}addDebugCollisionBoxes(n,s,c,f){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wy(ji,xb.members,An),this.iconCollisionBox=new Wy(ji,xb.members,An);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,c,f,v,x,b,S,k){const E={};for(let A=s;A<c;A++){const B=n.get(A);E.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},E.textFeatureIndex=B.featureIndex;break}for(let A=f;A<v;A++){const B=n.get(A);E.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},E.verticalTextFeatureIndex=B.featureIndex;break}for(let A=x;A<b;A++){const B=n.get(A);E.iconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},E.iconFeatureIndex=B.featureIndex;break}for(let A=S;A<k;A++){const B=n.get(A);E.verticalIconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},E.verticalIconFeatureIndex=B.featureIndex;break}return E}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const c=n.placedSymbolArray.get(s),f=c.vertexStartIndex+4*c.numGlyphs;for(let v=c.vertexStartIndex;v<f;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),c=Math.cos(n),f=[],v=[],x=[];for(let b=0;b<this.symbolInstances.length;++b){x.push(b);const S=this.symbolInstances.get(b);f.push(0|Math.round(s*S.anchorX+c*S.anchorY)),v.push(S.featureIndex)}return x.sort((b,S)=>f[b]-f[S]||v[S]-v[b]),x}addToSortKeyRanges(n,s){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===s?c.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const c=this.symbolInstances.get(s);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ob,$b;dt("SymbolBucket",Uc,{omit:["layers","collisionBoxArray","features","compareText"]}),Uc.MAX_GLYPHS=65535,Uc.addDynamicAttributes=Vy;var Gy={get paint(){return $b=$b||new _({"icon-opacity":new Mt(ze.paint_symbol["icon-opacity"]),"icon-color":new Mt(ze.paint_symbol["icon-color"]),"icon-halo-color":new Mt(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mt(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mt(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new ft(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new ft(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new Mt(ze.paint_symbol["text-opacity"]),"text-color":new Mt(ze.paint_symbol["text-color"],{runtimeType:Pn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Mt(ze.paint_symbol["text-halo-color"]),"text-halo-width":new Mt(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new Mt(ze.paint_symbol["text-halo-blur"]),"text-translate":new ft(ze.paint_symbol["text-translate"]),"text-translate-anchor":new ft(ze.paint_symbol["text-translate-anchor"])})},get layout(){return Ob=Ob||new _({"symbol-placement":new ft(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new ft(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ft(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Mt(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ft(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ft(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ft(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ft(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new ft(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ft(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mt(ze.layout_symbol["icon-size"]),"icon-text-fit":new ft(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ft(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mt(ze.layout_symbol["icon-image"]),"icon-rotate":new Mt(ze.layout_symbol["icon-rotate"]),"icon-padding":new Mt(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new ft(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new Mt(ze.layout_symbol["icon-offset"]),"icon-anchor":new Mt(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ft(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ft(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ft(ze.layout_symbol["text-rotation-alignment"]),"text-field":new Mt(ze.layout_symbol["text-field"]),"text-font":new Mt(ze.layout_symbol["text-font"]),"text-size":new Mt(ze.layout_symbol["text-size"]),"text-max-width":new Mt(ze.layout_symbol["text-max-width"]),"text-line-height":new ft(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new Mt(ze.layout_symbol["text-letter-spacing"]),"text-justify":new Mt(ze.layout_symbol["text-justify"]),"text-radial-offset":new Mt(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ft(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Mt(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Mt(ze.layout_symbol["text-anchor"]),"text-max-angle":new ft(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new ft(ze.layout_symbol["text-writing-mode"]),"text-rotate":new Mt(ze.layout_symbol["text-rotate"]),"text-padding":new ft(ze.layout_symbol["text-padding"]),"text-keep-upright":new ft(ze.layout_symbol["text-keep-upright"]),"text-transform":new Mt(ze.layout_symbol["text-transform"]),"text-offset":new Mt(ze.layout_symbol["text-offset"]),"text-allow-overlap":new ft(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new ft(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new ft(ze.layout_symbol["text-ignore-placement"]),"text-optional":new ft(ze.layout_symbol["text-optional"])})}};class Nb{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:$r,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}dt("FormatSectionOverride",Nb,{omit:["defaultValue"]});class gf extends a{constructor(n){super(n,Gy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const f=[];for(const v of c)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,c,f){const v=this.layout.get(n).evaluate(s,{},c,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||gc(x.value)||!v?v:function(b,S){return S.replace(/{([^{}]+)}/g,(k,E)=>b&&E in b?String(b[E]):"")}(s.properties,v)}createBucket(n){return new Uc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Gy.paint.overridableProperties){if(!gf.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),c=new Nb(s),f=new mc(c,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new ua("source",f):new ha("composite",f,s.value.zoomStops),this.paint._values[n]=new vo(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,c){return!(!this.layout||s.isDataDriven()||c.isDataDriven())&&gf.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const c=n.get("text-field"),f=Gy.paint.properties[s];let v=!1;const x=b=>{for(const S of b)if(f.overrides&&f.overrides.hasOverride(S))return void(v=!0)};if(c.value.kind==="constant"&&c.value.value instanceof vi)x(c.value.value.sections);else if(c.value.kind==="source"){const b=k=>{v||(k instanceof Xi&&pn(k.value)===Di?x(k.value.sections):k instanceof sc?x(k.sections):k.eachChild(b))},S=c.value;S._styleExpression&&b(S._styleExpression.expression)}return v}}let jb;var qI={get paint(){return jb=jb||new _({"background-color":new ft(ze.paint_background["background-color"]),"background-pattern":new Pc(ze.paint_background["background-pattern"]),"background-opacity":new ft(ze.paint_background["background-opacity"])})}};class ZI extends a{constructor(n){super(n,qI)}}let Vb;var XI={get paint(){return Vb=Vb||new _({"raster-opacity":new ft(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new ft(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ft(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ft(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new ft(ze.paint_raster["raster-saturation"]),"raster-contrast":new ft(ze.paint_raster["raster-contrast"]),"raster-resampling":new ft(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new ft(ze.paint_raster["raster-fade-duration"])})}};class KI extends a{constructor(n){super(n,XI)}}class YI extends a{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class JI{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Hy=63710088e-1;class Ea{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ea(he(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,c=this.lat*s,f=n.lat*s,v=Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos((n.lng-this.lng)*s);return Hy*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Ea)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ea(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ea(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ub=2*Math.PI*Hy;function Wb(i){return Ub*Math.cos(i*Math.PI/180)}function Gb(i){return(180+i)/360}function Hb(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function qb(i,n){return i/Wb(n)}function qy(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class Kh{constructor(n,s,c=0){this.x=+n,this.y=+s,this.z=+c}static fromLngLat(n,s=0){const c=Ea.convert(n);return new Kh(Gb(c.lng),Hb(c.lat),qb(s,c.lat))}toLngLat(){return new Ea(360*this.x-180,qy(this.y))}toAltitude(){return this.z*Wb(qy(this.y))}meterInMercatorCoordinateUnits(){return 1/Ub*(n=qy(this.y),1/Math.cos(n*Math.PI/180));var n}}function Zb(i,n,s){var c=2*Math.PI*6378137/256/Math.pow(2,s);return[i*c-2*Math.PI*6378137/2,n*c-2*Math.PI*6378137/2]}class Zy{constructor(n,s,c){if(!function(f,v,x){return!(f<0||f>25||x<0||x>=Math.pow(2,f)||v<0||v>=Math.pow(2,f))}(n,s,c))throw new Error(`x=${s}, y=${c}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=c,this.key=Yh(0,n,n,s,c)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,c){const f=(x=this.y,b=this.z,S=Zb(256*(v=this.x),256*(x=Math.pow(2,b)-x-1),b),k=Zb(256*(v+1),256*(x+1),b),S[0]+","+S[1]+","+k[0]+","+k[1]);var v,x,b,S,k;const E=function(A,B,N){let W,X="";for(let oe=A;oe>0;oe--)W=1<<oe-1,X+=(B&W?1:0)+(N&W?2:0);return X}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,E).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new L((n.x*s-this.x)*fn,(n.y*s-this.y)*fn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Xb{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Yh(n,s.z,s.z,s.x,s.y)}}class no{constructor(n,s,c,f,v){if(n<c)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${c}`);this.overscaledZ=n,this.wrap=s,this.canonical=new Zy(c,+f,+v),this.key=Yh(s,n,c,f,v)}clone(){return new no(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new no(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new no(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-n;return n>this.canonical.z?Yh(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Yh(this.wrap*+s,n,n,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new no(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,c=2*this.canonical.x,f=2*this.canonical.y;return[new no(s,this.wrap,s,c,f),new no(s,this.wrap,s,c+1,f),new no(s,this.wrap,s,c,f+1),new no(s,this.wrap,s,c+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new no(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new no(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Xb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Kh(n.x-this.wrap,n.y))}}function Yh(i,n,s,c,f){(i*=2)<0&&(i=-1*i-1);const v=1<<s;return(v*v*i+v*f+c).toString(36)+s.toString(36)+n.toString(36)}dt("CanonicalTileID",Zy),dt("OverscaledTileID",no,{omit:["posMatrix"]});class Kb{constructor(n,s,c,f=1,v=1,x=1,b=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(c&&!["mapbox","terrarium","custom"].includes(c))return void Me(`"${c}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const S=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),c){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<S;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(S,k)]=this.data[this._idx(S-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,S)]=this.data[this._idx(k,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<S;k++)for(let E=0;E<S;E++){const A=this.get(k,E);A>this.max&&(this.max=A),A<this.min&&(this.min=A)}}get(n,s){const c=new Uint8Array(this.data.buffer),f=4*this._idx(n,s);return this.unpack(c[f],c[f+1],c[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,c){return n*this.redFactor+s*this.greenFactor+c*this.blueFactor-this.baseShift}getPixels(){return new ro({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,c){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,v=s*this.dim+this.dim,x=c*this.dim,b=c*this.dim+this.dim;switch(s){case-1:f=v-1;break;case 1:v=f+1}switch(c){case-1:x=b-1;break;case 1:b=x+1}const S=-s*this.dim,k=-c*this.dim;for(let E=x;E<b;E++)for(let A=f;A<v;A++)this.data[this._idx(A,E)]=n.data[this._idx(A+S,E+k)]}}dt("DEMData",Kb);class Yb{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const c=n[s];this._stringToNumber[c]=s,this._numberToString[s]=c}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Jb{constructor(n,s,c,f,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=c,n._y=f,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class Qb{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new fa(fn,16,0),this.grid3D=new fa(fn,16,0),this.featureIndexArray=new Xn,this.promoteId=s}insert(n,s,c,f,v,x){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,f,v);const S=x?this.grid3D:this.grid;for(let k=0;k<s.length;k++){const E=s[k],A=[1/0,1/0,-1/0,-1/0];for(let B=0;B<E.length;B++){const N=E[B];A[0]=Math.min(A[0],N.x),A[1]=Math.min(A[1],N.y),A[2]=Math.max(A[2],N.x),A[3]=Math.max(A[3],N.y)}A[0]<fn&&A[1]<fn&&A[2]>=0&&A[3]>=0&&S.insert(b,A[0],A[1],A[2],A[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ta.VectorTile(new By(this.rawTileData)).layers,this.sourceLayerCoder=new Yb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,c,f){this.loadVTLayers();const v=n.params||{},x=fn/n.tileSize/n.scale,b=gh(v.filter),S=n.queryGeometry,k=n.queryPadding*x,E=t1(S),A=this.grid.query(E.minX-k,E.minY-k,E.maxX+k,E.maxY+k),B=t1(n.cameraQueryGeometry),N=this.grid3D.query(B.minX-k,B.minY-k,B.maxX+k,B.maxY+k,(oe,ce,ke,ye)=>function(Ce,Fe,He,lt,Et){for(const nt of Ce)if(Fe<=nt.x&&He<=nt.y&&lt>=nt.x&&Et>=nt.y)return!0;const ot=[new L(Fe,He),new L(Fe,Et),new L(lt,Et),new L(lt,He)];if(Ce.length>2){for(const nt of ot)if(Bc(Ce,nt))return!0}for(let nt=0;nt<Ce.length-1;nt++)if(zk(Ce[nt],Ce[nt+1],ot))return!0;return!1}(n.cameraQueryGeometry,oe-k,ce-k,ke+k,ye+k));for(const oe of N)A.push(oe);A.sort(QI);const W={};let X;for(let oe=0;oe<A.length;oe++){const ce=A[oe];if(ce===X)continue;X=ce;const ke=this.featureIndexArray.get(ce);let ye=null;this.loadMatchingFeature(W,ke.bucketIndex,ke.sourceLayerIndex,ke.featureIndex,b,v.layers,v.availableImages,s,c,f,(Ce,Fe,He)=>(ye||(ye=Sl(Ce)),Fe.queryIntersectsFeature(S,Ce,He,ye,this.z,n.transform,x,n.pixelPosMatrix)))}return W}loadMatchingFeature(n,s,c,f,v,x,b,S,k,E,A){const B=this.bucketLayerIDs[s];if(x&&!function(oe,ce){for(let ke=0;ke<oe.length;ke++)if(ce.indexOf(oe[ke])>=0)return!0;return!1}(x,B))return;const N=this.sourceLayerCoder.decode(c),W=this.vtLayers[N].feature(f);if(v.needGeometry){const oe=Cl(W,!0);if(!v.filter(new Nr(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!v.filter(new Nr(this.tileID.overscaledZ),W))return;const X=this.getId(W,N);for(let oe=0;oe<B.length;oe++){const ce=B[oe];if(x&&x.indexOf(ce)<0)continue;const ke=S[ce];if(!ke)continue;let ye={};X&&E&&(ye=E.getState(ke.sourceLayer||"_geojsonTileLayer",X));const Ce=_e({},k[ce]);Ce.paint=e1(Ce.paint,ke.paint,W,ye,b),Ce.layout=e1(Ce.layout,ke.layout,W,ye,b);const Fe=!A||A(W,ke,ye);if(!Fe)continue;const He=new Jb(W,this.z,this.x,this.y,X);He.layer=Ce;let lt=n[ce];lt===void 0&&(lt=n[ce]=[]),lt.push({featureIndex:f,feature:He,intersectionZ:Fe})}}lookupSymbolFeatures(n,s,c,f,v,x,b,S){const k={};this.loadVTLayers();const E=gh(v);for(const A of n)this.loadMatchingFeature(k,c,f,A,E,x,b,S,s);return k}hasLayer(n){for(const s of this.bucketLayerIDs)for(const c of s)if(n===c)return!0;return!1}getId(n,s){let c=n.id;return this.promoteId&&(c=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof c=="boolean"&&(c=Number(c))),c}}function e1(i,n,s,c,f){return Ae(i,(v,x)=>{const b=n instanceof vl?n.get(x):null;return b&&b.evaluate?b.evaluate(s,c,f):b})}function t1(i){let n=1/0,s=1/0,c=-1/0,f=-1/0;for(const v of i)n=Math.min(n,v.x),s=Math.min(s,v.y),c=Math.max(c,v.x),f=Math.max(f,v.y);return{minX:n,minY:s,maxX:c,maxY:f}}function QI(i,n){return n-i}function r1(i,n,s,c,f){const v=[];for(let x=0;x<i.length;x++){const b=i[x];let S;for(let k=0;k<b.length-1;k++){let E=b[k],A=b[k+1];E.x<n&&A.x<n||(E.x<n?E=new L(n,E.y+(n-E.x)/(A.x-E.x)*(A.y-E.y))._round():A.x<n&&(A=new L(n,E.y+(n-E.x)/(A.x-E.x)*(A.y-E.y))._round()),E.y<s&&A.y<s||(E.y<s?E=new L(E.x+(s-E.y)/(A.y-E.y)*(A.x-E.x),s)._round():A.y<s&&(A=new L(E.x+(s-E.y)/(A.y-E.y)*(A.x-E.x),s)._round()),E.x>=c&&A.x>=c||(E.x>=c?E=new L(c,E.y+(c-E.x)/(A.x-E.x)*(A.y-E.y))._round():A.x>=c&&(A=new L(c,E.y+(c-E.x)/(A.x-E.x)*(A.y-E.y))._round()),E.y>=f&&A.y>=f||(E.y>=f?E=new L(E.x+(f-E.y)/(A.y-E.y)*(A.x-E.x),f)._round():A.y>=f&&(A=new L(E.x+(f-E.y)/(A.y-E.y)*(A.x-E.x),f)._round()),S&&E.equals(S[S.length-1])||(S=[E],v.push(S)),S.push(A)))))}}return v}dt("FeatureIndex",Qb,{omit:["rawTileData","sourceLayerCoder"]});class Pa extends L{constructor(n,s,c,f){super(n,s),this.angle=c,f!==void 0&&(this.segment=f)}clone(){return new Pa(this.x,this.y,this.angle,this.segment)}}function n1(i,n,s,c,f){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,b=0;for(;b>-s/2;){if(x--,x<0)return!1;b-=i[x].dist(v),v=i[x]}b+=i[x].dist(i[x+1]),x++;const S=[];let k=0;for(;b<s/2;){const E=i[x],A=i[x+1];if(!A)return!1;let B=i[x-1].angleTo(E)-E.angleTo(A);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:b,angleDelta:B}),k+=B;b-S[0].distance>c;)k-=S.shift().angleDelta;if(k>f)return!1;x++,b+=E.dist(A)}return!0}function i1(i){let n=0;for(let s=0;s<i.length-1;s++)n+=i[s].dist(i[s+1]);return n}function o1(i,n,s){return i?.6*n*s:0}function s1(i,n){return Math.max(i?i.right-i.left:0,n?n.right-n.left:0)}function eE(i,n,s,c,f,v){const x=o1(s,f,v),b=s1(s,c)*v;let S=0;const k=i1(i)/2;for(let E=0;E<i.length-1;E++){const A=i[E],B=i[E+1],N=A.dist(B);if(S+N>k){const W=(k-S)/N,X=ii.number(A.x,B.x,W),oe=ii.number(A.y,B.y,W),ce=new Pa(X,oe,B.angleTo(A),E);return ce._round(),!x||n1(i,ce,b,x,n)?ce:void 0}S+=N}}function tE(i,n,s,c,f,v,x,b,S){const k=o1(c,v,x),E=s1(c,f),A=E*x,B=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return n-A<n/4&&(n=A+n/4),a1(i,B?n/2*b%n:(E/2+2*v)*x*b%n,n,k,s,A,B,!1,S)}function a1(i,n,s,c,f,v,x,b,S){const k=v/2,E=i1(i);let A=0,B=n-s,N=[];for(let W=0;W<i.length-1;W++){const X=i[W],oe=i[W+1],ce=X.dist(oe),ke=oe.angleTo(X);for(;B+s<A+ce;){B+=s;const ye=(B-A)/ce,Ce=ii.number(X.x,oe.x,ye),Fe=ii.number(X.y,oe.y,ye);if(Ce>=0&&Ce<S&&Fe>=0&&Fe<S&&B-k>=0&&B+k<=E){const He=new Pa(Ce,Fe,ke,W);He._round(),c&&!n1(i,He,v,c,f)||N.push(He)}}A+=ce}return b||N.length||x||(N=a1(i,A/2,s,c,f,v,x,!0,S)),N}dt("Anchor",Pa);const Wc=Ti;function l1(i,n,s,c){const f=[],v=i.image,x=v.pixelRatio,b=v.paddedRect.w-2*Wc,S=v.paddedRect.h-2*Wc;let k={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const E=v.stretchX||[[0,b]],A=v.stretchY||[[0,S]],B=(Ne,vt)=>Ne+vt[1]-vt[0],N=E.reduce(B,0),W=A.reduce(B,0),X=b-N,oe=S-W;let ce=0,ke=N,ye=0,Ce=W,Fe=0,He=X,lt=0,Et=oe;if(v.content&&c){const Ne=v.content,vt=Ne[2]-Ne[0],gt=Ne[3]-Ne[1];(v.textFitWidth||v.textFitHeight)&&(k=Lb(i)),ce=yf(E,0,Ne[0]),ye=yf(A,0,Ne[1]),ke=yf(E,Ne[0],Ne[2]),Ce=yf(A,Ne[1],Ne[3]),Fe=Ne[0]-ce,lt=Ne[1]-ye,He=vt-ke,Et=gt-Ce}const ot=k.x1,nt=k.y1,yt=k.x2-ot,pt=k.y2-nt,ut=(Ne,vt,gt,Bt)=>{const Ar=_f(Ne.stretch-ce,ke,yt,ot),Er=vf(Ne.fixed-Fe,He,Ne.stretch,N),Sn=_f(vt.stretch-ye,Ce,pt,nt),bo=vf(vt.fixed-lt,Et,vt.stretch,W),jn=_f(gt.stretch-ce,ke,yt,ot),Cn=vf(gt.fixed-Fe,He,gt.stretch,N),li=_f(Bt.stretch-ye,Ce,pt,nt),ci=vf(Bt.fixed-lt,Et,Bt.stretch,W),ui=new L(Ar,Sn),tn=new L(jn,Sn),Tn=new L(jn,li),Yn=new L(Ar,li),Vn=new L(Er/x,bo/x),hi=new L(Cn/x,ci/x),Un=n*Math.PI/180;if(Un){const gr=Math.sin(Un),Rr=Math.cos(Un),Wr=[Rr,-gr,gr,Rr];ui._matMult(Wr),tn._matMult(Wr),Yn._matMult(Wr),Tn._matMult(Wr)}const io=Ne.stretch+Ne.fixed,ki=vt.stretch+vt.fixed;return{tl:ui,tr:tn,bl:Yn,br:Tn,tex:{x:v.paddedRect.x+Wc+io,y:v.paddedRect.y+Wc+ki,w:gt.stretch+gt.fixed-io,h:Bt.stretch+Bt.fixed-ki},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vn,pixelOffsetBR:hi,minFontScaleX:He/x/yt,minFontScaleY:Et/x/pt,isSDF:s}};if(c&&(v.stretchX||v.stretchY)){const Ne=c1(E,X,N),vt=c1(A,oe,W);for(let gt=0;gt<Ne.length-1;gt++){const Bt=Ne[gt],Ar=Ne[gt+1];for(let Er=0;Er<vt.length-1;Er++)f.push(ut(Bt,vt[Er],Ar,vt[Er+1]))}}else f.push(ut({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:S+1}));return f}function yf(i,n,s){let c=0;for(const f of i)c+=Math.max(n,Math.min(s,f[1]))-Math.max(n,Math.min(s,f[0]));return c}function c1(i,n,s){const c=[{fixed:-Wc,stretch:0}];for(const[f,v]of i){const x=c[c.length-1];c.push({fixed:f-x.stretch,stretch:x.stretch}),c.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return c.push({fixed:n+Wc,stretch:s}),c}function _f(i,n,s,c){return i/n*s+c}function vf(i,n,s,c){return i-n*s/c}class xf{constructor(n,s,c,f,v,x,b,S,k,E){var A;if(this.boxStartIndex=n.length,k){let B=x.top,N=x.bottom;const W=x.collisionPadding;W&&(B-=W[1],N+=W[3]);let X=N-B;X>0&&(X=Math.max(10,X),this.circleDiameter=X)}else{const B=!((A=x.image)===null||A===void 0)&&A.content&&(x.image.textFitWidth||x.image.textFitHeight)?Lb(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};B.y1=B.y1*b-S[0],B.y2=B.y2*b+S[2],B.x1=B.x1*b-S[3],B.x2=B.x2*b+S[1];const N=x.collisionPadding;if(N&&(B.x1-=N[0]*b,B.y1-=N[1]*b,B.x2+=N[2]*b,B.y2+=N[3]*b),E){const W=new L(B.x1,B.y1),X=new L(B.x2,B.y1),oe=new L(B.x1,B.y2),ce=new L(B.x2,B.y2),ke=E*Math.PI/180;W._rotate(ke),X._rotate(ke),oe._rotate(ke),ce._rotate(ke),B.x1=Math.min(W.x,X.x,oe.x,ce.x),B.x2=Math.max(W.x,X.x,oe.x,ce.x),B.y1=Math.min(W.y,X.y,oe.y,ce.y),B.y2=Math.max(W.y,X.y,oe.y,ce.y)}n.emplaceBack(s.x,s.y,B.x1,B.y1,B.x2,B.y2,c,f,v)}this.boxEndIndex=n.length}}class rE{constructor(n=[],s=(c,f)=>c<f?-1:c>f?1:0){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:c}=this,f=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(c(f,x)>=0)break;s[n]=x,n=v}s[n]=f}_down(n){const{data:s,compare:c}=this,f=this.length>>1,v=s[n];for(;n<f;){let x=1+(n<<1);const b=x+1;if(b<this.length&&c(s[b],s[x])<0&&(x=b),c(s[x],v)>=0)break;s[n]=s[x],n=x}s[n]=v}}function nE(i,n=1,s=!1){let c=1/0,f=1/0,v=-1/0,x=-1/0;const b=i[0];for(let N=0;N<b.length;N++){const W=b[N];(!N||W.x<c)&&(c=W.x),(!N||W.y<f)&&(f=W.y),(!N||W.x>v)&&(v=W.x),(!N||W.y>x)&&(x=W.y)}const S=Math.min(v-c,x-f);let k=S/2;const E=new rE([],iE);if(S===0)return new L(c,f);for(let N=c;N<v;N+=S)for(let W=f;W<x;W+=S)E.push(new Gc(N+k,W+k,k,i));let A=function(N){let W=0,X=0,oe=0;const ce=N[0];for(let ke=0,ye=ce.length,Ce=ye-1;ke<ye;Ce=ke++){const Fe=ce[ke],He=ce[Ce],lt=Fe.x*He.y-He.x*Fe.y;X+=(Fe.x+He.x)*lt,oe+=(Fe.y+He.y)*lt,W+=3*lt}return new Gc(X/W,oe/W,0,N)}(i),B=E.length;for(;E.length;){const N=E.pop();(N.d>A.d||!A.d)&&(A=N,s&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,B)),N.max-A.d<=n||(k=N.h/2,E.push(new Gc(N.p.x-k,N.p.y-k,k,i)),E.push(new Gc(N.p.x+k,N.p.y-k,k,i)),E.push(new Gc(N.p.x-k,N.p.y+k,k,i)),E.push(new Gc(N.p.x+k,N.p.y+k,k,i)),B+=4)}return s&&(console.log(`num probes: ${B}`),console.log(`best distance: ${A.d}`)),A.p}function iE(i,n){return n.max-i.max}function Gc(i,n,s,c){this.p=new L(i,n),this.h=s,this.d=function(f,v){let x=!1,b=1/0;for(let S=0;S<v.length;S++){const k=v[S];for(let E=0,A=k.length,B=A-1;E<A;B=E++){const N=k[E],W=k[B];N.y>f.y!=W.y>f.y&&f.x<(W.x-N.x)*(f.y-N.y)/(W.y-N.y)+N.x&&(x=!x),b=Math.min(b,H0(f,N,W))}}return(x?1:-1)*Math.sqrt(b)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}var Nn;g.aq=void 0,(Nn=g.aq||(g.aq={}))[Nn.center=1]="center",Nn[Nn.left=2]="left",Nn[Nn.right=3]="right",Nn[Nn.top=4]="top",Nn[Nn.bottom=5]="bottom",Nn[Nn["top-left"]=6]="top-left",Nn[Nn["top-right"]=7]="top-right",Nn[Nn["bottom-left"]=8]="bottom-left",Nn[Nn["bottom-right"]=9]="bottom-right";const Ma=7,Xy=Number.POSITIVE_INFINITY;function u1(i,n){return n[1]!==Xy?function(s,c,f){let v=0,x=0;switch(c=Math.abs(c),f=Math.abs(f),s){case"top-right":case"top-left":case"top":x=f-Ma;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+Ma}switch(s){case"top-right":case"bottom-right":case"right":v=-c;break;case"top-left":case"bottom-left":case"left":v=c}return[v,x]}(i,n[0],n[1]):function(s,c){let f=0,v=0;c<0&&(c=0);const x=c/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Ma;break;case"bottom-right":case"bottom-left":v=-x+Ma;break;case"bottom":v=-c+Ma;break;case"top":v=c-Ma}switch(s){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=c;break;case"right":f=-c}return[f,v]}(i,n[0])}function h1(i,n,s){var c;const f=i.layout,v=(c=f.get("text-variable-anchor-offset"))===null||c===void 0?void 0:c.evaluate(n,{},s);if(v){const b=v.values,S=[];for(let k=0;k<b.length;k+=2){const E=S[k]=b[k],A=b[k+1].map(B=>B*vn);E.startsWith("top")?A[1]-=Ma:E.startsWith("bottom")&&(A[1]+=Ma),S[k+1]=A}return new Li(S)}const x=f.get("text-variable-anchor");if(x){let b;b=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},s)*vn,Xy]:f.get("text-offset").evaluate(n,{},s).map(k=>k*vn);const S=[];for(const k of x)S.push(k,u1(k,b));return new Li(S)}return null}function Ky(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function oE(i,n,s,c,f,v,x,b,S,k,E){let A=v.textMaxSize.evaluate(n,{});A===void 0&&(A=x);const B=i.layers[0].layout,N=B.get("icon-offset").evaluate(n,{},E),W=p1(s.horizontal),X=x/24,oe=i.tilePixelRatio*X,ce=i.tilePixelRatio*A/24,ke=i.tilePixelRatio*b,ye=i.tilePixelRatio*B.get("symbol-spacing"),Ce=B.get("text-padding")*i.tilePixelRatio,Fe=function(Ne,vt,gt,Bt=1){const Ar=Ne.get("icon-padding").evaluate(vt,{},gt),Er=Ar&&Ar.values;return[Er[0]*Bt,Er[1]*Bt,Er[2]*Bt,Er[3]*Bt]}(B,n,E,i.tilePixelRatio),He=B.get("text-max-angle")/180*Math.PI,lt=B.get("text-rotation-alignment")!=="viewport"&&B.get("symbol-placement")!=="point",Et=B.get("icon-rotation-alignment")==="map"&&B.get("symbol-placement")!=="point",ot=B.get("symbol-placement"),nt=ye/2,yt=B.get("icon-text-fit");let pt;c&&yt!=="none"&&(i.allowVerticalPlacement&&s.vertical&&(pt=Bb(c,s.vertical,yt,B.get("icon-text-fit-padding"),N,X)),W&&(c=Bb(c,W,yt,B.get("icon-text-fit-padding"),N,X)));const ut=(Ne,vt)=>{vt.x<0||vt.x>=fn||vt.y<0||vt.y>=fn||function(gt,Bt,Ar,Er,Sn,bo,jn,Cn,li,ci,ui,tn,Tn,Yn,Vn,hi,Un,io,ki,gr,Rr,Wr,Vi,Kr,Hc){const ns=gt.addToLineVertexArray(Bt,Ar);let is,wo,oo,zn,Ls=0,ed=0,y1=0,_1=0,i_=-1,o_=-1;const Bs={};let v1=zc("");if(gt.allowVerticalPlacement&&Er.vertical){const Jn=Cn.layout.get("text-rotate").evaluate(Rr,{},Kr)+90;oo=new xf(li,Bt,ci,ui,tn,Er.vertical,Tn,Yn,Vn,Jn),jn&&(zn=new xf(li,Bt,ci,ui,tn,jn,Un,io,Vn,Jn))}if(Sn){const Jn=Cn.layout.get("icon-rotate").evaluate(Rr,{}),so=Cn.layout.get("icon-text-fit")!=="none",kl=l1(Sn,Jn,Vi,so),Oo=jn?l1(jn,Jn,Vi,so):void 0;wo=new xf(li,Bt,ci,ui,tn,Sn,Un,io,!1,Jn),Ls=4*kl.length;const Il=gt.iconSizeData;let os=null;Il.kind==="source"?(os=[rs*Cn.layout.get("icon-size").evaluate(Rr,{})],os[0]>Ia&&Me(`${gt.layerIds[0]}: Value for "icon-size" is >= ${Xh}. Reduce your "icon-size".`)):Il.kind==="composite"&&(os=[rs*Wr.compositeIconSizes[0].evaluate(Rr,{},Kr),rs*Wr.compositeIconSizes[1].evaluate(Rr,{},Kr)],(os[0]>Ia||os[1]>Ia)&&Me(`${gt.layerIds[0]}: Value for "icon-size" is >= ${Xh}. Reduce your "icon-size".`)),gt.addSymbols(gt.icon,kl,os,gr,ki,Rr,g.ah.none,Bt,ns.lineStartIndex,ns.lineLength,-1,Kr),i_=gt.icon.placedSymbolArray.length-1,Oo&&(ed=4*Oo.length,gt.addSymbols(gt.icon,Oo,os,gr,ki,Rr,g.ah.vertical,Bt,ns.lineStartIndex,ns.lineLength,-1,Kr),o_=gt.icon.placedSymbolArray.length-1)}const x1=Object.keys(Er.horizontal);for(const Jn of x1){const so=Er.horizontal[Jn];if(!is){v1=zc(so.text);const Oo=Cn.layout.get("text-rotate").evaluate(Rr,{},Kr);is=new xf(li,Bt,ci,ui,tn,so,Tn,Yn,Vn,Oo)}const kl=so.positionedLines.length===1;if(y1+=d1(gt,Bt,so,bo,Cn,Vn,Rr,hi,ns,Er.vertical?g.ah.horizontal:g.ah.horizontalOnly,kl?x1:[Jn],Bs,i_,Wr,Kr),kl)break}Er.vertical&&(_1+=d1(gt,Bt,Er.vertical,bo,Cn,Vn,Rr,hi,ns,g.ah.vertical,["vertical"],Bs,o_,Wr,Kr));const lE=is?is.boxStartIndex:gt.collisionBoxArray.length,cE=is?is.boxEndIndex:gt.collisionBoxArray.length,uE=oo?oo.boxStartIndex:gt.collisionBoxArray.length,hE=oo?oo.boxEndIndex:gt.collisionBoxArray.length,dE=wo?wo.boxStartIndex:gt.collisionBoxArray.length,pE=wo?wo.boxEndIndex:gt.collisionBoxArray.length,fE=zn?zn.boxStartIndex:gt.collisionBoxArray.length,mE=zn?zn.boxEndIndex:gt.collisionBoxArray.length;let Fo=-1;const wf=(Jn,so)=>Jn&&Jn.circleDiameter?Math.max(Jn.circleDiameter,so):so;Fo=wf(is,Fo),Fo=wf(oo,Fo),Fo=wf(wo,Fo),Fo=wf(zn,Fo);const b1=Fo>-1?1:0;b1&&(Fo*=Hc/vn),gt.glyphOffsetArray.length>=Uc.MAX_GLYPHS&&Me("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Rr.sortKey!==void 0&&gt.addToSortKeyRanges(gt.symbolInstances.length,Rr.sortKey);const gE=h1(Cn,Rr,Kr),[yE,_E]=function(Jn,so){const kl=Jn.length,Oo=so==null?void 0:so.values;if((Oo==null?void 0:Oo.length)>0)for(let Il=0;Il<Oo.length;Il+=2){const os=Oo[Il+1];Jn.emplaceBack(g.aq[Oo[Il]],os[0],os[1])}return[kl,Jn.length]}(gt.textAnchorOffsets,gE);gt.symbolInstances.emplaceBack(Bt.x,Bt.y,Bs.right>=0?Bs.right:-1,Bs.center>=0?Bs.center:-1,Bs.left>=0?Bs.left:-1,Bs.vertical||-1,i_,o_,v1,lE,cE,uE,hE,dE,pE,fE,mE,ci,y1,_1,Ls,ed,b1,0,Tn,Fo,yE,_E)}(i,vt,Ne,s,c,f,pt,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,oe,[Ce,Ce,Ce,Ce],lt,S,ke,Fe,Et,N,n,v,k,E,x)};if(ot==="line")for(const Ne of r1(n.geometry,0,0,fn,fn)){const vt=tE(Ne,ye,He,s.vertical||W,c,24,ce,i.overscaling,fn);for(const gt of vt)W&&sE(i,W.text,nt,gt)||ut(Ne,gt)}else if(ot==="line-center"){for(const Ne of n.geometry)if(Ne.length>1){const vt=eE(Ne,He,s.vertical||W,c,24,ce);vt&&ut(Ne,vt)}}else if(n.type==="Polygon")for(const Ne of lc(n.geometry,0)){const vt=nE(Ne,16);ut(Ne[0],new Pa(vt.x,vt.y,0))}else if(n.type==="LineString")for(const Ne of n.geometry)ut(Ne,new Pa(Ne[0].x,Ne[0].y,0));else if(n.type==="Point")for(const Ne of n.geometry)for(const vt of Ne)ut([vt],new Pa(vt.x,vt.y,0))}function d1(i,n,s,c,f,v,x,b,S,k,E,A,B,N,W){const X=function(ke,ye,Ce,Fe,He,lt,Et,ot){const nt=Fe.layout.get("text-rotate").evaluate(lt,{})*Math.PI/180,yt=[];for(const pt of ye.positionedLines)for(const ut of pt.positionedGlyphs){if(!ut.rect)continue;const Ne=ut.rect||{};let vt=Eb+1,gt=!0,Bt=1,Ar=0;const Er=(He||ot)&&ut.vertical,Sn=ut.metrics.advance*ut.scale/2;if(ot&&ye.verticalizable&&(Ar=pt.lineOffset/2-(ut.imageName?-(vn-ut.metrics.width*ut.scale)/2:(ut.scale-1)*vn)),ut.imageName){const gr=Et[ut.imageName];gt=gr.sdf,Bt=gr.pixelRatio,vt=Ti/Bt}const bo=He?[ut.x+Sn,ut.y]:[0,0];let jn=He?[0,0]:[ut.x+Sn+Ce[0],ut.y+Ce[1]-Ar],Cn=[0,0];Er&&(Cn=jn,jn=[0,0]);const li=ut.metrics.isDoubleResolution?2:1,ci=(ut.metrics.left-vt)*ut.scale-Sn+jn[0],ui=(-ut.metrics.top-vt)*ut.scale+jn[1],tn=ci+Ne.w/li*ut.scale/Bt,Tn=ui+Ne.h/li*ut.scale/Bt,Yn=new L(ci,ui),Vn=new L(tn,ui),hi=new L(ci,Tn),Un=new L(tn,Tn);if(Er){const gr=new L(-Sn,Sn-qh),Rr=-Math.PI/2,Wr=vn/2-Sn,Vi=new L(5-qh-Wr,-(ut.imageName?Wr:0)),Kr=new L(...Cn);Yn._rotateAround(Rr,gr)._add(Vi)._add(Kr),Vn._rotateAround(Rr,gr)._add(Vi)._add(Kr),hi._rotateAround(Rr,gr)._add(Vi)._add(Kr),Un._rotateAround(Rr,gr)._add(Vi)._add(Kr)}if(nt){const gr=Math.sin(nt),Rr=Math.cos(nt),Wr=[Rr,-gr,gr,Rr];Yn._matMult(Wr),Vn._matMult(Wr),hi._matMult(Wr),Un._matMult(Wr)}const io=new L(0,0),ki=new L(0,0);yt.push({tl:Yn,tr:Vn,bl:hi,br:Un,tex:Ne,writingMode:ye.writingMode,glyphOffset:bo,sectionIndex:ut.sectionIndex,isSDF:gt,pixelOffsetTL:io,pixelOffsetBR:ki,minFontScaleX:0,minFontScaleY:0})}return yt}(0,s,b,f,v,x,c,i.allowVerticalPlacement),oe=i.textSizeData;let ce=null;oe.kind==="source"?(ce=[rs*f.layout.get("text-size").evaluate(x,{})],ce[0]>Ia&&Me(`${i.layerIds[0]}: Value for "text-size" is >= ${Xh}. Reduce your "text-size".`)):oe.kind==="composite"&&(ce=[rs*N.compositeTextSizes[0].evaluate(x,{},W),rs*N.compositeTextSizes[1].evaluate(x,{},W)],(ce[0]>Ia||ce[1]>Ia)&&Me(`${i.layerIds[0]}: Value for "text-size" is >= ${Xh}. Reduce your "text-size".`)),i.addSymbols(i.text,X,ce,b,v,x,k,n,S.lineStartIndex,S.lineLength,B,W);for(const ke of E)A[ke]=i.text.placedSymbolArray.length-1;return 4*X.length}function p1(i){for(const n in i)return i[n];return null}function sE(i,n,s,c){const f=i.compareText;if(n in f){const v=f[n];for(let x=v.length-1;x>=0;x--)if(c.dist(v[x])<s)return!0}else f[n]=[];return f[n].push(c),!1}const f1=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Yy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,c]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=c>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=f1[15&c];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new Yy(b,x,v,n)}constructor(n,s=64,c=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=c,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=f1.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-b%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${c}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+b+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=n,this.coords[this._pos++]=s,c}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Jy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,c,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:b}=this,S=[0,v.length-1,0],k=[];for(;S.length;){const E=S.pop()||0,A=S.pop()||0,B=S.pop()||0;if(A-B<=b){for(let oe=B;oe<=A;oe++){const ce=x[2*oe],ke=x[2*oe+1];ce>=n&&ce<=c&&ke>=s&&ke<=f&&k.push(v[oe])}continue}const N=B+A>>1,W=x[2*N],X=x[2*N+1];W>=n&&W<=c&&X>=s&&X<=f&&k.push(v[N]),(E===0?n<=W:s<=X)&&(S.push(B),S.push(N-1),S.push(1-E)),(E===0?c>=W:f>=X)&&(S.push(N+1),S.push(A),S.push(1-E))}return k}within(n,s,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,b=[0,f.length-1,0],S=[],k=c*c;for(;b.length;){const E=b.pop()||0,A=b.pop()||0,B=b.pop()||0;if(A-B<=x){for(let oe=B;oe<=A;oe++)g1(v[2*oe],v[2*oe+1],n,s)<=k&&S.push(f[oe]);continue}const N=B+A>>1,W=v[2*N],X=v[2*N+1];g1(W,X,n,s)<=k&&S.push(f[N]),(E===0?n-c<=W:s-c<=X)&&(b.push(B),b.push(N-1),b.push(1-E)),(E===0?n+c>=W:s+c>=X)&&(b.push(N+1),b.push(A),b.push(1-E))}return S}}function Jy(i,n,s,c,f,v){if(f-c<=s)return;const x=c+f>>1;m1(i,n,x,c,f,v),Jy(i,n,s,c,x-1,1-v),Jy(i,n,s,x+1,f,1-v)}function m1(i,n,s,c,f,v){for(;f>c;){if(f-c>600){const k=f-c+1,E=s-c+1,A=Math.log(k),B=.5*Math.exp(2*A/3),N=.5*Math.sqrt(A*B*(k-B)/k)*(E-k/2<0?-1:1);m1(i,n,s,Math.max(c,Math.floor(s-E*B/k+N)),Math.min(f,Math.floor(s+(k-E)*B/k+N)),v)}const x=n[2*s+v];let b=c,S=f;for(Jh(i,n,c,s),n[2*f+v]>x&&Jh(i,n,c,f);b<S;){for(Jh(i,n,b,S),b++,S--;n[2*b+v]<x;)b++;for(;n[2*S+v]>x;)S--}n[2*c+v]===x?Jh(i,n,c,S):(S++,Jh(i,n,S,f)),S<=s&&(c=S+1),s<=S&&(f=S-1)}}function Jh(i,n,s,c){Qy(i,s,c),Qy(n,2*s,2*c),Qy(n,2*s+1,2*c+1)}function Qy(i,n,s){const c=i[n];i[n]=i[s],i[s]=c}function g1(i,n,s,c){const f=i-s,v=n-c;return f*f+v*v}var e_;g.bg=void 0,(e_=g.bg||(g.bg={})).create="create",e_.load="load",e_.fullLoad="fullLoad";let bf=null,Qh=[];const t_=1e3/60,r_="loadTime",n_="fullLoadTime",aE={mark(i){performance.mark(i)},frame(i){const n=i;bf!=null&&Qh.push(n-bf),bf=n},clearMetrics(){bf=null,Qh=[],performance.clearMeasures(r_),performance.clearMeasures(n_);for(const i in g.bg)performance.clearMarks(g.bg[i])},getPerformanceMetrics(){performance.measure(r_,g.bg.create,g.bg.load),performance.measure(n_,g.bg.create,g.bg.fullLoad);const i=performance.getEntriesByName(r_)[0].duration,n=performance.getEntriesByName(n_)[0].duration,s=Qh.length,c=1/(Qh.reduce((v,x)=>v+x,0)/s/1e3),f=Qh.filter(v=>v>t_).reduce((v,x)=>v+(x-t_)/t_,0);return{loadTime:i,fullLoadTime:n,fps:c,percentDroppedFrames:f/(s+f)*100,totalFrames:s}}};g.$=class extends R{},g.A=Fc,g.B=hy,g.C=function(i){if($e==null){const n=i.navigator?i.navigator.userAgent:null;$e=!!i.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return $e},g.D=ft,g.E=sr,g.F=class{constructor(i,n){this.target=i,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new JI(()=>this.process()),this.subscription=function(s,c,f,v){return s.addEventListener(c,f,!1),{unsubscribe:()=>{s.removeEventListener(c,f,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=Le(self)?i:window}registerMessageHandler(i,n){this.messageHandlers[i]=n}sendAsync(i,n){return new Promise((s,c)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:s,reject:c},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[f];const b={id:f,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const v=[],x=Object.assign(Object.assign({},i),{id:f,sourceMapId:this.mapId,origin:location.origin,data:ma(i.data,v)});this.target.postMessage(x,{transfer:v})})}receive(i){const n=i.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const c=this.abortControllers[s];return delete this.abortControllers[s],void(c&&c.abort())}if(Le(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),n=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(i,n)}processTask(i,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const f=this.resolveRejects[i];return delete this.resolveRejects[i],f?void(n.error?f.reject(ga(n.error)):f.resolve(ga(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=ga(n.data),c=new AbortController;this.abortControllers[i]=c;try{const f=yield this.messageHandlers[n.type](n.sourceMapId,s,c);this.completeTask(i,null,f)}catch(f){this.completeTask(i,f)}})}completeTask(i,n,s){const c=[];delete this.abortControllers[i];const f={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?ma(n):null,data:ma(s,c)};this.target.postMessage(f,{transfer:c})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},g.G=Vt,g.H=function(){var i=new Fc(16);return Fc!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},g.I=Oy,g.J=function(i,n,s){var c,f,v,x,b,S,k,E,A,B,N,W,X=s[0],oe=s[1],ce=s[2];return n===i?(i[12]=n[0]*X+n[4]*oe+n[8]*ce+n[12],i[13]=n[1]*X+n[5]*oe+n[9]*ce+n[13],i[14]=n[2]*X+n[6]*oe+n[10]*ce+n[14],i[15]=n[3]*X+n[7]*oe+n[11]*ce+n[15]):(f=n[1],v=n[2],x=n[3],b=n[4],S=n[5],k=n[6],E=n[7],A=n[8],B=n[9],N=n[10],W=n[11],i[0]=c=n[0],i[1]=f,i[2]=v,i[3]=x,i[4]=b,i[5]=S,i[6]=k,i[7]=E,i[8]=A,i[9]=B,i[10]=N,i[11]=W,i[12]=c*X+b*oe+A*ce+n[12],i[13]=f*X+S*oe+B*ce+n[13],i[14]=v*X+k*oe+N*ce+n[14],i[15]=x*X+E*oe+W*ce+n[15]),i},g.K=function(i,n,s){var c=s[0],f=s[1],v=s[2];return i[0]=n[0]*c,i[1]=n[1]*c,i[2]=n[2]*c,i[3]=n[3]*c,i[4]=n[4]*f,i[5]=n[5]*f,i[6]=n[6]*f,i[7]=n[7]*f,i[8]=n[8]*v,i[9]=n[9]*v,i[10]=n[10]*v,i[11]=n[11]*v,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i},g.L=K0,g.M=function(i,n){const s={};for(let c=0;c<n.length;c++){const f=n[c];f in i&&(s[f]=i[f])}return s},g.N=Ea,g.O=Gb,g.P=L,g.Q=Hb,g.R=ro,g.S=no,g.T=Ic,g.U=V,g.V=U,g.W=Ee,g.X=fn,g.Y=w,g.Z=Kh,g._=u,g.a=Dt,g.a$=function(i,n){var s=i[0],c=i[1],f=i[2],v=i[3],x=i[4],b=i[5],S=i[6],k=i[7],E=i[8],A=i[9],B=i[10],N=i[11],W=i[12],X=i[13],oe=i[14],ce=i[15],ke=n[0],ye=n[1],Ce=n[2],Fe=n[3],He=n[4],lt=n[5],Et=n[6],ot=n[7],nt=n[8],yt=n[9],pt=n[10],ut=n[11],Ne=n[12],vt=n[13],gt=n[14],Bt=n[15];return Math.abs(s-ke)<=ai*Math.max(1,Math.abs(s),Math.abs(ke))&&Math.abs(c-ye)<=ai*Math.max(1,Math.abs(c),Math.abs(ye))&&Math.abs(f-Ce)<=ai*Math.max(1,Math.abs(f),Math.abs(Ce))&&Math.abs(v-Fe)<=ai*Math.max(1,Math.abs(v),Math.abs(Fe))&&Math.abs(x-He)<=ai*Math.max(1,Math.abs(x),Math.abs(He))&&Math.abs(b-lt)<=ai*Math.max(1,Math.abs(b),Math.abs(lt))&&Math.abs(S-Et)<=ai*Math.max(1,Math.abs(S),Math.abs(Et))&&Math.abs(k-ot)<=ai*Math.max(1,Math.abs(k),Math.abs(ot))&&Math.abs(E-nt)<=ai*Math.max(1,Math.abs(E),Math.abs(nt))&&Math.abs(A-yt)<=ai*Math.max(1,Math.abs(A),Math.abs(yt))&&Math.abs(B-pt)<=ai*Math.max(1,Math.abs(B),Math.abs(pt))&&Math.abs(N-ut)<=ai*Math.max(1,Math.abs(N),Math.abs(ut))&&Math.abs(W-Ne)<=ai*Math.max(1,Math.abs(W),Math.abs(Ne))&&Math.abs(X-vt)<=ai*Math.max(1,Math.abs(X),Math.abs(vt))&&Math.abs(oe-gt)<=ai*Math.max(1,Math.abs(oe),Math.abs(gt))&&Math.abs(ce-Bt)<=ai*Math.max(1,Math.abs(ce),Math.abs(Bt))},g.a0=or,g.a1=Zy,g.a2=Xe,g.a3=i=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const c of i){const f=window.document.createElement("source");Ct(c)||(n.crossOrigin="Anonymous"),f.src=c,n.appendChild(f)}})},g.a4=function(){return ge++},g.a5=st,g.a6=Uc,g.a7=gh,g.a8=Cl,g.a9=Jb,g.aA=function(i){if(i.type==="custom")return new YI(i);switch(i.type){case"background":return new ZI(i);case"circle":return new Lk(i);case"fill":return new Jk(i);case"fill-extrusion":return new pI(i);case"heatmap":return new Fk(i);case"hillshade":return new $k(i);case"line":return new bI(i);case"raster":return new KI(i);case"symbol":return new gf(i)}},g.aB=De,g.aC=function(i,n){if(!i)return[{command:"setStyle",args:[n]}];let s=[];try{if(!At(i.version,n.version))return[{command:"setStyle",args:[n]}];At(i.center,n.center)||s.push({command:"setCenter",args:[n.center]}),At(i.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),At(i.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),At(i.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),At(i.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),At(i.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),At(i.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),At(i.light,n.light)||s.push({command:"setLight",args:[n.light]}),At(i.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),At(i.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),At(i.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const c={},f=[];(function(x,b,S,k){let E;for(E in b=b||{},x=x||{})Object.prototype.hasOwnProperty.call(x,E)&&(Object.prototype.hasOwnProperty.call(b,E)||_t(E,S,k));for(E in b)Object.prototype.hasOwnProperty.call(b,E)&&(Object.prototype.hasOwnProperty.call(x,E)?At(x[E],b[E])||(x[E].type==="geojson"&&b[E].type==="geojson"&&Tr(x,b,E)?er(S,{command:"setGeoJSONSourceData",args:[E,b[E].data]}):_n(E,b,S,k)):xr(E,b,S))})(i.sources,n.sources,f,c);const v=[];i.layers&&i.layers.forEach(x=>{"source"in x&&c[x.source]?s.push({command:"removeLayer",args:[x.id]}):v.push(x)}),s=s.concat(f),function(x,b,S){b=b||[];const k=(x=x||[]).map(En),E=b.map(En),A=x.reduce(Ln,{}),B=b.reduce(Ln,{}),N=k.slice(),W=Object.create(null);let X,oe,ce,ke,ye;for(let Ce=0,Fe=0;Ce<k.length;Ce++)X=k[Ce],Object.prototype.hasOwnProperty.call(B,X)?Fe++:(er(S,{command:"removeLayer",args:[X]}),N.splice(N.indexOf(X,Fe),1));for(let Ce=0,Fe=0;Ce<E.length;Ce++)X=E[E.length-1-Ce],N[N.length-1-Ce]!==X&&(Object.prototype.hasOwnProperty.call(A,X)?(er(S,{command:"removeLayer",args:[X]}),N.splice(N.lastIndexOf(X,N.length-Fe),1)):Fe++,ke=N[N.length-Ce],er(S,{command:"addLayer",args:[B[X],ke]}),N.splice(N.length-Ce,0,X),W[X]=!0);for(let Ce=0;Ce<E.length;Ce++)if(X=E[Ce],oe=A[X],ce=B[X],!W[X]&&!At(oe,ce))if(At(oe.source,ce.source)&&At(oe["source-layer"],ce["source-layer"])&&At(oe.type,ce.type)){for(ye in un(oe.layout,ce.layout,S,X,null,"setLayoutProperty"),un(oe.paint,ce.paint,S,X,null,"setPaintProperty"),At(oe.filter,ce.filter)||er(S,{command:"setFilter",args:[X,ce.filter]}),At(oe.minzoom,ce.minzoom)&&At(oe.maxzoom,ce.maxzoom)||er(S,{command:"setLayerZoomRange",args:[X,ce.minzoom,ce.maxzoom]}),oe)Object.prototype.hasOwnProperty.call(oe,ye)&&ye!=="layout"&&ye!=="paint"&&ye!=="filter"&&ye!=="metadata"&&ye!=="minzoom"&&ye!=="maxzoom"&&(ye.indexOf("paint.")===0?un(oe[ye],ce[ye],S,X,ye.slice(6),"setPaintProperty"):At(oe[ye],ce[ye])||er(S,{command:"setLayerProperty",args:[X,ye,ce[ye]]}));for(ye in ce)Object.prototype.hasOwnProperty.call(ce,ye)&&!Object.prototype.hasOwnProperty.call(oe,ye)&&ye!=="layout"&&ye!=="paint"&&ye!=="filter"&&ye!=="metadata"&&ye!=="minzoom"&&ye!=="maxzoom"&&(ye.indexOf("paint.")===0?un(oe[ye],ce[ye],S,X,ye.slice(6),"setPaintProperty"):At(oe[ye],ce[ye])||er(S,{command:"setLayerProperty",args:[X,ye,ce[ye]]}))}else er(S,{command:"removeLayer",args:[X]}),ke=N[N.lastIndexOf(X)+1],er(S,{command:"addLayer",args:[ce,ke]})}(v,n.layers,s)}catch(c){console.warn("Unable to compute style diff:",c),s=[{command:"setStyle",args:[n]}]}return s},g.aD=function(i){const n=[],s=i.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),i.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},g.aE=function i(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let c=0;c<n.length;c++)if(!i(n[c],s[c]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const c in n)if(!i(n[c],s[c]))return!1;return!0}return n===s},g.aF=Ae,g.aG=Re,g.aH=class extends bl{constructor(i,n){super(i,n),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},g.aI=rf,g.aJ=class extends bl{constructor(i,n){super(i,n),this.current=Ik}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let n=1;n<16;n++)if(i[n]!==this.current[n]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},g.aK=$0,g.aL=N0,g.aM=Sr,g.aN=class extends bl{constructor(i,n){super(i,n),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},g.aO=class extends bl{constructor(i,n){super(i,n),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},g.aP=function(i,n,s,c,f,v,x){var b=1/(n-s),S=1/(c-f),k=1/(v-x);return i[0]=-2*b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*k,i[11]=0,i[12]=(n+s)*b,i[13]=(f+c)*S,i[14]=(x+v)*k,i[15]=1,i},g.aQ=Dk,g.aR=class extends xe{},g.aS=TI,g.aT=class extends Pe{},g.aU=ky,g.aV=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},g.aW=tb,g.aX=On,g.aY=to,g.aZ=class extends mt{},g.a_=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]&&i[8]===n[8]&&i[9]===n[9]&&i[10]===n[10]&&i[11]===n[11]&&i[12]===n[12]&&i[13]===n[13]&&i[14]===n[14]&&i[15]===n[15]},g.aa=function(i){const n={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,c,f,v)=>{const x=f||v;return n[c]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},g.ab=function(i,n){const s=[];for(const c in i)c in n||s.push(c);return s},g.ac=fe,g.ad=function(i,n,s){var c=Math.sin(s),f=Math.cos(s),v=n[0],x=n[1],b=n[2],S=n[3],k=n[4],E=n[5],A=n[6],B=n[7];return n!==i&&(i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=v*f+k*c,i[1]=x*f+E*c,i[2]=b*f+A*c,i[3]=S*f+B*c,i[4]=k*f-v*c,i[5]=E*f-x*c,i[6]=A*f-b*c,i[7]=B*f-S*c,i},g.ae=function(i){var n=new Fc(16);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n},g.af=af,g.ag=function(i,n){let s=0,c=0;if(i.kind==="constant")c=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=i,b=f?fe(oi.interpolationFactor(f,n,v,x),0,1):0;i.kind==="camera"?c=ii.number(i.minSize,i.maxSize,b):s=b}return{uSizeT:s,uSize:c}},g.ai=function(i,{uSize:n,uSizeT:s},{lowerSize:c,upperSize:f}){return i.kind==="source"?c/rs:i.kind==="composite"?ii.number(c/rs,f/rs,s):n},g.aj=Vy,g.ak=function(i,n,s,c){const f=n.y-i.y,v=n.x-i.x,x=c.y-s.y,b=c.x-s.x,S=x*v-b*f;if(S===0)return null;const k=(b*(i.y-s.y)-x*(i.x-s.x))/S;return new L(i.x+k*v,i.y+k*f)},g.al=r1,g.am=W0,g.an=Sy,g.ao=function(i){let n=1/0,s=1/0,c=-1/0,f=-1/0;for(const v of i)n=Math.min(n,v.x),s=Math.min(s,v.y),c=Math.max(c,v.x),f=Math.max(f,v.y);return[n,s,c,f]},g.ap=vn,g.ar=jy,g.as=function(i,n){var s=n[0],c=n[1],f=n[2],v=n[3],x=n[4],b=n[5],S=n[6],k=n[7],E=n[8],A=n[9],B=n[10],N=n[11],W=n[12],X=n[13],oe=n[14],ce=n[15],ke=s*b-c*x,ye=s*S-f*x,Ce=s*k-v*x,Fe=c*S-f*b,He=c*k-v*b,lt=f*k-v*S,Et=E*X-A*W,ot=E*oe-B*W,nt=E*ce-N*W,yt=A*oe-B*X,pt=A*ce-N*X,ut=B*ce-N*oe,Ne=ke*ut-ye*pt+Ce*yt+Fe*nt-He*ot+lt*Et;return Ne?(i[0]=(b*ut-S*pt+k*yt)*(Ne=1/Ne),i[1]=(f*pt-c*ut-v*yt)*Ne,i[2]=(X*lt-oe*He+ce*Fe)*Ne,i[3]=(B*He-A*lt-N*Fe)*Ne,i[4]=(S*nt-x*ut-k*ot)*Ne,i[5]=(s*ut-f*nt+v*ot)*Ne,i[6]=(oe*Ce-W*lt-ce*ye)*Ne,i[7]=(E*lt-B*Ce+N*ye)*Ne,i[8]=(x*pt-b*nt+k*Et)*Ne,i[9]=(c*nt-s*pt-v*Et)*Ne,i[10]=(W*He-X*Ce+ce*ke)*Ne,i[11]=(A*Ce-E*He-N*ke)*Ne,i[12]=(b*ot-x*yt-S*Et)*Ne,i[13]=(s*yt-c*ot+f*Et)*Ne,i[14]=(X*ye-W*Fe-oe*ke)*Ne,i[15]=(E*Fe-A*ye+B*ke)*Ne,i):null},g.at=Ky,g.au=Ny,g.av=Yy,g.aw=function(){const i={},n=ze.$version;for(const s in ze.$root){const c=ze.$root[s];if(c.required){let f=null;f=s==="version"?n:c.type==="array"?[]:{},f!=null&&(i[s]=f)}}return i},g.ax=Mh,g.ay=cr,g.az=function(i){i=i.slice();const n=Object.create(null);for(let s=0;s<i.length;s++)n[i[s].id]=i[s];for(let s=0;s<i.length;s++)"ref"in i[s]&&(i[s]=Cr(i[s],n[i[s].ref]));return i},g.b=Ke,g.b0=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i},g.b1=function(i,n,s){return i[0]=n[0]*s[0],i[1]=n[1]*s[1],i[2]=n[2]*s[2],i[3]=n[3]*s[3],i},g.b2=function(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]+i[3]*n[3]},g.b3=he,g.b4=Xb,g.b5=qb,g.b6=function(i,n,s,c,f){var v,x=1/Math.tan(n/2);return i[0]=x/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=x,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,f!=null&&f!==1/0?(i[10]=(f+c)*(v=1/(c-f)),i[14]=2*f*c*v):(i[10]=-1,i[14]=-2*c),i},g.b7=function(i,n,s){var c=Math.sin(s),f=Math.cos(s),v=n[4],x=n[5],b=n[6],S=n[7],k=n[8],E=n[9],A=n[10],B=n[11];return n!==i&&(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[4]=v*f+k*c,i[5]=x*f+E*c,i[6]=b*f+A*c,i[7]=S*f+B*c,i[8]=k*f-v*c,i[9]=E*f-x*c,i[10]=A*f-b*c,i[11]=B*f-S*c,i},g.b8=G,g.b9=Q,g.bA=bb,g.bB=function(i){return i.message===Ge},g.bC=ca,g.bD=Si,g.ba=function(i){return i*Math.PI/180},g.bb=function(i,n){const{x:s,y:c}=Kh.fromLngLat(n);return!(i<0||i>25||c<0||c>=1||s<0||s>=1)},g.bc=function(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=n[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},g.bd=class extends P{},g.be=Hy,g.bf=aE,g.bh=Rt,g.bi=function(i,n){Dt.REGISTERED_PROTOCOLS[i]=n},g.bj=function(i){delete Dt.REGISTERED_PROTOCOLS[i]},g.bk=function(i,n){const s={};for(let f=0;f<i.length;f++){const v=n&&n[i[f].id]||Wp(i[f]);n&&(n[i[f].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(i[f])}const c=[];for(const f in s)c.push(s[f]);return c},g.bl=dt,g.bm=Yb,g.bn=Qb,g.bo=Mb,g.bp=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=fn/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const n=i.bucket.layers[0],s=n.layout,c=n._unevaluatedLayout._values,f={layoutIconSize:c["icon-size"].possiblyEvaluate(new Nr(i.bucket.zoom+1),i.canonical),layoutTextSize:c["text-size"].possiblyEvaluate(new Nr(i.bucket.zoom+1),i.canonical),textMaxSize:c["text-size"].possiblyEvaluate(new Nr(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:E}=i.bucket.textSizeData;f.compositeTextSizes=[c["text-size"].possiblyEvaluate(new Nr(k),i.canonical),c["text-size"].possiblyEvaluate(new Nr(E),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:E}=i.bucket.iconSizeData;f.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new Nr(k),i.canonical),c["icon-size"].possiblyEvaluate(new Nr(E),i.canonical)]}const v=s.get("text-line-height")*vn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",b=s.get("text-keep-upright"),S=s.get("text-size");for(const k of i.bucket.features){const E=s.get("text-font").evaluate(k,{},i.canonical).join(","),A=S.evaluate(k,{},i.canonical),B=f.layoutTextSize.evaluate(k,{},i.canonical),N=f.layoutIconSize.evaluate(k,{},i.canonical),W={horizontal:{},vertical:void 0},X=k.text;let oe,ce=[0,0];if(X){const Ce=X.toString(),Fe=s.get("text-letter-spacing").evaluate(k,{},i.canonical)*vn,He=dy(Ce)?Fe:0,lt=s.get("text-anchor").evaluate(k,{},i.canonical),Et=h1(n,k,i.canonical);if(!Et){const pt=s.get("text-radial-offset").evaluate(k,{},i.canonical);ce=pt?u1(lt,[pt*vn,Xy]):s.get("text-offset").evaluate(k,{},i.canonical).map(ut=>ut*vn)}let ot=x?"center":s.get("text-justify").evaluate(k,{},i.canonical);const nt=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(k,{},i.canonical)*vn:1/0,yt=()=>{i.bucket.allowVerticalPlacement&&Ah(Ce)&&(W.vertical=pf(X,i.glyphMap,i.glyphPositions,i.imagePositions,E,nt,v,lt,"left",He,ce,g.ah.vertical,!0,B,A))};if(!x&&Et){const pt=new Set;if(ot==="auto")for(let Ne=0;Ne<Et.values.length;Ne+=2)pt.add(Ky(Et.values[Ne]));else pt.add(ot);let ut=!1;for(const Ne of pt)if(!W.horizontal[Ne])if(ut)W.horizontal[Ne]=W.horizontal[0];else{const vt=pf(X,i.glyphMap,i.glyphPositions,i.imagePositions,E,nt,v,"center",Ne,He,ce,g.ah.horizontal,!1,B,A);vt&&(W.horizontal[Ne]=vt,ut=vt.positionedLines.length===1)}yt()}else{ot==="auto"&&(ot=Ky(lt));const pt=pf(X,i.glyphMap,i.glyphPositions,i.imagePositions,E,nt,v,lt,ot,He,ce,g.ah.horizontal,!1,B,A);pt&&(W.horizontal[ot]=pt),yt(),Ah(Ce)&&x&&b&&(W.vertical=pf(X,i.glyphMap,i.glyphPositions,i.imagePositions,E,nt,v,lt,ot,He,ce,g.ah.vertical,!1,B,A))}}let ke=!1;if(k.icon&&k.icon.name){const Ce=i.imageMap[k.icon.name];Ce&&(oe=UI(i.imagePositions[k.icon.name],s.get("icon-offset").evaluate(k,{},i.canonical),s.get("icon-anchor").evaluate(k,{},i.canonical)),ke=!!Ce.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=ke:i.bucket.sdfIcons!==ke&&Me("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ce.pixelRatio!==i.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const ye=p1(W.horizontal)||W.vertical;i.bucket.iconsInText=!!ye&&ye.iconsInText,(ye||oe)&&oE(i.bucket,k,W,oe,i.imageMap,f,B,N,ce,ke,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},g.bq=Dy,g.br=Ay,g.bs=Ry,g.bt=Ta,g.bu=By,g.bv=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},g.bw=function(i,n,s,c,f){return u(this,void 0,void 0,function*(){if(U())try{return yield Ee(i,n,s,c,f)}catch{}return function(v,x,b,S,k){const E=v.width,A=v.height;We&&Ze||(We=new OffscreenCanvas(E,A),Ze=We.getContext("2d",{willReadFrequently:!0})),We.width=E,We.height=A,Ze.drawImage(v,0,0,E,A);const B=Ze.getImageData(x,b,S,k);return Ze.clearRect(0,0,E,A),B.data}(i,n,s,c,f)})},g.bx=Kb,g.by=I,g.bz=M,g.c=St,g.d=i=>u(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),g.e=_e,g.f=i=>new Promise((n,s)=>{const c=new Image;c.onload=()=>{n(c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=be})},c.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(i)],{type:"image/png"});c.src=i.byteLength?URL.createObjectURL(f):be}),g.g=$t,g.h=(i,n)=>Ut(_e(i,{type:"json"}),n),g.i=Le,g.j=Nt,g.k=yr,g.l=(i,n)=>Ut(_e(i,{type:"arrayBuffer"}),n),g.m=Ut,g.n=function(i){return new By(i).readFields(BI,[])},g.o=Nh,g.p=Pb,g.q=_,g.r=uy,g.s=Ct,g.t=Eh,g.u=As,g.v=ze,g.w=Me,g.x=function([i,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:i*Math.cos(n)*Math.sin(s),y:i*Math.sin(n)*Math.sin(s),z:i*Math.cos(s)}},g.y=ii,g.z=Nr}),p("worker",["./shared"],function(g){class u{constructor(O){this.keyCache={},O&&this.replace(O)}replace(O){this._layerConfigs={},this._layers={},this.update(O,[])}update(O,$){for(const se of O){this._layerConfigs[se.id]=se;const ve=this._layers[se.id]=g.aA(se);ve._featureFilter=g.a7(ve.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of $)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const K=g.bk(Object.values(this._layerConfigs),this.keyCache);for(const se of K){const ve=se.map(Be=>this._layers[Be.id]),we=ve[0];if(we.visibility==="none")continue;const Te=we.source||"";let pe=this.familiesBySource[Te];pe||(pe=this.familiesBySource[Te]={});const Oe=we.sourceLayer||"_geojsonTileLayer";let Ue=pe[Oe];Ue||(Ue=pe[Oe]=[]),Ue.push(ve)}}}class I{constructor(O){const $={},K=[];for(const Te in O){const pe=O[Te],Oe=$[Te]={};for(const Ue in pe){const Be=pe[+Ue];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;const Qe={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};K.push(Qe),Oe[Ue]={rect:Qe,metrics:Be.metrics}}}const{w:se,h:ve}=g.p(K),we=new g.o({width:se||1,height:ve||1});for(const Te in O){const pe=O[Te];for(const Oe in pe){const Ue=pe[+Oe];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const Be=$[Te][Oe].rect;g.o.copy(Ue.bitmap,we,{x:0,y:0},{x:Be.x+1,y:Be.y+1},Ue.bitmap)}}this.image=we,this.positions=$}}g.bl("GlyphAtlas",I);class M{constructor(O){this.tileID=new g.S(O.tileID.overscaledZ,O.tileID.wrap,O.tileID.canonical.z,O.tileID.canonical.x,O.tileID.canonical.y),this.uid=O.uid,this.zoom=O.zoom,this.pixelRatio=O.pixelRatio,this.tileSize=O.tileSize,this.source=O.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=O.showCollisionBoxes,this.collectResourceTiming=!!O.collectResourceTiming,this.returnDependencies=!!O.returnDependencies,this.promoteId=O.promoteId,this.inFlightDependencies=[]}parse(O,$,K,se){return g._(this,void 0,void 0,function*(){this.status="parsing",this.data=O,this.collisionBoxArray=new g.a5;const ve=new g.bm(Object.keys(O.layers).sort()),we=new g.bn(this.tileID,this.promoteId);we.bucketLayerIDs=[];const Te={},pe={featureIndex:we,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Oe=$.familiesBySource[this.source];for(const Zt in Oe){const wr=O.layers[Zt];if(!wr)continue;wr.version===1&&g.w(`Vector tile source "${this.source}" layer "${Zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gr=ve.encode(Zt),wn=[];for(let Mn=0;Mn<wr.length;Mn++){const Zn=wr.feature(Mn),Js=we.getId(Zn,Zt);wn.push({feature:Zn,id:Js,index:Mn,sourceLayerIndex:Gr})}for(const Mn of Oe[Zt]){const Zn=Mn[0];Zn.source!==this.source&&g.w(`layer.source = ${Zn.source} does not equal this.source = ${this.source}`),Zn.minzoom&&this.zoom<Math.floor(Zn.minzoom)||Zn.maxzoom&&this.zoom>=Zn.maxzoom||Zn.visibility!=="none"&&(F(Mn,this.zoom,K),(Te[Zn.id]=Zn.createBucket({index:we.bucketLayerIDs.length,layers:Mn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gr,sourceID:this.source})).populate(wn,pe,this.tileID.canonical),we.bucketLayerIDs.push(Mn.map(Js=>Js.id)))}}const Ue=g.aF(pe.glyphDependencies,Zt=>Object.keys(Zt).map(Number));this.inFlightDependencies.forEach(Zt=>Zt==null?void 0:Zt.abort()),this.inFlightDependencies=[];let Be=Promise.resolve({});if(Object.keys(Ue).length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),Be=se.sendAsync({type:"GG",data:{stacks:Ue,source:this.source,tileID:this.tileID,type:"glyphs"}},Zt)}const Qe=Object.keys(pe.iconDependencies);let xt=Promise.resolve({});if(Qe.length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),xt=se.sendAsync({type:"GI",data:{icons:Qe,source:this.source,tileID:this.tileID,type:"icons"}},Zt)}const It=Object.keys(pe.patternDependencies);let hr=Promise.resolve({});if(It.length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),hr=se.sendAsync({type:"GI",data:{icons:It,source:this.source,tileID:this.tileID,type:"patterns"}},Zt)}const[jt,dr,tr]=yield Promise.all([Be,xt,hr]),dn=new I(jt),Xr=new g.bo(dr,tr);for(const Zt in Te){const wr=Te[Zt];wr instanceof g.a6?(F(wr.layers,this.zoom,K),g.bp({bucket:wr,glyphMap:jt,glyphPositions:dn.positions,imageMap:dr,imagePositions:Xr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):wr.hasPattern&&(wr instanceof g.bq||wr instanceof g.br||wr instanceof g.bs)&&(F(wr.layers,this.zoom,K),wr.addFeatures(pe,this.tileID.canonical,Xr.patternPositions))}return this.status="done",{buckets:Object.values(Te).filter(Zt=>!Zt.isEmpty()),featureIndex:we,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:dn.image,imageAtlas:Xr,glyphMap:this.returnDependencies?jt:null,iconMap:this.returnDependencies?dr:null,glyphPositions:this.returnDependencies?dn.positions:null}})}}function F(ne,O,$){const K=new g.z(O);for(const se of ne)se.recalculate(K,$)}class L{constructor(O,$,K){this.actor=O,this.layerIndex=$,this.availableImages=K,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(O,$){return g._(this,void 0,void 0,function*(){const K=yield g.l(O.request,$);try{return{vectorTile:new g.bt.VectorTile(new g.bu(K.data)),rawData:K.data,cacheControl:K.cacheControl,expires:K.expires}}catch(se){const ve=new Uint8Array(K.data);let we=`Unable to parse the tile at ${O.request.url}, `;throw we+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${se.message}`,new Error(we)}})}loadTile(O){return g._(this,void 0,void 0,function*(){const $=O.uid,K=!!(O&&O.request&&O.request.collectResourceTiming)&&new g.bv(O.request),se=new M(O);this.loading[$]=se;const ve=new AbortController;se.abort=ve;try{const we=yield this.loadVectorTile(O,ve);if(delete this.loading[$],!we)return null;const Te=we.rawData,pe={};we.expires&&(pe.expires=we.expires),we.cacheControl&&(pe.cacheControl=we.cacheControl);const Oe={};if(K){const Be=K.finish();Be&&(Oe.resourceTiming=JSON.parse(JSON.stringify(Be)))}se.vectorTile=we.vectorTile;const Ue=se.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[$]=se,this.fetching[$]={rawTileData:Te,cacheControl:pe,resourceTiming:Oe};try{const Be=yield Ue;return g.e({rawTileData:Te.slice(0)},Be,pe,Oe)}finally{delete this.fetching[$]}}catch(we){throw delete this.loading[$],se.status="done",this.loaded[$]=se,we}})}reloadTile(O){return g._(this,void 0,void 0,function*(){const $=O.uid;if(!this.loaded||!this.loaded[$])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const K=this.loaded[$];if(K.showCollisionBoxes=O.showCollisionBoxes,K.status==="parsing"){const se=yield K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor);let ve;if(this.fetching[$]){const{rawTileData:we,cacheControl:Te,resourceTiming:pe}=this.fetching[$];delete this.fetching[$],ve=g.e({rawTileData:we.slice(0)},se,Te,pe)}else ve=se;return ve}if(K.status==="done"&&K.vectorTile)return K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(O){return g._(this,void 0,void 0,function*(){const $=this.loading,K=O.uid;$&&$[K]&&$[K].abort&&($[K].abort.abort(),delete $[K])})}removeTile(O){return g._(this,void 0,void 0,function*(){this.loaded&&this.loaded[O.uid]&&delete this.loaded[O.uid]})}}class z{constructor(){this.loaded={}}loadTile(O){return g._(this,void 0,void 0,function*(){const{uid:$,encoding:K,rawImageData:se,redFactor:ve,greenFactor:we,blueFactor:Te,baseShift:pe}=O,Oe=se.width+2,Ue=se.height+2,Be=g.b(se)?new g.R({width:Oe,height:Ue},yield g.bw(se,-1,-1,Oe,Ue)):se,Qe=new g.bx($,Be,K,ve,we,Te,pe);return this.loaded=this.loaded||{},this.loaded[$]=Qe,Qe})}removeTile(O){const $=this.loaded,K=O.uid;$&&$[K]&&delete $[K]}}function J(ne,O){if(ne.length!==0){H(ne[0],O);for(var $=1;$<ne.length;$++)H(ne[$],!O)}}function H(ne,O){for(var $=0,K=0,se=0,ve=ne.length,we=ve-1;se<ve;we=se++){var Te=(ne[se][0]-ne[we][0])*(ne[we][1]+ne[se][1]),pe=$+Te;K+=Math.abs($)>=Math.abs(Te)?$-pe+Te:Te-pe+$,$=pe}$+K>=0!=!!O&&ne.reverse()}var re=g.by(function ne(O,$){var K,se=O&&O.type;if(se==="FeatureCollection")for(K=0;K<O.features.length;K++)ne(O.features[K],$);else if(se==="GeometryCollection")for(K=0;K<O.geometries.length;K++)ne(O.geometries[K],$);else if(se==="Feature")ne(O.geometry,$);else if(se==="Polygon")J(O.coordinates,$);else if(se==="MultiPolygon")for(K=0;K<O.coordinates.length;K++)J(O.coordinates[K],$);return O});const le=g.bt.VectorTileFeature.prototype.toGeoJSON;var V={exports:{}},U=g.bz,G=g.bt.VectorTileFeature,Q=fe;function fe(ne,O){this.options=O||{},this.features=ne,this.length=ne.length}function he(ne,O){this.id=typeof ne.id=="number"?ne.id:void 0,this.type=ne.type,this.rawGeometry=ne.type===1?[ne.geometry]:ne.geometry,this.properties=ne.tags,this.extent=O||4096}fe.prototype.feature=function(ne){return new he(this.features[ne],this.options.extent)},he.prototype.loadGeometry=function(){var ne=this.rawGeometry;this.geometry=[];for(var O=0;O<ne.length;O++){for(var $=ne[O],K=[],se=0;se<$.length;se++)K.push(new U($[se][0],$[se][1]));this.geometry.push(K)}return this.geometry},he.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ne=this.geometry,O=1/0,$=-1/0,K=1/0,se=-1/0,ve=0;ve<ne.length;ve++)for(var we=ne[ve],Te=0;Te<we.length;Te++){var pe=we[Te];O=Math.min(O,pe.x),$=Math.max($,pe.x),K=Math.min(K,pe.y),se=Math.max(se,pe.y)}return[O,K,$,se]},he.prototype.toGeoJSON=G.prototype.toGeoJSON;var _e=g.bA,ge=Q;function Ae(ne){var O=new _e;return function($,K){for(var se in $.layers)K.writeMessage(3,Re,$.layers[se])}(ne,O),O.finish()}function Re(ne,O){var $;O.writeVarintField(15,ne.version||1),O.writeStringField(1,ne.name||""),O.writeVarintField(5,ne.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<ne.length;$++)K.feature=ne.feature($),O.writeMessage(2,De,K);var se=K.keys;for($=0;$<se.length;$++)O.writeStringField(3,se[$]);var ve=K.values;for($=0;$<ve.length;$++)O.writeMessage(4,$e,ve[$])}function De(ne,O){var $=ne.feature;$.id!==void 0&&O.writeVarintField(1,$.id),O.writeMessage(2,Z,ne),O.writeVarintField(3,$.type),O.writeMessage(4,Le,$)}function Z(ne,O){var $=ne.feature,K=ne.keys,se=ne.values,ve=ne.keycache,we=ne.valuecache;for(var Te in $.properties){var pe=$.properties[Te],Oe=ve[Te];if(pe!==null){Oe===void 0&&(K.push(Te),ve[Te]=Oe=K.length-1),O.writeVarint(Oe);var Ue=typeof pe;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(pe=JSON.stringify(pe));var Be=Ue+":"+pe,Qe=we[Be];Qe===void 0&&(se.push(pe),we[Be]=Qe=se.length-1),O.writeVarint(Qe)}}}function Me(ne,O){return(O<<3)+(7&ne)}function Ie(ne){return ne<<1^ne>>31}function Le(ne,O){for(var $=ne.loadGeometry(),K=ne.type,se=0,ve=0,we=$.length,Te=0;Te<we;Te++){var pe=$[Te],Oe=1;K===1&&(Oe=pe.length),O.writeVarint(Me(1,Oe));for(var Ue=K===3?pe.length-1:pe.length,Be=0;Be<Ue;Be++){Be===1&&K!==1&&O.writeVarint(Me(2,Ue-1));var Qe=pe[Be].x-se,xt=pe[Be].y-ve;O.writeVarint(Ie(Qe)),O.writeVarint(Ie(xt)),se+=Qe,ve+=xt}K===3&&O.writeVarint(Me(7,1))}}function $e(ne,O){var $=typeof ne;$==="string"?O.writeStringField(1,ne):$==="boolean"?O.writeBooleanField(7,ne):$==="number"&&(ne%1!=0?O.writeDoubleField(3,ne):ne<0?O.writeSVarintField(6,ne):O.writeVarintField(5,ne))}V.exports=Ae,V.exports.fromVectorTileJs=Ae,V.exports.fromGeojsonVt=function(ne,O){O=O||{};var $={};for(var K in ne)$[K]=new ge(ne[K].features,O),$[K].name=K,$[K].version=O.version,$[K].extent=O.extent;return Ae({layers:$})},V.exports.GeoJSONWrapper=ge;var Ke=g.by(V.exports);const be={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ne=>ne},Ee=Math.fround||(We=new Float32Array(1),ne=>(We[0]=+ne,We[0]));var We;const Ze=3,Ge=5,St=6;class Dt{constructor(O){this.options=Object.assign(Object.create(be),O),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(O){const{log:$,minZoom:K,maxZoom:se}=this.options;$&&console.time("total time");const ve=`prepare ${O.length} points`;$&&console.time(ve),this.points=O;const we=[];for(let pe=0;pe<O.length;pe++){const Oe=O[pe];if(!Oe.geometry)continue;const[Ue,Be]=Oe.geometry.coordinates,Qe=Ee(Rt(Ue)),xt=Ee(cr(Be));we.push(Qe,xt,1/0,pe,-1,1),this.options.reduce&&we.push(0)}let Te=this.trees[se+1]=this._createTree(we);$&&console.timeEnd(ve);for(let pe=se;pe>=K;pe--){const Oe=+Date.now();Te=this.trees[pe]=this._createTree(this._cluster(Te,pe)),$&&console.log("z%d: %d clusters in %dms",pe,Te.numItems,+Date.now()-Oe)}return $&&console.timeEnd("total time"),this}getClusters(O,$){let K=((O[0]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,O[1]));let ve=O[2]===180?180:((O[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)K=-180,ve=180;else if(K>ve){const Be=this.getClusters([K,se,180,we],$),Qe=this.getClusters([-180,se,ve,we],$);return Be.concat(Qe)}const Te=this.trees[this._limitZoom($)],pe=Te.range(Rt(K),cr(we),Rt(ve),cr(se)),Oe=Te.data,Ue=[];for(const Be of pe){const Qe=this.stride*Be;Ue.push(Oe[Qe+Ge]>1?$t(Oe,Qe,this.clusterProps):this.points[Oe[Qe+Ze]])}return Ue}getChildren(O){const $=this._getOriginId(O),K=this._getOriginZoom(O),se="No cluster with the specified id.",ve=this.trees[K];if(!ve)throw new Error(se);const we=ve.data;if($*this.stride>=we.length)throw new Error(se);const Te=this.options.radius/(this.options.extent*Math.pow(2,K-1)),pe=ve.within(we[$*this.stride],we[$*this.stride+1],Te),Oe=[];for(const Ue of pe){const Be=Ue*this.stride;we[Be+4]===O&&Oe.push(we[Be+Ge]>1?$t(we,Be,this.clusterProps):this.points[we[Be+Ze]])}if(Oe.length===0)throw new Error(se);return Oe}getLeaves(O,$,K){const se=[];return this._appendLeaves(se,O,$=$||10,K=K||0,0),se}getTile(O,$,K){const se=this.trees[this._limitZoom(O)],ve=Math.pow(2,O),{extent:we,radius:Te}=this.options,pe=Te/we,Oe=(K-pe)/ve,Ue=(K+1+pe)/ve,Be={features:[]};return this._addTileFeatures(se.range(($-pe)/ve,Oe,($+1+pe)/ve,Ue),se.data,$,K,ve,Be),$===0&&this._addTileFeatures(se.range(1-pe/ve,Oe,1,Ue),se.data,ve,K,ve,Be),$===ve-1&&this._addTileFeatures(se.range(0,Oe,pe/ve,Ue),se.data,-1,K,ve,Be),Be.features.length?Be:null}getClusterExpansionZoom(O){let $=this._getOriginZoom(O)-1;for(;$<=this.options.maxZoom;){const K=this.getChildren(O);if($++,K.length!==1)break;O=K[0].properties.cluster_id}return $}_appendLeaves(O,$,K,se,ve){const we=this.getChildren($);for(const Te of we){const pe=Te.properties;if(pe&&pe.cluster?ve+pe.point_count<=se?ve+=pe.point_count:ve=this._appendLeaves(O,pe.cluster_id,K,se,ve):ve<se?ve++:O.push(Te),O.length===K)break}return ve}_createTree(O){const $=new g.av(O.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<O.length;K+=this.stride)$.add(O[K],O[K+1]);return $.finish(),$.data=O,$}_addTileFeatures(O,$,K,se,ve,we){for(const Te of O){const pe=Te*this.stride,Oe=$[pe+Ge]>1;let Ue,Be,Qe;if(Oe)Ue=Vt($,pe,this.clusterProps),Be=$[pe],Qe=$[pe+1];else{const hr=this.points[$[pe+Ze]];Ue=hr.properties;const[jt,dr]=hr.geometry.coordinates;Be=Rt(jt),Qe=cr(dr)}const xt={type:1,geometry:[[Math.round(this.options.extent*(Be*ve-K)),Math.round(this.options.extent*(Qe*ve-se))]],tags:Ue};let It;It=Oe||this.options.generateId?$[pe+Ze]:this.points[$[pe+Ze]].id,It!==void 0&&(xt.id=It),we.features.push(xt)}}_limitZoom(O){return Math.max(this.options.minZoom,Math.min(Math.floor(+O),this.options.maxZoom+1))}_cluster(O,$){const{radius:K,extent:se,reduce:ve,minPoints:we}=this.options,Te=K/(se*Math.pow(2,$)),pe=O.data,Oe=[],Ue=this.stride;for(let Be=0;Be<pe.length;Be+=Ue){if(pe[Be+2]<=$)continue;pe[Be+2]=$;const Qe=pe[Be],xt=pe[Be+1],It=O.within(pe[Be],pe[Be+1],Te),hr=pe[Be+Ge];let jt=hr;for(const dr of It){const tr=dr*Ue;pe[tr+2]>$&&(jt+=pe[tr+Ge])}if(jt>hr&&jt>=we){let dr,tr=Qe*hr,dn=xt*hr,Xr=-1;const Zt=((Be/Ue|0)<<5)+($+1)+this.points.length;for(const wr of It){const Gr=wr*Ue;if(pe[Gr+2]<=$)continue;pe[Gr+2]=$;const wn=pe[Gr+Ge];tr+=pe[Gr]*wn,dn+=pe[Gr+1]*wn,pe[Gr+4]=Zt,ve&&(dr||(dr=this._map(pe,Be,!0),Xr=this.clusterProps.length,this.clusterProps.push(dr)),ve(dr,this._map(pe,Gr)))}pe[Be+4]=Zt,Oe.push(tr/jt,dn/jt,1/0,Zt,-1,jt),ve&&Oe.push(Xr)}else{for(let dr=0;dr<Ue;dr++)Oe.push(pe[Be+dr]);if(jt>1)for(const dr of It){const tr=dr*Ue;if(!(pe[tr+2]<=$)){pe[tr+2]=$;for(let dn=0;dn<Ue;dn++)Oe.push(pe[tr+dn])}}}}return Oe}_getOriginId(O){return O-this.points.length>>5}_getOriginZoom(O){return(O-this.points.length)%32}_map(O,$,K){if(O[$+Ge]>1){const we=this.clusterProps[O[$+St]];return K?Object.assign({},we):we}const se=this.points[O[$+Ze]].properties,ve=this.options.map(se);return K&&ve===se?Object.assign({},ve):ve}}function $t(ne,O,$){return{type:"Feature",id:ne[O+Ze],properties:Vt(ne,O,$),geometry:{type:"Point",coordinates:[(K=ne[O],360*(K-.5)),Ut(ne[O+1])]}};var K}function Vt(ne,O,$){const K=ne[O+Ge],se=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,ve=ne[O+St],we=ve===-1?{}:Object.assign({},$[ve]);return Object.assign(we,{cluster:!0,cluster_id:ne[O+Ze],point_count:K,point_count_abbreviated:se})}function Rt(ne){return ne/360+.5}function cr(ne){const O=Math.sin(ne*Math.PI/180),$=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return $<0?0:$>1?1:$}function Ut(ne){const O=(180-360*ne)*Math.PI/180;return 360*Math.atan(Math.exp(O))/Math.PI-90}function Ct(ne,O,$,K){let se=K;const ve=O+($-O>>1);let we,Te=$-O;const pe=ne[O],Oe=ne[O+1],Ue=ne[$],Be=ne[$+1];for(let Qe=O+3;Qe<$;Qe+=3){const xt=qt(ne[Qe],ne[Qe+1],pe,Oe,Ue,Be);if(xt>se)we=Qe,se=xt;else if(xt===se){const It=Math.abs(Qe-ve);It<Te&&(we=Qe,Te=It)}}se>K&&(we-O>3&&Ct(ne,O,we,K),ne[we+2]=se,$-we>3&&Ct(ne,we,$,K))}function qt(ne,O,$,K,se,ve){let we=se-$,Te=ve-K;if(we!==0||Te!==0){const pe=((ne-$)*we+(O-K)*Te)/(we*we+Te*Te);pe>1?($=se,K=ve):pe>0&&($+=we*pe,K+=Te*pe)}return we=ne-$,Te=O-K,we*we+Te*Te}function Ht(ne,O,$,K){const se={id:ne??null,type:O,geometry:$,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(O==="Point"||O==="MultiPoint"||O==="LineString")yr(se,$);else if(O==="Polygon")yr(se,$[0]);else if(O==="MultiLineString")for(const ve of $)yr(se,ve);else if(O==="MultiPolygon")for(const ve of $)yr(se,ve[0]);return se}function yr(ne,O){for(let $=0;$<O.length;$+=3)ne.minX=Math.min(ne.minX,O[$]),ne.minY=Math.min(ne.minY,O[$+1]),ne.maxX=Math.max(ne.maxX,O[$]),ne.maxY=Math.max(ne.maxY,O[$+1])}function Nt(ne,O,$,K){if(!O.geometry)return;const se=O.geometry.coordinates;if(se&&se.length===0)return;const ve=O.geometry.type,we=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2);let Te=[],pe=O.id;if($.promoteId?pe=O.properties[$.promoteId]:$.generateId&&(pe=K||0),ve==="Point")sr(se,Te);else if(ve==="MultiPoint")for(const Oe of se)sr(Oe,Te);else if(ve==="LineString")ze(se,Te,we,!1);else if(ve==="MultiLineString"){if($.lineMetrics){for(const Oe of se)Te=[],ze(Oe,Te,we,!1),ne.push(Ht(pe,"LineString",Te,O.properties));return}Or(se,Te,we,!1)}else if(ve==="Polygon")Or(se,Te,we,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const Oe of O.geometry.geometries)Nt(ne,{id:pe,geometry:Oe,properties:O.properties},$,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Oe of se){const Ue=[];Or(Oe,Ue,we,!0),Te.push(Ue)}}ne.push(Ht(pe,ve,Te,O.properties))}function sr(ne,O){O.push(Cr(ne[0]),At(ne[1]),0)}function ze(ne,O,$,K){let se,ve,we=0;for(let pe=0;pe<ne.length;pe++){const Oe=Cr(ne[pe][0]),Ue=At(ne[pe][1]);O.push(Oe,Ue,0),pe>0&&(we+=K?(se*Ue-Oe*ve)/2:Math.sqrt(Math.pow(Oe-se,2)+Math.pow(Ue-ve,2))),se=Oe,ve=Ue}const Te=O.length-3;O[2]=1,Ct(O,0,Te,$),O[Te+2]=1,O.size=Math.abs(we),O.start=0,O.end=O.size}function Or(ne,O,$,K){for(let se=0;se<ne.length;se++){const ve=[];ze(ne[se],ve,$,K),O.push(ve)}}function Cr(ne){return ne/360+.5}function At(ne){const O=Math.sin(ne*Math.PI/180),$=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return $<0?0:$>1?1:$}function er(ne,O,$,K,se,ve,we,Te){if(K/=O,ve>=($/=O)&&we<K)return ne;if(we<$||ve>=K)return null;const pe=[];for(const Oe of ne){const Ue=Oe.geometry;let Be=Oe.type;const Qe=se===0?Oe.minX:Oe.minY,xt=se===0?Oe.maxX:Oe.maxY;if(Qe>=$&&xt<K){pe.push(Oe);continue}if(xt<$||Qe>=K)continue;let It=[];if(Be==="Point"||Be==="MultiPoint")xr(Ue,It,$,K,se);else if(Be==="LineString")_t(Ue,It,$,K,se,!1,Te.lineMetrics);else if(Be==="MultiLineString")Tr(Ue,It,$,K,se,!1);else if(Be==="Polygon")Tr(Ue,It,$,K,se,!0);else if(Be==="MultiPolygon")for(const hr of Ue){const jt=[];Tr(hr,jt,$,K,se,!0),jt.length&&It.push(jt)}if(It.length){if(Te.lineMetrics&&Be==="LineString"){for(const hr of It)pe.push(Ht(Oe.id,Be,hr,Oe.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(It.length===1?(Be="LineString",It=It[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=It.length===3?"Point":"MultiPoint"),pe.push(Ht(Oe.id,Be,It,Oe.tags))}}return pe.length?pe:null}function xr(ne,O,$,K,se){for(let ve=0;ve<ne.length;ve+=3){const we=ne[ve+se];we>=$&&we<=K&&un(O,ne[ve],ne[ve+1],ne[ve+2])}}function _t(ne,O,$,K,se,ve,we){let Te=_n(ne);const pe=se===0?En:Ln;let Oe,Ue,Be=ne.start;for(let jt=0;jt<ne.length-3;jt+=3){const dr=ne[jt],tr=ne[jt+1],dn=ne[jt+2],Xr=ne[jt+3],Zt=ne[jt+4],wr=se===0?dr:tr,Gr=se===0?Xr:Zt;let wn=!1;we&&(Oe=Math.sqrt(Math.pow(dr-Xr,2)+Math.pow(tr-Zt,2))),wr<$?Gr>$&&(Ue=pe(Te,dr,tr,Xr,Zt,$),we&&(Te.start=Be+Oe*Ue)):wr>K?Gr<K&&(Ue=pe(Te,dr,tr,Xr,Zt,K),we&&(Te.start=Be+Oe*Ue)):un(Te,dr,tr,dn),Gr<$&&wr>=$&&(Ue=pe(Te,dr,tr,Xr,Zt,$),wn=!0),Gr>K&&wr<=K&&(Ue=pe(Te,dr,tr,Xr,Zt,K),wn=!0),!ve&&wn&&(we&&(Te.end=Be+Oe*Ue),O.push(Te),Te=_n(ne)),we&&(Be+=Oe)}let Qe=ne.length-3;const xt=ne[Qe],It=ne[Qe+1],hr=se===0?xt:It;hr>=$&&hr<=K&&un(Te,xt,It,ne[Qe+2]),Qe=Te.length-3,ve&&Qe>=3&&(Te[Qe]!==Te[0]||Te[Qe+1]!==Te[1])&&un(Te,Te[0],Te[1],Te[2]),Te.length&&O.push(Te)}function _n(ne){const O=[];return O.size=ne.size,O.start=ne.start,O.end=ne.end,O}function Tr(ne,O,$,K,se,ve){for(const we of ne)_t(we,O,$,K,se,ve,!1)}function un(ne,O,$,K){ne.push(O,$,K)}function En(ne,O,$,K,se,ve){const we=(ve-O)/(K-O);return un(ne,ve,$+(se-$)*we,1),we}function Ln(ne,O,$,K,se,ve){const we=(ve-$)/(se-$);return un(ne,O+(K-O)*we,ve,1),we}function Xe(ne,O){const $=[];for(let K=0;K<ne.length;K++){const se=ne[K],ve=se.type;let we;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")we=hn(se.geometry,O);else if(ve==="MultiLineString"||ve==="Polygon"){we=[];for(const Te of se.geometry)we.push(hn(Te,O))}else if(ve==="MultiPolygon"){we=[];for(const Te of se.geometry){const pe=[];for(const Oe of Te)pe.push(hn(Oe,O));we.push(pe)}}$.push(Ht(se.id,ve,we,se.tags))}return $}function hn(ne,O){const $=[];$.size=ne.size,ne.start!==void 0&&($.start=ne.start,$.end=ne.end);for(let K=0;K<ne.length;K+=3)$.push(ne[K]+O,ne[K+1],ne[K+2]);return $}function ar(ne,O){if(ne.transformed)return ne;const $=1<<ne.z,K=ne.x,se=ne.y;for(const ve of ne.features){const we=ve.geometry,Te=ve.type;if(ve.geometry=[],Te===1)for(let pe=0;pe<we.length;pe+=2)ve.geometry.push(zt(we[pe],we[pe+1],O,$,K,se));else for(let pe=0;pe<we.length;pe++){const Oe=[];for(let Ue=0;Ue<we[pe].length;Ue+=2)Oe.push(zt(we[pe][Ue],we[pe][Ue+1],O,$,K,se));ve.geometry.push(Oe)}}return ne.transformed=!0,ne}function zt(ne,O,$,K,se,ve){return[Math.round($*(ne*K-se)),Math.round($*(O*K-ve))]}function $r(ne,O,$,K,se){const ve=O===se.maxZoom?0:se.tolerance/((1<<O)*se.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:ne.length,source:null,x:$,y:K,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Te of ne)qe(we,Te,ve,se);return we}function qe(ne,O,$,K){const se=O.geometry,ve=O.type,we=[];if(ne.minX=Math.min(ne.minX,O.minX),ne.minY=Math.min(ne.minY,O.minY),ne.maxX=Math.max(ne.maxX,O.maxX),ne.maxY=Math.max(ne.maxY,O.maxY),ve==="Point"||ve==="MultiPoint")for(let Te=0;Te<se.length;Te+=3)we.push(se[Te],se[Te+1]),ne.numPoints++,ne.numSimplified++;else if(ve==="LineString")Tt(we,se,ne,$,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let Te=0;Te<se.length;Te++)Tt(we,se[Te],ne,$,ve==="Polygon",Te===0);else if(ve==="MultiPolygon")for(let Te=0;Te<se.length;Te++){const pe=se[Te];for(let Oe=0;Oe<pe.length;Oe++)Tt(we,pe[Oe],ne,$,!0,Oe===0)}if(we.length){let Te=O.tags||null;if(ve==="LineString"&&K.lineMetrics){Te={};for(const Oe in O.tags)Te[Oe]=O.tags[Oe];Te.mapbox_clip_start=se.start/se.size,Te.mapbox_clip_end=se.end/se.size}const pe={geometry:we,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Te};O.id!==null&&(pe.id=O.id),ne.features.push(pe)}}function Tt(ne,O,$,K,se,ve){const we=K*K;if(K>0&&O.size<(se?we:K))return void($.numPoints+=O.length/3);const Te=[];for(let pe=0;pe<O.length;pe+=3)(K===0||O[pe+2]>we)&&($.numSimplified++,Te.push(O[pe],O[pe+1])),$.numPoints++;se&&function(pe,Oe){let Ue=0;for(let Be=0,Qe=pe.length,xt=Qe-2;Be<Qe;xt=Be,Be+=2)Ue+=(pe[Be]-pe[xt])*(pe[Be+1]+pe[xt+1]);if(Ue>0===Oe)for(let Be=0,Qe=pe.length;Be<Qe/2;Be+=2){const xt=pe[Be],It=pe[Be+1];pe[Be]=pe[Qe-2-Be],pe[Be+1]=pe[Qe-1-Be],pe[Qe-2-Be]=xt,pe[Qe-1-Be]=It}}(Te,ve),ne.push(Te)}const Pt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Pn{constructor(O,$){const K=($=this.options=function(ve,we){for(const Te in we)ve[Te]=we[Te];return ve}(Object.create(Pt),$)).debug;if(K&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");let se=function(ve,we){const Te=[];if(ve.type==="FeatureCollection")for(let pe=0;pe<ve.features.length;pe++)Nt(Te,ve.features[pe],we,pe);else Nt(Te,ve.type==="Feature"?ve:{geometry:ve},we);return Te}(O,$);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),se=function(ve,we){const Te=we.buffer/we.extent;let pe=ve;const Oe=er(ve,1,-1-Te,Te,0,-1,2,we),Ue=er(ve,1,1-Te,2+Te,0,-1,2,we);return(Oe||Ue)&&(pe=er(ve,1,-Te,1+Te,0,-1,2,we)||[],Oe&&(pe=Xe(Oe,1).concat(pe)),Ue&&(pe=pe.concat(Xe(Ue,-1)))),pe}(se,$),se.length&&this.splitTile(se,0,0,0),K&&(se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(O,$,K,se,ve,we,Te){const pe=[O,$,K,se],Oe=this.options,Ue=Oe.debug;for(;pe.length;){se=pe.pop(),K=pe.pop(),$=pe.pop(),O=pe.pop();const Be=1<<$,Qe=ni($,K,se);let xt=this.tiles[Qe];if(!xt&&(Ue>1&&console.time("creation"),xt=this.tiles[Qe]=$r(O,$,K,se,Oe),this.tileCoords.push({z:$,x:K,y:se}),Ue)){Ue>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,K,se,xt.numFeatures,xt.numPoints,xt.numSimplified),console.timeEnd("creation"));const wn=`z${$}`;this.stats[wn]=(this.stats[wn]||0)+1,this.total++}if(xt.source=O,ve==null){if($===Oe.indexMaxZoom||xt.numPoints<=Oe.indexMaxPoints)continue}else{if($===Oe.maxZoom||$===ve)continue;if(ve!=null){const wn=ve-$;if(K!==we>>wn||se!==Te>>wn)continue}}if(xt.source=null,O.length===0)continue;Ue>1&&console.time("clipping");const It=.5*Oe.buffer/Oe.extent,hr=.5-It,jt=.5+It,dr=1+It;let tr=null,dn=null,Xr=null,Zt=null,wr=er(O,Be,K-It,K+jt,0,xt.minX,xt.maxX,Oe),Gr=er(O,Be,K+hr,K+dr,0,xt.minX,xt.maxX,Oe);O=null,wr&&(tr=er(wr,Be,se-It,se+jt,1,xt.minY,xt.maxY,Oe),dn=er(wr,Be,se+hr,se+dr,1,xt.minY,xt.maxY,Oe),wr=null),Gr&&(Xr=er(Gr,Be,se-It,se+jt,1,xt.minY,xt.maxY,Oe),Zt=er(Gr,Be,se+hr,se+dr,1,xt.minY,xt.maxY,Oe),Gr=null),Ue>1&&console.timeEnd("clipping"),pe.push(tr||[],$+1,2*K,2*se),pe.push(dn||[],$+1,2*K,2*se+1),pe.push(Xr||[],$+1,2*K+1,2*se),pe.push(Zt||[],$+1,2*K+1,2*se+1)}}getTile(O,$,K){O=+O,$=+$,K=+K;const se=this.options,{extent:ve,debug:we}=se;if(O<0||O>24)return null;const Te=1<<O,pe=ni(O,$=$+Te&Te-1,K);if(this.tiles[pe])return ar(this.tiles[pe],ve);we>1&&console.log("drilling down to z%d-%d-%d",O,$,K);let Oe,Ue=O,Be=$,Qe=K;for(;!Oe&&Ue>0;)Ue--,Be>>=1,Qe>>=1,Oe=this.tiles[ni(Ue,Be,Qe)];return Oe&&Oe.source?(we>1&&(console.log("found parent tile z%d-%d-%d",Ue,Be,Qe),console.time("drilling down")),this.splitTile(Oe.source,Ue,Be,Qe,O,$,K),we>1&&console.timeEnd("drilling down"),this.tiles[pe]?ar(this.tiles[pe],ve):null):null}}function ni(ne,O,$){return 32*((1<<ne)*$+O)+ne}function Ft(ne,O){return O?ne.properties[O]:ne.id}function _i(ne,O){if(ne==null)return!0;if(ne.type==="Feature")return Ft(ne,O)!=null;if(ne.type==="FeatureCollection"){const $=new Set;for(const K of ne.features){const se=Ft(K,O);if(se==null||$.has(se))return!1;$.add(se)}return!0}return!1}function Di(ne,O){const $=new Map;if(ne!=null)if(ne.type==="Feature")$.set(Ft(ne,O),ne);else for(const K of ne.features)$.set(Ft(K,O),K);return $}class kt extends L{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(O,$){return g._(this,void 0,void 0,function*(){const K=O.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const se=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!se)return null;const ve=new class{constructor(Te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.X,this.length=Te.length,this._features=Te}feature(Te){return new class{constructor(pe){this._feature=pe,this.extent=g.X,this.type=pe.type,this.properties=pe.tags,"id"in pe&&!isNaN(pe.id)&&(this.id=parseInt(pe.id,10))}loadGeometry(){if(this._feature.type===1){const pe=[];for(const Oe of this._feature.geometry)pe.push([new g.P(Oe[0],Oe[1])]);return pe}{const pe=[];for(const Oe of this._feature.geometry){const Ue=[];for(const Be of Oe)Ue.push(new g.P(Be[0],Be[1]));pe.push(Ue)}return pe}}toGeoJSON(pe,Oe,Ue){return le.call(this,pe,Oe,Ue)}}(this._features[Te])}}(se.features);let we=Ke(ve);return we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),{vectorTile:ve,rawData:we.buffer}})}loadData(O){return g._(this,void 0,void 0,function*(){var $;($=this._pendingRequest)===null||$===void 0||$.abort();const K=!!(O&&O.request&&O.request.collectResourceTiming)&&new g.bv(O.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(O,this._pendingRequest),this._geoJSONIndex=O.cluster?new Dt(function({superclusterOptions:we,clusterProperties:Te}){if(!Te||!we)return we;const pe={},Oe={},Ue={accumulated:null,zoom:0},Be={properties:null},Qe=Object.keys(Te);for(const xt of Qe){const[It,hr]=Te[xt],jt=g.bC(hr),dr=g.bC(typeof It=="string"?[It,["accumulated"],["get",xt]]:It);pe[xt]=jt.value,Oe[xt]=dr.value}return we.map=xt=>{Be.properties=xt;const It={};for(const hr of Qe)It[hr]=pe[hr].evaluate(Ue,Be);return It},we.reduce=(xt,It)=>{Be.properties=It;for(const hr of Qe)Ue.accumulated=xt[hr],xt[hr]=Oe[hr].evaluate(Ue,Be)},we}(O)).load((yield this._pendingData).features):(se=yield this._pendingData,new Pn(se,O.geojsonVtOptions)),this.loaded={};const ve={};if(K){const we=K.finish();we&&(ve.resourceTiming={},ve.resourceTiming[O.source]=JSON.parse(JSON.stringify(we)))}return ve}catch(ve){if(delete this._pendingRequest,g.bB(ve))return{abandoned:!0};throw ve}var se})}getData(){return g._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(O){const $=this.loaded;return $&&$[O.uid]?super.reloadTile(O):this.loadTile(O)}loadAndProcessGeoJSON(O,$){return g._(this,void 0,void 0,function*(){let K=yield this.loadGeoJSON(O,$);if(delete this._pendingRequest,typeof K!="object")throw new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`);if(re(K,!0),O.filter){const se=g.bC(O.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(we=>`${we.key}: ${we.message}`).join(", "));K={type:"FeatureCollection",features:K.features.filter(we=>se.value.evaluate({zoom:0},we))}}return K})}loadGeoJSON(O,$){return g._(this,void 0,void 0,function*(){const{promoteId:K}=O;if(O.request){const se=yield g.h(O.request,$);return this._dataUpdateable=_i(se.data,K)?Di(se.data,K):void 0,se.data}if(typeof O.data=="string")try{const se=JSON.parse(O.data);return this._dataUpdateable=_i(se,K)?Di(se,K):void 0,se}catch{throw new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`)}if(!O.dataDiff)throw new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${O.source}`);return function(se,ve,we){var Te,pe,Oe,Ue;if(ve.removeAll&&se.clear(),ve.remove)for(const Be of ve.remove)se.delete(Be);if(ve.add)for(const Be of ve.add){const Qe=Ft(Be,we);Qe!=null&&se.set(Qe,Be)}if(ve.update)for(const Be of ve.update){let Qe=se.get(Be.id);if(Qe==null)continue;const xt=!Be.removeAllProperties&&(((Te=Be.removeProperties)===null||Te===void 0?void 0:Te.length)>0||((pe=Be.addOrUpdateProperties)===null||pe===void 0?void 0:pe.length)>0);if((Be.newGeometry||Be.removeAllProperties||xt)&&(Qe=Object.assign({},Qe),se.set(Be.id,Qe),xt&&(Qe.properties=Object.assign({},Qe.properties))),Be.newGeometry&&(Qe.geometry=Be.newGeometry),Be.removeAllProperties)Qe.properties={};else if(((Oe=Be.removeProperties)===null||Oe===void 0?void 0:Oe.length)>0)for(const It of Be.removeProperties)Object.prototype.hasOwnProperty.call(Qe.properties,It)&&delete Qe.properties[It];if(((Ue=Be.addOrUpdateProperties)===null||Ue===void 0?void 0:Ue.length)>0)for(const{key:It,value:hr}of Be.addOrUpdateProperties)Qe.properties[It]=hr}}(this._dataUpdateable,O.dataDiff,K),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(O){return g._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(O){return this._geoJSONIndex.getClusterExpansionZoom(O.clusterId)}getClusterChildren(O){return this._geoJSONIndex.getChildren(O.clusterId)}getClusterLeaves(O){return this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset)}}class ur{constructor(O){this.self=O,this.actor=new g.F(O),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=($,K)=>{if(this.externalWorkerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.externalWorkerSourceTypes[$]=K},this.self.addProtocol=g.bi,this.self.removeProtocol=g.bj,this.self.registerRTLTextPlugin=$=>{if(g.bD.isParsed())throw new Error("RTL text plugin already registered.");g.bD.setMethods($)},this.actor.registerMessageHandler("LDT",($,K)=>this._getDEMWorkerSource($,K.source).loadTile(K)),this.actor.registerMessageHandler("RDT",($,K)=>g._(this,void 0,void 0,function*(){this._getDEMWorkerSource($,K.source).removeTile(K)})),this.actor.registerMessageHandler("GCEZ",($,K)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource($,K.type,K.source).getClusterExpansionZoom(K)})),this.actor.registerMessageHandler("GCC",($,K)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource($,K.type,K.source).getClusterChildren(K)})),this.actor.registerMessageHandler("GCL",($,K)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource($,K.type,K.source).getClusterLeaves(K)})),this.actor.registerMessageHandler("LD",($,K)=>this._getWorkerSource($,K.type,K.source).loadData(K)),this.actor.registerMessageHandler("GD",($,K)=>this._getWorkerSource($,K.type,K.source).getData()),this.actor.registerMessageHandler("LT",($,K)=>this._getWorkerSource($,K.type,K.source).loadTile(K)),this.actor.registerMessageHandler("RT",($,K)=>this._getWorkerSource($,K.type,K.source).reloadTile(K)),this.actor.registerMessageHandler("AT",($,K)=>this._getWorkerSource($,K.type,K.source).abortTile(K)),this.actor.registerMessageHandler("RMT",($,K)=>this._getWorkerSource($,K.type,K.source).removeTile(K)),this.actor.registerMessageHandler("RS",($,K)=>g._(this,void 0,void 0,function*(){if(!this.workerSources[$]||!this.workerSources[$][K.type]||!this.workerSources[$][K.type][K.source])return;const se=this.workerSources[$][K.type][K.source];delete this.workerSources[$][K.type][K.source],se.removeSource!==void 0&&se.removeSource(K)})),this.actor.registerMessageHandler("RM",$=>g._(this,void 0,void 0,function*(){delete this.layerIndexes[$],delete this.availableImages[$],delete this.workerSources[$],delete this.demWorkerSources[$]})),this.actor.registerMessageHandler("SR",($,K)=>g._(this,void 0,void 0,function*(){this.referrer=K})),this.actor.registerMessageHandler("SRPS",($,K)=>this._syncRTLPluginState($,K)),this.actor.registerMessageHandler("IS",($,K)=>g._(this,void 0,void 0,function*(){this.self.importScripts(K)})),this.actor.registerMessageHandler("SI",($,K)=>this._setImages($,K)),this.actor.registerMessageHandler("UL",($,K)=>g._(this,void 0,void 0,function*(){this._getLayerIndex($).update(K.layers,K.removedIds)})),this.actor.registerMessageHandler("SL",($,K)=>g._(this,void 0,void 0,function*(){this._getLayerIndex($).replace(K)}))}_setImages(O,$){return g._(this,void 0,void 0,function*(){this.availableImages[O]=$;for(const K in this.workerSources[O]){const se=this.workerSources[O][K];for(const ve in se)se[ve].availableImages=$}})}_syncRTLPluginState(O,$){return g._(this,void 0,void 0,function*(){if(g.bD.isParsed())return g.bD.getState();if($.pluginStatus!=="loading")return g.bD.setState($),$;const K=$.pluginURL;if(this.self.importScripts(K),g.bD.isParsed()){const se={pluginStatus:"loaded",pluginURL:K};return g.bD.setState(se),se}throw g.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${K}`)})}_getAvailableImages(O){let $=this.availableImages[O];return $||($=[]),$}_getLayerIndex(O){let $=this.layerIndexes[O];return $||($=this.layerIndexes[O]=new u),$}_getWorkerSource(O,$,K){if(this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][$]||(this.workerSources[O][$]={}),!this.workerSources[O][$][K]){const se={sendAsync:(ve,we)=>(ve.targetMapId=O,this.actor.sendAsync(ve,we))};switch($){case"vector":this.workerSources[O][$][K]=new L(se,this._getLayerIndex(O),this._getAvailableImages(O));break;case"geojson":this.workerSources[O][$][K]=new kt(se,this._getLayerIndex(O),this._getAvailableImages(O));break;default:this.workerSources[O][$][K]=new this.externalWorkerSourceTypes[$](se,this._getLayerIndex(O),this._getAvailableImages(O))}}return this.workerSources[O][$][K]}_getDEMWorkerSource(O,$){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][$]||(this.demWorkerSources[O][$]=new z),this.demWorkerSources[O][$]}}return g.i(self)&&(self.worker=new ur(self)),ur}),p("index",["exports","./shared"],function(g,u){var I="4.7.1";let M,F;const L={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((r,a)=>{const h=requestAnimationFrame(r);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(h),a(u.c())})}),getImageData(_,r=0){return this.getImageCanvasContext(_).getImageData(-r,-r,_.width+2*r,_.height+2*r)},getImageCanvasContext(_){const r=window.document.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return r.width=_.width,r.height=_.height,a.drawImage(_,0,0,_.width,_.height),a},resolveURL:_=>(M||(M=document.createElement("a")),M.href=_,M.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(F==null&&(F=matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}};class z{static testProp(r){if(!z.docStyle)return r[0];for(let a=0;a<r.length;a++)if(r[a]in z.docStyle)return r[a];return r[0]}static create(r,a,h){const d=window.document.createElement(r);return a!==void 0&&(d.className=a),h&&h.appendChild(d),d}static createNS(r,a){return window.document.createElementNS(r,a)}static disableDrag(){z.docStyle&&z.selectProp&&(z.userSelect=z.docStyle[z.selectProp],z.docStyle[z.selectProp]="none")}static enableDrag(){z.docStyle&&z.selectProp&&(z.docStyle[z.selectProp]=z.userSelect)}static setTransform(r,a){r.style[z.transformProp]=a}static addEventListener(r,a,h,d={}){r.addEventListener(a,h,"passive"in d?d:d.capture)}static removeEventListener(r,a,h,d={}){r.removeEventListener(a,h,"passive"in d?d:d.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",z.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",z.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",z.suppressClickInternal,!0)},0)}static getScale(r){const a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}static getPoint(r,a,h){const d=a.boundingClientRect;return new u.P((h.clientX-d.left)/a.x-r.clientLeft,(h.clientY-d.top)/a.y-r.clientTop)}static mousePos(r,a){const h=z.getScale(r);return z.getPoint(r,h,a)}static touchPos(r,a){const h=[],d=z.getScale(r);for(let y=0;y<a.length;y++)h.push(z.getPoint(r,d,a[y]));return h}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}z.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,z.selectProp=z.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),z.transformProp=z.testProp(["transform","WebkitTransform"]);const J={supported:!1,testSupport:function(_){!le&&re&&(V?U(_):H=_)}};let H,re,le=!1,V=!1;function U(_){const r=_.createTexture();_.bindTexture(_.TEXTURE_2D,r);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,re),_.isContextLost())return;J.supported=!0}catch{}_.deleteTexture(r),le=!0}var G;typeof document<"u"&&(re=document.createElement("img"),re.onload=()=>{H&&U(H),H=null,V=!0},re.onerror=()=>{le=!0,H=null},re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let r,a,h,d;_.resetRequestQueue=()=>{r=[],a=0,h=0,d={}},_.addThrottleControl=T=>{const P=h++;return d[P]=T,P},_.removeThrottleControl=T=>{delete d[T],w()},_.getImage=(T,P,R=!0)=>new Promise((D,j)=>{J.supported&&(T.headers||(T.headers={}),T.headers.accept="image/webp,*/*"),u.e(T,{type:"image"}),r.push({abortController:P,requestParameters:T,supportImageRefresh:R,state:"queued",onError:Y=>{j(Y)},onSuccess:Y=>{D(Y)}}),w()});const y=T=>u._(this,void 0,void 0,function*(){T.state="running";const{requestParameters:P,supportImageRefresh:R,onError:D,onSuccess:j,abortController:Y}=T,te=R===!1&&!u.i(self)&&!u.g(P.url)&&(!P.headers||Object.keys(P.headers).reduce((de,me)=>de&&me==="accept",!0));a++;const ae=te?C(P,Y):u.m(P,Y);try{const de=yield ae;delete T.abortController,T.state="completed",de.data instanceof HTMLImageElement||u.b(de.data)?j(de):de.data&&j({data:yield(ue=de.data,typeof createImageBitmap=="function"?u.d(ue):u.f(ue)),cacheControl:de.cacheControl,expires:de.expires})}catch(de){delete T.abortController,D(de)}finally{a--,w()}var ue}),w=()=>{const T=(()=>{for(const P of Object.keys(d))if(d[P]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let P=a;P<T&&r.length>0;P++){const R=r.shift();R.abortController.signal.aborted?P--:y(R)}},C=(T,P)=>new Promise((R,D)=>{const j=new Image,Y=T.url,te=T.credentials;te&&te==="include"?j.crossOrigin="use-credentials":(te&&te==="same-origin"||!u.s(Y))&&(j.crossOrigin="anonymous"),P.signal.addEventListener("abort",()=>{j.src="",D(u.c())}),j.fetchPriority="high",j.onload=()=>{j.onerror=j.onload=null,R({data:j})},j.onerror=()=>{j.onerror=j.onload=null,P.signal.aborted||D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j.src=Y})}(G||(G={})),G.resetRequestQueue();class Q{constructor(r){this._transformRequestFn=r}transformRequest(r,a){return this._transformRequestFn&&this._transformRequestFn(r,a)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function fe(_){var r=new u.A(3);return r[0]=_[0],r[1]=_[1],r[2]=_[2],r}var he,_e=function(_,r,a){return _[0]=r[0]-a[0],_[1]=r[1]-a[1],_[2]=r[2]-a[2],_};he=new u.A(3),u.A!=Float32Array&&(he[0]=0,he[1]=0,he[2]=0);var ge=function(_){var r=_[0],a=_[1];return r*r+a*a};function Ae(_){const r=[];if(typeof _=="string")r.push({id:"default",url:_});else if(_&&_.length>0){const a=[];for(const{id:h,url:d}of _){const y=`${h}${d}`;a.indexOf(y)===-1&&(a.push(y),r.push({id:h,url:d}))}}return r}function Re(_,r,a){const h=_.split("?");return h[0]+=`${r}${a}`,h.join("?")}(function(){var _=new u.A(2);u.A!=Float32Array&&(_[0]=0,_[1]=0)})();class De{constructor(r,a,h,d){this.context=r,this.format=h,this.texture=r.gl.createTexture(),this.update(a,d)}update(r,a,h){const{width:d,height:y}=r,w=!(this.size&&this.size[0]===d&&this.size[1]===y||h),{context:C}=this,{gl:T}=C;if(this.useMipmap=!!(a&&a.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!a||a.premultiply!==!1)),w)this.size=[d,y],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,r):T.texImage2D(T.TEXTURE_2D,0,this.format,d,y,0,this.format,T.UNSIGNED_BYTE,r.data);else{const{x:P,y:R}=h||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?T.texSubImage2D(T.TEXTURE_2D,0,P,R,T.RGBA,T.UNSIGNED_BYTE,r):T.texSubImage2D(T.TEXTURE_2D,0,P,R,d,y,T.RGBA,T.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)}bind(r,a,h){const{context:d}=this,{gl:y}=d;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),r!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||r),this.filter=r),a!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function Z(_){const{userImage:r}=_;return!!(r&&r.render&&r.render())&&(_.data.replace(new Uint8Array(r.data.buffer)),!0)}class Me extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:a,promiseResolve:h}of this.requestors)h(this._getImagesForIds(a));this.requestors=[]}}getImage(r){const a=this.images[r];if(a&&!a.data&&a.spriteData){const h=a.spriteData;a.data=new u.R({width:h.width,height:h.height},h.context.getImageData(h.x,h.y,h.width,h.height).data),a.spriteData=null}return a}addImage(r,a){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,a)&&(this.images[r]=a)}_validate(r,a){let h=!0;const d=a.data||a.spriteData;return this._validateStretch(a.stretchX,d&&d.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),h=!1),this._validateStretch(a.stretchY,d&&d.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),h=!1),this._validateContent(a.content,a)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),h=!1),h}_validateStretch(r,a){if(!r)return!0;let h=0;for(const d of r){if(d[0]<h||d[1]<d[0]||a<d[1])return!1;h=d[1]}return!0}_validateContent(r,a){if(!r)return!0;if(r.length!==4)return!1;const h=a.spriteData,d=h&&h.width||a.data.width,y=h&&h.height||a.data.height;return!(r[0]<0||d<r[0]||r[1]<0||y<r[1]||r[2]<0||d<r[2]||r[3]<0||y<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,a,h=!0){const d=this.getImage(r);if(h&&(d.data.width!==a.data.width||d.data.height!==a.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=d.version+1,this.images[r]=a,this.updatedImages[r]=!0}removeImage(r){const a=this.images[r];delete this.images[r],delete this.patterns[r],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((a,h)=>{let d=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(d=!1);this.isLoaded()||d?a(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:a})})}_getImagesForIds(r){const a={};for(const h of r){let d=this.getImage(h);d||(this.fire(new u.k("styleimagemissing",{id:h})),d=this.getImage(h)),d?a[h]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:u.w(`Image "${h}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:r,height:a}=this.atlasImage;return{width:r,height:a}}getPattern(r){const a=this.patterns[r],h=this.getImage(r);if(!h)return null;if(a&&a.position.version===h.version)return a.position;if(a)a.position.version=h.version;else{const d={w:h.data.width+2,h:h.data.height+2,x:0,y:0},y=new u.I(d,h);this.patterns[r]={bin:d,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const a=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new De(r,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const y in this.patterns)r.push(this.patterns[y].bin);const{w:a,h}=u.p(r),d=this.atlasImage;d.resize({width:a||1,height:h||1});for(const y in this.patterns){const{bin:w}=this.patterns[y],C=w.x+1,T=w.y+1,P=this.getImage(y).data,R=P.width,D=P.height;u.R.copy(P,d,{x:0,y:0},{x:C,y:T},{width:R,height:D}),u.R.copy(P,d,{x:0,y:D-1},{x:C,y:T-1},{width:R,height:1}),u.R.copy(P,d,{x:0,y:0},{x:C,y:T+D},{width:R,height:1}),u.R.copy(P,d,{x:R-1,y:0},{x:C-1,y:T},{width:1,height:D}),u.R.copy(P,d,{x:0,y:0},{x:C+R,y:T},{width:1,height:D})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const a of r){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const h=this.getImage(a);h||u.w(`Image with ID: "${a}" was not found`),Z(h)&&this.updateImage(a,h)}}}const Ie=1e20;function Le(_,r,a,h,d,y,w,C,T){for(let P=r;P<r+h;P++)$e(_,a*y+P,y,d,w,C,T);for(let P=a;P<a+d;P++)$e(_,P*y+r,1,h,w,C,T)}function $e(_,r,a,h,d,y,w){y[0]=0,w[0]=-Ie,w[1]=Ie,d[0]=_[r];for(let C=1,T=0,P=0;C<h;C++){d[C]=_[r+C*a];const R=C*C;do{const D=y[T];P=(d[C]-d[D]+R-D*D)/(C-D)/2}while(P<=w[T]&&--T>-1);T++,y[T]=C,w[T]=P,w[T+1]=Ie}for(let C=0,T=0;C<h;C++){for(;w[T+1]<C;)T++;const P=y[T],R=C-P;_[r+C*a]=d[P]+R*R}}class Ke{constructor(r,a){this.requestManager=r,this.localIdeographFontFamily=a,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const a=[];for(const y in r)for(const w of r[y])a.push(this._getAndCacheGlyphsPromise(y,w));const h=yield Promise.all(a),d={};for(const{stack:y,id:w,glyph:C}of h)d[y]||(d[y]={}),d[y][w]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return d})}_getAndCacheGlyphsPromise(r,a){return u._(this,void 0,void 0,function*(){let h=this.entries[r];h||(h=this.entries[r]={glyphs:{},requests:{},ranges:{}});let d=h.glyphs[a];if(d!==void 0)return{stack:r,id:a,glyph:d};if(d=this._tinySDF(h,r,a),d)return h.glyphs[a]=d,{stack:r,id:a,glyph:d};const y=Math.floor(a/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(h.ranges[y])return{stack:r,id:a,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!h.requests[y]){const C=Ke.loadGlyphRange(r,y,this.url,this.requestManager);h.requests[y]=C}const w=yield h.requests[y];for(const C in w)this._doesCharSupportLocalGlyph(+C)||(h.glyphs[+C]=w[+C]);return h.ranges[y]=!0,{stack:r,id:a,glyph:w[a]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,a,h){const d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(h))return;let y=r.tinySDF;if(!y){let C="400";/bold/i.test(a)?C="900":/medium/i.test(a)?C="500":/light/i.test(a)&&(C="200"),y=r.tinySDF=new Ke.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:C})}const w=y.draw(String.fromCharCode(h));return{id:h,bitmap:new u.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ke.loadGlyphRange=function(_,r,a,h){return u._(this,void 0,void 0,function*(){const d=256*r,y=d+255,w=h.transformRequest(a.replace("{fontstack}",_).replace("{range}",`${d}-${y}`),"Glyphs"),C=yield u.l(w,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${r}, ${d}-${y}`);const T={};for(const P of u.n(C.data))T[P.id]=P;return T})},Ke.TinySDF=class{constructor({fontSize:_=24,buffer:r=3,radius:a=8,cutoff:h=.25,fontFamily:d="sans-serif",fontWeight:y="normal",fontStyle:w="normal"}={}){this.buffer=r,this.cutoff=h,this.radius=a;const C=this.size=_+4*r,T=this._createCanvas(C),P=this.ctx=T.getContext("2d",{willReadFrequently:!0});P.font=`${w} ${y} ${_}px ${d}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(_){const r=document.createElement("canvas");return r.width=r.height=_,r}draw(_){const{width:r,actualBoundingBoxAscent:a,actualBoundingBoxDescent:h,actualBoundingBoxLeft:d,actualBoundingBoxRight:y}=this.ctx.measureText(_),w=Math.ceil(a),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-d))),T=Math.min(this.size-this.buffer,w+Math.ceil(h)),P=C+2*this.buffer,R=T+2*this.buffer,D=Math.max(P*R,0),j=new Uint8ClampedArray(D),Y={data:j,width:P,height:R,glyphWidth:C,glyphHeight:T,glyphTop:w,glyphLeft:0,glyphAdvance:r};if(C===0||T===0)return Y;const{ctx:te,buffer:ae,gridInner:ue,gridOuter:de}=this;te.clearRect(ae,ae,C,T),te.fillText(_,ae,ae+w);const me=te.getImageData(ae,ae,C,T);de.fill(Ie,0,D),ue.fill(0,0,D);for(let ie=0;ie<T;ie++)for(let xe=0;xe<C;xe++){const Se=me.data[4*(ie*C+xe)+3]/255;if(Se===0)continue;const Pe=(ie+ae)*P+xe+ae;if(Se===1)de[Pe]=0,ue[Pe]=Ie;else{const Ve=.5-Se;de[Pe]=Ve>0?Ve*Ve:0,ue[Pe]=Ve<0?Ve*Ve:0}}Le(de,0,0,P,R,P,this.f,this.v,this.z),Le(ue,ae,ae,C,T,P,this.f,this.v,this.z);for(let ie=0;ie<D;ie++){const xe=Math.sqrt(de[ie])-Math.sqrt(ue[ie]);j[ie]=Math.round(255-255*(xe/this.radius+this.cutoff))}return Y}};class be{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,a){return u.x(r.expression.evaluate(a))}interpolate(r,a,h){return{x:u.y.number(r.x,a.x,h),y:u.y.number(r.y,a.y,h),z:u.y.number(r.z,a.z,h)}}}let Ee;class We extends u.E{constructor(r){super(),Ee=Ee||new u.q({anchor:new u.D(u.v.light.anchor),position:new be,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Ee),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,a={}){if(!this._validate(u.r,r,a))for(const h in r){const d=r[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),d):this._transitionable.setValue(h,d)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,a,h){return(!h||h.validate!==!1)&&u.t(this,r.call(u.u,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Ze=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Ge extends u.E{constructor(r){super(),this._transitionable=new u.T(Ze),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(r,a={}){if(!this._validate(u.B,r,a)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const h in r){const d=r[h];h.endsWith("-transition")?this._transitionable.setTransition(h.slice(0,-11),d):this._transitionable.setValue(h,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,a,h={}){return(h==null?void 0:h.validate)!==!1&&u.t(this,r.call(u.u,u.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class St{constructor(r,a){this.width=r,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,a){const h=r.join(",")+String(a);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(r,a)),this.dashEntry[h]}getDashRanges(r,a,h){const d=[];let y=r.length%2==1?-r[r.length-1]*h:0,w=r[0]*h,C=!0;d.push({left:y,right:w,isDash:C,zeroLength:r[0]===0});let T=r[0];for(let P=1;P<r.length;P++){C=!C;const R=r[P];y=T*h,T+=R,w=T*h,d.push({left:y,right:w,isDash:C,zeroLength:R===0})}return d}addRoundDash(r,a,h){const d=a/2;for(let y=-h;y<=h;y++){const w=this.width*(this.nextRow+h+y);let C=0,T=r[C];for(let P=0;P<this.width;P++){P/T.right>1&&(T=r[++C]);const R=Math.abs(P-T.left),D=Math.abs(P-T.right),j=Math.min(R,D);let Y;const te=y/h*(d+1);if(T.isDash){const ae=d-Math.abs(te);Y=Math.sqrt(j*j+ae*ae)}else Y=d-Math.sqrt(j*j+te*te);this.data[w+P]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(r){for(let C=r.length-1;C>=0;--C){const T=r[C],P=r[C+1];T.zeroLength?r.splice(C,1):P&&P.isDash===T.isDash&&(P.left=T.left,r.splice(C,1))}const a=r[0],h=r[r.length-1];a.isDash===h.isDash&&(a.left=h.left-this.width,h.right=a.right+this.width);const d=this.width*this.nextRow;let y=0,w=r[y];for(let C=0;C<this.width;C++){C/w.right>1&&(w=r[++y]);const T=Math.abs(C-w.left),P=Math.abs(C-w.right),R=Math.min(T,P);this.data[d+C]=Math.max(0,Math.min(255,(w.isDash?R:-R)+128))}}addDash(r,a){const h=a?7:0,d=2*h+1;if(this.nextRow+d>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let C=0;C<r.length;C++)y+=r[C];if(y!==0){const C=this.width/y,T=this.getDashRanges(r,this.width,C);a?this.addRoundDash(T,C,h):this.addRegularDash(T)}const w={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:y};return this.nextRow+=d,this.dirty=!0,w}bind(r){const a=r.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const Dt="maplibre_preloaded_worker_pool";class $t{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<$t.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Dt]}numActive(){return Object.keys(this.active).length}}const Vt=Math.floor(L.hardwareConcurrency/2);let Rt,cr;function Ut(){return Rt||(Rt=new $t),Rt}$t.workerCount=u.C(globalThis)?Math.max(Math.min(Vt,3),1):1;class Ct{constructor(r,a){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=a;const h=this.workerPool.acquire(a);for(let d=0;d<h.length;d++){const y=new u.F(h[d],a);y.name=`Worker ${d}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,a){const h=[];for(const d of this.actors)h.push(d.sendAsync({type:r,data:a}));return Promise.all(h)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,a){for(const h of this.actors)h.registerMessageHandler(r,a)}}function qt(){return cr||(cr=new Ct(Ut(),u.G),cr.registerMessageHandler("GR",(_,r,a)=>u.m(r,a))),cr}function Ht(_,r){const a=u.H();return u.J(a,a,[1,1,0]),u.K(a,a,[.5*_.width,.5*_.height,1]),u.L(a,a,_.calculatePosMatrix(r.toUnwrapped()))}function yr(_,r,a,h,d,y){const w=function(D,j,Y){if(D)for(const te of D){const ae=j[te];if(ae&&ae.source===Y&&ae.type==="fill-extrusion")return!0}else for(const te in j){const ae=j[te];if(ae.source===Y&&ae.type==="fill-extrusion")return!0}return!1}(d&&d.layers,r,_.id),C=y.maxPitchScaleFactor(),T=_.tilesIn(h,C,w);T.sort(Nt);const P=[];for(const D of T)P.push({wrappedTileID:D.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(r,a,_._state,D.queryGeometry,D.cameraQueryGeometry,D.scale,d,y,C,Ht(_.transform,D.tileID))});const R=function(D){const j={},Y={};for(const te of D){const ae=te.queryResults,ue=te.wrappedTileID,de=Y[ue]=Y[ue]||{};for(const me in ae){const ie=ae[me],xe=de[me]=de[me]||{},Se=j[me]=j[me]||[];for(const Pe of ie)xe[Pe.featureIndex]||(xe[Pe.featureIndex]=!0,Se.push(Pe))}}return j}(P);for(const D in R)R[D].forEach(j=>{const Y=j.feature,te=_.getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=te});return R}function Nt(_,r){const a=_.tileID,h=r.tileID;return a.overscaledZ-h.overscaledZ||a.canonical.y-h.canonical.y||a.wrap-h.wrap||a.canonical.x-h.canonical.x}function sr(_,r,a){return u._(this,void 0,void 0,function*(){let h=_;if(_.url?h=(yield u.h(r.transformRequest(_.url,"Source"),a)).data:yield L.frameAsync(a),!h)return null;const d=u.M(u.e(h,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in h&&h.vector_layers&&(d.vectorLayerIds=h.vector_layers.map(y=>y.id)),d})}class ze{constructor(r,a){r&&(a?this.setSouthWest(r).setNorthEast(a):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}extend(r){const a=this._sw,h=this._ne;let d,y;if(r instanceof u.N)d=r,y=r;else{if(!(r instanceof ze))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ze.convert(r)):this.extend(u.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.N.convert(r)):this;if(d=r._sw,y=r._ne,!d||!y)return this}return a||h?(a.lng=Math.min(d.lng,a.lng),a.lat=Math.min(d.lat,a.lat),h.lng=Math.max(y.lng,h.lng),h.lat=Math.max(y.lat,h.lat)):(this._sw=new u.N(d.lng,d.lat),this._ne=new u.N(y.lng,y.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:a,lat:h}=u.N.convert(r);let d=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&d}static convert(r){return r instanceof ze?r:r&&new ze(r)}static fromLngLat(r,a=0){const h=360*a/40075017,d=h/Math.cos(Math.PI/180*r.lat);return new ze(new u.N(r.lng-d,r.lat-h),new u.N(r.lng+d,r.lat+h))}adjustAntiMeridian(){const r=new u.N(this._sw.lng,this._sw.lat),a=new u.N(this._ne.lng,this._ne.lat);return new ze(r,r.lng>a.lng?new u.N(a.lng+360,a.lat):a)}}class Or{constructor(r,a,h){this.bounds=ze.convert(this.validateBounds(r)),this.minzoom=a||0,this.maxzoom=h||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const a=Math.pow(2,r.z),h=Math.floor(u.O(this.bounds.getWest())*a),d=Math.floor(u.Q(this.bounds.getNorth())*a),y=Math.ceil(u.O(this.bounds.getEast())*a),w=Math.ceil(u.Q(this.bounds.getSouth())*a);return r.x>=h&&r.x<y&&r.y>=d&&r.y<w}}class Cr extends u.E{constructor(r,a,h,d){if(super(),this.id=r,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(a,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield sr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new Or(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h={request:this.map._requestManager.transformRequest(a,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};h.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((y,w)=>{r.reloadPromise={resolve:y,reject:w}})}else r.actor=this.dispatcher.getActor(),d="LT";r.abortController=new AbortController;try{const y=yield r.actor.sendAsync({type:d,data:h},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,y)}catch(y){if(delete r.abortController,r.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,a){if(a&&a.resourceTiming&&(r.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&r.setExpiryData(a),r.loadVectorData(a,this.map.painter),r.reloadPromise){const h=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(h.resolve).catch(h.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class At extends u.E{constructor(r,a,h,d){super(),this.id=r,this.dispatcher=h,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},a),u.e(this,u.M(a,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield sr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new Or(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const h=yield G.getImage(this.map._requestManager.transformRequest(a,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(h&&h.data){this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&r.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const d=this.map.painter.context,y=d.gl,w=h.data;r.texture=this.map.painter.getTileTexture(w.width),r.texture?r.texture.update(w,{useMipmap:!0}):(r.texture=new De(d,w,y.RGBA,{useMipmap:!0}),r.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(h){if(delete r.abortController,r.aborted)r.state="unloaded";else if(h)throw r.state="errored",h}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class er extends At{constructor(r,a,h,d){super(r,a,h,d),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),h=this.map._requestManager.transformRequest(a,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const d=yield G.getImage(h,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){const y=d.data;this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const w=u.b(y)&&u.U()?y:yield this.readImageNow(y),C={type:this.type,uid:r.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const T=yield r.actor.sendAsync({type:"LDT",data:C});r.dem=T,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const a=r.width+2,h=r.height+2;try{return new u.R({width:a,height:h},yield u.W(r,-1,-1,a,h))}catch{}}return L.getImageData(r,1)})}_getNeighboringTiles(r){const a=r.canonical,h=Math.pow(2,a.z),d=(a.x-1+h)%h,y=a.x===0?r.wrap-1:r.wrap,w=(a.x+1+h)%h,C=a.x+1===h?r.wrap+1:r.wrap,T={};return T[new u.S(r.overscaledZ,y,a.z,d,a.y).key]={backfilled:!1},T[new u.S(r.overscaledZ,C,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(T[new u.S(r.overscaledZ,y,a.z,d,a.y-1).key]={backfilled:!1},T[new u.S(r.overscaledZ,r.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},T[new u.S(r.overscaledZ,C,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<h&&(T[new u.S(r.overscaledZ,y,a.z,d,a.y+1).key]={backfilled:!1},T[new u.S(r.overscaledZ,r.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},T[new u.S(r.overscaledZ,C,a.z,w,a.y+1).key]={backfilled:!1}),T}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class xr extends u.E{constructor(r,a,h,d){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(d),this._data=a.data,this._options=u.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const y=u.X/this.tileSize;a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*y,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*y,extent:u.X,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:u.X,radius:(a.clusterRadius||50)*y,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,a,h){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:a,offset:h}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const a=u.e({type:this.type},this.workerOptions);r?a.dataDiff=r:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(L.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const h=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||h.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let d=null;h.resourceTiming&&h.resourceTiming[this.id]&&(d=h.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&u.e(y,{resourceTiming:d}),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(h){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(h))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.actor?"RT":"LT";r.actor=this.actor;const h={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const d=yield this.actor.sendAsync({type:a,data:h},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(d,this.map.painter,a==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _t=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _n extends u.E{constructor(r,a,h,d){super(),this.id=r,this.dispatcher=h,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=a}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield G.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,r&&(this.coordinates=r),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new u.j(a))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const a=r.map(u.Z.fromLngLat);this.tileID=function(d){let y=1/0,w=1/0,C=-1/0,T=-1/0;for(const j of d)y=Math.min(y,j.x),w=Math.min(w,j.y),C=Math.max(C,j.x),T=Math.max(T,j.y);const P=Math.max(C-y,T-w),R=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),D=Math.pow(2,R);return new u.a1(R,Math.floor((y+C)/2*D),Math.floor((w+T)/2*D))}(a),this.minzoom=this.maxzoom=this.tileID.z;const h=a.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,u.X,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,u.X),this._boundsArray.emplaceBack(h[2].x,h[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new De(r,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,h=!0)}h&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Tr extends _n{constructor(r,a,h,d){super(r,a,h,d),this.roundZoom=!0,this.type="video",this.options=a}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const a of r.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield u.a3(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new u.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const a=this.video.seekable;r<a.start(0)||r>a.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new De(r,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let h=!1;for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,h=!0)}h&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class un extends _n{constructor(r,a,h,d){super(r,a,h,d),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(w=>typeof w!="number"))||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,h=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,_t.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new De(a,this.canvas,h.RGBA,{premultiply:!0});let d=!1;for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const En={},Ln=_=>{switch(_){case"geojson":return xr;case"image":return _n;case"raster":return At;case"raster-dem":return er;case"vector":return Cr;case"video":return Tr;case"canvas":return un}return En[_]},Xe="RTLPluginLoaded";class hn extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=qt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(a,h=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=L.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!h)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Xe))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ar=null;function zt(){return ar||(ar=new hn),ar}class $r{constructor(r,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const a=r+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,a,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(d,y){const w={};if(!y)return w;for(const C of d){const T=C.layerIds.map(P=>y.getLayer(P)).filter(Boolean);if(T.length!==0){C.layers=T,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(P=>T.filter(R=>R.id===P)[0]));for(const P of T)w[P.id]=C}}return w}(r.buckets,a.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const y=this.buckets[d];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!h)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const y=this.buckets[d];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,zt().lazyLoad();break}}this.queryPadding=0;for(const d in this.buckets){const y=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(d).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const h in this.buckets){const d=this.buckets[h];d.uploadPending()&&d.upload(r)}const a=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new De(r,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new De(r,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,a,h,d,y,w,C,T,P,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:y,scale:w,tileSize:this.tileSize,pixelPosMatrix:R,transform:T,params:C,queryPadding:this.queryPadding*P},r,a,h):{}}querySourceFeatures(r,a){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const d=h.loadVTLayers(),y=a&&a.sourceLayer?a.sourceLayer:"",w=d._geojsonTileLayer||d[y];if(!w)return;const C=u.a7(a&&a.filter),{z:T,x:P,y:R}=this.tileID.canonical,D={z:T,x:P,y:R};for(let j=0;j<w.length;j++){const Y=w.feature(j);if(C.needGeometry){const ue=u.a8(Y,!0);if(!C.filter(new u.z(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!C.filter(new u.z(this.tileID.overscaledZ),Y))continue;const te=h.getId(Y,y),ae=new u.a9(Y,T,P,R,te);ae.tile=D,r.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const a=this.expirationTime;if(r.cacheControl){const h=u.aa(r.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const h=Date.now();let d=!1;if(this.expirationTime>h)d=!1;else if(a)if(this.expirationTime<a)d=!0;else{const y=this.expirationTime-a;y?this.expirationTime=h+Math.max(y,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const d in this.buckets){if(!a.style.hasLayer(d))continue;const y=this.buckets[d],w=y.layers[0].sourceLayer||"_geojsonTileLayer",C=h[w],T=r[w];if(!C||!T||Object.keys(T).length===0)continue;y.update(T,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const P=a&&a.style&&a.style.getLayer(d);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=L.now()+r}setDependencies(r,a){const h={};for(const d of a)h[d]=!0;this.dependencies[r]=h}hasDependency(r,a){for(const h of r){const d=this.dependencies[h];if(d){for(const y of a)if(d[y])return!0}}return!1}}class qe{constructor(r,a){this.max=r,this.onRemove=a,this.reset()}reset(){for(const r in this.data)for(const a of this.data[r])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(r,a,h){const d=r.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const y={value:a,timeout:void 0};if(h!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},h)),this.data[d].push(y),this.order.push(d),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const a=this.data[r].shift();return a.timeout&&clearTimeout(a.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),a.value}getByKey(r){const a=this.data[r];return a?a[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,a){if(!this.has(r))return this;const h=r.wrapped().key,d=a===void 0?0:this.data[h].indexOf(a),y=this.data[h][d];return this.data[h].splice(d,1),y.timeout&&clearTimeout(y.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(y.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(r){const a=[];for(const h in this.data)for(const d of this.data[h])r(d.value)||a.push(d);for(const h of a)this.remove(h.value.tileID,h)}}class Tt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,a,h){const d=String(a);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][d]=this.stateChanges[r][d]||{},u.e(this.stateChanges[r][d],h),this.deletedStates[r]===null){this.deletedStates[r]={};for(const y in this.state[r])y!==d&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][d]===null){this.deletedStates[r][d]={};for(const y in this.state[r][d])h[y]||(this.deletedStates[r][d][y]=null)}else for(const y in h)this.deletedStates[r]&&this.deletedStates[r][d]&&this.deletedStates[r][d][y]===null&&delete this.deletedStates[r][d][y]}removeFeatureState(r,a,h){if(this.deletedStates[r]===null)return;const d=String(a);if(this.deletedStates[r]=this.deletedStates[r]||{},h&&a!==void 0)this.deletedStates[r][d]!==null&&(this.deletedStates[r][d]=this.deletedStates[r][d]||{},this.deletedStates[r][d][h]=null);else if(a!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][d])for(h in this.deletedStates[r][d]={},this.stateChanges[r][d])this.deletedStates[r][d][h]=null;else this.deletedStates[r][d]=null;else this.deletedStates[r]=null}getState(r,a){const h=String(a),d=u.e({},(this.state[r]||{})[h],(this.stateChanges[r]||{})[h]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const y=this.deletedStates[r][a];if(y===null)return{};for(const w in y)delete d[w]}return d}initializeTileState(r,a){r.setFeatureState(this.state,a)}coalesceChanges(r,a){const h={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const y={};for(const w in this.stateChanges[d])this.state[d][w]||(this.state[d][w]={}),u.e(this.state[d][w],this.stateChanges[d][w]),y[w]=this.state[d][w];h[d]=y}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const y={};if(this.deletedStates[d]===null)for(const w in this.state[d])y[w]={},this.state[d][w]={};else for(const w in this.deletedStates[d]){if(this.deletedStates[d][w]===null)this.state[d][w]={};else for(const C of Object.keys(this.deletedStates[d][w]))delete this.state[d][w][C];y[w]=this.state[d][w]}h[d]=h[d]||{},u.e(h[d],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const d in r)r[d].setFeatureState(h,a)}}class Pt extends u.E{constructor(r,a,h){super(),this.id=r,this.dispatcher=h,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,y,w,C)=>{const T=new(Ln(y.type))(d,y,w,C);if(T.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${T.id}`);return T})(r,a,h,this),this._tiles={},this._cache=new qe(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Tt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const a=this._tiles[r];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,a,h){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,a,h)}catch(d){r.state="errored",d.status!==404?this._source.fire(new u.j(d,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const h=this._tiles[a];h.upload(r),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Pn).map(r=>r.key)}getRenderableIds(r){const a=[];for(const h in this._tiles)this._isIdRenderable(h,r)&&a.push(this._tiles[h]);return r?a.sort((h,d)=>{const y=h.tileID,w=d.tileID,C=new u.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),T=new u.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-w.overscaledZ||T.y-C.y||T.x-C.x}).map(h=>h.tileID.key):a.map(h=>h.tileID).sort(Pn).map(h=>h.key)}hasRenderableParent(r){const a=this.findLoadedParent(r,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(r,a){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(a||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,a){return u._(this,void 0,void 0,function*(){const h=this._tiles[r];h&&(h.state!=="loading"&&(h.state=a),yield this._loadTile(h,r,a))})}_tileLoaded(r,a,h){r.timeAdded=L.now(),h==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(a,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const a=this.getRenderableIds();for(let d=0;d<a.length;d++){const y=a[d];if(r.neighboringTiles&&r.neighboringTiles[y]){const w=this.getTileByID(y);h(r,w),h(w,r)}}function h(d,y){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let w=y.tileID.canonical.x-d.tileID.canonical.x;const C=y.tileID.canonical.y-d.tileID.canonical.y,T=Math.pow(2,d.tileID.canonical.z),P=y.tileID.key;w===0&&C===0||Math.abs(C)>1||(Math.abs(w)>1&&(Math.abs(w+T)===1?w+=T:Math.abs(w-T)===1&&(w-=T)),y.dem&&d.dem&&(d.dem.backfillBorder(y.dem,w,C),d.neighboringTiles&&d.neighboringTiles[P]&&(d.neighboringTiles[P].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,a,h,d){for(const y in this._tiles){let w=this._tiles[y];if(d[y]||!w.hasData()||w.tileID.overscaledZ<=a||w.tileID.overscaledZ>h)continue;let C=w.tileID;for(;w&&w.tileID.overscaledZ>a+1;){const P=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[P.key],w&&w.hasData()&&(C=P)}let T=C;for(;T.overscaledZ>a;)if(T=T.scaledTo(T.overscaledZ-1),r[T.key]){d[C.key]=C;break}}}findLoadedParent(r,a){if(r.key in this._loadedParentTiles){const h=this._loadedParentTiles[r.key];return h&&h.tileID.overscaledZ>=a?h:null}for(let h=r.overscaledZ-1;h>=a;h--){const d=r.scaledTo(h),y=this._getLoadedTile(d);if(y)return y}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const a=this._tiles[r.key];return a&&a.hasData()?a:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const a=Math.ceil(r.width/this._source.tileSize)+1,h=Math.ceil(r.height/this._source.tileSize)+1,d=Math.floor(a*h*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(y)}handleWrapJump(r){const a=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,a){const h={};for(const d in this._tiles){const y=this._tiles[d];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+a),h[y.tileID.key]=y}this._tiles=h;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(r,a,h,d,y,w){const C={},T={},P=Object.keys(r),R=L.now();for(const D of P){const j=r[D],Y=this._tiles[D];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=R)continue;const te=this.findLoadedParent(j,a),ae=this.findLoadedSibling(j),ue=te||ae||null;ue&&(this._addTile(ue.tileID),C[ue.tileID.key]=ue.tileID),T[D]=j}this._retainLoadedChildren(T,d,h,r);for(const D in C)r[D]||(this._coveredTiles[D]=!0,r[D]=C[D]);if(w){const D={},j={};for(const Y of y)this._tiles[Y.key].hasData()?D[Y.key]=Y:j[Y.key]=Y;for(const Y in j){const te=j[Y].children(this._source.maxzoom);this._tiles[te[0].key]&&this._tiles[te[1].key]&&this._tiles[te[2].key]&&this._tiles[te[3].key]&&(D[te[0].key]=r[te[0].key]=te[0],D[te[1].key]=r[te[1].key]=te[1],D[te[2].key]=r[te[2].key]=te[2],D[te[3].key]=r[te[3].key]=te[3],delete j[Y])}for(const Y in j){const te=j[Y],ae=this.findLoadedParent(te,this._source.minzoom),ue=this.findLoadedSibling(te),de=ae||ue||null;if(de){D[de.tileID.key]=r[de.tileID.key]=de.tileID;for(const me in D)D[me].isChildOf(de.tileID)&&delete D[me]}}for(const Y in this._tiles)D[Y]||(this._coveredTiles[Y]=!0)}}update(r,a){if(!this._sourceLoaded||this._paused)return;let h;this.transform=r,this.terrain=a,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new u.S(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(h=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(h=h.filter(R=>this._source.hasTile(R)))):h=[];const d=r.coveringZoomLevel(this._source),y=Math.max(d-Pt.maxOverzooming,this._source.minzoom),w=Math.max(d+Pt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const D of h)if(D.canonical.z>this._source.minzoom){const j=D.scaledTo(D.canonical.z-1);R[j.key]=j;const Y=D.scaledTo(Math.max(this._source.minzoom,Math.min(D.canonical.z,5)));R[Y.key]=Y}h=h.concat(Object.values(R))}const C=h.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=this._updateRetainedTiles(h,d);ni(this._source.type)&&this._updateCoveredAndRetainedTiles(T,y,w,d,h,a);for(const R in T)this._tiles[R].clearFadeHold();const P=u.ab(this._tiles,T);for(const R of P){const D=this._tiles[R];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,a){var h;const d={},y={},w=Math.max(a-Pt.maxOverzooming,this._source.minzoom),C=Math.max(a+Pt.maxUnderzooming,this._source.minzoom),T={};for(const P of r){const R=this._addTile(P);d[P.key]=P,R.hasData()||a<this._source.maxzoom&&(T[P.key]=P)}this._retainLoadedChildren(T,a,C,d);for(const P of r){let R=this._tiles[P.key];if(R.hasData())continue;if(a+1>this._source.maxzoom){const j=P.children(this._source.maxzoom)[0],Y=this.getTile(j);if(Y&&Y.hasData()){d[j.key]=j;continue}}else{const j=P.children(this._source.maxzoom);if(d[j[0].key]&&d[j[1].key]&&d[j[2].key]&&d[j[3].key])continue}let D=R.wasRequested();for(let j=P.overscaledZ-1;j>=w;--j){const Y=P.scaledTo(j);if(y[Y.key])break;if(y[Y.key]=!0,R=this.getTile(Y),!R&&D&&(R=this._addTile(Y)),R){const te=R.hasData();if((te||!(!((h=this.map)===null||h===void 0)&&h.cancelPendingTileRequestsWhileZooming)||D)&&(d[Y.key]=Y),D=R.wasRequested(),te)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const a=[];let h,d=this._tiles[r].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){h=this._loadedParentTiles[d.key];break}a.push(d.key);const y=d.scaledTo(d.overscaledZ-1);if(h=this._getLoadedTile(y),h)break;d=y}for(const y of a)this._loadedParentTiles[y]=h}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const a=this._tiles[r].tileID,h=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=h}}_addTile(r){let a=this._tiles[r.key];if(a)return a;a=this._cache.getAndRemove(r),a&&(this._setTileReloadTimer(r.key,a),a.tileID=r,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,a)));const h=a;return a||(a=new $r(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(a,r.key,a.state)),a.uses++,this._tiles[r.key]=a,h||this._source.fire(new u.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(r,a){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const h=a.getExpiryTimeout();h&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},h))}_removeTile(r){const a=this._tiles[r];a&&(a.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(r){const a=r.sourceDataType;r.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&a==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,a,h){const d=[],y=this.transform;if(!y)return d;const w=h?y.getCameraQueryGeometry(r):r,C=r.map(te=>y.pointCoordinate(te,this.terrain)),T=w.map(te=>y.pointCoordinate(te,this.terrain)),P=this.getIds();let R=1/0,D=1/0,j=-1/0,Y=-1/0;for(const te of T)R=Math.min(R,te.x),D=Math.min(D,te.y),j=Math.max(j,te.x),Y=Math.max(Y,te.y);for(let te=0;te<P.length;te++){const ae=this._tiles[P[te]];if(ae.holdingForFade())continue;const ue=ae.tileID,de=Math.pow(2,y.zoom-ae.tileID.overscaledZ),me=a*ae.queryPadding*u.X/ae.tileSize/de,ie=[ue.getTilePoint(new u.Z(R,D)),ue.getTilePoint(new u.Z(j,Y))];if(ie[0].x-me<u.X&&ie[0].y-me<u.X&&ie[1].x+me>=0&&ie[1].y+me>=0){const xe=C.map(Pe=>ue.getTilePoint(Pe)),Se=T.map(Pe=>ue.getTilePoint(Pe));d.push({tile:ae,tileID:ue,queryGeometry:xe,cameraQueryGeometry:Se,scale:de})}}return d}getVisibleCoordinates(r){const a=this.getRenderableIds(r).map(h=>this._tiles[h].tileID);for(const h of a)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(ni(this._source.type)){const r=L.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=r)return!0}return!1}setFeatureState(r,a,h){this._state.updateState(r=r||"_geojsonTileLayer",a,h)}removeFeatureState(r,a,h){this._state.removeFeatureState(r=r||"_geojsonTileLayer",a,h)}getFeatureState(r,a){return this._state.getState(r=r||"_geojsonTileLayer",a)}setDependencies(r,a,h){const d=this._tiles[r];d&&d.setDependencies(a,h)}reloadTilesForDependencies(r,a){for(const h in this._tiles)this._tiles[h].hasDependency(r,a)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(r,a))}}function Pn(_,r){const a=Math.abs(2*_.wrap)-+(_.wrap<0),h=Math.abs(2*r.wrap)-+(r.wrap<0);return _.overscaledZ-r.overscaledZ||h-a||r.canonical.y-_.canonical.y||r.canonical.x-_.canonical.x}function ni(_){return _==="raster"||_==="image"||_==="video"}Pt.maxOverzooming=10,Pt.maxUnderzooming=3;class Ft{constructor(r,a){this.reset(r,a)}reset(r,a){this.points=r||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let a=1,h=this._distances[a];const d=r*this.paddedLength+this.padding;for(;h<d&&a<this._distances.length;)h=this._distances[++a];const y=a-1,w=this._distances[y],C=h-w,T=C>0?(d-w)/C:0;return this.points[y].mult(1-T).add(this.points[a].mult(T))}}function _i(_,r){let a=!0;return _==="always"||_!=="never"&&r!=="never"||(a=!1),a}class Di{constructor(r,a,h){const d=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/h),this.yCellCount=Math.ceil(a/h);for(let w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=a,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,a,h,d,y){this._forEachCell(a,h,d,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(d),this.bboxes.push(y)}insertCircle(r,a,h,d){this._forEachCell(a-d,h-d,a+d,h+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(a),this.circles.push(h),this.circles.push(d)}_insertBoxCell(r,a,h,d,y,w){this.boxCells[y].push(w)}_insertCircleCell(r,a,h,d,y,w){this.circleCells[y].push(w)}_query(r,a,h,d,y,w,C){if(h<0||r>this.width||d<0||a>this.height)return[];const T=[];if(r<=0&&a<=0&&this.width<=h&&this.height<=d){if(y)return[{key:null,x1:r,y1:a,x2:h,y2:d}];for(let P=0;P<this.boxKeys.length;P++)T.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const R=this.circles[3*P],D=this.circles[3*P+1],j=this.circles[3*P+2];T.push({key:this.circleKeys[P],x1:R-j,y1:D-j,x2:R+j,y2:D+j})}}else this._forEachCell(r,a,h,d,this._queryCell,T,{hitTest:y,overlapMode:w,seenUids:{box:{},circle:{}}},C);return T}query(r,a,h,d){return this._query(r,a,h,d,!1,null)}hitTest(r,a,h,d,y,w){return this._query(r,a,h,d,!0,y,w).length>0}hitTestCircle(r,a,h,d,y){const w=r-h,C=r+h,T=a-h,P=a+h;if(C<0||w>this.width||P<0||T>this.height)return!1;const R=[];return this._forEachCell(w,T,C,P,this._queryCellCircle,R,{hitTest:!0,overlapMode:d,circle:{x:r,y:a,radius:h},seenUids:{box:{},circle:{}}},y),R.length>0}_queryCell(r,a,h,d,y,w,C,T){const{seenUids:P,hitTest:R,overlapMode:D}=C,j=this.boxCells[y];if(j!==null){const te=this.bboxes;for(const ae of j)if(!P.box[ae]){P.box[ae]=!0;const ue=4*ae,de=this.boxKeys[ae];if(r<=te[ue+2]&&a<=te[ue+3]&&h>=te[ue+0]&&d>=te[ue+1]&&(!T||T(de))&&(!R||!_i(D,de.overlapMode))&&(w.push({key:de,x1:te[ue],y1:te[ue+1],x2:te[ue+2],y2:te[ue+3]}),R))return!0}}const Y=this.circleCells[y];if(Y!==null){const te=this.circles;for(const ae of Y)if(!P.circle[ae]){P.circle[ae]=!0;const ue=3*ae,de=this.circleKeys[ae];if(this._circleAndRectCollide(te[ue],te[ue+1],te[ue+2],r,a,h,d)&&(!T||T(de))&&(!R||!_i(D,de.overlapMode))){const me=te[ue],ie=te[ue+1],xe=te[ue+2];if(w.push({key:de,x1:me-xe,y1:ie-xe,x2:me+xe,y2:ie+xe}),R)return!0}}}return!1}_queryCellCircle(r,a,h,d,y,w,C,T){const{circle:P,seenUids:R,overlapMode:D}=C,j=this.boxCells[y];if(j!==null){const te=this.bboxes;for(const ae of j)if(!R.box[ae]){R.box[ae]=!0;const ue=4*ae,de=this.boxKeys[ae];if(this._circleAndRectCollide(P.x,P.y,P.radius,te[ue+0],te[ue+1],te[ue+2],te[ue+3])&&(!T||T(de))&&!_i(D,de.overlapMode))return w.push(!0),!0}}const Y=this.circleCells[y];if(Y!==null){const te=this.circles;for(const ae of Y)if(!R.circle[ae]){R.circle[ae]=!0;const ue=3*ae,de=this.circleKeys[ae];if(this._circlesCollide(te[ue],te[ue+1],te[ue+2],P.x,P.y,P.radius)&&(!T||T(de))&&!_i(D,de.overlapMode))return w.push(!0),!0}}}_forEachCell(r,a,h,d,y,w,C,T){const P=this._convertToXCellCoord(r),R=this._convertToYCellCoord(a),D=this._convertToXCellCoord(h),j=this._convertToYCellCoord(d);for(let Y=P;Y<=D;Y++)for(let te=R;te<=j;te++)if(y.call(this,r,a,h,d,this.xCellCount*te+Y,w,C,T))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,a,h,d,y,w){const C=d-r,T=y-a,P=h+w;return P*P>C*C+T*T}_circleAndRectCollide(r,a,h,d,y,w,C){const T=(w-d)/2,P=Math.abs(r-(d+T));if(P>T+h)return!1;const R=(C-y)/2,D=Math.abs(a-(y+R));if(D>R+h)return!1;if(P<=T||D<=R)return!0;const j=P-T,Y=D-R;return j*j+Y*Y<=h*h}}function kt(_,r,a,h,d){const y=u.H();return r?(u.K(y,y,[1/d,1/d,1]),a||u.ad(y,y,h.angle)):u.L(y,h.labelPlaneMatrix,_),y}function ur(_,r,a,h,d){if(r){const y=u.ae(_);return u.K(y,y,[d,d,1]),a||u.ad(y,y,-h.angle),y}return h.glCoordMatrix}function ne(_,r,a,h){let d;h?(d=[_,r,h(_,r),1],u.af(d,d,a)):(d=[_,r,0,1],hr(d,d,a));const y=d[3];return{point:new u.P(d[0]/y,d[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function O(_,r){return .5+_/r*.5}function $(_,r){return _.x>=-r[0]&&_.x<=r[0]&&_.y>=-r[1]&&_.y<=r[1]}function K(_,r,a,h,d,y,w,C,T,P,R,D,j,Y,te){const ae=h?_.textSizeData:_.iconSizeData,ue=u.ag(ae,a.transform.zoom),de=[256/a.width*2+1,256/a.height*2+1],me=h?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;me.clear();const ie=_.lineVertexArray,xe=h?_.text.placedSymbolArray:_.icon.placedSymbolArray,Se=a.transform.width/a.transform.height;let Pe=!1;for(let Ve=0;Ve<xe.length;Ve++){const Ye=xe.get(Ve);if(Ye.hidden||Ye.writingMode===u.ah.vertical&&!Pe){It(Ye.numGlyphs,me);continue}Pe=!1;const it=ne(Ye.anchorX,Ye.anchorY,r,te);if(!$(it.point,de)){It(Ye.numGlyphs,me);continue}const ct=O(a.transform.cameraToCenterDistance,it.signedDistanceFromCamera),tt=u.ai(ae,ue,Ye),et=w?tt/ct:tt*ct,mt={getElevation:te,labelPlaneMatrix:d,lineVertexArray:ie,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:P,tileAnchorPoint:new u.P(Ye.anchorX,Ye.anchorY),unwrappedTileID:R,width:D,height:j,translation:Y},Ot=we(mt,Ye,et,!1,C,r,y,_.glyphOffsetArray,me,Se,T);Pe=Ot.useVertical,(Ot.notEnoughRoom||Pe||Ot.needsFlipping&&we(mt,Ye,et,!0,C,r,y,_.glyphOffsetArray,me,Se,T).notEnoughRoom)&&It(Ye.numGlyphs,me)}h?_.text.dynamicLayoutVertexBuffer.updateData(me):_.icon.dynamicLayoutVertexBuffer.updateData(me)}function se(_,r,a,h,d,y,w,C){const T=y.glyphStartIndex+y.numGlyphs,P=y.lineStartIndex,R=y.lineStartIndex+y.lineLength,D=r.getoffsetX(y.glyphStartIndex),j=r.getoffsetX(T-1),Y=Qe(_*D,a,h,d,y.segment,P,R,C,w);if(!Y)return null;const te=Qe(_*j,a,h,d,y.segment,P,R,C,w);return te?C.projectionCache.anyProjectionOccluded?null:{first:Y,last:te}:null}function ve(_,r,a,h){return _===u.ah.horizontal&&Math.abs(a.y-r.y)>Math.abs(a.x-r.x)*h?{useVertical:!0}:(_===u.ah.vertical?r.y<a.y:r.x>a.x)?{needsFlipping:!0}:null}function we(_,r,a,h,d,y,w,C,T,P,R){const D=a/24,j=r.lineOffsetX*D,Y=r.lineOffsetY*D;let te;if(r.numGlyphs>1){const ae=r.glyphStartIndex+r.numGlyphs,ue=r.lineStartIndex,de=r.lineStartIndex+r.lineLength,me=se(D,C,j,Y,h,r,R,_);if(!me)return{notEnoughRoom:!0};const ie=ne(me.first.point.x,me.first.point.y,w,_.getElevation).point,xe=ne(me.last.point.x,me.last.point.y,w,_.getElevation).point;if(d&&!h){const Se=ve(r.writingMode,ie,xe,P);if(Se)return Se}te=[me.first];for(let Se=r.glyphStartIndex+1;Se<ae-1;Se++)te.push(Qe(D*C.getoffsetX(Se),j,Y,h,r.segment,ue,de,_,R));te.push(me.last)}else{if(d&&!h){const ue=ne(_.tileAnchorPoint.x,_.tileAnchorPoint.y,y,_.getElevation).point,de=r.lineStartIndex+r.segment+1,me=new u.P(_.lineVertexArray.getx(de),_.lineVertexArray.gety(de)),ie=ne(me.x,me.y,y,_.getElevation),xe=ie.signedDistanceFromCamera>0?ie.point:function(Pe,Ve,Ye,it,ct,tt){return Te(Pe,Ve,Ye,1,ct,tt)}(_.tileAnchorPoint,me,ue,0,y,_),Se=ve(r.writingMode,ue,xe,P);if(Se)return Se}const ae=Qe(D*C.getoffsetX(r.glyphStartIndex),j,Y,h,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,_,R);if(!ae||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};te=[ae]}for(const ae of te)u.aj(T,ae.point,ae.angle);return{}}function Te(_,r,a,h,d,y){const w=_.add(_.sub(r)._unit()),C=d!==void 0?ne(w.x,w.y,d,y.getElevation).point:Oe(w.x,w.y,y).point,T=a.sub(C);return a.add(T._mult(h/T.mag()))}function pe(_,r,a){const h=r.projectionCache;if(h.projections[_])return h.projections[_];const d=new u.P(r.lineVertexArray.getx(_),r.lineVertexArray.gety(_)),y=Oe(d.x,d.y,r);if(y.signedDistanceFromCamera>0)return h.projections[_]=y.point,h.anyProjectionOccluded=h.anyProjectionOccluded||y.isOccluded,y.point;const w=_-a.direction;return function(C,T,P,R,D){return Te(C,T,P,R,void 0,D)}(a.distanceFromAnchor===0?r.tileAnchorPoint:new u.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),d,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,r)}function Oe(_,r,a){const h=_+a.translation[0],d=r+a.translation[1];let y;return!a.pitchWithMap&&a.projection.useSpecialProjectionForSymbols?(y=a.projection.projectTileCoordinates(h,d,a.unwrappedTileID,a.getElevation),y.point.x=(.5*y.point.x+.5)*a.width,y.point.y=(.5*-y.point.y+.5)*a.height):(y=ne(h,d,a.labelPlaneMatrix,a.getElevation),y.isOccluded=!1),y}function Ue(_,r,a){return _._unit()._perp()._mult(r*a)}function Be(_,r,a,h,d,y,w,C,T){if(C.projectionCache.offsets[_])return C.projectionCache.offsets[_];const P=a.add(r);if(_+T.direction<h||_+T.direction>=d)return C.projectionCache.offsets[_]=P,P;const R=pe(_+T.direction,C,T),D=Ue(R.sub(a),w,T.direction),j=a.add(D),Y=R.add(D);return C.projectionCache.offsets[_]=u.ak(y,P,j,Y)||P,C.projectionCache.offsets[_]}function Qe(_,r,a,h,d,y,w,C,T){const P=h?_-r:_+r;let R=P>0?1:-1,D=0;h&&(R*=-1,D=Math.PI),R<0&&(D+=Math.PI);let j,Y=R>0?y+d:y+d+1;C.projectionCache.cachedAnchorPoint?j=C.projectionCache.cachedAnchorPoint:(j=Oe(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=j);let te,ae,ue=j,de=j,me=0,ie=0;const xe=Math.abs(P),Se=[];let Pe;for(;me+ie<=xe;){if(Y+=R,Y<y||Y>=w)return null;me+=ie,de=ue,ae=te;const it={absOffsetX:xe,direction:R,distanceFromAnchor:me,previousVertex:de};if(ue=pe(Y,C,it),a===0)Se.push(de),Pe=ue.sub(de);else{let ct;const tt=ue.sub(de);ct=tt.mag()===0?Ue(pe(Y+R,C,it).sub(ue),a,R):Ue(tt,a,R),ae||(ae=de.add(ct)),te=Be(Y,ct,ue,y,w,ae,a,C,it),Se.push(ae),Pe=te.sub(ae)}ie=Pe.mag()}const Ve=Pe._mult((xe-me)/ie)._add(ae||de),Ye=D+Math.atan2(ue.y-de.y,ue.x-de.x);return Se.push(Ve),{point:Ve,angle:T?Ye:0,path:Se}}const xt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function It(_,r){for(let a=0;a<_;a++){const h=r.length;r.resize(h+4),r.float32.set(xt,3*h)}}function hr(_,r,a){const h=r[0],d=r[1];return _[0]=a[0]*h+a[4]*d+a[12],_[1]=a[1]*h+a[5]*d+a[13],_[3]=a[3]*h+a[7]*d+a[15],_}const jt=100;class dr{constructor(r,a,h=new Di(r.width+200,r.height+200,25),d=new Di(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=a,this.grid=h,this.ignoredGrid=d,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+jt,this.screenBottomBoundary=r.height+jt,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,a,h,d,y,w,C,T,P,R,D){const j=r.anchorPointX+T[0],Y=r.anchorPointY+T[1],te=this.projectAndGetPerspectiveRatio(d,j,Y,y,R),ae=h*te.perspectiveRatio;let ue;if(w||C)ue=this._projectCollisionBox(r,ae,d,y,w,C,T,te,R,D);else{const Se=te.point.x+(D?D.x*ae:0),Pe=te.point.y+(D?D.y*ae:0);ue={allPointsOccluded:!1,box:[Se+r.x1*ae,Pe+r.y1*ae,Se+r.x2*ae,Pe+r.y2*ae]}}const[de,me,ie,xe]=ue.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?ue.allPointsOccluded:this.mapProjection.isOccluded(j,Y,y))||te.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(de,me,ie,xe)||a!=="always"&&this.grid.hitTest(de,me,ie,xe,a,P)?{box:[de,me,ie,xe],placeable:!1,offscreen:!1}:{box:[de,me,ie,xe],placeable:!0,offscreen:this.isOffscreen(de,me,ie,xe)}}placeCollisionCircles(r,a,h,d,y,w,C,T,P,R,D,j,Y,te,ae,ue){const de=[],me=new u.P(a.anchorX,a.anchorY),ie=this.getPerspectiveRatio(w,me.x,me.y,C,ue),xe=(D?y/ie:y*ie)/u.ap,Se={getElevation:ue,labelPlaneMatrix:T,lineVertexArray:h,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:me,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:ae},Pe=se(xe,d,a.lineOffsetX*xe,a.lineOffsetY*xe,!1,a,!1,Se);let Ve=!1,Ye=!1,it=!0;if(Pe){const ct=.5*Y*ie+te,tt=new u.P(-100,-100),et=new u.P(this.screenRightBoundary,this.screenBottomBoundary),mt=new Ft,Ot=Pe.first,rt=Pe.last;let st=[];for(let Wt=Ot.path.length-1;Wt>=1;Wt--)st.push(Ot.path[Wt]);for(let Wt=1;Wt<rt.path.length;Wt++)st.push(rt.path[Wt]);const Lt=2.5*ct;if(P){const Wt=this.projectPathToScreenSpace(st,Se,P);st=Wt.some(rr=>rr.signedDistanceFromCamera<=0)?[]:Wt.map(rr=>rr.point)}let jr=[];if(st.length>0){const Wt=st[0].clone(),rr=st[0].clone();for(let Vr=1;Vr<st.length;Vr++)Wt.x=Math.min(Wt.x,st[Vr].x),Wt.y=Math.min(Wt.y,st[Vr].y),rr.x=Math.max(rr.x,st[Vr].x),rr.y=Math.max(rr.y,st[Vr].y);jr=Wt.x>=tt.x&&rr.x<=et.x&&Wt.y>=tt.y&&rr.y<=et.y?[st]:rr.x<tt.x||Wt.x>et.x||rr.y<tt.y||Wt.y>et.y?[]:u.al([st],tt.x,tt.y,et.x,et.y)}for(const Wt of jr){mt.reset(Wt,.25*ct);let rr=0;rr=mt.length<=.5*ct?1:Math.ceil(mt.paddedLength/Lt)+1;for(let Vr=0;Vr<rr;Vr++){const Fn=Vr/Math.max(rr-1,1),eo=mt.lerp(Fn),Ur=eo.x+jt,si=eo.y+jt;de.push(Ur,si,ct,0);const Xn=Ur-ct,On=si-ct,Kn=Ur+ct,xo=si+ct;if(it=it&&this.isOffscreen(Xn,On,Kn,xo),Ye=Ye||this.isInsideGrid(Xn,On,Kn,xo),r!=="always"&&this.grid.hitTestCircle(Ur,si,ct,r,j)&&(Ve=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ve}}}}return{circles:!R&&Ve||!Ye||ie<this.perspectiveRatioCutoff?[]:de,offscreen:it,collisionDetected:Ve}}projectPathToScreenSpace(r,a,h){return r.map(d=>ne(d.x,d.y,h,a.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let h=1/0,d=1/0,y=-1/0,w=-1/0;for(const R of r){const D=new u.P(R.x+jt,R.y+jt);h=Math.min(h,D.x),d=Math.min(d,D.y),y=Math.max(y,D.x),w=Math.max(w,D.y),a.push(D)}const C=this.grid.query(h,d,y,w).concat(this.ignoredGrid.query(h,d,y,w)),T={},P={};for(const R of C){const D=R.key;if(T[D.bucketInstanceId]===void 0&&(T[D.bucketInstanceId]={}),T[D.bucketInstanceId][D.featureIndex])continue;const j=[new u.P(R.x1,R.y1),new u.P(R.x2,R.y1),new u.P(R.x2,R.y2),new u.P(R.x1,R.y2)];u.am(a,j)&&(T[D.bucketInstanceId][D.featureIndex]=!0,P[D.bucketInstanceId]===void 0&&(P[D.bucketInstanceId]=[]),P[D.bucketInstanceId].push(D.featureIndex))}return P}insertCollisionBox(r,a,h,d,y,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:y,collisionGroupID:w,overlapMode:a},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,a,h,d,y,w){const C=h?this.ignoredGrid:this.grid,T={bucketInstanceId:d,featureIndex:y,collisionGroupID:w,overlapMode:a};for(let P=0;P<r.length;P+=4)C.insertCircle(T,r[P],r[P+1],r[P+2])}projectAndGetPerspectiveRatio(r,a,h,d,y){let w;y?(w=[a,h,y(a,h),1],u.af(w,w,r)):(w=[a,h,0,1],hr(w,w,r));const C=w[3];return{point:new u.P((w[0]/C+1)/2*this.transform.width+jt,(-w[1]/C+1)/2*this.transform.height+jt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C*.5,isOccluded:!1,signedDistanceFromCamera:C}}getPerspectiveRatio(r,a,h,d,y){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,h,d,y):ne(a,h,r,y);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(r,a,h,d){return h<jt||r>=this.screenRightBoundary||d<jt||a>this.screenBottomBoundary}isInsideGrid(r,a,h,d){return h>=0&&r<this.gridRightBoundary&&d>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,a,h,d,y,w,C,T,P,R){let D=new u.P(1,0),j=new u.P(0,1);const Y=new u.P(r.anchorPointX+C[0],r.anchorPointY+C[1]);if(w&&!y){const it=this.projectAndGetPerspectiveRatio(h,Y.x+1,Y.y,d,P).point.sub(T.point).unit(),ct=Math.atan(it.y/it.x)+(it.x<0?Math.PI:0),tt=Math.sin(ct),et=Math.cos(ct);D=new u.P(et,tt),j=new u.P(-tt,et)}else if(!w&&y){const it=-this.transform.angle,ct=Math.sin(it),tt=Math.cos(it);D=new u.P(tt,ct),j=new u.P(-ct,tt)}let te=T.point,ae=a;if(y){te=Y;const it=this.transform.zoom-Math.floor(this.transform.zoom);ae=Math.pow(2,-it),ae*=this.mapProjection.getPitchedTextCorrection(this.transform,Y,d),R||(ae*=u.ac(.5+T.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}R&&(te=te.add(D.mult(R.x*ae)).add(j.mult(R.y*ae)));const ue=r.x1*ae,de=r.x2*ae,me=(ue+de)/2,ie=r.y1*ae,xe=r.y2*ae,Se=(ie+xe)/2,Pe=[{offsetX:ue,offsetY:ie},{offsetX:me,offsetY:ie},{offsetX:de,offsetY:ie},{offsetX:de,offsetY:Se},{offsetX:de,offsetY:xe},{offsetX:me,offsetY:xe},{offsetX:ue,offsetY:xe},{offsetX:ue,offsetY:Se}];let Ve=[];for(const{offsetX:it,offsetY:ct}of Pe)Ve.push(new u.P(te.x+D.x*it+j.x*ct,te.y+D.y*it+j.y*ct));let Ye=!1;if(y){const it=Ve.map(ct=>this.projectAndGetPerspectiveRatio(h,ct.x,ct.y,d,P));Ye=it.some(ct=>!ct.isOccluded),Ve=it.map(ct=>ct.point)}else Ye=!0;return{box:u.ao(Ve),allPointsOccluded:!Ye}}}function tr(_,r,a){return r*(u.X/(_.tileSize*Math.pow(2,a-_.tileID.overscaledZ)))}class dn{constructor(r,a,h,d){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?a:-a))):d&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class Xr{constructor(r,a,h,d,y){this.text=new dn(r?r.text:null,a,h,y),this.icon=new dn(r?r.icon:null,a,d,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Zt{constructor(r,a,h){this.text=r,this.icon=a,this.skipFade=h}}class wr{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class Gr{constructor(r,a,h,d,y){this.bucketInstanceId=r,this.featureIndex=a,this.sourceLayerIndex=h,this.bucketIndex=d,this.tileID=y}}class wn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const a=++this.maxGroupID;this.collisionGroups[r]={ID:a,predicate:h=>h.collisionGroupID===a}}return this.collisionGroups[r]}}function Mn(_,r,a,h,d){const{horizontalAlign:y,verticalAlign:w}=u.au(_);return new u.P(-(y-.5)*r+h[0]*d,-(w-.5)*a+h[1]*d)}class Zn{constructor(r,a,h,d,y,w){this.transform=r.clone(),this.terrain=h,this.collisionIndex=new dr(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new wn(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const a=this.terrain;return a?(h,d)=>a.getElevation(r,h,d):null}getBucketParts(r,a,h,d){const y=h.getBucket(a),w=h.latestFeatureIndex;if(!y||!w||a.id!==y.layerIds[0])return;const C=h.collisionBoxArray,T=y.layers[0].layout,P=y.layers[0].paint,R=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),D=h.tileSize/u.X,j=h.tileID.toUnwrapped(),Y=this.transform.calculatePosMatrix(j),te=T.get("text-pitch-alignment")==="map",ae=T.get("text-rotation-alignment")==="map",ue=tr(h,1,this.transform.zoom),de=this.collisionIndex.mapProjection.translatePosition(this.transform,h,P.get("text-translate"),P.get("text-translate-anchor")),me=this.collisionIndex.mapProjection.translatePosition(this.transform,h,P.get("icon-translate"),P.get("icon-translate-anchor")),ie=kt(Y,te,ae,this.transform,ue);let xe=null;if(te){const Pe=ur(Y,te,ae,this.transform,ue);xe=u.L([],this.transform.labelPlaneMatrix,Pe)}this.retainedQueryData[y.bucketInstanceId]=new Gr(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,h.tileID);const Se={bucket:y,layout:T,translationText:de,translationIcon:me,posMatrix:Y,unwrappedTileID:j,textLabelPlaneMatrix:ie,labelToScreenMatrix:xe,scale:R,textPixelRatio:D,holdingForFade:h.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:u.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(d)for(const Pe of y.sortKeyRanges){const{sortKey:Ve,symbolInstanceStart:Ye,symbolInstanceEnd:it}=Pe;r.push({sortKey:Ve,symbolInstanceStart:Ye,symbolInstanceEnd:it,parameters:Se})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(r,a,h,d,y,w,C,T,P,R,D,j,Y,te,ae,ue,de,me,ie){const xe=u.aq[r.textAnchor],Se=[r.textOffset0,r.textOffset1],Pe=Mn(xe,h,d,Se,y),Ve=this.collisionIndex.placeCollisionBox(a,j,T,P,R,C,w,ue,D.predicate,ie,Pe);if((!me||this.collisionIndex.placeCollisionBox(me,j,T,P,R,C,w,de,D.predicate,ie,Pe).placeable)&&Ve.placeable){let Ye;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(Ye=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),Y.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Y.crossTileID]={textOffset:Se,width:h,height:d,anchor:xe,textBoxScale:y,prevAnchor:Ye},this.markUsedJustification(te,xe,Y,ae),te.allowVerticalPlacement&&(this.markUsedOrientation(te,ae,Y),this.placedOrientations[Y.crossTileID]=ae),{shift:Pe,placedGlyphBoxes:Ve}}}placeLayerBucketPart(r,a,h){const{bucket:d,layout:y,translationText:w,translationIcon:C,posMatrix:T,unwrappedTileID:P,textLabelPlaneMatrix:R,labelToScreenMatrix:D,textPixelRatio:j,holdingForFade:Y,collisionBoxArray:te,partiallyEvaluatedTextSize:ae,collisionGroup:ue}=r.parameters,de=y.get("text-optional"),me=y.get("icon-optional"),ie=u.ar(y,"text-overlap","text-allow-overlap"),xe=ie==="always",Se=u.ar(y,"icon-overlap","icon-allow-overlap"),Pe=Se==="always",Ve=y.get("text-rotation-alignment")==="map",Ye=y.get("text-pitch-alignment")==="map",it=y.get("icon-text-fit")!=="none",ct=y.get("symbol-z-order")==="viewport-y",tt=xe&&(Pe||!d.hasIconData()||me),et=Pe&&(xe||!d.hasTextData()||de);!d.collisionArrays&&te&&d.deserializeCollisionBoxes(te);const mt=this._getTerrainElevationFunc(this.retainedQueryData[d.bucketInstanceId].tileID),Ot=(rt,st,Lt)=>{var jr,Wt;if(a[rt.crossTileID])return;if(Y)return void(this.placements[rt.crossTileID]=new Zt(!1,!1,!1));let rr=!1,Vr=!1,Fn=!0,eo=null,Ur={box:null,placeable:!1,offscreen:null},si={placeable:!1},Xn=null,On=null,Kn=null,xo=0,va=0,Mc=0;st.textFeatureIndex?xo=st.textFeatureIndex:rt.useRuntimeCollisionCircles&&(xo=rt.featureIndex),st.verticalTextFeatureIndex&&(va=st.verticalTextFeatureIndex);const xa=st.textBox;if(xa){const Ni=An=>{let $n=u.ah.horizontal;if(d.allowVerticalPlacement&&!An&&this.prevPlacement){const Ci=this.prevPlacement.placedOrientations[rt.crossTileID];Ci&&(this.placedOrientations[rt.crossTileID]=Ci,$n=Ci,this.markUsedOrientation(d,$n,rt))}return $n},ji=(An,$n)=>{if(d.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&st.verticalTextBox){for(const Ci of d.writingModes)if(Ci===u.ah.vertical?(Ur=$n(),si=Ur):Ur=An(),Ur&&Ur.placeable)break}else Ur=An()},es=rt.textAnchorOffsetStartIndex,to=rt.textAnchorOffsetEndIndex;if(to===es){const An=($n,Ci)=>{const or=this.collisionIndex.placeCollisionBox($n,ie,j,T,P,Ye,Ve,w,ue.predicate,mt);return or&&or.placeable&&(this.markUsedOrientation(d,Ci,rt),this.placedOrientations[rt.crossTileID]=Ci),or};ji(()=>An(xa,u.ah.horizontal),()=>{const $n=st.verticalTextBox;return d.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&$n?An($n,u.ah.vertical):{box:null,offscreen:null}}),Ni(Ur&&Ur.placeable)}else{let An=u.aq[(Wt=(jr=this.prevPlacement)===null||jr===void 0?void 0:jr.variableOffsets[rt.crossTileID])===null||Wt===void 0?void 0:Wt.anchor];const $n=(or,zs,ba)=>{const wa=or.x2-or.x1,Qp=or.y2-or.y1,yy=rt.textBoxScale,ef=it&&Se==="never"?zs:null;let ts=null,tf=ie==="never"?1:2,zc="never";An&&tf++;for(let xl=0;xl<tf;xl++){for(let Rc=es;Rc<to;Rc++){const Dc=d.textAnchorOffsets.get(Rc);if(An&&Dc.textAnchor!==An)continue;const Sa=this.attemptAnchorPlacement(Dc,or,wa,Qp,yy,Ve,Ye,j,T,P,ue,zc,rt,d,ba,w,C,ef,mt);if(Sa&&(ts=Sa.placedGlyphBoxes,ts&&ts.placeable))return rr=!0,eo=Sa.shift,ts}An?An=null:zc=ie}return h&&!ts&&(ts={box:this.collisionIndex.placeCollisionBox(xa,"always",j,T,P,Ye,Ve,w,ue.predicate,mt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),ts};ji(()=>$n(xa,st.iconBox,u.ah.horizontal),()=>{const or=st.verticalTextBox;return d.allowVerticalPlacement&&(!Ur||!Ur.placeable)&&rt.numVerticalGlyphVertices>0&&or?$n(or,st.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Ur&&(rr=Ur.placeable,Fn=Ur.offscreen);const Ci=Ni(Ur&&Ur.placeable);if(!rr&&this.prevPlacement){const or=this.prevPlacement.variableOffsets[rt.crossTileID];or&&(this.variableOffsets[rt.crossTileID]=or,this.markUsedJustification(d,or.anchor,rt,Ci))}}}if(Xn=Ur,rr=Xn&&Xn.placeable,Fn=Xn&&Xn.offscreen,rt.useRuntimeCollisionCircles){const Ni=d.text.placedSymbolArray.get(rt.centerJustifiedTextSymbolIndex),ji=u.ai(d.textSizeData,ae,Ni),es=y.get("text-padding");On=this.collisionIndex.placeCollisionCircles(ie,Ni,d.lineVertexArray,d.glyphOffsetArray,ji,T,P,R,D,h,Ye,ue.predicate,rt.collisionCircleDiameter,es,w,mt),On.circles.length&&On.collisionDetected&&!h&&u.w("Collisions detected, but collision boxes are not shown"),rr=xe||On.circles.length>0&&!On.collisionDetected,Fn=Fn&&On.offscreen}if(st.iconFeatureIndex&&(Mc=st.iconFeatureIndex),st.iconBox){const Ni=ji=>this.collisionIndex.placeCollisionBox(ji,Se,j,T,P,Ye,Ve,C,ue.predicate,mt,it&&eo?eo:void 0);si&&si.placeable&&st.verticalIconBox?(Kn=Ni(st.verticalIconBox),Vr=Kn.placeable):(Kn=Ni(st.iconBox),Vr=Kn.placeable),Fn=Fn&&Kn.offscreen}const $i=de||rt.numHorizontalGlyphVertices===0&&rt.numVerticalGlyphVertices===0,Ac=me||rt.numIconVertices===0;$i||Ac?Ac?$i||(Vr=Vr&&rr):rr=Vr&&rr:Vr=rr=Vr&&rr;const Bh=Vr&&Kn.placeable;if(rr&&Xn.placeable&&this.collisionIndex.insertCollisionBox(Xn.box,ie,y.get("text-ignore-placement"),d.bucketInstanceId,si&&si.placeable&&va?va:xo,ue.ID),Bh&&this.collisionIndex.insertCollisionBox(Kn.box,Se,y.get("icon-ignore-placement"),d.bucketInstanceId,Mc,ue.ID),On&&rr&&this.collisionIndex.insertCollisionCircles(On.circles,ie,y.get("text-ignore-placement"),d.bucketInstanceId,xo,ue.ID),h&&this.storeCollisionData(d.bucketInstanceId,Lt,st,Xn,Kn,On),rt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rt.crossTileID]=new Zt(rr||tt,Vr||et,Fn||d.justReloaded),a[rt.crossTileID]=!0};if(ct){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rt=d.getSortedSymbolIndexes(this.transform.angle);for(let st=rt.length-1;st>=0;--st){const Lt=rt[st];Ot(d.symbolInstances.get(Lt),d.collisionArrays[Lt],Lt)}}else for(let rt=r.symbolInstanceStart;rt<r.symbolInstanceEnd;rt++)Ot(d.symbolInstances.get(rt),d.collisionArrays[rt],rt);if(h&&d.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[d.bucketInstanceId];u.as(rt.invProjMatrix,T),rt.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}storeCollisionData(r,a,h,d,y,w){if(h.textBox||h.iconBox){let C,T;this.collisionBoxArrays.has(r)?C=this.collisionBoxArrays.get(r):(C=new Map,this.collisionBoxArrays.set(r,C)),C.has(a)?T=C.get(a):(T={text:null,icon:null},C.set(a,T)),h.textBox&&(T.text=d.box),h.iconBox&&(T.icon=y.box)}if(w){let C=this.collisionCircleArrays[r];C===void 0&&(C=this.collisionCircleArrays[r]=new wr);for(let T=0;T<w.circles.length;T+=4)C.circles.push(w.circles[T+0]),C.circles.push(w.circles[T+1]),C.circles.push(w.circles[T+2]),C.circles.push(w.collisionDetected?1:0)}}markUsedJustification(r,a,h,d){let y;y=d===u.ah.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[u.at(a)];const w=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const C of w)C>=0&&(r.text.placedSymbolArray.get(C).crossTileID=y>=0&&C!==y?0:h.crossTileID)}markUsedOrientation(r,a,h){const d=a===u.ah.horizontal||a===u.ah.horizontalOnly?a:0,y=a===u.ah.vertical?a:0,w=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const C of w)r.text.placedSymbolArray.get(C).placedOrientation=d;h.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let h=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const d=a?a.symbolFadeChange(r):1,y=a?a.opacities:{},w=a?a.variableOffsets:{},C=a?a.placedOrientations:{};for(const T in this.placements){const P=this.placements[T],R=y[T];R?(this.opacities[T]=new Xr(R,d,P.text,P.icon),h=h||P.text!==R.text.placed||P.icon!==R.icon.placed):(this.opacities[T]=new Xr(null,d,P.text,P.icon,P.skipFade),h=h||P.text||P.icon)}for(const T in y){const P=y[T];if(!this.opacities[T]){const R=new Xr(P,d,!1,!1);R.isHidden()||(this.opacities[T]=R,h=h||P.text.placed||P.icon.placed)}}for(const T in w)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=w[T]);for(const T in C)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=C[T]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:r)}updateLayerOpacities(r,a){const h={};for(const d of a){const y=d.getBucket(r);y&&d.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,d.tileID,h,d.collisionBoxArray)}}updateBucketOpacities(r,a,h,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],w=y.layout,C=new Xr(null,0,!1,!1,!0),T=w.get("text-allow-overlap"),P=w.get("icon-allow-overlap"),R=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),D=w.get("text-rotation-alignment")==="map",j=w.get("text-pitch-alignment")==="map",Y=w.get("icon-text-fit")!=="none",te=new Xr(null,0,T&&(P||!r.hasIconData()||w.get("icon-optional")),P&&(T||!r.hasTextData()||w.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);const ae=(de,me,ie)=>{for(let xe=0;xe<me/4;xe++)de.opacityVertexArray.emplaceBack(ie);de.hasVisibleVertices=de.hasVisibleVertices||ie!==Qs},ue=this.collisionBoxArrays.get(r.bucketInstanceId);for(let de=0;de<r.symbolInstances.length;de++){const me=r.symbolInstances.get(de),{numHorizontalGlyphVertices:ie,numVerticalGlyphVertices:xe,crossTileID:Se}=me;let Pe=this.opacities[Se];h[Se]?Pe=C:Pe||(Pe=te,this.opacities[Se]=Pe),h[Se]=!0;const Ve=me.numIconVertices>0,Ye=this.placedOrientations[me.crossTileID],it=Ye===u.ah.vertical,ct=Ye===u.ah.horizontal||Ye===u.ah.horizontalOnly;if(ie>0||xe>0){const et=bi(Pe.text);ae(r.text,ie,it?Qs:et),ae(r.text,xe,ct?Qs:et);const mt=Pe.text.isHidden();[me.rightJustifiedTextSymbolIndex,me.centerJustifiedTextSymbolIndex,me.leftJustifiedTextSymbolIndex].forEach(st=>{st>=0&&(r.text.placedSymbolArray.get(st).hidden=mt||it?1:0)}),me.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(me.verticalPlacedTextSymbolIndex).hidden=mt||ct?1:0);const Ot=this.variableOffsets[me.crossTileID];Ot&&this.markUsedJustification(r,Ot.anchor,me,Ye);const rt=this.placedOrientations[me.crossTileID];rt&&(this.markUsedJustification(r,"left",me,rt),this.markUsedOrientation(r,rt,me))}if(Ve){const et=bi(Pe.icon),mt=!(Y&&me.verticalPlacedIconSymbolIndex&&it);me.placedIconSymbolIndex>=0&&(ae(r.icon,me.numIconVertices,mt?et:Qs),r.icon.placedSymbolArray.get(me.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),me.verticalPlacedIconSymbolIndex>=0&&(ae(r.icon,me.numVerticalIconVertices,mt?Qs:et),r.icon.placedSymbolArray.get(me.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}const tt=ue&&ue.has(de)?ue.get(de):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const et=r.collisionArrays[de];if(et){let mt=new u.P(0,0);if(et.textBox||et.verticalTextBox){let Ot=!0;if(R){const rt=this.variableOffsets[Se];rt?(mt=Mn(rt.anchor,rt.width,rt.height,rt.textOffset,rt.textBoxScale),D&&mt._rotate(j?this.transform.angle:-this.transform.angle)):Ot=!1}if(et.textBox||et.verticalTextBox){let rt;et.textBox&&(rt=it),et.verticalTextBox&&(rt=ct),Js(r.textCollisionBox.collisionVertexArray,Pe.text.placed,!Ot||rt,tt.text,mt.x,mt.y)}}if(et.iconBox||et.verticalIconBox){const Ot=!!(!ct&&et.verticalIconBox);let rt;et.iconBox&&(rt=Ot),et.verticalIconBox&&(rt=!Ot),Js(r.iconCollisionBox.collisionVertexArray,Pe.icon.placed,rt,tt.icon,Y?mt.x:0,Y?mt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const de=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=de.invProjMatrix,r.placementViewportMatrix=de.viewportMatrix,r.collisionCircleArray=de.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,a){const h=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*h>r}setStale(){this.stale=!0}}function Js(_,r,a,h,d,y){h&&h.length!==0||(h=[0,0,0,0]);const w=h[0]-jt,C=h[1]-jt,T=h[2]-jt,P=h[3]-jt;_.emplaceBack(r?1:0,a?1:0,d||0,y||0,w,C),_.emplaceBack(r?1:0,a?1:0,d||0,y||0,T,C),_.emplaceBack(r?1:0,a?1:0,d||0,y||0,T,P),_.emplaceBack(r?1:0,a?1:0,d||0,y||0,w,P)}const Sr=Math.pow(2,25),qu=Math.pow(2,24),Zu=Math.pow(2,17),vi=Math.pow(2,16),xi=Math.pow(2,9),Gg=Math.pow(2,8),Li=Math.pow(2,1);function bi(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const r=_.placed?1:0,a=Math.floor(127*_.opacity);return a*Sr+r*qu+a*Zu+r*vi+a*xi+r*Gg+a*Li+r}const Qs=0;function xs(){return{isOccluded:(_,r,a)=>!1,getPitchedTextCorrection:(_,r,a)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,r,a,h){throw new Error("Not implemented.")},translatePosition:(_,r,a,h)=>function(d,y,w,C,T=!1){if(!w[0]&&!w[1])return[0,0];const P=T?C==="map"?d.angle:0:C==="viewport"?-d.angle:0;if(P){const R=Math.sin(P),D=Math.cos(P);w=[w[0]*D-w[1]*R,w[0]*R+w[1]*D]}return[T?w[0]:tr(y,w[0],d.zoom),T?w[1]:tr(y,w[1],d.zoom)]}(_,r,a,h),getCircleRadiusCorrection:_=>1}}class pn{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,a,h,d,y){const w=this._bucketParts;for(;this._currentTileIndex<r.length;)if(a.getBucketParts(w,d,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((C,T)=>C.sortKey-T.sortKey));this._currentPartIndex<w.length;)if(a.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,y())return!0;return!1}}class tl{constructor(r,a,h,d,y,w,C,T){this.placement=new Zn(r,xs(),a,w,C,T),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(r,a,h){const d=L.now(),y=()=>!this._forceFullPlacement&&L.now()-d>2;for(;this._currentPlacementIndex>=0;){const w=a[r[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=C)&&(!w.maxzoom||w.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new pn(w)),this._inProgressLayer.continuePlacement(h[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Xi=512/u.X/2;class on{constructor(r,a,h){this.tileID=r,this.bucketInstanceId=h,this._symbolsByKey={};const d=new Map;for(let y=0;y<a.length;y++){const w=a.get(y),C=w.key,T=d.get(C);T?T.push(w):d.set(C,[w])}for(const[y,w]of d){const C={positions:w.map(T=>({x:Math.floor(T.anchorX*Xi),y:Math.floor(T.anchorY*Xi)})),crossTileIDs:w.map(T=>T.crossTileID)};if(C.positions.length>128){const T=new u.av(C.positions.length,16,Uint16Array);for(const{x:P,y:R}of C.positions)T.add(P,R);T.finish(),delete C.positions,C.index=T}this._symbolsByKey[y]=C}}getScaledCoordinates(r,a){const{x:h,y:d,z:y}=this.tileID.canonical,{x:w,y:C,z:T}=a.canonical,P=Xi/Math.pow(2,T-y),R=(C*u.X+r.anchorY)*P,D=d*u.X*Xi;return{x:Math.floor((w*u.X+r.anchorX)*P-h*u.X*Xi),y:Math.floor(R-D)}}findMatches(r,a,h){const d=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let y=0;y<r.length;y++){const w=r.get(y);if(w.crossTileID)continue;const C=this._symbolsByKey[w.key];if(!C)continue;const T=this.getScaledCoordinates(w,a);if(C.index){const P=C.index.range(T.x-d,T.y-d,T.x+d,T.y+d).sort();for(const R of P){const D=C.crossTileIDs[R];if(!h[D]){h[D]=!0,w.crossTileID=D;break}}}else if(C.positions)for(let P=0;P<C.positions.length;P++){const R=C.positions[P],D=C.crossTileIDs[P];if(Math.abs(R.x-T.x)<=d&&Math.abs(R.y-T.y)<=d&&!h[D]){h[D]=!0,w.crossTileID=D;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Ql{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ki{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const a=Math.round((r-this.lng)/360);if(a!==0)for(const h in this.indexes){const d=this.indexes[h],y={};for(const w in d){const C=d[w];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+a),y[C.tileID.key]=C}this.indexes[h]=y}this.lng=r}addBucket(r,a,h){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<a.symbolInstances.length;y++)a.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const d=this.usedCrossTileIDs[r.overscaledZ];for(const y in this.indexes){const w=this.indexes[y];if(Number(y)>r.overscaledZ)for(const C in w){const T=w[C];T.tileID.isChildOf(r)&&T.findMatches(a.symbolInstances,r,d)}else{const C=w[r.scaledTo(Number(y)).key];C&&C.findMatches(a.symbolInstances,r,d)}}for(let y=0;y<a.symbolInstances.length;y++){const w=a.symbolInstances.get(y);w.crossTileID||(w.crossTileID=h.generate(),d[w.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new on(r,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(r,a){for(const h of a.getCrossTileIDsLists())for(const d of h)delete this.usedCrossTileIDs[r][d]}removeStaleBuckets(r){let a=!1;for(const h in this.indexes){const d=this.indexes[h];for(const y in d)r[d[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,d[y]),delete d[y],a=!0)}return a}}class Xu{constructor(){this.layerIndexes={},this.crossTileIDs=new Ql,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,a,h){let d=this.layerIndexes[r.id];d===void 0&&(d=this.layerIndexes[r.id]=new Ki);let y=!1;const w={};d.handleWrapJump(h);for(const C of a){const T=C.getBucket(r);T&&r.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(C.tileID,T,this.crossTileIDs)&&(y=!0),w[T.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(r){const a={};r.forEach(h=>{a[h]=!0});for(const h in this.layerIndexes)a[h]||delete this.layerIndexes[h]}}const Yi=(_,r)=>u.t(_,r&&r.filter(a=>a.identifier!=="source.canvas")),Hg=u.aw();class ec extends u.E{constructor(r,a={}){super(),this._rtlPluginLoaded=()=>{for(const h in this.sourceCaches){const d=this.sourceCaches[h].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[h].reload()}},this.map=r,this.dispatcher=new Ct(Ut(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(h,d)=>this.getGlyphs(h,d)),this.dispatcher.registerMessageHandler("GI",(h,d)=>this.getImages(h,d)),this.imageManager=new Me,this.imageManager.setEventedParent(this),this.glyphManager=new Ke(r._requestManager,a.localIdeographFontFamily),this.lineAtlas=new St(256,512),this.crossTileSymbolIndex=new Xu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),zt().on(Xe,this._rtlPluginLoaded),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;const d=this.sourceCaches[h.sourceId];if(!d)return;const y=d.getSource();if(y&&y.vectorLayerIds)for(const w in this._layers){const C=this._layers[w];C.source===y.id&&this._validateLayer(C)}})}loadURL(r,a={},h){this.fire(new u.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const d=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.h(d,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,a,h)}).catch(w=>{this._loadStyleRequest=null,w&&!y.signal.aborted&&this.fire(new u.j(w))})}loadJSON(r,a={},h){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,L.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(r,a,h)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Hg,{validate:!1})}_load(r,a,h){var d;const y=a.transformStyle?a.transformStyle(h,r):r;if(!a.validate||!Yi(this,u.u(y))){this._loaded=!0,this.stylesheet=y;for(const w in y.sources)this.addSource(w,y.sources[w],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new We(this.stylesheet.light),this.sky=new Ge(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of r){const h=u.aA(a);h.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=h}}_loadSprite(r,a=!1,h=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,w,C,T){return u._(this,void 0,void 0,function*(){const P=Ae(y),R=C>1?"@2x":"",D={},j={};for(const{id:Y,url:te}of P){const ae=w.transformRequest(Re(te,R,".json"),"SpriteJSON");D[Y]=u.h(ae,T);const ue=w.transformRequest(Re(te,R,".png"),"SpriteImage");j[Y]=G.getImage(ue,T)}return yield Promise.all([...Object.values(D),...Object.values(j)]),function(Y,te){return u._(this,void 0,void 0,function*(){const ae={};for(const ue in Y){ae[ue]={};const de=L.getImageCanvasContext((yield te[ue]).data),me=(yield Y[ue]).data;for(const ie in me){const{width:xe,height:Se,x:Pe,y:Ve,sdf:Ye,pixelRatio:it,stretchX:ct,stretchY:tt,content:et,textFitWidth:mt,textFitHeight:Ot}=me[ie];ae[ue][ie]={data:null,pixelRatio:it,sdf:Ye,stretchX:ct,stretchY:tt,content:et,textFitWidth:mt,textFitHeight:Ot,spriteData:{width:xe,height:Se,x:Pe,y:Ve,context:de}}}}return ae})}(D,j)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const w in y){this._spritesImagesIds[w]=[];const C=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(T=>!(T in y)):[];for(const T of C)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(const T in y[w]){const P=w==="default"?T:`${w}:${T}`;this._spritesImagesIds[w].push(P),P in this.imageManager.images?this.imageManager.updateImage(P,y[w][T],!1):this.imageManager.addImage(P,y[w][T]),a&&(this._changedImages[P]=!0)}}}).catch(y=>{this._spriteRequest=null,d=y,this.fire(new u.j(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),h&&h(d)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const a=this.sourceCaches[r.source];if(!a)return;const h=r.sourceLayer;if(!h)return;const d=a.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(h)===-1)&&this.fire(new u.j(new Error(`Source layer "${h}" does not exist on source "${d.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,a=!1){const h=this._serializedAllLayers();if(!r||r.length===0)return Object.values(a?u.aB(h):h);const d=[];for(const y of r)if(h[y]){const w=a?u.aB(h[y]):h[y];d.push(w)}return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const a=Object.keys(this._layers);for(const h of a){const d=this._layers[h];d.type!=="custom"&&(r[h]=d.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const a=this._changed;if(a){const d=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(d.length||y.length)&&this._updateWorkerLayers(d,y);for(const w in this._updatedSources){const C=this._updatedSources[w];if(C==="reload")this._reloadSource(w);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const h={};for(const d in this.sourceCaches){const y=this.sourceCaches[d];h[d]=y.used,y.used=!1}for(const d of this._order){const y=this._layers[d];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const d in h){const y=this.sourceCaches[d];!!h[d]!=!!y.used&&y.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,a&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,a={}){var h;this._checkLoaded();const d=this.serialize();if(r=a.transformStyle?a.transformStyle(d,r):r,((h=a.validate)===null||h===void 0||h)&&Yi(this,u.u(r)))return!1;(r=u.aB(r)).layers=u.az(r.layers);const y=u.aC(d,r),w=this._getOperationsToPerform(y);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const C of w.operations)C();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const a=[],h=[];for(const d of r)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":a.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":a.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,d.args));break;case"setSky":a.push(()=>this.setSky.apply(this,d.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setTransition":a.push(()=>{});break;default:h.push(d.command)}return{operations:a,unimplemented:h}}addImage(r,a){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,a),this._afterImageUpdated(r)}updateImage(r,a){this.imageManager.updateImage(r,a)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,a,h={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(u.u.source,`sources.${r}`,a,null,h))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const d=this.sourceCaches[r]=new Pt(r,a,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:r})),d.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${h}" is using it.`)));const a=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],a.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,a){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const h=this.sourceCaches[r].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(a),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,a,h={}){this._checkLoaded();const d=r.id;if(this.getLayer(d))return void this.fire(new u.j(new Error(`Layer "${d}" already exists on this map.`)));let y;if(r.type==="custom"){if(Yi(this,u.aD(r)))return;y=u.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(d,r.source),r=u.aB(r),r=u.e(r,{source:d})),this._validate(u.u.layer,`layers.${d}`,r,{arrayIndex:-1},h))return;y=u.aA(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:d}})}const w=a?this._order.indexOf(a):this._order.length;if(a&&w===-1)this.fire(new u.j(new Error(`Cannot add layer "${d}" before non-existing layer "${a}".`)));else{if(this._order.splice(w,0,d),this._layerOrderChanged=!0,this._layers[d]=y,this._removedLayers[d]&&y.source&&y.type!=="custom"){const C=this._removedLayers[d];delete this._removedLayers[d],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,a){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===a)return;const h=this._order.indexOf(r);this._order.splice(h,1);const d=a?this._order.indexOf(a):this._order.length;a&&d===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${a}".`))):(this._order.splice(d,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const a=this._layers[r];if(!a)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));a.setEventedParent(null);const h=this._order.indexOf(r);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=a,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],a.onRemove&&a.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,a,h){this._checkLoaded();const d=this.getLayer(r);d?d.minzoom===a&&d.maxzoom===h||(a!=null&&(d.minzoom=a),h!=null&&(d.maxzoom=h),this._updateLayer(d)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,a,h={}){this._checkLoaded();const d=this.getLayer(r);if(d){if(!u.aE(d.filter,a))return a==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(u.u.filter,`layers.${d.id}.filter`,a,null,h)||(d.filter=u.aB(a),this._updateLayer(d)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aB(this.getLayer(r).filter)}setLayoutProperty(r,a,h,d={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getLayoutProperty(a),h)||(y.setLayoutProperty(a,h,d),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,a){const h=this.getLayer(r);if(h)return h.getLayoutProperty(a);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,a,h,d={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getPaintProperty(a),h)||(y.setPaintProperty(a,h,d)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,a){return this.getLayer(r).getPaintProperty(a)}setFeatureState(r,a){this._checkLoaded();const h=r.source,d=r.sourceLayer,y=this.sourceCaches[h];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${h}' does not exist in the map's style.`)));const w=y.getSource().type;w==="geojson"&&d?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||d?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(d,r.id,a)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,a){this._checkLoaded();const h=r.source,d=this.sourceCaches[h];if(d===void 0)return void this.fire(new u.j(new Error(`The source '${h}' does not exist in the map's style.`)));const y=d.getSource().type,w=y==="vector"?r.sourceLayer:void 0;y!=="vector"||w?a&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(w,r.id,a):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const a=r.source,h=r.sourceLayer,d=this.sourceCaches[a];if(d!==void 0)return d.getSource().type!=="vector"||h?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),d.getFeatureState(h,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aF(this.sourceCaches,y=>y.serialize()),a=this._serializeByIds(this._order,!0),h=this.map.getTerrain()||void 0,d=this.stylesheet;return u.aG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:r,layers:a,terrain:h},y=>y!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const a=w=>this._layers[w].type==="fill-extrusion",h={},d=[];for(let w=this._order.length-1;w>=0;w--){const C=this._order[w];if(a(C)){h[C]=w;for(const T of r){const P=T[C];if(P)for(const R of P)d.push(R)}}}d.sort((w,C)=>C.intersectionZ-w.intersectionZ);const y=[];for(let w=this._order.length-1;w>=0;w--){const C=this._order[w];if(a(C))for(let T=d.length-1;T>=0;T--){const P=d[T].feature;if(h[P.layer.id]<w)break;y.push(P),d.pop()}else for(const T of r){const P=T[C];if(P)for(const R of P)y.push(R.feature)}}return y}queryRenderedFeatures(r,a,h){a&&a.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",a.filter,null,a);const d={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const C of a.layers){const T=this._layers[C];if(!T)return this.fire(new u.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];d[T.source]=!0}}const y=[];a.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const C in this.sourceCaches)a.layers&&!d[C]||y.push(yr(this.sourceCaches[C],this._layers,w,r,a,h));return this.placement&&y.push(function(C,T,P,R,D,j,Y){const te={},ae=j.queryRenderedSymbols(R),ue=[];for(const de of Object.keys(ae).map(Number))ue.push(Y[de]);ue.sort(Nt);for(const de of ue){const me=de.featureIndex.lookupSymbolFeatures(ae[de.bucketInstanceId],T,de.bucketIndex,de.sourceLayerIndex,D.filter,D.layers,D.availableImages,C);for(const ie in me){const xe=te[ie]=te[ie]||[],Se=me[ie];Se.sort((Pe,Ve)=>{const Ye=de.featureSortOrder;if(Ye){const it=Ye.indexOf(Pe.featureIndex);return Ye.indexOf(Ve.featureIndex)-it}return Ve.featureIndex-Pe.featureIndex});for(const Pe of Se)xe.push(Pe)}}for(const de in te)te[de].forEach(me=>{const ie=me.feature,xe=P[C[de].source].getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=xe});return te}(this._layers,w,this.sourceCaches,r,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,a){a&&a.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",a.filter,null,a);const h=this.sourceCaches[r];return h?function(d,y){const w=d.getRenderableIds().map(P=>d.getTileByID(P)),C=[],T={};for(let P=0;P<w.length;P++){const R=w[P],D=R.tileID.canonical.key;T[D]||(T[D]=!0,R.querySourceFeatures(C,y))}return C}(h,a):[]}getLight(){return this.light.getLight()}setLight(r,a={}){this._checkLoaded();const h=this.light.getLight();let d=!1;for(const w in r)if(!u.aE(r[w],h[w])){d=!0;break}if(!d)return;const y={now:L.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,a),this.light.updateTransitions(y)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,a={}){const h=this.getSky();let d=!1;if(!r&&!h)return;if(r&&!h)d=!0;else if(!r&&h)d=!0;else for(const w in r)if(!u.aE(r[w],h[w])){d=!0;break}if(!d)return;const y={now:L.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,a),this.sky.updateTransitions(y)}_validate(r,a,h,d,y={}){return(!y||y.validate!==!1)&&Yi(this,r.call(u.u,u.e({key:a,style:this.serialize(),value:h,styleSpec:u.v},d)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),zt().off(Xe,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const h=this.sourceCaches[a];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const a in this.sourceCaches)this.sourceCaches[a].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,a,h,d,y=!1){let w=!1,C=!1;const T={};for(const P of this._order){const R=this._layers[P];if(R.type!=="symbol")continue;if(!T[R.source]){const j=this.sourceCaches[R.source];T[R.source]=j.getRenderableIds(!0).map(Y=>j.getTileByID(Y)).sort((Y,te)=>te.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan(te.tileID)?-1:1))}const D=this.crossTileSymbolIndex.addLayer(R,T[R.source],r.center.lng);w=w||D}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(L.now(),r.zoom))&&(this.pauseablePlacement=new tl(r,this.map.terrain,this._order,y,a,h,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(L.now()),C=!0),w&&this.pauseablePlacement.placement.setStale()),C||w)for(const P of this._order){const R=this._layers[P];R.type==="symbol"&&this.placement.updateLayerOpacities(R,T[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(L.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,a){return u._(this,void 0,void 0,function*(){const h=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const d=this.sourceCaches[a.source];return d&&d.setDependencies(a.tileID.key,a.type,a.icons),h})}getGlyphs(r,a){return u._(this,void 0,void 0,function*(){const h=yield this.glyphManager.getGlyphs(a.stacks),d=this.sourceCaches[a.source];return d&&d.setDependencies(a.tileID.key,a.type,[""]),h})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,a={}){this._checkLoaded(),r&&this._validate(u.u.glyphs,"glyphs",r,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,a,h={},d){this._checkLoaded();const y=[{id:r,url:a}],w=[...Ae(this.stylesheet.sprite),...y];this._validate(u.u.sprite,"sprite",w,null,h)||(this.stylesheet.sprite=w,this._loadSprite(y,!0,d))}removeSprite(r){this._checkLoaded();const a=Ae(this.stylesheet.sprite);if(a.find(h=>h.id===r)){if(this._spritesImagesIds[r])for(const h of this._spritesImagesIds[r])this.imageManager.removeImage(h),this._changedImages[h]=!0;a.splice(a.findIndex(h=>h.id===r),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(r,a={},h){this._checkLoaded(),r&&this._validate(u.u.sprite,"sprite",r,null,a)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,h):(this._unloadSprite(),h&&h(null)))}}var bs=u.Y([{name:"a_pos",type:"Int16",components:2}]);const Jo={prelude:_r(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:_r(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:_r(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_r(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_r("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_r(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:_r(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_r("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_r("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_r("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:_r(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:_r(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:_r(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:_r(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_r(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_r(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_r(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_r(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:_r(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_r(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_r(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:_r(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_r(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_r(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_r("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:_r("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:_r("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:_r("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function _r(_,r){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=r.match(/attribute ([\w]+) ([\w]+)/g),d=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=y?y.concat(d):d,C={};return{fragmentSource:_=_.replace(a,(T,P,R,D,j)=>(C[j]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${j}
varying ${R} ${D} ${j};
#else
uniform ${R} ${D} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${R} ${D} ${j} = u_${j};
#endif
`)),vertexSource:r=r.replace(a,(T,P,R,D,j)=>{const Y=D==="float"?"vec2":"vec4",te=j.match(/color/)?"color":Y;return C[j]?P==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${R} ${Y} a_${j};
varying ${R} ${D} ${j};
#else
uniform ${R} ${D} u_${j};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${R} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${te}(a_${j}, u_${j}_t);
#else
    ${R} ${D} ${j} = u_${j};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${R} ${Y} a_${j};
#else
uniform ${R} ${D} u_${j};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${R} ${D} ${j} = a_${j};
#else
    ${R} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${R} ${D} ${j} = unpack_mix_${te}(a_${j}, u_${j}_t);
#else
    ${R} ${D} ${j} = u_${j};
#endif
`}),staticAttributes:h,staticUniforms:w}}class Ku{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,a,h,d,y,w,C,T,P){this.context=r;let R=this.boundPaintVertexBuffers.length!==d.length;for(let D=0;!R&&D<d.length;D++)this.boundPaintVertexBuffers[D]!==d[D]&&(R=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==h||R||this.boundIndexBuffer!==y||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==P?this.freshBind(a,h,d,y,w,C,T,P):(r.bindVertexArray.set(this.vao),C&&C.bind(),y&&y.dynamicDraw&&y.bind(),T&&T.bind(),P&&P.bind())}freshBind(r,a,h,d,y,w,C,T){const P=r.numAttributes,R=this.context,D=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=d,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=T,a.enableAttributes(D,r);for(const j of h)j.enableAttributes(D,r);w&&w.enableAttributes(D,r),C&&C.enableAttributes(D,r),T&&T.enableAttributes(D,r),a.bind(),a.setVertexAttribPointers(D,r,y);for(const j of h)j.bind(),j.setVertexAttribPointers(D,r,y);w&&(w.bind(),w.setVertexAttribPointers(D,r,y)),d&&d.bind(),C&&(C.bind(),C.setVertexAttribPointers(D,r,y)),T&&(T.bind(),T.setVertexAttribPointers(D,r,y)),R.currentNumAttributes=P}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Yu=(_,r,a,h,d)=>({u_matrix:_,u_texture:0,u_ele_delta:r,u_fog_matrix:a,u_fog_color:h?h.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:h?h.calculateFogBlendOpacity(d):0,u_horizon_color:h?h.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1});function ea(_){const r=[];for(let a=0;a<_.length;a++){if(_[a]===null)continue;const h=_[a].split(" ");r.push(h.pop())}return r}class Ju{constructor(r,a,h,d,y,w){const C=r.gl;this.program=C.createProgram();const T=ea(a.staticAttributes),P=h?h.getBinderAttributes():[],R=T.concat(P),D=Jo.prelude.staticUniforms?ea(Jo.prelude.staticUniforms):[],j=a.staticUniforms?ea(a.staticUniforms):[],Y=h?h.getBinderUniforms():[],te=D.concat(j).concat(Y),ae=[];for(const Pe of te)ae.indexOf(Pe)<0&&ae.push(Pe);const ue=h?h.defines():[];y&&ue.push("#define OVERDRAW_INSPECTOR;"),w&&ue.push("#define TERRAIN3D;");const de=ue.concat(Jo.prelude.fragmentSource,a.fragmentSource).join(`
`),me=ue.concat(Jo.prelude.vertexSource,a.vertexSource).join(`
`),ie=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(ie,de),C.compileShader(ie),!C.getShaderParameter(ie,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(ie)}`);C.attachShader(this.program,ie);const xe=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(xe,me),C.compileShader(xe),!C.getShaderParameter(xe,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(xe)}`);C.attachShader(this.program,xe),this.attributes={};const Se={};this.numAttributes=R.length;for(let Pe=0;Pe<this.numAttributes;Pe++)R[Pe]&&(C.bindAttribLocation(this.program,Pe,R[Pe]),this.attributes[R[Pe]]=Pe);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(xe),C.deleteShader(ie);for(let Pe=0;Pe<ae.length;Pe++){const Ve=ae[Pe];if(Ve&&!Se[Ve]){const Ye=C.getUniformLocation(this.program,Ve);Ye&&(Se[Ve]=Ye)}}this.fixedUniforms=d(r,Se),this.terrainUniforms=((Pe,Ve)=>({u_depth:new u.aH(Pe,Ve.u_depth),u_terrain:new u.aH(Pe,Ve.u_terrain),u_terrain_dim:new u.aI(Pe,Ve.u_terrain_dim),u_terrain_matrix:new u.aJ(Pe,Ve.u_terrain_matrix),u_terrain_unpack:new u.aK(Pe,Ve.u_terrain_unpack),u_terrain_exaggeration:new u.aI(Pe,Ve.u_terrain_exaggeration)}))(r,Se),this.binderUniforms=h?h.getUniforms(r,Se):[]}draw(r,a,h,d,y,w,C,T,P,R,D,j,Y,te,ae,ue,de,me){const ie=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(h),r.setStencilMode(d),r.setColorMode(y),r.setCullFace(w),T){r.activeTexture.set(ie.TEXTURE2),ie.bindTexture(ie.TEXTURE_2D,T.depthTexture),r.activeTexture.set(ie.TEXTURE3),ie.bindTexture(ie.TEXTURE_2D,T.texture);for(const Se in this.terrainUniforms)this.terrainUniforms[Se].set(T[Se])}for(const Se in this.fixedUniforms)this.fixedUniforms[Se].set(C[Se]);ae&&ae.setUniforms(r,this.binderUniforms,Y,{zoom:te});let xe=0;switch(a){case ie.LINES:xe=2;break;case ie.TRIANGLES:xe=3;break;case ie.LINE_STRIP:xe=1}for(const Se of j.get()){const Pe=Se.vaos||(Se.vaos={});(Pe[P]||(Pe[P]=new Ku)).bind(r,this,R,ae?ae.getPaintVertexBuffers():[],D,Se.vertexOffset,ue,de,me),ie.drawElements(a,Se.primitiveLength*xe,ie.UNSIGNED_SHORT,Se.primitiveOffset*xe*2)}}}function tc(_,r,a){const h=1/tr(a,1,r.transform.tileZoom),d=Math.pow(2,a.tileID.overscaledZ),y=a.tileSize*Math.pow(2,r.transform.tileZoom)/d,w=y*(a.tileID.canonical.x+a.tileID.wrap*d),C=y*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[h,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[w>>16,C>>16],u_pixel_coord_lower:[65535&w,65535&C]}}const rl=(_,r,a,h)=>{const d=r.style.light,y=d.properties.get("position"),w=[y.x,y.y,y.z],C=function(){var P=new u.A(9);return u.A!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[5]=0,P[6]=0,P[7]=0),P[0]=1,P[4]=1,P[8]=1,P}();d.properties.get("anchor")==="viewport"&&function(P,R){var D=Math.sin(R),j=Math.cos(R);P[0]=j,P[1]=D,P[2]=0,P[3]=-D,P[4]=j,P[5]=0,P[6]=0,P[7]=0,P[8]=1}(C,-r.transform.angle),function(P,R,D){var j=R[0],Y=R[1],te=R[2];P[0]=j*D[0]+Y*D[3]+te*D[6],P[1]=j*D[1]+Y*D[4]+te*D[7],P[2]=j*D[2]+Y*D[5]+te*D[8]}(w,w,C);const T=d.properties.get("color");return{u_matrix:_,u_lightpos:w,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[T.r,T.g,T.b],u_vertical_gradient:+a,u_opacity:h}},rc=(_,r,a,h,d,y,w)=>u.e(rl(_,r,a,h),tc(y,r,w),{u_height_factor:-Math.pow(2,d.overscaledZ)/w.tileSize/8}),ta=_=>({u_matrix:_}),xp=(_,r,a,h)=>u.e(ta(_),tc(a,r,h)),qg=(_,r)=>({u_matrix:_,u_world:r}),bp=(_,r,a,h,d)=>u.e(xp(_,r,a,h),{u_world:d}),Zg=(_,r,a,h)=>{const d=_.transform;let y,w;if(h.paint.get("circle-pitch-alignment")==="map"){const C=tr(a,1,d.zoom);y=!0,w=[C,C]}else y=!1,w=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(r.posMatrix,a,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:w}},ws=(_,r,a)=>({u_matrix:_,u_inv_matrix:r,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}),nl=(_,r,a=1)=>({u_matrix:_,u_color:r,u_overlay:0,u_overlay_scale:a}),ii=_=>({u_matrix:_}),oi=(_,r,a,h)=>({u_matrix:_,u_extrude_scale:tr(r,1,a),u_intensity:h}),nc=(_,r,a,h)=>{const d=u.H();u.aP(d,0,_.width,_.height,0,0,1);const y=_.context.gl;return{u_matrix:d,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:a,u_color_ramp:h,u_opacity:r.paint.get("heatmap-opacity")}};function ic(_,r){const a=Math.pow(2,r.canonical.z),h=r.canonical.y;return[new u.Z(0,h/a).toLngLat().lat,new u.Z(0,(h+1)/a).toLngLat().lat]}const oc=(_,r,a,h)=>{const d=_.transform;return{u_matrix:Cp(_,r,a,h),u_ratio:1/tr(r,1,d.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},wp=(_,r,a,h,d)=>u.e(oc(_,r,a,d),{u_image:0,u_image_height:h}),ra=(_,r,a,h,d)=>{const y=_.transform,w=Sp(r,y);return{u_matrix:Cp(_,r,a,d),u_texsize:r.imageAtlasTexture.size,u_ratio:1/tr(r,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[w,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Xg=(_,r,a,h,d,y)=>{const w=_.lineAtlas,C=Sp(r,_.transform),T=a.layout.get("line-cap")==="round",P=w.getDash(h.from,T),R=w.getDash(h.to,T),D=P.width*d.fromScale,j=R.width*d.toScale;return u.e(oc(_,r,a,y),{u_patternscale_a:[C/D,-P.height/2],u_patternscale_b:[C/j,-R.height/2],u_sdfgamma:w.width/(256*Math.min(D,j)*_.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:R.y,u_mix:d.t})};function Sp(_,r){return 1/tr(_,1,r.tileZoom)}function Cp(_,r,a,h){return _.translatePosMatrix(h?h.posMatrix:r.tileID.posMatrix,r,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const Kg=(_,r,a,h,d)=>{return{u_matrix:_,u_tl_parent:r,u_scale_parent:a,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(w=d.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(y=d.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:Yg(d.paint.get("raster-hue-rotate"))};var y,w};function Yg(_){_*=Math.PI/180;const r=Math.sin(_),a=Math.cos(_);return[(2*a+1)/3,(-Math.sqrt(3)*r-a+1)/3,(Math.sqrt(3)*r-a+1)/3]}const Tp=(_,r,a,h,d,y,w,C,T,P,R,D,j,Y)=>{const te=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:te.cameraToCenterDistance,u_pitch:te.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:te.width/te.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:T,u_coord_matrix:P,u_is_text:+D,u_pitch_with_map:+h,u_is_along_line:d,u_is_variable_anchor:y,u_texsize:j,u_texture:0,u_translation:R,u_pitched_scale:Y}},il=(_,r,a,h,d,y,w,C,T,P,R,D,j,Y,te)=>{const ae=w.transform;return u.e(Tp(_,r,a,h,d,y,w,C,T,P,R,D,j,te),{u_gamma_scale:h?Math.cos(ae._pitch)*ae.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},Qu=(_,r,a,h,d,y,w,C,T,P,R,D,j,Y)=>u.e(il(_,r,a,h,d,y,w,C,T,P,R,!0,D,!0,Y),{u_texsize_icon:j,u_texture_icon:1}),sc=(_,r,a)=>({u_matrix:_,u_opacity:r,u_color:a}),eh=(_,r,a,h,d,y)=>u.e(function(w,C,T,P){const R=T.imageManager.getPattern(w.from.toString()),D=T.imageManager.getPattern(w.to.toString()),{width:j,height:Y}=T.imageManager.getPixelSize(),te=Math.pow(2,P.tileID.overscaledZ),ae=P.tileSize*Math.pow(2,T.transform.tileZoom)/te,ue=ae*(P.tileID.canonical.x+P.tileID.wrap*te),de=ae*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[j,Y],u_mix:C.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/tr(P,1,T.transform.tileZoom),u_pixel_coord_upper:[ue>>16,de>>16],u_pixel_coord_lower:[65535&ue,65535&de]}}(h,y,a,d),{u_matrix:_,u_opacity:r}),th={fillExtrusion:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_lightpos:new u.aN(_,r.u_lightpos),u_lightintensity:new u.aI(_,r.u_lightintensity),u_lightcolor:new u.aN(_,r.u_lightcolor),u_vertical_gradient:new u.aI(_,r.u_vertical_gradient),u_opacity:new u.aI(_,r.u_opacity)}),fillExtrusionPattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_lightpos:new u.aN(_,r.u_lightpos),u_lightintensity:new u.aI(_,r.u_lightintensity),u_lightcolor:new u.aN(_,r.u_lightcolor),u_vertical_gradient:new u.aI(_,r.u_vertical_gradient),u_height_factor:new u.aI(_,r.u_height_factor),u_image:new u.aH(_,r.u_image),u_texsize:new u.aO(_,r.u_texsize),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade),u_opacity:new u.aI(_,r.u_opacity)}),fill:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix)}),fillPattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_image:new u.aH(_,r.u_image),u_texsize:new u.aO(_,r.u_texsize),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade)}),fillOutline:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_world:new u.aO(_,r.u_world)}),fillOutlinePattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_world:new u.aO(_,r.u_world),u_image:new u.aH(_,r.u_image),u_texsize:new u.aO(_,r.u_texsize),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade)}),circle:(_,r)=>({u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_scale_with_map:new u.aH(_,r.u_scale_with_map),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_extrude_scale:new u.aO(_,r.u_extrude_scale),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_matrix:new u.aJ(_,r.u_matrix)}),collisionBox:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_pixel_extrude_scale:new u.aO(_,r.u_pixel_extrude_scale)}),collisionCircle:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_inv_matrix:new u.aJ(_,r.u_inv_matrix),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_viewport_size:new u.aO(_,r.u_viewport_size)}),debug:(_,r)=>({u_color:new u.aL(_,r.u_color),u_matrix:new u.aJ(_,r.u_matrix),u_overlay:new u.aH(_,r.u_overlay),u_overlay_scale:new u.aI(_,r.u_overlay_scale)}),clippingMask:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix)}),heatmap:(_,r)=>({u_extrude_scale:new u.aI(_,r.u_extrude_scale),u_intensity:new u.aI(_,r.u_intensity),u_matrix:new u.aJ(_,r.u_matrix)}),heatmapTexture:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_world:new u.aO(_,r.u_world),u_image:new u.aH(_,r.u_image),u_color_ramp:new u.aH(_,r.u_color_ramp),u_opacity:new u.aI(_,r.u_opacity)}),hillshade:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_image:new u.aH(_,r.u_image),u_latrange:new u.aO(_,r.u_latrange),u_light:new u.aO(_,r.u_light),u_shadow:new u.aL(_,r.u_shadow),u_highlight:new u.aL(_,r.u_highlight),u_accent:new u.aL(_,r.u_accent)}),hillshadePrepare:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_image:new u.aH(_,r.u_image),u_dimension:new u.aO(_,r.u_dimension),u_zoom:new u.aI(_,r.u_zoom),u_unpack:new u.aK(_,r.u_unpack)}),line:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels)}),lineGradient:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels),u_image:new u.aH(_,r.u_image),u_image_height:new u.aI(_,r.u_image_height)}),linePattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_texsize:new u.aO(_,r.u_texsize),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_image:new u.aH(_,r.u_image),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade)}),lineSDF:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels),u_patternscale_a:new u.aO(_,r.u_patternscale_a),u_patternscale_b:new u.aO(_,r.u_patternscale_b),u_sdfgamma:new u.aI(_,r.u_sdfgamma),u_image:new u.aH(_,r.u_image),u_tex_y_a:new u.aI(_,r.u_tex_y_a),u_tex_y_b:new u.aI(_,r.u_tex_y_b),u_mix:new u.aI(_,r.u_mix)}),raster:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_tl_parent:new u.aO(_,r.u_tl_parent),u_scale_parent:new u.aI(_,r.u_scale_parent),u_buffer_scale:new u.aI(_,r.u_buffer_scale),u_fade_t:new u.aI(_,r.u_fade_t),u_opacity:new u.aI(_,r.u_opacity),u_image0:new u.aH(_,r.u_image0),u_image1:new u.aH(_,r.u_image1),u_brightness_low:new u.aI(_,r.u_brightness_low),u_brightness_high:new u.aI(_,r.u_brightness_high),u_saturation_factor:new u.aI(_,r.u_saturation_factor),u_contrast_factor:new u.aI(_,r.u_contrast_factor),u_spin_weights:new u.aN(_,r.u_spin_weights)}),symbolIcon:(_,r)=>({u_is_size_zoom_constant:new u.aH(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,r.u_is_size_feature_constant),u_size_t:new u.aI(_,r.u_size_t),u_size:new u.aI(_,r.u_size),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_pitch:new u.aI(_,r.u_pitch),u_rotate_symbol:new u.aH(_,r.u_rotate_symbol),u_aspect_ratio:new u.aI(_,r.u_aspect_ratio),u_fade_change:new u.aI(_,r.u_fade_change),u_matrix:new u.aJ(_,r.u_matrix),u_label_plane_matrix:new u.aJ(_,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,r.u_coord_matrix),u_is_text:new u.aH(_,r.u_is_text),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_is_along_line:new u.aH(_,r.u_is_along_line),u_is_variable_anchor:new u.aH(_,r.u_is_variable_anchor),u_texsize:new u.aO(_,r.u_texsize),u_texture:new u.aH(_,r.u_texture),u_translation:new u.aO(_,r.u_translation),u_pitched_scale:new u.aI(_,r.u_pitched_scale)}),symbolSDF:(_,r)=>({u_is_size_zoom_constant:new u.aH(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,r.u_is_size_feature_constant),u_size_t:new u.aI(_,r.u_size_t),u_size:new u.aI(_,r.u_size),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_pitch:new u.aI(_,r.u_pitch),u_rotate_symbol:new u.aH(_,r.u_rotate_symbol),u_aspect_ratio:new u.aI(_,r.u_aspect_ratio),u_fade_change:new u.aI(_,r.u_fade_change),u_matrix:new u.aJ(_,r.u_matrix),u_label_plane_matrix:new u.aJ(_,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,r.u_coord_matrix),u_is_text:new u.aH(_,r.u_is_text),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_is_along_line:new u.aH(_,r.u_is_along_line),u_is_variable_anchor:new u.aH(_,r.u_is_variable_anchor),u_texsize:new u.aO(_,r.u_texsize),u_texture:new u.aH(_,r.u_texture),u_gamma_scale:new u.aI(_,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_is_halo:new u.aH(_,r.u_is_halo),u_translation:new u.aO(_,r.u_translation),u_pitched_scale:new u.aI(_,r.u_pitched_scale)}),symbolTextAndIcon:(_,r)=>({u_is_size_zoom_constant:new u.aH(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,r.u_is_size_feature_constant),u_size_t:new u.aI(_,r.u_size_t),u_size:new u.aI(_,r.u_size),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_pitch:new u.aI(_,r.u_pitch),u_rotate_symbol:new u.aH(_,r.u_rotate_symbol),u_aspect_ratio:new u.aI(_,r.u_aspect_ratio),u_fade_change:new u.aI(_,r.u_fade_change),u_matrix:new u.aJ(_,r.u_matrix),u_label_plane_matrix:new u.aJ(_,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,r.u_coord_matrix),u_is_text:new u.aH(_,r.u_is_text),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_is_along_line:new u.aH(_,r.u_is_along_line),u_is_variable_anchor:new u.aH(_,r.u_is_variable_anchor),u_texsize:new u.aO(_,r.u_texsize),u_texsize_icon:new u.aO(_,r.u_texsize_icon),u_texture:new u.aH(_,r.u_texture),u_texture_icon:new u.aH(_,r.u_texture_icon),u_gamma_scale:new u.aI(_,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_is_halo:new u.aH(_,r.u_is_halo),u_translation:new u.aO(_,r.u_translation),u_pitched_scale:new u.aI(_,r.u_pitched_scale)}),background:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_opacity:new u.aI(_,r.u_opacity),u_color:new u.aL(_,r.u_color)}),backgroundPattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_opacity:new u.aI(_,r.u_opacity),u_image:new u.aH(_,r.u_image),u_pattern_tl_a:new u.aO(_,r.u_pattern_tl_a),u_pattern_br_a:new u.aO(_,r.u_pattern_br_a),u_pattern_tl_b:new u.aO(_,r.u_pattern_tl_b),u_pattern_br_b:new u.aO(_,r.u_pattern_br_b),u_texsize:new u.aO(_,r.u_texsize),u_mix:new u.aI(_,r.u_mix),u_pattern_size_a:new u.aO(_,r.u_pattern_size_a),u_pattern_size_b:new u.aO(_,r.u_pattern_size_b),u_scale_a:new u.aI(_,r.u_scale_a),u_scale_b:new u.aI(_,r.u_scale_b),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(_,r.u_tile_units_to_pixels)}),terrain:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_texture:new u.aH(_,r.u_texture),u_ele_delta:new u.aI(_,r.u_ele_delta),u_fog_matrix:new u.aJ(_,r.u_fog_matrix),u_fog_color:new u.aL(_,r.u_fog_color),u_fog_ground_blend:new u.aI(_,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(_,r.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(_,r.u_horizon_color),u_horizon_fog_blend:new u.aI(_,r.u_horizon_fog_blend)}),terrainDepth:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ele_delta:new u.aI(_,r.u_ele_delta)}),terrainCoords:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_texture:new u.aH(_,r.u_texture),u_terrain_coords_id:new u.aI(_,r.u_terrain_coords_id),u_ele_delta:new u.aI(_,r.u_ele_delta)}),sky:(_,r)=>({u_sky_color:new u.aL(_,r.u_sky_color),u_horizon_color:new u.aL(_,r.u_horizon_color),u_horizon:new u.aI(_,r.u_horizon),u_sky_horizon_blend:new u.aI(_,r.u_sky_horizon_blend)})};class yo{constructor(r,a,h){this.context=r;const d=r.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Jg={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rh{constructor(r,a,h,d){this.length=a.length,this.attributes=h,this.itemSize=a.bytesPerElement,this.dynamicDraw=d,this.context=r;const y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,a){for(let h=0;h<this.attributes.length;h++){const d=a.attributes[this.attributes[h].name];d!==void 0&&r.enableVertexAttribArray(d)}}setVertexAttribPointers(r,a,h){for(let d=0;d<this.attributes.length;d++){const y=this.attributes[d],w=a.attributes[y.name];w!==void 0&&r.vertexAttribPointer(w,y.components,r[Jg[y.type]],!1,this.itemSize,y.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ss=new WeakMap;function Qo(_){var r;if(Ss.has(_))return Ss.get(_);{const a=(r=_.getParameter(_.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Ss.set(_,a),a}}class vr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ac extends vr{getDefault(){return u.aM.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Qg extends vr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class na extends vr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class ey extends vr{getDefault(){return[!0,!0,!0,!0]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class kp extends vr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class ty extends vr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Ip extends vr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const a=this.current;(r.func!==a.func||r.ref!==a.ref||r.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class nh extends vr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Ep extends vr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=r,this.dirty=!1}}class Pp extends vr{getDefault(){return[0,1]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Mp extends vr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=r,this.dirty=!1}}class Ap extends vr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Cs extends vr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.BLEND):a.disable(a.BLEND),this.current=r,this.dirty=!1}}class zp extends vr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class ry extends vr{getDefault(){return u.aM.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Rp extends vr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ol extends vr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=r,this.dirty=!1}}class ny extends vr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class lc extends vr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class iy extends vr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class oy extends vr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Dp extends vr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Lp extends vr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Bp extends vr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ih extends vr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Fp extends vr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class cc extends vr{getDefault(){return null}set(r){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Do extends vr{getDefault(){return null}set(r){var a;if(r===this.current&&!this.dirty)return;const h=this.gl;Qo(h)?h.bindVertexArray(r):(a=h.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class oh extends vr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class sh extends vr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class ah extends vr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class uc extends vr{constructor(r,a){super(r),this.context=r,this.parent=a}getDefault(){return null}}class lh extends uc{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Ts extends uc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ch extends uc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class sy{constructor(r,a,h,d,y){this.context=r,this.width=a,this.height=h;const w=r.gl,C=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new lh(r,C),d)this.depthAttachment=y?new ch(r,C):new Ts(r,C);else if(y)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,a=this.colorAttachment.get();if(a&&r.deleteTexture(a),this.depthAttachment){const h=this.depthAttachment.get();h&&r.deleteRenderbuffer(h)}r.deleteFramebuffer(this.framebuffer)}}class Qr{constructor(r,a,h){this.blendFunction=r,this.blendColor=a,this.mask=h}}Qr.Replace=[1,0],Qr.disabled=new Qr(Qr.Replace,u.aM.transparent,[!1,!1,!1,!1]),Qr.unblended=new Qr(Qr.Replace,u.aM.transparent,[!0,!0,!0,!0]),Qr.alphaBlended=new Qr([1,771],u.aM.transparent,[!0,!0,!0,!0]);class ay{constructor(r){var a,h;if(this.gl=r,this.clearColor=new ac(this),this.clearDepth=new Qg(this),this.clearStencil=new na(this),this.colorMask=new ey(this),this.depthMask=new kp(this),this.stencilMask=new ty(this),this.stencilFunc=new Ip(this),this.stencilOp=new nh(this),this.stencilTest=new Ep(this),this.depthRange=new Pp(this),this.depthTest=new Mp(this),this.depthFunc=new Ap(this),this.blend=new Cs(this),this.blendFunc=new zp(this),this.blendColor=new ry(this),this.blendEquation=new Rp(this),this.cullFace=new ol(this),this.cullFaceSide=new ny(this),this.frontFace=new lc(this),this.program=new iy(this),this.activeTexture=new oy(this),this.viewport=new Dp(this),this.bindFramebuffer=new Lp(this),this.bindRenderbuffer=new Bp(this),this.bindTexture=new ih(this),this.bindVertexBuffer=new Fp(this),this.bindElementBuffer=new cc(this),this.bindVertexArray=new Do(this),this.pixelStoreUnpack=new oh(this),this.pixelStoreUnpackPremultiplyAlpha=new sh(this),this.pixelStoreUnpackFlipY=new ah(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Qo(r)){this.HALF_FLOAT=r.HALF_FLOAT;const d=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=r.RGBA16F)!==null&&a!==void 0?a:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(h=r.RGB16F)!==null&&h!==void 0?h:d==null?void 0:d.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const d=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,a){return new yo(this,r,a)}createVertexBuffer(r,a,h){return new rh(this,r,a,h)}createRenderbuffer(r,a,h){const d=this.gl,y=d.createRenderbuffer();return this.bindRenderbuffer.set(y),d.renderbufferStorage(d.RENDERBUFFER,r,a,h),this.bindRenderbuffer.set(null),y}createFramebuffer(r,a,h,d){return new sy(this,r,a,h,d)}clear({color:r,depth:a,stencil:h}){const d=this.gl;let y=0;r&&(y|=d.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(y|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),h!==void 0&&(y|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(h),this.stencilMask.set(255)),d.clear(y)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aE(r.blendFunction,Qr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Qo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var a;return Qo(this.gl)?this.gl.deleteVertexArray(r):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Xt{constructor(r,a,h){this.func=r,this.mask=a,this.range=h}}Xt.ReadOnly=!1,Xt.ReadWrite=!0,Xt.disabled=new Xt(519,Xt.ReadOnly,[0,1]);const hc=7680;class zr{constructor(r,a,h,d,y,w){this.test=r,this.ref=a,this.mask=h,this.fail=d,this.depthFail=y,this.pass=w}}zr.disabled=new zr({func:519,mask:0},0,0,hc,hc,hc);class kr{constructor(r,a,h){this.enable=r,this.mode=a,this.frontFace=h}}let ks;function sl(_,r,a,h,d){const y=_.context,w=y.gl,C=_.useProgram("collisionBox"),T=[];let P=0,R=0;for(let de=0;de<h.length;de++){const me=h[de],ie=r.getTile(me).getBucket(a);if(!ie)continue;const xe=d?ie.textCollisionBox:ie.iconCollisionBox,Se=ie.collisionCircleArray;if(Se.length>0){const Pe=u.H();u.aQ(Pe,ie.placementInvProjMatrix,_.transform.glCoordMatrix),u.aQ(Pe,Pe,ie.placementViewportMatrix),T.push({circleArray:Se,circleOffset:R,transform:me.posMatrix,invTransform:Pe,coord:me}),P+=Se.length/4,R=P}xe&&C.draw(y,w.LINES,Xt.disabled,zr.disabled,_.colorModeForRenderPass(),kr.disabled,{u_matrix:me.posMatrix,u_pixel_extrude_scale:[1/(D=_.transform).width,1/D.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(me),a.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,null,_.transform.zoom,null,null,xe.collisionVertexBuffer)}var D;if(!d||!T.length)return;const j=_.useProgram("collisionCircle"),Y=new u.aR;Y.resize(4*P),Y._trim();let te=0;for(const de of T)for(let me=0;me<de.circleArray.length/4;me++){const ie=4*me,xe=de.circleArray[ie+0],Se=de.circleArray[ie+1],Pe=de.circleArray[ie+2],Ve=de.circleArray[ie+3];Y.emplace(te++,xe,Se,Pe,Ve,0),Y.emplace(te++,xe,Se,Pe,Ve,1),Y.emplace(te++,xe,Se,Pe,Ve,2),Y.emplace(te++,xe,Se,Pe,Ve,3)}(!ks||ks.length<2*P)&&(ks=function(de){const me=2*de,ie=new u.aT;ie.resize(me),ie._trim();for(let xe=0;xe<me;xe++){const Se=6*xe;ie.uint16[Se+0]=4*xe+0,ie.uint16[Se+1]=4*xe+1,ie.uint16[Se+2]=4*xe+2,ie.uint16[Se+3]=4*xe+2,ie.uint16[Se+4]=4*xe+3,ie.uint16[Se+5]=4*xe+0}return ie}(P));const ae=y.createIndexBuffer(ks,!0),ue=y.createVertexBuffer(Y,u.aS.members,!0);for(const de of T){const me=ws(de.transform,de.invTransform,_.transform);j.draw(y,w.TRIANGLES,Xt.disabled,zr.disabled,_.colorModeForRenderPass(),kr.disabled,me,_.style.map.terrain&&_.style.map.terrain.getTerrainData(de.coord),a.id,ue,ae,u.a0.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,_.transform.zoom,null,null,null)}ue.destroy(),ae.destroy()}kr.disabled=new kr(!1,1029,2305),kr.backCCW=new kr(!0,1029,2305);const al=u.an(new Float32Array(16));function uh(_,r,a,h,d,y){const{horizontalAlign:w,verticalAlign:C}=u.au(_);return new u.P((-(w-.5)*r/d+h[0])*y,(-(C-.5)*a/d+h[1])*y)}function Is(_,r,a,h,d,y){const w=r.tileAnchorPoint.add(new u.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let C=h.mult(y);a||(C=C.rotate(-d));const T=w.add(C);return ne(T.x,T.y,r.labelPlaneMatrix,r.getElevation).point}if(a){const C=Oe(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(_),T=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return _.add(h.rotate(T))}return _.add(h)}function ia(_,r,a,h,d,y,w,C,T,P,R,D,j,Y){const te=_.text.placedSymbolArray,ae=_.text.dynamicLayoutVertexArray,ue=_.icon.dynamicLayoutVertexArray,de={};ae.clear();for(let me=0;me<te.length;me++){const ie=te.get(me),xe=ie.hidden||!ie.crossTileID||_.allowVerticalPlacement&&!ie.placedOrientation?null:h[ie.crossTileID];if(xe){const Se=new u.P(ie.anchorX,ie.anchorY),Pe={getElevation:Y,width:d.width,height:d.height,labelPlaneMatrix:y,pitchWithMap:a,projection:R,tileAnchorPoint:Se,translation:D,unwrappedTileID:j},Ve=a?ne(Se.x,Se.y,w,Y):Oe(Se.x,Se.y,Pe),Ye=O(d.cameraToCenterDistance,Ve.signedDistanceFromCamera);let it=u.ai(_.textSizeData,T,ie)*Ye/u.ap;a&&(it*=_.tilePixelRatio/C);const{width:ct,height:tt,anchor:et,textOffset:mt,textBoxScale:Ot}=xe,rt=uh(et,ct,tt,mt,Ot,it),st=R.getPitchedTextCorrection(d,Se.add(new u.P(D[0],D[1])),j),Lt=Is(Ve.point,Pe,r,rt,d.angle,st),jr=_.allowVerticalPlacement&&ie.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let Wt=0;Wt<ie.numGlyphs;Wt++)u.aj(ae,Lt,jr);P&&ie.associatedIconIndex>=0&&(de[ie.associatedIconIndex]={shiftedAnchor:Lt,angle:jr})}else It(ie.numGlyphs,ae)}if(P){ue.clear();const me=_.icon.placedSymbolArray;for(let ie=0;ie<me.length;ie++){const xe=me.get(ie);if(xe.hidden)It(xe.numGlyphs,ue);else{const Se=de[ie];if(Se)for(let Pe=0;Pe<xe.numGlyphs;Pe++)u.aj(ue,Se.shiftedAnchor,Se.angle);else It(xe.numGlyphs,ue)}}_.icon.dynamicLayoutVertexBuffer.updateData(ue)}_.text.dynamicLayoutVertexBuffer.updateData(ae)}function Bi(_,r,a){return a.iconsInText&&r?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function hh(_,r,a,h,d,y,w,C,T,P,R,D){const j=_.context,Y=j.gl,te=_.transform,ae=xs(),ue=C==="map",de=T==="map",me=C!=="viewport"&&a.layout.get("symbol-placement")!=="point",ie=ue&&!de&&!me,xe=!de&&me,Se=!a.layout.get("symbol-sort-key").isConstant();let Pe=!1;const Ve=_.depthModeForSublayer(0,Xt.ReadOnly),Ye=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=[],ct=ae.getCircleRadiusCorrection(te);for(const tt of h){const et=r.getTile(tt),mt=et.getBucket(a);if(!mt)continue;const Ot=d?mt.text:mt.icon;if(!Ot||!Ot.segments.get().length||!Ot.hasVisibleVertices)continue;const rt=Ot.programConfigurations.get(a.id),st=d||mt.sdfIcons,Lt=d?mt.textSizeData:mt.iconSizeData,jr=de||te.pitch!==0,Wt=_.useProgram(Bi(st,d,mt),rt),rr=u.ag(Lt,te.zoom),Vr=_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt);let Fn,eo,Ur,si,Xn=[0,0],On=null;if(d)eo=et.glyphAtlasTexture,Ur=Y.LINEAR,Fn=et.glyphAtlasTexture.size,mt.iconsInText&&(Xn=et.imageAtlasTexture.size,On=et.imageAtlasTexture,si=jr||_.options.rotating||_.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?Y.LINEAR:Y.NEAREST);else{const or=a.layout.get("icon-size").constantOr(0)!==1||mt.iconsNeedLinear;eo=et.imageAtlasTexture,Ur=st||_.options.rotating||_.options.zooming||or||jr?Y.LINEAR:Y.NEAREST,Fn=et.imageAtlasTexture.size}const Kn=tr(et,1,_.transform.zoom),xo=xe?tt.posMatrix:al,va=kt(xo,de,ue,_.transform,Kn),Mc=ur(xo,de,ue,_.transform,Kn),xa=ur(tt.posMatrix,de,ue,_.transform,Kn),$i=ae.translatePosition(_.transform,et,y,w),Ac=Ye&&mt.hasTextData(),Bh=a.layout.get("icon-text-fit")!=="none"&&Ac&&mt.hasIconData();if(me){const or=_.style.map.terrain?(ba,wa)=>_.style.map.terrain.getElevation(tt,ba,wa):null,zs=a.layout.get("text-rotation-alignment")==="map";K(mt,tt.posMatrix,_,d,va,xa,de,P,zs,ae,tt.toUnwrapped(),te.width,te.height,$i,or)}const Ni=tt.posMatrix,ji=d&&Ye||Bh,es=me||ji?al:va,to=Mc,An=st&&a.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let $n;$n=st?mt.iconsInText?Qu(Lt.kind,rr,ie,de,me,ji,_,Ni,es,to,$i,Fn,Xn,ct):il(Lt.kind,rr,ie,de,me,ji,_,Ni,es,to,$i,d,Fn,!0,ct):Tp(Lt.kind,rr,ie,de,me,ji,_,Ni,es,to,$i,d,Fn,ct);const Ci={program:Wt,buffers:Ot,uniformValues:$n,atlasTexture:eo,atlasTextureIcon:On,atlasInterpolation:Ur,atlasInterpolationIcon:si,isSDF:st,hasHalo:An};if(Se&&mt.canOverlap){Pe=!0;const or=Ot.segments.get();for(const zs of or)it.push({segments:new u.a0([zs]),sortKey:zs.sortKey,state:Ci,terrainData:Vr})}else it.push({segments:Ot.segments,sortKey:0,state:Ci,terrainData:Vr})}Pe&&it.sort((tt,et)=>tt.sortKey-et.sortKey);for(const tt of it){const et=tt.state;if(j.activeTexture.set(Y.TEXTURE0),et.atlasTexture.bind(et.atlasInterpolation,Y.CLAMP_TO_EDGE),et.atlasTextureIcon&&(j.activeTexture.set(Y.TEXTURE1),et.atlasTextureIcon&&et.atlasTextureIcon.bind(et.atlasInterpolationIcon,Y.CLAMP_TO_EDGE)),et.isSDF){const mt=et.uniformValues;et.hasHalo&&(mt.u_is_halo=1,dh(et.buffers,tt.segments,a,_,et.program,Ve,R,D,mt,tt.terrainData)),mt.u_is_halo=0}dh(et.buffers,tt.segments,a,_,et.program,Ve,R,D,et.uniformValues,tt.terrainData)}}function dh(_,r,a,h,d,y,w,C,T,P){const R=h.context;d.draw(R,R.gl.TRIANGLES,y,w,C,kr.disabled,T,P,a.id,_.layoutVertexBuffer,_.indexBuffer,r,a.paint,h.transform.zoom,_.programConfigurations.get(a.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function ph(_,r,a,h){const d=_.context,y=d.gl,w=zr.disabled,C=new Qr([y.ONE,y.ONE],u.aM.transparent,[!0,!0,!0,!0]),T=r.getBucket(a);if(!T)return;const P=h.key;let R=a.heatmapFbos.get(P);R||(R=ll(d,r.tileSize,r.tileSize),a.heatmapFbos.set(P,R)),d.bindFramebuffer.set(R.framebuffer),d.viewport.set([0,0,r.tileSize,r.tileSize]),d.clear({color:u.aM.transparent});const D=T.programConfigurations.get(a.id),j=_.useProgram("heatmap",D),Y=_.style.map.terrain.getTerrainData(h);j.draw(d,y.TRIANGLES,Xt.disabled,w,C,kr.disabled,oi(h.posMatrix,r,_.transform.zoom,a.paint.get("heatmap-intensity")),Y,a.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,a.paint,_.transform.zoom,D)}function Es(_,r,a){const h=_.context,d=h.gl;h.setColorMode(_.colorModeForRenderPass());const y=cl(h,r),w=a.key,C=r.heatmapFbos.get(w);C&&(h.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,C.colorAttachment.get()),h.activeTexture.set(d.TEXTURE1),y.bind(d.LINEAR,d.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(h,d.TRIANGLES,Xt.disabled,zr.disabled,_.colorModeForRenderPass(),kr.disabled,nc(_,r,0,1),null,r.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,r.paint,_.transform.zoom),C.destroy(),r.heatmapFbos.delete(w))}function ll(_,r,a){var h,d;const y=_.gl,w=y.createTexture();y.bindTexture(y.TEXTURE_2D,w),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const C=(h=_.HALF_FLOAT)!==null&&h!==void 0?h:y.UNSIGNED_BYTE,T=(d=_.RGBA16F)!==null&&d!==void 0?d:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,T,r,a,0,y.RGBA,C,null);const P=_.createFramebuffer(r,a,!1,!1);return P.colorAttachment.set(w),P}function cl(_,r){return r.colorRampTexture||(r.colorRampTexture=new De(_,r.colorRamp,_.gl.RGBA)),r.colorRampTexture}function oa(_,r,a,h,d){if(!a||!h||!h.imageAtlas)return;const y=h.imageAtlas.patternPositions;let w=y[a.to.toString()],C=y[a.from.toString()];if(!w&&C&&(w=C),!C&&w&&(C=w),!w||!C){const T=d.getPaintProperty(r);w=y[T],C=y[T]}w&&C&&_.setConstantPatternPositions(w,C)}function ul(_,r,a,h,d,y,w){const C=_.context.gl,T="fill-pattern",P=a.paint.get(T),R=P&&P.constantOr(1),D=a.getCrossfadeParameters();let j,Y,te,ae,ue;w?(Y=R&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=C.LINES):(Y=R?"fillPattern":"fill",j=C.TRIANGLES);const de=P.constantOr(null);for(const me of h){const ie=r.getTile(me);if(R&&!ie.patternsLoaded())continue;const xe=ie.getBucket(a);if(!xe)continue;const Se=xe.programConfigurations.get(a.id),Pe=_.useProgram(Y,Se),Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(me);R&&(_.context.activeTexture.set(C.TEXTURE0),ie.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Se.updatePaintBuffers(D)),oa(Se,T,de,ie,a);const Ye=Ve?me:null,it=_.translatePosMatrix(Ye?Ye.posMatrix:me.posMatrix,ie,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(w){ae=xe.indexBuffer2,ue=xe.segments2;const ct=[C.drawingBufferWidth,C.drawingBufferHeight];te=Y==="fillOutlinePattern"&&R?bp(it,_,D,ie,ct):qg(it,ct)}else ae=xe.indexBuffer,ue=xe.segments,te=R?xp(it,_,D,ie):ta(it);Pe.draw(_.context,j,d,_.stencilModeForClipping(me),y,kr.disabled,te,Ve,a.id,xe.layoutVertexBuffer,ae,ue,a.paint,_.transform.zoom,Se)}}function dc(_,r,a,h,d,y,w){const C=_.context,T=C.gl,P="fill-extrusion-pattern",R=a.paint.get(P),D=R.constantOr(1),j=a.getCrossfadeParameters(),Y=a.paint.get("fill-extrusion-opacity"),te=R.constantOr(null);for(const ae of h){const ue=r.getTile(ae),de=ue.getBucket(a);if(!de)continue;const me=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae),ie=de.programConfigurations.get(a.id),xe=_.useProgram(D?"fillExtrusionPattern":"fillExtrusion",ie);D&&(_.context.activeTexture.set(T.TEXTURE0),ue.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),ie.updatePaintBuffers(j)),oa(ie,P,te,ue,a);const Se=_.translatePosMatrix(ae.posMatrix,ue,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Pe=a.paint.get("fill-extrusion-vertical-gradient"),Ve=D?rc(Se,_,Pe,Y,ae,j,ue):rl(Se,_,Pe,Y);xe.draw(C,C.gl.TRIANGLES,d,y,w,kr.backCCW,Ve,me,a.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,a.paint,_.transform.zoom,ie,_.style.map.terrain&&de.centroidVertexBuffer)}}function sa(_,r,a,h,d,y,w){const C=_.context,T=C.gl,P=a.fbo;if(!P)return;const R=_.useProgram("hillshade"),D=_.style.map.terrain&&_.style.map.terrain.getTerrainData(r);C.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,P.colorAttachment.get()),R.draw(C,T.TRIANGLES,d,y,w,kr.disabled,((j,Y,te,ae)=>{const ue=te.paint.get("hillshade-shadow-color"),de=te.paint.get("hillshade-highlight-color"),me=te.paint.get("hillshade-accent-color");let ie=te.paint.get("hillshade-illumination-direction")*(Math.PI/180);te.paint.get("hillshade-illumination-anchor")==="viewport"&&(ie-=j.transform.angle);const xe=!j.options.moving;return{u_matrix:ae?ae.posMatrix:j.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),xe),u_image:0,u_latrange:ic(0,Y.tileID),u_light:[te.paint.get("hillshade-exaggeration"),ie],u_shadow:ue,u_highlight:de,u_accent:me}})(_,a,h,D?r:null),D,h.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function aa(_,r,a,h,d,y){const w=_.context,C=w.gl,T=r.dem;if(T&&T.data){const P=T.dim,R=T.stride,D=T.getPixels();if(w.activeTexture.set(C.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||_.getTileTexture(R),r.demTexture){const Y=r.demTexture;Y.update(D,{premultiply:!1}),Y.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else r.demTexture=new De(w,D,C.RGBA,{premultiply:!1}),r.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);w.activeTexture.set(C.TEXTURE0);let j=r.fbo;if(!j){const Y=new De(w,{width:P,height:P,data:null},C.RGBA);Y.bind(C.LINEAR,C.CLAMP_TO_EDGE),j=r.fbo=w.createFramebuffer(P,P,!0,!1),j.colorAttachment.set(Y.texture)}w.bindFramebuffer.set(j.framebuffer),w.viewport.set([0,0,P,P]),_.useProgram("hillshadePrepare").draw(w,C.TRIANGLES,h,d,y,kr.disabled,((Y,te)=>{const ae=te.stride,ue=u.H();return u.aP(ue,0,u.X,-u.X,0,0,1),u.J(ue,ue,[0,-u.X,0]),{u_matrix:ue,u_image:1,u_dimension:[ae,ae],u_zoom:Y.overscaledZ,u_unpack:te.getUnpackVector()}})(r.tileID,T),null,a.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Op(_,r,a,h,d,y){const w=h.paint.get("raster-fade-duration");if(!y&&w>0){const C=L.now(),T=(C-_.timeAdded)/w,P=r?(C-r.timeAdded)/w:-1,R=a.getSource(),D=d.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),j=!r||Math.abs(r.tileID.overscaledZ-D)>Math.abs(_.tileID.overscaledZ-D),Y=j&&_.refreshedUponExpiration?1:u.ac(j?T:1-P,0,1);return _.refreshedUponExpiration&&T>=1&&(_.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}const fh=new u.aM(1,0,0,1),mr=new u.aM(0,1,0,1),pc=new u.aM(0,0,1,1),ly=new u.aM(1,0,1,1),$p=new u.aM(0,1,1,1);function la(_,r,a,h){fc(_,0,r+a/2,_.transform.width,a,h)}function Np(_,r,a,h){fc(_,r-a/2,0,a,_.transform.height,h)}function fc(_,r,a,h,d,y){const w=_.context,C=w.gl;C.enable(C.SCISSOR_TEST),C.scissor(r*_.pixelRatio,a*_.pixelRatio,h*_.pixelRatio,d*_.pixelRatio),w.clear({color:y}),C.disable(C.SCISSOR_TEST)}function jp(_,r,a){const h=_.context,d=h.gl,y=a.posMatrix,w=_.useProgram("debug"),C=Xt.disabled,T=zr.disabled,P=_.colorModeForRenderPass(),R="$debug",D=_.style.map.terrain&&_.style.map.terrain.getTerrainData(a);h.activeTexture.set(d.TEXTURE0);const j=r.getTileByID(a.key).latestRawTileData,Y=Math.floor((j&&j.byteLength||0)/1024),te=r.getTile(a).tileSize,ae=512/Math.min(te,512)*(a.overscaledZ/_.transform.zoom)*.5;let ue=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(ue+=` => ${a.overscaledZ}`),function(de,me){de.initDebugOverlayCanvas();const ie=de.debugOverlayCanvas,xe=de.context.gl,Se=de.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,ie.width,ie.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(me,5,5),Se.strokeText(me,5,5),de.debugOverlayTexture.update(ie),de.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(_,`${ue} ${Y}kB`),w.draw(h,d.TRIANGLES,C,T,Qr.alphaBlended,kr.disabled,nl(y,u.aM.transparent,ae),null,R,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),w.draw(h,d.LINE_STRIP,C,T,P,kr.disabled,nl(y,u.aM.red),D,R,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Vp(_,r,a){const h=_.context,d=h.gl,y=_.colorModeForRenderPass(),w=new Xt(d.LEQUAL,Xt.ReadWrite,_.depthRangeFor3D),C=_.useProgram("terrain"),T=r.getTerrainMesh();h.bindFramebuffer.set(null),h.viewport.set([0,0,_.width,_.height]);for(const P of a){const R=_.renderToTexture.getTexture(P),D=r.getTerrainData(P.tileID);h.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,R.texture);const j=_.transform.calculatePosMatrix(P.tileID.toUnwrapped()),Y=r.getMeshFrameDelta(_.transform.zoom),te=_.transform.calculateFogMatrix(P.tileID.toUnwrapped()),ae=Yu(j,Y,te,_.style.sky,_.transform.pitch);C.draw(h,d.TRIANGLES,w,zr.disabled,y,kr.backCCW,ae,D,"terrain",T.vertexBuffer,T.indexBuffer,T.segments)}}class mc{constructor(r,a,h){this.vertexBuffer=r,this.indexBuffer=a,this.segments=h}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class gc{constructor(r,a){this.context=new ay(r),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Pt.maxUnderzooming+Pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xu}resize(r,a,h){if(this.width=Math.floor(r*h),this.height=Math.floor(a*h),this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const d of this.style._order)this.style._layers[d].resize()}setup(){const r=this.context,a=new u.aX;a.emplaceBack(0,0),a.emplaceBack(u.X,0),a.emplaceBack(0,u.X),a.emplaceBack(u.X,u.X),this.tileExtentBuffer=r.createVertexBuffer(a,bs.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const h=new u.aX;h.emplaceBack(0,0),h.emplaceBack(u.X,0),h.emplaceBack(0,u.X),h.emplaceBack(u.X,u.X),this.debugBuffer=r.createVertexBuffer(h,bs.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const d=new u.$;d.emplaceBack(0,0,0,0),d.emplaceBack(u.X,0,u.X,0),d.emplaceBack(0,u.X,0,u.X),d.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=r.createVertexBuffer(d,_t.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const y=new u.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(y,bs.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const w=new u.aZ;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(w);const C=new u.aY;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(C);const T=this.context.gl;this.stencilClearMode=new zr({func:T.ALWAYS,mask:0},0,255,T.ZERO,T.ZERO,T.ZERO)}clearStencil(){const r=this.context,a=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=u.H();u.aP(h,0,this.width,this.height,0,0,1),u.K(h,h,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,a.TRIANGLES,Xt.disabled,this.stencilClearMode,Qr.disabled,kr.disabled,ii(h),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,a){if(this.currentStencilSource===r.source||!r.isTileClipped()||!a||!a.length)return;this.currentStencilSource=r.source;const h=this.context,d=h.gl;this.nextStencilID+a.length>256&&this.clearStencil(),h.setColorMode(Qr.disabled),h.setDepthMode(Xt.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of a){const C=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,T=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);y.draw(h,d.TRIANGLES,Xt.disabled,new zr({func:d.ALWAYS,mask:0},C,255,d.KEEP,d.KEEP,d.REPLACE),Qr.disabled,kr.disabled,ii(w.posMatrix),T,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,a=this.context.gl;return new zr({func:a.NOTEQUAL,mask:255},r,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(r){const a=this.context.gl;return new zr({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(r){const a=this.context.gl,h=r.sort((w,C)=>C.overscaledZ-w.overscaledZ),d=h[h.length-1].overscaledZ,y=h[0].overscaledZ-d+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const w={};for(let C=0;C<y;C++)w[C+d]=new zr({func:a.GEQUAL,mask:255},C+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=y,[w,h]}return[{[d]:zr.disabled},h]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Qr([r.CONSTANT_COLOR,r.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Qr.unblended:Qr.alphaBlended}depthModeForSublayer(r,a,h){if(!this.opaquePassEnabledForLayer())return Xt.disabled;const d=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Xt(h||this.context.gl.LEQUAL,a,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,a){this.style=r,this.options=a,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(L.now()),this.imageManager.beginFrame();const h=this.style._order,d=this.style.sourceCaches,y={},w={},C={};for(const T in d){const P=d[T];P.used&&P.prepare(this.context),y[T]=P.getVisibleCoordinates(),w[T]=y[T].slice().reverse(),C[T]=P.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let T=0;T<h.length;T++)if(this.style._layers[h[T]].is3D()){this.opaquePassCutoff=T;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const T of h){const P=this.style._layers[T];if(!P.hasOffscreenPass()||P.isHidden(this.transform.zoom))continue;const R=w[P.source];(P.type==="custom"||R.length)&&this.renderLayer(this,d[P.source],P,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(T,P){const R=T.context,D=R.gl,j=((de,me,ie)=>({u_sky_color:de.properties.get("sky-color"),u_horizon_color:de.properties.get("horizon-color"),u_horizon:(me.height/2+me.getHorizon())*ie,u_sky_horizon_blend:de.properties.get("sky-horizon-blend")*me.height/2*ie}))(P,T.style.map.transform,T.pixelRatio),Y=new Xt(D.LEQUAL,Xt.ReadWrite,[0,1]),te=zr.disabled,ae=T.colorModeForRenderPass(),ue=T.useProgram("sky");if(!P.mesh){const de=new u.aX;de.emplaceBack(-1,-1),de.emplaceBack(1,-1),de.emplaceBack(1,1),de.emplaceBack(-1,1);const me=new u.aY;me.emplaceBack(0,1,2),me.emplaceBack(0,2,3),P.mesh=new mc(R.createVertexBuffer(de,bs.members),R.createIndexBuffer(me),u.a0.simpleSegment(0,0,de.length,me.length))}ue.draw(R,D.TRIANGLES,Y,te,ae,kr.disabled,j,void 0,"sky",P.mesh.vertexBuffer,P.mesh.indexBuffer,P.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const T=this.style._layers[h[this.currentLayer]],P=d[T.source],R=y[T.source];this._renderTileClippingMasks(T,R),this.renderLayer(this,P,T,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const T=this.style._layers[h[this.currentLayer]],P=d[T.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(T))continue;const R=(T.type==="symbol"?C:w)[T.source];this._renderTileClippingMasks(T,y[T.source]),this.renderLayer(this,P,T,R)}if(this.options.showTileBoundaries){const T=function(P,R){let D=null;const j=Object.values(P._layers).flatMap(ue=>ue.source&&!ue.isHidden(R)?[P.sourceCaches[ue.source]]:[]),Y=j.filter(ue=>ue.getSource().type==="vector"),te=j.filter(ue=>ue.getSource().type!=="vector"),ae=ue=>{(!D||D.getSource().maxzoom<ue.getSource().maxzoom)&&(D=ue)};return Y.forEach(ue=>ae(ue)),D||te.forEach(ue=>ae(ue)),D}(this.style,this.transform.zoom);T&&function(P,R,D){for(let j=0;j<D.length;j++)jp(P,R,D[j])}(this,T,T.getVisibleCoordinates())}this.options.showPadding&&function(T){const P=T.transform.padding;la(T,T.transform.height-(P.top||0),3,fh),la(T,P.bottom||0,3,mr),Np(T,P.left||0,3,pc),Np(T,T.transform.width-(P.right||0),3,ly);const R=T.transform.centerPoint;(function(D,j,Y,te){fc(D,j-1,Y-10,2,20,te),fc(D,j-10,Y-1,20,2,te)})(T,R.x,T.transform.height-R.y,$p)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,h=this.transform.modelViewProjectionMatrix;let d=this.terrainFacilitator.dirty;d||(d=r?!u.a_(a,h):!u.a$(a,h)),d||(d=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),d&&(u.b0(a,h),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,w){const C=y.context,T=C.gl,P=Qr.unblended,R=new Xt(T.LEQUAL,Xt.ReadWrite,[0,1]),D=w.getTerrainMesh(),j=w.sourceCache.getRenderableTiles(),Y=y.useProgram("terrainDepth");C.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1});for(const te of j){const ae=w.getTerrainData(te.tileID),ue={u_matrix:y.transform.calculatePosMatrix(te.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(y.transform.zoom)};Y.draw(C,T.TRIANGLES,R,zr.disabled,P,kr.backCCW,ue,ae,"terrain",D.vertexBuffer,D.indexBuffer,D.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,w){const C=y.context,T=C.gl,P=Qr.unblended,R=new Xt(T.LEQUAL,Xt.ReadWrite,[0,1]),D=w.getTerrainMesh(),j=w.getCoordsTexture(),Y=w.sourceCache.getRenderableTiles(),te=y.useProgram("terrainCoords");C.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1}),w.coordsIndex=[];for(const ae of Y){const ue=w.getTerrainData(ae.tileID);C.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,j.texture);const de={u_matrix:y.transform.calculatePosMatrix(ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(y.transform.zoom)};te.draw(C,T.TRIANGLES,R,zr.disabled,P,kr.backCCW,de,ue,"terrain",D.vertexBuffer,D.indexBuffer,D.segments),w.coordsIndex.push(ae.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(r,a,h,d){if(!h.isHidden(this.transform.zoom)&&(h.type==="background"||h.type==="custom"||(d||[]).length))switch(this.id=h.id,h.type){case"symbol":(function(y,w,C,T,P){if(y.renderPass!=="translucent")return;const R=zr.disabled,D=y.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(j,Y,te,ae,ue,de,me,ie,xe){const Se=Y.transform,Pe=xs(),Ve=ue==="map",Ye=de==="map";for(const it of j){const ct=ae.getTile(it),tt=ct.getBucket(te);if(!tt||!tt.text||!tt.text.segments.get().length)continue;const et=u.ag(tt.textSizeData,Se.zoom),mt=tr(ct,1,Y.transform.zoom),Ot=kt(it.posMatrix,Ye,Ve,Y.transform,mt),rt=te.layout.get("icon-text-fit")!=="none"&&tt.hasIconData();if(et){const st=Math.pow(2,Se.zoom-ct.tileID.overscaledZ),Lt=Y.style.map.terrain?(Wt,rr)=>Y.style.map.terrain.getElevation(it,Wt,rr):null,jr=Pe.translatePosition(Se,ct,me,ie);ia(tt,Ve,Ye,xe,Se,Ot,it.posMatrix,st,et,rt,Pe,jr,it.toUnwrapped(),Lt)}}}(T,y,C,w,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),P),C.paint.get("icon-opacity").constantOr(1)!==0&&hh(y,w,C,T,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),R,D),C.paint.get("text-opacity").constantOr(1)!==0&&hh(y,w,C,T,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),R,D),w.map.showCollisionBoxes&&(sl(y,w,C,T,!0),sl(y,w,C,T,!1))})(r,a,h,d,this.style.placement.variableOffsets);break;case"circle":(function(y,w,C,T){if(y.renderPass!=="translucent")return;const P=C.paint.get("circle-opacity"),R=C.paint.get("circle-stroke-width"),D=C.paint.get("circle-stroke-opacity"),j=!C.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(R.constantOr(1)===0||D.constantOr(1)===0))return;const Y=y.context,te=Y.gl,ae=y.depthModeForSublayer(0,Xt.ReadOnly),ue=zr.disabled,de=y.colorModeForRenderPass(),me=[];for(let ie=0;ie<T.length;ie++){const xe=T[ie],Se=w.getTile(xe),Pe=Se.getBucket(C);if(!Pe)continue;const Ve=Pe.programConfigurations.get(C.id),Ye=y.useProgram("circle",Ve),it=Pe.layoutVertexBuffer,ct=Pe.indexBuffer,tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(xe),et={programConfiguration:Ve,program:Ye,layoutVertexBuffer:it,indexBuffer:ct,uniformValues:Zg(y,xe,Se,C),terrainData:tt};if(j){const mt=Pe.segments.get();for(const Ot of mt)me.push({segments:new u.a0([Ot]),sortKey:Ot.sortKey,state:et})}else me.push({segments:Pe.segments,sortKey:0,state:et})}j&&me.sort((ie,xe)=>ie.sortKey-xe.sortKey);for(const ie of me){const{programConfiguration:xe,program:Se,layoutVertexBuffer:Pe,indexBuffer:Ve,uniformValues:Ye,terrainData:it}=ie.state;Se.draw(Y,te.TRIANGLES,ae,ue,de,kr.disabled,Ye,it,C.id,Pe,Ve,ie.segments,C.paint,y.transform.zoom,xe)}})(r,a,h,d);break;case"heatmap":(function(y,w,C,T){if(C.paint.get("heatmap-opacity")===0)return;const P=y.context;if(y.style.map.terrain){for(const R of T){const D=w.getTile(R);w.hasRenderableParent(R)||(y.renderPass==="offscreen"?ph(y,D,C,R):y.renderPass==="translucent"&&Es(y,C,R))}P.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(R,D,j,Y){const te=R.context,ae=te.gl,ue=zr.disabled,de=new Qr([ae.ONE,ae.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(me,ie,xe){const Se=me.gl;me.activeTexture.set(Se.TEXTURE1),me.viewport.set([0,0,ie.width/4,ie.height/4]);let Pe=xe.heatmapFbos.get(u.aU);Pe?(Se.bindTexture(Se.TEXTURE_2D,Pe.colorAttachment.get()),me.bindFramebuffer.set(Pe.framebuffer)):(Pe=ll(me,ie.width/4,ie.height/4),xe.heatmapFbos.set(u.aU,Pe))})(te,R,j),te.clear({color:u.aM.transparent});for(let me=0;me<Y.length;me++){const ie=Y[me];if(D.hasRenderableParent(ie))continue;const xe=D.getTile(ie),Se=xe.getBucket(j);if(!Se)continue;const Pe=Se.programConfigurations.get(j.id),Ve=R.useProgram("heatmap",Pe),{zoom:Ye}=R.transform;Ve.draw(te,ae.TRIANGLES,Xt.disabled,ue,de,kr.disabled,oi(ie.posMatrix,xe,Ye,j.paint.get("heatmap-intensity")),null,j.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,j.paint,R.transform.zoom,Pe)}te.viewport.set([0,0,R.width,R.height])}(y,w,C,T):y.renderPass==="translucent"&&function(R,D){const j=R.context,Y=j.gl;j.setColorMode(R.colorModeForRenderPass());const te=D.heatmapFbos.get(u.aU);te&&(j.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,te.colorAttachment.get()),j.activeTexture.set(Y.TEXTURE1),cl(j,D).bind(Y.LINEAR,Y.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(j,Y.TRIANGLES,Xt.disabled,zr.disabled,R.colorModeForRenderPass(),kr.disabled,nc(R,D,0,1),null,D.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,D.paint,R.transform.zoom))}(y,C)})(r,a,h,d);break;case"line":(function(y,w,C,T){if(y.renderPass!=="translucent")return;const P=C.paint.get("line-opacity"),R=C.paint.get("line-width");if(P.constantOr(1)===0||R.constantOr(1)===0)return;const D=y.depthModeForSublayer(0,Xt.ReadOnly),j=y.colorModeForRenderPass(),Y=C.paint.get("line-dasharray"),te=C.paint.get("line-pattern"),ae=te.constantOr(1),ue=C.paint.get("line-gradient"),de=C.getCrossfadeParameters(),me=ae?"linePattern":Y?"lineSDF":ue?"lineGradient":"line",ie=y.context,xe=ie.gl;let Se=!0;for(const Pe of T){const Ve=w.getTile(Pe);if(ae&&!Ve.patternsLoaded())continue;const Ye=Ve.getBucket(C);if(!Ye)continue;const it=Ye.programConfigurations.get(C.id),ct=y.context.program.get(),tt=y.useProgram(me,it),et=Se||tt.program!==ct,mt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Pe),Ot=te.constantOr(null);if(Ot&&Ve.imageAtlas){const Lt=Ve.imageAtlas,jr=Lt.patternPositions[Ot.to.toString()],Wt=Lt.patternPositions[Ot.from.toString()];jr&&Wt&&it.setConstantPatternPositions(jr,Wt)}const rt=mt?Pe:null,st=ae?ra(y,Ve,C,de,rt):Y?Xg(y,Ve,C,Y,de,rt):ue?wp(y,Ve,C,Ye.lineClipsArray.length,rt):oc(y,Ve,C,rt);if(ae)ie.activeTexture.set(xe.TEXTURE0),Ve.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),it.updatePaintBuffers(de);else if(Y&&(et||y.lineAtlas.dirty))ie.activeTexture.set(xe.TEXTURE0),y.lineAtlas.bind(ie);else if(ue){const Lt=Ye.gradients[C.id];let jr=Lt.texture;if(C.gradientVersion!==Lt.version){let Wt=256;if(C.stepInterpolant){const rr=w.getSource().maxzoom,Vr=Pe.canonical.z===rr?Math.ceil(1<<y.transform.maxZoom-Pe.canonical.z):1;Wt=u.ac(u.aV(Ye.maxLineLength/u.X*1024*Vr),256,ie.maxTextureSize)}Lt.gradient=u.aW({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:Wt,image:Lt.gradient||void 0,clips:Ye.lineClipsArray}),Lt.texture?Lt.texture.update(Lt.gradient):Lt.texture=new De(ie,Lt.gradient,xe.RGBA),Lt.version=C.gradientVersion,jr=Lt.texture}ie.activeTexture.set(xe.TEXTURE0),jr.bind(C.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}tt.draw(ie,xe.TRIANGLES,D,y.stencilModeForClipping(Pe),j,kr.disabled,st,mt,C.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,C.paint,y.transform.zoom,it,Ye.layoutVertexBuffer2),Se=!1}})(r,a,h,d);break;case"fill":(function(y,w,C,T){const P=C.paint.get("fill-color"),R=C.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const D=y.colorModeForRenderPass(),j=C.paint.get("fill-pattern"),Y=y.opaquePassEnabledForLayer()&&!j.constantOr(1)&&P.constantOr(u.aM.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===Y){const te=y.depthModeForSublayer(1,y.renderPass==="opaque"?Xt.ReadWrite:Xt.ReadOnly);ul(y,w,C,T,te,D,!1)}if(y.renderPass==="translucent"&&C.paint.get("fill-antialias")){const te=y.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,Xt.ReadOnly);ul(y,w,C,T,te,D,!0)}})(r,a,h,d);break;case"fill-extrusion":(function(y,w,C,T){const P=C.paint.get("fill-extrusion-opacity");if(P!==0&&y.renderPass==="translucent"){const R=new Xt(y.context.gl.LEQUAL,Xt.ReadWrite,y.depthRangeFor3D);if(P!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))dc(y,w,C,T,R,zr.disabled,Qr.disabled),dc(y,w,C,T,R,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const D=y.colorModeForRenderPass();dc(y,w,C,T,R,zr.disabled,D)}}})(r,a,h,d);break;case"hillshade":(function(y,w,C,T){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const P=y.context,R=y.depthModeForSublayer(0,Xt.ReadOnly),D=y.colorModeForRenderPass(),[j,Y]=y.renderPass==="translucent"?y.stencilConfigForOverlap(T):[{},T];for(const te of Y){const ae=w.getTile(te);ae.needsHillshadePrepare!==void 0&&ae.needsHillshadePrepare&&y.renderPass==="offscreen"?aa(y,ae,C,R,zr.disabled,D):y.renderPass==="translucent"&&sa(y,te,ae,C,R,j[te.overscaledZ],D)}P.viewport.set([0,0,y.width,y.height])})(r,a,h,d);break;case"raster":(function(y,w,C,T){if(y.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!T.length)return;const P=y.context,R=P.gl,D=w.getSource(),j=y.useProgram("raster"),Y=y.colorModeForRenderPass(),[te,ae]=D instanceof _n?[{},T]:y.stencilConfigForOverlap(T),ue=ae[ae.length-1].overscaledZ,de=!y.options.moving;for(const me of ae){const ie=y.depthModeForSublayer(me.overscaledZ-ue,C.paint.get("raster-opacity")===1?Xt.ReadWrite:Xt.ReadOnly,R.LESS),xe=w.getTile(me);xe.registerFadeDuration(C.paint.get("raster-fade-duration"));const Se=w.findLoadedParent(me,0),Pe=w.findLoadedSibling(me),Ve=Op(xe,Se||Pe||null,w,C,y.transform,y.style.map.terrain);let Ye,it;const ct=C.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;P.activeTexture.set(R.TEXTURE0),xe.texture.bind(ct,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(R.TEXTURE1),Se?(Se.texture.bind(ct,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Ye=Math.pow(2,Se.tileID.overscaledZ-xe.tileID.overscaledZ),it=[xe.tileID.canonical.x*Ye%1,xe.tileID.canonical.y*Ye%1]):xe.texture.bind(ct,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),xe.texture.useMipmap&&P.extTextureFilterAnisotropic&&y.transform.pitch>20&&R.texParameterf(R.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax);const tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(me),et=tt?me:null,mt=et?et.posMatrix:y.transform.calculatePosMatrix(me.toUnwrapped(),de),Ot=Kg(mt,it||[0,0],Ye||1,Ve,C);D instanceof _n?j.draw(P,R.TRIANGLES,ie,zr.disabled,Y,kr.disabled,Ot,tt,C.id,D.boundsBuffer,y.quadTriangleIndexBuffer,D.boundsSegments):j.draw(P,R.TRIANGLES,ie,te[me.overscaledZ],Y,kr.disabled,Ot,tt,C.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(r,a,h,d);break;case"background":(function(y,w,C,T){const P=C.paint.get("background-color"),R=C.paint.get("background-opacity");if(R===0)return;const D=y.context,j=D.gl,Y=y.transform,te=Y.tileSize,ae=C.paint.get("background-pattern");if(y.isPatternMissing(ae))return;const ue=!ae&&P.a===1&&R===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ue)return;const de=zr.disabled,me=y.depthModeForSublayer(0,ue==="opaque"?Xt.ReadWrite:Xt.ReadOnly),ie=y.colorModeForRenderPass(),xe=y.useProgram(ae?"backgroundPattern":"background"),Se=T||Y.coveringTiles({tileSize:te,terrain:y.style.map.terrain});ae&&(D.activeTexture.set(j.TEXTURE0),y.imageManager.bind(y.context));const Pe=C.getCrossfadeParameters();for(const Ve of Se){const Ye=T?Ve.posMatrix:y.transform.calculatePosMatrix(Ve.toUnwrapped()),it=ae?eh(Ye,R,y,ae,{tileID:Ve,tileSize:te},Pe):sc(Ye,R,P),ct=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ve);xe.draw(D,j.TRIANGLES,me,de,ie,kr.disabled,it,ct,C.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(r,0,h,d);break;case"custom":(function(y,w,C){const T=y.context,P=C.implementation;if(y.renderPass==="offscreen"){const R=P.prerender;R&&(y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),R.call(P,T.gl,y.transform.customLayerMatrix()),T.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),T.setStencilMode(zr.disabled);const R=P.renderingMode==="3d"?new Xt(y.context.gl.LEQUAL,Xt.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Xt.ReadOnly);T.setDepthMode(R),P.render(T.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),T.setDirty(),y.setBaseState(),T.bindFramebuffer.set(null)}})(r,0,h)}}translatePosMatrix(r,a,h,d,y){if(!h[0]&&!h[1])return r;const w=y?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(w){const P=Math.sin(w),R=Math.cos(w);h=[h[0]*R-h[1]*P,h[0]*P+h[1]*R]}const C=[y?h[0]:tr(a,h[0],this.transform.zoom),y?h[1]:tr(a,h[1],this.transform.zoom),0],T=new Float32Array(16);return u.J(T,r,C),T}saveTileTexture(r){const a=this._tileTextures[r.size[0]];a?a.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const a=this._tileTextures[r];return a&&a.length>0?a.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const a=this.imageManager.getPattern(r.from.toString()),h=this.imageManager.getPattern(r.to.toString());return!a||!h}useProgram(r,a){this.cache=this.cache||{};const h=r+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[h]||(this.cache[h]=new Ju(this.context,Jo[r],a,th[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new De(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:a}=this.context.gl;return this.width!==r||this.height!==a}}class ca{constructor(r,a){this.points=r,this.planes=a}static fromInvProjectionMatrix(r,a,h){const d=Math.pow(2,h),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const T=1/(C=u.af([],C,r))[3]/a*d;return u.b1(C,C,[T,T,1/C[3],T])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const T=function(j,Y){var te=Y[0],ae=Y[1],ue=Y[2],de=te*te+ae*ae+ue*ue;return de>0&&(de=1/Math.sqrt(de)),j[0]=Y[0]*de,j[1]=Y[1]*de,j[2]=Y[2]*de,j}([],function(j,Y,te){var ae=Y[0],ue=Y[1],de=Y[2],me=te[0],ie=te[1],xe=te[2];return j[0]=ue*xe-de*ie,j[1]=de*me-ae*xe,j[2]=ae*ie-ue*me,j}([],_e([],y[C[0]],y[C[1]]),_e([],y[C[2]],y[C[1]]))),P=-((R=T)[0]*(D=y[C[1]])[0]+R[1]*D[1]+R[2]*D[2]);var R,D;return T.concat(P)});return new ca(y,w)}}class ua{constructor(r,a){this.min=r,this.max=a,this.center=function(h,d,y){return h[0]=.5*d[0],h[1]=.5*d[1],h[2]=.5*d[2],h}([],function(h,d,y){return h[0]=d[0]+y[0],h[1]=d[1]+y[1],h[2]=d[2]+y[2],h}([],this.min,this.max))}quadrant(r){const a=[r%2==0,r<2],h=fe(this.min),d=fe(this.max);for(let y=0;y<a.length;y++)h[y]=a[y]?this.min[y]:this.center[y],d[y]=a[y]?this.center[y]:this.max[y];return d[2]=this.max[2],new ua(h,d)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let h=!0;for(let d=0;d<r.planes.length;d++){const y=r.planes[d];let w=0;for(let C=0;C<a.length;C++)u.b2(y,a[C])>=0&&w++;if(w===0)return 0;w!==a.length&&(h=!1)}if(h)return 2;for(let d=0;d<3;d++){let y=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let C=0;C<r.points.length;C++){const T=r.points[C][d]-this.min[d];y=Math.min(y,T),w=Math.max(w,T)}if(w<0||y>this.max[d]-this.min[d])return 0}return 1}}class ha{constructor(r=0,a=0,h=0,d=0){if(isNaN(r)||r<0||isNaN(a)||a<0||isNaN(h)||h<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=a,this.left=h,this.right=d}interpolate(r,a,h){return a.top!=null&&r.top!=null&&(this.top=u.y.number(r.top,a.top,h)),a.bottom!=null&&r.bottom!=null&&(this.bottom=u.y.number(r.bottom,a.bottom,h)),a.left!=null&&r.left!=null&&(this.left=u.y.number(r.left,a.left,h)),a.right!=null&&r.right!=null&&(this.right=u.y.number(r.right,a.right,h)),this}getCenter(r,a){const h=u.ac((this.left+r-this.right)/2,0,r),d=u.ac((this.top+a-this.bottom)/2,0,a);return new u.P(h,d)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new ha(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const mh=85.051129;class da{constructor(r,a,h,d,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=r||0,this._maxZoom=a||22,this._minPitch=h??0,this._maxPitch=d??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ha,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new da(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const a=-u.b3(r,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var h=new u.A(4);return u.A!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}(),function(h,d,y){var w=d[0],C=d[1],T=d[2],P=d[3],R=Math.sin(y),D=Math.cos(y);h[0]=w*D+T*R,h[1]=C*D+P*R,h[2]=w*-R+T*D,h[3]=C*-R+P*D}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const a=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const a=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,a,h){this._unmodified=!1,this._edgeInsets.interpolate(r,a,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const a=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(r){const a=[new u.b4(0,r)];if(this._renderWorldCopies){const h=this.pointCoordinate(new u.P(0,0)),d=this.pointCoordinate(new u.P(this.width,0)),y=this.pointCoordinate(new u.P(this.width,this.height)),w=this.pointCoordinate(new u.P(0,this.height)),C=Math.floor(Math.min(h.x,d.x,y.x,w.x)),T=Math.floor(Math.max(h.x,d.x,y.x,w.x)),P=1;for(let R=C-P;R<=T+P;R++)R!==0&&a.push(new u.b4(R,r))}return a}coveringTiles(r){var a,h;let d=this.coveringZoomLevel(r);const y=d;if(r.minzoom!==void 0&&d<r.minzoom)return[];r.maxzoom!==void 0&&d>r.maxzoom&&(d=r.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),C=u.Z.fromLngLat(this.center),T=Math.pow(2,d),P=[T*w.x,T*w.y,0],R=[T*C.x,T*C.y,0],D=ca.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,d);let j=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(j=d);const Y=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,te=ie=>({aabb:new ua([ie*T,0,0],[(ie+1)*T,T,0]),zoom:0,x:0,y:0,wrap:ie,fullyVisible:!1}),ae=[],ue=[],de=d,me=r.reparseOverscaled?y:d;if(this._renderWorldCopies)for(let ie=1;ie<=3;ie++)ae.push(te(-ie)),ae.push(te(ie));for(ae.push(te(0));ae.length>0;){const ie=ae.pop(),xe=ie.x,Se=ie.y;let Pe=ie.fullyVisible;if(!Pe){const tt=ie.aabb.intersects(D);if(tt===0)continue;Pe=tt===2}const Ve=r.terrain?P:R,Ye=ie.aabb.distanceX(Ve),it=ie.aabb.distanceY(Ve),ct=Math.max(Math.abs(Ye),Math.abs(it));if(ie.zoom===de||ct>Y+(1<<de-ie.zoom)-2&&ie.zoom>=j){const tt=de-ie.zoom,et=P[0]-.5-(xe<<tt),mt=P[1]-.5-(Se<<tt);ue.push({tileID:new u.S(ie.zoom===de?me:ie.zoom,ie.wrap,ie.zoom,xe,Se),distanceSq:ge([R[0]-.5-xe,R[1]-.5-Se]),tileDistanceToCamera:Math.sqrt(et*et+mt*mt)})}else for(let tt=0;tt<4;tt++){const et=(xe<<1)+tt%2,mt=(Se<<1)+(tt>>1),Ot=ie.zoom+1;let rt=ie.aabb.quadrant(tt);if(r.terrain){const st=new u.S(Ot,ie.wrap,Ot,et,mt),Lt=r.terrain.getMinMaxElevation(st),jr=(a=Lt.minElevation)!==null&&a!==void 0?a:this.elevation,Wt=(h=Lt.maxElevation)!==null&&h!==void 0?h:this.elevation;rt=new ua([rt.min[0],rt.min[1],jr],[rt.max[0],rt.max[1],Wt])}ae.push({aabb:rt,zoom:Ot,x:et,y:mt,wrap:ie.wrap,fullyVisible:Pe})}}return ue.sort((ie,xe)=>ie.distanceSq-xe.distanceSq).map(ie=>ie.tileID)}resize(r,a){this.width=r,this.height=a,this.pixelsToGLUnits=[2/r,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const a=u.ac(r.lat,-85.051129,mh);return new u.P(u.O(r.lng)*this.worldSize,u.Q(a)*this.worldSize)}unproject(r){return new u.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const a=this.elevation,h=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,d=this.pointLocation(this.centerPoint,r),y=r.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-y))return;const w=h+a-y,C=Math.cos(this._pitch)*this.cameraToCenterDistance/w/u.b5(1,d.lat),T=this.scaleZoom(C/this.tileSize);this._elevation=y,this._center=d,this.zoom=T}setLocationAtPoint(r,a){const h=this.pointCoordinate(a),d=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(r),w=new u.Z(y.x-(h.x-d.x),y.y-(h.y-d.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,a){return a?this.coordinatePoint(this.locationCoordinate(r),a.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,a){return this.coordinateLocation(this.pointCoordinate(r,a))}locationCoordinate(r){return u.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,a){if(a){const j=a.pointCoordinate(r);if(j!=null)return j}const h=[r.x,r.y,0,1],d=[r.x,r.y,1,1];u.af(h,h,this.pixelMatrixInverse),u.af(d,d,this.pixelMatrixInverse);const y=h[3],w=d[3],C=h[1]/y,T=d[1]/w,P=h[2]/y,R=d[2]/w,D=P===R?0:(0-P)/(R-P);return new u.Z(u.y.number(h[0]/y,d[0]/w,D)/this.worldSize,u.y.number(C,T,D)/this.worldSize)}coordinatePoint(r,a=0,h=this.pixelMatrix){const d=[r.x*this.worldSize,r.y*this.worldSize,a,1];return u.af(d,d,h),new u.P(d[0]/d[3],d[1]/d[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new ze().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ze([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,mh])}calculateTileMatrix(r){const a=r.canonical,h=this.worldSize/this.zoomScale(a.z),d=a.x+Math.pow(2,a.z)*r.wrap,y=u.an(new Float64Array(16));return u.J(y,y,[d*h,a.y*h,0]),u.K(y,y,[h/u.X,h/u.X,1]),y}calculatePosMatrix(r,a=!1){const h=r.key,d=a?this._alignedPosMatrixCache:this._posMatrixCache;if(d[h])return d[h];const y=this.calculateTileMatrix(r);return u.L(y,a?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),d[h]=new Float32Array(y),d[h]}calculateFogMatrix(r){const a=r.key,h=this._fogMatrixCache;if(h[a])return h[a];const d=this.calculateTileMatrix(r);return u.L(d,this.fogMatrix,d),h[a]=new Float32Array(d),h[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,a){a=u.ac(+a,this.minZoom,this.maxZoom);const h={center:new u.N(r.lng,r.lat),zoom:a};let d=this.lngRange;if(!this._renderWorldCopies&&d===null){const ie=179.9999999999;d=[-ie,ie]}const y=this.tileSize*this.zoomScale(h.zoom);let w=0,C=y,T=0,P=y,R=0,D=0;const{x:j,y:Y}=this.size;if(this.latRange){const ie=this.latRange;w=u.Q(ie[1])*y,C=u.Q(ie[0])*y,C-w<Y&&(R=Y/(C-w))}d&&(T=u.b3(u.O(d[0])*y,0,y),P=u.b3(u.O(d[1])*y,0,y),P<T&&(P+=y),P-T<j&&(D=j/(P-T)));const{x:te,y:ae}=this.project.call({worldSize:y},r);let ue,de;const me=Math.max(D||0,R||0);if(me){const ie=new u.P(D?(P+T)/2:te,R?(C+w)/2:ae);return h.center=this.unproject.call({worldSize:y},ie).wrap(),h.zoom+=this.scaleZoom(me),h}if(this.latRange){const ie=Y/2;ae-ie<w&&(de=w+ie),ae+ie>C&&(de=C-ie)}if(d){const ie=(T+P)/2;let xe=te;this._renderWorldCopies&&(xe=u.b3(te,ie-y/2,ie+y/2));const Se=j/2;xe-Se<T&&(ue=T+Se),xe+Se>P&&(ue=P-Se)}if(ue!==void 0||de!==void 0){const ie=new u.P(ue??te,de??ae);h.center=this.unproject.call({worldSize:y},ie).wrap()}return h}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:a,zoom:h}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=h,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,a=this.point.x,h=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let d=u.an(new Float64Array(16));u.K(d,d,[this.width/2,-this.height/2,1]),u.J(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=u.an(new Float64Array(16)),u.K(d,d,[1,-1,1]),u.J(d,d,[-1,-1,0]),u.K(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),C=y-w*this._pixelPerMeter/Math.cos(this._pitch),T=w<0?C:y,P=Math.PI/2+this._pitch,R=this._fov*(.5+r.y/this.height),D=Math.sin(R)*T/Math.sin(u.ac(Math.PI-P-R,.01,Math.PI-.01)),j=this.getHorizon(),Y=2*Math.atan(j/this.cameraToCenterDistance)*(.5+r.y/(2*j)),te=Math.sin(Y)*T/Math.sin(u.ac(Math.PI-P-Y,.01,Math.PI-.01)),ae=Math.min(D,te);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+T),this.nearZ=this.height/50,d=new Float64Array(16),u.b6(d,this._fov,this.width/this.height,this.nearZ,this.farZ),d[8]=2*-r.x/this.width,d[9]=2*r.y/this.height,this.projectionMatrix=u.ae(d),u.K(d,d,[1,-1,1]),u.J(d,d,[0,0,-this.cameraToCenterDistance]),u.b7(d,d,this._pitch),u.ad(d,d,this.angle),u.J(d,d,[-a,-h,0]),this.mercatorMatrix=u.K([],d,[this.worldSize,this.worldSize,this.worldSize]),u.K(d,d,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,d),u.J(d,d,[0,0,-this.elevation]),this.modelViewProjectionMatrix=d,this.invModelViewProjectionMatrix=u.as([],d),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-a,-h,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,d);const ue=this.width%2/2,de=this.height%2/2,me=Math.cos(this.angle),ie=Math.sin(this.angle),xe=a-Math.round(a)+me*ue+ie*de,Se=h-Math.round(h)+me*de+ie*ue,Pe=new Float64Array(d);if(u.J(Pe,Pe,[xe>.5?xe-1:xe,Se>.5?Se-1:Se,0]),this.alignedModelViewProjectionMatrix=Pe,d=u.as(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),a=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const a=this.getCameraPoint();if(r.length===1)return[r[0],a];{let h=a.x,d=a.y,y=a.x,w=a.y;for(const C of r)h=Math.min(h,C.x),d=Math.min(d,C.y),y=Math.max(y,C.x),w=Math.max(w,C.y);return[new u.P(h,d),new u.P(y,d),new u.P(y,w),new u.P(h,w),new u.P(h,d)]}}lngLatToCameraDepth(r,a){const h=this.locationCoordinate(r),d=[h.x*this.worldSize,h.y*this.worldSize,a,1];return u.af(d,d,this.modelViewProjectionMatrix),d[2]/d[3]}}function hl(_,r){let a,h=!1,d=null,y=null;const w=()=>{d=null,h&&(_.apply(y,a),d=setTimeout(w,r),h=!1)};return(...C)=>(h=!0,y=this,a=C,d||w(),d)}class yc{constructor(r){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let h;return a.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(h=d)}),(h&&h[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(a.length>=3&&!a.some(h=>isNaN(h))){const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:h,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const h=a.join("/");let d=h;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${h}`);let y=window.location.hash.replace(d,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let w=window.location.href.replace(/(#.+)?$/,y);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=hl(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const a=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,d=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,d),w=Math.round(a.lng*y)/y,C=Math.round(a.lat*y)/y,T=this._map.getBearing(),P=this._map.getPitch();let R="";if(R+=r?`/${w}/${C}/${h}`:`${h}/${C}/${w}`,(T||P)&&(R+="/"+Math.round(10*T)/10),P&&(R+=`/${Math.round(P)}`),this._hashName){const D=this._hashName;let j=!1;const Y=window.location.hash.slice(1).split("&").map(te=>{const ae=te.split("=")[0];return ae===D?(j=!0,`${ae}=${R}`):te}).filter(te=>te);return j||Y.push(`${D}=${R}`),`#${Y.join("&")}`}return`#${R}`}}const _c={linearity:.3,easing:u.b8(0,0,.3,1)},gh=u.e({deceleration:2500,maxSpeed:1400},_c),cy=u.e({deceleration:20,maxSpeed:1400},_c),Up=u.e({deceleration:1e3,maxSpeed:360},_c),vc=u.e({deceleration:1e3,maxSpeed:90},_c);class yh{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:L.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,a=L.now();for(;r.length>0&&a-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)a.zoom+=y.zoomDelta||0,a.bearing+=y.bearingDelta||0,a.pitch+=y.pitchDelta||0,y.panDelta&&a.pan._add(y.panDelta),y.around&&(a.around=y.around),y.pinchAround&&(a.pinchAround=y.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(a.pan.mag()){const y=pl(a.pan.mag(),h,u.e({},gh,r||{}));d.offset=a.pan.mult(y.amount/a.pan.mag()),d.center=this._map.transform.center,dl(d,y)}if(a.zoom){const y=pl(a.zoom,h,cy);d.zoom=this._map.transform.zoom+y.amount,dl(d,y)}if(a.bearing){const y=pl(a.bearing,h,Up);d.bearing=this._map.transform.bearing+u.ac(y.amount,-179,179),dl(d,y)}if(a.pitch){const y=pl(a.pitch,h,vc);d.pitch=this._map.transform.pitch+y.amount,dl(d,y)}if(d.zoom||d.bearing){const y=a.pinchAround===void 0?a.around:a.pinchAround;d.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(d,{noMoveStart:!0})}}function dl(_,r){(!_.duration||_.duration<r.duration)&&(_.duration=r.duration,_.easing=r.easing)}function pl(_,r,a){const{maxSpeed:h,linearity:d,deceleration:y}=a,w=u.ac(_*d/(r/1e3),-h,h),C=Math.abs(w)/(y*d);return{easing:a.easing,duration:1e3*C,amount:w*(C/2)}}class Bn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,a,h,d={}){const y=z.mousePos(a.getCanvas(),h),w=a.unproject(y);super(r,u.e({point:y,lngLat:w,originalEvent:h},d)),this._defaultPrevented=!1,this.target=a}}class Ps extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,a,h){const d=r==="touchend"?h.changedTouches:h.touches,y=z.touchPos(a.getCanvasContainer(),d),w=y.map(T=>a.unproject(T)),C=y.reduce((T,P,R,D)=>T.add(P.div(D.length)),new u.P(0,0));super(r,{points:y,point:C,lngLats:w,lngLat:a.unproject(C),originalEvent:h}),this._defaultPrevented=!1}}class Wp extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,a,h){super(r,{originalEvent:h}),this._defaultPrevented=!1}}class Gp{constructor(r,a){this._map=r,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Wp(r.type,this._map,r))}mousedown(r,a){return this._mousedownPos=a,this._firePreventable(new Bn(r.type,this._map,r))}mouseup(r){this._map.fire(new Bn(r.type,this._map,r))}click(r,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Bn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Bn(r.type,this._map,r))}mouseover(r){this._map.fire(new Bn(r.type,this._map,r))}mouseout(r){this._map.fire(new Bn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Ps(r.type,this._map,r))}touchmove(r){this._map.fire(new Ps(r.type,this._map,r))}touchend(r){this._map.fire(new Ps(r.type,this._map,r))}touchcancel(r){this._map.fire(new Ps(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class en{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Bn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Bn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Bn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ji{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class wi{constructor(r,a){this._map=r,this._tr=new Ji(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,a){this.isEnabled()&&r.shiftKey&&r.button===0&&(z.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(r,a){if(!this._active)return;const h=a;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const d=this._startPos;this._lastPos=h,this._box||(this._box=z.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const y=Math.min(d.x,h.x),w=Math.max(d.x,h.x),C=Math.min(d.y,h.y),T=Math.max(d.y,h.y);z.setTransform(this._box,`translate(${y}px,${C}px)`),this._box.style.width=w-y+"px",this._box.style.height=T-C+"px"}mouseupWindow(r,a){if(!this._active||r.button!==0)return;const h=this._startPos,d=a;if(this.reset(),z.suppressClick(),h.x!==d.x||h.y!==d.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(h,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(z.remove(this._box),this._box=null),z.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,a){return this._map.fire(new u.k(r,{originalEvent:a}))}}function fl(_,r){if(_.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${r.length}`);const a={};for(let h=0;h<_.length;h++)a[_[h].identifier]=r[h];return a}class _h{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,a,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),h.length===this.numTouches&&(this.centroid=function(d){const y=new u.P(0,0);for(const w of d)y._add(w);return y.div(d.length)}(a),this.touches=fl(h,a)))}touchmove(r,a,h){if(this.aborted||!this.centroid)return;const d=fl(h,a);for(const y in this.touches){const w=d[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(r,a,h){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class xc{constructor(r){this.singleTap=new _h(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,a,h){this.singleTap.touchstart(r,a,h)}touchmove(r,a,h){this.singleTap.touchmove(r,a,h)}touchend(r,a,h){const d=this.singleTap.touchend(r,a,h);if(d){const y=r.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(y&&w||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class pa{constructor(r){this._tr=new Ji(r),this._zoomIn=new xc({numTouches:1,numTaps:2}),this._zoomOut=new xc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,a,h){this._zoomIn.touchstart(r,a,h),this._zoomOut.touchstart(r,a,h)}touchmove(r,a,h){this._zoomIn.touchmove(r,a,h),this._zoomOut.touchmove(r,a,h)}touchend(r,a,h){const d=this._zoomIn.touchend(r,a,h),y=this._zoomOut.touchend(r,a,h),w=this._tr;return d?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(d)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lo{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const a=this._moveFunction(...r);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(r,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,a){if(!this.isEnabled())return;const h=this._lastPoint;if(!h)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const d=a.length?a[0]:a;return!this._moved&&d.dist(h)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(h,d))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&z.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const vh={0:1,2:2};class bc{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const a=z.mouseButton(r);this._eventButton=a}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(a,h){const d=vh[h];return a.buttons===void 0||(a.buttons&d)!==d}(r,this._eventButton)}isValidEndEvent(r){return z.mouseButton(r)===this._eventButton}}class xh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const wc=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=r=>{r.preventDefault()}},bh=({enable:_,clickTolerance:r,bearingDegreesPerPixelMoved:a=.8})=>{const h=new bc({checkCorrectEvent:d=>z.mouseButton(d)===0&&d.ctrlKey||z.mouseButton(d)===2});return new Lo({clickTolerance:r,move:(d,y)=>({bearingDelta:(y.x-d.x)*a}),moveStateManager:h,enable:_,assignEvents:wc})},wh=({enable:_,clickTolerance:r,pitchDegreesPerPixelMoved:a=-.5})=>{const h=new bc({checkCorrectEvent:d=>z.mouseButton(d)===0&&d.ctrlKey||z.mouseButton(d)===2});return new Lo({clickTolerance:r,move:(d,y)=>({pitchDelta:(y.y-d.y)*a}),moveStateManager:h,enable:_,assignEvents:wc})};class Ms{constructor(r,a){this._clickTolerance=r.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,a,h){return this._calculateTransform(r,a,h)}touchmove(r,a,h){if(this._active){if(!this._shouldBePrevented(h.length))return r.preventDefault(),this._calculateTransform(r,a,h);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,a,h){this._calculateTransform(r,a,h),this._active&&this._shouldBePrevented(h.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,a,h){h.length>0&&(this._active=!0);const d=fl(h,a),y=new u.P(0,0),w=new u.P(0,0);let C=0;for(const P in d){const R=d[P],D=this._touches[P];D&&(y._add(R),w._add(R.sub(D)),C++,d[P]=R)}if(this._touches=d,this._shouldBePrevented(C)||!w.mag())return;const T=w.div(C);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(C),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,a,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([a[0],a[1]]))}touchmove(r,a,h){if(!this._firstTwoTouches)return;r.preventDefault();const[d,y]=this._firstTwoTouches,w=ml(h,a,d),C=ml(h,a,y);if(!w||!C)return;const T=this._aroundCenter?null:w.add(C).div(2);return this._move([w,C],T,r)}touchend(r,a,h){if(!this._firstTwoTouches)return;const[d,y]=this._firstTwoTouches,w=ml(h,a,d),C=ml(h,a,y);w&&C||(this._active&&z.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ml(_,r,a){for(let h=0;h<_.length;h++)if(_[h].identifier===a)return r[h]}function Sh(_,r){return Math.log(_/r)/Math.LN2}class Ch extends Sc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,a){const h=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Sh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sh(this._distance,h),pinchAround:a}}}function Th(_,r){return 180*_.angleWith(r)/Math.PI}class kh extends Sc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,a,h){const d=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Th(this._vector,d),pinchAround:a}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const a=25/(Math.PI*this._minDiameter)*360,h=Th(r,this._startVector);return Math.abs(h)<a}}function Cc(_){return Math.abs(_.y)>Math.abs(_.x)}class gl extends Sc{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,a,h){super.touchstart(r,a,h),this._currentTouchCount=h.length}_start(r){this._lastPoints=r,Cc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,a,h){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const d=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,y,h.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(d.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(r,a,h){if(this._valid!==void 0)return this._valid;const d=r.mag()>=2,y=a.mag()>=2;if(!d&&!y)return;if(!d||!y)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const w=r.y>0==a.y>0;return Cc(r)&&Cc(a)&&w}}const Hp={panStep:100,bearingStep:15,pitchStep:10};class Fi{constructor(r){this._tr=new Ji(r);const a=Hp;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let a=0,h=0,d=0,y=0,w=0;switch(r.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:r.shiftKey?h=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?h=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?d=1:(r.preventDefault(),w=-1);break;case 40:r.shiftKey?d=-1:(r.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(h=0,d=0),{cameraAnimation:C=>{const T=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:_o,zoom:a?Math.round(T.zoom)+a*(r.shiftKey?2:1):T.zoom,bearing:T.bearing+h*this._bearingStep,pitch:T.pitch+d*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:T.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function _o(_){return _*(2-_)}const Ih=4.000244140625;class Qi{constructor(r,a){this._onTimeout=h=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)},this._map=r,this._tr=new Ji(r),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let a=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const h=L.now(),d=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,a!==0&&a%Ih==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(d*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),r.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=r,this._delta-=a,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=z.mousePos(this._map.getCanvas(),r),h=this._tr;this._around=a.y>h.transform.height/2-h.transform.getHorizon()?u.N.convert(this._aroundCenter?h.center:h.unproject(a)):u.N.convert(h.center),this._aroundPoint=h.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>Ih?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&P!==0&&(P=1/P);const R=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(R*P))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,h=this._startZoom,d=this._easing;let y,w=!1;const C=L.now()-this._lastWheelEventTime;if(this._type==="wheel"&&h&&d&&C){const T=Math.min(C/200,1),P=d(T);y=u.y.number(h,a,P),T<1?this._frameId||(this._frameId=!0):w=!0}else y=a,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let a=u.b9;if(this._prevEase){const h=this._prevEase,d=(L.now()-h.start)/h.duration,y=h.easing(d+.01)-h.easing(d),w=.27/Math.sqrt(y*y+1e-4)*.01,C=Math.sqrt(.0729-w*w);a=u.b8(w,C,.25,1)}return this._prevEase={start:L.now(),duration:r,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class As{constructor(r,a){this._clickZoom=r,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class uy{constructor(r){this._tr=new Ji(r),this.reset()}reset(){this._active=!1}dblclick(r,a){return r.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hy{constructor(){this._tap=new xc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,a,h){if(!this._swipePoint)if(this._tapTime){const d=a[0],y=r.timeStamp-this._tapTime<500,w=this._tapPoint.dist(d)<30;y&&w?h.length>0&&(this._swipePoint=d,this._swipeTouch=h[0].identifier):this.reset()}else this._tap.touchstart(r,a,h)}touchmove(r,a,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const d=a[0],y=d.y-this._swipePoint.y;return this._swipePoint=d,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,a,h)}touchend(r,a,h){if(this._tapTime)this._swipePoint&&h.length===0&&this.reset();else{const d=this._tap.touchend(r,a,h);d&&(this._tapTime=r.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qp{constructor(r,a,h){this._el=r,this._mousePan=a,this._touchPan=h}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Zp{constructor(r,a,h){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=a,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Eh{constructor(r,a,h,d){this._el=r,this._touchZoom=a,this._touchRotate=h,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class fa{constructor(r,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=z.create("div","maplibregl-cooperative-gesture-screen",r);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const h=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=a,this._container.appendChild(d);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=h,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(z.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,a){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:r,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Oi=_=>_.zoom||_.drag||_.pitch||_.rotate;class dt extends u.k{}function Tc(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Ph{constructor(r,a){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,y)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=d.type==="renderFrame"?void 0:d,C={needsRenderFrame:!1},T={},P={},R=d.touches,D=R?this._getMapTouches(R):void 0,j=D?z.touchPos(this._map.getCanvas(),D):z.mousePos(this._map.getCanvas(),d);for(const{handlerName:ae,handler:ue,allowed:de}of this._handlers){if(!ue.isEnabled())continue;let me;this._blockedByActive(P,de,ae)?ue.reset():ue[y||d.type]&&(me=ue[y||d.type](d,j,D),this.mergeHandlerResult(C,T,me,ae,w),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||ue.isActive())&&(P[ae]=ue)}const Y={};for(const ae in this._previousActiveHandlers)P[ae]||(Y[ae]=w);this._previousActiveHandlers=P,(Object.keys(Y).length||Tc(C))&&(this._changes.push([C,T,Y]),this._triggerRenderFrame()),(Object.keys(P).length||Tc(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=C;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yh(r),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[d,y,w]of this._listeners)z.addEventListener(d,y,d===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[r,a,h]of this._listeners)z.removeEventListener(r,a,r===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(r){const a=this._map,h=a.getCanvasContainer();this._add("mapEvent",new Gp(a,r));const d=a.boxZoom=new wi(a,r);this._add("boxZoom",d),r.interactive&&r.boxZoom&&d.enable();const y=a.cooperativeGestures=new fa(a,r.cooperativeGestures);this._add("cooperativeGestures",y),r.cooperativeGestures&&y.enable();const w=new pa(a),C=new uy(a);a.doubleClickZoom=new As(C,w),this._add("tapZoom",w),this._add("clickZoom",C),r.interactive&&r.doubleClickZoom&&a.doubleClickZoom.enable();const T=new hy;this._add("tapDragZoom",T);const P=a.touchPitch=new gl(a);this._add("touchPitch",P),r.interactive&&r.touchPitch&&a.touchPitch.enable(r.touchPitch);const R=bh(r),D=wh(r);a.dragRotate=new Zp(r,R,D),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]),r.interactive&&r.dragRotate&&a.dragRotate.enable();const j=(({enable:me,clickTolerance:ie})=>{const xe=new bc({checkCorrectEvent:Se=>z.mouseButton(Se)===0&&!Se.ctrlKey});return new Lo({clickTolerance:ie,move:(Se,Pe)=>({around:Pe,panDelta:Pe.sub(Se)}),activateOnStart:!0,moveStateManager:xe,enable:me,assignEvents:wc})})(r),Y=new Ms(r,a);a.dragPan=new qp(h,j,Y),this._add("mousePan",j),this._add("touchPan",Y,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&a.dragPan.enable(r.dragPan);const te=new kh,ae=new Ch;a.touchZoomRotate=new Eh(h,ae,te,T),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&a.touchZoomRotate.enable(r.touchZoomRotate);const ue=a.scrollZoom=new Qi(a,()=>this._triggerRenderFrame());this._add("scrollZoom",ue,["mousePan"]),r.interactive&&r.scrollZoom&&a.scrollZoom.enable(r.scrollZoom);const de=a.keyboard=new Fi(a);this._add("keyboard",de),r.interactive&&r.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new en(a))}_add(r,a,h){this._handlers.push({handlerName:r,handler:a,allowed:h}),this._handlersById[r]=a}stop(r){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Oi(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,a,h){for(const d in r)if(d!==h&&(!a||a.indexOf(d)<0))return!0;return!1}_getMapTouches(r){const a=[];for(const h of r)this._el.contains(h.target)&&a.push(h);return a}mergeHandlerResult(r,a,h,d,y){if(!h)return;u.e(r,h);const w={handlerName:d,originalEvent:h.originalEvent||y};h.zoomDelta!==void 0&&(a.zoom=w),h.panDelta!==void 0&&(a.drag=w),h.pitchDelta!==void 0&&(a.pitch=w),h.bearingDelta!==void 0&&(a.rotate=w)}_applyChanges(){const r={},a={},h={};for(const[d,y,w]of this._changes)d.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(d.panDelta)),d.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(r.around=d.around),d.pinchAround!==void 0&&(r.pinchAround=d.pinchAround),d.noInertia&&(r.noInertia=d.noInertia),u.e(a,y),u.e(h,w);this._updateMapTransform(r,a,h),this._changes=[]}_updateMapTransform(r,a,h){const d=this._map,y=d._getTransformForUpdate(),w=d.terrain;if(!(Tc(r)||w&&this._terrainMovement))return this._fireEvents(a,h,!0);let{panDelta:C,zoomDelta:T,bearingDelta:P,pitchDelta:R,around:D,pinchAround:j}=r;j!==void 0&&(D=j),d._stop(!0),D=D||d.transform.centerPoint;const Y=y.pointLocation(C?D.sub(C):D);P&&(y.bearing+=P),R&&(y.pitch+=R),T&&(y.zoom+=T),w?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(C)):y.setLocationAtPoint(Y,D):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(Y,D)):y.setLocationAtPoint(Y,D),d._applyUpdatedTransform(y),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(a,h,!0)}_fireEvents(r,a,h){const d=Oi(this._eventsInProgress),y=Oi(r),w={};for(const D in r){const{originalEvent:j}=r[D];this._eventsInProgress[D]||(w[`${D}start`]=j),this._eventsInProgress[D]=r[D]}!d&&y&&this._fireEvent("movestart",y.originalEvent);for(const D in w)this._fireEvent(D,w[D]);y&&this._fireEvent("move",y.originalEvent);for(const D in r){const{originalEvent:j}=r[D];this._fireEvent(D,j)}const C={};let T;for(const D in this._eventsInProgress){const{handlerName:j,originalEvent:Y}=this._eventsInProgress[D];this._handlersById[j].isActive()||(delete this._eventsInProgress[D],T=a[j]||Y,C[`${D}end`]=T)}for(const D in C)this._fireEvent(D,C[D]);const P=Oi(this._eventsInProgress),R=(d||y)&&!P;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const D=this._map._getTransformForUpdate();D.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(D)}if(h&&R){this._updatingCamera=!0;const D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;!D||!D.essential&&L.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:T})),j(this._map.getBearing())&&this._map.resetNorth()):(j(D.bearing||this._map.getBearing())&&(D.bearing=0),D.freezeElevation=!0,this._map.easeTo(D,{originalEvent:T})),this._updatingCamera=!1}}_fireEvent(r,a){this._map.fire(new u.k(r,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new dt("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Xp extends u.E{constructor(r,a){super(),this._renderFrameCallback=()=>{const h=Math.min((L.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,a){return this.jumpTo({center:r},a)}panBy(r,a,h){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},a),h)}panTo(r,a,h){return this.easeTo(u.e({center:r},a),h)}getZoom(){return this.transform.zoom}setZoom(r,a){return this.jumpTo({zoom:r},a),this}zoomTo(r,a,h){return this.easeTo(u.e({zoom:r},a),h)}zoomIn(r,a){return this.zoomTo(this.getZoom()+1,r,a),this}zoomOut(r,a){return this.zoomTo(this.getZoom()-1,r,a),this}getBearing(){return this.transform.bearing}setBearing(r,a){return this.jumpTo({bearing:r},a),this}getPadding(){return this.transform.padding}setPadding(r,a){return this.jumpTo({padding:r},a),this}rotateTo(r,a,h){return this.easeTo(u.e({bearing:r},a),h)}resetNorth(r,a){return this.rotateTo(0,u.e({duration:1e3},r),a),this}resetNorthPitch(r,a){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),a),this}snapToNorth(r,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,a):this}getPitch(){return this.transform.pitch}setPitch(r,a){return this.jumpTo({pitch:r},a),this}cameraForBounds(r,a){r=ze.convert(r).adjustAntiMeridian();const h=a&&a.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),h,a)}_cameraForBoxAndBearing(r,a,h,d){const y={top:0,bottom:0,right:0,left:0};if(typeof(d=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const tt=d.padding;d.padding={top:tt,bottom:tt,right:tt,left:tt}}d.padding=u.e(y,d.padding);const w=this.transform,C=w.padding,T=new ze(r,a),P=w.project(T.getNorthWest()),R=w.project(T.getNorthEast()),D=w.project(T.getSouthEast()),j=w.project(T.getSouthWest()),Y=u.ba(-h),te=P.rotate(Y),ae=R.rotate(Y),ue=D.rotate(Y),de=j.rotate(Y),me=new u.P(Math.max(te.x,ae.x,de.x,ue.x),Math.max(te.y,ae.y,de.y,ue.y)),ie=new u.P(Math.min(te.x,ae.x,de.x,ue.x),Math.min(te.y,ae.y,de.y,ue.y)),xe=me.sub(ie),Se=(w.width-(C.left+C.right+d.padding.left+d.padding.right))/xe.x,Pe=(w.height-(C.top+C.bottom+d.padding.top+d.padding.bottom))/xe.y;if(Pe<0||Se<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ve=Math.min(w.scaleZoom(w.scale*Math.min(Se,Pe)),d.maxZoom),Ye=u.P.convert(d.offset),it=new u.P((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(u.ba(h)),ct=Ye.add(it).mult(w.scale/w.zoomScale(Ve));return{center:w.unproject(P.add(D).div(2).sub(ct)),zoom:Ve,bearing:h}}fitBounds(r,a,h){return this._fitInternal(this.cameraForBounds(r,a),a,h)}fitScreenCoordinates(r,a,h,d,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(a)),h,d),d,y)}_fitInternal(r,a,h){return r?(delete(a=u.e(r,a)).padding,a.linear?this.easeTo(a,h):this.flyTo(a,h)):this}jumpTo(r,a){this.stop();const h=this._getTransformForUpdate();let d=!1,y=!1,w=!1;return"zoom"in r&&h.zoom!==+r.zoom&&(d=!0,h.zoom=+r.zoom),r.center!==void 0&&(h.center=u.N.convert(r.center)),"bearing"in r&&h.bearing!==+r.bearing&&(y=!0,h.bearing=+r.bearing),"pitch"in r&&h.pitch!==+r.pitch&&(w=!0,h.pitch=+r.pitch),r.padding==null||h.isPaddingEqual(r.padding)||(h.padding=r.padding),this._applyUpdatedTransform(h),this.fire(new u.k("movestart",a)).fire(new u.k("move",a)),d&&this.fire(new u.k("zoomstart",a)).fire(new u.k("zoom",a)).fire(new u.k("zoomend",a)),y&&this.fire(new u.k("rotatestart",a)).fire(new u.k("rotate",a)).fire(new u.k("rotateend",a)),w&&this.fire(new u.k("pitchstart",a)).fire(new u.k("pitch",a)).fire(new u.k("pitchend",a)),this.fire(new u.k("moveend",a))}calculateCameraOptionsFromTo(r,a,h,d=0){const y=u.Z.fromLngLat(r,a),w=u.Z.fromLngLat(h,d),C=w.x-y.x,T=w.y-y.y,P=w.z-y.z,R=Math.hypot(C,T,P);if(R===0)throw new Error("Can't calculate camera options with same From and To");const D=Math.hypot(C,T),j=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),Y=180*Math.atan2(C,-T)/Math.PI;let te=180*Math.acos(D/R)/Math.PI;return te=P<0?90-te:90+te,{center:w.toLngLat(),zoom:j,pitch:te,bearing:Y}}easeTo(r,a){var h;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b9},r)).animate===!1||!r.essential&&L.prefersReducedMotion)&&(r.duration=0);const d=this._getTransformForUpdate(),y=d.zoom,w=d.bearing,C=d.pitch,T=d.padding,P="bearing"in r?this._normalizeBearing(r.bearing,w):w,R="pitch"in r?+r.pitch:C,D="padding"in r?r.padding:d.padding,j=u.P.convert(r.offset);let Y=d.centerPoint.add(j);const te=d.pointLocation(Y),{center:ae,zoom:ue}=d.getConstrained(u.N.convert(r.center||te),(h=r.zoom)!==null&&h!==void 0?h:y);this._normalizeCenter(ae,d);const de=d.project(te),me=d.project(ae).sub(de),ie=d.zoomScale(ue-y);let xe,Se;r.around&&(xe=u.N.convert(r.around),Se=d.locationPoint(xe));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ue!==y,this._rotating=this._rotating||w!==P,this._pitching=this._pitching||R!==C,this._padding=!d.isPaddingEqual(D),this._easeId=r.easeId,this._prepareEase(a,r.noMoveStart,Pe),this.terrain&&this._prepareElevation(ae),this._ease(Ve=>{if(this._zooming&&(d.zoom=u.y.number(y,ue,Ve)),this._rotating&&(d.bearing=u.y.number(w,P,Ve)),this._pitching&&(d.pitch=u.y.number(C,R,Ve)),this._padding&&(d.interpolatePadding(T,D,Ve),Y=d.centerPoint.add(j)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ve),xe)d.setLocationAtPoint(xe,Se);else{const Ye=d.zoomScale(d.zoom-y),it=ue>y?Math.min(2,ie):Math.max(.5,ie),ct=Math.pow(it,1-Ve),tt=d.unproject(de.add(me.mult(Ve*ct)).mult(Ye));d.setLocationAtPoint(d.renderWorldCopies?tt.wrap():tt,Y)}this._applyUpdatedTransform(d),this._fireMoveEvents(a)},Ve=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(a,Ve)},r),this}_prepareEase(r,a,h={}){this._moving=!0,a||h.moving||this.fire(new u.k("movestart",r)),this._zooming&&!h.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!h.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!h.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&a!==this._elevationTarget){const h=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(h-(a-(h*r+this._elevationStart))/(1-r)),this._elevationTarget=a}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){const a=r.getCameraPosition(),h=this.terrain.getElevationForLngLatZoom(a.lngLat,r.zoom);if(a.altitude<h){const d=this.calculateCameraOptionsFromTo(a.lngLat,h,r.center,r.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(r){const a=[];if(this.terrain&&a.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&a.push(d=>this.transformCameraUpdate(d)),!a.length)return;const h=r.clone();for(const d of a){const y=h.clone(),{center:w,zoom:C,pitch:T,bearing:P,elevation:R}=d(y);w&&(y.center=w),C!==void 0&&(y.zoom=C),T!==void 0&&(y.pitch=T),P!==void 0&&(y.bearing=P),R!==void 0&&(y.elevation=R),h.apply(y)}this.transform.apply(h)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const h=this._zooming,d=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new u.k("zoomend",r)),d&&this.fire(new u.k("rotateend",r)),y&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,a){var h;if(!r.essential&&L.prefersReducedMotion){const st=u.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(st,a)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},r);const d=this._getTransformForUpdate(),y=d.zoom,w=d.bearing,C=d.pitch,T=d.padding,P="bearing"in r?this._normalizeBearing(r.bearing,w):w,R="pitch"in r?+r.pitch:C,D="padding"in r?r.padding:d.padding,j=u.P.convert(r.offset);let Y=d.centerPoint.add(j);const te=d.pointLocation(Y),{center:ae,zoom:ue}=d.getConstrained(u.N.convert(r.center||te),(h=r.zoom)!==null&&h!==void 0?h:y);this._normalizeCenter(ae,d);const de=d.zoomScale(ue-y),me=d.project(te),ie=d.project(ae).sub(me);let xe=r.curve;const Se=Math.max(d.width,d.height),Pe=Se/de,Ve=ie.mag();if("minZoom"in r){const st=u.ac(Math.min(r.minZoom,y,ue),d.minZoom,d.maxZoom),Lt=Se/d.zoomScale(st-y);xe=Math.sqrt(Lt/Ve*2)}const Ye=xe*xe;function it(st){const Lt=(Pe*Pe-Se*Se+(st?-1:1)*Ye*Ye*Ve*Ve)/(2*(st?Pe:Se)*Ye*Ve);return Math.log(Math.sqrt(Lt*Lt+1)-Lt)}function ct(st){return(Math.exp(st)-Math.exp(-st))/2}function tt(st){return(Math.exp(st)+Math.exp(-st))/2}const et=it(!1);let mt=function(st){return tt(et)/tt(et+xe*st)},Ot=function(st){return Se*((tt(et)*(ct(Lt=et+xe*st)/tt(Lt))-ct(et))/Ye)/Ve;var Lt},rt=(it(!0)-et)/xe;if(Math.abs(Ve)<1e-6||!isFinite(rt)){if(Math.abs(Se-Pe)<1e-6)return this.easeTo(r,a);const st=Pe<Se?-1:1;rt=Math.abs(Math.log(Pe/Se))/xe,Ot=()=>0,mt=Lt=>Math.exp(st*xe*Lt)}return r.duration="duration"in r?+r.duration:1e3*rt/("screenSpeed"in r?+r.screenSpeed/xe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=w!==P,this._pitching=R!==C,this._padding=!d.isPaddingEqual(D),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(ae),this._ease(st=>{const Lt=st*rt,jr=1/mt(Lt);d.zoom=st===1?ue:y+d.scaleZoom(jr),this._rotating&&(d.bearing=u.y.number(w,P,st)),this._pitching&&(d.pitch=u.y.number(C,R,st)),this._padding&&(d.interpolatePadding(T,D,st),Y=d.centerPoint.add(j)),this.terrain&&!r.freezeElevation&&this._updateElevation(st);const Wt=st===1?ae:d.unproject(me.add(ie.mult(Ot(Lt))).mult(jr));d.setLocationAtPoint(d.renderWorldCopies?Wt.wrap():Wt,Y),this._applyUpdatedTransform(d),this._fireMoveEvents(a)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,a){var h;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,a)}return r||(h=this.handlers)===null||h===void 0||h.stop(!1),this}_ease(r,a,h){h.animate===!1||h.duration===0?(r(1),a()):(this._easeStart=L.now(),this._easeOptions=h,this._onEaseFrame=r,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,a){r=u.b3(r,-180,180);const h=Math.abs(r-a);return Math.abs(r-360-a)<h&&(r-=360),Math.abs(r+360-a)<h&&(r+=360),r}_normalizeCenter(r,a){if(!a.renderWorldCopies||a.lngRange)return;const h=r.lng-a.center.lng;r.lng+=h>180?-360:h<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const ma={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ga{constructor(r=ma){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=z.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=z.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,a){const h=this._map._getUIString(`AttributionControl.${a}`);r.title=h,r.setAttribute("aria-label",h)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}const a=this._map.style.sourceCaches;for(const d in a){const y=a[d];if(y.used||y.usedForTerrain){const w=y.getSource();w.attribution&&r.indexOf(w.attribution)<0&&r.push(w.attribution)}}r=r.filter(d=>String(d).trim()),r.sort((d,y)=>d.length-y.length),r=r.filter((d,y)=>{for(let w=y+1;w<r.length;w++)if(r[w].indexOf(d)>=0)return!1;return!0});const h=r.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,r.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Mh{constructor(r={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const h=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact"):h.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=z.create("div","maplibregl-ctrl");const a=z.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){z.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ir{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const a=++this._id;return this._queue.push({callback:r,id:a,cancelled:!1}),a}remove(r){const a=this._currentlyRunning,h=a?this._queue.concat(a):this._queue;for(const d of h)if(d.id===r)return void(d.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const h of a)if(!h.cancelled&&(h.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ah=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class dy extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,a){this.sourceCache.update(r,a),this._renderableTilesKeys=[];const h={};for(const d of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))h[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),u.aP(d.posMatrix,0,u.X,0,u.X,0,1),this._tiles[d.key]=new $r(d,this.tileSize));for(const d in this._tiles)h[d]||delete this._tiles[d]}freeRtt(r){for(const a in this._tiles){const h=this._tiles[a];(!r||h.tileID.equals(r)||h.tileID.isChildOf(r)||r.isChildOf(h.tileID))&&(h.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const a={};for(const h of this._renderableTilesKeys){const d=this._tiles[h].tileID;if(d.canonical.equals(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16),u.aP(y.posMatrix,0,u.X,0,u.X,0,1),a[h]=y}else if(d.canonical.isChildOf(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const w=d.canonical.z-r.canonical.z,C=d.canonical.x-(d.canonical.x>>w<<w),T=d.canonical.y-(d.canonical.y>>w<<w),P=u.X>>w;u.aP(y.posMatrix,0,P,0,P,0,1),u.J(y.posMatrix,y.posMatrix,[-C*P,-T*P,0]),a[h]=y}else if(r.canonical.isChildOf(d.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const w=r.canonical.z-d.canonical.z,C=r.canonical.x-(r.canonical.x>>w<<w),T=r.canonical.y-(r.canonical.y>>w<<w),P=u.X>>w;u.aP(y.posMatrix,0,u.X,0,u.X,0,1),u.J(y.posMatrix,y.posMatrix,[C*P,T*P,0]),u.K(y.posMatrix,y.posMatrix,[1/2**w,1/2**w,0]),a[h]=y}}return a}getSourceTile(r,a){const h=this.sourceCache._source;let d=r.overscaledZ-this.deltaZoom;if(d>h.maxzoom&&(d=h.maxzoom),d<h.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(d).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!y||!y.dem)&&a)for(;d>=h.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(r.scaledTo(d--).key);return y}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=r)}}class zh{constructor(r,a,h){this.painter=r,this.sourceCache=new dy(a),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,a,h,d=u.X){var y;if(!(a>=0&&a<d&&h>=0&&h<d))return 0;const w=this.getTerrainData(r),C=(y=w.tile)===null||y===void 0?void 0:y.dem;if(!C)return 0;const T=function(te,ae,ue){var de=ae[0],me=ae[1];return te[0]=ue[0]*de+ue[4]*me+ue[12],te[1]=ue[1]*de+ue[5]*me+ue[13],te}([],[a/d*u.X,h/d*u.X],w.u_terrain_matrix),P=[T[0]*C.dim,T[1]*C.dim],R=Math.floor(P[0]),D=Math.floor(P[1]),j=P[0]-R,Y=P[1]-D;return C.get(R,D)*(1-j)*(1-Y)+C.get(R+1,D)*j*(1-Y)+C.get(R,D+1)*(1-j)*Y+C.get(R+1,D+1)*j*Y}getElevationForLngLatZoom(r,a){if(!u.bb(a,r.wrap()))return 0;const{tileID:h,mercatorX:d,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(r,a);return this.getElevation(h,d%u.X,y%u.X,u.X)}getElevation(r,a,h,d=u.X){return this.getDEMElevation(r,a,h,d)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const d=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new De(d,y,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new De(d,new u.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const a=this.sourceCache.getSourceTile(r,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const d=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new De(d,a.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),a.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const h=a&&a+a.tileID.key+r.key;if(h&&!this._demMatrixCache[h]){const d=this.sourceCache.sourceCache._source.maxzoom;let y=r.canonical.z-a.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=d?y=r.canonical.z-d:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=r.canonical.x-(r.canonical.x>>y<<y),C=r.canonical.y-(r.canonical.y>>y<<y),T=u.bc(new Float64Array(16),[1/(u.X<<y),1/(u.X<<y),0]);u.J(T,T,[w*u.X,C*u.X,0]),this._demMatrixCache[r.key]={matrix:T,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(r){const a=this.painter,h=a.width/devicePixelRatio,d=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new De(a.context,{width:h,height:d,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new De(a.context,{width:h,height:d,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(h,d,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,h,d))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,w=0;y<this._coordsTextureSize;y++)for(let C=0;C<this._coordsTextureSize;C++,w+=4)a[w+0]=255&C,a[w+1]=255&y,a[w+2]=C>>8<<4|y>>8,a[w+3]=0;const h=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),d=new De(r,h,r.gl.RGBA,{premultiply:!1});return d.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),h=this.painter.context,d=h.gl,y=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);h.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(y,C-w-1,1,1,d.RGBA,d.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null);const T=a[0]+(a[2]>>4<<8),P=a[1]+((15&a[2])<<8),R=this.coordsIndex[255-a[3]],D=R&&this.sourceCache.getTileByID(R);if(!D)return null;const j=this._coordsTextureSize,Y=(1<<D.tileID.canonical.z)*j;return new u.Z((D.tileID.canonical.x*j+T)/Y+D.tileID.wrap,(D.tileID.canonical.y*j+P)/Y,this.getElevation(D.tileID,T,P,j))}depthAtPoint(r){const a=new Uint8Array(4),h=this.painter.context,d=h.gl;return h.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,a),h.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,a=new u.bd,h=new u.aY,d=this.meshSize,y=u.X/d,w=d*d;for(let D=0;D<=d;D++)for(let j=0;j<=d;j++)a.emplaceBack(j*y,D*y,0);for(let D=0;D<w;D+=d+1)for(let j=0;j<d;j++)h.emplaceBack(j+D,d+j+D+1,d+j+D+2),h.emplaceBack(j+D,d+j+D+2,j+D+1);const C=a.length,T=C+2*(d+1);for(const D of[0,1])for(let j=0;j<=d;j++)for(const Y of[0,1])a.emplaceBack(j*y,D*u.X,Y);for(let D=0;D<2*d;D+=2)h.emplaceBack(T+D,T+D+1,T+D+3),h.emplaceBack(T+D,T+D+3,T+D+2),h.emplaceBack(C+D,C+D+3,C+D+1),h.emplaceBack(C+D,C+D+2,C+D+3);const P=a.length,R=P+2*(d+1);for(const D of[0,1])for(let j=0;j<=d;j++)for(const Y of[0,1])a.emplaceBack(D*u.X,j*y,Y);for(let D=0;D<2*d;D+=2)h.emplaceBack(P+D,P+D+1,P+D+3),h.emplaceBack(P+D,P+D+3,P+D+2),h.emplaceBack(R+D,R+D+3,R+D+1),h.emplaceBack(R+D,R+D+2,R+D+3);return this._mesh=new mc(r.createVertexBuffer(a,Ah.members),r.createIndexBuffer(h),u.a0.simpleSegment(0,0,a.length,h.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,a){var h;const{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(r,a);return(h=this.getMinMaxElevation(d).minElevation)!==null&&h!==void 0?h:0}getMinMaxElevation(r){const a=this.getTerrainData(r).tile,h={minElevation:null,maxElevation:null};return a&&a.dem&&(h.minElevation=a.dem.min*this.exaggeration,h.maxElevation=a.dem.max*this.exaggeration),h}_getOverscaledTileIDFromLngLatZoom(r,a){const h=u.Z.fromLngLat(r.wrap()),d=(1<<a)*u.X,y=h.x*d,w=h.y*d,C=Math.floor(y/u.X),T=Math.floor(w/u.X);return{tileID:new u.S(a,0,a,C,T),mercatorX:y,mercatorY:w}}}class py{constructor(r,a,h){this._context=r,this._size=a,this._tileSize=h,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),h=new De(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return h.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(h.texture),{id:r,fbo:a,texture:h,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>r.id!==a),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ya={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Kp{constructor(r,a){this.painter=r,this.terrain=a,this.pool=new py(r.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(h=>!r._layers[h].isHidden(a)),this._coordsDescendingInv={};for(const h in r.sourceCaches){this._coordsDescendingInv[h]={};const d=r.sourceCaches[h].getVisibleCoordinates();for(const y of d){const w=this.terrain.sourceCache.getTerrainCoords(y);for(const C in w)this._coordsDescendingInv[h][C]||(this._coordsDescendingInv[h][C]=[]),this._coordsDescendingInv[h][C].push(w[C])}}this._coordsDescendingInvStr={};for(const h of r._order){const d=r._layers[h],y=d.source;if(ya[d.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const w in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][w]=this._coordsDescendingInv[y][w].map(C=>C.key).sort().join()}}for(const h of this._renderableTiles)for(const d in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[d][h.tileID.key];y&&y!==h.rttCoords[d]&&(h.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const a=r.type,h=this.painter,d=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ya[a]&&(this._prevType&&ya[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(r.id),!d))return!0;if(ya[this._prevType]||ya[a]&&d){this._prevType=a;const y=this._stacks.length-1,w=this._stacks[y]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(Vp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[y]){const P=this.pool.getObjectForId(C.rtt[y].id);if(P.stamp===C.rtt[y].stamp){this.pool.useObject(P);continue}}const T=this.pool.getOrCreateFreeObject();this.pool.useObject(T),this.pool.stampObject(T),C.rtt[y]={id:T.id,stamp:T.stamp},h.context.bindFramebuffer.set(T.fbo.framebuffer),h.context.clear({color:u.aM.transparent,stencil:0}),h.currentStencilSource=void 0;for(let P=0;P<w.length;P++){const R=h.style._layers[w[P]],D=R.source?this._coordsDescendingInv[R.source][C.tileID.key]:[C.tileID];h.context.viewport.set([0,0,T.fbo.width,T.fbo.height]),h._renderTileClippingMasks(R,D),h.renderLayer(h,h.style.sourceCaches[R.source],R,D),R.source&&(C.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][C.tileID.key])}}return Vp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ya[a]}return!1}}const Rh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Yp=I,fy={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ma,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Dh=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},my={showCompass:!0,showZoom:!0,visualizePitch:!1};class gy{constructor(r,a,h=!1){this.mousedown=w=>{this.startMouse(u.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),z.mousePos(this.element,w)),z.addEventListener(window,"mousemove",this.mousemove),z.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,z.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=z.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),z.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=z.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const d=r.dragRotate._mouseRotate.getClickTolerance(),y=r.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=bh({clickTolerance:d,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:C,bearingDegreesPerPixelMoved:T=.8})=>{const P=new xh;return new Lo({clickTolerance:C,move:(R,D)=>({bearingDelta:(D.x-R.x)*T}),moveStateManager:P,enable:w,assignEvents:Dh})})({clickTolerance:d,enable:!0}),this.map=r,h&&(this.mousePitch=wh({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:C,pitchDegreesPerPixelMoved:T=-.5})=>{const P=new xh;return new Lo({clickTolerance:C,move:(R,D)=>({pitchDelta:(D.y-R.y)*T}),moveStateManager:P,enable:w,assignEvents:Dh})})({clickTolerance:y,enable:!0})),z.addEventListener(a,"mousedown",this.mousedown),z.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),z.addEventListener(a,"touchcancel",this.reset)}startMouse(r,a){this.mouseRotate.dragStart(r,a),this.mousePitch&&this.mousePitch.dragStart(r,a),z.disableDrag()}startTouch(r,a){this.touchRotate.dragStart(r,a),this.touchPitch&&this.touchPitch.dragStart(r,a),z.disableDrag()}moveMouse(r,a){const h=this.map,{bearingDelta:d}=this.mouseRotate.dragMove(r,a)||{};if(d&&h.setBearing(h.getBearing()+d),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(r,a)||{};y&&h.setPitch(h.getPitch()+y)}}moveTouch(r,a){const h=this.map,{bearingDelta:d}=this.touchRotate.dragMove(r,a)||{};if(d&&h.setBearing(h.getBearing()+d),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(r,a)||{};y&&h.setPitch(h.getPitch()+y)}}off(){const r=this.element;z.removeEventListener(r,"mousedown",this.mousedown),z.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend),z.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){z.enableDrag(),z.removeEventListener(window,"mousemove",this.mousemove),z.removeEventListener(window,"mouseup",this.mouseup),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend)}}let Si;function Nr(_,r,a){const h=new u.N(_.lng,_.lat);if(_=new u.N(_.lng,_.lat),r){const d=new u.N(_.lng-360,_.lat),y=new u.N(_.lng+360,_.lat),w=a.locationPoint(_).distSqr(r);a.locationPoint(d).distSqr(r)<w?_=d:a.locationPoint(y).distSqr(r)<w&&(_=y)}for(;Math.abs(_.lng-a.center.lng)>180;){const d=a.locationPoint(_);if(d.x>=0&&d.y>=0&&d.x<=a.width&&d.y<=a.height)break;_.lng>a.center.lng?_.lng-=360:_.lng+=360}return _.lng!==h.lng&&a.locationPoint(_).y>a.height/2-a.getHorizon()?_:h}const _a={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kc(_,r,a){const h=_.classList;for(const d in _a)h.remove(`maplibregl-${a}-anchor-${d}`);h.add(`maplibregl-${a}-anchor-${r}`)}class Ic extends u.E{constructor(r){if(super(),this._onKeyPress=a=>{const h=a.code,d=a.charCode||a.keyCode;h!=="Space"&&h!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=a=>{const h=a.originalEvent.target,d=this._element;this._popup&&(h===d||d.contains(h))&&this.togglePopup()},this._update=a=>{var h;if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Nr(this._lngLat,this._flatPos,this._map.transform):(h=this._lngLat)===null||h===void 0?void 0:h.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),z.setTransform(this._element,`${_a[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${y}`),L.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=z.create("div");const a=z.createNS("http://www.w3.org/2000/svg","svg"),h=41,d=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${h}px`),a.setAttributeNS(null,"width",`${d}px`),a.setAttributeNS(null,"viewBox",`0 0 ${d} ${h}`);const y=z.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const w=z.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const C=z.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const T=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const de of T){const me=z.createNS("http://www.w3.org/2000/svg","ellipse");me.setAttributeNS(null,"opacity","0.04"),me.setAttributeNS(null,"cx","10.5"),me.setAttributeNS(null,"cy","5.80029008"),me.setAttributeNS(null,"rx",de.rx),me.setAttributeNS(null,"ry",de.ry),C.appendChild(me)}const P=z.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill",this._color);const R=z.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),P.appendChild(R);const D=z.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"opacity","0.25"),D.setAttributeNS(null,"fill","#000000");const j=z.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),D.appendChild(j);const Y=z.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const te=z.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ae=z.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");const ue=z.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),te.appendChild(ae),te.appendChild(ue),w.appendChild(C),w.appendChild(P),w.appendChild(D),w.appendChild(Y),w.appendChild(te),a.appendChild(w),a.setAttributeNS(null,"height",h*this._scale+"px"),a.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(a),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),kc(this._element,this._anchor,"marker"),r&&r.className)for(const a of r.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),z.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const d=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var a,h;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const d=this._map,y=d.terrain.depthAtPoint(this._pos),w=d.terrain.getElevationForLngLatZoom(this._lngLat,d.transform.tileZoom);if(d.transform.lngLatToCameraDepth(this._lngLat,w)-y<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/d.transform._pixelPerMeter,T=Math.sin(d.getPitch()*Math.PI/180)*C,P=d.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),R=d.transform.lngLatToCameraDepth(this._lngLat,w+T)-P>.006;!((h=this._popup)===null||h===void 0)&&h.isOpen()&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,a){return r===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const Jp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let yl=0,_l=!1;const vo={maxWidth:100,unit:"metric"};function vl(_,r,a){const h=a&&a.maxWidth||100,d=_._container.clientHeight/2,y=_.unproject([0,d]),w=_.unproject([h,d]),C=y.distanceTo(w);if(a&&a.unit==="imperial"){const T=3.2808*C;T>5280?ft(r,h,T/5280,_._getUIString("ScaleControl.Miles")):ft(r,h,T,_._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?ft(r,h,C/1852,_._getUIString("ScaleControl.NauticalMiles")):C>=1e3?ft(r,h,C/1e3,_._getUIString("ScaleControl.Kilometers")):ft(r,h,C,_._getUIString("ScaleControl.Meters"))}function ft(_,r,a,h){const d=function(y){const w=Math.pow(10,`${Math.floor(y)}`.length-1);let C=y/w;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(T){const P=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*P)/P}(C),w*C}(a);_.style.width=r*(d/a)+"px",_.innerHTML=`${d}&nbsp;${h}`}const Mt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Ec=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Pc(_){if(_){if(typeof _=="number"){const r=Math.round(Math.abs(_)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,_),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-_),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(_,0),right:new u.P(-_,0)}}if(_ instanceof u.P||Array.isArray(_)){const r=u.P.convert(_);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(_.center||[0,0]),top:u.P.convert(_.top||[0,0]),"top-left":u.P.convert(_["top-left"]||[0,0]),"top-right":u.P.convert(_["top-right"]||[0,0]),bottom:u.P.convert(_.bottom||[0,0]),"bottom-left":u.P.convert(_["bottom-left"]||[0,0]),"bottom-right":u.P.convert(_["bottom-right"]||[0,0]),left:u.P.convert(_.left||[0,0]),right:u.P.convert(_.right||[0,0])}}return Pc(new u.P(0,0))}const Lh=I;g.AJAXError=u.bh,g.Evented=u.E,g.LngLat=u.N,g.MercatorCoordinate=u.Z,g.Point=u.P,g.addProtocol=u.bi,g.config=u.a,g.removeProtocol=u.bj,g.AttributionControl=ga,g.BoxZoomHandler=wi,g.CanvasSource=un,g.CooperativeGesturesHandler=fa,g.DoubleClickZoomHandler=As,g.DragPanHandler=qp,g.DragRotateHandler=Zp,g.EdgeInsets=ha,g.FullscreenControl=class extends u.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var r;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=a==null?void 0:a.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){z.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=z.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);z.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},g.GeoJSONSource=xr,g.GeolocateControl=class extends u.E{constructor(_){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const a=new u.N(r.coords.longitude,r.coords.latitude),h=r.coords.accuracy,d=this._map.getBearing(),y=u.e({bearing:d},this.options.fitBoundsOptions),w=ze.fromLngLat(a,h);this._map.fitBounds(w,y,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const a=new u.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&_l)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=z.create("button","maplibregl-ctrl-geolocate",this._container),z.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ic({element:this._dotElement}),this._circleElement=z.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ic({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},Jp,_)}onAdd(_){return this._map=_,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(r=!1){if(Si!==void 0&&!r)return Si;if(window.navigator.permissions===void 0)return Si=!!window.navigator.geolocation,Si;try{Si=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Si=!!window.navigator.geolocation}return Si})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),z.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,yl=0,_l=!1}_isOutOfMapMaxBounds(_){const r=this._map.getMaxBounds(),a=_.coords;return r&&(a.longitude<r.getWest()||a.longitude>r.getEast()||a.latitude<r.getSouth()||a.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),r=_.getSouthEast(),a=_.getNorthEast(),h=r.distanceTo(a),d=Math.ceil(this._accuracy/(h/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":yl--,_l=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),yl++,yl>1?(_={maximumAge:6e5,timeout:0},_l=!0):(_=this.options.positionOptions,_l=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},g.Hash=yc,g.ImageSource=_n,g.KeyboardHandler=Fi,g.LngLatBounds=ze,g.LogoControl=Mh,g.Map=class extends Xp{constructor(_){u.bf.mark(u.bg.create);const r=Object.assign(Object.assign({},fy),_);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new da(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ir,this._controls=[],this._mapId=u.a4(),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Rh),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new Q(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const h=hl(d=>{this._trackResize&&!this._removed&&(this.resize(d),this.redraw())},50);this._resizeObserver=new ResizeObserver(d=>{a?h(d):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ph(this,r),this._hash=r.hash&&new yc(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,u.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new ga(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Mh,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new u.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new u.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new u.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(_,r){if(r===void 0&&(r=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=_.onAdd(this);this._controls.push(_);const h=this._controlPositions[r];return r.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(_);return r>-1&&this._controls.splice(r,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,r,a,h){return h==null&&this.terrain&&(h=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,r,a,h)}resize(_){var r;const a=this._containerDimensions(),h=a[0],d=a[1],y=this._getClampedPixelRatio(h,d);if(this._resizeCanvas(h,d,y),this.painter.resize(h,d,y),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const T=this._getClampedPixelRatio(h,d);this._resizeCanvas(h,d,T),this.painter.resize(h,d,T)}this.transform.resize(h,d),(r=this._requestedCameraState)===null||r===void 0||r.resize(h,d);const w=!this._moving;return w&&(this.stop(),this.fire(new u.k("movestart",_)).fire(new u.k("move",_))),this.fire(new u.k("resize",_)),w&&this.fire(new u.k("moveend",_)),this}_getClampedPixelRatio(_,r){const{0:a,1:h}=this._maxCanvasSize,d=this.getPixelRatio(),y=_*d,w=r*d;return Math.min(y>a?a/y:1,w>h?h/w:1)*d}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(ze.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(u.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(u.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,r,a){if(_==="mouseenter"||_==="mouseover"){let h=!1;return{layers:r,listener:a,delegates:{mousemove:y=>{const w=r.filter(T=>this.getLayer(T)),C=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];C.length?h||(h=!0,a.call(this,new Bn(_,this,y.originalEvent,{features:C}))):h=!1},mouseout:()=>{h=!1}}}}if(_==="mouseleave"||_==="mouseout"){let h=!1;return{layers:r,listener:a,delegates:{mousemove:w=>{const C=r.filter(T=>this.getLayer(T));(C.length!==0?this.queryRenderedFeatures(w.point,{layers:C}):[]).length?h=!0:h&&(h=!1,a.call(this,new Bn(_,this,w.originalEvent)))},mouseout:w=>{h&&(h=!1,a.call(this,new Bn(_,this,w.originalEvent)))}}}}{const h=d=>{const y=r.filter(C=>this.getLayer(C)),w=y.length!==0?this.queryRenderedFeatures(d.point,{layers:y}):[];w.length&&(d.features=w,a.call(this,d),delete d.features)};return{layers:r,listener:a,delegates:{[_]:h}}}}_saveDelegatedListener(_,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(r)}_removeDelegatedListener(_,r,a){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const h=this._delegatedListeners[_];for(let d=0;d<h.length;d++){const y=h[d];if(y.listener===a&&y.layers.length===r.length&&y.layers.every(w=>r.includes(w))){for(const w in y.delegates)this.off(w,y.delegates[w]);return void h.splice(d,1)}}}on(_,r,a){if(a===void 0)return super.on(_,r);const h=this._createDelegatedListener(_,typeof r=="string"?[r]:r,a);this._saveDelegatedListener(_,h);for(const d in h.delegates)this.on(d,h.delegates[d]);return this}once(_,r,a){if(a===void 0)return super.once(_,r);const h=typeof r=="string"?[r]:r,d=this._createDelegatedListener(_,h,a);for(const y in d.delegates){const w=d.delegates[y];d.delegates[y]=(...C)=>{this._removeDelegatedListener(_,h,a),w(...C)}}this._saveDelegatedListener(_,d);for(const y in d.delegates)this.once(y,d.delegates[y]);return this}off(_,r,a){return a===void 0?super.off(_,r):(this._removeDelegatedListener(_,typeof r=="string"?[r]:r,a),this)}queryRenderedFeatures(_,r){if(!this.style)return[];let a;const h=_ instanceof u.P||Array.isArray(_),d=h?_:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(h?{}:_)||{},d instanceof u.P||typeof d[0]=="number")a=[u.P.convert(d)];else{const y=u.P.convert(d[0]),w=u.P.convert(d[1]);a=[y,new u.P(w.x,y.y),w,new u.P(y.x,w.y),y]}return this.style.queryRenderedFeatures(a,r,this.transform)}querySourceFeatures(_,r){return this.style.querySourceFeatures(_,r)}setStyle(_,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(_,r))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const r=this._locale[_];if(r==null)throw new Error(`Missing UI string '${_}'`);return r}_updateStyle(_,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,r));const a=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new ec(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,r,a):this.style.loadJSON(_,r,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ec(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,r){if(typeof _=="string"){const a=this._requestManager.transformRequest(_,"Style");u.h(a,new AbortController).then(h=>{this._updateDiff(h.data,r)}).catch(h=>{h&&this.fire(new u.j(h))})}else typeof _=="object"&&this._updateDiff(_,r)}_updateDiff(_,r){try{this.style.setState(_,r)&&this._update(!0)}catch(a){u.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(_,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(_,r){return this._lazyInitEmptyStyle(),this.style.addSource(_,r),this._update(!0)}isSourceLoaded(_){const r=this.style&&this.style.sourceCaches[_];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const r=this.style.sourceCaches[_.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&r.reload();for(const a in this.style._layers){const h=this.style._layers[a];h.type==="hillshade"&&h.source===_.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new zh(this.painter,r,_),this.painter.renderToTexture=new Kp(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:_})),this}getTerrain(){var _,r;return(r=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const r in _){const a=_[r]._tiles;for(const h in a){const d=a[h];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,r,a={}){const{pixelRatio:h=1,sdf:d=!1,stretchX:y,stretchY:w,content:C,textFitWidth:T,textFitHeight:P}=a;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:D,data:j}=r,Y=r;return this.style.addImage(_,{data:new u.R({width:R,height:D},new Uint8Array(j)),pixelRatio:h,stretchX:y,stretchY:w,content:C,textFitWidth:T,textFitHeight:P,sdf:d,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,_),this}}{const{width:R,height:D,data:j}=L.getImageData(r);this.style.addImage(_,{data:new u.R({width:R,height:D},j),pixelRatio:h,stretchX:y,stretchY:w,content:C,textFitWidth:T,textFitHeight:P,sdf:d,version:0})}}updateImage(_,r){const a=this.style.getImage(_);if(!a)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=r instanceof HTMLImageElement||u.b(r)?L.getImageData(r):r,{width:d,height:y,data:w}=h;if(d===void 0||y===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==a.data.width||y!==a.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(r instanceof HTMLImageElement||u.b(r));return a.data.replace(w,C),this.style.updateImage(_,a),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return G.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,r){return this._lazyInitEmptyStyle(),this.style.addLayer(_,r),this._update(!0)}moveLayer(_,r){return this.style.moveLayer(_,r),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,r,a){return this.style.setLayerZoomRange(_,r,a),this._update(!0)}setFilter(_,r,a={}){return this.style.setFilter(_,r,a),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,r,a,h={}){return this.style.setPaintProperty(_,r,a,h),this._update(!0)}getPaintProperty(_,r){return this.style.getPaintProperty(_,r)}setLayoutProperty(_,r,a,h={}){return this.style.setLayoutProperty(_,r,a,h),this._update(!0)}getLayoutProperty(_,r){return this.style.getLayoutProperty(_,r)}setGlyphs(_,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,r,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,r,a,h=>{h||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,r,a=>{a||this._update(!0)}),this}setLight(_,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,r){return this.style.setFeatureState(_,r),this._update()}removeFeatureState(_,r){return this.style.removeFeatureState(_,r),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,r=0;return this._container&&(_=this._container.clientWidth||400,r=this._container.clientHeight||300),[_,r]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const r=this._canvasContainer=z.create("div","maplibregl-canvas-container",_);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=z.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),h=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],h);const d=this._controlContainer=z.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{y[w]=z.create("div",`maplibregl-ctrl-${w} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,r,a){this._canvas.width=Math.floor(a*_),this._canvas.height=Math.floor(a*r),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",h=>{r={requestedAttributes:_},h&&(r.statusMessage=h.statusMessage,r.type=h.type)},{once:!0});const a=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!a){const h="Failed to initialize WebGL";throw r?(r.message=h,new Error(JSON.stringify(r))):new Error(h)}this.painter=new gc(a,this.transform),J.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const d=this.transform.zoom,y=L.now();this.style.zoomHistory.update(d,y);const w=new u.z(d,{now:y,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=w.crossFadingFactor();C===1&&C===this._crossFadingFactor||(a=!0,this._crossFadingFactor=C),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bf.mark(u.bg.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0,u.bf.mark(u.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),z.remove(this._canvasContainer),z.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bf.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,L.frameAsync(this._frameRequest).then(_=>{u.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return Yp}getCameraTargetElevation(){return this.transform.elevation}},g.MapMouseEvent=Bn,g.MapTouchEvent=Ps,g.MapWheelEvent=Wp,g.Marker=Ic,g.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const r=this._map.getZoom(),a=r===this._map.getMaxZoom(),h=r===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,a)=>{const h=this._map._getUIString(`NavigationControl.${a}`);r.title=h,r.setAttribute("aria-label",h)},this.options=u.e({},my,_),this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),z.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),z.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=z.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new gy(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){z.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,r){const a=z.create("button",_,this._container);return a.type="button",a.addEventListener("click",r),a}},g.Popup=class extends u.E{constructor(_){super(),this.remove=()=>(this._content&&z.remove(this._content),this._container&&(z.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=z.create("div","maplibregl-popup",this._map.getContainer()),this._tip=z.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Nr(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!r)return;const h=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let d=this.options.anchor;const y=Pc(this.options.offset);if(!d){const C=this._container.offsetWidth,T=this._container.offsetHeight;let P;P=h.y+y.bottom.y<T?["top"]:h.y>this._map.transform.height-T?["bottom"]:[],h.x<C/2?P.push("left"):h.x>this._map.transform.width-C/2&&P.push("right"),d=P.length===0?"bottom":P.join("-")}let w=h.add(y[d]);this.options.subpixelPositioning||(w=w.round()),z.setTransform(this._container,`${_a[d]} translate(${w.x}px,${w.y}px)`),kc(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Mt),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=u.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const r=document.createDocumentFragment(),a=document.createElement("body");let h;for(a.innerHTML=_;h=a.firstChild,h;)r.appendChild(h);return this.setDOMContent(r)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=z.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=z.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Ec);_&&_.focus()}},g.RasterDEMTileSource=er,g.RasterTileSource=At,g.ScaleControl=class{constructor(_){this._onMove=()=>{vl(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,vl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},vo),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){z.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},g.ScrollZoomHandler=Qi,g.Style=ec,g.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=z.create("button","maplibregl-ctrl-terrain",this._container),z.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){z.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},g.TwoFingersTouchPitchHandler=gl,g.TwoFingersTouchRotateHandler=kh,g.TwoFingersTouchZoomHandler=Ch,g.TwoFingersTouchZoomRotateHandler=Eh,g.VectorTileSource=Cr,g.VideoSource=Tr,g.addSourceType=(_,r)=>u._(void 0,void 0,void 0,function*(){if(Ln(_))throw new Error(`A source type called "${_}" already exists.`);((a,h)=>{En[a]=h})(_,r)}),g.clearPrewarmedResources=function(){const _=Rt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Dt),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},g.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},g.getRTLTextPluginStatus=function(){return zt().getRTLTextPluginStatus()},g.getVersion=function(){return Lh},g.getWorkerCount=function(){return $t.workerCount},g.getWorkerUrl=function(){return u.a.WORKER_URL},g.importScriptInWorkers=function(_){return qt().broadcast("IS",_)},g.prewarm=function(){Ut().acquire(Dt)},g.setMaxParallelImageRequests=function(_){u.a.MAX_PARALLEL_IMAGE_REQUESTS=_},g.setRTLTextPlugin=function(_,r){return zt().setRTLTextPlugin(_,r)},g.setWorkerCount=function(_){$t.workerCount=_},g.setWorkerUrl=function(_){u.a.WORKER_URL=_}});var m=o;return m})})(QT);var Z5=QT.exports;const Wf=nx(Z5),l2=["red","blue","green","purple","orange","darkred","darkblue","darkgreen","cadetblue","pink","black","gray"],c2=[{sides:3,rotation:0},{sides:4,rotation:45},{sides:5,rotation:0},{sides:6,rotation:0},{sides:8,rotation:0},{sides:3,rotation:180},{sides:4,rotation:0}];function X5(e){const t=e.trim().split(`
`),o=t[0].split(",").map(l=>l.trim());return t.slice(1).map(l=>{const p=K5(l),m={};return o.forEach((g,u)=>{m[g]=p[u]||""}),m})}function K5(e){const t=[];let o="",l=!1;for(let p=0;p<e.length;p++){const m=e[p];m==='"'?l=!l:m===","&&!l?(t.push(o.trim()),o=""):o+=m}return t.push(o.trim()),t}async function Y5(e="/tree_data.csv",t={}){const{photosUrl:o=""}=t;try{const l=await fetch(e);if(!l.ok)throw new Error(`Failed to load CSV: ${l.statusText}`);const p=await l.text(),m=X5(p),g=[...new Set(m.map(M=>M.genus).filter(M=>M))],u={};return g.forEach((M,F)=>{u[M]={color:l2[F%l2.length],shape:c2[F%c2.length]}}),{trees:m.map(M=>{const F=M.genus||"Unknown",L=u[F]||{color:"gray",shape:{sides:4,rotation:0}};let z=null;const J=parseFloat(M.crownNSm||M.crownNS),H=parseFloat(M.crownEWm||M.crownEW);!isNaN(J)&&!isNaN(H)?z=(J+H)/4*5:isNaN(J)?isNaN(H)||(z=H/2*5):z=J/2*5;const re=M.treecode||M.treeCode||"",le=re&&o?`${o}/${re}.jpg`:null;return{treeCode:M.treecode||M.treeCode||"",lat:parseFloat(M.lat),lon:parseFloat(M.lon),genus:M.genus||"",species:M.species||"",dbh:M.dbh||"",height:M.height||"",crownNS:J||null,crownEW:H||null,crownRadius:z,color:L.color,shape:L.shape,photoUrl:le}}),genusStyles:u}}catch(l){throw console.error("Error loading tree data:",l),l}}const Qc="/SchoolTreeMap/";function J5(e){const t=e.trim().split(`
`),o=u2(t[0]);return t.slice(1).map(l=>{const p=u2(l),m={};return o.forEach((g,u)=>{m[g]=p[u]||""}),m})}function u2(e){const t=[];let o="",l=!1;for(let p=0;p<e.length;p++){const m=e[p];m==='"'?l=!l:m===","&&!l?(t.push(o.trim()),o=""):o+=m}return t.push(o.trim()),t}async function tk(){try{const e=await fetch(`${Qc}schools.csv`);if(!e.ok)throw new Error(`Failed to load schools: ${e.statusText}`);const t=await e.text();return J5(t).map(l=>({id:l.id,schoolName:l.school_name,logo:l.logo?`${Qc}${l.logo}`:`${Qc}logos/${l.id}.png`,address:l.address,dataUrl:`${Qc}${l.data_file||`trees/${l.id}.csv`}`,boundaryUrl:`${Qc}${l.boundary_file||`boundaries/${l.id}.geojson`}`,photosUrl:`${Qc}${l.photos_folder||`photos/${l.id}`}`}))}catch(e){throw console.error("Error loading schools:",e),e}}function Q5(){return new URLSearchParams(window.location.search).get("school")||"wildav"}async function eD(e){const o=(await tk()).find(l=>l.id===e);if(!o)throw new Error(`School not found: ${e}`);return o}async function tD(e){try{const t=await fetch(e);return t.ok?await t.json():(console.warn(`No boundary file found: ${e}`),null)}catch(t){return console.warn(`Error loading boundary: ${e}`,t),null}}function h2(...e){return e.reduce((t,o)=>o==null?t:function(...p){t.apply(this,p),o.apply(this,p)},()=>{})}const lr=CR;function rD(e){return Kt("MuiSvgIcon",e)}Yt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const nD=e=>{const{color:t,fontSize:o,classes:l}=e,p={root:["root",t!=="inherit"&&`color${ht(t)}`,`fontSize${ht(o)}`]};return Jt(p,rD,l)},iD=at("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="inherit"&&t[`color${ht(o.color)}`],t[`fontSize${ht(o.fontSize)}`]]}})(lr(({theme:e})=>{var t,o,l,p,m,g,u,I,M,F,L,z,J,H;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(p=(t=e.transitions)==null?void 0:t.create)==null?void 0:p.call(t,"fill",{duration:(l=(o=(e.vars??e).transitions)==null?void 0:o.duration)==null?void 0:l.shorter}),variants:[{props:re=>!re.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((g=(m=e.typography)==null?void 0:m.pxToRem)==null?void 0:g.call(m,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((I=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:I.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((F=(M=e.typography)==null?void 0:M.pxToRem)==null?void 0:F.call(M,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,re])=>re&&re.main).map(([re])=>{var le,V;return{props:{color:re},style:{color:(V=(le=(e.vars??e).palette)==null?void 0:le[re])==null?void 0:V.main}}}),{props:{color:"action"},style:{color:(z=(L=(e.vars??e).palette)==null?void 0:L.action)==null?void 0:z.active}},{props:{color:"disabled"},style:{color:(H=(J=(e.vars??e).palette)==null?void 0:J.action)==null?void 0:H.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Hv=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiSvgIcon"}),{children:p,className:m,color:g="inherit",component:u="svg",fontSize:I="medium",htmlColor:M,inheritViewBox:F=!1,titleAccess:L,viewBox:z="0 0 24 24",...J}=l,H=ee.isValidElement(p)&&p.type==="svg",re={...l,color:g,component:u,fontSize:I,instanceFontSize:t.fontSize,inheritViewBox:F,viewBox:z,hasSvgAsChild:H},le={};F||(le.viewBox=z);const V=nD(re);return q.jsxs(iD,{as:u,className:wt(V.root,m),focusable:"false",color:M,"aria-hidden":L?void 0:!0,role:L?"img":void 0,ref:o,...le,...J,...H&&p.props,ownerState:re,children:[H?p.props.children:p,L?q.jsx("title",{children:L}):null]})});Hv.muiName="SvgIcon";function Ri(e,t){function o(l,p){return q.jsx(Hv,{"data-testid":void 0,ref:p,...l,children:e})}return o.muiName=Hv.muiName,ee.memo(ee.forwardRef(o))}function T0(e,t=166){let o;function l(...p){const m=()=>{e.apply(this,p)};clearTimeout(o),o=setTimeout(m,t)}return l.clear=()=>{clearTimeout(o)},l}function Xo(e){return e&&e.ownerDocument||document}function Ko(e){return Xo(e).defaultView||window}function d2(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function p2(e){const{controlled:t,default:o,name:l,state:p="value"}=e,{current:m}=ee.useRef(t!==void 0),[g,u]=ee.useState(o),I=m?t:g,M=ee.useCallback(F=>{m||u(F)},[]);return[I,M]}function Wl(e){const t=ee.useRef(e);return Zo(()=>{t.current=e}),ee.useRef((...o)=>(0,t.current)(...o)).current}function Hn(...e){const t=ee.useRef(void 0),o=ee.useCallback(l=>{const p=e.map(m=>{if(m==null)return null;if(typeof m=="function"){const g=m,u=g(l);return typeof u=="function"?u:()=>{g(null)}}return m.current=l,()=>{m.current=null}});return()=>{p.forEach(m=>m==null?void 0:m())}},e);return ee.useMemo(()=>e.every(l=>l==null)?null:l=>{t.current&&(t.current(),t.current=void 0),l!=null&&(t.current=o(l))},e)}function oD(e,t){const o=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&o>=65&&o<=90&&typeof t=="function"}function rk(e,t){if(!e)return t;function o(g,u){const I={};return Object.keys(u).forEach(M=>{oD(M,u[M])&&typeof g[M]=="function"&&(I[M]=(...F)=>{g[M](...F),u[M](...F)})}),I}if(typeof e=="function"||typeof t=="function")return g=>{const u=typeof t=="function"?t(g):t,I=typeof e=="function"?e({...g,...u}):e,M=wt(g==null?void 0:g.className,u==null?void 0:u.className,I==null?void 0:I.className),F=o(I,u);return{...u,...I,...F,...!!M&&{className:M},...(u==null?void 0:u.style)&&(I==null?void 0:I.style)&&{style:{...u.style,...I.style}},...(u==null?void 0:u.sx)&&(I==null?void 0:I.sx)&&{sx:[...Array.isArray(u.sx)?u.sx:[u.sx],...Array.isArray(I.sx)?I.sx:[I.sx]]}}};const l=t,p=o(e,l),m=wt(l==null?void 0:l.className,e==null?void 0:e.className);return{...t,...e,...p,...!!m&&{className:m},...(l==null?void 0:l.style)&&(e==null?void 0:e.style)&&{style:{...l.style,...e.style}},...(l==null?void 0:l.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function nk(e,t){if(e==null)return{};var o={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;o[l]=e[l]}return o}function qv(e,t){return qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o},qv(e,t)}function ik(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,qv(e,t)}const f2={disabled:!1},jm=Io.createContext(null);var sD=function(t){return t.scrollTop},wd="unmounted",Ll="exited",Bl="entering",tu="entered",Zv="exiting",Yo=function(e){ik(t,e);function t(l,p){var m;m=e.call(this,l,p)||this;var g=p,u=g&&!g.isMounting?l.enter:l.appear,I;return m.appearStatus=null,l.in?u?(I=Ll,m.appearStatus=Bl):I=tu:l.unmountOnExit||l.mountOnEnter?I=wd:I=Ll,m.state={status:I},m.nextCallback=null,m}t.getDerivedStateFromProps=function(p,m){var g=p.in;return g&&m.status===wd?{status:Ll}:null};var o=t.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(p){var m=null;if(p!==this.props){var g=this.state.status;this.props.in?g!==Bl&&g!==tu&&(m=Bl):(g===Bl||g===tu)&&(m=Zv)}this.updateStatus(!1,m)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var p=this.props.timeout,m,g,u;return m=g=u=p,p!=null&&typeof p!="number"&&(m=p.exit,g=p.enter,u=p.appear!==void 0?p.appear:g),{exit:m,enter:g,appear:u}},o.updateStatus=function(p,m){if(p===void 0&&(p=!1),m!==null)if(this.cancelNextCallback(),m===Bl){if(this.props.unmountOnExit||this.props.mountOnEnter){var g=this.props.nodeRef?this.props.nodeRef.current:Nf.findDOMNode(this);g&&sD(g)}this.performEnter(p)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ll&&this.setState({status:wd})},o.performEnter=function(p){var m=this,g=this.props.enter,u=this.context?this.context.isMounting:p,I=this.props.nodeRef?[u]:[Nf.findDOMNode(this),u],M=I[0],F=I[1],L=this.getTimeouts(),z=u?L.appear:L.enter;if(!p&&!g||f2.disabled){this.safeSetState({status:tu},function(){m.props.onEntered(M)});return}this.props.onEnter(M,F),this.safeSetState({status:Bl},function(){m.props.onEntering(M,F),m.onTransitionEnd(z,function(){m.safeSetState({status:tu},function(){m.props.onEntered(M,F)})})})},o.performExit=function(){var p=this,m=this.props.exit,g=this.getTimeouts(),u=this.props.nodeRef?void 0:Nf.findDOMNode(this);if(!m||f2.disabled){this.safeSetState({status:Ll},function(){p.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:Zv},function(){p.props.onExiting(u),p.onTransitionEnd(g.exit,function(){p.safeSetState({status:Ll},function(){p.props.onExited(u)})})})},o.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(p,m){m=this.setNextCallback(m),this.setState(p,m)},o.setNextCallback=function(p){var m=this,g=!0;return this.nextCallback=function(u){g&&(g=!1,m.nextCallback=null,p(u))},this.nextCallback.cancel=function(){g=!1},this.nextCallback},o.onTransitionEnd=function(p,m){this.setNextCallback(m);var g=this.props.nodeRef?this.props.nodeRef.current:Nf.findDOMNode(this),u=p==null&&!this.props.addEndListener;if(!g||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var I=this.props.nodeRef?[this.nextCallback]:[g,this.nextCallback],M=I[0],F=I[1];this.props.addEndListener(M,F)}p!=null&&setTimeout(this.nextCallback,p)},o.render=function(){var p=this.state.status;if(p===wd)return null;var m=this.props,g=m.children;m.in,m.mountOnEnter,m.unmountOnExit,m.appear,m.enter,m.exit,m.timeout,m.addEndListener,m.onEnter,m.onEntering,m.onEntered,m.onExit,m.onExiting,m.onExited,m.nodeRef;var u=nk(m,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Io.createElement(jm.Provider,{value:null},typeof g=="function"?g(p,u):Io.cloneElement(Io.Children.only(g),u))},t}(Io.Component);Yo.contextType=jm;Yo.propTypes={};function eu(){}Yo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:eu,onEntering:eu,onEntered:eu,onExit:eu,onExiting:eu,onExited:eu};Yo.UNMOUNTED=wd;Yo.EXITED=Ll;Yo.ENTERING=Bl;Yo.ENTERED=tu;Yo.EXITING=Zv;function aD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k0(e,t){var o=function(m){return t&&ee.isValidElement(m)?t(m):m},l=Object.create(null);return e&&ee.Children.map(e,function(p){return p}).forEach(function(p){l[p.key]=o(p)}),l}function lD(e,t){e=e||{},t=t||{};function o(F){return F in t?t[F]:e[F]}var l=Object.create(null),p=[];for(var m in e)m in t?p.length&&(l[m]=p,p=[]):p.push(m);var g,u={};for(var I in t){if(l[I])for(g=0;g<l[I].length;g++){var M=l[I][g];u[l[I][g]]=o(M)}u[I]=o(I)}for(g=0;g<p.length;g++)u[p[g]]=o(p[g]);return u}function jl(e,t,o){return o[t]!=null?o[t]:e.props[t]}function cD(e,t){return k0(e.children,function(o){return ee.cloneElement(o,{onExited:t.bind(null,o),in:!0,appear:jl(o,"appear",e),enter:jl(o,"enter",e),exit:jl(o,"exit",e)})})}function uD(e,t,o){var l=k0(e.children),p=lD(t,l);return Object.keys(p).forEach(function(m){var g=p[m];if(ee.isValidElement(g)){var u=m in t,I=m in l,M=t[m],F=ee.isValidElement(M)&&!M.props.in;I&&(!u||F)?p[m]=ee.cloneElement(g,{onExited:o.bind(null,g),in:!0,exit:jl(g,"exit",e),enter:jl(g,"enter",e)}):!I&&u&&!F?p[m]=ee.cloneElement(g,{in:!1}):I&&u&&ee.isValidElement(M)&&(p[m]=ee.cloneElement(g,{onExited:o.bind(null,g),in:M.props.in,exit:jl(g,"exit",e),enter:jl(g,"enter",e)}))}}),p}var hD=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},dD={component:"div",childFactory:function(t){return t}},I0=function(e){ik(t,e);function t(l,p){var m;m=e.call(this,l,p)||this;var g=m.handleExited.bind(aD(m));return m.state={contextValue:{isMounting:!0},handleExited:g,firstRender:!0},m}var o=t.prototype;return o.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},o.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(p,m){var g=m.children,u=m.handleExited,I=m.firstRender;return{children:I?cD(p,u):uD(p,g,u),firstRender:!1}},o.handleExited=function(p,m){var g=k0(this.props.children);p.key in g||(p.props.onExited&&p.props.onExited(m),this.mounted&&this.setState(function(u){var I=Bm({},u.children);return delete I[p.key],{children:I}}))},o.render=function(){var p=this.props,m=p.component,g=p.childFactory,u=nk(p,["component","childFactory"]),I=this.state.contextValue,M=hD(this.state.children).map(g);return delete u.appear,delete u.enter,delete u.exit,m===null?Io.createElement(jm.Provider,{value:I},M):Io.createElement(jm.Provider,{value:I},Io.createElement(m,u,M))},t}(Io.Component);I0.propTypes={};I0.defaultProps=dD;const m2={};function ok(e,t){const o=ee.useRef(m2);return o.current===m2&&(o.current=e(t)),o}const pD=[];function fD(e){ee.useEffect(e,pD)}class E0{constructor(){td(this,"currentId",null);td(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});td(this,"disposeEffect",()=>this.clear)}static create(){return new E0}start(t,o){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,o()},t)}}function sk(){const e=ok(E0.create).current;return fD(e.disposeEffect),e}const P0=e=>e.scrollTop;function Ru(e,t){const{timeout:o,easing:l,style:p={}}=e;return{duration:p.transitionDuration??(typeof o=="number"?o:o[t.mode]||0),easing:p.transitionTimingFunction??(typeof l=="object"?l[t.mode]:l),delay:p.transitionDelay}}function Du(e){return typeof e=="string"}function ak(e,t,o){return e===void 0||Du(e)?t:{...t,ownerState:{...t.ownerState,...o}}}function lk(e,t,o){return typeof e=="function"?e(t,o):e}function ck(e,t=[]){if(e===void 0)return{};const o={};return Object.keys(e).filter(l=>l.match(/^on[A-Z]/)&&typeof e[l]=="function"&&!t.includes(l)).forEach(l=>{o[l]=e[l]}),o}function g2(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(o=>!(o.match(/^on[A-Z]/)&&typeof e[o]=="function")).forEach(o=>{t[o]=e[o]}),t}function uk(e){const{getSlotProps:t,additionalProps:o,externalSlotProps:l,externalForwardedProps:p,className:m}=e;if(!t){const J=wt(o==null?void 0:o.className,m,p==null?void 0:p.className,l==null?void 0:l.className),H={...o==null?void 0:o.style,...p==null?void 0:p.style,...l==null?void 0:l.style},re={...o,...p,...l};return J.length>0&&(re.className=J),Object.keys(H).length>0&&(re.style=H),{props:re,internalRef:void 0}}const g=ck({...p,...l}),u=g2(l),I=g2(p),M=t(g),F=wt(M==null?void 0:M.className,o==null?void 0:o.className,m,p==null?void 0:p.className,l==null?void 0:l.className),L={...M==null?void 0:M.style,...o==null?void 0:o.style,...p==null?void 0:p.style,...l==null?void 0:l.style},z={...M,...o,...I,...u};return F.length>0&&(z.className=F),Object.keys(L).length>0&&(z.style=L),{props:z,internalRef:M.ref}}function pr(e,t){const{className:o,elementType:l,ownerState:p,externalForwardedProps:m,internalForwardedProps:g,shouldForwardComponentProp:u=!1,...I}=t,{component:M,slots:F={[e]:void 0},slotProps:L={[e]:void 0},...z}=m,J=F[e]||l,H=lk(L[e],p),{props:{component:re,...le},internalRef:V}=uk({className:o,...I,externalForwardedProps:e==="root"?z:void 0,externalSlotProps:H}),U=Hn(V,H==null?void 0:H.ref,t.ref),G=e==="root"?re||M:re,Q=ak(J,{...e==="root"&&!M&&!F[e]&&g,...e!=="root"&&!F[e]&&g,...le,...G&&!u&&{as:G},...G&&u&&{component:G},ref:U},p);return[J,Q]}function mD(e){return Kt("MuiPaper",e)}Yt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const gD=e=>{const{square:t,elevation:o,variant:l,classes:p}=e,m={root:["root",l,!t&&"rounded",l==="elevation"&&`elevation${o}`]};return Jt(m,mD,p)},yD=at("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],!o.square&&t.rounded,o.variant==="elevation"&&t[`elevation${o.elevation}`]]}})(lr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Vu=ee.forwardRef(function(t,o){var J;const l=Qt({props:t,name:"MuiPaper"}),p=Jl(),{className:m,component:g="div",elevation:u=1,square:I=!1,variant:M="elevation",...F}=l,L={...l,component:g,elevation:u,square:I,variant:M},z=gD(L);return q.jsx(yD,{as:g,ownerState:L,className:wt(z.root,m),ref:o,...F,style:{...M==="elevation"&&{"--Paper-shadow":(p.vars||p).shadows[u],...p.vars&&{"--Paper-overlay":(J=p.vars.overlays)==null?void 0:J[u]},...!p.vars&&p.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${$m("#fff",Wv(u))}, ${$m("#fff",Wv(u))})`}},...F.style}})});function y2(e){try{return e.matches(":focus-visible")}catch{}return!1}class Vm{constructor(){td(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Vm}static use(){const t=ok(Vm.create).current,[o,l]=ee.useState(!1);return t.shouldMount=o,t.setShouldMount=l,ee.useEffect(t.mountEffect,[o]),t}mount(){return this.mounted||(this.mounted=vD(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var o;return(o=this.ref.current)==null?void 0:o.start(...t)})}stop(...t){this.mount().then(()=>{var o;return(o=this.ref.current)==null?void 0:o.stop(...t)})}pulsate(...t){this.mount().then(()=>{var o;return(o=this.ref.current)==null?void 0:o.pulsate(...t)})}}function _D(){return Vm.use()}function vD(){let e,t;const o=new Promise((l,p)=>{e=l,t=p});return o.resolve=e,o.reject=t,o}function xD(e){const{className:t,classes:o,pulsate:l=!1,rippleX:p,rippleY:m,rippleSize:g,in:u,onExited:I,timeout:M}=e,[F,L]=ee.useState(!1),z=wt(t,o.ripple,o.rippleVisible,l&&o.ripplePulsate),J={width:g,height:g,top:-(g/2)+m,left:-(g/2)+p},H=wt(o.child,F&&o.childLeaving,l&&o.childPulsate);return!u&&!F&&L(!0),ee.useEffect(()=>{if(!u&&I!=null){const re=setTimeout(I,M);return()=>{clearTimeout(re)}}},[I,u,M]),q.jsx("span",{className:z,style:J,children:q.jsx("span",{className:H})})}const So=Yt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Xv=550,bD=80,wD=fp`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,SD=fp`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,CD=fp`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TD=at("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),kD=at(xD,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${So.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${wD};
    animation-duration: ${Xv}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${So.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${So.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${So.childLeaving} {
    opacity: 0;
    animation-name: ${SD};
    animation-duration: ${Xv}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${So.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${CD};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,ID=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiTouchRipple"}),{center:p=!1,classes:m={},className:g,...u}=l,[I,M]=ee.useState([]),F=ee.useRef(0),L=ee.useRef(null);ee.useEffect(()=>{L.current&&(L.current(),L.current=null)},[I]);const z=ee.useRef(!1),J=sk(),H=ee.useRef(null),re=ee.useRef(null),le=ee.useCallback(Q=>{const{pulsate:fe,rippleX:he,rippleY:_e,rippleSize:ge,cb:Ae}=Q;M(Re=>[...Re,q.jsx(kD,{classes:{ripple:wt(m.ripple,So.ripple),rippleVisible:wt(m.rippleVisible,So.rippleVisible),ripplePulsate:wt(m.ripplePulsate,So.ripplePulsate),child:wt(m.child,So.child),childLeaving:wt(m.childLeaving,So.childLeaving),childPulsate:wt(m.childPulsate,So.childPulsate)},timeout:Xv,pulsate:fe,rippleX:he,rippleY:_e,rippleSize:ge},F.current)]),F.current+=1,L.current=Ae},[m]),V=ee.useCallback((Q={},fe={},he=()=>{})=>{const{pulsate:_e=!1,center:ge=p||fe.pulsate,fakeElement:Ae=!1}=fe;if((Q==null?void 0:Q.type)==="mousedown"&&z.current){z.current=!1;return}(Q==null?void 0:Q.type)==="touchstart"&&(z.current=!0);const Re=Ae?null:re.current,De=Re?Re.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Z,Me,Ie;if(ge||Q===void 0||Q.clientX===0&&Q.clientY===0||!Q.clientX&&!Q.touches)Z=Math.round(De.width/2),Me=Math.round(De.height/2);else{const{clientX:Le,clientY:$e}=Q.touches&&Q.touches.length>0?Q.touches[0]:Q;Z=Math.round(Le-De.left),Me=Math.round($e-De.top)}if(ge)Ie=Math.sqrt((2*De.width**2+De.height**2)/3),Ie%2===0&&(Ie+=1);else{const Le=Math.max(Math.abs((Re?Re.clientWidth:0)-Z),Z)*2+2,$e=Math.max(Math.abs((Re?Re.clientHeight:0)-Me),Me)*2+2;Ie=Math.sqrt(Le**2+$e**2)}Q!=null&&Q.touches?H.current===null&&(H.current=()=>{le({pulsate:_e,rippleX:Z,rippleY:Me,rippleSize:Ie,cb:he})},J.start(bD,()=>{H.current&&(H.current(),H.current=null)})):le({pulsate:_e,rippleX:Z,rippleY:Me,rippleSize:Ie,cb:he})},[p,le,J]),U=ee.useCallback(()=>{V({},{pulsate:!0})},[V]),G=ee.useCallback((Q,fe)=>{if(J.clear(),(Q==null?void 0:Q.type)==="touchend"&&H.current){H.current(),H.current=null,J.start(0,()=>{G(Q,fe)});return}H.current=null,M(he=>he.length>0?he.slice(1):he),L.current=fe},[J]);return ee.useImperativeHandle(o,()=>({pulsate:U,start:V,stop:G}),[U,V,G]),q.jsx(TD,{className:wt(So.root,m.root,g),ref:re,...u,children:q.jsx(I0,{component:null,exit:!0,children:I})})});function ED(e){return Kt("MuiButtonBase",e)}const PD=Yt("MuiButtonBase",["root","disabled","focusVisible"]),MD=e=>{const{disabled:t,focusVisible:o,focusVisibleClassName:l,classes:p}=e,g=Jt({root:["root",t&&"disabled",o&&"focusVisible"]},ED,p);return o&&l&&(g.root+=` ${l}`),g},AD=at("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${PD.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Uu=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiButtonBase"}),{action:p,centerRipple:m=!1,children:g,className:u,component:I="button",disabled:M=!1,disableRipple:F=!1,disableTouchRipple:L=!1,focusRipple:z=!1,focusVisibleClassName:J,LinkComponent:H="a",onBlur:re,onClick:le,onContextMenu:V,onDragLeave:U,onFocus:G,onFocusVisible:Q,onKeyDown:fe,onKeyUp:he,onMouseDown:_e,onMouseLeave:ge,onMouseUp:Ae,onTouchEnd:Re,onTouchMove:De,onTouchStart:Z,tabIndex:Me=0,TouchRippleProps:Ie,touchRippleRef:Le,type:$e,...Ke}=l,be=ee.useRef(null),Ee=_D(),We=Hn(Ee.ref,Le),[Ze,Ge]=ee.useState(!1);M&&Ze&&Ge(!1),ee.useImperativeHandle(p,()=>({focusVisible:()=>{Ge(!0),be.current.focus()}}),[]);const St=Ee.shouldMount&&!F&&!M;ee.useEffect(()=>{Ze&&z&&!F&&Ee.pulsate()},[F,z,Ze,Ee]);const Dt=Os(Ee,"start",_e,L),$t=Os(Ee,"stop",V,L),Vt=Os(Ee,"stop",U,L),Rt=Os(Ee,"stop",Ae,L),cr=Os(Ee,"stop",_t=>{Ze&&_t.preventDefault(),ge&&ge(_t)},L),Ut=Os(Ee,"start",Z,L),Ct=Os(Ee,"stop",Re,L),qt=Os(Ee,"stop",De,L),Ht=Os(Ee,"stop",_t=>{y2(_t.target)||Ge(!1),re&&re(_t)},!1),yr=Wl(_t=>{be.current||(be.current=_t.currentTarget),y2(_t.target)&&(Ge(!0),Q&&Q(_t)),G&&G(_t)}),Nt=()=>{const _t=be.current;return I&&I!=="button"&&!(_t.tagName==="A"&&_t.href)},sr=Wl(_t=>{z&&!_t.repeat&&Ze&&_t.key===" "&&Ee.stop(_t,()=>{Ee.start(_t)}),_t.target===_t.currentTarget&&Nt()&&_t.key===" "&&_t.preventDefault(),fe&&fe(_t),_t.target===_t.currentTarget&&Nt()&&_t.key==="Enter"&&!M&&(_t.preventDefault(),le&&le(_t))}),ze=Wl(_t=>{z&&_t.key===" "&&Ze&&!_t.defaultPrevented&&Ee.stop(_t,()=>{Ee.pulsate(_t)}),he&&he(_t),le&&_t.target===_t.currentTarget&&Nt()&&_t.key===" "&&!_t.defaultPrevented&&le(_t)});let Or=I;Or==="button"&&(Ke.href||Ke.to)&&(Or=H);const Cr={};if(Or==="button"){const _t=!!Ke.formAction;Cr.type=$e===void 0&&!_t?"button":$e,Cr.disabled=M}else!Ke.href&&!Ke.to&&(Cr.role="button"),M&&(Cr["aria-disabled"]=M);const At=Hn(o,be),er={...l,centerRipple:m,component:I,disabled:M,disableRipple:F,disableTouchRipple:L,focusRipple:z,tabIndex:Me,focusVisible:Ze},xr=MD(er);return q.jsxs(AD,{as:Or,className:wt(xr.root,u),ownerState:er,onBlur:Ht,onClick:le,onContextMenu:$t,onFocus:yr,onKeyDown:sr,onKeyUp:ze,onMouseDown:Dt,onMouseLeave:cr,onMouseUp:Rt,onDragLeave:Vt,onTouchEnd:Ct,onTouchMove:qt,onTouchStart:Ut,ref:At,tabIndex:M?-1:Me,type:$e,...Cr,...Ke,children:[g,St?q.jsx(ID,{ref:We,center:m,...Ie}):null]})});function Os(e,t,o,l=!1){return Wl(p=>(o&&o(p),l||e[t](p),!0))}function zD(e){return typeof e.main=="string"}function RD(e,t=[]){if(!zD(e))return!1;for(const o of t)if(!e.hasOwnProperty(o)||typeof e[o]!="string")return!1;return!0}function Pi(e=[]){return([,t])=>t&&RD(t,e)}function DD(e){return Kt("MuiAlert",e)}const _2=Yt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function LD(e){return Kt("MuiCircularProgress",e)}Yt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const No=44,Kv=fp`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,Yv=fp`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,BD=typeof Kv!="string"?c0`
        animation: ${Kv} 1.4s linear infinite;
      `:null,FD=typeof Yv!="string"?c0`
        animation: ${Yv} 1.4s ease-in-out infinite;
      `:null,OD=e=>{const{classes:t,variant:o,color:l,disableShrink:p}=e,m={root:["root",o,`color${ht(l)}`],svg:["svg"],track:["track"],circle:["circle",`circle${ht(o)}`,p&&"circleDisableShrink"]};return Jt(m,LD,t)},$D=at("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`color${ht(o.color)}`]]}})(lr(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:BD||{animation:`${Kv} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Pi()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),ND=at("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),jD=at("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.circle,t[`circle${ht(o.variant)}`],o.disableShrink&&t.circleDisableShrink]}})(lr(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:FD||{animation:`${Yv} 1.4s ease-in-out infinite`}}]}))),VD=at("circle",{name:"MuiCircularProgress",slot:"Track"})(lr(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),op=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiCircularProgress"}),{className:p,color:m="primary",disableShrink:g=!1,enableTrackSlot:u=!1,size:I=40,style:M,thickness:F=3.6,value:L=0,variant:z="indeterminate",...J}=l,H={...l,color:m,disableShrink:g,size:I,thickness:F,value:L,variant:z,enableTrackSlot:u},re=OD(H),le={},V={},U={};if(z==="determinate"){const G=2*Math.PI*((No-F)/2);le.strokeDasharray=G.toFixed(3),U["aria-valuenow"]=Math.round(L),le.strokeDashoffset=`${((100-L)/100*G).toFixed(3)}px`,V.transform="rotate(-90deg)"}return q.jsx($D,{className:wt(re.root,p),style:{width:I,height:I,...V,...M},ownerState:H,ref:o,role:"progressbar",...U,...J,children:q.jsxs(ND,{className:re.svg,ownerState:H,viewBox:`${No/2} ${No/2} ${No} ${No}`,children:[u?q.jsx(VD,{className:re.track,ownerState:H,cx:No,cy:No,r:(No-F)/2,fill:"none",strokeWidth:F,"aria-hidden":"true"}):null,q.jsx(jD,{className:re.circle,style:le,ownerState:H,cx:No,cy:No,r:(No-F)/2,fill:"none",strokeWidth:F})]})})});function UD(e){return Kt("MuiIconButton",e)}const v2=Yt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),WD=e=>{const{classes:t,disabled:o,color:l,edge:p,size:m,loading:g}=e,u={root:["root",g&&"loading",o&&"disabled",l!=="default"&&`color${ht(l)}`,p&&`edge${ht(p)}`,`size${ht(m)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Jt(u,UD,t)},GD=at(Uu,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.loading&&t.loading,o.color!=="default"&&t[`color${ht(o.color)}`],o.edge&&t[`edge${ht(o.edge)}`],t[`size${ht(o.size)}`]]}})(lr(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),lr(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Pi()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Pi()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${v2.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${v2.loading}`]:{color:"transparent"}}))),HD=at("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Jv=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiIconButton"}),{edge:p=!1,children:m,className:g,color:u="default",disabled:I=!1,disableFocusRipple:M=!1,size:F="medium",id:L,loading:z=null,loadingIndicator:J,...H}=l,re=Nu(L),le=J??q.jsx(op,{"aria-labelledby":re,color:"inherit",size:16}),V={...l,edge:p,color:u,disabled:I,disableFocusRipple:M,loading:z,loadingIndicator:le,size:F},U=WD(V);return q.jsxs(GD,{id:z?re:L,className:wt(U.root,g),centerRipple:!0,focusRipple:!M,disabled:I||z,ref:o,...H,ownerState:V,children:[typeof z=="boolean"&&q.jsx("span",{className:U.loadingWrapper,style:{display:"contents"},children:q.jsx(HD,{className:U.loadingIndicator,ownerState:V,children:z&&le})}),m]})}),qD=Ri(q.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),ZD=Ri(q.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),XD=Ri(q.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),KD=Ri(q.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),YD=Ri(q.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),JD=e=>{const{variant:t,color:o,severity:l,classes:p}=e,m={root:["root",`color${ht(o||l)}`,`${t}${ht(o||l)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Jt(m,DD,p)},QD=at(Vu,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`${o.variant}${ht(o.color||o.severity)}`]]}})(lr(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,o=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(Pi(["light"])).map(([l])=>({props:{colorSeverity:l,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${l}Color`]:t(e.palette[l].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${l}StandardBg`]:o(e.palette[l].light,.9),[`& .${_2.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette[l].main}}})),...Object.entries(e.palette).filter(Pi(["light"])).map(([l])=>({props:{colorSeverity:l,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${l}Color`]:t(e.palette[l].light,.6),border:`1px solid ${(e.vars||e).palette[l].light}`,[`& .${_2.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette[l].main}}})),...Object.entries(e.palette).filter(Pi(["dark"])).map(([l])=>({props:{colorSeverity:l,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${l}FilledColor`],backgroundColor:e.vars.palette.Alert[`${l}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[l].dark:e.palette[l].main,color:e.palette.getContrastText(e.palette[l].main)}}}))]}})),eL=at("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),tL=at("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),rL=at("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),x2={success:q.jsx(qD,{fontSize:"inherit"}),warning:q.jsx(ZD,{fontSize:"inherit"}),error:q.jsx(XD,{fontSize:"inherit"}),info:q.jsx(KD,{fontSize:"inherit"})},nL=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiAlert"}),{action:p,children:m,className:g,closeText:u="Close",color:I,components:M={},componentsProps:F={},icon:L,iconMapping:z=x2,onClose:J,role:H="alert",severity:re="success",slotProps:le={},slots:V={},variant:U="standard",...G}=l,Q={...l,color:I,severity:re,variant:U,colorSeverity:I||re},fe=JD(Q),he={slots:{closeButton:M.CloseButton,closeIcon:M.CloseIcon,...V},slotProps:{...F,...le}},[_e,ge]=pr("root",{ref:o,shouldForwardComponentProp:!0,className:wt(fe.root,g),elementType:QD,externalForwardedProps:{...he,...G},ownerState:Q,additionalProps:{role:H,elevation:0}}),[Ae,Re]=pr("icon",{className:fe.icon,elementType:eL,externalForwardedProps:he,ownerState:Q}),[De,Z]=pr("message",{className:fe.message,elementType:tL,externalForwardedProps:he,ownerState:Q}),[Me,Ie]=pr("action",{className:fe.action,elementType:rL,externalForwardedProps:he,ownerState:Q}),[Le,$e]=pr("closeButton",{elementType:Jv,externalForwardedProps:he,ownerState:Q}),[Ke,be]=pr("closeIcon",{elementType:YD,externalForwardedProps:he,ownerState:Q});return q.jsxs(_e,{...ge,children:[L!==!1?q.jsx(Ae,{...Re,children:L||z[re]||x2[re]}):null,q.jsx(De,{...Z,children:m}),p!=null?q.jsx(Me,{...Ie,children:p}):null,p==null&&J?q.jsx(Me,{...Ie,children:q.jsx(Le,{size:"small","aria-label":u,title:u,color:"inherit",onClick:J,...$e,children:q.jsx(Ke,{fontSize:"small",...be})})}):null]})});function iL(e){return Kt("MuiTypography",e)}const b2=Yt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),oL={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},sL=V5(),aL=e=>{const{align:t,gutterBottom:o,noWrap:l,paragraph:p,variant:m,classes:g}=e,u={root:["root",m,e.align!=="inherit"&&`align${ht(t)}`,o&&"gutterBottom",l&&"noWrap",p&&"paragraph"]};return Jt(u,iL,g)},lL=at("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.variant&&t[o.variant],o.align!=="inherit"&&t[`align${ht(o.align)}`],o.noWrap&&t.noWrap,o.gutterBottom&&t.gutterBottom,o.paragraph&&t.paragraph]}})(lr(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([o,l])=>o!=="inherit"&&l&&typeof l=="object").map(([o,l])=>({props:{variant:o},style:l})),...Object.entries(e.palette).filter(Pi()).map(([o])=>({props:{color:o},style:{color:(e.vars||e).palette[o].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,o])=>typeof o=="string").map(([o])=>({props:{color:`text${ht(o)}`},style:{color:(e.vars||e).palette.text[o]}})),{props:({ownerState:o})=>o.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:o})=>o.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:o})=>o.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:o})=>o.paragraph,style:{marginBottom:16}}]}})),w2={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Gt=ee.forwardRef(function(t,o){const{color:l,...p}=Qt({props:t,name:"MuiTypography"}),m=!oL[l],g=sL({...p,...m&&{color:l}}),{align:u="inherit",className:I,component:M,gutterBottom:F=!1,noWrap:L=!1,paragraph:z=!1,variant:J="body1",variantMapping:H=w2,...re}=g,le={...g,align:u,color:l,className:I,component:M,gutterBottom:F,noWrap:L,paragraph:z,variant:J,variantMapping:H},V=M||(z?"p":H[J]||w2[J])||"span",U=aL(le);return q.jsx(lL,{as:V,ref:o,className:wt(U.root,I),...re,ownerState:le,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...re.style}})});function cL(e){var L;const{elementType:t,externalSlotProps:o,ownerState:l,skipResolvingSlotProps:p=!1,...m}=e,g=p?{}:lk(o,l),{props:u,internalRef:I}=uk({...m,externalSlotProps:g}),M=Hn(I,g==null?void 0:g.ref,(L=e.additionalProps)==null?void 0:L.ref);return ak(t,{...u,ref:M},l)}function Wu(e){var t;return parseInt(ee.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function uL(e){return typeof e=="function"?e():e}const hL=ee.forwardRef(function(t,o){const{children:l,container:p,disablePortal:m=!1}=t,[g,u]=ee.useState(null),I=Hn(ee.isValidElement(l)?Wu(l):null,o);if(Zo(()=>{m||u(uL(p)||document.body)},[p,m]),Zo(()=>{if(g&&!m)return d2(o,g),()=>{d2(o,null)}},[o,g,m]),m){if(ee.isValidElement(l)){const M={ref:I};return ee.cloneElement(l,M)}return l}return g&&Jx.createPortal(l,g)});function Gf(e){return parseInt(e,10)||0}const dL={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function pL(e){for(const t in e)return!1;return!0}function S2(e){return pL(e)||e.outerHeightStyle===0&&!e.overflowing}const fL=ee.forwardRef(function(t,o){const{onChange:l,maxRows:p,minRows:m=1,style:g,value:u,...I}=t,{current:M}=ee.useRef(u!=null),F=ee.useRef(null),L=Hn(o,F),z=ee.useRef(null),J=ee.useRef(null),H=ee.useCallback(()=>{const G=F.current,Q=J.current;if(!G||!Q)return;const he=Ko(G).getComputedStyle(G);if(he.width==="0px")return{outerHeightStyle:0,overflowing:!1};Q.style.width=he.width,Q.value=G.value||t.placeholder||"x",Q.value.slice(-1)===`
`&&(Q.value+=" ");const _e=he.boxSizing,ge=Gf(he.paddingBottom)+Gf(he.paddingTop),Ae=Gf(he.borderBottomWidth)+Gf(he.borderTopWidth),Re=Q.scrollHeight;Q.value="x";const De=Q.scrollHeight;let Z=Re;m&&(Z=Math.max(Number(m)*De,Z)),p&&(Z=Math.min(Number(p)*De,Z)),Z=Math.max(Z,De);const Me=Z+(_e==="border-box"?ge+Ae:0),Ie=Math.abs(Z-Re)<=1;return{outerHeightStyle:Me,overflowing:Ie}},[p,m,t.placeholder]),re=Wl(()=>{const G=F.current,Q=H();if(!G||!Q||S2(Q))return!1;const fe=Q.outerHeightStyle;return z.current!=null&&z.current!==fe}),le=ee.useCallback(()=>{const G=F.current,Q=H();if(!G||!Q||S2(Q))return;const fe=Q.outerHeightStyle;z.current!==fe&&(z.current=fe,G.style.height=`${fe}px`),G.style.overflow=Q.overflowing?"hidden":""},[H]),V=ee.useRef(-1);Zo(()=>{const G=T0(le),Q=F==null?void 0:F.current;if(!Q)return;const fe=Ko(Q);fe.addEventListener("resize",G);let he;return typeof ResizeObserver<"u"&&(he=new ResizeObserver(()=>{re()&&(he.unobserve(Q),cancelAnimationFrame(V.current),le(),V.current=requestAnimationFrame(()=>{he.observe(Q)}))}),he.observe(Q)),()=>{G.clear(),cancelAnimationFrame(V.current),fe.removeEventListener("resize",G),he&&he.disconnect()}},[H,le,re]),Zo(()=>{le()});const U=G=>{M||le();const Q=G.target,fe=Q.value.length,he=Q.value.endsWith(`
`),_e=Q.selectionStart===fe;he&&_e&&Q.setSelectionRange(fe,fe),l&&l(G)};return q.jsxs(ee.Fragment,{children:[q.jsx("textarea",{value:u,onChange:U,ref:L,rows:m,style:g,...I}),q.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:J,tabIndex:-1,style:{...dL.shadow,...g,paddingTop:0,paddingBottom:0}})]})});function Gu({props:e,states:t,muiFormControl:o}){return t.reduce((l,p)=>(l[p]=e[p],o&&typeof e[p]>"u"&&(l[p]=o[p]),l),{})}const M0=ee.createContext(void 0);function Hu(){return ee.useContext(M0)}function C2(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Um(e,t=!1){return e&&(C2(e.value)&&e.value!==""||t&&C2(e.defaultValue)&&e.defaultValue!=="")}function mL(e){return e.startAdornment}function gL(e){return Kt("MuiInputBase",e)}const Lu=Yt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var T2;const jg=(e,t)=>{const{ownerState:o}=e;return[t.root,o.formControl&&t.formControl,o.startAdornment&&t.adornedStart,o.endAdornment&&t.adornedEnd,o.error&&t.error,o.size==="small"&&t.sizeSmall,o.multiline&&t.multiline,o.color&&t[`color${ht(o.color)}`],o.fullWidth&&t.fullWidth,o.hiddenLabel&&t.hiddenLabel]},Vg=(e,t)=>{const{ownerState:o}=e;return[t.input,o.size==="small"&&t.inputSizeSmall,o.multiline&&t.inputMultiline,o.type==="search"&&t.inputTypeSearch,o.startAdornment&&t.inputAdornedStart,o.endAdornment&&t.inputAdornedEnd,o.hiddenLabel&&t.inputHiddenLabel]},yL=e=>{const{classes:t,color:o,disabled:l,error:p,endAdornment:m,focused:g,formControl:u,fullWidth:I,hiddenLabel:M,multiline:F,readOnly:L,size:z,startAdornment:J,type:H}=e,re={root:["root",`color${ht(o)}`,l&&"disabled",p&&"error",I&&"fullWidth",g&&"focused",u&&"formControl",z&&z!=="medium"&&`size${ht(z)}`,F&&"multiline",J&&"adornedStart",m&&"adornedEnd",M&&"hiddenLabel",L&&"readOnly"],input:["input",l&&"disabled",H==="search"&&"inputTypeSearch",F&&"inputMultiline",z==="small"&&"inputSizeSmall",M&&"inputHiddenLabel",J&&"inputAdornedStart",m&&"inputAdornedEnd",L&&"readOnly"]};return Jt(re,gL,t)},Ug=at("div",{name:"MuiInputBase",slot:"Root",overridesResolver:jg})(lr(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Lu.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:o})=>t.multiline&&o==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),Wg=at("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Vg})(lr(({theme:e})=>{const t=e.palette.mode==="light",o={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},l={opacity:"0 !important"},p=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Lu.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":p,"&:focus::-moz-placeholder":p,"&:focus::-ms-input-placeholder":p},[`&.${Lu.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:m})=>!m.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:m})=>m.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),k2=C0({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),A0=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiInputBase"}),{"aria-describedby":p,autoComplete:m,autoFocus:g,className:u,color:I,components:M={},componentsProps:F={},defaultValue:L,disabled:z,disableInjectingGlobalStyles:J,endAdornment:H,error:re,fullWidth:le=!1,id:V,inputComponent:U="input",inputProps:G={},inputRef:Q,margin:fe,maxRows:he,minRows:_e,multiline:ge=!1,name:Ae,onBlur:Re,onChange:De,onClick:Z,onFocus:Me,onKeyDown:Ie,onKeyUp:Le,placeholder:$e,readOnly:Ke,renderSuffix:be,rows:Ee,size:We,slotProps:Ze={},slots:Ge={},startAdornment:St,type:Dt="text",value:$t,...Vt}=l,Rt=G.value!=null?G.value:$t,{current:cr}=ee.useRef(Rt!=null),Ut=ee.useRef(),Ct=ee.useCallback(zt=>{},[]),qt=Hn(Ut,Q,G.ref,Ct),[Ht,yr]=ee.useState(!1),Nt=Hu(),sr=Gu({props:l,muiFormControl:Nt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});sr.focused=Nt?Nt.focused:Ht,ee.useEffect(()=>{!Nt&&z&&Ht&&(yr(!1),Re&&Re())},[Nt,z,Ht,Re]);const ze=Nt&&Nt.onFilled,Or=Nt&&Nt.onEmpty,Cr=ee.useCallback(zt=>{Um(zt)?ze&&ze():Or&&Or()},[ze,Or]);Zo(()=>{cr&&Cr({value:Rt})},[Rt,Cr,cr]);const At=zt=>{Me&&Me(zt),G.onFocus&&G.onFocus(zt),Nt&&Nt.onFocus?Nt.onFocus(zt):yr(!0)},er=zt=>{Re&&Re(zt),G.onBlur&&G.onBlur(zt),Nt&&Nt.onBlur?Nt.onBlur(zt):yr(!1)},xr=(zt,...$r)=>{if(!cr){const qe=zt.target||Ut.current;if(qe==null)throw new Error(Xs(1));Cr({value:qe.value})}G.onChange&&G.onChange(zt,...$r),De&&De(zt,...$r)};ee.useEffect(()=>{Cr(Ut.current)},[]);const _t=zt=>{Ut.current&&zt.currentTarget===zt.target&&Ut.current.focus(),Z&&Z(zt)};let _n=U,Tr=G;ge&&_n==="input"&&(Ee?Tr={type:void 0,minRows:Ee,maxRows:Ee,...Tr}:Tr={type:void 0,maxRows:he,minRows:_e,...Tr},_n=fL);const un=zt=>{Cr(zt.animationName==="mui-auto-fill-cancel"?Ut.current:{value:"x"})};ee.useEffect(()=>{Nt&&Nt.setAdornedStart(!!St)},[Nt,St]);const En={...l,color:sr.color||"primary",disabled:sr.disabled,endAdornment:H,error:sr.error,focused:sr.focused,formControl:Nt,fullWidth:le,hiddenLabel:sr.hiddenLabel,multiline:ge,size:sr.size,startAdornment:St,type:Dt},Ln=yL(En),Xe=Ge.root||M.Root||Ug,hn=Ze.root||F.root||{},ar=Ge.input||M.Input||Wg;return Tr={...Tr,...Ze.input??F.input},q.jsxs(ee.Fragment,{children:[!J&&typeof k2=="function"&&(T2||(T2=q.jsx(k2,{}))),q.jsxs(Xe,{...hn,ref:o,onClick:_t,...Vt,...!Du(Xe)&&{ownerState:{...En,...hn.ownerState}},className:wt(Ln.root,hn.className,u,Ke&&"MuiInputBase-readOnly"),children:[St,q.jsx(M0.Provider,{value:null,children:q.jsx(ar,{"aria-invalid":sr.error,"aria-describedby":p,autoComplete:m,autoFocus:g,defaultValue:L,disabled:sr.disabled,id:V,onAnimationStart:un,name:Ae,placeholder:$e,readOnly:Ke,required:sr.required,rows:Ee,value:Rt,onKeyDown:Ie,onKeyUp:Le,type:Dt,...Tr,...!Du(ar)&&{as:_n,ownerState:{...En,...Tr.ownerState}},ref:qt,className:wt(Ln.input,Tr.className,Ke&&"MuiInputBase-readOnly"),onBlur:er,onChange:xr,onFocus:At})}),H,be?be({...sr,startAdornment:St}):null]})]})});function _L(e){return Kt("MuiInput",e)}const dd={...Lu,...Yt("MuiInput",["root","underline","input"])};function vL(e){return Kt("MuiOutlinedInput",e)}const ls={...Lu,...Yt("MuiOutlinedInput",["root","notchedOutline","input"])};function xL(e){return Kt("MuiFilledInput",e)}const Pl={...Lu,...Yt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},bL=Ri(q.jsx("path",{d:"M7 10l5 5 5-5z"})),wL={entering:{opacity:1},entered:{opacity:1}},Qv=ee.forwardRef(function(t,o){const l=Jl(),p={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:m,appear:g=!0,children:u,easing:I,in:M,onEnter:F,onEntered:L,onEntering:z,onExit:J,onExited:H,onExiting:re,style:le,timeout:V=p,TransitionComponent:U=Yo,...G}=t,Q=ee.useRef(null),fe=Hn(Q,Wu(u),o),he=Ie=>Le=>{if(Ie){const $e=Q.current;Le===void 0?Ie($e):Ie($e,Le)}},_e=he(z),ge=he((Ie,Le)=>{P0(Ie);const $e=Ru({style:le,timeout:V,easing:I},{mode:"enter"});Ie.style.webkitTransition=l.transitions.create("opacity",$e),Ie.style.transition=l.transitions.create("opacity",$e),F&&F(Ie,Le)}),Ae=he(L),Re=he(re),De=he(Ie=>{const Le=Ru({style:le,timeout:V,easing:I},{mode:"exit"});Ie.style.webkitTransition=l.transitions.create("opacity",Le),Ie.style.transition=l.transitions.create("opacity",Le),J&&J(Ie)}),Z=he(H),Me=Ie=>{m&&m(Q.current,Ie)};return q.jsx(U,{appear:g,in:M,nodeRef:Q,onEnter:ge,onEntered:Ae,onEntering:_e,onExit:De,onExited:Z,onExiting:Re,addEndListener:Me,timeout:V,...G,children:(Ie,{ownerState:Le,...$e})=>ee.cloneElement(u,{style:{opacity:0,visibility:Ie==="exited"&&!M?"hidden":void 0,...wL[Ie],...le,...u.props.style},ref:fe,...$e})})});function SL(e){return Kt("MuiBackdrop",e)}Yt("MuiBackdrop",["root","invisible"]);const CL=e=>{const{classes:t,invisible:o}=e;return Jt({root:["root",o&&"invisible"]},SL,t)},TL=at("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),hk=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiBackdrop"}),{children:p,className:m,component:g="div",invisible:u=!1,open:I,components:M={},componentsProps:F={},slotProps:L={},slots:z={},TransitionComponent:J,transitionDuration:H,...re}=l,le={...l,component:g,invisible:u},V=CL(le),U={transition:J,root:M.Root,...z},G={...F,...L},Q={component:g,slots:U,slotProps:G},[fe,he]=pr("root",{elementType:TL,externalForwardedProps:Q,className:wt(V.root,m),ownerState:le}),[_e,ge]=pr("transition",{elementType:Qv,externalForwardedProps:Q,ownerState:le});return q.jsx(_e,{in:I,timeout:H,...re,...ge,children:q.jsx(fe,{"aria-hidden":!0,...he,classes:V,ref:o,children:p})})}),kL=Yt("MuiBox",["root"]),IL=Ng(),qr=Jz({themeId:ys,defaultTheme:IL,defaultClassName:kL.root,generateClassName:MT.generate});function EL(e){return Kt("MuiButton",e)}const Ml=Yt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),dk=ee.createContext({}),pk=ee.createContext(void 0),PL=e=>{const{color:t,disableElevation:o,fullWidth:l,size:p,variant:m,loading:g,loadingPosition:u,classes:I}=e,M={root:["root",g&&"loading",m,`${m}${ht(t)}`,`size${ht(p)}`,`${m}Size${ht(p)}`,`color${ht(t)}`,o&&"disableElevation",l&&"fullWidth",g&&`loadingPosition${ht(u)}`],startIcon:["icon","startIcon",`iconSize${ht(p)}`],endIcon:["icon","endIcon",`iconSize${ht(p)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},F=Jt(M,EL,I);return{...I,...F}},fk=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ML=at(Uu,{shouldForwardProp:e=>zi(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`${o.variant}${ht(o.color)}`],t[`size${ht(o.size)}`],t[`${o.variant}Size${ht(o.size)}`],o.color==="inherit"&&t.colorInherit,o.disableElevation&&t.disableElevation,o.fullWidth&&t.fullWidth,o.loading&&t.loading]}})(lr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],o=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ml.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Ml.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Ml.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ml.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Pi()).map(([l])=>({props:{color:l},style:{"--variant-textColor":(e.vars||e).palette[l].main,"--variant-outlinedColor":(e.vars||e).palette[l].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[l].main,.5),"--variant-containedColor":(e.vars||e).palette[l].contrastText,"--variant-containedBg":(e.vars||e).palette[l].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[l].dark,"--variant-textBg":e.alpha((e.vars||e).palette[l].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[l].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[l].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:o,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ml.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ml.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Ml.loading}`]:{color:"transparent"}}}]}})),AL=at("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.startIcon,o.loading&&t.startIconLoadingStart,t[`iconSize${ht(o.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...fk]})),zL=at("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.endIcon,o.loading&&t.endIconLoadingEnd,t[`iconSize${ht(o.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...fk]})),RL=at("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),I2=at("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),za=ee.forwardRef(function(t,o){const l=ee.useContext(dk),p=ee.useContext(pk),m=np(l,t),g=Qt({props:m,name:"MuiButton"}),{children:u,color:I="primary",component:M="button",className:F,disabled:L=!1,disableElevation:z=!1,disableFocusRipple:J=!1,endIcon:H,focusVisibleClassName:re,fullWidth:le=!1,id:V,loading:U=null,loadingIndicator:G,loadingPosition:Q="center",size:fe="medium",startIcon:he,type:_e,variant:ge="text",...Ae}=g,Re=Nu(V),De=G??q.jsx(op,{"aria-labelledby":Re,color:"inherit",size:16}),Z={...g,color:I,component:M,disabled:L,disableElevation:z,disableFocusRipple:J,fullWidth:le,loading:U,loadingIndicator:De,loadingPosition:Q,size:fe,type:_e,variant:ge},Me=PL(Z),Ie=(he||U&&Q==="start")&&q.jsx(AL,{className:Me.startIcon,ownerState:Z,children:he||q.jsx(I2,{className:Me.loadingIconPlaceholder,ownerState:Z})}),Le=(H||U&&Q==="end")&&q.jsx(zL,{className:Me.endIcon,ownerState:Z,children:H||q.jsx(I2,{className:Me.loadingIconPlaceholder,ownerState:Z})}),$e=p||"",Ke=typeof U=="boolean"?q.jsx("span",{className:Me.loadingWrapper,style:{display:"contents"},children:U&&q.jsx(RL,{className:Me.loadingIndicator,ownerState:Z,children:De})}):null;return q.jsxs(ML,{ownerState:Z,className:wt(l.className,Me.root,F,$e),component:M,disabled:L||U,focusRipple:!J,focusVisibleClassName:wt(Me.focusVisible,re),ref:o,type:_e,id:U?Re:V,...Ae,classes:Me,children:[Ie,Q!=="end"&&Ke,u,Q==="end"&&Ke,Le]})});function DL(e){return ee.Children.toArray(e).filter(t=>ee.isValidElement(t))}function LL(e){return Kt("MuiButtonGroup",e)}const nr=Yt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),BL=(e,t)=>{const{ownerState:o}=e;return[{[`& .${nr.grouped}`]:t.grouped},{[`& .${nr.grouped}`]:t[`grouped${ht(o.orientation)}`]},{[`& .${nr.grouped}`]:t[`grouped${ht(o.variant)}`]},{[`& .${nr.grouped}`]:t[`grouped${ht(o.variant)}${ht(o.orientation)}`]},{[`& .${nr.grouped}`]:t[`grouped${ht(o.variant)}${ht(o.color)}`]},{[`& .${nr.firstButton}`]:t.firstButton},{[`& .${nr.lastButton}`]:t.lastButton},{[`& .${nr.middleButton}`]:t.middleButton},t.root,t[o.variant],o.disableElevation===!0&&t.disableElevation,o.fullWidth&&t.fullWidth,o.orientation==="vertical"&&t.vertical]},FL=e=>{const{classes:t,color:o,disabled:l,disableElevation:p,fullWidth:m,orientation:g,variant:u}=e,I={root:["root",u,g,m&&"fullWidth",p&&"disableElevation",`color${ht(o)}`],grouped:["grouped",`grouped${ht(g)}`,`grouped${ht(u)}`,`grouped${ht(u)}${ht(g)}`,`grouped${ht(u)}${ht(o)}`,l&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Jt(I,LL,t)},OL=at("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:BL})(lr(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${nr.lastButton},& .${nr.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${nr.lastButton},& .${nr.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${nr.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${nr.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(Pi()).flatMap(([t])=>[{props:{variant:"text",color:t},style:{[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[t].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${nr.lastButton},& .${nr.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${nr.lastButton},& .${nr.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${nr.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${nr.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(Pi(["dark"])).map(([t])=>({props:{variant:"contained",color:t},style:{[`& .${nr.firstButton},& .${nr.middleButton}`]:{borderColor:(e.vars||e).palette[t].dark}}}))],[`& .${nr.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),$L=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiButtonGroup"}),{children:p,className:m,color:g="primary",component:u="div",disabled:I=!1,disableElevation:M=!1,disableFocusRipple:F=!1,disableRipple:L=!1,fullWidth:z=!1,orientation:J="horizontal",size:H="medium",variant:re="outlined",...le}=l,V={...l,color:g,component:u,disabled:I,disableElevation:M,disableFocusRipple:F,disableRipple:L,fullWidth:z,orientation:J,size:H,variant:re},U=FL(V),G=ee.useMemo(()=>({className:U.grouped,color:g,disabled:I,disableElevation:M,disableFocusRipple:F,disableRipple:L,fullWidth:z,size:H,variant:re}),[g,I,M,F,L,z,H,re,U.grouped]),Q=DL(p),fe=Q.length,he=_e=>{const ge=_e===0,Ae=_e===fe-1;return ge&&Ae?"":ge?U.firstButton:Ae?U.lastButton:U.middleButton};return q.jsx(OL,{as:u,role:"group",className:wt(U.root,m),ref:o,ownerState:V,...le,children:q.jsx(dk.Provider,{value:G,children:Q.map((_e,ge)=>q.jsx(pk.Provider,{value:he(ge),children:_e},ge))})})});function NL(e){return Kt("MuiCard",e)}Yt("MuiCard",["root"]);const jL=e=>{const{classes:t}=e;return Jt({root:["root"]},NL,t)},VL=at(Vu,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Wo=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiCard"}),{className:p,raised:m=!1,...g}=l,u={...l,raised:m},I=jL(u);return q.jsx(VL,{className:wt(I.root,p),elevation:m?8:void 0,ref:o,ownerState:u,...g})});function UL(e){return Kt("MuiCardActionArea",e)}const O_=Yt("MuiCardActionArea",["root","focusVisible","focusHighlight"]),WL=e=>{const{classes:t}=e;return Jt({root:["root"],focusHighlight:["focusHighlight"]},UL,t)},GL=at(Uu,{name:"MuiCardActionArea",slot:"Root"})(lr(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${O_.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${O_.focusVisible} .${O_.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}}))),HL=at("span",{name:"MuiCardActionArea",slot:"FocusHighlight"})(lr(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}))),qL=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiCardActionArea"}),{children:p,className:m,focusVisibleClassName:g,slots:u={},slotProps:I={},...M}=l,F=l,L=WL(F),z={slots:u,slotProps:I},[J,H]=pr("root",{elementType:GL,externalForwardedProps:{...z,...M},shouldForwardComponentProp:!0,ownerState:F,ref:o,className:wt(L.root,m),additionalProps:{focusVisibleClassName:wt(g,L.focusVisible)}}),[re,le]=pr("focusHighlight",{elementType:HL,externalForwardedProps:z,ownerState:F,ref:o,className:L.focusHighlight});return q.jsxs(J,{...H,children:[p,q.jsx(re,{...le})]})});function ZL(e){return Kt("MuiCardContent",e)}Yt("MuiCardContent",["root"]);const XL=e=>{const{classes:t}=e;return Jt({root:["root"]},ZL,t)},KL=at("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),fs=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiCardContent"}),{className:p,component:m="div",...g}=l,u={...l,component:m},I=XL(u);return q.jsx(KL,{as:m,className:wt(I.root,p),ownerState:u,ref:o,...g})}),YL=VR({createStyledComponent:at("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${ht(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Qt({props:e,name:"MuiContainer"})});function mk(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function JL(e){const t=Xo(e);return t.body===e?Ko(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Ld(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function E2(e){return parseInt(Ko(e).getComputedStyle(e).paddingRight,10)||0}function QL(e){const o=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),l=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return o||l}function P2(e,t,o,l,p){const m=[t,o,...l];[].forEach.call(e.children,g=>{const u=!m.includes(g),I=!QL(g);u&&I&&Ld(g,p)})}function $_(e,t){let o=-1;return e.some((l,p)=>t(l)?(o=p,!0):!1),o}function e3(e,t){const o=[],l=e.container;if(!t.disableScrollLock){if(JL(l)){const g=mk(Ko(l));o.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${E2(l)+g}px`;const u=Xo(l).querySelectorAll(".mui-fixed");[].forEach.call(u,I=>{o.push({value:I.style.paddingRight,property:"padding-right",el:I}),I.style.paddingRight=`${E2(I)+g}px`})}let m;if(l.parentNode instanceof DocumentFragment)m=Xo(l).body;else{const g=l.parentElement,u=Ko(l);m=(g==null?void 0:g.nodeName)==="HTML"&&u.getComputedStyle(g).overflowY==="scroll"?g:l}o.push({value:m.style.overflow,property:"overflow",el:m},{value:m.style.overflowX,property:"overflow-x",el:m},{value:m.style.overflowY,property:"overflow-y",el:m}),m.style.overflow="hidden"}return()=>{o.forEach(({value:m,el:g,property:u})=>{m?g.style.setProperty(u,m):g.style.removeProperty(u)})}}function t3(e){const t=[];return[].forEach.call(e.children,o=>{o.getAttribute("aria-hidden")==="true"&&t.push(o)}),t}class r3{constructor(){this.modals=[],this.containers=[]}add(t,o){let l=this.modals.indexOf(t);if(l!==-1)return l;l=this.modals.length,this.modals.push(t),t.modalRef&&Ld(t.modalRef,!1);const p=t3(o);P2(o,t.mount,t.modalRef,p,!0);const m=$_(this.containers,g=>g.container===o);return m!==-1?(this.containers[m].modals.push(t),l):(this.containers.push({modals:[t],container:o,restore:null,hiddenSiblings:p}),l)}mount(t,o){const l=$_(this.containers,m=>m.modals.includes(t)),p=this.containers[l];p.restore||(p.restore=e3(p,o))}remove(t,o=!0){const l=this.modals.indexOf(t);if(l===-1)return l;const p=$_(this.containers,g=>g.modals.includes(t)),m=this.containers[p];if(m.modals.splice(m.modals.indexOf(t),1),this.modals.splice(l,1),m.modals.length===0)m.restore&&m.restore(),t.modalRef&&Ld(t.modalRef,o),P2(m.container,t.mount,t.modalRef,m.hiddenSiblings,!1),this.containers.splice(p,1);else{const g=m.modals[m.modals.length-1];g.modalRef&&Ld(g.modalRef,!1)}return l}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function Sd(e){var o;let t=e.activeElement;for(;((o=t==null?void 0:t.shadowRoot)==null?void 0:o.activeElement)!=null;)t=t.shadowRoot.activeElement;return t}const n3=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function i3(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function o3(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=l=>e.ownerDocument.querySelector(`input[type="radio"]${l}`);let o=t(`[name="${e.name}"]:checked`);return o||(o=t(`[name="${e.name}"]`)),o!==e}function s3(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||o3(e))}function a3(e){const t=[],o=[];return Array.from(e.querySelectorAll(n3)).forEach((l,p)=>{const m=i3(l);m===-1||!s3(l)||(m===0?t.push(l):o.push({documentOrder:p,tabIndex:m,node:l}))}),o.sort((l,p)=>l.tabIndex===p.tabIndex?l.documentOrder-p.documentOrder:l.tabIndex-p.tabIndex).map(l=>l.node).concat(t)}function l3(){return!0}function c3(e){const{children:t,disableAutoFocus:o=!1,disableEnforceFocus:l=!1,disableRestoreFocus:p=!1,getTabbable:m=a3,isEnabled:g=l3,open:u}=e,I=ee.useRef(!1),M=ee.useRef(null),F=ee.useRef(null),L=ee.useRef(null),z=ee.useRef(null),J=ee.useRef(!1),H=ee.useRef(null),re=Hn(Wu(t),H),le=ee.useRef(null);ee.useEffect(()=>{!u||!H.current||(J.current=!o)},[o,u]),ee.useEffect(()=>{if(!u||!H.current)return;const G=Xo(H.current),Q=Sd(G);return H.current.contains(Q)||(H.current.hasAttribute("tabIndex")||H.current.setAttribute("tabIndex","-1"),J.current&&H.current.focus()),()=>{p||(L.current&&L.current.focus&&(I.current=!0,L.current.focus()),L.current=null)}},[u]),ee.useEffect(()=>{if(!u||!H.current)return;const G=Xo(H.current),Q=Sd(G),fe=ge=>{le.current=ge,!(l||!g()||ge.key!=="Tab")&&Q===H.current&&ge.shiftKey&&(I.current=!0,F.current&&F.current.focus())},he=()=>{var De,Z;const ge=H.current;if(ge===null)return;const Ae=Sd(G);if(!G.hasFocus()||!g()||I.current){I.current=!1;return}if(ge.contains(Ae)||l&&Ae!==M.current&&Ae!==F.current)return;if(Ae!==z.current)z.current=null;else if(z.current!==null)return;if(!J.current)return;let Re=[];if((Ae===M.current||Ae===F.current)&&(Re=m(H.current)),Re.length>0){const Me=!!((De=le.current)!=null&&De.shiftKey&&((Z=le.current)==null?void 0:Z.key)==="Tab"),Ie=Re[0],Le=Re[Re.length-1];typeof Ie!="string"&&typeof Le!="string"&&(Me?Le.focus():Ie.focus())}else ge.focus()};G.addEventListener("focusin",he),G.addEventListener("keydown",fe,!0);const _e=setInterval(()=>{const ge=Sd(G);ge&&ge.tagName==="BODY"&&he()},50);return()=>{clearInterval(_e),G.removeEventListener("focusin",he),G.removeEventListener("keydown",fe,!0)}},[o,l,p,g,u,m]);const V=G=>{L.current===null&&(L.current=G.relatedTarget),J.current=!0,z.current=G.target;const Q=t.props.onFocus;Q&&Q(G)},U=G=>{L.current===null&&(L.current=G.relatedTarget),J.current=!0};return q.jsxs(ee.Fragment,{children:[q.jsx("div",{tabIndex:u?0:-1,onFocus:U,ref:M,"data-testid":"sentinelStart"}),ee.cloneElement(t,{ref:re,onFocus:V}),q.jsx("div",{tabIndex:u?0:-1,onFocus:U,ref:F,"data-testid":"sentinelEnd"})]})}function u3(e){return typeof e=="function"?e():e}function h3(e){return e?e.props.hasOwnProperty("in"):!1}const M2=()=>{},Hf=new r3;function d3(e){const{container:t,disableEscapeKeyDown:o=!1,disableScrollLock:l=!1,closeAfterTransition:p=!1,onTransitionEnter:m,onTransitionExited:g,children:u,onClose:I,open:M,rootRef:F}=e,L=ee.useRef({}),z=ee.useRef(null),J=ee.useRef(null),H=Hn(J,F),[re,le]=ee.useState(!M),V=h3(u);let U=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(U=!1);const G=()=>Xo(z.current),Q=()=>(L.current.modalRef=J.current,L.current.mount=z.current,L.current),fe=()=>{Hf.mount(Q(),{disableScrollLock:l}),J.current&&(J.current.scrollTop=0)},he=Wl(()=>{const Le=u3(t)||G().body;Hf.add(Q(),Le),J.current&&fe()}),_e=()=>Hf.isTopModal(Q()),ge=Wl(Le=>{z.current=Le,Le&&(M&&_e()?fe():J.current&&Ld(J.current,U))}),Ae=ee.useCallback(()=>{Hf.remove(Q(),U)},[U]);ee.useEffect(()=>()=>{Ae()},[Ae]),ee.useEffect(()=>{M?he():(!V||!p)&&Ae()},[M,Ae,V,p,he]);const Re=Le=>$e=>{var Ke;(Ke=Le.onKeyDown)==null||Ke.call(Le,$e),!($e.key!=="Escape"||$e.which===229||!_e())&&(o||($e.stopPropagation(),I&&I($e,"escapeKeyDown")))},De=Le=>$e=>{var Ke;(Ke=Le.onClick)==null||Ke.call(Le,$e),$e.target===$e.currentTarget&&I&&I($e,"backdropClick")};return{getRootProps:(Le={})=>{const $e=ck(e);delete $e.onTransitionEnter,delete $e.onTransitionExited;const Ke={...$e,...Le};return{role:"presentation",...Ke,onKeyDown:Re(Ke),ref:H}},getBackdropProps:(Le={})=>{const $e=Le;return{"aria-hidden":!0,...$e,onClick:De($e),open:M}},getTransitionProps:()=>{const Le=()=>{le(!1),m&&m()},$e=()=>{le(!0),g&&g(),p&&Ae()};return{onEnter:h2(Le,(u==null?void 0:u.props.onEnter)??M2),onExited:h2($e,(u==null?void 0:u.props.onExited)??M2)}},rootRef:H,portalRef:ge,isTopModal:_e,exited:re,hasTransition:V}}function p3(e){return Kt("MuiModal",e)}Yt("MuiModal",["root","hidden","backdrop"]);const f3=e=>{const{open:t,exited:o,classes:l}=e;return Jt({root:["root",!t&&o&&"hidden"],backdrop:["backdrop"]},p3,l)},m3=at("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.open&&o.exited&&t.hidden]}})(lr(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),g3=at(hk,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),z0=ee.forwardRef(function(t,o){const l=Qt({name:"MuiModal",props:t}),{BackdropComponent:p=g3,BackdropProps:m,classes:g,className:u,closeAfterTransition:I=!1,children:M,container:F,component:L,components:z={},componentsProps:J={},disableAutoFocus:H=!1,disableEnforceFocus:re=!1,disableEscapeKeyDown:le=!1,disablePortal:V=!1,disableRestoreFocus:U=!1,disableScrollLock:G=!1,hideBackdrop:Q=!1,keepMounted:fe=!1,onClose:he,onTransitionEnter:_e,onTransitionExited:ge,open:Ae,slotProps:Re={},slots:De={},theme:Z,...Me}=l,Ie={...l,closeAfterTransition:I,disableAutoFocus:H,disableEnforceFocus:re,disableEscapeKeyDown:le,disablePortal:V,disableRestoreFocus:U,disableScrollLock:G,hideBackdrop:Q,keepMounted:fe},{getRootProps:Le,getBackdropProps:$e,getTransitionProps:Ke,portalRef:be,isTopModal:Ee,exited:We,hasTransition:Ze}=d3({...Ie,rootRef:o}),Ge={...Ie,exited:We},St=f3(Ge),Dt={};if(M.props.tabIndex===void 0&&(Dt.tabIndex="-1"),Ze){const{onEnter:Ct,onExited:qt}=Ke();Dt.onEnter=Ct,Dt.onExited=qt}const $t={slots:{root:z.Root,backdrop:z.Backdrop,...De},slotProps:{...J,...Re}},[Vt,Rt]=pr("root",{ref:o,elementType:m3,externalForwardedProps:{...$t,...Me,component:L},getSlotProps:Le,ownerState:Ge,className:wt(u,St==null?void 0:St.root,!Ge.open&&Ge.exited&&(St==null?void 0:St.hidden))}),[cr,Ut]=pr("backdrop",{ref:m==null?void 0:m.ref,elementType:p,externalForwardedProps:$t,shouldForwardComponentProp:!0,additionalProps:m,getSlotProps:Ct=>$e({...Ct,onClick:qt=>{Ct!=null&&Ct.onClick&&Ct.onClick(qt)}}),className:wt(m==null?void 0:m.className,St==null?void 0:St.backdrop),ownerState:Ge});return!fe&&!Ae&&(!Ze||We)?null:q.jsx(hL,{ref:be,container:F,disablePortal:V,children:q.jsxs(Vt,{...Rt,children:[!Q&&p?q.jsx(cr,{...Ut}):null,q.jsx(c3,{disableEnforceFocus:re,disableAutoFocus:H,disableRestoreFocus:U,isEnabled:Ee,open:Ae,children:ee.cloneElement(M,Dt)})]})})});function y3(e){return Kt("MuiDialog",e)}const N_=Yt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),gk=ee.createContext({}),_3=at(hk,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),v3=e=>{const{classes:t,scroll:o,maxWidth:l,fullWidth:p,fullScreen:m}=e,g={root:["root"],container:["container",`scroll${ht(o)}`],paper:["paper",`paperScroll${ht(o)}`,`paperWidth${ht(String(l))}`,p&&"paperFullWidth",m&&"paperFullScreen"]};return Jt(g,y3,t)},x3=at(z0,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),b3=at("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.container,t[`scroll${ht(o.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),w3=at(Vu,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`scrollPaper${ht(o.scroll)}`],t[`paperWidth${ht(String(o.maxWidth))}`],o.fullWidth&&t.paperFullWidth,o.fullScreen&&t.paperFullScreen]}})(lr(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${N_.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${N_.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${N_.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),S3=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiDialog"}),p=Jl(),m={enter:p.transitions.duration.enteringScreen,exit:p.transitions.duration.leavingScreen},{"aria-describedby":g,"aria-labelledby":u,"aria-modal":I=!0,BackdropComponent:M,BackdropProps:F,children:L,className:z,disableEscapeKeyDown:J=!1,fullScreen:H=!1,fullWidth:re=!1,maxWidth:le="sm",onClick:V,onClose:U,open:G,PaperComponent:Q=Vu,PaperProps:fe={},scroll:he="paper",slots:_e={},slotProps:ge={},TransitionComponent:Ae=Qv,transitionDuration:Re=m,TransitionProps:De,...Z}=l,Me={...l,disableEscapeKeyDown:J,fullScreen:H,fullWidth:re,maxWidth:le,scroll:he},Ie=v3(Me),Le=ee.useRef(),$e=yr=>{Le.current=yr.target===yr.currentTarget},Ke=yr=>{V&&V(yr),Le.current&&(Le.current=null,U&&U(yr,"backdropClick"))},be=Nu(u),Ee=ee.useMemo(()=>({titleId:be}),[be]),We={transition:Ae,..._e},Ze={transition:De,paper:fe,backdrop:F,...ge},Ge={slots:We,slotProps:Ze},[St,Dt]=pr("root",{elementType:x3,shouldForwardComponentProp:!0,externalForwardedProps:Ge,ownerState:Me,className:wt(Ie.root,z),ref:o}),[$t,Vt]=pr("backdrop",{elementType:_3,shouldForwardComponentProp:!0,externalForwardedProps:Ge,ownerState:Me}),[Rt,cr]=pr("paper",{elementType:w3,shouldForwardComponentProp:!0,externalForwardedProps:Ge,ownerState:Me,className:wt(Ie.paper,fe.className)}),[Ut,Ct]=pr("container",{elementType:b3,externalForwardedProps:Ge,ownerState:Me,className:Ie.container}),[qt,Ht]=pr("transition",{elementType:Qv,externalForwardedProps:Ge,ownerState:Me,additionalProps:{appear:!0,in:G,timeout:Re,role:"presentation"}});return q.jsx(St,{closeAfterTransition:!0,slots:{backdrop:$t},slotProps:{backdrop:{transitionDuration:Re,as:M,...Vt}},disableEscapeKeyDown:J,onClose:U,open:G,onClick:Ke,...Dt,...Z,children:q.jsx(qt,{...Ht,children:q.jsx(Ut,{onMouseDown:$e,...Ct,children:q.jsx(Rt,{as:Q,elevation:24,role:"dialog","aria-describedby":g,"aria-labelledby":be,"aria-modal":I,...cr,children:q.jsx(gk.Provider,{value:Ee,children:L})})})})})});function C3(e){return Kt("MuiDialogActions",e)}Yt("MuiDialogActions",["root","spacing"]);const T3=e=>{const{classes:t,disableSpacing:o}=e;return Jt({root:["root",!o&&"spacing"]},C3,t)},k3=at("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),I3=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiDialogActions"}),{className:p,disableSpacing:m=!1,...g}=l,u={...l,disableSpacing:m},I=T3(u);return q.jsx(k3,{className:wt(I.root,p),ownerState:u,ref:o,...g})});function E3(e){return Kt("MuiDialogContent",e)}Yt("MuiDialogContent",["root","dividers"]);function P3(e){return Kt("MuiDialogTitle",e)}const M3=Yt("MuiDialogTitle",["root"]),A3=e=>{const{classes:t,dividers:o}=e;return Jt({root:["root",o&&"dividers"]},E3,t)},z3=at("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})(lr(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${M3.root} + &`]:{paddingTop:0}}}]}))),R3=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiDialogContent"}),{className:p,dividers:m=!1,...g}=l,u={...l,dividers:m},I=A3(u);return q.jsx(z3,{className:wt(I.root,p),ownerState:u,ref:o,...g})}),D3=e=>{const{classes:t}=e;return Jt({root:["root"]},P3,t)},L3=at(Gt,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),B3=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiDialogTitle"}),{className:p,id:m,...g}=l,u=l,I=D3(u),{titleId:M=m}=ee.useContext(gk);return q.jsx(L3,{component:"h2",className:wt(I.root,p),ownerState:u,ref:o,variant:"h6",id:m??M,...g})});function F3(e){return Kt("MuiDivider",e)}const A2=Yt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),O3=e=>{const{absolute:t,children:o,classes:l,flexItem:p,light:m,orientation:g,textAlign:u,variant:I}=e;return Jt({root:["root",t&&"absolute",I,m&&"light",g==="vertical"&&"vertical",p&&"flexItem",o&&"withChildren",o&&g==="vertical"&&"withChildrenVertical",u==="right"&&g!=="vertical"&&"textAlignRight",u==="left"&&g!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",g==="vertical"&&"wrapperVertical"]},F3,l)},$3=at("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.absolute&&t.absolute,t[o.variant],o.light&&t.light,o.orientation==="vertical"&&t.vertical,o.flexItem&&t.flexItem,o.children&&t.withChildren,o.children&&o.orientation==="vertical"&&t.withChildrenVertical,o.textAlign==="right"&&o.orientation!=="vertical"&&t.textAlignRight,o.textAlign==="left"&&o.orientation!=="vertical"&&t.textAlignLeft]}})(lr(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),N3=at("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.wrapper,o.orientation==="vertical"&&t.wrapperVertical]}})(lr(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),Ns=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiDivider"}),{absolute:p=!1,children:m,className:g,orientation:u="horizontal",component:I=m||u==="vertical"?"div":"hr",flexItem:M=!1,light:F=!1,role:L=I!=="hr"?"separator":void 0,textAlign:z="center",variant:J="fullWidth",...H}=l,re={...l,absolute:p,component:I,flexItem:M,light:F,orientation:u,role:L,textAlign:z,variant:J},le=O3(re);return q.jsx($3,{as:I,className:wt(le.root,g),role:L,ref:o,ownerState:re,"aria-orientation":L==="separator"&&(I!=="hr"||u==="vertical")?u:void 0,...H,children:m?q.jsx(N3,{className:le.wrapper,ownerState:re,children:m}):null})});Ns&&(Ns.muiSkipListHighlight=!0);function j3(e,t,o){const l=t.getBoundingClientRect(),p=o&&o.getBoundingClientRect(),m=Ko(t);let g;if(t.fakeTransform)g=t.fakeTransform;else{const M=m.getComputedStyle(t);g=M.getPropertyValue("-webkit-transform")||M.getPropertyValue("transform")}let u=0,I=0;if(g&&g!=="none"&&typeof g=="string"){const M=g.split("(")[1].split(")")[0].split(",");u=parseInt(M[4],10),I=parseInt(M[5],10)}return e==="left"?p?`translateX(${p.right+u-l.left}px)`:`translateX(${m.innerWidth+u-l.left}px)`:e==="right"?p?`translateX(-${l.right-p.left-u}px)`:`translateX(-${l.left+l.width-u}px)`:e==="up"?p?`translateY(${p.bottom+I-l.top}px)`:`translateY(${m.innerHeight+I-l.top}px)`:p?`translateY(-${l.top-p.top+l.height-I}px)`:`translateY(-${l.top+l.height-I}px)`}function V3(e){return typeof e=="function"?e():e}function qf(e,t,o){const l=V3(o),p=j3(e,t,l);p&&(t.style.webkitTransform=p,t.style.transform=p)}const U3=ee.forwardRef(function(t,o){const l=Jl(),p={enter:l.transitions.easing.easeOut,exit:l.transitions.easing.sharp},m={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:g,appear:u=!0,children:I,container:M,direction:F="down",easing:L=p,in:z,onEnter:J,onEntered:H,onEntering:re,onExit:le,onExited:V,onExiting:U,style:G,timeout:Q=m,TransitionComponent:fe=Yo,...he}=t,_e=ee.useRef(null),ge=Hn(Wu(I),_e,o),Ae=be=>Ee=>{be&&(Ee===void 0?be(_e.current):be(_e.current,Ee))},Re=Ae((be,Ee)=>{qf(F,be,M),P0(be),J&&J(be,Ee)}),De=Ae((be,Ee)=>{const We=Ru({timeout:Q,style:G,easing:L},{mode:"enter"});be.style.webkitTransition=l.transitions.create("-webkit-transform",{...We}),be.style.transition=l.transitions.create("transform",{...We}),be.style.webkitTransform="none",be.style.transform="none",re&&re(be,Ee)}),Z=Ae(H),Me=Ae(U),Ie=Ae(be=>{const Ee=Ru({timeout:Q,style:G,easing:L},{mode:"exit"});be.style.webkitTransition=l.transitions.create("-webkit-transform",Ee),be.style.transition=l.transitions.create("transform",Ee),qf(F,be,M),le&&le(be)}),Le=Ae(be=>{be.style.webkitTransition="",be.style.transition="",V&&V(be)}),$e=be=>{g&&g(_e.current,be)},Ke=ee.useCallback(()=>{_e.current&&qf(F,_e.current,M)},[F,M]);return ee.useEffect(()=>{if(z||F==="down"||F==="right")return;const be=T0(()=>{_e.current&&qf(F,_e.current,M)}),Ee=Ko(_e.current);return Ee.addEventListener("resize",be),()=>{be.clear(),Ee.removeEventListener("resize",be)}},[F,z,M]),ee.useEffect(()=>{z||Ke()},[z,Ke]),q.jsx(fe,{nodeRef:_e,onEnter:Re,onEntered:Z,onEntering:De,onExit:Ie,onExited:Le,onExiting:Me,addEndListener:$e,appear:u,in:z,timeout:Q,...he,children:(be,{ownerState:Ee,...We})=>ee.cloneElement(I,{ref:ge,style:{visibility:be==="exited"&&!z?"hidden":void 0,...G,...I.props.style},...We})})});function W3(e){return Kt("MuiDrawer",e)}Yt("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const yk=(e,t)=>{const{ownerState:o}=e;return[t.root,(o.variant==="permanent"||o.variant==="persistent")&&t.docked,t.modal]},G3=e=>{const{classes:t,anchor:o,variant:l}=e,p={root:["root",`anchor${ht(o)}`],docked:[(l==="permanent"||l==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${ht(o)}`,l!=="temporary"&&`paperAnchorDocked${ht(o)}`]};return Jt(p,W3,t)},H3=at(z0,{name:"MuiDrawer",slot:"Root",overridesResolver:yk})(lr(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),q3=at("div",{shouldForwardProp:zi,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:yk})({flex:"0 0 auto"}),Z3=at(Vu,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`paperAnchor${ht(o.anchor)}`],o.variant!=="temporary"&&t[`paperAnchorDocked${ht(o.anchor)}`]]}})(lr(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),_k={left:"right",right:"left",top:"down",bottom:"up"};function X3(e){return["left","right"].includes(e)}function K3({direction:e},t){return e==="rtl"&&X3(t)?_k[t]:t}const Y3=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiDrawer"}),p=Jl(),m=NT(),g={enter:p.transitions.duration.enteringScreen,exit:p.transitions.duration.leavingScreen},{anchor:u="left",BackdropProps:I,children:M,className:F,elevation:L=16,hideBackdrop:z=!1,ModalProps:{BackdropProps:J,...H}={},onClose:re,open:le=!1,PaperProps:V={},SlideProps:U,TransitionComponent:G,transitionDuration:Q=g,variant:fe="temporary",slots:he={},slotProps:_e={},...ge}=l,Ae=ee.useRef(!1);ee.useEffect(()=>{Ae.current=!0},[]);const Re=K3({direction:m?"rtl":"ltr"},u),Z={...l,anchor:u,elevation:L,open:le,variant:fe,...ge},Me=G3(Z),Ie={slots:{transition:G,...he},slotProps:{paper:V,transition:U,..._e,backdrop:rk(_e.backdrop||{...I,...J},{transitionDuration:Q})}},[Le,$e]=pr("root",{ref:o,elementType:H3,className:wt(Me.root,Me.modal,F),shouldForwardComponentProp:!0,ownerState:Z,externalForwardedProps:{...Ie,...ge,...H},additionalProps:{open:le,onClose:re,hideBackdrop:z,slots:{backdrop:Ie.slots.backdrop},slotProps:{backdrop:Ie.slotProps.backdrop}}}),[Ke,be]=pr("paper",{elementType:Z3,shouldForwardComponentProp:!0,className:wt(Me.paper,V.className),ownerState:Z,externalForwardedProps:Ie,additionalProps:{elevation:fe==="temporary"?L:0,square:!0,...fe==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[Ee,We]=pr("docked",{elementType:q3,ref:o,className:wt(Me.root,Me.docked,F),ownerState:Z,externalForwardedProps:Ie,additionalProps:ge}),[Ze,Ge]=pr("transition",{elementType:U3,ownerState:Z,externalForwardedProps:Ie,additionalProps:{in:le,direction:_k[Re],timeout:Q,appear:Ae.current}}),St=q.jsx(Ke,{...be,children:M});if(fe==="permanent")return q.jsx(Ee,{...We,children:St});const Dt=q.jsx(Ze,{...Ge,children:St});return fe==="persistent"?q.jsx(Ee,{...We,children:Dt}):q.jsx(Le,{...$e,children:Dt})});function J3(e){return Kt("MuiFab",e)}const z2=Yt("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),Q3=e=>{const{color:t,variant:o,classes:l,size:p}=e,m={root:["root",o,`size${ht(p)}`,t==="inherit"?"colorInherit":t]},g=Jt(m,J3,l);return{...l,...g}},e4=at(Uu,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>zi(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`size${ht(o.size)}`],o.color==="inherit"&&t.colorInherit,t[ht(o.size)],t[o.color]]}})(lr(({theme:e})=>{var t,o;return{...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:(o=(t=e.palette).getContrastText)==null?void 0:o.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${z2.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),lr(({theme:e})=>({variants:[...Object.entries(e.palette).filter(Pi(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),lr(({theme:e})=>({[`&.${z2.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),R2=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiFab"}),{children:p,className:m,color:g="default",component:u="button",disabled:I=!1,disableFocusRipple:M=!1,focusVisibleClassName:F,size:L="large",variant:z="circular",...J}=l,H={...l,color:g,component:u,disabled:I,disableFocusRipple:M,size:L,variant:z},re=Q3(H);return q.jsx(e4,{className:wt(re.root,m),component:u,disabled:I,focusRipple:!M,focusVisibleClassName:wt(re.focusVisible,F),ownerState:H,ref:o,...J,classes:re,children:p})}),t4=e=>{const{classes:t,disableUnderline:o,startAdornment:l,endAdornment:p,size:m,hiddenLabel:g,multiline:u}=e,I={root:["root",!o&&"underline",l&&"adornedStart",p&&"adornedEnd",m==="small"&&`size${ht(m)}`,g&&"hiddenLabel",u&&"multiline"],input:["input"]},M=Jt(I,xL,t);return{...t,...M}},r4=at(Ug,{shouldForwardProp:e=>zi(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...jg(e,t),!o.disableUnderline&&t.underline]}})(lr(({theme:e})=>{const t=e.palette.mode==="light",o=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",l=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",p=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",m=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:l,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:p,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:l}},[`&.${Pl.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:l},[`&.${Pl.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:m},variants:[{props:({ownerState:g})=>!g.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Pl.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Pl.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Pl.disabled}, .${Pl.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Pl.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Pi()).map(([g])=>{var u;return{props:{disableUnderline:!1,color:g},style:{"&::after":{borderBottom:`2px solid ${(u=(e.vars||e).palette[g])==null?void 0:u.main}`}}}}),{props:({ownerState:g})=>g.startAdornment,style:{paddingLeft:12}},{props:({ownerState:g})=>g.endAdornment,style:{paddingRight:12}},{props:({ownerState:g})=>g.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:g,size:u})=>g.multiline&&u==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:g})=>g.multiline&&g.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:g})=>g.multiline&&g.hiddenLabel&&g.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),n4=at(Wg,{name:"MuiFilledInput",slot:"Input",overridesResolver:Vg})(lr(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),R0=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiFilledInput"}),{disableUnderline:p=!1,components:m={},componentsProps:g,fullWidth:u=!1,hiddenLabel:I,inputComponent:M="input",multiline:F=!1,slotProps:L,slots:z={},type:J="text",...H}=l,re={...l,disableUnderline:p,fullWidth:u,inputComponent:M,multiline:F,type:J},le=t4(l),V={root:{ownerState:re},input:{ownerState:re}},U=L??g?gi(V,L??g):V,G=z.root??m.Root??r4,Q=z.input??m.Input??n4;return q.jsx(A0,{slots:{root:G,input:Q},slotProps:U,fullWidth:u,inputComponent:M,multiline:F,ref:o,type:J,...H,classes:le})});R0.muiName="Input";function i4(e){return Kt("MuiFormControl",e)}Yt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const o4=e=>{const{classes:t,margin:o,fullWidth:l}=e,p={root:["root",o!=="none"&&`margin${ht(o)}`,l&&"fullWidth"]};return Jt(p,i4,t)},s4=at("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`margin${ht(o.margin)}`],o.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),vk=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiFormControl"}),{children:p,className:m,color:g="primary",component:u="div",disabled:I=!1,error:M=!1,focused:F,fullWidth:L=!1,hiddenLabel:z=!1,margin:J="none",required:H=!1,size:re="medium",variant:le="outlined",...V}=l,U={...l,color:g,component:u,disabled:I,error:M,fullWidth:L,hiddenLabel:z,margin:J,required:H,size:re,variant:le},G=o4(U),[Q,fe]=ee.useState(()=>{let Le=!1;return p&&ee.Children.forEach(p,$e=>{if(!Dd($e,["Input","Select"]))return;const Ke=Dd($e,["Select"])?$e.props.input:$e;Ke&&mL(Ke.props)&&(Le=!0)}),Le}),[he,_e]=ee.useState(()=>{let Le=!1;return p&&ee.Children.forEach(p,$e=>{Dd($e,["Input","Select"])&&(Um($e.props,!0)||Um($e.props.inputProps,!0))&&(Le=!0)}),Le}),[ge,Ae]=ee.useState(!1);I&&ge&&Ae(!1);const Re=F!==void 0&&!I?F:ge;let De;ee.useRef(!1);const Z=ee.useCallback(()=>{_e(!0)},[]),Me=ee.useCallback(()=>{_e(!1)},[]),Ie=ee.useMemo(()=>({adornedStart:Q,setAdornedStart:fe,color:g,disabled:I,error:M,filled:he,focused:Re,fullWidth:L,hiddenLabel:z,size:re,onBlur:()=>{Ae(!1)},onFocus:()=>{Ae(!0)},onEmpty:Me,onFilled:Z,registerEffect:De,required:H,variant:le}),[Q,g,I,M,he,Re,L,z,De,Me,Z,H,re,le]);return q.jsx(M0.Provider,{value:Ie,children:q.jsx(s4,{as:u,ownerState:U,className:wt(G.root,m),ref:o,...V,children:p})})});function a4(e){return Kt("MuiFormHelperText",e)}const D2=Yt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var L2;const l4=e=>{const{classes:t,contained:o,size:l,disabled:p,error:m,filled:g,focused:u,required:I}=e,M={root:["root",p&&"disabled",m&&"error",l&&`size${ht(l)}`,o&&"contained",u&&"focused",g&&"filled",I&&"required"]};return Jt(M,a4,t)},c4=at("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.size&&t[`size${ht(o.size)}`],o.contained&&t.contained,o.filled&&t.filled]}})(lr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${D2.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${D2.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),u4=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiFormHelperText"}),{children:p,className:m,component:g="p",disabled:u,error:I,filled:M,focused:F,margin:L,required:z,variant:J,...H}=l,re=Hu(),le=Gu({props:l,muiFormControl:re,states:["variant","size","disabled","error","filled","focused","required"]}),V={...l,component:g,contained:le.variant==="filled"||le.variant==="outlined",variant:le.variant,size:le.size,disabled:le.disabled,error:le.error,filled:le.filled,focused:le.focused,required:le.required};delete V.ownerState;const U=l4(V);return q.jsx(c4,{as:g,className:wt(U.root,m),ref:o,...H,ownerState:V,children:p===" "?L2||(L2=q.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):p})});function h4(e){return Kt("MuiFormLabel",e)}const Bd=Yt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),d4=e=>{const{classes:t,color:o,focused:l,disabled:p,error:m,filled:g,required:u}=e,I={root:["root",`color${ht(o)}`,p&&"disabled",m&&"error",g&&"filled",l&&"focused",u&&"required"],asterisk:["asterisk",m&&"error"]};return Jt(I,h4,t)},p4=at("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color==="secondary"&&t.colorSecondary,o.filled&&t.filled]}})(lr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Pi()).map(([t])=>({props:{color:t},style:{[`&.${Bd.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${Bd.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Bd.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),f4=at("span",{name:"MuiFormLabel",slot:"Asterisk"})(lr(({theme:e})=>({[`&.${Bd.error}`]:{color:(e.vars||e).palette.error.main}}))),m4=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiFormLabel"}),{children:p,className:m,color:g,component:u="label",disabled:I,error:M,filled:F,focused:L,required:z,...J}=l,H=Hu(),re=Gu({props:l,muiFormControl:H,states:["color","required","focused","disabled","error","filled"]}),le={...l,color:re.color||"primary",component:u,disabled:re.disabled,error:re.error,filled:re.filled,focused:re.focused,required:re.required},V=d4(le);return q.jsxs(p4,{as:u,ownerState:le,className:wt(V.root,m),ref:o,...J,children:[p,re.required&&q.jsxs(f4,{ownerState:le,"aria-hidden":!0,className:V.asterisk,children:["","*"]})]})}),Al=i5({createStyledComponent:at("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>Qt({props:e,name:"MuiGrid"}),useTheme:Jl});function ex(e){return`scale(${e}, ${e**2})`}const g4={entering:{opacity:1,transform:ex(1)},entered:{opacity:1,transform:"none"}},j_=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),tx=ee.forwardRef(function(t,o){const{addEndListener:l,appear:p=!0,children:m,easing:g,in:u,onEnter:I,onEntered:M,onEntering:F,onExit:L,onExited:z,onExiting:J,style:H,timeout:re="auto",TransitionComponent:le=Yo,...V}=t,U=sk(),G=ee.useRef(),Q=Jl(),fe=ee.useRef(null),he=Hn(fe,Wu(m),o),_e=Le=>$e=>{if(Le){const Ke=fe.current;$e===void 0?Le(Ke):Le(Ke,$e)}},ge=_e(F),Ae=_e((Le,$e)=>{P0(Le);const{duration:Ke,delay:be,easing:Ee}=Ru({style:H,timeout:re,easing:g},{mode:"enter"});let We;re==="auto"?(We=Q.transitions.getAutoHeightDuration(Le.clientHeight),G.current=We):We=Ke,Le.style.transition=[Q.transitions.create("opacity",{duration:We,delay:be}),Q.transitions.create("transform",{duration:j_?We:We*.666,delay:be,easing:Ee})].join(","),I&&I(Le,$e)}),Re=_e(M),De=_e(J),Z=_e(Le=>{const{duration:$e,delay:Ke,easing:be}=Ru({style:H,timeout:re,easing:g},{mode:"exit"});let Ee;re==="auto"?(Ee=Q.transitions.getAutoHeightDuration(Le.clientHeight),G.current=Ee):Ee=$e,Le.style.transition=[Q.transitions.create("opacity",{duration:Ee,delay:Ke}),Q.transitions.create("transform",{duration:j_?Ee:Ee*.666,delay:j_?Ke:Ke||Ee*.333,easing:be})].join(","),Le.style.opacity=0,Le.style.transform=ex(.75),L&&L(Le)}),Me=_e(z),Ie=Le=>{re==="auto"&&U.start(G.current||0,Le),l&&l(fe.current,Le)};return q.jsx(le,{appear:p,in:u,nodeRef:fe,onEnter:Ae,onEntered:Re,onEntering:ge,onExit:Z,onExited:Me,onExiting:De,addEndListener:Ie,timeout:re==="auto"?null:re,...V,children:(Le,{ownerState:$e,...Ke})=>ee.cloneElement(m,{style:{opacity:0,transform:ex(.75),visibility:Le==="exited"&&!u?"hidden":void 0,...g4[Le],...H,...m.props.style},ref:he,...Ke})})});tx&&(tx.muiSupportAuto=!0);const y4=e=>{const{classes:t,disableUnderline:o}=e,p=Jt({root:["root",!o&&"underline"],input:["input"]},_L,t);return{...t,...p}},_4=at(Ug,{shouldForwardProp:e=>zi(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...jg(e,t),!o.disableUnderline&&t.underline]}})(lr(({theme:e})=>{let o=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(o=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:l})=>l.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:l})=>!l.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${dd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${dd.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${dd.disabled}, .${dd.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${o}`}},[`&.${dd.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Pi()).map(([l])=>({props:{color:l,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[l].main}`}}}))]}})),v4=at(Wg,{name:"MuiInput",slot:"Input",overridesResolver:Vg})({}),D0=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiInput"}),{disableUnderline:p=!1,components:m={},componentsProps:g,fullWidth:u=!1,inputComponent:I="input",multiline:M=!1,slotProps:F,slots:L={},type:z="text",...J}=l,H=y4(l),le={root:{ownerState:{disableUnderline:p}}},V=F??g?gi(F??g,le):le,U=L.root??m.Root??_4,G=L.input??m.Input??v4;return q.jsx(A0,{slots:{root:U,input:G},slotProps:V,fullWidth:u,inputComponent:I,multiline:M,ref:o,type:z,...J,classes:H})});D0.muiName="Input";function x4(e){return Kt("MuiInputLabel",e)}Yt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const b4=e=>{const{classes:t,formControl:o,size:l,shrink:p,disableAnimation:m,variant:g,required:u}=e,I={root:["root",o&&"formControl",!m&&"animated",p&&"shrink",l&&l!=="medium"&&`size${ht(l)}`,g],asterisk:[u&&"asterisk"]},M=Jt(I,x4,t);return{...t,...M}},w4=at(m4,{shouldForwardProp:e=>zi(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${Bd.asterisk}`]:t.asterisk},t.root,o.formControl&&t.formControl,o.size==="small"&&t.sizeSmall,o.shrink&&t.shrink,!o.disableAnimation&&t.animated,o.focused&&t.focused,t[o.variant]]}})(lr(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:o})=>t==="filled"&&o.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:o,size:l})=>t==="filled"&&o.shrink&&l==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:o})=>t==="outlined"&&o.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),xk=ee.forwardRef(function(t,o){const l=Qt({name:"MuiInputLabel",props:t}),{disableAnimation:p=!1,margin:m,shrink:g,variant:u,className:I,...M}=l,F=Hu();let L=g;typeof L>"u"&&F&&(L=F.filled||F.focused||F.adornedStart);const z=Gu({props:l,muiFormControl:F,states:["size","variant","required","focused"]}),J={...l,disableAnimation:p,formControl:F,shrink:L,size:z.size,variant:z.variant,required:z.required,focused:z.focused},H=b4(J);return q.jsx(w4,{"data-shrink":L,ref:o,className:wt(H.root,I),...M,ownerState:J,classes:H})}),vs=ee.createContext({});function S4(e){return Kt("MuiList",e)}Yt("MuiList",["root","padding","dense","subheader"]);const C4=e=>{const{classes:t,disablePadding:o,dense:l,subheader:p}=e;return Jt({root:["root",!o&&"padding",l&&"dense",p&&"subheader"]},S4,t)},T4=at("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disablePadding&&t.padding,o.dense&&t.dense,o.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),rx=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiList"}),{children:p,className:m,component:g="ul",dense:u=!1,disablePadding:I=!1,subheader:M,...F}=l,L=ee.useMemo(()=>({dense:u}),[u]),z={...l,component:g,dense:u,disablePadding:I},J=C4(z);return q.jsx(vs.Provider,{value:L,children:q.jsxs(T4,{as:g,className:wt(J.root,m),ref:o,ownerState:z,...F,children:[M,p]})})});function k4(e){return Kt("MuiListItem",e)}Yt("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function I4(e){return Kt("MuiListItemButton",e)}const ru=Yt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),E4=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters]},P4=e=>{const{alignItems:t,classes:o,dense:l,disabled:p,disableGutters:m,divider:g,selected:u}=e,M=Jt({root:["root",l&&"dense",!m&&"gutters",g&&"divider",p&&"disabled",t==="flex-start"&&"alignItemsFlexStart",u&&"selected"]},I4,o);return{...o,...M}},M4=at(Uu,{shouldForwardProp:e=>zi(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:E4})(lr(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ru.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${ru.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${ru.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${ru.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ru.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),A4=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiListItemButton"}),{alignItems:p="center",autoFocus:m=!1,component:g="div",children:u,dense:I=!1,disableGutters:M=!1,divider:F=!1,focusVisibleClassName:L,selected:z=!1,className:J,...H}=l,re=ee.useContext(vs),le=ee.useMemo(()=>({dense:I||re.dense||!1,alignItems:p,disableGutters:M}),[p,re.dense,I,M]),V=ee.useRef(null);Zo(()=>{m&&V.current&&V.current.focus()},[m]);const U={...l,alignItems:p,dense:le.dense,disableGutters:M,divider:F,selected:z},G=P4(U),Q=Hn(V,o);return q.jsx(vs.Provider,{value:le,children:q.jsx(M4,{ref:Q,href:H.href||H.to,component:(H.href||H.to)&&g==="div"?"button":g,focusVisibleClassName:wt(G.focusVisible,L),ownerState:U,className:wt(G.root,J),...H,classes:G,children:u})})});function z4(e){return Kt("MuiListItemSecondaryAction",e)}Yt("MuiListItemSecondaryAction",["root","disableGutters"]);const R4=e=>{const{disableGutters:t,classes:o}=e;return Jt({root:["root",t&&"disableGutters"]},z4,o)},D4=at("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),bk=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiListItemSecondaryAction"}),{className:p,...m}=l,g=ee.useContext(vs),u={...l,disableGutters:g.disableGutters},I=R4(u);return q.jsx(D4,{className:wt(I.root,p),ownerState:u,ref:o,...m})});bk.muiName="ListItemSecondaryAction";const L4=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters,!o.disablePadding&&t.padding,o.hasSecondaryAction&&t.secondaryAction]},B4=e=>{const{alignItems:t,classes:o,dense:l,disableGutters:p,disablePadding:m,divider:g,hasSecondaryAction:u}=e;return Jt({root:["root",l&&"dense",!p&&"gutters",!m&&"padding",g&&"divider",t==="flex-start"&&"alignItemsFlexStart",u&&"secondaryAction"],container:["container"],secondaryAction:["secondaryAction"]},k4,o)},F4=at("div",{name:"MuiListItem",slot:"Root",overridesResolver:L4})(lr(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${ru.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),O4=at("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),zl=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiListItem"}),{alignItems:p="center",children:m,className:g,component:u,components:I={},componentsProps:M={},ContainerComponent:F="li",ContainerProps:{className:L,...z}={},dense:J=!1,disableGutters:H=!1,disablePadding:re=!1,divider:le=!1,secondaryAction:V,slotProps:U={},slots:G={},...Q}=l,fe=ee.useContext(vs),he=ee.useMemo(()=>({dense:J||fe.dense||!1,alignItems:p,disableGutters:H}),[p,fe.dense,J,H]),_e=ee.useRef(null),ge=ee.Children.toArray(m),Ae=ge.length&&Dd(ge[ge.length-1],["ListItemSecondaryAction"]),Re={...l,alignItems:p,dense:he.dense,disableGutters:H,disablePadding:re,divider:le,hasSecondaryAction:Ae},De=B4(Re),Z=Hn(_e,o),Me={slots:G,slotProps:U},[Ie,Le]=pr("secondaryAction",{elementType:bk,externalForwardedProps:Me,ownerState:Re,className:De.secondaryAction}),$e=G.root||I.Root||F4,Ke=U.root||M.root||{},be={className:wt(De.root,Ke.className,g),...Q};let Ee=u||"li";return Ae?(Ee=!be.component&&!u?"div":Ee,F==="li"&&(Ee==="li"?Ee="div":be.component==="li"&&(be.component="div")),q.jsx(vs.Provider,{value:he,children:q.jsxs(O4,{as:F,className:wt(De.container,L),ref:Z,ownerState:Re,...z,children:[q.jsx($e,{...Ke,...!Du($e)&&{as:Ee,ownerState:{...Re,...Ke.ownerState}},...be,children:ge}),ge.pop()]})})):q.jsx(vs.Provider,{value:he,children:q.jsxs($e,{...Ke,as:Ee,ref:Z,...!Du($e)&&{ownerState:{...Re,...Ke.ownerState}},...be,children:[ge,V&&q.jsx(Ie,{...Le,children:V})]})})}),B2=Yt("MuiListItemIcon",["root","alignItemsFlexStart"]);function $4(e){return Kt("MuiListItemText",e)}const mu=Yt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),N4=e=>{const{classes:t,inset:o,primary:l,secondary:p,dense:m}=e;return Jt({root:["root",o&&"inset",m&&"dense",l&&p&&"multiline"],primary:["primary"],secondary:["secondary"]},$4,t)},j4=at("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${mu.primary}`]:t.primary},{[`& .${mu.secondary}`]:t.secondary},t.root,o.inset&&t.inset,o.primary&&o.secondary&&t.multiline,o.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${b2.root}:where(& .${mu.primary})`]:{display:"block"},[`.${b2.root}:where(& .${mu.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),F2=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiListItemText"}),{children:p,className:m,disableTypography:g=!1,inset:u=!1,primary:I,primaryTypographyProps:M,secondary:F,secondaryTypographyProps:L,slots:z={},slotProps:J={},...H}=l,{dense:re}=ee.useContext(vs);let le=I??p,V=F;const U={...l,disableTypography:g,inset:u,primary:!!le,secondary:!!V,dense:re},G=N4(U),Q={slots:z,slotProps:{primary:M,secondary:L,...J}},[fe,he]=pr("root",{className:wt(G.root,m),elementType:j4,externalForwardedProps:{...Q,...H},ownerState:U,ref:o}),[_e,ge]=pr("primary",{className:G.primary,elementType:Gt,externalForwardedProps:Q,ownerState:U}),[Ae,Re]=pr("secondary",{className:G.secondary,elementType:Gt,externalForwardedProps:Q,ownerState:U});return le!=null&&le.type!==Gt&&!g&&(le=q.jsx(_e,{variant:re?"body2":"body1",component:ge!=null&&ge.variant?void 0:"span",...ge,children:le})),V!=null&&V.type!==Gt&&!g&&(V=q.jsx(Ae,{variant:"body2",color:"textSecondary",...Re,children:V})),q.jsxs(fe,{...he,children:[le,V]})});function V_(e,t,o){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:o?null:e.firstChild}function O2(e,t,o){return e===t?o?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:o?null:e.lastChild}function wk(e,t){if(t===void 0)return!0;let o=e.innerText;return o===void 0&&(o=e.textContent),o=o.trim().toLowerCase(),o.length===0?!1:t.repeating?o[0]===t.keys[0]:o.startsWith(t.keys.join(""))}function pd(e,t,o,l,p,m){let g=!1,u=p(e,t,t?o:!1);for(;u;){if(u===e.firstChild){if(g)return!1;g=!0}const I=l?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!wk(u,m)||I)u=p(e,u,o);else return u.focus(),!0}return!1}const V4=ee.forwardRef(function(t,o){const{actions:l,autoFocus:p=!1,autoFocusItem:m=!1,children:g,className:u,disabledItemsFocusable:I=!1,disableListWrap:M=!1,onKeyDown:F,variant:L="selectedMenu",...z}=t,J=ee.useRef(null),H=ee.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Zo(()=>{p&&J.current.focus()},[p]),ee.useImperativeHandle(l,()=>({adjustStyleForScrollbar:(G,{direction:Q})=>{const fe=!J.current.style.width;if(G.clientHeight<J.current.clientHeight&&fe){const he=`${mk(Ko(G))}px`;J.current.style[Q==="rtl"?"paddingLeft":"paddingRight"]=he,J.current.style.width=`calc(100% + ${he})`}return J.current}}),[]);const re=G=>{const Q=J.current,fe=G.key;if(G.ctrlKey||G.metaKey||G.altKey){F&&F(G);return}const _e=Sd(Xo(Q));if(fe==="ArrowDown")G.preventDefault(),pd(Q,_e,M,I,V_);else if(fe==="ArrowUp")G.preventDefault(),pd(Q,_e,M,I,O2);else if(fe==="Home")G.preventDefault(),pd(Q,null,M,I,V_);else if(fe==="End")G.preventDefault(),pd(Q,null,M,I,O2);else if(fe.length===1){const ge=H.current,Ae=fe.toLowerCase(),Re=performance.now();ge.keys.length>0&&(Re-ge.lastTime>500?(ge.keys=[],ge.repeating=!0,ge.previousKeyMatched=!0):ge.repeating&&Ae!==ge.keys[0]&&(ge.repeating=!1)),ge.lastTime=Re,ge.keys.push(Ae);const De=_e&&!ge.repeating&&wk(_e,ge);ge.previousKeyMatched&&(De||pd(Q,_e,!1,I,V_,ge))?G.preventDefault():ge.previousKeyMatched=!1}F&&F(G)},le=Hn(J,o);let V=-1;ee.Children.forEach(g,(G,Q)=>{if(!ee.isValidElement(G)){V===Q&&(V+=1,V>=g.length&&(V=-1));return}G.props.disabled||(L==="selectedMenu"&&G.props.selected||V===-1)&&(V=Q),V===Q&&(G.props.disabled||G.props.muiSkipListHighlight||G.type.muiSkipListHighlight)&&(V+=1,V>=g.length&&(V=-1))});const U=ee.Children.map(g,(G,Q)=>{if(Q===V){const fe={};return m&&(fe.autoFocus=!0),G.props.tabIndex===void 0&&L==="selectedMenu"&&(fe.tabIndex=0),ee.cloneElement(G,fe)}return G});return q.jsx(rx,{role:"menu",ref:le,className:u,onKeyDown:re,tabIndex:p?0:-1,...z,children:U})});function U4(e){return Kt("MuiPopover",e)}Yt("MuiPopover",["root","paper"]);function $2(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.height/2:t==="bottom"&&(o=e.height),o}function N2(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.width/2:t==="right"&&(o=e.width),o}function j2(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Zf(e){return typeof e=="function"?e():e}const W4=e=>{const{classes:t}=e;return Jt({root:["root"],paper:["paper"]},U4,t)},G4=at(z0,{name:"MuiPopover",slot:"Root"})({}),Sk=at(Vu,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),H4=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiPopover"}),{action:p,anchorEl:m,anchorOrigin:g={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:I="anchorEl",children:M,className:F,container:L,elevation:z=8,marginThreshold:J=16,open:H,PaperProps:re={},slots:le={},slotProps:V={},transformOrigin:U={vertical:"top",horizontal:"left"},TransitionComponent:G,transitionDuration:Q="auto",TransitionProps:fe={},disableScrollLock:he=!1,..._e}=l,ge=ee.useRef(),Ae={...l,anchorOrigin:g,anchorReference:I,elevation:z,marginThreshold:J,transformOrigin:U,TransitionComponent:G,transitionDuration:Q,TransitionProps:fe},Re=W4(Ae),De=ee.useCallback(()=>{if(I==="anchorPosition")return u;const Ct=Zf(m),Ht=(Ct&&Ct.nodeType===1?Ct:Xo(ge.current).body).getBoundingClientRect();return{top:Ht.top+$2(Ht,g.vertical),left:Ht.left+N2(Ht,g.horizontal)}},[m,g.horizontal,g.vertical,u,I]),Z=ee.useCallback(Ct=>({vertical:$2(Ct,U.vertical),horizontal:N2(Ct,U.horizontal)}),[U.horizontal,U.vertical]),Me=ee.useCallback(Ct=>{const qt={width:Ct.offsetWidth,height:Ct.offsetHeight},Ht=Z(qt);if(I==="none")return{top:null,left:null,transformOrigin:j2(Ht)};const yr=De();let Nt=yr.top-Ht.vertical,sr=yr.left-Ht.horizontal;const ze=Nt+qt.height,Or=sr+qt.width,Cr=Ko(Zf(m)),At=Cr.innerHeight-J,er=Cr.innerWidth-J;if(J!==null&&Nt<J){const xr=Nt-J;Nt-=xr,Ht.vertical+=xr}else if(J!==null&&ze>At){const xr=ze-At;Nt-=xr,Ht.vertical+=xr}if(J!==null&&sr<J){const xr=sr-J;sr-=xr,Ht.horizontal+=xr}else if(Or>er){const xr=Or-er;sr-=xr,Ht.horizontal+=xr}return{top:`${Math.round(Nt)}px`,left:`${Math.round(sr)}px`,transformOrigin:j2(Ht)}},[m,I,De,Z,J]),[Ie,Le]=ee.useState(H),$e=ee.useCallback(()=>{const Ct=ge.current;if(!Ct)return;const qt=Me(Ct);qt.top!==null&&Ct.style.setProperty("top",qt.top),qt.left!==null&&(Ct.style.left=qt.left),Ct.style.transformOrigin=qt.transformOrigin,Le(!0)},[Me]);ee.useEffect(()=>(he&&window.addEventListener("scroll",$e),()=>window.removeEventListener("scroll",$e)),[m,he,$e]);const Ke=()=>{$e()},be=()=>{Le(!1)};ee.useEffect(()=>{H&&$e()}),ee.useImperativeHandle(p,()=>H?{updatePosition:()=>{$e()}}:null,[H,$e]),ee.useEffect(()=>{if(!H)return;const Ct=T0(()=>{$e()}),qt=Ko(Zf(m));return qt.addEventListener("resize",Ct),()=>{Ct.clear(),qt.removeEventListener("resize",Ct)}},[m,H,$e]);let Ee=Q;const We={slots:{transition:G,...le},slotProps:{transition:fe,paper:re,...V}},[Ze,Ge]=pr("transition",{elementType:tx,externalForwardedProps:We,ownerState:Ae,getSlotProps:Ct=>({...Ct,onEntering:(qt,Ht)=>{var yr;(yr=Ct.onEntering)==null||yr.call(Ct,qt,Ht),Ke()},onExited:qt=>{var Ht;(Ht=Ct.onExited)==null||Ht.call(Ct,qt),be()}}),additionalProps:{appear:!0,in:H}});Q==="auto"&&!Ze.muiSupportAuto&&(Ee=void 0);const St=L||(m?Xo(Zf(m)).body:void 0),[Dt,{slots:$t,slotProps:Vt,...Rt}]=pr("root",{ref:o,elementType:G4,externalForwardedProps:{...We,..._e},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:le.backdrop},slotProps:{backdrop:rk(typeof V.backdrop=="function"?V.backdrop(Ae):V.backdrop,{invisible:!0})},container:St,open:H},ownerState:Ae,className:wt(Re.root,F)}),[cr,Ut]=pr("paper",{ref:ge,className:Re.paper,elementType:Sk,externalForwardedProps:We,shouldForwardComponentProp:!0,additionalProps:{elevation:z,style:Ie?void 0:{opacity:0}},ownerState:Ae});return q.jsx(Dt,{...Rt,...!Du(Dt)&&{slots:$t,slotProps:Vt,disableScrollLock:he},children:q.jsx(Ze,{...Ge,timeout:Ee,children:q.jsx(cr,{...Ut,children:M})})})});function q4(e){return Kt("MuiMenu",e)}Yt("MuiMenu",["root","paper","list"]);const Z4={vertical:"top",horizontal:"right"},X4={vertical:"top",horizontal:"left"},K4=e=>{const{classes:t}=e;return Jt({root:["root"],paper:["paper"],list:["list"]},q4,t)},Y4=at(H4,{shouldForwardProp:e=>zi(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),J4=at(Sk,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Q4=at(V4,{name:"MuiMenu",slot:"List"})({outline:0}),eB=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiMenu"}),{autoFocus:p=!0,children:m,className:g,disableAutoFocusItem:u=!1,MenuListProps:I={},onClose:M,open:F,PaperProps:L={},PopoverClasses:z,transitionDuration:J="auto",TransitionProps:{onEntering:H,...re}={},variant:le="selectedMenu",slots:V={},slotProps:U={},...G}=l,Q=NT(),fe={...l,autoFocus:p,disableAutoFocusItem:u,MenuListProps:I,onEntering:H,PaperProps:L,transitionDuration:J,TransitionProps:re,variant:le},he=K4(fe),_e=p&&!u&&F,ge=ee.useRef(null),Ae=(Ee,We)=>{ge.current&&ge.current.adjustStyleForScrollbar(Ee,{direction:Q?"rtl":"ltr"}),H&&H(Ee,We)},Re=Ee=>{Ee.key==="Tab"&&(Ee.preventDefault(),M&&M(Ee,"tabKeyDown"))};let De=-1;ee.Children.map(m,(Ee,We)=>{ee.isValidElement(Ee)&&(Ee.props.disabled||(le==="selectedMenu"&&Ee.props.selected||De===-1)&&(De=We))});const Z={slots:V,slotProps:{list:I,transition:re,paper:L,...U}},Me=cL({elementType:V.root,externalSlotProps:U.root,ownerState:fe,className:[he.root,g]}),[Ie,Le]=pr("paper",{className:he.paper,elementType:J4,externalForwardedProps:Z,shouldForwardComponentProp:!0,ownerState:fe}),[$e,Ke]=pr("list",{className:wt(he.list,I.className),elementType:Q4,shouldForwardComponentProp:!0,externalForwardedProps:Z,getSlotProps:Ee=>({...Ee,onKeyDown:We=>{var Ze;Re(We),(Ze=Ee.onKeyDown)==null||Ze.call(Ee,We)}}),ownerState:fe}),be=typeof Z.slotProps.transition=="function"?Z.slotProps.transition(fe):Z.slotProps.transition;return q.jsx(Y4,{onClose:M,anchorOrigin:{vertical:"bottom",horizontal:Q?"right":"left"},transformOrigin:Q?Z4:X4,slots:{root:V.root,paper:Ie,backdrop:V.backdrop,...V.transition&&{transition:V.transition}},slotProps:{root:Me,paper:Le,backdrop:typeof U.backdrop=="function"?U.backdrop(fe):U.backdrop,transition:{...be,onEntering:(...Ee)=>{var We;Ae(...Ee),(We=be==null?void 0:be.onEntering)==null||We.call(be,...Ee)}}},open:F,ref:o,transitionDuration:J,ownerState:fe,...G,classes:z,children:q.jsx($e,{actions:ge,autoFocus:p&&(De===-1||u),autoFocusItem:_e,variant:le,...Ke,children:m})})});function tB(e){return Kt("MuiMenuItem",e)}const fd=Yt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),rB=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.divider&&t.divider,!o.disableGutters&&t.gutters]},nB=e=>{const{disabled:t,dense:o,divider:l,disableGutters:p,selected:m,classes:g}=e,I=Jt({root:["root",o&&"dense",t&&"disabled",!p&&"gutters",l&&"divider",m&&"selected"]},tB,g);return{...g,...I}},iB=at(Uu,{shouldForwardProp:e=>zi(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:rB})(lr(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${fd.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${fd.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${fd.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${fd.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${fd.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${A2.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${A2.inset}`]:{marginLeft:52},[`& .${mu.root}`]:{marginTop:0,marginBottom:0},[`& .${mu.inset}`]:{paddingLeft:36},[`& .${B2.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${B2.root} svg`]:{fontSize:"1.25rem"}}}]}))),V2=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiMenuItem"}),{autoFocus:p=!1,component:m="li",dense:g=!1,divider:u=!1,disableGutters:I=!1,focusVisibleClassName:M,role:F="menuitem",tabIndex:L,className:z,...J}=l,H=ee.useContext(vs),re=ee.useMemo(()=>({dense:g||H.dense||!1,disableGutters:I}),[H.dense,g,I]),le=ee.useRef(null);Zo(()=>{p&&le.current&&le.current.focus()},[p]);const V={...l,dense:re.dense,divider:u,disableGutters:I},U=nB(l),G=Hn(le,o);let Q;return l.disabled||(Q=L!==void 0?L:-1),q.jsx(vs.Provider,{value:re,children:q.jsx(iB,{ref:G,role:F,tabIndex:Q,component:m,focusVisibleClassName:wt(U.focusVisible,M),className:wt(U.root,z),...J,ownerState:V,classes:U})})});function oB(e){return Kt("MuiNativeSelect",e)}const L0=Yt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),sB=e=>{const{classes:t,variant:o,disabled:l,multiple:p,open:m,error:g}=e,u={select:["select",o,l&&"disabled",p&&"multiple",g&&"error"],icon:["icon",`icon${ht(o)}`,m&&"iconOpen",l&&"disabled"]};return Jt(u,oB,t)},Ck=at("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${L0.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),aB=at(Ck,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:zi,overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.select,t[o.variant],o.error&&t.error,{[`&.${L0.multiple}`]:t.multiple}]}})({}),Tk=at("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${L0.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),lB=at(Tk,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${ht(o.variant)}`],o.open&&t.iconOpen]}})({}),cB=ee.forwardRef(function(t,o){const{className:l,disabled:p,error:m,IconComponent:g,inputRef:u,variant:I="standard",...M}=t,F={...t,disabled:p,variant:I,error:m},L=sB(F);return q.jsxs(ee.Fragment,{children:[q.jsx(aB,{ownerState:F,className:wt(L.select,l),disabled:p,ref:u||o,...M}),t.multiple?null:q.jsx(lB,{as:g,ownerState:F,className:L.icon})]})});var U2;const uB=at("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:zi})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),hB=at("legend",{name:"MuiNotchedOutlined",shouldForwardProp:zi})(lr(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function dB(e){const{children:t,classes:o,className:l,label:p,notched:m,...g}=e,u=p!=null&&p!=="",I={...e,notched:m,withLabel:u};return q.jsx(uB,{"aria-hidden":!0,className:l,ownerState:I,...g,children:q.jsx(hB,{ownerState:I,children:u?q.jsx("span",{children:p}):U2||(U2=q.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const pB=e=>{const{classes:t}=e,l=Jt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},vL,t);return{...t,...l}},fB=at(Ug,{shouldForwardProp:e=>zi(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:jg})(lr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${ls.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${ls.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${ls.focused} .${ls.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Pi()).map(([o])=>({props:{color:o},style:{[`&.${ls.focused} .${ls.notchedOutline}`]:{borderColor:(e.vars||e).palette[o].main}}})),{props:{},style:{[`&.${ls.error} .${ls.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${ls.disabled} .${ls.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:14}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:14}},{props:({ownerState:o})=>o.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:o,size:l})=>o.multiline&&l==="small",style:{padding:"8.5px 14px"}}]}})),mB=at(dB,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(lr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),gB=at(Wg,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Vg})(lr(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),B0=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiOutlinedInput"}),{components:p={},fullWidth:m=!1,inputComponent:g="input",label:u,multiline:I=!1,notched:M,slots:F={},slotProps:L={},type:z="text",...J}=l,H=pB(l),re=Hu(),le=Gu({props:l,muiFormControl:re,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),V={...l,color:le.color||"primary",disabled:le.disabled,error:le.error,focused:le.focused,formControl:re,fullWidth:m,hiddenLabel:le.hiddenLabel,multiline:I,size:le.size,type:z},U=F.root??p.Root??fB,G=F.input??p.Input??gB,[Q,fe]=pr("notchedOutline",{elementType:mB,className:H.notchedOutline,shouldForwardComponentProp:!0,ownerState:V,externalForwardedProps:{slots:F,slotProps:L},additionalProps:{label:u!=null&&u!==""&&le.required?q.jsxs(ee.Fragment,{children:[u,"","*"]}):u}});return q.jsx(A0,{slots:{root:U,input:G},slotProps:L,renderSuffix:he=>q.jsx(Q,{...fe,notched:typeof M<"u"?M:!!(he.startAdornment||he.filled||he.focused)}),fullWidth:m,inputComponent:g,multiline:I,ref:o,type:z,...J,classes:{...H,notchedOutline:null}})});B0.muiName="Input";function kk(e){return Kt("MuiSelect",e)}const md=Yt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var W2;const yB=at(Ck,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`&.${md.select}`]:t.select},{[`&.${md.select}`]:t[o.variant]},{[`&.${md.error}`]:t.error},{[`&.${md.multiple}`]:t.multiple}]}})({[`&.${md.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),_B=at(Tk,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${ht(o.variant)}`],o.open&&t.iconOpen]}})({}),vB=at("input",{shouldForwardProp:e=>YT(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function G2(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function xB(e){return e==null||typeof e=="string"&&!e.trim()}const bB=e=>{const{classes:t,variant:o,disabled:l,multiple:p,open:m,error:g}=e,u={select:["select",o,l&&"disabled",p&&"multiple",g&&"error"],icon:["icon",`icon${ht(o)}`,m&&"iconOpen",l&&"disabled"],nativeInput:["nativeInput"]};return Jt(u,kk,t)},wB=ee.forwardRef(function(t,o){var ni,Ft,_i,Di;const{"aria-describedby":l,"aria-label":p,autoFocus:m,autoWidth:g,children:u,className:I,defaultOpen:M,defaultValue:F,disabled:L,displayEmpty:z,error:J=!1,IconComponent:H,inputRef:re,labelId:le,MenuProps:V={},multiple:U,name:G,onBlur:Q,onChange:fe,onClose:he,onFocus:_e,onKeyDown:ge,onMouseDown:Ae,onOpen:Re,open:De,readOnly:Z,renderValue:Me,required:Ie,SelectDisplayProps:Le={},tabIndex:$e,type:Ke,value:be,variant:Ee="standard",...We}=t,[Ze,Ge]=p2({controlled:be,default:F,name:"Select"}),[St,Dt]=p2({controlled:De,default:M,name:"Select"}),$t=ee.useRef(null),Vt=ee.useRef(null),[Rt,cr]=ee.useState(null),{current:Ut}=ee.useRef(De!=null),[Ct,qt]=ee.useState(),Ht=Hn(o,re),yr=ee.useCallback(kt=>{Vt.current=kt,kt&&cr(kt)},[]),Nt=Rt==null?void 0:Rt.parentNode;ee.useImperativeHandle(Ht,()=>({focus:()=>{Vt.current.focus()},node:$t.current,value:Ze}),[Ze]),ee.useEffect(()=>{M&&St&&Rt&&!Ut&&(qt(g?null:Nt.clientWidth),Vt.current.focus())},[Rt,g]),ee.useEffect(()=>{m&&Vt.current.focus()},[m]),ee.useEffect(()=>{if(!le)return;const kt=Xo(Vt.current).getElementById(le);if(kt){const ur=()=>{getSelection().isCollapsed&&Vt.current.focus()};return kt.addEventListener("click",ur),()=>{kt.removeEventListener("click",ur)}}},[le]);const sr=(kt,ur)=>{kt?Re&&Re(ur):he&&he(ur),Ut||(qt(g?null:Nt.clientWidth),Dt(kt))},ze=kt=>{Ae==null||Ae(kt),kt.button===0&&(kt.preventDefault(),Vt.current.focus(),sr(!0,kt))},Or=kt=>{sr(!1,kt)},Cr=ee.Children.toArray(u),At=kt=>{const ur=Cr.find(ne=>ne.props.value===kt.target.value);ur!==void 0&&(Ge(ur.props.value),fe&&fe(kt,ur))},er=kt=>ur=>{let ne;if(ur.currentTarget.hasAttribute("tabindex")){if(U){ne=Array.isArray(Ze)?Ze.slice():[];const O=Ze.indexOf(kt.props.value);O===-1?ne.push(kt.props.value):ne.splice(O,1)}else ne=kt.props.value;if(kt.props.onClick&&kt.props.onClick(ur),Ze!==ne&&(Ge(ne),fe)){const O=ur.nativeEvent||ur,$=new O.constructor(O.type,O);Object.defineProperty($,"target",{writable:!0,value:{value:ne,name:G}}),fe($,kt)}U||sr(!1,ur)}},xr=kt=>{Z||([" ","ArrowUp","ArrowDown","Enter"].includes(kt.key)&&(kt.preventDefault(),sr(!0,kt)),ge==null||ge(kt))},_t=Rt!==null&&St,_n=kt=>{!_t&&Q&&(Object.defineProperty(kt,"target",{writable:!0,value:{value:Ze,name:G}}),Q(kt))};delete We["aria-invalid"];let Tr,un;const En=[];let Ln=!1;(Um({value:Ze})||z)&&(Me?Tr=Me(Ze):Ln=!0);const Xe=Cr.map(kt=>{if(!ee.isValidElement(kt))return null;let ur;if(U){if(!Array.isArray(Ze))throw new Error(Xs(2));ur=Ze.some(ne=>G2(ne,kt.props.value)),ur&&Ln&&En.push(kt.props.children)}else ur=G2(Ze,kt.props.value),ur&&Ln&&(un=kt.props.children);return ee.cloneElement(kt,{"aria-selected":ur?"true":"false",onClick:er(kt),onKeyUp:ne=>{ne.key===" "&&ne.preventDefault(),kt.props.onKeyUp&&kt.props.onKeyUp(ne)},role:"option",selected:ur,value:void 0,"data-value":kt.props.value})});Ln&&(U?En.length===0?Tr=null:Tr=En.reduce((kt,ur,ne)=>(kt.push(ur),ne<En.length-1&&kt.push(", "),kt),[]):Tr=un);let hn=Ct;!g&&Ut&&Rt&&(hn=Nt.clientWidth);let ar;typeof $e<"u"?ar=$e:ar=L?null:0;const zt=Le.id||(G?`mui-component-select-${G}`:void 0),$r={...t,variant:Ee,value:Ze,open:_t,error:J},qe=bB($r),Tt={...V.PaperProps,...typeof((ni=V.slotProps)==null?void 0:ni.paper)=="function"?V.slotProps.paper($r):(Ft=V.slotProps)==null?void 0:Ft.paper},Pt={...V.MenuListProps,...typeof((_i=V.slotProps)==null?void 0:_i.list)=="function"?V.slotProps.list($r):(Di=V.slotProps)==null?void 0:Di.list},Pn=Nu();return q.jsxs(ee.Fragment,{children:[q.jsx(yB,{as:"div",ref:yr,tabIndex:ar,role:"combobox","aria-controls":_t?Pn:void 0,"aria-disabled":L?"true":void 0,"aria-expanded":_t?"true":"false","aria-haspopup":"listbox","aria-label":p,"aria-labelledby":[le,zt].filter(Boolean).join(" ")||void 0,"aria-describedby":l,"aria-required":Ie?"true":void 0,"aria-invalid":J?"true":void 0,onKeyDown:xr,onMouseDown:L||Z?null:ze,onBlur:_n,onFocus:_e,...Le,ownerState:$r,className:wt(Le.className,qe.select,I),id:zt,children:xB(Tr)?W2||(W2=q.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):Tr}),q.jsx(vB,{"aria-invalid":J,value:Array.isArray(Ze)?Ze.join(","):Ze,name:G,ref:$t,"aria-hidden":!0,onChange:At,tabIndex:-1,disabled:L,className:qe.nativeInput,autoFocus:m,required:Ie,...We,ownerState:$r}),q.jsx(_B,{as:H,className:qe.icon,ownerState:$r}),q.jsx(eB,{id:`menu-${G||""}`,anchorEl:Nt,open:_t,onClose:Or,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...V,slotProps:{...V.slotProps,list:{"aria-labelledby":le,role:"listbox","aria-multiselectable":U?"true":void 0,disableListWrap:!0,id:Pn,...Pt},paper:{...Tt,style:{minWidth:hn,...Tt!=null?Tt.style:null}}},children:Xe})]})}),SB=e=>{const{classes:t}=e,l=Jt({root:["root"]},kk,t);return{...t,...l}},F0={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>zi(e)&&e!=="variant"},CB=at(D0,F0)(""),TB=at(B0,F0)(""),kB=at(R0,F0)(""),O0=ee.forwardRef(function(t,o){const l=Qt({name:"MuiSelect",props:t}),{autoWidth:p=!1,children:m,classes:g={},className:u,defaultOpen:I=!1,displayEmpty:M=!1,IconComponent:F=bL,id:L,input:z,inputProps:J,label:H,labelId:re,MenuProps:le,multiple:V=!1,native:U=!1,onClose:G,onOpen:Q,open:fe,renderValue:he,SelectDisplayProps:_e,variant:ge="outlined",...Ae}=l,Re=U?cB:wB,De=Hu(),Z=Gu({props:l,muiFormControl:De,states:["variant","error"]}),Me=Z.variant||ge,Ie={...l,variant:Me,classes:g},Le=SB(Ie),{root:$e,...Ke}=Le,be=z||{standard:q.jsx(CB,{ownerState:Ie}),outlined:q.jsx(TB,{label:H,ownerState:Ie}),filled:q.jsx(kB,{ownerState:Ie})}[Me],Ee=Hn(o,Wu(be));return q.jsx(ee.Fragment,{children:ee.cloneElement(be,{inputComponent:Re,inputProps:{children:m,error:Z.error,IconComponent:F,variant:Me,type:void 0,multiple:V,...U?{id:L}:{autoWidth:p,defaultOpen:I,displayEmpty:M,labelId:re,MenuProps:le,onClose:G,onOpen:Q,open:fe,renderValue:he,SelectDisplayProps:{id:L,..._e}},...J,classes:J?gi(Ke,J.classes):Ke,...z?z.props.inputProps:{}},...(V&&U||M)&&Me==="outlined"?{notched:!0}:{},ref:Ee,className:wt(be.props.className,u,Le.root),...!z&&{variant:Me},...Ae})})});O0.muiName="Select";function IB(e){return Kt("MuiTextField",e)}Yt("MuiTextField",["root"]);const EB={standard:D0,filled:R0,outlined:B0},PB=e=>{const{classes:t}=e;return Jt({root:["root"]},IB,t)},MB=at(vk,{name:"MuiTextField",slot:"Root"})({}),AB=ee.forwardRef(function(t,o){const l=Qt({props:t,name:"MuiTextField"}),{autoComplete:p,autoFocus:m=!1,children:g,className:u,color:I="primary",defaultValue:M,disabled:F=!1,error:L=!1,FormHelperTextProps:z,fullWidth:J=!1,helperText:H,id:re,InputLabelProps:le,inputProps:V,InputProps:U,inputRef:G,label:Q,maxRows:fe,minRows:he,multiline:_e=!1,name:ge,onBlur:Ae,onChange:Re,onFocus:De,placeholder:Z,required:Me=!1,rows:Ie,select:Le=!1,SelectProps:$e,slots:Ke={},slotProps:be={},type:Ee,value:We,variant:Ze="outlined",...Ge}=l,St={...l,autoFocus:m,color:I,disabled:F,error:L,fullWidth:J,multiline:_e,required:Me,select:Le,variant:Ze},Dt=PB(St),$t=Nu(re),Vt=H&&$t?`${$t}-helper-text`:void 0,Rt=Q&&$t?`${$t}-label`:void 0,cr=EB[Ze],Ut={slots:Ke,slotProps:{input:U,inputLabel:le,htmlInput:V,formHelperText:z,select:$e,...be}},Ct={},qt=Ut.slotProps.inputLabel;Ze==="outlined"&&(qt&&typeof qt.shrink<"u"&&(Ct.notched=qt.shrink),Ct.label=Q),Le&&((!$e||!$e.native)&&(Ct.id=void 0),Ct["aria-describedby"]=void 0);const[Ht,yr]=pr("root",{elementType:MB,shouldForwardComponentProp:!0,externalForwardedProps:{...Ut,...Ge},ownerState:St,className:wt(Dt.root,u),ref:o,additionalProps:{disabled:F,error:L,fullWidth:J,required:Me,color:I,variant:Ze}}),[Nt,sr]=pr("input",{elementType:cr,externalForwardedProps:Ut,additionalProps:Ct,ownerState:St}),[ze,Or]=pr("inputLabel",{elementType:xk,externalForwardedProps:Ut,ownerState:St}),[Cr,At]=pr("htmlInput",{elementType:"input",externalForwardedProps:Ut,ownerState:St}),[er,xr]=pr("formHelperText",{elementType:u4,externalForwardedProps:Ut,ownerState:St}),[_t,_n]=pr("select",{elementType:O0,externalForwardedProps:Ut,ownerState:St}),Tr=q.jsx(Nt,{"aria-describedby":Vt,autoComplete:p,autoFocus:m,defaultValue:M,fullWidth:J,multiline:_e,name:ge,rows:Ie,maxRows:fe,minRows:he,type:Ee,value:We,id:$t,inputRef:G,onBlur:Ae,onChange:Re,onFocus:De,placeholder:Z,inputProps:At,slots:{input:Ke.htmlInput?Cr:void 0},...sr});return q.jsxs(Ht,{...yr,children:[Q!=null&&Q!==""&&q.jsx(ze,{htmlFor:$t,id:Rt,...Or,children:Q}),Le?q.jsx(_t,{"aria-describedby":Vt,id:$t,labelId:Rt,value:We,input:Tr,..._n,children:g}):Tr,H&&q.jsx(er,{id:Vt,...xr,children:H})]})}),zB=Ri(q.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"})),H2=Ri(q.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),RB=Ri(q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"})),DB=Ri(q.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),LB=Ri(q.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"})),BB=Ri(q.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),FB=Ri(q.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),OB=Ri(q.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),$B=Ri(q.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),NB=()=>{const e=ee.useRef(null),t=ee.useRef(null),[o,l]=ee.useState("cartodb"),[p,m]=ee.useState([]),[g,u]=ee.useState(!0),[I,M]=ee.useState(null),[F,L]=ee.useState(null),[z,J]=ee.useState(!0),H=ee.useRef([]),[re,le]=ee.useState(""),[V,U]=ee.useState(!0),[G,Q]=ee.useState(null),[fe,he]=ee.useState(null),[_e,ge]=ee.useState(20),[Ae,Re]=ee.useState(!1);ee.useEffect(()=>{(async()=>{try{u(!0);const Ee=Q5(),We=await eD(Ee);Q(We);const Ze=await tD(We.boundaryUrl);he(Ze);const{trees:Ge}=await Y5(We.dataUrl,{photosUrl:We.photosUrl});m(Ge),u(!1)}catch(Ee){console.error("Failed to load tree data:",Ee),M(Ee.message),u(!1)}})()},[]),ee.useEffect(()=>{if(t.current||p.length===0)return;const be=p.map(Ge=>Ge.lat),Ee=p.map(Ge=>Ge.lon),We=be.reduce((Ge,St)=>Ge+St,0)/be.length,Ze=Ee.reduce((Ge,St)=>Ge+St,0)/Ee.length;t.current=new Wf.Map({container:e.current,style:{version:8,sources:{cartodb:{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" CartoDB"}},layers:[{id:"cartodb-layer",type:"raster",source:"cartodb",minzoom:0,maxzoom:22}]},center:[Ze,We],zoom:18}),t.current.on("load",()=>{fe&&(t.current.addSource("boundary",{type:"geojson",data:fe}),t.current.addLayer({id:"boundary-line",type:"line",source:"boundary",paint:{"line-color":"#000000","line-width":1}})),p.forEach((Ge,St)=>{const Dt=document.createElement("div");if(Dt.className="tree-marker-container",Dt.setAttribute("data-tree-code",Ge.treeCode),Ge.crownRadius){const Ut=document.createElement("div");Ut.className="tree-canopy",Ut.style.width=`${Ge.crownRadius*2}px`,Ut.style.height=`${Ge.crownRadius*2}px`,Dt.appendChild(Ut)}const $t=document.createElement("div");$t.className="tree-marker",$t.style.backgroundColor=Ge.color,$t.innerHTML=`
          <svg width="14" height="14" viewBox="0 0 14 14">
            ${De(Ge.shape)}
          </svg>
        `,Dt.appendChild($t);const Vt=`
          <div class="tree-popup">
            <div><strong>Tree code:</strong> ${Ge.treeCode}</div>
            <div><strong>Genus:</strong> ${Ge.genus}</div>
            <div><strong>Species:</strong> ${Ge.species}</div>
            <div><strong>DBH (cm):</strong> ${Ge.dbh||"N/A"}</div>
            <div><strong>Height (m):</strong> ${Ge.height||"N/A"}</div>
            ${Ge.photoUrl?`<img src="${Ge.photoUrl}" alt="Tree photo" class="tree-photo" />`:'<div class="no-photo">No photo available</div>'}
          </div>
        `,Rt=new Wf.Popup({offset:15}).setHTML(Vt),cr=new Wf.Marker({element:Dt,anchor:"center"}).setLngLat([Ge.lon,Ge.lat]);Dt.addEventListener("click",()=>{document.querySelectorAll(".tree-marker-container").forEach(Ut=>Ut.classList.remove("active")),Dt.classList.add("active"),L(Ge),t.current&&t.current.flyTo({center:[Ge.lon,Ge.lat],zoom:19,duration:1e3})}),z||cr.setPopup(Rt),cr.addTo(t.current),H.current.push(cr)})}),t.current.addControl(new Wf.NavigationControl,"top-right")},[p,z]);const De=be=>{const{sides:Ee,rotation:We}=be,Ze=6,Ge=2*Math.PI/Ee,St=We*Math.PI/180;let Dt="M ";for(let $t=0;$t<=Ee;$t++){const Vt=St+$t*Ge,Rt=7+Ze*Math.cos(Vt),cr=7+Ze*Math.sin(Vt);Dt+=`${Rt},${cr} `}return`<path d="${Dt}Z" fill="currentColor" />`},Z=be=>{l(be);let Ee={version:8,sources:{},layers:[]};switch(be){case"osm":Ee.sources.osm={type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"},Ee.layers.push({id:"osm-layer",type:"raster",source:"osm"});break;case"cartodb":Ee.sources.cartodb={type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" CartoDB"},Ee.layers.push({id:"cartodb-layer",type:"raster",source:"cartodb"});break;case"satellite":Ee.sources.satellite={type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"Esri World Imagery"},Ee.layers.push({id:"satellite-layer",type:"raster",source:"satellite"});break}t.current&&(t.current.setStyle(Ee),t.current.once("styledata",()=>{fe&&!t.current.getSource("boundary")&&(t.current.addSource("boundary",{type:"geojson",data:fe}),t.current.addLayer({id:"boundary-line",type:"line",source:"boundary",paint:{"line-color":"#000000","line-width":1}}))}))},Me=be=>{L(be),Re(!0),document.querySelectorAll(".tree-marker-container").forEach(We=>We.classList.remove("active"));const Ee=document.querySelector(`[data-tree-code="${be.treeCode}"]`);Ee&&Ee.classList.add("active"),t.current&&t.current.flyTo({center:[be.lon,be.lat],zoom:19,duration:1e3})},Ie=()=>{if(!F||p.length===0)return;const Ee=(p.findIndex(We=>We.treeCode===F.treeCode)+1)%p.length;Me(p[Ee])},Le=()=>{if(!F||p.length===0)return;const Ee=(p.findIndex(We=>We.treeCode===F.treeCode)-1+p.length)%p.length;Me(p[Ee])},$e=p.filter(be=>be.treeCode.toLowerCase().includes(re.toLowerCase())||be.genus.toLowerCase().includes(re.toLowerCase())||be.species.toLowerCase().includes(re.toLowerCase()));Io.useEffect(()=>{ge(20)},[re]);const Ke=()=>{ge(be=>be+20)};return q.jsxs(qr,{sx:{display:"flex",width:"100%",height:"100%",position:"relative"},children:[q.jsxs(S3,{open:V,onClose:()=>U(!1),maxWidth:"sm",fullWidth:!0,children:[q.jsxs(B3,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[q.jsx(Gt,{variant:"h6",children:" How to Use This Map"}),q.jsx(Jv,{onClick:()=>U(!1),size:"small",children:q.jsx(H2,{})})]}),q.jsx(R3,{children:q.jsxs(rx,{children:[q.jsx(zl,{children:" Click on any tree marker on the map to view details"}),q.jsx(zl,{children:" View detailed information and photos in the sidebar"}),q.jsx(zl,{children:" Use the navigation arrows to browse through trees"}),q.jsx(zl,{children:" Search for specific trees by code, genus, or species"}),q.jsx(zl,{children:" Switch base maps using the buttons on the left"})]})}),q.jsx(I3,{children:q.jsx(za,{variant:"contained",onClick:()=>U(!1),children:"Got it!"})})]}),g&&q.jsx(qr,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:q.jsx(Wo,{children:q.jsxs(fs,{sx:{display:"flex",alignItems:"center",gap:2},children:[q.jsx(op,{}),q.jsx(Gt,{children:"Loading tree data..."})]})})}),I&&q.jsx(qr,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:q.jsxs(nL,{severity:"error",sx:{maxWidth:400},children:["Error loading data: ",I]})}),q.jsx(R2,{size:"medium",sx:{position:"absolute",bottom:90,left:20,zIndex:5},color:"default",onClick:()=>window.location.href=window.location.pathname,title:"Back to home",children:q.jsx(DB,{fontSize:"small"})}),q.jsx(R2,{size:"medium",sx:{position:"absolute",bottom:20,left:20,zIndex:5},color:"default",onClick:()=>U(!0),title:"How to use this map",children:q.jsx(RB,{fontSize:"small"})}),q.jsx(qr,{sx:{position:"absolute",top:10,left:10,zIndex:1,background:"white",borderRadius:1,boxShadow:2},children:q.jsxs($L,{variant:"outlined",size:"small",children:[q.jsx(za,{variant:o==="osm"?"contained":"outlined",onClick:()=>Z("osm"),children:"OSM"}),q.jsx(za,{variant:o==="cartodb"?"contained":"outlined",onClick:()=>Z("cartodb"),children:"CartoDB"}),q.jsx(za,{variant:o==="satellite"?"contained":"outlined",onClick:()=>Z("satellite"),children:"Satellite"})]})}),q.jsx("div",{ref:e,style:{flex:1,width:"100%",height:"100%"}}),q.jsxs(Y3,{variant:"permanent",anchor:"right",sx:{width:400,flexShrink:0,"& .MuiDrawer-paper":{width:400,boxSizing:"border-box",position:"absolute"}},children:[q.jsxs(qr,{sx:{background:"linear-gradient(135deg, #2d5016 0%, #4a7c2c 100%)",color:"white",p:2.5,boxShadow:2},children:[q.jsxs(Gt,{variant:"h6",sx:{fontWeight:700,mb:.5},children:[" ",(G==null?void 0:G.schoolName)||"Loading..."]}),q.jsx(Gt,{variant:"body2",sx:{opacity:.9},children:"Tree Inventory Map"})]}),q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider",bgcolor:"#f8f8f8"},children:[q.jsx(Gt,{variant:"h6",children:F&&"Tree Details"}),F&&q.jsx(Jv,{onClick:()=>L(null),size:"small",children:q.jsx(H2,{})})]}),q.jsx(qr,{sx:{flex:1,overflow:"auto",p:2},children:F?q.jsxs(qr,{children:[q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,p:1.5,bgcolor:"#f8f9fa",borderRadius:1},children:[q.jsx(za,{size:"small",startIcon:q.jsx(BB,{}),onClick:Le,variant:"outlined",children:"Previous"}),q.jsxs(Gt,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:[p.findIndex(be=>be.treeCode===F.treeCode)+1," of ",p.length]}),q.jsx(za,{size:"small",endIcon:q.jsx(FB,{}),onClick:Ie,variant:"outlined",children:"Next"})]}),q.jsx(qr,{sx:{mb:2},children:F.photoUrl?q.jsxs(q.Fragment,{children:[Ae&&q.jsx(qr,{sx:{width:"100%",height:250,bgcolor:"#f0f0f0",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:q.jsx(op,{size:40})}),q.jsx("img",{src:F.photoUrl,alt:`Tree ${F.treeCode}`,loading:"lazy",style:{width:"100%",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:Ae?"none":"block"},onLoad:()=>Re(!1),onError:be=>{Re(!1),be.target.style.display="none",be.target.nextElementSibling.style.display="block"}}),q.jsx(Wo,{sx:{display:"none",bgcolor:"#f9f9f9"},children:q.jsx(fs,{children:q.jsx(Gt,{variant:"body2",color:"text.secondary",fontStyle:"italic",textAlign:"center",children:"Photo not available"})})})]}):q.jsx(Wo,{sx:{bgcolor:"#f9f9f9"},children:q.jsx(fs,{children:q.jsx(Gt,{variant:"body2",color:"text.secondary",fontStyle:"italic",textAlign:"center",children:"No photo available"})})})},F.treeCode),q.jsx(Wo,{sx:{mb:2},children:q.jsxs(fs,{children:[q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[q.jsx(Gt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Tree Code:"}),q.jsx(Gt,{variant:"body2",children:F.treeCode})]}),q.jsx(Ns,{sx:{my:1}}),q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[q.jsx(Gt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Genus:"}),q.jsx(Gt,{variant:"body2",children:F.genus})]}),q.jsx(Ns,{sx:{my:1}}),q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[q.jsx(Gt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Species:"}),q.jsx(Gt,{variant:"body2",children:F.species})]}),q.jsx(Ns,{sx:{my:1}}),q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[q.jsx(Gt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"DBH (cm):"}),q.jsx(Gt,{variant:"body2",children:F.dbh||"N/A"})]}),q.jsx(Ns,{sx:{my:1}}),q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[q.jsx(Gt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Height (m):"}),q.jsx(Gt,{variant:"body2",children:F.height||"N/A"})]}),(F.crownNS||F.crownEW)&&q.jsxs(q.Fragment,{children:[q.jsx(Ns,{sx:{my:1}}),q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[q.jsx(Gt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Crown Size:"}),q.jsxs(Gt,{variant:"body2",children:[F.crownNS&&`NS: ${F.crownNS}m`,F.crownNS&&F.crownEW&&" / ",F.crownEW&&`EW: ${F.crownEW}m`]})]})]}),q.jsx(Ns,{sx:{my:1}}),q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between"},children:[q.jsx(Gt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Coordinates:"}),q.jsxs(Gt,{variant:"body2",sx:{textAlign:"right"},children:[F.lat.toFixed(6),", ",F.lon.toFixed(6)]})]})]})})]}):q.jsxs(qr,{children:[q.jsx(Wo,{sx:{mb:2,borderRadius:1},children:q.jsxs(fs,{children:[q.jsx(Gt,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:" Inventory Overview"}),q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[q.jsx(Gt,{variant:"body2",color:"text.secondary",children:"Total Trees:"}),q.jsx(Gt,{variant:"h6",color:"text.primary",children:p.length})]}),q.jsx(Ns,{sx:{my:1}}),q.jsxs(qr,{sx:{display:"flex",justifyContent:"space-between"},children:[q.jsx(Gt,{variant:"body2",color:"text.secondary",children:"Unique Genera:"}),q.jsx(Gt,{variant:"h6",color:"text.primary",children:new Set(p.map(be=>be.genus)).size})]})]})}),q.jsx(Gt,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,mt:3},children:" Browse Trees"}),q.jsx(AB,{fullWidth:!0,size:"small",placeholder:"Search by code, genus, or species...",value:re,onChange:be=>le(be.target.value),sx:{mb:2}}),q.jsx(qr,{sx:{maxHeight:300,overflow:"auto",border:1,borderColor:"divider",borderRadius:1},children:q.jsxs(rx,{dense:!0,children:[$e.slice(0,_e).map(be=>q.jsxs(A4,{onClick:()=>Me(be),children:[q.jsx(qr,{sx:{width:12,height:12,borderRadius:.5,bgcolor:be.color,mr:1.5,flexShrink:0}}),q.jsx(F2,{primary:be.treeCode,secondary:`${be.genus} ${be.species}`,primaryTypographyProps:{fontWeight:600,fontSize:"0.875rem"},secondaryTypographyProps:{fontSize:"0.75rem",fontStyle:"italic"}})]},be.treeCode)),$e.length>_e&&q.jsx(zl,{children:q.jsxs(za,{fullWidth:!0,size:"small",onClick:Ke,sx:{color:"text.secondary"},children:["+",$e.length-_e," more trees... (click to load)"]})}),$e.length===0&&re&&q.jsx(zl,{children:q.jsx(F2,{primary:"No trees found",primaryTypographyProps:{color:"text.secondary",textAlign:"center"}})})]})})]})})]})]})},jB=()=>{const[e,t]=ee.useState([]),[o,l]=ee.useState(!0);ee.useEffect(()=>{(async()=>{try{const g=await tk();t(g),l(!1)}catch(g){console.error("Error loading schools:",g),l(!1)}})()},[]);const p=m=>{m&&(window.location.href=`?school=${m}`)};return q.jsx(qr,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #2d5016 0%, #4a7c2c 100%)",py:8},children:q.jsx(YL,{maxWidth:"lg",children:q.jsxs(qr,{textAlign:"center",mb:6,children:[q.jsx(Gt,{variant:"h2",sx:{color:"white",mb:2,fontWeight:700},children:" School Tree Inventory Maps"}),q.jsx(Gt,{variant:"h5",sx:{color:"rgba(255,255,255,0.9)",mb:5},children:"Interactive tree mapping for educational institutions"}),q.jsx(Wo,{sx:{maxWidth:500,mx:"auto",mb:6,p:2},children:q.jsx(fs,{children:q.jsxs(vk,{fullWidth:!0,children:[q.jsx(xk,{id:"school-select-label",children:"Select a School"}),q.jsxs(O0,{labelId:"school-select-label",id:"school-select",onChange:m=>p(m.target.value),defaultValue:"",label:"Select a School",children:[q.jsx(V2,{value:"",disabled:!0,children:"Choose a school..."}),e.map(m=>q.jsx(V2,{value:m.id,children:m.schoolName},m.id))]})]})})}),q.jsxs(Al,{container:!0,spacing:3,mb:6,children:[q.jsx(Al,{item:!0,xs:12,sm:6,md:3,children:q.jsx(Wo,{sx:{height:"100%",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},children:q.jsxs(fs,{sx:{textAlign:"center"},children:[q.jsx(LB,{sx:{fontSize:48,color:"primary.main",mb:2}}),q.jsx(Gt,{variant:"h6",gutterBottom:!0,children:"Interactive Maps"}),q.jsx(Gt,{variant:"body2",color:"text.secondary",children:"Explore tree locations on detailed campus maps"})]})})}),q.jsx(Al,{item:!0,xs:12,sm:6,md:3,children:q.jsx(Wo,{sx:{height:"100%",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},children:q.jsxs(fs,{sx:{textAlign:"center"},children:[q.jsx(OB,{sx:{fontSize:48,color:"primary.main",mb:2}}),q.jsx(Gt,{variant:"h6",gutterBottom:!0,children:"Tree Photos"}),q.jsx(Gt,{variant:"body2",color:"text.secondary",children:"View high-quality photos of each tree"})]})})}),q.jsx(Al,{item:!0,xs:12,sm:6,md:3,children:q.jsx(Wo,{sx:{height:"100%",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},children:q.jsxs(fs,{sx:{textAlign:"center"},children:[q.jsx(zB,{sx:{fontSize:48,color:"primary.main",mb:2}}),q.jsx(Gt,{variant:"h6",gutterBottom:!0,children:"Tree Data"}),q.jsx(Gt,{variant:"body2",color:"text.secondary",children:"Access detailed information about species, size, and health"})]})})}),q.jsx(Al,{item:!0,xs:12,sm:6,md:3,children:q.jsx(Wo,{sx:{height:"100%",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},children:q.jsxs(fs,{sx:{textAlign:"center"},children:[q.jsx($B,{sx:{fontSize:48,color:"primary.main",mb:2}}),q.jsx(Gt,{variant:"h6",gutterBottom:!0,children:"Search & Filter"}),q.jsx(Gt,{variant:"body2",color:"text.secondary",children:"Find trees by code, genus, or species"})]})})})]}),q.jsxs(qr,{children:[q.jsx(Gt,{variant:"h4",sx:{color:"white",mb:4,fontWeight:600},children:"Our Schools"}),o?q.jsx(op,{sx:{color:"white"}}):q.jsx(Al,{container:!0,spacing:3,children:e.map(m=>q.jsx(Al,{item:!0,xs:12,sm:6,md:4,children:q.jsx(Wo,{sx:{height:"100%",transition:"all 0.3s","&:hover":{transform:"translateY(-8px)",boxShadow:6}},children:q.jsxs(qL,{onClick:()=>p(m.id),sx:{height:"100%",p:3},children:[q.jsx(Gt,{variant:"h6",color:"secondary",gutterBottom:!0,children:m.schoolName}),m.address&&q.jsx(Gt,{variant:"body2",color:"text.secondary",sx:{mb:2},children:m.address}),q.jsx(za,{variant:"contained",fullWidth:!0,children:"View Map "})]})})},m.id))})]})]})})})},VB=Ng({palette:{primary:{main:"#2d5016",light:"#4a7c2c",dark:"#1a3009",contrastText:"#ffffff"},secondary:{main:"#6b8e23",light:"#8ba84e",dark:"#4a6316",contrastText:"#ffffff"},success:{main:"#52a447",light:"#7bc96f",dark:"#3d7a33"},info:{main:"#5c8a5f",light:"#87b28a",dark:"#3d5f40"},background:{default:"#f4f7f4",paper:"#ffffff"},text:{primary:"#1a3009",secondary:"#4a6316"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),h1:{fontWeight:700},h2:{fontWeight:600},h3:{fontWeight:600}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8}}},MuiCard:{styleOverrides:{root:{borderRadius:12}}}}});function UB(){const t=new URLSearchParams(window.location.search).get("school");return q.jsxs(N5,{theme:VB,children:[q.jsx(q5,{}),q.jsx("div",{style:{width:"100%",height:"100vh"},children:t?q.jsx(NB,{}):q.jsx(jB,{})})]})}W_.createRoot(document.getElementById("root")).render(q.jsx(Io.StrictMode,{children:q.jsx(UB,{})}));

var NP=Object.defineProperty;var jP=(e,t,o)=>t in e?NP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var oh=(e,t,o)=>jP(e,typeof t!="symbol"?t+"":t,o);function VP(e,t){for(var o=0;o<t.length;o++){const l=t[o];if(typeof l!="string"&&!Array.isArray(l)){for(const h in l)if(h!=="default"&&!(h in e)){const m=Object.getOwnPropertyDescriptor(l,h);m&&Object.defineProperty(e,h,m.get?m:{enumerable:!0,get:()=>l[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function o(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(h){if(h.ep)return;h.ep=!0;const m=o(h);fetch(h.href,m)}})();var UP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uS={exports:{}},Qm={},dS={exports:{}},yr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp=Symbol.for("react.element"),WP=Symbol.for("react.portal"),HP=Symbol.for("react.fragment"),GP=Symbol.for("react.strict_mode"),qP=Symbol.for("react.profiler"),ZP=Symbol.for("react.provider"),XP=Symbol.for("react.context"),KP=Symbol.for("react.forward_ref"),YP=Symbol.for("react.suspense"),JP=Symbol.for("react.memo"),QP=Symbol.for("react.lazy"),O1=Symbol.iterator;function eE(e){return e===null||typeof e!="object"?null:(e=O1&&e[O1]||e["@@iterator"],typeof e=="function"?e:null)}var hS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pS=Object.assign,fS={};function Nu(e,t,o){this.props=e,this.context=t,this.refs=fS,this.updater=o||hS}Nu.prototype.isReactComponent={};Nu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mS(){}mS.prototype=Nu.prototype;function bx(e,t,o){this.props=e,this.context=t,this.refs=fS,this.updater=o||hS}var wx=bx.prototype=new mS;wx.constructor=bx;pS(wx,Nu.prototype);wx.isPureReactComponent=!0;var $1=Array.isArray,gS=Object.prototype.hasOwnProperty,Sx={current:null},yS={key:!0,ref:!0,__self:!0,__source:!0};function _S(e,t,o){var l,h={},m=null,g=null;if(t!=null)for(l in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(m=""+t.key),t)gS.call(t,l)&&!yS.hasOwnProperty(l)&&(h[l]=t[l]);var u=arguments.length-2;if(u===1)h.children=o;else if(1<u){for(var k=Array(u),M=0;M<u;M++)k[M]=arguments[M+2];h.children=k}if(e&&e.defaultProps)for(l in u=e.defaultProps,u)h[l]===void 0&&(h[l]=u[l]);return{$$typeof:fp,type:e,key:m,ref:g,props:h,_owner:Sx.current}}function tE(e,t){return{$$typeof:fp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cx(e){return typeof e=="object"&&e!==null&&e.$$typeof===fp}function rE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return t[o]})}var N1=/\/+/g;function __(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rE(""+e.key):t.toString(36)}function rm(e,t,o,l,h){var m=typeof e;(m==="undefined"||m==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(m){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case fp:case WP:g=!0}}if(g)return g=e,h=h(g),e=l===""?"."+__(g,0):l,$1(h)?(o="",e!=null&&(o=e.replace(N1,"$&/")+"/"),rm(h,t,o,"",function(M){return M})):h!=null&&(Cx(h)&&(h=tE(h,o+(!h.key||g&&g.key===h.key?"":(""+h.key).replace(N1,"$&/")+"/")+e)),t.push(h)),1;if(g=0,l=l===""?".":l+":",$1(e))for(var u=0;u<e.length;u++){m=e[u];var k=l+__(m,u);g+=rm(m,t,o,k,h)}else if(k=eE(e),typeof k=="function")for(e=k.call(e),u=0;!(m=e.next()).done;)m=m.value,k=l+__(m,u++),g+=rm(m,t,o,k,h);else if(m==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function Mf(e,t,o){if(e==null)return e;var l=[],h=0;return rm(e,l,"","",function(m){return t.call(o,m,h++)}),l}function nE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Li={current:null},nm={transition:null},iE={ReactCurrentDispatcher:Li,ReactCurrentBatchConfig:nm,ReactCurrentOwner:Sx};function vS(){throw Error("act(...) is not supported in production builds of React.")}yr.Children={map:Mf,forEach:function(e,t,o){Mf(e,function(){t.apply(this,arguments)},o)},count:function(e){var t=0;return Mf(e,function(){t++}),t},toArray:function(e){return Mf(e,function(t){return t})||[]},only:function(e){if(!Cx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};yr.Component=Nu;yr.Fragment=HP;yr.Profiler=qP;yr.PureComponent=bx;yr.StrictMode=GP;yr.Suspense=YP;yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iE;yr.act=vS;yr.cloneElement=function(e,t,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=pS({},e.props),h=e.key,m=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(m=t.ref,g=Sx.current),t.key!==void 0&&(h=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(k in t)gS.call(t,k)&&!yS.hasOwnProperty(k)&&(l[k]=t[k]===void 0&&u!==void 0?u[k]:t[k])}var k=arguments.length-2;if(k===1)l.children=o;else if(1<k){u=Array(k);for(var M=0;M<k;M++)u[M]=arguments[M+2];l.children=u}return{$$typeof:fp,type:e.type,key:h,ref:m,props:l,_owner:g}};yr.createContext=function(e){return e={$$typeof:XP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZP,_context:e},e.Consumer=e};yr.createElement=_S;yr.createFactory=function(e){var t=_S.bind(null,e);return t.type=e,t};yr.createRef=function(){return{current:null}};yr.forwardRef=function(e){return{$$typeof:KP,render:e}};yr.isValidElement=Cx;yr.lazy=function(e){return{$$typeof:QP,_payload:{_status:-1,_result:e},_init:nE}};yr.memo=function(e,t){return{$$typeof:JP,type:e,compare:t===void 0?null:t}};yr.startTransition=function(e){var t=nm.transition;nm.transition={};try{e()}finally{nm.transition=t}};yr.unstable_act=vS;yr.useCallback=function(e,t){return Li.current.useCallback(e,t)};yr.useContext=function(e){return Li.current.useContext(e)};yr.useDebugValue=function(){};yr.useDeferredValue=function(e){return Li.current.useDeferredValue(e)};yr.useEffect=function(e,t){return Li.current.useEffect(e,t)};yr.useId=function(){return Li.current.useId()};yr.useImperativeHandle=function(e,t,o){return Li.current.useImperativeHandle(e,t,o)};yr.useInsertionEffect=function(e,t){return Li.current.useInsertionEffect(e,t)};yr.useLayoutEffect=function(e,t){return Li.current.useLayoutEffect(e,t)};yr.useMemo=function(e,t){return Li.current.useMemo(e,t)};yr.useReducer=function(e,t,o){return Li.current.useReducer(e,t,o)};yr.useRef=function(e){return Li.current.useRef(e)};yr.useState=function(e){return Li.current.useState(e)};yr.useSyncExternalStore=function(e,t,o){return Li.current.useSyncExternalStore(e,t,o)};yr.useTransition=function(){return Li.current.useTransition()};yr.version="18.3.1";dS.exports=yr;var J=dS.exports;const Mo=xx(J),vm=VP({__proto__:null,default:Mo},[J]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE=J,sE=Symbol.for("react.element"),aE=Symbol.for("react.fragment"),lE=Object.prototype.hasOwnProperty,cE=oE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uE={key:!0,ref:!0,__self:!0,__source:!0};function xS(e,t,o){var l,h={},m=null,g=null;o!==void 0&&(m=""+o),t.key!==void 0&&(m=""+t.key),t.ref!==void 0&&(g=t.ref);for(l in t)lE.call(t,l)&&!uE.hasOwnProperty(l)&&(h[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)h[l]===void 0&&(h[l]=t[l]);return{$$typeof:sE,type:e,key:m,ref:g,props:h,_owner:cE.current}}Qm.Fragment=aE;Qm.jsx=xS;Qm.jsxs=xS;uS.exports=Qm;var V=uS.exports,lv={},bS={exports:{}},yo={},wS={exports:{}},SS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ze,Fe){var Ge=ze.length;ze.push(Fe);e:for(;0<Ge;){var Xe=Ge-1>>>1,ct=ze[Xe];if(0<h(ct,Fe))ze[Xe]=Fe,ze[Ge]=ct,Ge=Xe;else break e}}function o(ze){return ze.length===0?null:ze[0]}function l(ze){if(ze.length===0)return null;var Fe=ze[0],Ge=ze.pop();if(Ge!==Fe){ze[0]=Ge;e:for(var Xe=0,ct=ze.length,Tt=ct>>>1;Xe<Tt;){var Ht=2*(Xe+1)-1,er=ze[Ht],rr=Ht+1,Ye=ze[rr];if(0>h(er,Ge))rr<ct&&0>h(Ye,er)?(ze[Xe]=Ye,ze[rr]=Ge,Xe=rr):(ze[Xe]=er,ze[Ht]=Ge,Xe=Ht);else if(rr<ct&&0>h(Ye,Ge))ze[Xe]=Ye,ze[rr]=Ge,Xe=rr;else break e}}return Fe}function h(ze,Fe){var Ge=ze.sortIndex-Fe.sortIndex;return Ge!==0?Ge:ze.id-Fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var g=Date,u=g.now();e.unstable_now=function(){return g.now()-u}}var k=[],M=[],B=1,D=null,A=3,Z=!1,G=!1,te=!1,ne=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ze){for(var Fe=o(M);Fe!==null;){if(Fe.callback===null)l(M);else if(Fe.startTime<=ze)l(M),Fe.sortIndex=Fe.expirationTime,t(k,Fe);else break;Fe=o(M)}}function K(ze){if(te=!1,U(ze),!G)if(o(k)!==null)G=!0,Be(he);else{var Fe=o(M);Fe!==null&&Ze(K,Fe.startTime-ze)}}function he(ze,Fe){G=!1,te&&(te=!1,W(ge),ge=-1),Z=!0;var Ge=A;try{for(U(Fe),D=o(k);D!==null&&(!(D.expirationTime>Fe)||ze&&!Re());){var Xe=D.callback;if(typeof Xe=="function"){D.callback=null,A=D.priorityLevel;var ct=Xe(D.expirationTime<=Fe);Fe=e.unstable_now(),typeof ct=="function"?D.callback=ct:D===o(k)&&l(k),U(Fe)}else l(k);D=o(k)}if(D!==null)var Tt=!0;else{var Ht=o(M);Ht!==null&&Ze(K,Ht.startTime-Fe),Tt=!1}return Tt}finally{D=null,A=Ge,Z=!1}}var ce=!1,fe=null,ge=-1,Te=5,Ae=-1;function Re(){return!(e.unstable_now()-Ae<Te)}function X(){if(fe!==null){var ze=e.unstable_now();Ae=ze;var Fe=!0;try{Fe=fe(!0,ze)}finally{Fe?xe():(ce=!1,fe=null)}}else ce=!1}var xe;if(typeof O=="function")xe=function(){O(X)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Le=Ee.port2;Ee.port1.onmessage=X,xe=function(){Le.postMessage(null)}}else xe=function(){ne(X,0)};function Be(ze){fe=ze,ce||(ce=!0,xe())}function Ze(ze,Fe){ge=ne(function(){ze(e.unstable_now())},Fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ze){ze.callback=null},e.unstable_continueExecution=function(){G||Z||(G=!0,Be(he))},e.unstable_forceFrameRate=function(ze){0>ze||125<ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<ze?Math.floor(1e3/ze):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return o(k)},e.unstable_next=function(ze){switch(A){case 1:case 2:case 3:var Fe=3;break;default:Fe=A}var Ge=A;A=Fe;try{return ze()}finally{A=Ge}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ze,Fe){switch(ze){case 1:case 2:case 3:case 4:case 5:break;default:ze=3}var Ge=A;A=ze;try{return Fe()}finally{A=Ge}},e.unstable_scheduleCallback=function(ze,Fe,Ge){var Xe=e.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?Xe+Ge:Xe):Ge=Xe,ze){case 1:var ct=-1;break;case 2:ct=250;break;case 5:ct=1073741823;break;case 4:ct=1e4;break;default:ct=5e3}return ct=Ge+ct,ze={id:B++,callback:Fe,priorityLevel:ze,startTime:Ge,expirationTime:ct,sortIndex:-1},Ge>Xe?(ze.sortIndex=Ge,t(M,ze),o(k)===null&&ze===o(M)&&(te?(W(ge),ge=-1):te=!0,Ze(K,Ge-Xe))):(ze.sortIndex=ct,t(k,ze),G||Z||(G=!0,Be(he))),ze},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(ze){var Fe=A;return function(){var Ge=A;A=Fe;try{return ze.apply(this,arguments)}finally{A=Ge}}}})(SS);wS.exports=SS;var dE=wS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE=J,go=dE;function Je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CS=new Set,Wh={};function tc(e,t){Eu(e,t),Eu(e+"Capture",t)}function Eu(e,t){for(Wh[e]=t,e=0;e<t.length;e++)CS.add(t[e])}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cv=Object.prototype.hasOwnProperty,pE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j1={},V1={};function fE(e){return cv.call(V1,e)?!0:cv.call(j1,e)?!1:pE.test(e)?V1[e]=!0:(j1[e]=!0,!1)}function mE(e,t,o,l){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gE(e,t,o,l){if(t===null||typeof t>"u"||mE(e,t,o,l))return!0;if(l)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Di(e,t,o,l,h,m,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=g}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){oi[e]=new Di(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];oi[t]=new Di(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){oi[e]=new Di(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){oi[e]=new Di(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){oi[e]=new Di(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){oi[e]=new Di(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){oi[e]=new Di(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){oi[e]=new Di(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){oi[e]=new Di(e,5,!1,e.toLowerCase(),null,!1,!1)});var kx=/[\-:]([a-z])/g;function Tx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kx,Tx);oi[t]=new Di(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kx,Tx);oi[t]=new Di(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kx,Tx);oi[t]=new Di(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){oi[e]=new Di(e,1,!1,e.toLowerCase(),null,!1,!1)});oi.xlinkHref=new Di("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){oi[e]=new Di(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ix(e,t,o,l){var h=oi.hasOwnProperty(t)?oi[t]:null;(h!==null?h.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gE(t,o,h,l)&&(o=null),l||h===null?fE(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):h.mustUseProperty?e[h.propertyName]=o===null?h.type===3?!1:"":o:(t=h.attributeName,l=h.attributeNamespace,o===null?e.removeAttribute(t):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,l?e.setAttributeNS(l,t,o):e.setAttribute(t,o))))}var ea=hE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Af=Symbol.for("react.element"),au=Symbol.for("react.portal"),lu=Symbol.for("react.fragment"),Px=Symbol.for("react.strict_mode"),uv=Symbol.for("react.profiler"),kS=Symbol.for("react.provider"),TS=Symbol.for("react.context"),Ex=Symbol.for("react.forward_ref"),dv=Symbol.for("react.suspense"),hv=Symbol.for("react.suspense_list"),Mx=Symbol.for("react.memo"),Da=Symbol.for("react.lazy"),IS=Symbol.for("react.offscreen"),U1=Symbol.iterator;function sh(e){return e===null||typeof e!="object"?null:(e=U1&&e[U1]||e["@@iterator"],typeof e=="function"?e:null)}var cn=Object.assign,v_;function wh(e){if(v_===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);v_=t&&t[1]||""}return`
`+v_+e}var x_=!1;function b_(e,t){if(!e||x_)return"";x_=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var l=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){l=M}e.call(t.prototype)}else{try{throw Error()}catch(M){l=M}e()}}catch(M){if(M&&l&&typeof M.stack=="string"){for(var h=M.stack.split(`
`),m=l.stack.split(`
`),g=h.length-1,u=m.length-1;1<=g&&0<=u&&h[g]!==m[u];)u--;for(;1<=g&&0<=u;g--,u--)if(h[g]!==m[u]){if(g!==1||u!==1)do if(g--,u--,0>u||h[g]!==m[u]){var k=`
`+h[g].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=g&&0<=u);break}}}finally{x_=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?wh(e):""}function yE(e){switch(e.tag){case 5:return wh(e.type);case 16:return wh("Lazy");case 13:return wh("Suspense");case 19:return wh("SuspenseList");case 0:case 2:case 15:return e=b_(e.type,!1),e;case 11:return e=b_(e.type.render,!1),e;case 1:return e=b_(e.type,!0),e;default:return""}}function pv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case lu:return"Fragment";case au:return"Portal";case uv:return"Profiler";case Px:return"StrictMode";case dv:return"Suspense";case hv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case TS:return(e.displayName||"Context")+".Consumer";case kS:return(e._context.displayName||"Context")+".Provider";case Ex:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mx:return t=e.displayName||null,t!==null?t:pv(e.type)||"Memo";case Da:t=e._payload,e=e._init;try{return pv(e(t))}catch{}}return null}function _E(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pv(t);case 8:return t===Px?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ka(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function PS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vE(e){var t=PS(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(g){l=""+g,m.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zf(e){e._valueTracker||(e._valueTracker=vE(e))}function ES(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),l="";return e&&(l=PS(e)?e.checked?"true":"false":e.value),e=l,e!==o?(t.setValue(e),!0):!1}function xm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fv(e,t){var o=t.checked;return cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function W1(e,t){var o=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;o=Ka(t.value!=null?t.value:o),e._wrapperState={initialChecked:l,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MS(e,t){t=t.checked,t!=null&&Ix(e,"checked",t,!1)}function mv(e,t){MS(e,t);var o=Ka(t.value),l=t.type;if(o!=null)l==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gv(e,t.type,o):t.hasOwnProperty("defaultValue")&&gv(e,t.type,Ka(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function H1(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function gv(e,t,o){(t!=="number"||xm(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var Sh=Array.isArray;function xu(e,t,o,l){if(e=e.options,t){t={};for(var h=0;h<o.length;h++)t["$"+o[h]]=!0;for(o=0;o<e.length;o++)h=t.hasOwnProperty("$"+e[o].value),e[o].selected!==h&&(e[o].selected=h),h&&l&&(e[o].defaultSelected=!0)}else{for(o=""+Ka(o),t=null,h=0;h<e.length;h++){if(e[h].value===o){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function yv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function G1(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(Je(92));if(Sh(o)){if(1<o.length)throw Error(Je(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:Ka(o)}}function AS(e,t){var o=Ka(t.value),l=Ka(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),l!=null&&(e.defaultValue=""+l)}function q1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _v(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rf,RS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,l,h){MSApp.execUnsafeLocalFunction(function(){return e(t,o,l,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rf=Rf||document.createElement("div"),Rf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hh(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Ah={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xE=["Webkit","ms","Moz","O"];Object.keys(Ah).forEach(function(e){xE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ah[t]=Ah[e]})});function LS(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Ah.hasOwnProperty(e)&&Ah[e]?(""+t).trim():t+"px"}function DS(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var l=o.indexOf("--")===0,h=LS(o,t[o],l);o==="float"&&(o="cssFloat"),l?e.setProperty(o,h):e[o]=h}}var bE=cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vv(e,t){if(t){if(bE[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function xv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bv=null;function Ax(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wv=null,bu=null,wu=null;function Z1(e){if(e=yp(e)){if(typeof wv!="function")throw Error(Je(280));var t=e.stateNode;t&&(t=ig(t),wv(e.stateNode,e.type,t))}}function BS(e){bu?wu?wu.push(e):wu=[e]:bu=e}function FS(){if(bu){var e=bu,t=wu;if(wu=bu=null,Z1(e),t)for(e=0;e<t.length;e++)Z1(t[e])}}function OS(e,t){return e(t)}function $S(){}var w_=!1;function NS(e,t,o){if(w_)return e(t,o);w_=!0;try{return OS(e,t,o)}finally{w_=!1,(bu!==null||wu!==null)&&($S(),FS())}}function Gh(e,t){var o=e.stateNode;if(o===null)return null;var l=ig(o);if(l===null)return null;o=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(Je(231,t,typeof o));return o}var Sv=!1;if(Xs)try{var ah={};Object.defineProperty(ah,"passive",{get:function(){Sv=!0}}),window.addEventListener("test",ah,ah),window.removeEventListener("test",ah,ah)}catch{Sv=!1}function wE(e,t,o,l,h,m,g,u,k){var M=Array.prototype.slice.call(arguments,3);try{t.apply(o,M)}catch(B){this.onError(B)}}var zh=!1,bm=null,wm=!1,Cv=null,SE={onError:function(e){zh=!0,bm=e}};function CE(e,t,o,l,h,m,g,u,k){zh=!1,bm=null,wE.apply(SE,arguments)}function kE(e,t,o,l,h,m,g,u,k){if(CE.apply(this,arguments),zh){if(zh){var M=bm;zh=!1,bm=null}else throw Error(Je(198));wm||(wm=!0,Cv=M)}}function rc(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function jS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function X1(e){if(rc(e)!==e)throw Error(Je(188))}function TE(e){var t=e.alternate;if(!t){if(t=rc(e),t===null)throw Error(Je(188));return t!==e?null:e}for(var o=e,l=t;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){o=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return X1(h),e;if(m===l)return X1(h),t;m=m.sibling}throw Error(Je(188))}if(o.return!==l.return)o=h,l=m;else{for(var g=!1,u=h.child;u;){if(u===o){g=!0,o=h,l=m;break}if(u===l){g=!0,l=h,o=m;break}u=u.sibling}if(!g){for(u=m.child;u;){if(u===o){g=!0,o=m,l=h;break}if(u===l){g=!0,l=m,o=h;break}u=u.sibling}if(!g)throw Error(Je(189))}}if(o.alternate!==l)throw Error(Je(190))}if(o.tag!==3)throw Error(Je(188));return o.stateNode.current===o?e:t}function VS(e){return e=TE(e),e!==null?US(e):null}function US(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=US(e);if(t!==null)return t;e=e.sibling}return null}var WS=go.unstable_scheduleCallback,K1=go.unstable_cancelCallback,IE=go.unstable_shouldYield,PE=go.unstable_requestPaint,xn=go.unstable_now,EE=go.unstable_getCurrentPriorityLevel,zx=go.unstable_ImmediatePriority,HS=go.unstable_UserBlockingPriority,Sm=go.unstable_NormalPriority,ME=go.unstable_LowPriority,GS=go.unstable_IdlePriority,eg=null,_s=null;function AE(e){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(eg,e,void 0,(e.current.flags&128)===128)}catch{}}var Zo=Math.clz32?Math.clz32:LE,zE=Math.log,RE=Math.LN2;function LE(e){return e>>>=0,e===0?32:31-(zE(e)/RE|0)|0}var Lf=64,Df=4194304;function Ch(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cm(e,t){var o=e.pendingLanes;if(o===0)return 0;var l=0,h=e.suspendedLanes,m=e.pingedLanes,g=o&268435455;if(g!==0){var u=g&~h;u!==0?l=Ch(u):(m&=g,m!==0&&(l=Ch(m)))}else g=o&~h,g!==0?l=Ch(g):m!==0&&(l=Ch(m));if(l===0)return 0;if(t!==0&&t!==l&&!(t&h)&&(h=l&-l,m=t&-t,h>=m||h===16&&(m&4194240)!==0))return t;if(l&4&&(l|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)o=31-Zo(t),h=1<<o,l|=e[o],t&=~h;return l}function DE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BE(e,t){for(var o=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,m=e.pendingLanes;0<m;){var g=31-Zo(m),u=1<<g,k=h[g];k===-1?(!(u&o)||u&l)&&(h[g]=DE(u,t)):k<=t&&(e.expiredLanes|=u),m&=~u}}function kv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qS(){var e=Lf;return Lf<<=1,!(Lf&4194240)&&(Lf=64),e}function S_(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function mp(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zo(t),e[t]=o}function FE(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<o;){var h=31-Zo(o),m=1<<h;t[h]=0,l[h]=-1,e[h]=-1,o&=~m}}function Rx(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var l=31-Zo(o),h=1<<l;h&t|e[l]&t&&(e[l]|=t),o&=~h}}var Or=0;function ZS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var XS,Lx,KS,YS,JS,Tv=!1,Bf=[],ja=null,Va=null,Ua=null,qh=new Map,Zh=new Map,Fa=[],OE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y1(e,t){switch(e){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Ua=null;break;case"pointerover":case"pointerout":qh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zh.delete(t.pointerId)}}function lh(e,t,o,l,h,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:o,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},t!==null&&(t=yp(t),t!==null&&Lx(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function $E(e,t,o,l,h){switch(t){case"focusin":return ja=lh(ja,e,t,o,l,h),!0;case"dragenter":return Va=lh(Va,e,t,o,l,h),!0;case"mouseover":return Ua=lh(Ua,e,t,o,l,h),!0;case"pointerover":var m=h.pointerId;return qh.set(m,lh(qh.get(m)||null,e,t,o,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Zh.set(m,lh(Zh.get(m)||null,e,t,o,l,h)),!0}return!1}function QS(e){var t=Nl(e.target);if(t!==null){var o=rc(t);if(o!==null){if(t=o.tag,t===13){if(t=jS(o),t!==null){e.blockedOn=t,JS(e.priority,function(){KS(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function im(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=Iv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var l=new o.constructor(o.type,o);bv=l,o.target.dispatchEvent(l),bv=null}else return t=yp(o),t!==null&&Lx(t),e.blockedOn=o,!1;t.shift()}return!0}function J1(e,t,o){im(e)&&o.delete(t)}function NE(){Tv=!1,ja!==null&&im(ja)&&(ja=null),Va!==null&&im(Va)&&(Va=null),Ua!==null&&im(Ua)&&(Ua=null),qh.forEach(J1),Zh.forEach(J1)}function ch(e,t){e.blockedOn===t&&(e.blockedOn=null,Tv||(Tv=!0,go.unstable_scheduleCallback(go.unstable_NormalPriority,NE)))}function Xh(e){function t(h){return ch(h,e)}if(0<Bf.length){ch(Bf[0],e);for(var o=1;o<Bf.length;o++){var l=Bf[o];l.blockedOn===e&&(l.blockedOn=null)}}for(ja!==null&&ch(ja,e),Va!==null&&ch(Va,e),Ua!==null&&ch(Ua,e),qh.forEach(t),Zh.forEach(t),o=0;o<Fa.length;o++)l=Fa[o],l.blockedOn===e&&(l.blockedOn=null);for(;0<Fa.length&&(o=Fa[0],o.blockedOn===null);)QS(o),o.blockedOn===null&&Fa.shift()}var Su=ea.ReactCurrentBatchConfig,km=!0;function jE(e,t,o,l){var h=Or,m=Su.transition;Su.transition=null;try{Or=1,Dx(e,t,o,l)}finally{Or=h,Su.transition=m}}function VE(e,t,o,l){var h=Or,m=Su.transition;Su.transition=null;try{Or=4,Dx(e,t,o,l)}finally{Or=h,Su.transition=m}}function Dx(e,t,o,l){if(km){var h=Iv(e,t,o,l);if(h===null)R_(e,t,l,Tm,o),Y1(e,l);else if($E(h,e,t,o,l))l.stopPropagation();else if(Y1(e,l),t&4&&-1<OE.indexOf(e)){for(;h!==null;){var m=yp(h);if(m!==null&&XS(m),m=Iv(e,t,o,l),m===null&&R_(e,t,l,Tm,o),m===h)break;h=m}h!==null&&l.stopPropagation()}else R_(e,t,l,null,o)}}var Tm=null;function Iv(e,t,o,l){if(Tm=null,e=Ax(l),e=Nl(e),e!==null)if(t=rc(e),t===null)e=null;else if(o=t.tag,o===13){if(e=jS(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tm=e,null}function eC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EE()){case zx:return 1;case HS:return 4;case Sm:case ME:return 16;case GS:return 536870912;default:return 16}default:return 16}}var $a=null,Bx=null,om=null;function tC(){if(om)return om;var e,t=Bx,o=t.length,l,h="value"in $a?$a.value:$a.textContent,m=h.length;for(e=0;e<o&&t[e]===h[e];e++);var g=o-e;for(l=1;l<=g&&t[o-l]===h[m-l];l++);return om=h.slice(e,1<l?1-l:void 0)}function sm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ff(){return!0}function Q1(){return!1}function _o(e){function t(o,l,h,m,g){this._reactName=o,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=g,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(o=e[u],this[u]=o?o(m):m[u]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ff:Q1,this.isPropagationStopped=Q1,this}return cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ff)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ff)},persist:function(){},isPersistent:Ff}),t}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fx=_o(ju),gp=cn({},ju,{view:0,detail:0}),UE=_o(gp),C_,k_,uh,tg=cn({},gp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ox,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==uh&&(uh&&e.type==="mousemove"?(C_=e.screenX-uh.screenX,k_=e.screenY-uh.screenY):k_=C_=0,uh=e),C_)},movementY:function(e){return"movementY"in e?e.movementY:k_}}),ew=_o(tg),WE=cn({},tg,{dataTransfer:0}),HE=_o(WE),GE=cn({},gp,{relatedTarget:0}),T_=_o(GE),qE=cn({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),ZE=_o(qE),XE=cn({},ju,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),KE=_o(XE),YE=cn({},ju,{data:0}),tw=_o(YE),JE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=eM[e])?!!t[e]:!1}function Ox(){return tM}var rM=cn({},gp,{key:function(e){if(e.key){var t=JE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?QE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ox,charCode:function(e){return e.type==="keypress"?sm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nM=_o(rM),iM=cn({},tg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rw=_o(iM),oM=cn({},gp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ox}),sM=_o(oM),aM=cn({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),lM=_o(aM),cM=cn({},tg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uM=_o(cM),dM=[9,13,27,32],$x=Xs&&"CompositionEvent"in window,Rh=null;Xs&&"documentMode"in document&&(Rh=document.documentMode);var hM=Xs&&"TextEvent"in window&&!Rh,rC=Xs&&(!$x||Rh&&8<Rh&&11>=Rh),nw=" ",iw=!1;function nC(e,t){switch(e){case"keyup":return dM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cu=!1;function pM(e,t){switch(e){case"compositionend":return iC(t);case"keypress":return t.which!==32?null:(iw=!0,nw);case"textInput":return e=t.data,e===nw&&iw?null:e;default:return null}}function fM(e,t){if(cu)return e==="compositionend"||!$x&&nC(e,t)?(e=tC(),om=Bx=$a=null,cu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rC&&t.locale!=="ko"?null:t.data;default:return null}}var mM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ow(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mM[e.type]:t==="textarea"}function oC(e,t,o,l){BS(l),t=Im(t,"onChange"),0<t.length&&(o=new Fx("onChange","change",null,o,l),e.push({event:o,listeners:t}))}var Lh=null,Kh=null;function gM(e){gC(e,0)}function rg(e){var t=hu(e);if(ES(t))return e}function yM(e,t){if(e==="change")return t}var sC=!1;if(Xs){var I_;if(Xs){var P_="oninput"in document;if(!P_){var sw=document.createElement("div");sw.setAttribute("oninput","return;"),P_=typeof sw.oninput=="function"}I_=P_}else I_=!1;sC=I_&&(!document.documentMode||9<document.documentMode)}function aw(){Lh&&(Lh.detachEvent("onpropertychange",aC),Kh=Lh=null)}function aC(e){if(e.propertyName==="value"&&rg(Kh)){var t=[];oC(t,Kh,e,Ax(e)),NS(gM,t)}}function _M(e,t,o){e==="focusin"?(aw(),Lh=t,Kh=o,Lh.attachEvent("onpropertychange",aC)):e==="focusout"&&aw()}function vM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rg(Kh)}function xM(e,t){if(e==="click")return rg(t)}function bM(e,t){if(e==="input"||e==="change")return rg(t)}function wM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yo=typeof Object.is=="function"?Object.is:wM;function Yh(e,t){if(Yo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var h=o[l];if(!cv.call(t,h)||!Yo(e[h],t[h]))return!1}return!0}function lw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cw(e,t){var o=lw(e);e=0;for(var l;o;){if(o.nodeType===3){if(l=e+o.textContent.length,e<=t&&l>=t)return{node:o,offset:t-e};e=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=lw(o)}}function lC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cC(){for(var e=window,t=xm();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=xm(e.document)}return t}function Nx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function SM(e){var t=cC(),o=e.focusedElem,l=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&lC(o.ownerDocument.documentElement,o)){if(l!==null&&Nx(o)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=o.textContent.length,m=Math.min(l.start,h);l=l.end===void 0?m:Math.min(l.end,h),!e.extend&&m>l&&(h=l,l=m,m=h),h=cw(o,m);var g=cw(o,l);h&&g&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),m>l?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CM=Xs&&"documentMode"in document&&11>=document.documentMode,uu=null,Pv=null,Dh=null,Ev=!1;function uw(e,t,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ev||uu==null||uu!==xm(l)||(l=uu,"selectionStart"in l&&Nx(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Dh&&Yh(Dh,l)||(Dh=l,l=Im(Pv,"onSelect"),0<l.length&&(t=new Fx("onSelect","select",null,t,o),e.push({event:t,listeners:l}),t.target=uu)))}function Of(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var du={animationend:Of("Animation","AnimationEnd"),animationiteration:Of("Animation","AnimationIteration"),animationstart:Of("Animation","AnimationStart"),transitionend:Of("Transition","TransitionEnd")},E_={},uC={};Xs&&(uC=document.createElement("div").style,"AnimationEvent"in window||(delete du.animationend.animation,delete du.animationiteration.animation,delete du.animationstart.animation),"TransitionEvent"in window||delete du.transitionend.transition);function ng(e){if(E_[e])return E_[e];if(!du[e])return e;var t=du[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in uC)return E_[e]=t[o];return e}var dC=ng("animationend"),hC=ng("animationiteration"),pC=ng("animationstart"),fC=ng("transitionend"),mC=new Map,dw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function el(e,t){mC.set(e,t),tc(t,[e])}for(var M_=0;M_<dw.length;M_++){var A_=dw[M_],kM=A_.toLowerCase(),TM=A_[0].toUpperCase()+A_.slice(1);el(kM,"on"+TM)}el(dC,"onAnimationEnd");el(hC,"onAnimationIteration");el(pC,"onAnimationStart");el("dblclick","onDoubleClick");el("focusin","onFocus");el("focusout","onBlur");el(fC,"onTransitionEnd");Eu("onMouseEnter",["mouseout","mouseover"]);Eu("onMouseLeave",["mouseout","mouseover"]);Eu("onPointerEnter",["pointerout","pointerover"]);Eu("onPointerLeave",["pointerout","pointerover"]);tc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tc("onBeforeInput",["compositionend","keypress","textInput","paste"]);tc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IM=new Set("cancel close invalid load scroll toggle".split(" ").concat(kh));function hw(e,t,o){var l=e.type||"unknown-event";e.currentTarget=o,kE(l,t,void 0,e),e.currentTarget=null}function gC(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var l=e[o],h=l.event;l=l.listeners;e:{var m=void 0;if(t)for(var g=l.length-1;0<=g;g--){var u=l[g],k=u.instance,M=u.currentTarget;if(u=u.listener,k!==m&&h.isPropagationStopped())break e;hw(h,u,M),m=k}else for(g=0;g<l.length;g++){if(u=l[g],k=u.instance,M=u.currentTarget,u=u.listener,k!==m&&h.isPropagationStopped())break e;hw(h,u,M),m=k}}}if(wm)throw e=Cv,wm=!1,Cv=null,e}function Yr(e,t){var o=t[Lv];o===void 0&&(o=t[Lv]=new Set);var l=e+"__bubble";o.has(l)||(yC(t,e,2,!1),o.add(l))}function z_(e,t,o){var l=0;t&&(l|=4),yC(o,e,l,t)}var $f="_reactListening"+Math.random().toString(36).slice(2);function Jh(e){if(!e[$f]){e[$f]=!0,CS.forEach(function(o){o!=="selectionchange"&&(IM.has(o)||z_(o,!1,e),z_(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$f]||(t[$f]=!0,z_("selectionchange",!1,t))}}function yC(e,t,o,l){switch(eC(t)){case 1:var h=jE;break;case 4:h=VE;break;default:h=Dx}o=h.bind(null,t,o,e),h=void 0,!Sv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(t,o,{capture:!0,passive:h}):e.addEventListener(t,o,!0):h!==void 0?e.addEventListener(t,o,{passive:h}):e.addEventListener(t,o,!1)}function R_(e,t,o,l,h){var m=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var u=l.stateNode.containerInfo;if(u===h||u.nodeType===8&&u.parentNode===h)break;if(g===4)for(g=l.return;g!==null;){var k=g.tag;if((k===3||k===4)&&(k=g.stateNode.containerInfo,k===h||k.nodeType===8&&k.parentNode===h))return;g=g.return}for(;u!==null;){if(g=Nl(u),g===null)return;if(k=g.tag,k===5||k===6){l=m=g;continue e}u=u.parentNode}}l=l.return}NS(function(){var M=m,B=Ax(o),D=[];e:{var A=mC.get(e);if(A!==void 0){var Z=Fx,G=e;switch(e){case"keypress":if(sm(o)===0)break e;case"keydown":case"keyup":Z=nM;break;case"focusin":G="focus",Z=T_;break;case"focusout":G="blur",Z=T_;break;case"beforeblur":case"afterblur":Z=T_;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ew;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=HE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=sM;break;case dC:case hC:case pC:Z=ZE;break;case fC:Z=lM;break;case"scroll":Z=UE;break;case"wheel":Z=uM;break;case"copy":case"cut":case"paste":Z=KE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=rw}var te=(t&4)!==0,ne=!te&&e==="scroll",W=te?A!==null?A+"Capture":null:A;te=[];for(var O=M,U;O!==null;){U=O;var K=U.stateNode;if(U.tag===5&&K!==null&&(U=K,W!==null&&(K=Gh(O,W),K!=null&&te.push(Qh(O,K,U)))),ne)break;O=O.return}0<te.length&&(A=new Z(A,G,null,o,B),D.push({event:A,listeners:te}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",A&&o!==bv&&(G=o.relatedTarget||o.fromElement)&&(Nl(G)||G[Ks]))break e;if((Z||A)&&(A=B.window===B?B:(A=B.ownerDocument)?A.defaultView||A.parentWindow:window,Z?(G=o.relatedTarget||o.toElement,Z=M,G=G?Nl(G):null,G!==null&&(ne=rc(G),G!==ne||G.tag!==5&&G.tag!==6)&&(G=null)):(Z=null,G=M),Z!==G)){if(te=ew,K="onMouseLeave",W="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(te=rw,K="onPointerLeave",W="onPointerEnter",O="pointer"),ne=Z==null?A:hu(Z),U=G==null?A:hu(G),A=new te(K,O+"leave",Z,o,B),A.target=ne,A.relatedTarget=U,K=null,Nl(B)===M&&(te=new te(W,O+"enter",G,o,B),te.target=U,te.relatedTarget=ne,K=te),ne=K,Z&&G)t:{for(te=Z,W=G,O=0,U=te;U;U=Yc(U))O++;for(U=0,K=W;K;K=Yc(K))U++;for(;0<O-U;)te=Yc(te),O--;for(;0<U-O;)W=Yc(W),U--;for(;O--;){if(te===W||W!==null&&te===W.alternate)break t;te=Yc(te),W=Yc(W)}te=null}else te=null;Z!==null&&pw(D,A,Z,te,!1),G!==null&&ne!==null&&pw(D,ne,G,te,!0)}}e:{if(A=M?hu(M):window,Z=A.nodeName&&A.nodeName.toLowerCase(),Z==="select"||Z==="input"&&A.type==="file")var he=yM;else if(ow(A))if(sC)he=bM;else{he=vM;var ce=_M}else(Z=A.nodeName)&&Z.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(he=xM);if(he&&(he=he(e,M))){oC(D,he,o,B);break e}ce&&ce(e,A,M),e==="focusout"&&(ce=A._wrapperState)&&ce.controlled&&A.type==="number"&&gv(A,"number",A.value)}switch(ce=M?hu(M):window,e){case"focusin":(ow(ce)||ce.contentEditable==="true")&&(uu=ce,Pv=M,Dh=null);break;case"focusout":Dh=Pv=uu=null;break;case"mousedown":Ev=!0;break;case"contextmenu":case"mouseup":case"dragend":Ev=!1,uw(D,o,B);break;case"selectionchange":if(CM)break;case"keydown":case"keyup":uw(D,o,B)}var fe;if($x)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else cu?nC(e,o)&&(ge="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(ge="onCompositionStart");ge&&(rC&&o.locale!=="ko"&&(cu||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&cu&&(fe=tC()):($a=B,Bx="value"in $a?$a.value:$a.textContent,cu=!0)),ce=Im(M,ge),0<ce.length&&(ge=new tw(ge,e,null,o,B),D.push({event:ge,listeners:ce}),fe?ge.data=fe:(fe=iC(o),fe!==null&&(ge.data=fe)))),(fe=hM?pM(e,o):fM(e,o))&&(M=Im(M,"onBeforeInput"),0<M.length&&(B=new tw("onBeforeInput","beforeinput",null,o,B),D.push({event:B,listeners:M}),B.data=fe))}gC(D,t)})}function Qh(e,t,o){return{instance:e,listener:t,currentTarget:o}}function Im(e,t){for(var o=t+"Capture",l=[];e!==null;){var h=e,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=Gh(e,o),m!=null&&l.unshift(Qh(e,m,h)),m=Gh(e,t),m!=null&&l.push(Qh(e,m,h))),e=e.return}return l}function Yc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pw(e,t,o,l,h){for(var m=t._reactName,g=[];o!==null&&o!==l;){var u=o,k=u.alternate,M=u.stateNode;if(k!==null&&k===l)break;u.tag===5&&M!==null&&(u=M,h?(k=Gh(o,m),k!=null&&g.unshift(Qh(o,k,u))):h||(k=Gh(o,m),k!=null&&g.push(Qh(o,k,u)))),o=o.return}g.length!==0&&e.push({event:t,listeners:g})}var PM=/\r\n?/g,EM=/\u0000|\uFFFD/g;function fw(e){return(typeof e=="string"?e:""+e).replace(PM,`
`).replace(EM,"")}function Nf(e,t,o){if(t=fw(t),fw(e)!==t&&o)throw Error(Je(425))}function Pm(){}var Mv=null,Av=null;function zv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rv=typeof setTimeout=="function"?setTimeout:void 0,MM=typeof clearTimeout=="function"?clearTimeout:void 0,mw=typeof Promise=="function"?Promise:void 0,AM=typeof queueMicrotask=="function"?queueMicrotask:typeof mw<"u"?function(e){return mw.resolve(null).then(e).catch(zM)}:Rv;function zM(e){setTimeout(function(){throw e})}function L_(e,t){var o=t,l=0;do{var h=o.nextSibling;if(e.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(l===0){e.removeChild(h),Xh(t);return}l--}else o!=="$"&&o!=="$?"&&o!=="$!"||l++;o=h}while(o);Xh(t)}function Wa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var Vu=Math.random().toString(36).slice(2),gs="__reactFiber$"+Vu,ep="__reactProps$"+Vu,Ks="__reactContainer$"+Vu,Lv="__reactEvents$"+Vu,RM="__reactListeners$"+Vu,LM="__reactHandles$"+Vu;function Nl(e){var t=e[gs];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Ks]||o[gs]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=gw(e);e!==null;){if(o=e[gs])return o;e=gw(e)}return t}e=o,o=e.parentNode}return null}function yp(e){return e=e[gs]||e[Ks],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Je(33))}function ig(e){return e[ep]||null}var Dv=[],pu=-1;function tl(e){return{current:e}}function Jr(e){0>pu||(e.current=Dv[pu],Dv[pu]=null,pu--)}function Zr(e,t){pu++,Dv[pu]=e.current,e.current=t}var Ya={},vi=tl(Ya),qi=tl(!1),Zl=Ya;function Mu(e,t){var o=e.type.contextTypes;if(!o)return Ya;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in o)h[m]=t[m];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function Zi(e){return e=e.childContextTypes,e!=null}function Em(){Jr(qi),Jr(vi)}function yw(e,t,o){if(vi.current!==Ya)throw Error(Je(168));Zr(vi,t),Zr(qi,o)}function _C(e,t,o){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return o;l=l.getChildContext();for(var h in l)if(!(h in t))throw Error(Je(108,_E(e)||"Unknown",h));return cn({},o,l)}function Mm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ya,Zl=vi.current,Zr(vi,e),Zr(qi,qi.current),!0}function _w(e,t,o){var l=e.stateNode;if(!l)throw Error(Je(169));o?(e=_C(e,t,Zl),l.__reactInternalMemoizedMergedChildContext=e,Jr(qi),Jr(vi),Zr(vi,e)):Jr(qi),Zr(qi,o)}var Ws=null,og=!1,D_=!1;function vC(e){Ws===null?Ws=[e]:Ws.push(e)}function DM(e){og=!0,vC(e)}function rl(){if(!D_&&Ws!==null){D_=!0;var e=0,t=Or;try{var o=Ws;for(Or=1;e<o.length;e++){var l=o[e];do l=l(!0);while(l!==null)}Ws=null,og=!1}catch(h){throw Ws!==null&&(Ws=Ws.slice(e+1)),WS(zx,rl),h}finally{Or=t,D_=!1}}return null}var fu=[],mu=0,Am=null,zm=0,Io=[],Po=0,Xl=null,Gs=1,qs="";function Ll(e,t){fu[mu++]=zm,fu[mu++]=Am,Am=e,zm=t}function xC(e,t,o){Io[Po++]=Gs,Io[Po++]=qs,Io[Po++]=Xl,Xl=e;var l=Gs;e=qs;var h=32-Zo(l)-1;l&=~(1<<h),o+=1;var m=32-Zo(t)+h;if(30<m){var g=h-h%5;m=(l&(1<<g)-1).toString(32),l>>=g,h-=g,Gs=1<<32-Zo(t)+h|o<<h|l,qs=m+e}else Gs=1<<m|o<<h|l,qs=e}function jx(e){e.return!==null&&(Ll(e,1),xC(e,1,0))}function Vx(e){for(;e===Am;)Am=fu[--mu],fu[mu]=null,zm=fu[--mu],fu[mu]=null;for(;e===Xl;)Xl=Io[--Po],Io[Po]=null,qs=Io[--Po],Io[Po]=null,Gs=Io[--Po],Io[Po]=null}var fo=null,po=null,nn=!1,qo=null;function bC(e,t){var o=Ao(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function vw(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fo=e,po=Wa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fo=e,po=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=Xl!==null?{id:Gs,overflow:qs}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=Ao(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,fo=e,po=null,!0):!1;default:return!1}}function Bv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fv(e){if(nn){var t=po;if(t){var o=t;if(!vw(e,t)){if(Bv(e))throw Error(Je(418));t=Wa(o.nextSibling);var l=fo;t&&vw(e,t)?bC(l,o):(e.flags=e.flags&-4097|2,nn=!1,fo=e)}}else{if(Bv(e))throw Error(Je(418));e.flags=e.flags&-4097|2,nn=!1,fo=e}}}function xw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fo=e}function jf(e){if(e!==fo)return!1;if(!nn)return xw(e),nn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zv(e.type,e.memoizedProps)),t&&(t=po)){if(Bv(e))throw wC(),Error(Je(418));for(;t;)bC(e,t),t=Wa(t.nextSibling)}if(xw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){po=Wa(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}po=null}}else po=fo?Wa(e.stateNode.nextSibling):null;return!0}function wC(){for(var e=po;e;)e=Wa(e.nextSibling)}function Au(){po=fo=null,nn=!1}function Ux(e){qo===null?qo=[e]:qo.push(e)}var BM=ea.ReactCurrentBatchConfig;function dh(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Je(309));var l=o.stateNode}if(!l)throw Error(Je(147,e));var h=l,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(g){var u=h.refs;g===null?delete u[m]:u[m]=g},t._stringRef=m,t)}if(typeof e!="string")throw Error(Je(284));if(!o._owner)throw Error(Je(290,e))}return e}function Vf(e,t){throw e=Object.prototype.toString.call(t),Error(Je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bw(e){var t=e._init;return t(e._payload)}function SC(e){function t(W,O){if(e){var U=W.deletions;U===null?(W.deletions=[O],W.flags|=16):U.push(O)}}function o(W,O){if(!e)return null;for(;O!==null;)t(W,O),O=O.sibling;return null}function l(W,O){for(W=new Map;O!==null;)O.key!==null?W.set(O.key,O):W.set(O.index,O),O=O.sibling;return W}function h(W,O){return W=Za(W,O),W.index=0,W.sibling=null,W}function m(W,O,U){return W.index=U,e?(U=W.alternate,U!==null?(U=U.index,U<O?(W.flags|=2,O):U):(W.flags|=2,O)):(W.flags|=1048576,O)}function g(W){return e&&W.alternate===null&&(W.flags|=2),W}function u(W,O,U,K){return O===null||O.tag!==6?(O=V_(U,W.mode,K),O.return=W,O):(O=h(O,U),O.return=W,O)}function k(W,O,U,K){var he=U.type;return he===lu?B(W,O,U.props.children,K,U.key):O!==null&&(O.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Da&&bw(he)===O.type)?(K=h(O,U.props),K.ref=dh(W,O,U),K.return=W,K):(K=pm(U.type,U.key,U.props,null,W.mode,K),K.ref=dh(W,O,U),K.return=W,K)}function M(W,O,U,K){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=U_(U,W.mode,K),O.return=W,O):(O=h(O,U.children||[]),O.return=W,O)}function B(W,O,U,K,he){return O===null||O.tag!==7?(O=Gl(U,W.mode,K,he),O.return=W,O):(O=h(O,U),O.return=W,O)}function D(W,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return O=V_(""+O,W.mode,U),O.return=W,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Af:return U=pm(O.type,O.key,O.props,null,W.mode,U),U.ref=dh(W,null,O),U.return=W,U;case au:return O=U_(O,W.mode,U),O.return=W,O;case Da:var K=O._init;return D(W,K(O._payload),U)}if(Sh(O)||sh(O))return O=Gl(O,W.mode,U,null),O.return=W,O;Vf(W,O)}return null}function A(W,O,U,K){var he=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return he!==null?null:u(W,O,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Af:return U.key===he?k(W,O,U,K):null;case au:return U.key===he?M(W,O,U,K):null;case Da:return he=U._init,A(W,O,he(U._payload),K)}if(Sh(U)||sh(U))return he!==null?null:B(W,O,U,K,null);Vf(W,U)}return null}function Z(W,O,U,K,he){if(typeof K=="string"&&K!==""||typeof K=="number")return W=W.get(U)||null,u(O,W,""+K,he);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Af:return W=W.get(K.key===null?U:K.key)||null,k(O,W,K,he);case au:return W=W.get(K.key===null?U:K.key)||null,M(O,W,K,he);case Da:var ce=K._init;return Z(W,O,U,ce(K._payload),he)}if(Sh(K)||sh(K))return W=W.get(U)||null,B(O,W,K,he,null);Vf(O,K)}return null}function G(W,O,U,K){for(var he=null,ce=null,fe=O,ge=O=0,Te=null;fe!==null&&ge<U.length;ge++){fe.index>ge?(Te=fe,fe=null):Te=fe.sibling;var Ae=A(W,fe,U[ge],K);if(Ae===null){fe===null&&(fe=Te);break}e&&fe&&Ae.alternate===null&&t(W,fe),O=m(Ae,O,ge),ce===null?he=Ae:ce.sibling=Ae,ce=Ae,fe=Te}if(ge===U.length)return o(W,fe),nn&&Ll(W,ge),he;if(fe===null){for(;ge<U.length;ge++)fe=D(W,U[ge],K),fe!==null&&(O=m(fe,O,ge),ce===null?he=fe:ce.sibling=fe,ce=fe);return nn&&Ll(W,ge),he}for(fe=l(W,fe);ge<U.length;ge++)Te=Z(fe,W,ge,U[ge],K),Te!==null&&(e&&Te.alternate!==null&&fe.delete(Te.key===null?ge:Te.key),O=m(Te,O,ge),ce===null?he=Te:ce.sibling=Te,ce=Te);return e&&fe.forEach(function(Re){return t(W,Re)}),nn&&Ll(W,ge),he}function te(W,O,U,K){var he=sh(U);if(typeof he!="function")throw Error(Je(150));if(U=he.call(U),U==null)throw Error(Je(151));for(var ce=he=null,fe=O,ge=O=0,Te=null,Ae=U.next();fe!==null&&!Ae.done;ge++,Ae=U.next()){fe.index>ge?(Te=fe,fe=null):Te=fe.sibling;var Re=A(W,fe,Ae.value,K);if(Re===null){fe===null&&(fe=Te);break}e&&fe&&Re.alternate===null&&t(W,fe),O=m(Re,O,ge),ce===null?he=Re:ce.sibling=Re,ce=Re,fe=Te}if(Ae.done)return o(W,fe),nn&&Ll(W,ge),he;if(fe===null){for(;!Ae.done;ge++,Ae=U.next())Ae=D(W,Ae.value,K),Ae!==null&&(O=m(Ae,O,ge),ce===null?he=Ae:ce.sibling=Ae,ce=Ae);return nn&&Ll(W,ge),he}for(fe=l(W,fe);!Ae.done;ge++,Ae=U.next())Ae=Z(fe,W,ge,Ae.value,K),Ae!==null&&(e&&Ae.alternate!==null&&fe.delete(Ae.key===null?ge:Ae.key),O=m(Ae,O,ge),ce===null?he=Ae:ce.sibling=Ae,ce=Ae);return e&&fe.forEach(function(X){return t(W,X)}),nn&&Ll(W,ge),he}function ne(W,O,U,K){if(typeof U=="object"&&U!==null&&U.type===lu&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Af:e:{for(var he=U.key,ce=O;ce!==null;){if(ce.key===he){if(he=U.type,he===lu){if(ce.tag===7){o(W,ce.sibling),O=h(ce,U.props.children),O.return=W,W=O;break e}}else if(ce.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Da&&bw(he)===ce.type){o(W,ce.sibling),O=h(ce,U.props),O.ref=dh(W,ce,U),O.return=W,W=O;break e}o(W,ce);break}else t(W,ce);ce=ce.sibling}U.type===lu?(O=Gl(U.props.children,W.mode,K,U.key),O.return=W,W=O):(K=pm(U.type,U.key,U.props,null,W.mode,K),K.ref=dh(W,O,U),K.return=W,W=K)}return g(W);case au:e:{for(ce=U.key;O!==null;){if(O.key===ce)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){o(W,O.sibling),O=h(O,U.children||[]),O.return=W,W=O;break e}else{o(W,O);break}else t(W,O);O=O.sibling}O=U_(U,W.mode,K),O.return=W,W=O}return g(W);case Da:return ce=U._init,ne(W,O,ce(U._payload),K)}if(Sh(U))return G(W,O,U,K);if(sh(U))return te(W,O,U,K);Vf(W,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,O!==null&&O.tag===6?(o(W,O.sibling),O=h(O,U),O.return=W,W=O):(o(W,O),O=V_(U,W.mode,K),O.return=W,W=O),g(W)):o(W,O)}return ne}var zu=SC(!0),CC=SC(!1),Rm=tl(null),Lm=null,gu=null,Wx=null;function Hx(){Wx=gu=Lm=null}function Gx(e){var t=Rm.current;Jr(Rm),e._currentValue=t}function Ov(e,t,o){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===o)break;e=e.return}}function Cu(e,t){Lm=e,Wx=gu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gi=!0),e.firstContext=null)}function Lo(e){var t=e._currentValue;if(Wx!==e)if(e={context:e,memoizedValue:t,next:null},gu===null){if(Lm===null)throw Error(Je(308));gu=e,Lm.dependencies={lanes:0,firstContext:e}}else gu=gu.next=e;return t}var jl=null;function qx(e){jl===null?jl=[e]:jl.push(e)}function kC(e,t,o,l){var h=t.interleaved;return h===null?(o.next=o,qx(t)):(o.next=h.next,h.next=o),t.interleaved=o,Ys(e,l)}function Ys(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var Ba=!1;function Zx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ha(e,t,o){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,Cr&2){var h=l.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),l.pending=t,Ys(e,o)}return h=l.interleaved,h===null?(t.next=t,qx(l)):(t.next=h.next,h.next=t),l.interleaved=t,Ys(e,o)}function am(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,Rx(e,o)}}function ww(e,t){var o=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var g={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};m===null?h=m=g:m=m.next=g,o=o.next}while(o!==null);m===null?h=m=t:m=m.next=t}else h=m=t;o={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,effects:l.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function Dm(e,t,o,l){var h=e.updateQueue;Ba=!1;var m=h.firstBaseUpdate,g=h.lastBaseUpdate,u=h.shared.pending;if(u!==null){h.shared.pending=null;var k=u,M=k.next;k.next=null,g===null?m=M:g.next=M,g=k;var B=e.alternate;B!==null&&(B=B.updateQueue,u=B.lastBaseUpdate,u!==g&&(u===null?B.firstBaseUpdate=M:u.next=M,B.lastBaseUpdate=k))}if(m!==null){var D=h.baseState;g=0,B=M=k=null,u=m;do{var A=u.lane,Z=u.eventTime;if((l&A)===A){B!==null&&(B=B.next={eventTime:Z,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var G=e,te=u;switch(A=t,Z=o,te.tag){case 1:if(G=te.payload,typeof G=="function"){D=G.call(Z,D,A);break e}D=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=te.payload,A=typeof G=="function"?G.call(Z,D,A):G,A==null)break e;D=cn({},D,A);break e;case 2:Ba=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,A=h.effects,A===null?h.effects=[u]:A.push(u))}else Z={eventTime:Z,lane:A,tag:u.tag,payload:u.payload,callback:u.callback,next:null},B===null?(M=B=Z,k=D):B=B.next=Z,g|=A;if(u=u.next,u===null){if(u=h.shared.pending,u===null)break;A=u,u=A.next,A.next=null,h.lastBaseUpdate=A,h.shared.pending=null}}while(!0);if(B===null&&(k=D),h.baseState=k,h.firstBaseUpdate=M,h.lastBaseUpdate=B,t=h.shared.interleaved,t!==null){h=t;do g|=h.lane,h=h.next;while(h!==t)}else m===null&&(h.shared.lanes=0);Yl|=g,e.lanes=g,e.memoizedState=D}}function Sw(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],h=l.callback;if(h!==null){if(l.callback=null,l=o,typeof h!="function")throw Error(Je(191,h));h.call(l)}}}var _p={},vs=tl(_p),tp=tl(_p),rp=tl(_p);function Vl(e){if(e===_p)throw Error(Je(174));return e}function Xx(e,t){switch(Zr(rp,t),Zr(tp,e),Zr(vs,_p),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_v(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_v(t,e)}Jr(vs),Zr(vs,t)}function Ru(){Jr(vs),Jr(tp),Jr(rp)}function IC(e){Vl(rp.current);var t=Vl(vs.current),o=_v(t,e.type);t!==o&&(Zr(tp,e),Zr(vs,o))}function Kx(e){tp.current===e&&(Jr(vs),Jr(tp))}var an=tl(0);function Bm(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var B_=[];function Yx(){for(var e=0;e<B_.length;e++)B_[e]._workInProgressVersionPrimary=null;B_.length=0}var lm=ea.ReactCurrentDispatcher,F_=ea.ReactCurrentBatchConfig,Kl=0,ln=null,Ln=null,Gn=null,Fm=!1,Bh=!1,np=0,FM=0;function mi(){throw Error(Je(321))}function Jx(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!Yo(e[o],t[o]))return!1;return!0}function Qx(e,t,o,l,h,m){if(Kl=m,ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lm.current=e===null||e.memoizedState===null?jM:VM,e=o(l,h),Bh){m=0;do{if(Bh=!1,np=0,25<=m)throw Error(Je(301));m+=1,Gn=Ln=null,t.updateQueue=null,lm.current=UM,e=o(l,h)}while(Bh)}if(lm.current=Om,t=Ln!==null&&Ln.next!==null,Kl=0,Gn=Ln=ln=null,Fm=!1,t)throw Error(Je(300));return e}function e0(){var e=np!==0;return np=0,e}function hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?ln.memoizedState=Gn=e:Gn=Gn.next=e,Gn}function Do(){if(Ln===null){var e=ln.alternate;e=e!==null?e.memoizedState:null}else e=Ln.next;var t=Gn===null?ln.memoizedState:Gn.next;if(t!==null)Gn=t,Ln=e;else{if(e===null)throw Error(Je(310));Ln=e,e={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Gn===null?ln.memoizedState=Gn=e:Gn=Gn.next=e}return Gn}function ip(e,t){return typeof t=="function"?t(e):t}function O_(e){var t=Do(),o=t.queue;if(o===null)throw Error(Je(311));o.lastRenderedReducer=e;var l=Ln,h=l.baseQueue,m=o.pending;if(m!==null){if(h!==null){var g=h.next;h.next=m.next,m.next=g}l.baseQueue=h=m,o.pending=null}if(h!==null){m=h.next,l=l.baseState;var u=g=null,k=null,M=m;do{var B=M.lane;if((Kl&B)===B)k!==null&&(k=k.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),l=M.hasEagerState?M.eagerState:e(l,M.action);else{var D={lane:B,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};k===null?(u=k=D,g=l):k=k.next=D,ln.lanes|=B,Yl|=B}M=M.next}while(M!==null&&M!==m);k===null?g=l:k.next=u,Yo(l,t.memoizedState)||(Gi=!0),t.memoizedState=l,t.baseState=g,t.baseQueue=k,o.lastRenderedState=l}if(e=o.interleaved,e!==null){h=e;do m=h.lane,ln.lanes|=m,Yl|=m,h=h.next;while(h!==e)}else h===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function $_(e){var t=Do(),o=t.queue;if(o===null)throw Error(Je(311));o.lastRenderedReducer=e;var l=o.dispatch,h=o.pending,m=t.memoizedState;if(h!==null){o.pending=null;var g=h=h.next;do m=e(m,g.action),g=g.next;while(g!==h);Yo(m,t.memoizedState)||(Gi=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),o.lastRenderedState=m}return[m,l]}function PC(){}function EC(e,t){var o=ln,l=Do(),h=t(),m=!Yo(l.memoizedState,h);if(m&&(l.memoizedState=h,Gi=!0),l=l.queue,t0(zC.bind(null,o,l,e),[e]),l.getSnapshot!==t||m||Gn!==null&&Gn.memoizedState.tag&1){if(o.flags|=2048,op(9,AC.bind(null,o,l,h,t),void 0,null),qn===null)throw Error(Je(349));Kl&30||MC(o,t,h)}return h}function MC(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function AC(e,t,o,l){t.value=o,t.getSnapshot=l,RC(t)&&LC(e)}function zC(e,t,o){return o(function(){RC(t)&&LC(e)})}function RC(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!Yo(e,o)}catch{return!0}}function LC(e){var t=Ys(e,1);t!==null&&Xo(t,e,1,-1)}function Cw(e){var t=hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:e},t.queue=e,e=e.dispatch=NM.bind(null,ln,e),[t.memoizedState,e]}function op(e,t,o,l){return e={tag:e,create:t,destroy:o,deps:l,next:null},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(l=o.next,o.next=e,e.next=l,t.lastEffect=e)),e}function DC(){return Do().memoizedState}function cm(e,t,o,l){var h=hs();ln.flags|=e,h.memoizedState=op(1|t,o,void 0,l===void 0?null:l)}function sg(e,t,o,l){var h=Do();l=l===void 0?null:l;var m=void 0;if(Ln!==null){var g=Ln.memoizedState;if(m=g.destroy,l!==null&&Jx(l,g.deps)){h.memoizedState=op(t,o,m,l);return}}ln.flags|=e,h.memoizedState=op(1|t,o,m,l)}function kw(e,t){return cm(8390656,8,e,t)}function t0(e,t){return sg(2048,8,e,t)}function BC(e,t){return sg(4,2,e,t)}function FC(e,t){return sg(4,4,e,t)}function OC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $C(e,t,o){return o=o!=null?o.concat([e]):null,sg(4,4,OC.bind(null,t,e),o)}function r0(){}function NC(e,t){var o=Do();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&Jx(t,l[1])?l[0]:(o.memoizedState=[e,t],e)}function jC(e,t){var o=Do();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&Jx(t,l[1])?l[0]:(e=e(),o.memoizedState=[e,t],e)}function VC(e,t,o){return Kl&21?(Yo(o,t)||(o=qS(),ln.lanes|=o,Yl|=o,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gi=!0),e.memoizedState=o)}function OM(e,t){var o=Or;Or=o!==0&&4>o?o:4,e(!0);var l=F_.transition;F_.transition={};try{e(!1),t()}finally{Or=o,F_.transition=l}}function UC(){return Do().memoizedState}function $M(e,t,o){var l=qa(e);if(o={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null},WC(e))HC(t,o);else if(o=kC(e,t,o,l),o!==null){var h=zi();Xo(o,e,l,h),GC(o,t,l)}}function NM(e,t,o){var l=qa(e),h={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null};if(WC(e))HC(t,h);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var g=t.lastRenderedState,u=m(g,o);if(h.hasEagerState=!0,h.eagerState=u,Yo(u,g)){var k=t.interleaved;k===null?(h.next=h,qx(t)):(h.next=k.next,k.next=h),t.interleaved=h;return}}catch{}finally{}o=kC(e,t,h,l),o!==null&&(h=zi(),Xo(o,e,l,h),GC(o,t,l))}}function WC(e){var t=e.alternate;return e===ln||t!==null&&t===ln}function HC(e,t){Bh=Fm=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function GC(e,t,o){if(o&4194240){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,Rx(e,o)}}var Om={readContext:Lo,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},jM={readContext:Lo,useCallback:function(e,t){return hs().memoizedState=[e,t===void 0?null:t],e},useContext:Lo,useEffect:kw,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,cm(4194308,4,OC.bind(null,t,e),o)},useLayoutEffect:function(e,t){return cm(4194308,4,e,t)},useInsertionEffect:function(e,t){return cm(4,2,e,t)},useMemo:function(e,t){var o=hs();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var l=hs();return t=o!==void 0?o(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=$M.bind(null,ln,e),[l.memoizedState,e]},useRef:function(e){var t=hs();return e={current:e},t.memoizedState=e},useState:Cw,useDebugValue:r0,useDeferredValue:function(e){return hs().memoizedState=e},useTransition:function(){var e=Cw(!1),t=e[0];return e=OM.bind(null,e[1]),hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var l=ln,h=hs();if(nn){if(o===void 0)throw Error(Je(407));o=o()}else{if(o=t(),qn===null)throw Error(Je(349));Kl&30||MC(l,t,o)}h.memoizedState=o;var m={value:o,getSnapshot:t};return h.queue=m,kw(zC.bind(null,l,m,e),[e]),l.flags|=2048,op(9,AC.bind(null,l,m,o,t),void 0,null),o},useId:function(){var e=hs(),t=qn.identifierPrefix;if(nn){var o=qs,l=Gs;o=(l&~(1<<32-Zo(l)-1)).toString(32)+o,t=":"+t+"R"+o,o=np++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=FM++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},VM={readContext:Lo,useCallback:NC,useContext:Lo,useEffect:t0,useImperativeHandle:$C,useInsertionEffect:BC,useLayoutEffect:FC,useMemo:jC,useReducer:O_,useRef:DC,useState:function(){return O_(ip)},useDebugValue:r0,useDeferredValue:function(e){var t=Do();return VC(t,Ln.memoizedState,e)},useTransition:function(){var e=O_(ip)[0],t=Do().memoizedState;return[e,t]},useMutableSource:PC,useSyncExternalStore:EC,useId:UC,unstable_isNewReconciler:!1},UM={readContext:Lo,useCallback:NC,useContext:Lo,useEffect:t0,useImperativeHandle:$C,useInsertionEffect:BC,useLayoutEffect:FC,useMemo:jC,useReducer:$_,useRef:DC,useState:function(){return $_(ip)},useDebugValue:r0,useDeferredValue:function(e){var t=Do();return Ln===null?t.memoizedState=e:VC(t,Ln.memoizedState,e)},useTransition:function(){var e=$_(ip)[0],t=Do().memoizedState;return[e,t]},useMutableSource:PC,useSyncExternalStore:EC,useId:UC,unstable_isNewReconciler:!1};function Ho(e,t){if(e&&e.defaultProps){t=cn({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}function $v(e,t,o,l){t=e.memoizedState,o=o(l,t),o=o==null?t:cn({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var ag={isMounted:function(e){return(e=e._reactInternals)?rc(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var l=zi(),h=qa(e),m=Zs(l,h);m.payload=t,o!=null&&(m.callback=o),t=Ha(e,m,h),t!==null&&(Xo(t,e,h,l),am(t,e,h))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var l=zi(),h=qa(e),m=Zs(l,h);m.tag=1,m.payload=t,o!=null&&(m.callback=o),t=Ha(e,m,h),t!==null&&(Xo(t,e,h,l),am(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=zi(),l=qa(e),h=Zs(o,l);h.tag=2,t!=null&&(h.callback=t),t=Ha(e,h,l),t!==null&&(Xo(t,e,l,o),am(t,e,l))}};function Tw(e,t,o,l,h,m,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,g):t.prototype&&t.prototype.isPureReactComponent?!Yh(o,l)||!Yh(h,m):!0}function qC(e,t,o){var l=!1,h=Ya,m=t.contextType;return typeof m=="object"&&m!==null?m=Lo(m):(h=Zi(t)?Zl:vi.current,l=t.contextTypes,m=(l=l!=null)?Mu(e,h):Ya),t=new t(o,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ag,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=m),t}function Iw(e,t,o,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,l),t.state!==e&&ag.enqueueReplaceState(t,t.state,null)}function Nv(e,t,o,l){var h=e.stateNode;h.props=o,h.state=e.memoizedState,h.refs={},Zx(e);var m=t.contextType;typeof m=="object"&&m!==null?h.context=Lo(m):(m=Zi(t)?Zl:vi.current,h.context=Mu(e,m)),h.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&($v(e,t,m,o),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&ag.enqueueReplaceState(h,h.state,null),Dm(e,o,h,l),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Lu(e,t){try{var o="",l=t;do o+=yE(l),l=l.return;while(l);var h=o}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:h,digest:null}}function N_(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function jv(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var WM=typeof WeakMap=="function"?WeakMap:Map;function ZC(e,t,o){o=Zs(-1,o),o.tag=3,o.payload={element:null};var l=t.value;return o.callback=function(){Nm||(Nm=!0,Yv=l),jv(e,t)},o}function XC(e,t,o){o=Zs(-1,o),o.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var h=t.value;o.payload=function(){return l(h)},o.callback=function(){jv(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(o.callback=function(){jv(e,t),typeof l!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),o}function Pw(e,t,o){var l=e.pingCache;if(l===null){l=e.pingCache=new WM;var h=new Set;l.set(t,h)}else h=l.get(t),h===void 0&&(h=new Set,l.set(t,h));h.has(o)||(h.add(o),e=iA.bind(null,e,t,o),t.then(e,e))}function Ew(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mw(e,t,o,l,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=Zs(-1,1),t.tag=2,Ha(o,t,1))),o.lanes|=1),e)}var HM=ea.ReactCurrentOwner,Gi=!1;function Mi(e,t,o,l){t.child=e===null?CC(t,null,o,l):zu(t,e.child,o,l)}function Aw(e,t,o,l,h){o=o.render;var m=t.ref;return Cu(t,h),l=Qx(e,t,o,l,m,h),o=e0(),e!==null&&!Gi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Js(e,t,h)):(nn&&o&&jx(t),t.flags|=1,Mi(e,t,l,h),t.child)}function zw(e,t,o,l,h){if(e===null){var m=o.type;return typeof m=="function"&&!u0(m)&&m.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=m,KC(e,t,m,l,h)):(e=pm(o.type,null,l,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!(e.lanes&h)){var g=m.memoizedProps;if(o=o.compare,o=o!==null?o:Yh,o(g,l)&&e.ref===t.ref)return Js(e,t,h)}return t.flags|=1,e=Za(m,l),e.ref=t.ref,e.return=t,t.child=e}function KC(e,t,o,l,h){if(e!==null){var m=e.memoizedProps;if(Yh(m,l)&&e.ref===t.ref)if(Gi=!1,t.pendingProps=l=m,(e.lanes&h)!==0)e.flags&131072&&(Gi=!0);else return t.lanes=e.lanes,Js(e,t,h)}return Vv(e,t,o,l,h)}function YC(e,t,o){var l=t.pendingProps,h=l.children,m=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zr(_u,uo),uo|=o;else{if(!(o&1073741824))return e=m!==null?m.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Zr(_u,uo),uo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=m!==null?m.baseLanes:o,Zr(_u,uo),uo|=l}else m!==null?(l=m.baseLanes|o,t.memoizedState=null):l=o,Zr(_u,uo),uo|=l;return Mi(e,t,h,o),t.child}function JC(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function Vv(e,t,o,l,h){var m=Zi(o)?Zl:vi.current;return m=Mu(t,m),Cu(t,h),o=Qx(e,t,o,l,m,h),l=e0(),e!==null&&!Gi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Js(e,t,h)):(nn&&l&&jx(t),t.flags|=1,Mi(e,t,o,h),t.child)}function Rw(e,t,o,l,h){if(Zi(o)){var m=!0;Mm(t)}else m=!1;if(Cu(t,h),t.stateNode===null)um(e,t),qC(t,o,l),Nv(t,o,l,h),l=!0;else if(e===null){var g=t.stateNode,u=t.memoizedProps;g.props=u;var k=g.context,M=o.contextType;typeof M=="object"&&M!==null?M=Lo(M):(M=Zi(o)?Zl:vi.current,M=Mu(t,M));var B=o.getDerivedStateFromProps,D=typeof B=="function"||typeof g.getSnapshotBeforeUpdate=="function";D||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==l||k!==M)&&Iw(t,g,l,M),Ba=!1;var A=t.memoizedState;g.state=A,Dm(t,l,g,h),k=t.memoizedState,u!==l||A!==k||qi.current||Ba?(typeof B=="function"&&($v(t,o,B,l),k=t.memoizedState),(u=Ba||Tw(t,o,u,l,A,k,M))?(D||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=k),g.props=l,g.state=k,g.context=M,l=u):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{g=t.stateNode,TC(e,t),u=t.memoizedProps,M=t.type===t.elementType?u:Ho(t.type,u),g.props=M,D=t.pendingProps,A=g.context,k=o.contextType,typeof k=="object"&&k!==null?k=Lo(k):(k=Zi(o)?Zl:vi.current,k=Mu(t,k));var Z=o.getDerivedStateFromProps;(B=typeof Z=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==D||A!==k)&&Iw(t,g,l,k),Ba=!1,A=t.memoizedState,g.state=A,Dm(t,l,g,h);var G=t.memoizedState;u!==D||A!==G||qi.current||Ba?(typeof Z=="function"&&($v(t,o,Z,l),G=t.memoizedState),(M=Ba||Tw(t,o,M,l,A,G,k)||!1)?(B||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,G,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,G,k)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=G),g.props=l,g.state=G,g.context=k,l=M):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),l=!1)}return Uv(e,t,o,l,m,h)}function Uv(e,t,o,l,h,m){JC(e,t);var g=(t.flags&128)!==0;if(!l&&!g)return h&&_w(t,o,!1),Js(e,t,m);l=t.stateNode,HM.current=t;var u=g&&typeof o.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&g?(t.child=zu(t,e.child,null,m),t.child=zu(t,null,u,m)):Mi(e,t,u,m),t.memoizedState=l.state,h&&_w(t,o,!0),t.child}function QC(e){var t=e.stateNode;t.pendingContext?yw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yw(e,t.context,!1),Xx(e,t.containerInfo)}function Lw(e,t,o,l,h){return Au(),Ux(h),t.flags|=256,Mi(e,t,o,l),t.child}var Wv={dehydrated:null,treeContext:null,retryLane:0};function Hv(e){return{baseLanes:e,cachePool:null,transitions:null}}function ek(e,t,o){var l=t.pendingProps,h=an.current,m=!1,g=(t.flags&128)!==0,u;if((u=g)||(u=e!==null&&e.memoizedState===null?!1:(h&2)!==0),u?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Zr(an,h&1),e===null)return Fv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=l.children,e=l.fallback,m?(l=t.mode,m=t.child,g={mode:"hidden",children:g},!(l&1)&&m!==null?(m.childLanes=0,m.pendingProps=g):m=ug(g,l,0,null),e=Gl(e,l,o,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=Hv(o),t.memoizedState=Wv,e):n0(t,g));if(h=e.memoizedState,h!==null&&(u=h.dehydrated,u!==null))return GM(e,t,g,l,u,h,o);if(m){m=l.fallback,g=t.mode,h=e.child,u=h.sibling;var k={mode:"hidden",children:l.children};return!(g&1)&&t.child!==h?(l=t.child,l.childLanes=0,l.pendingProps=k,t.deletions=null):(l=Za(h,k),l.subtreeFlags=h.subtreeFlags&14680064),u!==null?m=Za(u,m):(m=Gl(m,g,o,null),m.flags|=2),m.return=t,l.return=t,l.sibling=m,t.child=l,l=m,m=t.child,g=e.child.memoizedState,g=g===null?Hv(o):{baseLanes:g.baseLanes|o,cachePool:null,transitions:g.transitions},m.memoizedState=g,m.childLanes=e.childLanes&~o,t.memoizedState=Wv,l}return m=e.child,e=m.sibling,l=Za(m,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=o),l.return=t,l.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=l,t.memoizedState=null,l}function n0(e,t){return t=ug({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Uf(e,t,o,l){return l!==null&&Ux(l),zu(t,e.child,null,o),e=n0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GM(e,t,o,l,h,m,g){if(o)return t.flags&256?(t.flags&=-257,l=N_(Error(Je(422))),Uf(e,t,g,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=l.fallback,h=t.mode,l=ug({mode:"visible",children:l.children},h,0,null),m=Gl(m,h,g,null),m.flags|=2,l.return=t,m.return=t,l.sibling=m,t.child=l,t.mode&1&&zu(t,e.child,null,g),t.child.memoizedState=Hv(g),t.memoizedState=Wv,m);if(!(t.mode&1))return Uf(e,t,g,null);if(h.data==="$!"){if(l=h.nextSibling&&h.nextSibling.dataset,l)var u=l.dgst;return l=u,m=Error(Je(419)),l=N_(m,l,void 0),Uf(e,t,g,l)}if(u=(g&e.childLanes)!==0,Gi||u){if(l=qn,l!==null){switch(g&-g){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(l.suspendedLanes|g)?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,Ys(e,h),Xo(l,e,h,-1))}return c0(),l=N_(Error(Je(421))),Uf(e,t,g,l)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=oA.bind(null,e),h._reactRetry=t,null):(e=m.treeContext,po=Wa(h.nextSibling),fo=t,nn=!0,qo=null,e!==null&&(Io[Po++]=Gs,Io[Po++]=qs,Io[Po++]=Xl,Gs=e.id,qs=e.overflow,Xl=t),t=n0(t,l.children),t.flags|=4096,t)}function Dw(e,t,o){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ov(e.return,t,o)}function j_(e,t,o,l,h){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:h}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=o,m.tailMode=h)}function tk(e,t,o){var l=t.pendingProps,h=l.revealOrder,m=l.tail;if(Mi(e,t,l.children,o),l=an.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dw(e,o,t);else if(e.tag===19)Dw(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Zr(an,l),!(t.mode&1))t.memoizedState=null;else switch(h){case"forwards":for(o=t.child,h=null;o!==null;)e=o.alternate,e!==null&&Bm(e)===null&&(h=o),o=o.sibling;o=h,o===null?(h=t.child,t.child=null):(h=o.sibling,o.sibling=null),j_(t,!1,h,o,m);break;case"backwards":for(o=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&Bm(e)===null){t.child=h;break}e=h.sibling,h.sibling=o,o=h,h=e}j_(t,!0,o,null,m);break;case"together":j_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function um(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Js(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Yl|=t.lanes,!(o&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Je(153));if(t.child!==null){for(e=t.child,o=Za(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Za(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function qM(e,t,o){switch(t.tag){case 3:QC(t),Au();break;case 5:IC(t);break;case 1:Zi(t.type)&&Mm(t);break;case 4:Xx(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,h=t.memoizedProps.value;Zr(Rm,l._currentValue),l._currentValue=h;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Zr(an,an.current&1),t.flags|=128,null):o&t.child.childLanes?ek(e,t,o):(Zr(an,an.current&1),e=Js(e,t,o),e!==null?e.sibling:null);Zr(an,an.current&1);break;case 19:if(l=(o&t.childLanes)!==0,e.flags&128){if(l)return tk(e,t,o);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Zr(an,an.current),l)break;return null;case 22:case 23:return t.lanes=0,YC(e,t,o)}return Js(e,t,o)}var rk,Gv,nk,ik;rk=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Gv=function(){};nk=function(e,t,o,l){var h=e.memoizedProps;if(h!==l){e=t.stateNode,Vl(vs.current);var m=null;switch(o){case"input":h=fv(e,h),l=fv(e,l),m=[];break;case"select":h=cn({},h,{value:void 0}),l=cn({},l,{value:void 0}),m=[];break;case"textarea":h=yv(e,h),l=yv(e,l),m=[];break;default:typeof h.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Pm)}vv(o,l);var g;o=null;for(M in h)if(!l.hasOwnProperty(M)&&h.hasOwnProperty(M)&&h[M]!=null)if(M==="style"){var u=h[M];for(g in u)u.hasOwnProperty(g)&&(o||(o={}),o[g]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(Wh.hasOwnProperty(M)?m||(m=[]):(m=m||[]).push(M,null));for(M in l){var k=l[M];if(u=h!=null?h[M]:void 0,l.hasOwnProperty(M)&&k!==u&&(k!=null||u!=null))if(M==="style")if(u){for(g in u)!u.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(o||(o={}),o[g]="");for(g in k)k.hasOwnProperty(g)&&u[g]!==k[g]&&(o||(o={}),o[g]=k[g])}else o||(m||(m=[]),m.push(M,o)),o=k;else M==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,u=u?u.__html:void 0,k!=null&&u!==k&&(m=m||[]).push(M,k)):M==="children"?typeof k!="string"&&typeof k!="number"||(m=m||[]).push(M,""+k):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(Wh.hasOwnProperty(M)?(k!=null&&M==="onScroll"&&Yr("scroll",e),m||u===k||(m=[])):(m=m||[]).push(M,k))}o&&(m=m||[]).push("style",o);var M=m;(t.updateQueue=M)&&(t.flags|=4)}};ik=function(e,t,o,l){o!==l&&(t.flags|=4)};function hh(e,t){if(!nn)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function gi(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,l=0;if(t)for(var h=e.child;h!==null;)o|=h.lanes|h.childLanes,l|=h.subtreeFlags&14680064,l|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)o|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=o,t}function ZM(e,t,o){var l=t.pendingProps;switch(Vx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(t),null;case 1:return Zi(t.type)&&Em(),gi(t),null;case 3:return l=t.stateNode,Ru(),Jr(qi),Jr(vi),Yx(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(jf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qo!==null&&(ex(qo),qo=null))),Gv(e,t),gi(t),null;case 5:Kx(t);var h=Vl(rp.current);if(o=t.type,e!==null&&t.stateNode!=null)nk(e,t,o,l,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(Je(166));return gi(t),null}if(e=Vl(vs.current),jf(t)){l=t.stateNode,o=t.type;var m=t.memoizedProps;switch(l[gs]=t,l[ep]=m,e=(t.mode&1)!==0,o){case"dialog":Yr("cancel",l),Yr("close",l);break;case"iframe":case"object":case"embed":Yr("load",l);break;case"video":case"audio":for(h=0;h<kh.length;h++)Yr(kh[h],l);break;case"source":Yr("error",l);break;case"img":case"image":case"link":Yr("error",l),Yr("load",l);break;case"details":Yr("toggle",l);break;case"input":W1(l,m),Yr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!m.multiple},Yr("invalid",l);break;case"textarea":G1(l,m),Yr("invalid",l)}vv(o,m),h=null;for(var g in m)if(m.hasOwnProperty(g)){var u=m[g];g==="children"?typeof u=="string"?l.textContent!==u&&(m.suppressHydrationWarning!==!0&&Nf(l.textContent,u,e),h=["children",u]):typeof u=="number"&&l.textContent!==""+u&&(m.suppressHydrationWarning!==!0&&Nf(l.textContent,u,e),h=["children",""+u]):Wh.hasOwnProperty(g)&&u!=null&&g==="onScroll"&&Yr("scroll",l)}switch(o){case"input":zf(l),H1(l,m,!0);break;case"textarea":zf(l),q1(l);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(l.onclick=Pm)}l=h,t.updateQueue=l,l!==null&&(t.flags|=4)}else{g=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zS(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(o,{is:l.is}):(e=g.createElement(o),o==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,o),e[gs]=t,e[ep]=l,rk(e,t,!1,!1),t.stateNode=e;e:{switch(g=xv(o,l),o){case"dialog":Yr("cancel",e),Yr("close",e),h=l;break;case"iframe":case"object":case"embed":Yr("load",e),h=l;break;case"video":case"audio":for(h=0;h<kh.length;h++)Yr(kh[h],e);h=l;break;case"source":Yr("error",e),h=l;break;case"img":case"image":case"link":Yr("error",e),Yr("load",e),h=l;break;case"details":Yr("toggle",e),h=l;break;case"input":W1(e,l),h=fv(e,l),Yr("invalid",e);break;case"option":h=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},h=cn({},l,{value:void 0}),Yr("invalid",e);break;case"textarea":G1(e,l),h=yv(e,l),Yr("invalid",e);break;default:h=l}vv(o,h),u=h;for(m in u)if(u.hasOwnProperty(m)){var k=u[m];m==="style"?DS(e,k):m==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&RS(e,k)):m==="children"?typeof k=="string"?(o!=="textarea"||k!=="")&&Hh(e,k):typeof k=="number"&&Hh(e,""+k):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Wh.hasOwnProperty(m)?k!=null&&m==="onScroll"&&Yr("scroll",e):k!=null&&Ix(e,m,k,g))}switch(o){case"input":zf(e),H1(e,l,!1);break;case"textarea":zf(e),q1(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Ka(l.value));break;case"select":e.multiple=!!l.multiple,m=l.value,m!=null?xu(e,!!l.multiple,m,!1):l.defaultValue!=null&&xu(e,!!l.multiple,l.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Pm)}switch(o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gi(t),null;case 6:if(e&&t.stateNode!=null)ik(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(Je(166));if(o=Vl(rp.current),Vl(vs.current),jf(t)){if(l=t.stateNode,o=t.memoizedProps,l[gs]=t,(m=l.nodeValue!==o)&&(e=fo,e!==null))switch(e.tag){case 3:Nf(l.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nf(l.nodeValue,o,(e.mode&1)!==0)}m&&(t.flags|=4)}else l=(o.nodeType===9?o:o.ownerDocument).createTextNode(l),l[gs]=t,t.stateNode=l}return gi(t),null;case 13:if(Jr(an),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nn&&po!==null&&t.mode&1&&!(t.flags&128))wC(),Au(),t.flags|=98560,m=!1;else if(m=jf(t),l!==null&&l.dehydrated!==null){if(e===null){if(!m)throw Error(Je(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(Je(317));m[gs]=t}else Au(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gi(t),m=!1}else qo!==null&&(ex(qo),qo=null),m=!0;if(!m)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||an.current&1?Dn===0&&(Dn=3):c0())),t.updateQueue!==null&&(t.flags|=4),gi(t),null);case 4:return Ru(),Gv(e,t),e===null&&Jh(t.stateNode.containerInfo),gi(t),null;case 10:return Gx(t.type._context),gi(t),null;case 17:return Zi(t.type)&&Em(),gi(t),null;case 19:if(Jr(an),m=t.memoizedState,m===null)return gi(t),null;if(l=(t.flags&128)!==0,g=m.rendering,g===null)if(l)hh(m,!1);else{if(Dn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=Bm(e),g!==null){for(t.flags|=128,hh(m,!1),l=g.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=o,o=t.child;o!==null;)m=o,e=l,m.flags&=14680066,g=m.alternate,g===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=g.childLanes,m.lanes=g.lanes,m.child=g.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=g.memoizedProps,m.memoizedState=g.memoizedState,m.updateQueue=g.updateQueue,m.type=g.type,e=g.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Zr(an,an.current&1|2),t.child}e=e.sibling}m.tail!==null&&xn()>Du&&(t.flags|=128,l=!0,hh(m,!1),t.lanes=4194304)}else{if(!l)if(e=Bm(g),e!==null){if(t.flags|=128,l=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),hh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!nn)return gi(t),null}else 2*xn()-m.renderingStartTime>Du&&o!==1073741824&&(t.flags|=128,l=!0,hh(m,!1),t.lanes=4194304);m.isBackwards?(g.sibling=t.child,t.child=g):(o=m.last,o!==null?o.sibling=g:t.child=g,m.last=g)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=xn(),t.sibling=null,o=an.current,Zr(an,l?o&1|2:o&1),t):(gi(t),null);case 22:case 23:return l0(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?uo&1073741824&&(gi(t),t.subtreeFlags&6&&(t.flags|=8192)):gi(t),null;case 24:return null;case 25:return null}throw Error(Je(156,t.tag))}function XM(e,t){switch(Vx(t),t.tag){case 1:return Zi(t.type)&&Em(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ru(),Jr(qi),Jr(vi),Yx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kx(t),null;case 13:if(Jr(an),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Je(340));Au()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jr(an),null;case 4:return Ru(),null;case 10:return Gx(t.type._context),null;case 22:case 23:return l0(),null;case 24:return null;default:return null}}var Wf=!1,_i=!1,KM=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function yu(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(l){yn(e,t,l)}else o.current=null}function qv(e,t,o){try{o()}catch(l){yn(e,t,l)}}var Bw=!1;function YM(e,t){if(Mv=km,e=cC(),Nx(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var g=0,u=-1,k=-1,M=0,B=0,D=e,A=null;t:for(;;){for(var Z;D!==o||h!==0&&D.nodeType!==3||(u=g+h),D!==m||l!==0&&D.nodeType!==3||(k=g+l),D.nodeType===3&&(g+=D.nodeValue.length),(Z=D.firstChild)!==null;)A=D,D=Z;for(;;){if(D===e)break t;if(A===o&&++M===h&&(u=g),A===m&&++B===l&&(k=g),(Z=D.nextSibling)!==null)break;D=A,A=D.parentNode}D=Z}o=u===-1||k===-1?null:{start:u,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Av={focusedElem:e,selectionRange:o},km=!1,Ct=t;Ct!==null;)if(t=Ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ct=e;else for(;Ct!==null;){t=Ct;try{var G=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var te=G.memoizedProps,ne=G.memoizedState,W=t.stateNode,O=W.getSnapshotBeforeUpdate(t.elementType===t.type?te:Ho(t.type,te),ne);W.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(K){yn(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,Ct=e;break}Ct=t.return}return G=Bw,Bw=!1,G}function Fh(e,t,o){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&e)===e){var m=h.destroy;h.destroy=void 0,m!==void 0&&qv(t,o,m)}h=h.next}while(h!==l)}}function lg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var l=o.create;o.destroy=l()}o=o.next}while(o!==t)}}function Zv(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function ok(e){var t=e.alternate;t!==null&&(e.alternate=null,ok(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gs],delete t[ep],delete t[Lv],delete t[RM],delete t[LM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sk(e){return e.tag===5||e.tag===3||e.tag===4}function Fw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xv(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Pm));else if(l!==4&&(e=e.child,e!==null))for(Xv(e,t,o),e=e.sibling;e!==null;)Xv(e,t,o),e=e.sibling}function Kv(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Kv(e,t,o),e=e.sibling;e!==null;)Kv(e,t,o),e=e.sibling}var ti=null,Go=!1;function La(e,t,o){for(o=o.child;o!==null;)ak(e,t,o),o=o.sibling}function ak(e,t,o){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(eg,o)}catch{}switch(o.tag){case 5:_i||yu(o,t);case 6:var l=ti,h=Go;ti=null,La(e,t,o),ti=l,Go=h,ti!==null&&(Go?(e=ti,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):ti.removeChild(o.stateNode));break;case 18:ti!==null&&(Go?(e=ti,o=o.stateNode,e.nodeType===8?L_(e.parentNode,o):e.nodeType===1&&L_(e,o),Xh(e)):L_(ti,o.stateNode));break;case 4:l=ti,h=Go,ti=o.stateNode.containerInfo,Go=!0,La(e,t,o),ti=l,Go=h;break;case 0:case 11:case 14:case 15:if(!_i&&(l=o.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){h=l=l.next;do{var m=h,g=m.destroy;m=m.tag,g!==void 0&&(m&2||m&4)&&qv(o,t,g),h=h.next}while(h!==l)}La(e,t,o);break;case 1:if(!_i&&(yu(o,t),l=o.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=o.memoizedProps,l.state=o.memoizedState,l.componentWillUnmount()}catch(u){yn(o,t,u)}La(e,t,o);break;case 21:La(e,t,o);break;case 22:o.mode&1?(_i=(l=_i)||o.memoizedState!==null,La(e,t,o),_i=l):La(e,t,o);break;default:La(e,t,o)}}function Ow(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new KM),t.forEach(function(l){var h=sA.bind(null,e,l);o.has(l)||(o.add(l),l.then(h,h))})}}function Uo(e,t){var o=t.deletions;if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];try{var m=e,g=t,u=g;e:for(;u!==null;){switch(u.tag){case 5:ti=u.stateNode,Go=!1;break e;case 3:ti=u.stateNode.containerInfo,Go=!0;break e;case 4:ti=u.stateNode.containerInfo,Go=!0;break e}u=u.return}if(ti===null)throw Error(Je(160));ak(m,g,h),ti=null,Go=!1;var k=h.alternate;k!==null&&(k.return=null),h.return=null}catch(M){yn(h,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lk(t,e),t=t.sibling}function lk(e,t){var o=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Uo(t,e),cs(e),l&4){try{Fh(3,e,e.return),lg(3,e)}catch(te){yn(e,e.return,te)}try{Fh(5,e,e.return)}catch(te){yn(e,e.return,te)}}break;case 1:Uo(t,e),cs(e),l&512&&o!==null&&yu(o,o.return);break;case 5:if(Uo(t,e),cs(e),l&512&&o!==null&&yu(o,o.return),e.flags&32){var h=e.stateNode;try{Hh(h,"")}catch(te){yn(e,e.return,te)}}if(l&4&&(h=e.stateNode,h!=null)){var m=e.memoizedProps,g=o!==null?o.memoizedProps:m,u=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{u==="input"&&m.type==="radio"&&m.name!=null&&MS(h,m),xv(u,g);var M=xv(u,m);for(g=0;g<k.length;g+=2){var B=k[g],D=k[g+1];B==="style"?DS(h,D):B==="dangerouslySetInnerHTML"?RS(h,D):B==="children"?Hh(h,D):Ix(h,B,D,M)}switch(u){case"input":mv(h,m);break;case"textarea":AS(h,m);break;case"select":var A=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var Z=m.value;Z!=null?xu(h,!!m.multiple,Z,!1):A!==!!m.multiple&&(m.defaultValue!=null?xu(h,!!m.multiple,m.defaultValue,!0):xu(h,!!m.multiple,m.multiple?[]:"",!1))}h[ep]=m}catch(te){yn(e,e.return,te)}}break;case 6:if(Uo(t,e),cs(e),l&4){if(e.stateNode===null)throw Error(Je(162));h=e.stateNode,m=e.memoizedProps;try{h.nodeValue=m}catch(te){yn(e,e.return,te)}}break;case 3:if(Uo(t,e),cs(e),l&4&&o!==null&&o.memoizedState.isDehydrated)try{Xh(t.containerInfo)}catch(te){yn(e,e.return,te)}break;case 4:Uo(t,e),cs(e);break;case 13:Uo(t,e),cs(e),h=e.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||(s0=xn())),l&4&&Ow(e);break;case 22:if(B=o!==null&&o.memoizedState!==null,e.mode&1?(_i=(M=_i)||B,Uo(t,e),_i=M):Uo(t,e),cs(e),l&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!B&&e.mode&1)for(Ct=e,B=e.child;B!==null;){for(D=Ct=B;Ct!==null;){switch(A=Ct,Z=A.child,A.tag){case 0:case 11:case 14:case 15:Fh(4,A,A.return);break;case 1:yu(A,A.return);var G=A.stateNode;if(typeof G.componentWillUnmount=="function"){l=A,o=A.return;try{t=l,G.props=t.memoizedProps,G.state=t.memoizedState,G.componentWillUnmount()}catch(te){yn(l,o,te)}}break;case 5:yu(A,A.return);break;case 22:if(A.memoizedState!==null){Nw(D);continue}}Z!==null?(Z.return=A,Ct=Z):Nw(D)}B=B.sibling}e:for(B=null,D=e;;){if(D.tag===5){if(B===null){B=D;try{h=D.stateNode,M?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(u=D.stateNode,k=D.memoizedProps.style,g=k!=null&&k.hasOwnProperty("display")?k.display:null,u.style.display=LS("display",g))}catch(te){yn(e,e.return,te)}}}else if(D.tag===6){if(B===null)try{D.stateNode.nodeValue=M?"":D.memoizedProps}catch(te){yn(e,e.return,te)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;B===D&&(B=null),D=D.return}B===D&&(B=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:Uo(t,e),cs(e),l&4&&Ow(e);break;case 21:break;default:Uo(t,e),cs(e)}}function cs(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(sk(o)){var l=o;break e}o=o.return}throw Error(Je(160))}switch(l.tag){case 5:var h=l.stateNode;l.flags&32&&(Hh(h,""),l.flags&=-33);var m=Fw(e);Kv(e,m,h);break;case 3:case 4:var g=l.stateNode.containerInfo,u=Fw(e);Xv(e,u,g);break;default:throw Error(Je(161))}}catch(k){yn(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function JM(e,t,o){Ct=e,ck(e)}function ck(e,t,o){for(var l=(e.mode&1)!==0;Ct!==null;){var h=Ct,m=h.child;if(h.tag===22&&l){var g=h.memoizedState!==null||Wf;if(!g){var u=h.alternate,k=u!==null&&u.memoizedState!==null||_i;u=Wf;var M=_i;if(Wf=g,(_i=k)&&!M)for(Ct=h;Ct!==null;)g=Ct,k=g.child,g.tag===22&&g.memoizedState!==null?jw(h):k!==null?(k.return=g,Ct=k):jw(h);for(;m!==null;)Ct=m,ck(m),m=m.sibling;Ct=h,Wf=u,_i=M}$w(e)}else h.subtreeFlags&8772&&m!==null?(m.return=h,Ct=m):$w(e)}}function $w(e){for(;Ct!==null;){var t=Ct;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_i||lg(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!_i)if(o===null)l.componentDidMount();else{var h=t.elementType===t.type?o.memoizedProps:Ho(t.type,o.memoizedProps);l.componentDidUpdate(h,o.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&Sw(t,m,l);break;case 3:var g=t.updateQueue;if(g!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}Sw(t,g,o)}break;case 5:var u=t.stateNode;if(o===null&&t.flags&4){o=u;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&o.focus();break;case"img":k.src&&(o.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var B=M.memoizedState;if(B!==null){var D=B.dehydrated;D!==null&&Xh(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}_i||t.flags&512&&Zv(t)}catch(A){yn(t,t.return,A)}}if(t===e){Ct=null;break}if(o=t.sibling,o!==null){o.return=t.return,Ct=o;break}Ct=t.return}}function Nw(e){for(;Ct!==null;){var t=Ct;if(t===e){Ct=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ct=o;break}Ct=t.return}}function jw(e){for(;Ct!==null;){var t=Ct;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{lg(4,t)}catch(k){yn(t,o,k)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var h=t.return;try{l.componentDidMount()}catch(k){yn(t,h,k)}}var m=t.return;try{Zv(t)}catch(k){yn(t,m,k)}break;case 5:var g=t.return;try{Zv(t)}catch(k){yn(t,g,k)}}}catch(k){yn(t,t.return,k)}if(t===e){Ct=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Ct=u;break}Ct=t.return}}var QM=Math.ceil,$m=ea.ReactCurrentDispatcher,i0=ea.ReactCurrentOwner,zo=ea.ReactCurrentBatchConfig,Cr=0,qn=null,Pn=null,ni=0,uo=0,_u=tl(0),Dn=0,sp=null,Yl=0,cg=0,o0=0,Oh=null,Hi=null,s0=0,Du=1/0,Us=null,Nm=!1,Yv=null,Ga=null,Hf=!1,Na=null,jm=0,$h=0,Jv=null,dm=-1,hm=0;function zi(){return Cr&6?xn():dm!==-1?dm:dm=xn()}function qa(e){return e.mode&1?Cr&2&&ni!==0?ni&-ni:BM.transition!==null?(hm===0&&(hm=qS()),hm):(e=Or,e!==0||(e=window.event,e=e===void 0?16:eC(e.type)),e):1}function Xo(e,t,o,l){if(50<$h)throw $h=0,Jv=null,Error(Je(185));mp(e,o,l),(!(Cr&2)||e!==qn)&&(e===qn&&(!(Cr&2)&&(cg|=o),Dn===4&&Oa(e,ni)),Xi(e,l),o===1&&Cr===0&&!(t.mode&1)&&(Du=xn()+500,og&&rl()))}function Xi(e,t){var o=e.callbackNode;BE(e,t);var l=Cm(e,e===qn?ni:0);if(l===0)o!==null&&K1(o),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(o!=null&&K1(o),t===1)e.tag===0?DM(Vw.bind(null,e)):vC(Vw.bind(null,e)),AM(function(){!(Cr&6)&&rl()}),o=null;else{switch(ZS(l)){case 1:o=zx;break;case 4:o=HS;break;case 16:o=Sm;break;case 536870912:o=GS;break;default:o=Sm}o=yk(o,uk.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function uk(e,t){if(dm=-1,hm=0,Cr&6)throw Error(Je(327));var o=e.callbackNode;if(ku()&&e.callbackNode!==o)return null;var l=Cm(e,e===qn?ni:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=Vm(e,l);else{t=l;var h=Cr;Cr|=2;var m=hk();(qn!==e||ni!==t)&&(Us=null,Du=xn()+500,Hl(e,t));do try{rA();break}catch(u){dk(e,u)}while(!0);Hx(),$m.current=m,Cr=h,Pn!==null?t=0:(qn=null,ni=0,t=Dn)}if(t!==0){if(t===2&&(h=kv(e),h!==0&&(l=h,t=Qv(e,h))),t===1)throw o=sp,Hl(e,0),Oa(e,l),Xi(e,xn()),o;if(t===6)Oa(e,l);else{if(h=e.current.alternate,!(l&30)&&!eA(h)&&(t=Vm(e,l),t===2&&(m=kv(e),m!==0&&(l=m,t=Qv(e,m))),t===1))throw o=sp,Hl(e,0),Oa(e,l),Xi(e,xn()),o;switch(e.finishedWork=h,e.finishedLanes=l,t){case 0:case 1:throw Error(Je(345));case 2:Dl(e,Hi,Us);break;case 3:if(Oa(e,l),(l&130023424)===l&&(t=s0+500-xn(),10<t)){if(Cm(e,0)!==0)break;if(h=e.suspendedLanes,(h&l)!==l){zi(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Rv(Dl.bind(null,e,Hi,Us),t);break}Dl(e,Hi,Us);break;case 4:if(Oa(e,l),(l&4194240)===l)break;for(t=e.eventTimes,h=-1;0<l;){var g=31-Zo(l);m=1<<g,g=t[g],g>h&&(h=g),l&=~m}if(l=h,l=xn()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*QM(l/1960))-l,10<l){e.timeoutHandle=Rv(Dl.bind(null,e,Hi,Us),l);break}Dl(e,Hi,Us);break;case 5:Dl(e,Hi,Us);break;default:throw Error(Je(329))}}}return Xi(e,xn()),e.callbackNode===o?uk.bind(null,e):null}function Qv(e,t){var o=Oh;return e.current.memoizedState.isDehydrated&&(Hl(e,t).flags|=256),e=Vm(e,t),e!==2&&(t=Hi,Hi=o,t!==null&&ex(t)),e}function ex(e){Hi===null?Hi=e:Hi.push.apply(Hi,e)}function eA(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var l=0;l<o.length;l++){var h=o[l],m=h.getSnapshot;h=h.value;try{if(!Yo(m(),h))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oa(e,t){for(t&=~o0,t&=~cg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-Zo(t),l=1<<o;e[o]=-1,t&=~l}}function Vw(e){if(Cr&6)throw Error(Je(327));ku();var t=Cm(e,0);if(!(t&1))return Xi(e,xn()),null;var o=Vm(e,t);if(e.tag!==0&&o===2){var l=kv(e);l!==0&&(t=l,o=Qv(e,l))}if(o===1)throw o=sp,Hl(e,0),Oa(e,t),Xi(e,xn()),o;if(o===6)throw Error(Je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dl(e,Hi,Us),Xi(e,xn()),null}function a0(e,t){var o=Cr;Cr|=1;try{return e(t)}finally{Cr=o,Cr===0&&(Du=xn()+500,og&&rl())}}function Jl(e){Na!==null&&Na.tag===0&&!(Cr&6)&&ku();var t=Cr;Cr|=1;var o=zo.transition,l=Or;try{if(zo.transition=null,Or=1,e)return e()}finally{Or=l,zo.transition=o,Cr=t,!(Cr&6)&&rl()}}function l0(){uo=_u.current,Jr(_u)}function Hl(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,MM(o)),Pn!==null)for(o=Pn.return;o!==null;){var l=o;switch(Vx(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Em();break;case 3:Ru(),Jr(qi),Jr(vi),Yx();break;case 5:Kx(l);break;case 4:Ru();break;case 13:Jr(an);break;case 19:Jr(an);break;case 10:Gx(l.type._context);break;case 22:case 23:l0()}o=o.return}if(qn=e,Pn=e=Za(e.current,null),ni=uo=t,Dn=0,sp=null,o0=cg=Yl=0,Hi=Oh=null,jl!==null){for(t=0;t<jl.length;t++)if(o=jl[t],l=o.interleaved,l!==null){o.interleaved=null;var h=l.next,m=o.pending;if(m!==null){var g=m.next;m.next=h,l.next=g}o.pending=l}jl=null}return e}function dk(e,t){do{var o=Pn;try{if(Hx(),lm.current=Om,Fm){for(var l=ln.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}Fm=!1}if(Kl=0,Gn=Ln=ln=null,Bh=!1,np=0,i0.current=null,o===null||o.return===null){Dn=1,sp=t,Pn=null;break}e:{var m=e,g=o.return,u=o,k=t;if(t=ni,u.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var M=k,B=u,D=B.tag;if(!(B.mode&1)&&(D===0||D===11||D===15)){var A=B.alternate;A?(B.updateQueue=A.updateQueue,B.memoizedState=A.memoizedState,B.lanes=A.lanes):(B.updateQueue=null,B.memoizedState=null)}var Z=Ew(g);if(Z!==null){Z.flags&=-257,Mw(Z,g,u,m,t),Z.mode&1&&Pw(m,M,t),t=Z,k=M;var G=t.updateQueue;if(G===null){var te=new Set;te.add(k),t.updateQueue=te}else G.add(k);break e}else{if(!(t&1)){Pw(m,M,t),c0();break e}k=Error(Je(426))}}else if(nn&&u.mode&1){var ne=Ew(g);if(ne!==null){!(ne.flags&65536)&&(ne.flags|=256),Mw(ne,g,u,m,t),Ux(Lu(k,u));break e}}m=k=Lu(k,u),Dn!==4&&(Dn=2),Oh===null?Oh=[m]:Oh.push(m),m=g;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var W=ZC(m,k,t);ww(m,W);break e;case 1:u=k;var O=m.type,U=m.stateNode;if(!(m.flags&128)&&(typeof O.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Ga===null||!Ga.has(U)))){m.flags|=65536,t&=-t,m.lanes|=t;var K=XC(m,u,t);ww(m,K);break e}}m=m.return}while(m!==null)}fk(o)}catch(he){t=he,Pn===o&&o!==null&&(Pn=o=o.return);continue}break}while(!0)}function hk(){var e=$m.current;return $m.current=Om,e===null?Om:e}function c0(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),qn===null||!(Yl&268435455)&&!(cg&268435455)||Oa(qn,ni)}function Vm(e,t){var o=Cr;Cr|=2;var l=hk();(qn!==e||ni!==t)&&(Us=null,Hl(e,t));do try{tA();break}catch(h){dk(e,h)}while(!0);if(Hx(),Cr=o,$m.current=l,Pn!==null)throw Error(Je(261));return qn=null,ni=0,Dn}function tA(){for(;Pn!==null;)pk(Pn)}function rA(){for(;Pn!==null&&!IE();)pk(Pn)}function pk(e){var t=gk(e.alternate,e,uo);e.memoizedProps=e.pendingProps,t===null?fk(e):Pn=t,i0.current=null}function fk(e){var t=e;do{var o=t.alternate;if(e=t.return,t.flags&32768){if(o=XM(o,t),o!==null){o.flags&=32767,Pn=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dn=6,Pn=null;return}}else if(o=ZM(o,t,uo),o!==null){Pn=o;return}if(t=t.sibling,t!==null){Pn=t;return}Pn=t=e}while(t!==null);Dn===0&&(Dn=5)}function Dl(e,t,o){var l=Or,h=zo.transition;try{zo.transition=null,Or=1,nA(e,t,o,l)}finally{zo.transition=h,Or=l}return null}function nA(e,t,o,l){do ku();while(Na!==null);if(Cr&6)throw Error(Je(327));o=e.finishedWork;var h=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(Je(177));e.callbackNode=null,e.callbackPriority=0;var m=o.lanes|o.childLanes;if(FE(e,m),e===qn&&(Pn=qn=null,ni=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Hf||(Hf=!0,yk(Sm,function(){return ku(),null})),m=(o.flags&15990)!==0,o.subtreeFlags&15990||m){m=zo.transition,zo.transition=null;var g=Or;Or=1;var u=Cr;Cr|=4,i0.current=null,YM(e,o),lk(o,e),SM(Av),km=!!Mv,Av=Mv=null,e.current=o,JM(o),PE(),Cr=u,Or=g,zo.transition=m}else e.current=o;if(Hf&&(Hf=!1,Na=e,jm=h),m=e.pendingLanes,m===0&&(Ga=null),AE(o.stateNode),Xi(e,xn()),t!==null)for(l=e.onRecoverableError,o=0;o<t.length;o++)h=t[o],l(h.value,{componentStack:h.stack,digest:h.digest});if(Nm)throw Nm=!1,e=Yv,Yv=null,e;return jm&1&&e.tag!==0&&ku(),m=e.pendingLanes,m&1?e===Jv?$h++:($h=0,Jv=e):$h=0,rl(),null}function ku(){if(Na!==null){var e=ZS(jm),t=zo.transition,o=Or;try{if(zo.transition=null,Or=16>e?16:e,Na===null)var l=!1;else{if(e=Na,Na=null,jm=0,Cr&6)throw Error(Je(331));var h=Cr;for(Cr|=4,Ct=e.current;Ct!==null;){var m=Ct,g=m.child;if(Ct.flags&16){var u=m.deletions;if(u!==null){for(var k=0;k<u.length;k++){var M=u[k];for(Ct=M;Ct!==null;){var B=Ct;switch(B.tag){case 0:case 11:case 15:Fh(8,B,m)}var D=B.child;if(D!==null)D.return=B,Ct=D;else for(;Ct!==null;){B=Ct;var A=B.sibling,Z=B.return;if(ok(B),B===M){Ct=null;break}if(A!==null){A.return=Z,Ct=A;break}Ct=Z}}}var G=m.alternate;if(G!==null){var te=G.child;if(te!==null){G.child=null;do{var ne=te.sibling;te.sibling=null,te=ne}while(te!==null)}}Ct=m}}if(m.subtreeFlags&2064&&g!==null)g.return=m,Ct=g;else e:for(;Ct!==null;){if(m=Ct,m.flags&2048)switch(m.tag){case 0:case 11:case 15:Fh(9,m,m.return)}var W=m.sibling;if(W!==null){W.return=m.return,Ct=W;break e}Ct=m.return}}var O=e.current;for(Ct=O;Ct!==null;){g=Ct;var U=g.child;if(g.subtreeFlags&2064&&U!==null)U.return=g,Ct=U;else e:for(g=O;Ct!==null;){if(u=Ct,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:lg(9,u)}}catch(he){yn(u,u.return,he)}if(u===g){Ct=null;break e}var K=u.sibling;if(K!==null){K.return=u.return,Ct=K;break e}Ct=u.return}}if(Cr=h,rl(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(eg,e)}catch{}l=!0}return l}finally{Or=o,zo.transition=t}}return!1}function Uw(e,t,o){t=Lu(o,t),t=ZC(e,t,1),e=Ha(e,t,1),t=zi(),e!==null&&(mp(e,1,t),Xi(e,t))}function yn(e,t,o){if(e.tag===3)Uw(e,e,o);else for(;t!==null;){if(t.tag===3){Uw(t,e,o);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ga===null||!Ga.has(l))){e=Lu(o,e),e=XC(t,e,1),t=Ha(t,e,1),e=zi(),t!==null&&(mp(t,1,e),Xi(t,e));break}}t=t.return}}function iA(e,t,o){var l=e.pingCache;l!==null&&l.delete(t),t=zi(),e.pingedLanes|=e.suspendedLanes&o,qn===e&&(ni&o)===o&&(Dn===4||Dn===3&&(ni&130023424)===ni&&500>xn()-s0?Hl(e,0):o0|=o),Xi(e,t)}function mk(e,t){t===0&&(e.mode&1?(t=Df,Df<<=1,!(Df&130023424)&&(Df=4194304)):t=1);var o=zi();e=Ys(e,t),e!==null&&(mp(e,t,o),Xi(e,o))}function oA(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),mk(e,o)}function sA(e,t){var o=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(o=h.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(Je(314))}l!==null&&l.delete(t),mk(e,o)}var gk;gk=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||qi.current)Gi=!0;else{if(!(e.lanes&o)&&!(t.flags&128))return Gi=!1,qM(e,t,o);Gi=!!(e.flags&131072)}else Gi=!1,nn&&t.flags&1048576&&xC(t,zm,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;um(e,t),e=t.pendingProps;var h=Mu(t,vi.current);Cu(t,o),h=Qx(null,t,l,e,h,o);var m=e0();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zi(l)?(m=!0,Mm(t)):m=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Zx(t),h.updater=ag,t.stateNode=h,h._reactInternals=t,Nv(t,l,e,o),t=Uv(null,t,l,!0,m,o)):(t.tag=0,nn&&m&&jx(t),Mi(null,t,h,o),t=t.child),t;case 16:l=t.elementType;e:{switch(um(e,t),e=t.pendingProps,h=l._init,l=h(l._payload),t.type=l,h=t.tag=lA(l),e=Ho(l,e),h){case 0:t=Vv(null,t,l,e,o);break e;case 1:t=Rw(null,t,l,e,o);break e;case 11:t=Aw(null,t,l,e,o);break e;case 14:t=zw(null,t,l,Ho(l.type,e),o);break e}throw Error(Je(306,l,""))}return t;case 0:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Ho(l,h),Vv(e,t,l,h,o);case 1:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Ho(l,h),Rw(e,t,l,h,o);case 3:e:{if(QC(t),e===null)throw Error(Je(387));l=t.pendingProps,m=t.memoizedState,h=m.element,TC(e,t),Dm(t,l,null,o);var g=t.memoizedState;if(l=g.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){h=Lu(Error(Je(423)),t),t=Lw(e,t,l,o,h);break e}else if(l!==h){h=Lu(Error(Je(424)),t),t=Lw(e,t,l,o,h);break e}else for(po=Wa(t.stateNode.containerInfo.firstChild),fo=t,nn=!0,qo=null,o=CC(t,null,l,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Au(),l===h){t=Js(e,t,o);break e}Mi(e,t,l,o)}t=t.child}return t;case 5:return IC(t),e===null&&Fv(t),l=t.type,h=t.pendingProps,m=e!==null?e.memoizedProps:null,g=h.children,zv(l,h)?g=null:m!==null&&zv(l,m)&&(t.flags|=32),JC(e,t),Mi(e,t,g,o),t.child;case 6:return e===null&&Fv(t),null;case 13:return ek(e,t,o);case 4:return Xx(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=zu(t,null,l,o):Mi(e,t,l,o),t.child;case 11:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Ho(l,h),Aw(e,t,l,h,o);case 7:return Mi(e,t,t.pendingProps,o),t.child;case 8:return Mi(e,t,t.pendingProps.children,o),t.child;case 12:return Mi(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(l=t.type._context,h=t.pendingProps,m=t.memoizedProps,g=h.value,Zr(Rm,l._currentValue),l._currentValue=g,m!==null)if(Yo(m.value,g)){if(m.children===h.children&&!qi.current){t=Js(e,t,o);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var u=m.dependencies;if(u!==null){g=m.child;for(var k=u.firstContext;k!==null;){if(k.context===l){if(m.tag===1){k=Zs(-1,o&-o),k.tag=2;var M=m.updateQueue;if(M!==null){M=M.shared;var B=M.pending;B===null?k.next=k:(k.next=B.next,B.next=k),M.pending=k}}m.lanes|=o,k=m.alternate,k!==null&&(k.lanes|=o),Ov(m.return,o,t),u.lanes|=o;break}k=k.next}}else if(m.tag===10)g=m.type===t.type?null:m.child;else if(m.tag===18){if(g=m.return,g===null)throw Error(Je(341));g.lanes|=o,u=g.alternate,u!==null&&(u.lanes|=o),Ov(g,o,t),g=m.sibling}else g=m.child;if(g!==null)g.return=m;else for(g=m;g!==null;){if(g===t){g=null;break}if(m=g.sibling,m!==null){m.return=g.return,g=m;break}g=g.return}m=g}Mi(e,t,h.children,o),t=t.child}return t;case 9:return h=t.type,l=t.pendingProps.children,Cu(t,o),h=Lo(h),l=l(h),t.flags|=1,Mi(e,t,l,o),t.child;case 14:return l=t.type,h=Ho(l,t.pendingProps),h=Ho(l.type,h),zw(e,t,l,h,o);case 15:return KC(e,t,t.type,t.pendingProps,o);case 17:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Ho(l,h),um(e,t),t.tag=1,Zi(l)?(e=!0,Mm(t)):e=!1,Cu(t,o),qC(t,l,h),Nv(t,l,h,o),Uv(null,t,l,!0,e,o);case 19:return tk(e,t,o);case 22:return YC(e,t,o)}throw Error(Je(156,t.tag))};function yk(e,t){return WS(e,t)}function aA(e,t,o,l){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ao(e,t,o,l){return new aA(e,t,o,l)}function u0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lA(e){if(typeof e=="function")return u0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ex)return 11;if(e===Mx)return 14}return 2}function Za(e,t){var o=e.alternate;return o===null?(o=Ao(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function pm(e,t,o,l,h,m){var g=2;if(l=e,typeof e=="function")u0(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case lu:return Gl(o.children,h,m,t);case Px:g=8,h|=8;break;case uv:return e=Ao(12,o,t,h|2),e.elementType=uv,e.lanes=m,e;case dv:return e=Ao(13,o,t,h),e.elementType=dv,e.lanes=m,e;case hv:return e=Ao(19,o,t,h),e.elementType=hv,e.lanes=m,e;case IS:return ug(o,h,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kS:g=10;break e;case TS:g=9;break e;case Ex:g=11;break e;case Mx:g=14;break e;case Da:g=16,l=null;break e}throw Error(Je(130,e==null?e:typeof e,""))}return t=Ao(g,o,t,h),t.elementType=e,t.type=l,t.lanes=m,t}function Gl(e,t,o,l){return e=Ao(7,e,l,t),e.lanes=o,e}function ug(e,t,o,l){return e=Ao(22,e,l,t),e.elementType=IS,e.lanes=o,e.stateNode={isHidden:!1},e}function V_(e,t,o){return e=Ao(6,e,null,t),e.lanes=o,e}function U_(e,t,o){return t=Ao(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cA(e,t,o,l,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=S_(0),this.expirationTimes=S_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S_(0),this.identifierPrefix=l,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function d0(e,t,o,l,h,m,g,u,k){return e=new cA(e,t,o,u,k),t===1?(t=1,m===!0&&(t|=8)):t=0,m=Ao(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:l,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zx(m),e}function uA(e,t,o){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:au,key:l==null?null:""+l,children:e,containerInfo:t,implementation:o}}function _k(e){if(!e)return Ya;e=e._reactInternals;e:{if(rc(e)!==e||e.tag!==1)throw Error(Je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Je(171))}if(e.tag===1){var o=e.type;if(Zi(o))return _C(e,o,t)}return t}function vk(e,t,o,l,h,m,g,u,k){return e=d0(o,l,!0,e,h,m,g,u,k),e.context=_k(null),o=e.current,l=zi(),h=qa(o),m=Zs(l,h),m.callback=t??null,Ha(o,m,h),e.current.lanes=h,mp(e,h,l),Xi(e,l),e}function dg(e,t,o,l){var h=t.current,m=zi(),g=qa(h);return o=_k(o),t.context===null?t.context=o:t.pendingContext=o,t=Zs(m,g),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=Ha(h,t,g),e!==null&&(Xo(e,h,g,m),am(e,h,g)),g}function Um(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ww(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function h0(e,t){Ww(e,t),(e=e.alternate)&&Ww(e,t)}function dA(){return null}var xk=typeof reportError=="function"?reportError:function(e){console.error(e)};function p0(e){this._internalRoot=e}hg.prototype.render=p0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Je(409));dg(e,t,null,null)};hg.prototype.unmount=p0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jl(function(){dg(null,e,null,null)}),t[Ks]=null}};function hg(e){this._internalRoot=e}hg.prototype.unstable_scheduleHydration=function(e){if(e){var t=YS();e={blockedOn:null,target:e,priority:t};for(var o=0;o<Fa.length&&t!==0&&t<Fa[o].priority;o++);Fa.splice(o,0,e),o===0&&QS(e)}};function f0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hw(){}function hA(e,t,o,l,h){if(h){if(typeof l=="function"){var m=l;l=function(){var M=Um(g);m.call(M)}}var g=vk(t,l,e,0,null,!1,!1,"",Hw);return e._reactRootContainer=g,e[Ks]=g.current,Jh(e.nodeType===8?e.parentNode:e),Jl(),g}for(;h=e.lastChild;)e.removeChild(h);if(typeof l=="function"){var u=l;l=function(){var M=Um(k);u.call(M)}}var k=d0(e,0,!1,null,null,!1,!1,"",Hw);return e._reactRootContainer=k,e[Ks]=k.current,Jh(e.nodeType===8?e.parentNode:e),Jl(function(){dg(t,k,o,l)}),k}function fg(e,t,o,l,h){var m=o._reactRootContainer;if(m){var g=m;if(typeof h=="function"){var u=h;h=function(){var k=Um(g);u.call(k)}}dg(t,g,e,h)}else g=hA(o,t,e,h,l);return Um(g)}XS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=Ch(t.pendingLanes);o!==0&&(Rx(t,o|1),Xi(t,xn()),!(Cr&6)&&(Du=xn()+500,rl()))}break;case 13:Jl(function(){var l=Ys(e,1);if(l!==null){var h=zi();Xo(l,e,1,h)}}),h0(e,1)}};Lx=function(e){if(e.tag===13){var t=Ys(e,134217728);if(t!==null){var o=zi();Xo(t,e,134217728,o)}h0(e,134217728)}};KS=function(e){if(e.tag===13){var t=qa(e),o=Ys(e,t);if(o!==null){var l=zi();Xo(o,e,t,l)}h0(e,t)}};YS=function(){return Or};JS=function(e,t){var o=Or;try{return Or=e,t()}finally{Or=o}};wv=function(e,t,o){switch(t){case"input":if(mv(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var l=o[t];if(l!==e&&l.form===e.form){var h=ig(l);if(!h)throw Error(Je(90));ES(l),mv(l,h)}}}break;case"textarea":AS(e,o);break;case"select":t=o.value,t!=null&&xu(e,!!o.multiple,t,!1)}};OS=a0;$S=Jl;var pA={usingClientEntryPoint:!1,Events:[yp,hu,ig,BS,FS,a0]},ph={findFiberByHostInstance:Nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fA={bundleType:ph.bundleType,version:ph.version,rendererPackageName:ph.rendererPackageName,rendererConfig:ph.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ea.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=VS(e),e===null?null:e.stateNode},findFiberByHostInstance:ph.findFiberByHostInstance||dA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{eg=Gf.inject(fA),_s=Gf}catch{}}yo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pA;yo.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f0(t))throw Error(Je(200));return uA(e,t,null,o)};yo.createRoot=function(e,t){if(!f0(e))throw Error(Je(299));var o=!1,l="",h=xk;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=d0(e,1,!1,null,null,o,!1,l,h),e[Ks]=t.current,Jh(e.nodeType===8?e.parentNode:e),new p0(t)};yo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Je(188)):(e=Object.keys(e).join(","),Error(Je(268,e)));return e=VS(t),e=e===null?null:e.stateNode,e};yo.flushSync=function(e){return Jl(e)};yo.hydrate=function(e,t,o){if(!pg(t))throw Error(Je(200));return fg(null,e,t,!0,o)};yo.hydrateRoot=function(e,t,o){if(!f0(e))throw Error(Je(405));var l=o!=null&&o.hydratedSources||null,h=!1,m="",g=xk;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),t=vk(t,null,e,1,o??null,h,!1,m,g),e[Ks]=t.current,Jh(e),l)for(e=0;e<l.length;e++)o=l[e],h=o._getVersion,h=h(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,h]:t.mutableSourceEagerHydrationData.push(o,h);return new hg(t)};yo.render=function(e,t,o){if(!pg(t))throw Error(Je(200));return fg(null,e,t,!1,o)};yo.unmountComponentAtNode=function(e){if(!pg(e))throw Error(Je(40));return e._reactRootContainer?(Jl(function(){fg(null,null,e,!1,function(){e._reactRootContainer=null,e[Ks]=null})}),!0):!1};yo.unstable_batchedUpdates=a0;yo.unstable_renderSubtreeIntoContainer=function(e,t,o,l){if(!pg(o))throw Error(Je(200));if(e==null||e._reactInternals===void 0)throw Error(Je(38));return fg(e,t,o,!1,l)};yo.version="18.3.1-next-f1338f8080-20240426";function bk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bk)}catch(e){console.error(e)}}bk(),bS.exports=yo;var ap=bS.exports;const qf=xx(ap);var Gw=ap;lv.createRoot=Gw.createRoot,lv.hydrateRoot=Gw.hydrateRoot;function Qs(e,...t){const o=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(l=>o.searchParams.append("args[]",l)),`Minified MUI error #${e}; visit ${o} for the full message.`}const Ko="$$material";function Wm(){return Wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},Wm.apply(null,arguments)}function mA(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function gA(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var yA=function(){function e(o){var l=this;this._insertTag=function(h){var m;l.tags.length===0?l.insertionPoint?m=l.insertionPoint.nextSibling:l.prepend?m=l.container.firstChild:m=l.before:m=l.tags[l.tags.length-1].nextSibling,l.container.insertBefore(h,m),l.tags.push(h)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(l){l.forEach(this._insertTag)},t.insert=function(l){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(gA(this));var h=this.tags[this.tags.length-1];if(this.isSpeedy){var m=mA(h);try{m.insertRule(l,m.cssRules.length)}catch{}}else h.appendChild(document.createTextNode(l));this.ctr++},t.flush=function(){this.tags.forEach(function(l){var h;return(h=l.parentNode)==null?void 0:h.removeChild(l)}),this.tags=[],this.ctr=0},e}(),yi="-ms-",Hm="-moz-",Ar="-webkit-",wk="comm",m0="rule",g0="decl",_A="@import",Sk="@keyframes",vA="@layer",xA=Math.abs,mg=String.fromCharCode,bA=Object.assign;function wA(e,t){return ri(e,0)^45?(((t<<2^ri(e,0))<<2^ri(e,1))<<2^ri(e,2))<<2^ri(e,3):0}function Ck(e){return e.trim()}function SA(e,t){return(e=t.exec(e))?e[0]:e}function zr(e,t,o){return e.replace(t,o)}function tx(e,t){return e.indexOf(t)}function ri(e,t){return e.charCodeAt(t)|0}function lp(e,t,o){return e.slice(t,o)}function ps(e){return e.length}function y0(e){return e.length}function Zf(e,t){return t.push(e),e}function CA(e,t){return e.map(t).join("")}var gg=1,Bu=1,kk=0,Ki=0,In=0,Uu="";function yg(e,t,o,l,h,m,g){return{value:e,root:t,parent:o,type:l,props:h,children:m,line:gg,column:Bu,length:g,return:""}}function fh(e,t){return bA(yg("",null,null,"",null,null,0),e,{length:-e.length},t)}function kA(){return In}function TA(){return In=Ki>0?ri(Uu,--Ki):0,Bu--,In===10&&(Bu=1,gg--),In}function mo(){return In=Ki<kk?ri(Uu,Ki++):0,Bu++,In===10&&(Bu=1,gg++),In}function xs(){return ri(Uu,Ki)}function fm(){return Ki}function vp(e,t){return lp(Uu,e,t)}function cp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Tk(e){return gg=Bu=1,kk=ps(Uu=e),Ki=0,[]}function Ik(e){return Uu="",e}function mm(e){return Ck(vp(Ki-1,rx(e===91?e+2:e===40?e+1:e)))}function IA(e){for(;(In=xs())&&In<33;)mo();return cp(e)>2||cp(In)>3?"":" "}function PA(e,t){for(;--t&&mo()&&!(In<48||In>102||In>57&&In<65||In>70&&In<97););return vp(e,fm()+(t<6&&xs()==32&&mo()==32))}function rx(e){for(;mo();)switch(In){case e:return Ki;case 34:case 39:e!==34&&e!==39&&rx(In);break;case 40:e===41&&rx(e);break;case 92:mo();break}return Ki}function EA(e,t){for(;mo()&&e+In!==57;)if(e+In===84&&xs()===47)break;return"/*"+vp(t,Ki-1)+"*"+mg(e===47?e:mo())}function MA(e){for(;!cp(xs());)mo();return vp(e,Ki)}function AA(e){return Ik(gm("",null,null,null,[""],e=Tk(e),0,[0],e))}function gm(e,t,o,l,h,m,g,u,k){for(var M=0,B=0,D=g,A=0,Z=0,G=0,te=1,ne=1,W=1,O=0,U="",K=h,he=m,ce=l,fe=U;ne;)switch(G=O,O=mo()){case 40:if(G!=108&&ri(fe,D-1)==58){tx(fe+=zr(mm(O),"&","&\f"),"&\f")!=-1&&(W=-1);break}case 34:case 39:case 91:fe+=mm(O);break;case 9:case 10:case 13:case 32:fe+=IA(G);break;case 92:fe+=PA(fm()-1,7);continue;case 47:switch(xs()){case 42:case 47:Zf(zA(EA(mo(),fm()),t,o),k);break;default:fe+="/"}break;case 123*te:u[M++]=ps(fe)*W;case 125*te:case 59:case 0:switch(O){case 0:case 125:ne=0;case 59+B:W==-1&&(fe=zr(fe,/\f/g,"")),Z>0&&ps(fe)-D&&Zf(Z>32?Zw(fe+";",l,o,D-1):Zw(zr(fe," ","")+";",l,o,D-2),k);break;case 59:fe+=";";default:if(Zf(ce=qw(fe,t,o,M,B,h,u,U,K=[],he=[],D),m),O===123)if(B===0)gm(fe,t,ce,ce,K,m,D,u,he);else switch(A===99&&ri(fe,3)===110?100:A){case 100:case 108:case 109:case 115:gm(e,ce,ce,l&&Zf(qw(e,ce,ce,0,0,h,u,U,h,K=[],D),he),h,he,D,u,l?K:he);break;default:gm(fe,ce,ce,ce,[""],he,0,u,he)}}M=B=Z=0,te=W=1,U=fe="",D=g;break;case 58:D=1+ps(fe),Z=G;default:if(te<1){if(O==123)--te;else if(O==125&&te++==0&&TA()==125)continue}switch(fe+=mg(O),O*te){case 38:W=B>0?1:(fe+="\f",-1);break;case 44:u[M++]=(ps(fe)-1)*W,W=1;break;case 64:xs()===45&&(fe+=mm(mo())),A=xs(),B=D=ps(U=fe+=MA(fm())),O++;break;case 45:G===45&&ps(fe)==2&&(te=0)}}return m}function qw(e,t,o,l,h,m,g,u,k,M,B){for(var D=h-1,A=h===0?m:[""],Z=y0(A),G=0,te=0,ne=0;G<l;++G)for(var W=0,O=lp(e,D+1,D=xA(te=g[G])),U=e;W<Z;++W)(U=Ck(te>0?A[W]+" "+O:zr(O,/&\f/g,A[W])))&&(k[ne++]=U);return yg(e,t,o,h===0?m0:u,k,M,B)}function zA(e,t,o){return yg(e,t,o,wk,mg(kA()),lp(e,2,-2),0)}function Zw(e,t,o,l){return yg(e,t,o,g0,lp(e,0,l),lp(e,l+1,-1),l)}function Tu(e,t){for(var o="",l=y0(e),h=0;h<l;h++)o+=t(e[h],h,e,t)||"";return o}function RA(e,t,o,l){switch(e.type){case vA:if(e.children.length)break;case _A:case g0:return e.return=e.return||e.value;case wk:return"";case Sk:return e.return=e.value+"{"+Tu(e.children,l)+"}";case m0:e.value=e.props.join(",")}return ps(o=Tu(e.children,l))?e.return=e.value+"{"+o+"}":""}function LA(e){var t=y0(e);return function(o,l,h,m){for(var g="",u=0;u<t;u++)g+=e[u](o,l,h,m)||"";return g}}function DA(e){return function(t){t.root||(t=t.return)&&e(t)}}function Pk(e){var t=Object.create(null);return function(o){return t[o]===void 0&&(t[o]=e(o)),t[o]}}var BA=function(t,o,l){for(var h=0,m=0;h=m,m=xs(),h===38&&m===12&&(o[l]=1),!cp(m);)mo();return vp(t,Ki)},FA=function(t,o){var l=-1,h=44;do switch(cp(h)){case 0:h===38&&xs()===12&&(o[l]=1),t[l]+=BA(Ki-1,o,l);break;case 2:t[l]+=mm(h);break;case 4:if(h===44){t[++l]=xs()===58?"&\f":"",o[l]=t[l].length;break}default:t[l]+=mg(h)}while(h=mo());return t},OA=function(t,o){return Ik(FA(Tk(t),o))},Xw=new WeakMap,$A=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var o=t.value,l=t.parent,h=t.column===l.column&&t.line===l.line;l.type!=="rule";)if(l=l.parent,!l)return;if(!(t.props.length===1&&o.charCodeAt(0)!==58&&!Xw.get(l))&&!h){Xw.set(t,!0);for(var m=[],g=OA(o,m),u=l.props,k=0,M=0;k<g.length;k++)for(var B=0;B<u.length;B++,M++)t.props[M]=m[k]?g[k].replace(/&\f/g,u[B]):u[B]+" "+g[k]}}},NA=function(t){if(t.type==="decl"){var o=t.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(t.return="",t.value="")}};function Ek(e,t){switch(wA(e,t)){case 5103:return Ar+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ar+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ar+e+Hm+e+yi+e+e;case 6828:case 4268:return Ar+e+yi+e+e;case 6165:return Ar+e+yi+"flex-"+e+e;case 5187:return Ar+e+zr(e,/(\w+).+(:[^]+)/,Ar+"box-$1$2"+yi+"flex-$1$2")+e;case 5443:return Ar+e+yi+"flex-item-"+zr(e,/flex-|-self/,"")+e;case 4675:return Ar+e+yi+"flex-line-pack"+zr(e,/align-content|flex-|-self/,"")+e;case 5548:return Ar+e+yi+zr(e,"shrink","negative")+e;case 5292:return Ar+e+yi+zr(e,"basis","preferred-size")+e;case 6060:return Ar+"box-"+zr(e,"-grow","")+Ar+e+yi+zr(e,"grow","positive")+e;case 4554:return Ar+zr(e,/([^-])(transform)/g,"$1"+Ar+"$2")+e;case 6187:return zr(zr(zr(e,/(zoom-|grab)/,Ar+"$1"),/(image-set)/,Ar+"$1"),e,"")+e;case 5495:case 3959:return zr(e,/(image-set\([^]*)/,Ar+"$1$`$1");case 4968:return zr(zr(e,/(.+:)(flex-)?(.*)/,Ar+"box-pack:$3"+yi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ar+e+e;case 4095:case 3583:case 4068:case 2532:return zr(e,/(.+)-inline(.+)/,Ar+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ps(e)-1-t>6)switch(ri(e,t+1)){case 109:if(ri(e,t+4)!==45)break;case 102:return zr(e,/(.+:)(.+)-([^]+)/,"$1"+Ar+"$2-$3$1"+Hm+(ri(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~tx(e,"stretch")?Ek(zr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ri(e,t+1)!==115)break;case 6444:switch(ri(e,ps(e)-3-(~tx(e,"!important")&&10))){case 107:return zr(e,":",":"+Ar)+e;case 101:return zr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ar+(ri(e,14)===45?"inline-":"")+"box$3$1"+Ar+"$2$3$1"+yi+"$2box$3")+e}break;case 5936:switch(ri(e,t+11)){case 114:return Ar+e+yi+zr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ar+e+yi+zr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ar+e+yi+zr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ar+e+yi+e+e}return e}var jA=function(t,o,l,h){if(t.length>-1&&!t.return)switch(t.type){case g0:t.return=Ek(t.value,t.length);break;case Sk:return Tu([fh(t,{value:zr(t.value,"@","@"+Ar)})],h);case m0:if(t.length)return CA(t.props,function(m){switch(SA(m,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Tu([fh(t,{props:[zr(m,/:(read-\w+)/,":"+Hm+"$1")]})],h);case"::placeholder":return Tu([fh(t,{props:[zr(m,/:(plac\w+)/,":"+Ar+"input-$1")]}),fh(t,{props:[zr(m,/:(plac\w+)/,":"+Hm+"$1")]}),fh(t,{props:[zr(m,/:(plac\w+)/,yi+"input-$1")]})],h)}return""})}},VA=[jA],UA=function(t){var o=t.key;if(o==="css"){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,function(te){var ne=te.getAttribute("data-emotion");ne.indexOf(" ")!==-1&&(document.head.appendChild(te),te.setAttribute("data-s",""))})}var h=t.stylisPlugins||VA,m={},g,u=[];g=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(te){for(var ne=te.getAttribute("data-emotion").split(" "),W=1;W<ne.length;W++)m[ne[W]]=!0;u.push(te)});var k,M=[$A,NA];{var B,D=[RA,DA(function(te){B.insert(te)})],A=LA(M.concat(h,D)),Z=function(ne){return Tu(AA(ne),A)};k=function(ne,W,O,U){B=O,Z(ne?ne+"{"+W.styles+"}":W.styles),U&&(G.inserted[W.name]=!0)}}var G={key:o,sheet:new yA({key:o,container:g,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:m,registered:{},insert:k};return G.sheet.hydrate(u),G},Mk={exports:{}},$r={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=typeof Symbol=="function"&&Symbol.for,_0=Xn?Symbol.for("react.element"):60103,v0=Xn?Symbol.for("react.portal"):60106,_g=Xn?Symbol.for("react.fragment"):60107,vg=Xn?Symbol.for("react.strict_mode"):60108,xg=Xn?Symbol.for("react.profiler"):60114,bg=Xn?Symbol.for("react.provider"):60109,wg=Xn?Symbol.for("react.context"):60110,x0=Xn?Symbol.for("react.async_mode"):60111,Sg=Xn?Symbol.for("react.concurrent_mode"):60111,Cg=Xn?Symbol.for("react.forward_ref"):60112,kg=Xn?Symbol.for("react.suspense"):60113,WA=Xn?Symbol.for("react.suspense_list"):60120,Tg=Xn?Symbol.for("react.memo"):60115,Ig=Xn?Symbol.for("react.lazy"):60116,HA=Xn?Symbol.for("react.block"):60121,GA=Xn?Symbol.for("react.fundamental"):60117,qA=Xn?Symbol.for("react.responder"):60118,ZA=Xn?Symbol.for("react.scope"):60119;function vo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case _0:switch(e=e.type,e){case x0:case Sg:case _g:case xg:case vg:case kg:return e;default:switch(e=e&&e.$$typeof,e){case wg:case Cg:case Ig:case Tg:case bg:return e;default:return t}}case v0:return t}}}function Ak(e){return vo(e)===Sg}$r.AsyncMode=x0;$r.ConcurrentMode=Sg;$r.ContextConsumer=wg;$r.ContextProvider=bg;$r.Element=_0;$r.ForwardRef=Cg;$r.Fragment=_g;$r.Lazy=Ig;$r.Memo=Tg;$r.Portal=v0;$r.Profiler=xg;$r.StrictMode=vg;$r.Suspense=kg;$r.isAsyncMode=function(e){return Ak(e)||vo(e)===x0};$r.isConcurrentMode=Ak;$r.isContextConsumer=function(e){return vo(e)===wg};$r.isContextProvider=function(e){return vo(e)===bg};$r.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===_0};$r.isForwardRef=function(e){return vo(e)===Cg};$r.isFragment=function(e){return vo(e)===_g};$r.isLazy=function(e){return vo(e)===Ig};$r.isMemo=function(e){return vo(e)===Tg};$r.isPortal=function(e){return vo(e)===v0};$r.isProfiler=function(e){return vo(e)===xg};$r.isStrictMode=function(e){return vo(e)===vg};$r.isSuspense=function(e){return vo(e)===kg};$r.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===_g||e===Sg||e===xg||e===vg||e===kg||e===WA||typeof e=="object"&&e!==null&&(e.$$typeof===Ig||e.$$typeof===Tg||e.$$typeof===bg||e.$$typeof===wg||e.$$typeof===Cg||e.$$typeof===GA||e.$$typeof===qA||e.$$typeof===ZA||e.$$typeof===HA)};$r.typeOf=vo;Mk.exports=$r;var XA=Mk.exports,zk=XA,KA={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},YA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Rk={};Rk[zk.ForwardRef]=KA;Rk[zk.Memo]=YA;var JA=!0;function Lk(e,t,o){var l="";return o.split(" ").forEach(function(h){e[h]!==void 0?t.push(e[h]+";"):h&&(l+=h+" ")}),l}var b0=function(t,o,l){var h=t.key+"-"+o.name;(l===!1||JA===!1)&&t.registered[h]===void 0&&(t.registered[h]=o.styles)},w0=function(t,o,l){b0(t,o,l);var h=t.key+"-"+o.name;if(t.inserted[o.name]===void 0){var m=o;do t.insert(o===m?"."+h:"",m,t.sheet,!0),m=m.next;while(m!==void 0)}};function QA(e){for(var t=0,o,l=0,h=e.length;h>=4;++l,h-=4)o=e.charCodeAt(l)&255|(e.charCodeAt(++l)&255)<<8|(e.charCodeAt(++l)&255)<<16|(e.charCodeAt(++l)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(h){case 3:t^=(e.charCodeAt(l+2)&255)<<16;case 2:t^=(e.charCodeAt(l+1)&255)<<8;case 1:t^=e.charCodeAt(l)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ez={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tz=/[A-Z]|^ms/g,rz=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Dk=function(t){return t.charCodeAt(1)===45},Kw=function(t){return t!=null&&typeof t!="boolean"},W_=Pk(function(e){return Dk(e)?e:e.replace(tz,"-$&").toLowerCase()}),Yw=function(t,o){switch(t){case"animation":case"animationName":if(typeof o=="string")return o.replace(rz,function(l,h,m){return fs={name:h,styles:m,next:fs},h})}return ez[t]!==1&&!Dk(t)&&typeof o=="number"&&o!==0?o+"px":o};function up(e,t,o){if(o==null)return"";var l=o;if(l.__emotion_styles!==void 0)return l;switch(typeof o){case"boolean":return"";case"object":{var h=o;if(h.anim===1)return fs={name:h.name,styles:h.styles,next:fs},h.name;var m=o;if(m.styles!==void 0){var g=m.next;if(g!==void 0)for(;g!==void 0;)fs={name:g.name,styles:g.styles,next:fs},g=g.next;var u=m.styles+";";return u}return nz(e,t,o)}case"function":{if(e!==void 0){var k=fs,M=o(e);return fs=k,up(e,t,M)}break}}var B=o;if(t==null)return B;var D=t[B];return D!==void 0?D:B}function nz(e,t,o){var l="";if(Array.isArray(o))for(var h=0;h<o.length;h++)l+=up(e,t,o[h])+";";else for(var m in o){var g=o[m];if(typeof g!="object"){var u=g;t!=null&&t[u]!==void 0?l+=m+"{"+t[u]+"}":Kw(u)&&(l+=W_(m)+":"+Yw(m,u)+";")}else if(Array.isArray(g)&&typeof g[0]=="string"&&(t==null||t[g[0]]===void 0))for(var k=0;k<g.length;k++)Kw(g[k])&&(l+=W_(m)+":"+Yw(m,g[k])+";");else{var M=up(e,t,g);switch(m){case"animation":case"animationName":{l+=W_(m)+":"+M+";";break}default:l+=m+"{"+M+"}"}}}return l}var Jw=/label:\s*([^\s;{]+)\s*(;|$)/g,fs;function xp(e,t,o){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var l=!0,h="";fs=void 0;var m=e[0];if(m==null||m.raw===void 0)l=!1,h+=up(o,t,m);else{var g=m;h+=g[0]}for(var u=1;u<e.length;u++)if(h+=up(o,t,e[u]),l){var k=m;h+=k[u]}Jw.lastIndex=0;for(var M="",B;(B=Jw.exec(h))!==null;)M+="-"+B[1];var D=QA(h)+M;return{name:D,styles:h,next:fs}}var iz=function(t){return t()},Bk=vm.useInsertionEffect?vm.useInsertionEffect:!1,Fk=Bk||iz,Qw=Bk||J.useLayoutEffect,Ok=J.createContext(typeof HTMLElement<"u"?UA({key:"css"}):null);Ok.Provider;var S0=function(t){return J.forwardRef(function(o,l){var h=J.useContext(Ok);return t(o,h,l)})},bp=J.createContext({}),C0={}.hasOwnProperty,nx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",oz=function(t,o){var l={};for(var h in o)C0.call(o,h)&&(l[h]=o[h]);return l[nx]=t,l},sz=function(t){var o=t.cache,l=t.serialized,h=t.isStringTag;return b0(o,l,h),Fk(function(){return w0(o,l,h)}),null},az=S0(function(e,t,o){var l=e.css;typeof l=="string"&&t.registered[l]!==void 0&&(l=t.registered[l]);var h=e[nx],m=[l],g="";typeof e.className=="string"?g=Lk(t.registered,m,e.className):e.className!=null&&(g=e.className+" ");var u=xp(m,void 0,J.useContext(bp));g+=t.key+"-"+u.name;var k={};for(var M in e)C0.call(e,M)&&M!=="css"&&M!==nx&&(k[M]=e[M]);return k.className=g,o&&(k.ref=o),J.createElement(J.Fragment,null,J.createElement(sz,{cache:t,serialized:u,isStringTag:typeof h=="string"}),J.createElement(h,k))}),lz=az,e2=function(t,o){var l=arguments;if(o==null||!C0.call(o,"css"))return J.createElement.apply(void 0,l);var h=l.length,m=new Array(h);m[0]=lz,m[1]=oz(t,o);for(var g=2;g<h;g++)m[g]=l[g];return J.createElement.apply(null,m)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(e2||(e2={}));var cz=S0(function(e,t){var o=e.styles,l=xp([o],void 0,J.useContext(bp)),h=J.useRef();return Qw(function(){var m=t.key+"-global",g=new t.sheet.constructor({key:m,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,k=document.querySelector('style[data-emotion="'+m+" "+l.name+'"]');return t.sheet.tags.length&&(g.before=t.sheet.tags[0]),k!==null&&(u=!0,k.setAttribute("data-emotion",m),g.hydrate([k])),h.current=[g,u],function(){g.flush()}},[t]),Qw(function(){var m=h.current,g=m[0],u=m[1];if(u){m[1]=!1;return}if(l.next!==void 0&&w0(t,l.next,!0),g.tags.length){var k=g.tags[g.tags.length-1].nextElementSibling;g.before=k,g.flush()}t.insert("",l,g,!1)},[t,l.name]),null});function k0(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return xp(t)}function wp(){var e=k0.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var uz=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,dz=Pk(function(e){return uz.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),hz=dz,pz=function(t){return t!=="theme"},t2=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?hz:pz},r2=function(t,o,l){var h;if(o){var m=o.shouldForwardProp;h=t.__emotion_forwardProp&&m?function(g){return t.__emotion_forwardProp(g)&&m(g)}:m}return typeof h!="function"&&l&&(h=t.__emotion_forwardProp),h},fz=function(t){var o=t.cache,l=t.serialized,h=t.isStringTag;return b0(o,l,h),Fk(function(){return w0(o,l,h)}),null},mz=function e(t,o){var l=t.__emotion_real===t,h=l&&t.__emotion_base||t,m,g;o!==void 0&&(m=o.label,g=o.target);var u=r2(t,o,l),k=u||t2(h),M=!k("as");return function(){var B=arguments,D=l&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(m!==void 0&&D.push("label:"+m+";"),B[0]==null||B[0].raw===void 0)D.push.apply(D,B);else{var A=B[0];D.push(A[0]);for(var Z=B.length,G=1;G<Z;G++)D.push(B[G],A[G])}var te=S0(function(ne,W,O){var U=M&&ne.as||h,K="",he=[],ce=ne;if(ne.theme==null){ce={};for(var fe in ne)ce[fe]=ne[fe];ce.theme=J.useContext(bp)}typeof ne.className=="string"?K=Lk(W.registered,he,ne.className):ne.className!=null&&(K=ne.className+" ");var ge=xp(D.concat(he),W.registered,ce);K+=W.key+"-"+ge.name,g!==void 0&&(K+=" "+g);var Te=M&&u===void 0?t2(U):k,Ae={};for(var Re in ne)M&&Re==="as"||Te(Re)&&(Ae[Re]=ne[Re]);return Ae.className=K,O&&(Ae.ref=O),J.createElement(J.Fragment,null,J.createElement(fz,{cache:W,serialized:ge,isStringTag:typeof U=="string"}),J.createElement(U,Ae))});return te.displayName=m!==void 0?m:"Styled("+(typeof h=="string"?h:h.displayName||h.name||"Component")+")",te.defaultProps=t.defaultProps,te.__emotion_real=te,te.__emotion_base=h,te.__emotion_styles=D,te.__emotion_forwardProp=u,Object.defineProperty(te,"toString",{value:function(){return"."+g}}),te.withComponent=function(ne,W){var O=e(ne,Wm({},o,W,{shouldForwardProp:r2(te,W,!0)}));return O.apply(void 0,D)},te}},gz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],ix=mz.bind(null);gz.forEach(function(e){ix[e]=ix(e)});function yz(e){return e==null||Object.keys(e).length===0}function $k(e){const{styles:t,defaultTheme:o={}}=e,l=typeof t=="function"?h=>t(yz(h)?o:h):t;return V.jsx(cz,{styles:l})}function Nk(e,t){return ix(e,t)}function _z(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const n2=[];function Xa(e){return n2[0]=e,xp(n2)}var jk={exports:{}},qr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0=Symbol.for("react.transitional.element"),I0=Symbol.for("react.portal"),Pg=Symbol.for("react.fragment"),Eg=Symbol.for("react.strict_mode"),Mg=Symbol.for("react.profiler"),Ag=Symbol.for("react.consumer"),zg=Symbol.for("react.context"),Rg=Symbol.for("react.forward_ref"),Lg=Symbol.for("react.suspense"),Dg=Symbol.for("react.suspense_list"),Bg=Symbol.for("react.memo"),Fg=Symbol.for("react.lazy"),vz=Symbol.for("react.view_transition"),xz=Symbol.for("react.client.reference");function Bo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case T0:switch(e=e.type,e){case Pg:case Mg:case Eg:case Lg:case Dg:case vz:return e;default:switch(e=e&&e.$$typeof,e){case zg:case Rg:case Fg:case Bg:return e;case Ag:return e;default:return t}}case I0:return t}}}qr.ContextConsumer=Ag;qr.ContextProvider=zg;qr.Element=T0;qr.ForwardRef=Rg;qr.Fragment=Pg;qr.Lazy=Fg;qr.Memo=Bg;qr.Portal=I0;qr.Profiler=Mg;qr.StrictMode=Eg;qr.Suspense=Lg;qr.SuspenseList=Dg;qr.isContextConsumer=function(e){return Bo(e)===Ag};qr.isContextProvider=function(e){return Bo(e)===zg};qr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===T0};qr.isForwardRef=function(e){return Bo(e)===Rg};qr.isFragment=function(e){return Bo(e)===Pg};qr.isLazy=function(e){return Bo(e)===Fg};qr.isMemo=function(e){return Bo(e)===Bg};qr.isPortal=function(e){return Bo(e)===I0};qr.isProfiler=function(e){return Bo(e)===Mg};qr.isStrictMode=function(e){return Bo(e)===Eg};qr.isSuspense=function(e){return Bo(e)===Lg};qr.isSuspenseList=function(e){return Bo(e)===Dg};qr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Pg||e===Mg||e===Eg||e===Lg||e===Dg||typeof e=="object"&&e!==null&&(e.$$typeof===Fg||e.$$typeof===Bg||e.$$typeof===zg||e.$$typeof===Ag||e.$$typeof===Rg||e.$$typeof===xz||e.getModuleId!==void 0)};qr.typeOf=Bo;jk.exports=qr;var Vk=jk.exports;function ys(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Uk(e){if(J.isValidElement(e)||Vk.isValidElementType(e)||!ys(e))return e;const t={};return Object.keys(e).forEach(o=>{t[o]=Uk(e[o])}),t}function Zn(e,t,o={clone:!0}){const l=o.clone?{...e}:e;return ys(e)&&ys(t)&&Object.keys(t).forEach(h=>{J.isValidElement(t[h])||Vk.isValidElementType(t[h])?l[h]=t[h]:ys(t[h])&&Object.prototype.hasOwnProperty.call(e,h)&&ys(e[h])?l[h]=Zn(e[h],t[h],o):o.clone?l[h]=ys(t[h])?Uk(t[h]):t[h]:l[h]=t[h]}),l}const bz=e=>{const t=Object.keys(e).map(o=>({key:o,val:e[o]}))||[];return t.sort((o,l)=>o.val-l.val),t.reduce((o,l)=>({...o,[l.key]:l.val}),{})};function wz(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:o="px",step:l=5,...h}=e,m=bz(t),g=Object.keys(m);function u(A){return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${o})`}function k(A){return`@media (max-width:${(typeof t[A]=="number"?t[A]:A)-l/100}${o})`}function M(A,Z){const G=g.indexOf(Z);return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${o}) and (max-width:${(G!==-1&&typeof t[g[G]]=="number"?t[g[G]]:Z)-l/100}${o})`}function B(A){return g.indexOf(A)+1<g.length?M(A,g[g.indexOf(A)+1]):u(A)}function D(A){const Z=g.indexOf(A);return Z===0?u(g[1]):Z===g.length-1?k(g[Z]):M(A,g[g.indexOf(A)+1]).replace("@media","@media not all and")}return{keys:g,values:m,up:u,down:k,between:M,only:B,not:D,unit:o,...h}}function i2(e,t){if(!e.containerQueries)return t;const o=Object.keys(t).filter(l=>l.startsWith("@container")).sort((l,h)=>{var g,u;const m=/min-width:\s*([0-9.]+)/;return+(((g=l.match(m))==null?void 0:g[1])||0)-+(((u=h.match(m))==null?void 0:u[1])||0)});return o.length?o.reduce((l,h)=>{const m=t[h];return delete l[h],l[h]=m,l},{...t}):t}function Sz(e,t){return t==="@"||t.startsWith("@")&&(e.some(o=>t.startsWith(`@${o}`))||!!t.match(/^@\d/))}function Cz(e,t){const o=t.match(/^@([^/]+)?\/?(.+)?$/);if(!o)return null;const[,l,h]=o,m=Number.isNaN(+l)?l||0:+l;return e.containerQueries(h).up(m)}function kz(e){const t=(m,g)=>m.replace("@media",g?`@container ${g}`:"@container");function o(m,g){m.up=(...u)=>t(e.breakpoints.up(...u),g),m.down=(...u)=>t(e.breakpoints.down(...u),g),m.between=(...u)=>t(e.breakpoints.between(...u),g),m.only=(...u)=>t(e.breakpoints.only(...u),g),m.not=(...u)=>{const k=t(e.breakpoints.not(...u),g);return k.includes("not all and")?k.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):k}}const l={},h=m=>(o(l,m),l);return o(h),{...e,containerQueries:h}}const Tz={borderRadius:4};function Nh(e,t){return t?Zn(e,t,{clone:!1}):e}const Og={xs:0,sm:600,md:900,lg:1200,xl:1536},o2={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Og[e]}px)`},Iz={containerQueries:e=>({up:t=>{let o=typeof t=="number"?t:Og[t]||t;return typeof o=="number"&&(o=`${o}px`),e?`@container ${e} (min-width:${o})`:`@container (min-width:${o})`}})};function Jo(e,t,o){const l=e.theme||{};if(Array.isArray(t)){const m=l.breakpoints||o2;return t.reduce((g,u,k)=>(g[m.up(m.keys[k])]=o(t[k]),g),{})}if(typeof t=="object"){const m=l.breakpoints||o2;return Object.keys(t).reduce((g,u)=>{if(Sz(m.keys,u)){const k=Cz(l.containerQueries?l:Iz,u);k&&(g[k]=o(t[u],u))}else if(Object.keys(m.values||Og).includes(u)){const k=m.up(u);g[k]=o(t[u],u)}else{const k=u;g[k]=t[k]}return g},{})}return o(t)}function Wk(e={}){var o;return((o=e.keys)==null?void 0:o.reduce((l,h)=>{const m=e.up(h);return l[m]={},l},{}))||{}}function ox(e,t){return e.reduce((o,l)=>{const h=o[l];return(!h||Object.keys(h).length===0)&&delete o[l],o},t)}function Pz(e,...t){const o=Wk(e),l=[o,...t].reduce((h,m)=>Zn(h,m),{});return ox(Object.keys(o),l)}function Ez(e,t){if(typeof e!="object")return{};const o={},l=Object.keys(t);return Array.isArray(e)?l.forEach((h,m)=>{m<e.length&&(o[h]=!0)}):l.forEach(h=>{e[h]!=null&&(o[h]=!0)}),o}function H_({values:e,breakpoints:t,base:o}){const l=o||Ez(e,t),h=Object.keys(l);if(h.length===0)return e;let m;return h.reduce((g,u,k)=>(Array.isArray(e)?(g[u]=e[k]!=null?e[k]:e[m],m=k):typeof e=="object"?(g[u]=e[u]!=null?e[u]:e[m],m=u):g[u]=e,g),{})}function st(e){if(typeof e!="string")throw new Error(Qs(7));return e.charAt(0).toUpperCase()+e.slice(1)}function ms(e,t,o=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&o){const l=`vars.${t}`.split(".").reduce((h,m)=>h&&h[m]?h[m]:null,e);if(l!=null)return l}return t.split(".").reduce((l,h)=>l&&l[h]!=null?l[h]:null,e)}function Gm(e,t,o,l=o){let h;return typeof e=="function"?h=e(o):Array.isArray(e)?h=e[o]||l:h=ms(e,o)||l,t&&(h=t(h,l,e)),h}function bn(e){const{prop:t,cssProperty:o=e.prop,themeKey:l,transform:h}=e,m=g=>{if(g[t]==null)return null;const u=g[t],k=g.theme,M=ms(k,l)||{};return Jo(g,u,D=>{let A=Gm(M,h,D);return D===A&&typeof D=="string"&&(A=Gm(M,h,`${t}${D==="default"?"":st(D)}`,D)),o===!1?A:{[o]:A}})};return m.propTypes={},m.filterProps=[t],m}function Mz(e){const t={};return o=>(t[o]===void 0&&(t[o]=e(o)),t[o])}const Az={m:"margin",p:"padding"},zz={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},s2={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Rz=Mz(e=>{if(e.length>2)if(s2[e])e=s2[e];else return[e];const[t,o]=e.split(""),l=Az[t],h=zz[o]||"";return Array.isArray(h)?h.map(m=>l+m):[l+h]}),P0=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],E0=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...P0,...E0];function Sp(e,t,o,l){const h=ms(e,t,!0)??o;return typeof h=="number"||typeof h=="string"?m=>typeof m=="string"?m:typeof h=="string"?h.startsWith("var(")&&m===0?0:h.startsWith("var(")&&m===1?h:`calc(${m} * ${h})`:h*m:Array.isArray(h)?m=>{if(typeof m=="string")return m;const g=Math.abs(m),u=h[g];return m>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof h=="function"?h:()=>{}}function $g(e){return Sp(e,"spacing",8)}function Ql(e,t){return typeof t=="string"||t==null?t:e(t)}function Lz(e,t){return o=>e.reduce((l,h)=>(l[h]=Ql(t,o),l),{})}function Dz(e,t,o,l){if(!t.includes(o))return null;const h=Rz(o),m=Lz(h,l),g=e[o];return Jo(e,g,m)}function Hk(e,t){const o=$g(e.theme);return Object.keys(e).map(l=>Dz(e,t,l,o)).reduce(Nh,{})}function mn(e){return Hk(e,P0)}mn.propTypes={};mn.filterProps=P0;function gn(e){return Hk(e,E0)}gn.propTypes={};gn.filterProps=E0;function Gk(e=8,t=$g({spacing:e})){if(e.mui)return e;const o=(...l)=>(l.length===0?[1]:l).map(m=>{const g=t(m);return typeof g=="number"?`${g}px`:g}).join(" ");return o.mui=!0,o}function Ng(...e){const t=e.reduce((l,h)=>(h.filterProps.forEach(m=>{l[m]=h}),l),{}),o=l=>Object.keys(l).reduce((h,m)=>t[m]?Nh(h,t[m](l)):h,{});return o.propTypes={},o.filterProps=e.reduce((l,h)=>l.concat(h.filterProps),[]),o}function Eo(e){return typeof e!="number"?e:`${e}px solid`}function Fo(e,t){return bn({prop:e,themeKey:"borders",transform:t})}const Bz=Fo("border",Eo),Fz=Fo("borderTop",Eo),Oz=Fo("borderRight",Eo),$z=Fo("borderBottom",Eo),Nz=Fo("borderLeft",Eo),jz=Fo("borderColor"),Vz=Fo("borderTopColor"),Uz=Fo("borderRightColor"),Wz=Fo("borderBottomColor"),Hz=Fo("borderLeftColor"),Gz=Fo("outline",Eo),qz=Fo("outlineColor"),jg=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Sp(e.theme,"shape.borderRadius",4),o=l=>({borderRadius:Ql(t,l)});return Jo(e,e.borderRadius,o)}return null};jg.propTypes={};jg.filterProps=["borderRadius"];Ng(Bz,Fz,Oz,$z,Nz,jz,Vz,Uz,Wz,Hz,jg,Gz,qz);const Vg=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Sp(e.theme,"spacing",8),o=l=>({gap:Ql(t,l)});return Jo(e,e.gap,o)}return null};Vg.propTypes={};Vg.filterProps=["gap"];const Ug=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Sp(e.theme,"spacing",8),o=l=>({columnGap:Ql(t,l)});return Jo(e,e.columnGap,o)}return null};Ug.propTypes={};Ug.filterProps=["columnGap"];const Wg=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Sp(e.theme,"spacing",8),o=l=>({rowGap:Ql(t,l)});return Jo(e,e.rowGap,o)}return null};Wg.propTypes={};Wg.filterProps=["rowGap"];const Zz=bn({prop:"gridColumn"}),Xz=bn({prop:"gridRow"}),Kz=bn({prop:"gridAutoFlow"}),Yz=bn({prop:"gridAutoColumns"}),Jz=bn({prop:"gridAutoRows"}),Qz=bn({prop:"gridTemplateColumns"}),eR=bn({prop:"gridTemplateRows"}),tR=bn({prop:"gridTemplateAreas"}),rR=bn({prop:"gridArea"});Ng(Vg,Ug,Wg,Zz,Xz,Kz,Yz,Jz,Qz,eR,tR,rR);function Iu(e,t){return t==="grey"?t:e}const nR=bn({prop:"color",themeKey:"palette",transform:Iu}),iR=bn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Iu}),oR=bn({prop:"backgroundColor",themeKey:"palette",transform:Iu});Ng(nR,iR,oR);function ho(e){return e<=1&&e!==0?`${e*100}%`:e}const sR=bn({prop:"width",transform:ho}),M0=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=o=>{var h,m,g,u,k;const l=((g=(m=(h=e.theme)==null?void 0:h.breakpoints)==null?void 0:m.values)==null?void 0:g[o])||Og[o];return l?((k=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:k.unit)!=="px"?{maxWidth:`${l}${e.theme.breakpoints.unit}`}:{maxWidth:l}:{maxWidth:ho(o)}};return Jo(e,e.maxWidth,t)}return null};M0.filterProps=["maxWidth"];const aR=bn({prop:"minWidth",transform:ho}),lR=bn({prop:"height",transform:ho}),cR=bn({prop:"maxHeight",transform:ho}),uR=bn({prop:"minHeight",transform:ho});bn({prop:"size",cssProperty:"width",transform:ho});bn({prop:"size",cssProperty:"height",transform:ho});const dR=bn({prop:"boxSizing"});Ng(sR,M0,aR,lR,cR,uR,dR);const Cp={border:{themeKey:"borders",transform:Eo},borderTop:{themeKey:"borders",transform:Eo},borderRight:{themeKey:"borders",transform:Eo},borderBottom:{themeKey:"borders",transform:Eo},borderLeft:{themeKey:"borders",transform:Eo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Eo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:jg},color:{themeKey:"palette",transform:Iu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Iu},backgroundColor:{themeKey:"palette",transform:Iu},p:{style:gn},pt:{style:gn},pr:{style:gn},pb:{style:gn},pl:{style:gn},px:{style:gn},py:{style:gn},padding:{style:gn},paddingTop:{style:gn},paddingRight:{style:gn},paddingBottom:{style:gn},paddingLeft:{style:gn},paddingX:{style:gn},paddingY:{style:gn},paddingInline:{style:gn},paddingInlineStart:{style:gn},paddingInlineEnd:{style:gn},paddingBlock:{style:gn},paddingBlockStart:{style:gn},paddingBlockEnd:{style:gn},m:{style:mn},mt:{style:mn},mr:{style:mn},mb:{style:mn},ml:{style:mn},mx:{style:mn},my:{style:mn},margin:{style:mn},marginTop:{style:mn},marginRight:{style:mn},marginBottom:{style:mn},marginLeft:{style:mn},marginX:{style:mn},marginY:{style:mn},marginInline:{style:mn},marginInlineStart:{style:mn},marginInlineEnd:{style:mn},marginBlock:{style:mn},marginBlockStart:{style:mn},marginBlockEnd:{style:mn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Vg},rowGap:{style:Wg},columnGap:{style:Ug},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ho},maxWidth:{style:M0},minWidth:{transform:ho},height:{transform:ho},maxHeight:{transform:ho},minHeight:{transform:ho},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function hR(...e){const t=e.reduce((l,h)=>l.concat(Object.keys(h)),[]),o=new Set(t);return e.every(l=>o.size===Object.keys(l).length)}function pR(e,t){return typeof e=="function"?e(t):e}function fR(){function e(o,l,h,m){const g={[o]:l,theme:h},u=m[o];if(!u)return{[o]:l};const{cssProperty:k=o,themeKey:M,transform:B,style:D}=u;if(l==null)return null;if(M==="typography"&&l==="inherit")return{[o]:l};const A=ms(h,M)||{};return D?D(g):Jo(g,l,G=>{let te=Gm(A,B,G);return G===te&&typeof G=="string"&&(te=Gm(A,B,`${o}${G==="default"?"":st(G)}`,G)),k===!1?te:{[k]:te}})}function t(o){const{sx:l,theme:h={},nested:m}=o||{};if(!l)return null;const g=h.unstable_sxConfig??Cp;function u(k){let M=k;if(typeof k=="function")M=k(h);else if(typeof k!="object")return k;if(!M)return null;const B=Wk(h.breakpoints),D=Object.keys(B);let A=B;return Object.keys(M).forEach(Z=>{const G=pR(M[Z],h);if(G!=null)if(typeof G=="object")if(g[Z])A=Nh(A,e(Z,G,h,g));else{const te=Jo({theme:h},G,ne=>({[Z]:ne}));hR(te,G)?A[Z]=t({sx:G,theme:h,nested:!0}):A=Nh(A,te)}else A=Nh(A,e(Z,G,h,g))}),!m&&h.modularCssLayers?{"@layer sx":i2(h,ox(D,A))}:i2(h,ox(D,A))}return Array.isArray(l)?l.map(u):u(l)}return t}const Ja=fR();Ja.filterProps=["sx"];function mR(e,t){var l;const o=this;if(o.vars){if(!((l=o.colorSchemes)!=null&&l[e])||typeof o.getColorSchemeSelector!="function")return{};let h=o.getColorSchemeSelector(e);return h==="&"?t:((h.includes("data-")||h.includes("."))&&(h=`*:where(${h.replace(/\s*&$/,"")}) &`),{[h]:t})}return o.palette.mode===e?t:{}}function Wu(e={},...t){const{breakpoints:o={},palette:l={},spacing:h,shape:m={},...g}=e,u=wz(o),k=Gk(h);let M=Zn({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...l},spacing:k,shape:{...Tz,...m}},g);return M=kz(M),M.applyStyles=mR,M=t.reduce((B,D)=>Zn(B,D),M),M.unstable_sxConfig={...Cp,...g==null?void 0:g.unstable_sxConfig},M.unstable_sx=function(D){return Ja({sx:D,theme:this})},M}function gR(e){return Object.keys(e).length===0}function Hg(e=null){const t=J.useContext(bp);return!t||gR(t)?e:t}const yR=Wu();function kp(e=yR){return Hg(e)}function G_(e){const t=Xa(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function qk({styles:e,themeId:t,defaultTheme:o={}}){const l=kp(o),h=t&&l[t]||l;let m=typeof e=="function"?e(h):e;return h.modularCssLayers&&(Array.isArray(m)?m=m.map(g=>G_(typeof g=="function"?g(h):g)):m=G_(m)),V.jsx($k,{styles:m})}const _R=e=>{var l;const t={systemProps:{},otherProps:{}},o=((l=e==null?void 0:e.theme)==null?void 0:l.unstable_sxConfig)??Cp;return Object.keys(e).forEach(h=>{o[h]?t.systemProps[h]=e[h]:t.otherProps[h]=e[h]}),t};function Gg(e){const{sx:t,...o}=e,{systemProps:l,otherProps:h}=_R(o);let m;return Array.isArray(t)?m=[l,...t]:typeof t=="function"?m=(...g)=>{const u=t(...g);return ys(u)?{...l,...u}:l}:m={...l,...t},{...h,sx:m}}const a2=e=>e,vR=()=>{let e=a2;return{configure(t){e=t},generate(t){return e(t)},reset(){e=a2}}},Zk=vR();function Xk(e){var t,o,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(o=Xk(e[t]))&&(l&&(l+=" "),l+=o)}else for(o in e)e[o]&&(l&&(l+=" "),l+=o);return l}function _t(){for(var e,t,o=0,l="",h=arguments.length;o<h;o++)(e=arguments[o])&&(t=Xk(e))&&(l&&(l+=" "),l+=t);return l}function xR(e={}){const{themeId:t,defaultTheme:o,defaultClassName:l="MuiBox-root",generateClassName:h}=e,m=Nk("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(Ja);return J.forwardRef(function(k,M){const B=kp(o),{className:D,component:A="div",...Z}=Gg(k);return V.jsx(m,{as:A,ref:M,className:_t(D,h?h(l):l),theme:t&&B[t]||B,...Z})})}const bR={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Gt(e,t,o="Mui"){const l=bR[t];return l?`${o}-${l}`:`${Zk.generate(e)}-${t}`}function Yt(e,t,o="Mui"){const l={};return t.forEach(h=>{l[h]=Gt(e,h,o)}),l}function Kk(e){const{variants:t,...o}=e,l={variants:t,style:Xa(o),isProcessed:!0};return l.style===o||t&&t.forEach(h=>{typeof h.style!="function"&&(h.style=Xa(h.style))}),l}const wR=Wu();function q_(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Ul(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function SR(e){return e?(t,o)=>o[e]:null}function CR(e,t,o){e.theme=TR(e.theme)?o:e.theme[t]||e.theme}function ym(e,t,o){const l=typeof t=="function"?t(e):t;if(Array.isArray(l))return l.flatMap(h=>ym(e,h,o));if(Array.isArray(l==null?void 0:l.variants)){let h;if(l.isProcessed)h=o?Ul(l.style,o):l.style;else{const{variants:m,...g}=l;h=o?Ul(Xa(g),o):g}return Yk(e,l.variants,[h],o)}return l!=null&&l.isProcessed?o?Ul(Xa(l.style),o):l.style:o?Ul(Xa(l),o):l}function Yk(e,t,o=[],l=void 0){var m;let h;e:for(let g=0;g<t.length;g+=1){const u=t[g];if(typeof u.props=="function"){if(h??(h={...e,...e.ownerState,ownerState:e.ownerState}),!u.props(h))continue}else for(const k in u.props)if(e[k]!==u.props[k]&&((m=e.ownerState)==null?void 0:m[k])!==u.props[k])continue e;typeof u.style=="function"?(h??(h={...e,...e.ownerState,ownerState:e.ownerState}),o.push(l?Ul(Xa(u.style(h)),l):u.style(h))):o.push(l?Ul(Xa(u.style),l):u.style)}return o}function Jk(e={}){const{themeId:t,defaultTheme:o=wR,rootShouldForwardProp:l=q_,slotShouldForwardProp:h=q_}=e;function m(u){CR(u,t,o)}return(u,k={})=>{_z(u,ce=>ce.filter(fe=>fe!==Ja));const{name:M,slot:B,skipVariantsResolver:D,skipSx:A,overridesResolver:Z=SR(PR(B)),...G}=k,te=M&&M.startsWith("Mui")||B?"components":"custom",ne=D!==void 0?D:B&&B!=="Root"&&B!=="root"||!1,W=A||!1;let O=q_;B==="Root"||B==="root"?O=l:B?O=h:IR(u)&&(O=void 0);const U=Nk(u,{shouldForwardProp:O,label:kR(),...G}),K=ce=>{if(ce.__emotion_real===ce)return ce;if(typeof ce=="function")return function(ge){return ym(ge,ce,ge.theme.modularCssLayers?te:void 0)};if(ys(ce)){const fe=Kk(ce);return function(Te){return fe.variants?ym(Te,fe,Te.theme.modularCssLayers?te:void 0):Te.theme.modularCssLayers?Ul(fe.style,te):fe.style}}return ce},he=(...ce)=>{const fe=[],ge=ce.map(K),Te=[];if(fe.push(m),M&&Z&&Te.push(function(xe){var Ze,ze;const Le=(ze=(Ze=xe.theme.components)==null?void 0:Ze[M])==null?void 0:ze.styleOverrides;if(!Le)return null;const Be={};for(const Fe in Le)Be[Fe]=ym(xe,Le[Fe],xe.theme.modularCssLayers?"theme":void 0);return Z(xe,Be)}),M&&!ne&&Te.push(function(xe){var Be,Ze;const Ee=xe.theme,Le=(Ze=(Be=Ee==null?void 0:Ee.components)==null?void 0:Be[M])==null?void 0:Ze.variants;return Le?Yk(xe,Le,[],xe.theme.modularCssLayers?"theme":void 0):null}),W||Te.push(Ja),Array.isArray(ge[0])){const X=ge.shift(),xe=new Array(fe.length).fill(""),Ee=new Array(Te.length).fill("");let Le;Le=[...xe,...X,...Ee],Le.raw=[...xe,...X.raw,...Ee],fe.unshift(Le)}const Ae=[...fe,...ge,...Te],Re=U(...Ae);return u.muiName&&(Re.muiName=u.muiName),Re};return U.withConfig&&(he.withConfig=U.withConfig),he}}function kR(e,t){return void 0}function TR(e){for(const t in e)return!1;return!0}function IR(e){return typeof e=="string"&&e.charCodeAt(0)>96}function PR(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const A0=Jk();function dp(e,t,o=!1){const l={...t};for(const h in e)if(Object.prototype.hasOwnProperty.call(e,h)){const m=h;if(m==="components"||m==="slots")l[m]={...e[m],...l[m]};else if(m==="componentsProps"||m==="slotProps"){const g=e[m],u=t[m];if(!u)l[m]=g||{};else if(!g)l[m]=u;else{l[m]={...u};for(const k in g)if(Object.prototype.hasOwnProperty.call(g,k)){const M=k;l[m][M]=dp(g[M],u[M],o)}}}else m==="className"&&o&&t.className?l.className=_t(e==null?void 0:e.className,t==null?void 0:t.className):m==="style"&&o&&t.style?l.style={...e==null?void 0:e.style,...t==null?void 0:t.style}:l[m]===void 0&&(l[m]=e[m])}return l}function Qk(e){const{theme:t,name:o,props:l}=e;return!t||!t.components||!t.components[o]||!t.components[o].defaultProps?l:dp(t.components[o].defaultProps,l)}function z0({props:e,name:t,defaultTheme:o,themeId:l}){let h=kp(o);return l&&(h=h[l]||h),Qk({theme:h,name:t,props:e})}const Yi=typeof window<"u"?J.useLayoutEffect:J.useEffect;function ER(e,t,o,l,h){const[m,g]=J.useState(()=>h&&o?o(e).matches:l?l(e).matches:t);return Yi(()=>{if(!o)return;const u=o(e),k=()=>{g(u.matches)};return k(),u.addEventListener("change",k),()=>{u.removeEventListener("change",k)}},[e,o]),m}const MR={...vm},eT=MR.useSyncExternalStore;function AR(e,t,o,l,h){const m=J.useCallback(()=>t,[t]),g=J.useMemo(()=>{if(h&&o)return()=>o(e).matches;if(l!==null){const{matches:B}=l(e);return()=>B}return m},[m,e,l,h,o]),[u,k]=J.useMemo(()=>{if(o===null)return[m,()=>()=>{}];const B=o(e);return[()=>B.matches,D=>(B.addEventListener("change",D),()=>{B.removeEventListener("change",D)})]},[m,o,e]);return eT(k,u,g)}function tT(e={}){const{themeId:t}=e;return function(l,h={}){let m=Hg();m&&t&&(m=m[t]||m);const g=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:u=!1,matchMedia:k=g?window.matchMedia:null,ssrMatchMedia:M=null,noSsr:B=!1}=Qk({name:"MuiUseMediaQuery",props:h,theme:m});let D=typeof l=="function"?l(m):l;return D=D.replace(/^@media( ?)/m,""),D.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(eT!==void 0?AR:ER)(D,u,k,M,B)}}tT();function zR(e,t=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,o))}function R0(e,t=0,o=1){return zR(e,t,o)}function RR(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let o=e.match(t);return o&&o[0].length===1&&(o=o.map(l=>l+l)),o?`rgb${o.length===4?"a":""}(${o.map((l,h)=>h<3?parseInt(l,16):Math.round(parseInt(l,16)/255*1e3)/1e3).join(", ")})`:""}function Qa(e){if(e.type)return e;if(e.charAt(0)==="#")return Qa(RR(e));const t=e.indexOf("("),o=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(o))throw new Error(Qs(9,e));let l=e.substring(t+1,e.length-1),h;if(o==="color"){if(l=l.split(" "),h=l.shift(),l.length===4&&l[3].charAt(0)==="/"&&(l[3]=l[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(h))throw new Error(Qs(10,h))}else l=l.split(",");return l=l.map(m=>parseFloat(m)),{type:o,values:l,colorSpace:h}}const LR=e=>{const t=Qa(e);return t.values.slice(0,3).map((o,l)=>t.type.includes("hsl")&&l!==0?`${o}%`:o).join(" ")},Th=(e,t)=>{try{return LR(e)}catch{return e}};function qg(e){const{type:t,colorSpace:o}=e;let{values:l}=e;return t.includes("rgb")?l=l.map((h,m)=>m<3?parseInt(h,10):h):t.includes("hsl")&&(l[1]=`${l[1]}%`,l[2]=`${l[2]}%`),t.includes("color")?l=`${o} ${l.join(" ")}`:l=`${l.join(", ")}`,`${t}(${l})`}function rT(e){e=Qa(e);const{values:t}=e,o=t[0],l=t[1]/100,h=t[2]/100,m=l*Math.min(h,1-h),g=(M,B=(M+o/30)%12)=>h-m*Math.max(Math.min(B-3,9-B,1),-1);let u="rgb";const k=[Math.round(g(0)*255),Math.round(g(8)*255),Math.round(g(4)*255)];return e.type==="hsla"&&(u+="a",k.push(t[3])),qg({type:u,values:k})}function sx(e){e=Qa(e);let t=e.type==="hsl"||e.type==="hsla"?Qa(rT(e)).values:e.values;return t=t.map(o=>(e.type!=="color"&&(o/=255),o<=.03928?o/12.92:((o+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function DR(e,t){const o=sx(e),l=sx(t);return(Math.max(o,l)+.05)/(Math.min(o,l)+.05)}function hp(e,t){return e=Qa(e),t=R0(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,qg(e)}function Al(e,t,o){try{return hp(e,t)}catch{return e}}function Zg(e,t){if(e=Qa(e),t=R0(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let o=0;o<3;o+=1)e.values[o]*=1-t;return qg(e)}function Br(e,t,o){try{return Zg(e,t)}catch{return e}}function Xg(e,t){if(e=Qa(e),t=R0(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let o=0;o<3;o+=1)e.values[o]+=(255-e.values[o])*t;else if(e.type.includes("color"))for(let o=0;o<3;o+=1)e.values[o]+=(1-e.values[o])*t;return qg(e)}function Fr(e,t,o){try{return Xg(e,t)}catch{return e}}function BR(e,t=.15){return sx(e)>.5?Zg(e,t):Xg(e,t)}function Xf(e,t,o){try{return BR(e,t)}catch{return e}}const nT=J.createContext(null);function L0(){return J.useContext(nT)}const FR=typeof Symbol=="function"&&Symbol.for,OR=FR?Symbol.for("mui.nested"):"__THEME_NESTED__";function $R(e,t){return typeof t=="function"?t(e):{...e,...t}}function NR(e){const{children:t,theme:o}=e,l=L0(),h=J.useMemo(()=>{const m=l===null?{...o}:$R(l,o);return m!=null&&(m[OR]=l!==null),m},[o,l]);return V.jsx(nT.Provider,{value:h,children:t})}const iT=J.createContext();function jR({value:e,...t}){return V.jsx(iT.Provider,{value:e??!0,...t})}const oT=()=>J.useContext(iT)??!1,sT=J.createContext(void 0);function VR({value:e,children:t}){return V.jsx(sT.Provider,{value:e,children:t})}function UR(e){const{theme:t,name:o,props:l}=e;if(!t||!t.components||!t.components[o])return l;const h=t.components[o];return h.defaultProps?dp(h.defaultProps,l,t.components.mergeClassNameAndStyle):!h.styleOverrides&&!h.variants?dp(h,l,t.components.mergeClassNameAndStyle):l}function WR({props:e,name:t}){const o=J.useContext(sT);return UR({props:e,name:t,theme:{components:o}})}let l2=0;function HR(e){const[t,o]=J.useState(e),l=e||t;return J.useEffect(()=>{t==null&&(l2+=1,o(`mui-${l2}`))},[t]),l}const GR={...vm},c2=GR.useId;function Hu(e){if(c2!==void 0){const t=c2();return e??t}return HR(e)}function qR(e){const t=Hg(),o=Hu()||"",{modularCssLayers:l}=e;let h="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!l||t!==null?h="":typeof l=="string"?h=l.replace(/mui(?!\.)/g,h):h=`@layer ${h};`,Yi(()=>{var u,k;const m=document.querySelector("head");if(!m)return;const g=m.firstChild;if(h){if(g&&((u=g.hasAttribute)!=null&&u.call(g,"data-mui-layer-order"))&&g.getAttribute("data-mui-layer-order")===o)return;const M=document.createElement("style");M.setAttribute("data-mui-layer-order",o),M.textContent=h,m.prepend(M)}else(k=m.querySelector(`style[data-mui-layer-order="${o}"]`))==null||k.remove()},[h,o]),h?V.jsx(qk,{styles:h}):null}const u2={};function d2(e,t,o,l=!1){return J.useMemo(()=>{const h=e&&t[e]||t;if(typeof o=="function"){const m=o(h),g=e?{...t,[e]:m}:m;return l?()=>g:g}return e?{...t,[e]:o}:{...t,...o}},[e,t,o,l])}function aT(e){const{children:t,theme:o,themeId:l}=e,h=Hg(u2),m=L0()||u2,g=d2(l,h,o),u=d2(l,m,o,!0),k=(l?g[l]:g).direction==="rtl",M=qR(g);return V.jsx(NR,{theme:u,children:V.jsx(bp.Provider,{value:g,children:V.jsx(jR,{value:k,children:V.jsxs(VR,{value:l?g[l].components:g.components,children:[M,t]})})})})}const h2={theme:void 0};function ZR(e){let t,o;return function(h){let m=t;return(m===void 0||h.theme!==o)&&(h2.theme=h.theme,m=Kk(e(h2)),t=m,o=h.theme),m}}const D0="mode",B0="color-scheme",XR="data-color-scheme";function KR(e){const{defaultMode:t="system",defaultLightColorScheme:o="light",defaultDarkColorScheme:l="dark",modeStorageKey:h=D0,colorSchemeStorageKey:m=B0,attribute:g=XR,colorSchemeNode:u="document.documentElement",nonce:k}=e||{};let M="",B=g;if(g==="class"&&(B=".%s"),g==="data"&&(B="[data-%s]"),B.startsWith(".")){const A=B.substring(1);M+=`${u}.classList.remove('${A}'.replace('%s', light), '${A}'.replace('%s', dark));
      ${u}.classList.add('${A}'.replace('%s', colorScheme));`}const D=B.match(/\[([^[\]]+)\]/);if(D){const[A,Z]=D[1].split("=");Z||(M+=`${u}.removeAttribute('${A}'.replace('%s', light));
      ${u}.removeAttribute('${A}'.replace('%s', dark));`),M+=`
      ${u}.setAttribute('${A}'.replace('%s', colorScheme), ${Z?`${Z}.replace('%s', colorScheme)`:'""'});`}else B!==".%s"&&(M+=`${u}.setAttribute('${B}', colorScheme);`);return V.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?k:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${h}') || '${t}';
  const dark = localStorage.getItem('${m}-dark') || '${l}';
  const light = localStorage.getItem('${m}-light') || '${o}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${M}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function YR(){}const JR=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(o){if(typeof window>"u")return;if(!t)return o;let l;try{l=t.localStorage.getItem(e)}catch{}return l||o},set:o=>{if(t)try{t.localStorage.setItem(e,o)}catch{}},subscribe:o=>{if(!t)return YR;const l=h=>{const m=h.newValue;h.key===e&&o(m)};return t.addEventListener("storage",l),()=>{t.removeEventListener("storage",l)}}});function Z_(){}function p2(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function lT(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function QR(e){return lT(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function e5(e){const{defaultMode:t="light",defaultLightColorScheme:o,defaultDarkColorScheme:l,supportedColorSchemes:h=[],modeStorageKey:m=D0,colorSchemeStorageKey:g=B0,storageWindow:u=typeof window>"u"?void 0:window,storageManager:k=JR,noSsr:M=!1}=e,B=h.join(","),D=h.length>1,A=J.useMemo(()=>k==null?void 0:k({key:m,storageWindow:u}),[k,m,u]),Z=J.useMemo(()=>k==null?void 0:k({key:`${g}-light`,storageWindow:u}),[k,g,u]),G=J.useMemo(()=>k==null?void 0:k({key:`${g}-dark`,storageWindow:u}),[k,g,u]),[te,ne]=J.useState(()=>{const ge=(A==null?void 0:A.get(t))||t,Te=(Z==null?void 0:Z.get(o))||o,Ae=(G==null?void 0:G.get(l))||l;return{mode:ge,systemMode:p2(ge),lightColorScheme:Te,darkColorScheme:Ae}}),[W,O]=J.useState(M||!D);J.useEffect(()=>{O(!0)},[]);const U=QR(te),K=J.useCallback(ge=>{ne(Te=>{if(ge===Te.mode)return Te;const Ae=ge??t;return A==null||A.set(Ae),{...Te,mode:Ae,systemMode:p2(Ae)}})},[A,t]),he=J.useCallback(ge=>{ge?typeof ge=="string"?ge&&!B.includes(ge)?console.error(`\`${ge}\` does not exist in \`theme.colorSchemes\`.`):ne(Te=>{const Ae={...Te};return lT(Te,Re=>{Re==="light"&&(Z==null||Z.set(ge),Ae.lightColorScheme=ge),Re==="dark"&&(G==null||G.set(ge),Ae.darkColorScheme=ge)}),Ae}):ne(Te=>{const Ae={...Te},Re=ge.light===null?o:ge.light,X=ge.dark===null?l:ge.dark;return Re&&(B.includes(Re)?(Ae.lightColorScheme=Re,Z==null||Z.set(Re)):console.error(`\`${Re}\` does not exist in \`theme.colorSchemes\`.`)),X&&(B.includes(X)?(Ae.darkColorScheme=X,G==null||G.set(X)):console.error(`\`${X}\` does not exist in \`theme.colorSchemes\`.`)),Ae}):ne(Te=>(Z==null||Z.set(o),G==null||G.set(l),{...Te,lightColorScheme:o,darkColorScheme:l}))},[B,Z,G,o,l]),ce=J.useCallback(ge=>{te.mode==="system"&&ne(Te=>{const Ae=ge!=null&&ge.matches?"dark":"light";return Te.systemMode===Ae?Te:{...Te,systemMode:Ae}})},[te.mode]),fe=J.useRef(ce);return fe.current=ce,J.useEffect(()=>{if(typeof window.matchMedia!="function"||!D)return;const ge=(...Ae)=>fe.current(...Ae),Te=window.matchMedia("(prefers-color-scheme: dark)");return Te.addListener(ge),ge(Te),()=>{Te.removeListener(ge)}},[D]),J.useEffect(()=>{if(D){const ge=(A==null?void 0:A.subscribe(Re=>{(!Re||["light","dark","system"].includes(Re))&&K(Re||t)}))||Z_,Te=(Z==null?void 0:Z.subscribe(Re=>{(!Re||B.match(Re))&&he({light:Re})}))||Z_,Ae=(G==null?void 0:G.subscribe(Re=>{(!Re||B.match(Re))&&he({dark:Re})}))||Z_;return()=>{ge(),Te(),Ae()}}},[he,K,B,t,u,D,A,Z,G]),{...te,mode:W?te.mode:void 0,systemMode:W?te.systemMode:void 0,colorScheme:W?U:void 0,setMode:K,setColorScheme:he}}const t5="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function r5(e){const{themeId:t,theme:o={},modeStorageKey:l=D0,colorSchemeStorageKey:h=B0,disableTransitionOnChange:m=!1,defaultColorScheme:g,resolveTheme:u}=e,k={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},M=J.createContext(void 0),B=()=>J.useContext(M)||k,D={},A={};function Z(W){var En,Fn,qe,dn;const{children:O,theme:U,modeStorageKey:K=l,colorSchemeStorageKey:he=h,disableTransitionOnChange:ce=m,storageManager:fe,storageWindow:ge=typeof window>"u"?void 0:window,documentNode:Te=typeof document>"u"?void 0:document,colorSchemeNode:Ae=typeof document>"u"?void 0:document.documentElement,disableNestedContext:Re=!1,disableStyleSheetGeneration:X=!1,defaultMode:xe="system",forceThemeRerender:Ee=!1,noSsr:Le}=W,Be=J.useRef(!1),Ze=L0(),ze=J.useContext(M),Fe=!!ze&&!Re,Ge=J.useMemo(()=>U||(typeof o=="function"?o():o),[U]),Xe=Ge[t],ct=Xe||Ge,{colorSchemes:Tt=D,components:Ht=A,cssVarPrefix:er}=ct,rr=Object.keys(Tt).filter(dr=>!!Tt[dr]).join(","),Ye=J.useMemo(()=>rr.split(","),[rr]),Jt=typeof g=="string"?g:g.light,zt=typeof g=="string"?g:g.dark,ht=Tt[Jt]&&Tt[zt]?xe:((Fn=(En=Tt[ct.defaultColorScheme])==null?void 0:En.palette)==null?void 0:Fn.mode)||((qe=ct.palette)==null?void 0:qe.mode),{mode:Rt,setMode:Mt,systemMode:Qt,lightColorScheme:kt,darkColorScheme:Zt,colorScheme:Ie,setColorScheme:hr}=e5({supportedColorSchemes:Ye,defaultLightColorScheme:Jt,defaultDarkColorScheme:zt,modeStorageKey:K,colorSchemeStorageKey:he,defaultMode:ht,storageManager:fe,storageWindow:ge,noSsr:Le});let _r=Rt,Bt=Ie;Fe&&(_r=ze.mode,Bt=ze.colorScheme);let or=Bt||ct.defaultColorScheme;ct.vars&&!Ee&&(or=ct.defaultColorScheme);const Sr=J.useMemo(()=>{var Nr;const dr=((Nr=ct.generateThemeVars)==null?void 0:Nr.call(ct))||ct.vars,Ft={...ct,components:Ht,colorSchemes:Tt,cssVarPrefix:er,vars:dr};if(typeof Ft.generateSpacing=="function"&&(Ft.spacing=Ft.generateSpacing()),or){const He=Tt[or];He&&typeof He=="object"&&Object.keys(He).forEach(It=>{He[It]&&typeof He[It]=="object"?Ft[It]={...Ft[It],...He[It]}:Ft[It]=He[It]})}return u?u(Ft):Ft},[ct,or,Ht,Tt,er]),bt=ct.colorSchemeSelector;Yi(()=>{if(Bt&&Ae&&bt&&bt!=="media"){const dr=bt;let Ft=bt;if(dr==="class"&&(Ft=".%s"),dr==="data"&&(Ft="[data-%s]"),dr!=null&&dr.startsWith("data-")&&!dr.includes("%s")&&(Ft=`[${dr}="%s"]`),Ft.startsWith("."))Ae.classList.remove(...Ye.map(Nr=>Ft.substring(1).replace("%s",Nr))),Ae.classList.add(Ft.substring(1).replace("%s",Bt));else{const Nr=Ft.replace("%s",Bt).match(/\[([^\]]+)\]/);if(Nr){const[He,It]=Nr[1].split("=");It||Ye.forEach(Lt=>{Ae.removeAttribute(He.replace(Bt,Lt))}),Ae.setAttribute(He,It?It.replace(/"|'/g,""):"")}else Ae.setAttribute(Ft,Bt)}}},[Bt,bt,Ae,Ye]),J.useEffect(()=>{let dr;if(ce&&Be.current&&Te){const Ft=Te.createElement("style");Ft.appendChild(Te.createTextNode(t5)),Te.head.appendChild(Ft),window.getComputedStyle(Te.body),dr=setTimeout(()=>{Te.head.removeChild(Ft)},1)}return()=>{clearTimeout(dr)}},[Bt,ce,Te]),J.useEffect(()=>(Be.current=!0,()=>{Be.current=!1}),[]);const _n=J.useMemo(()=>({allColorSchemes:Ye,colorScheme:Bt,darkColorScheme:Zt,lightColorScheme:kt,mode:_r,setColorScheme:hr,setMode:Mt,systemMode:Qt}),[Ye,Bt,Zt,kt,_r,hr,Mt,Qt,Sr.colorSchemeSelector]);let Ir=!0;(X||ct.cssVariables===!1||Fe&&(Ze==null?void 0:Ze.cssVarPrefix)===er)&&(Ir=!1);const un=V.jsxs(J.Fragment,{children:[V.jsx(aT,{themeId:Xe?t:void 0,theme:Sr,children:O}),Ir&&V.jsx($k,{styles:((dn=Sr.generateStyleSheets)==null?void 0:dn.call(Sr))||[]})]});return Fe?un:V.jsx(M.Provider,{value:_n,children:un})}const G=typeof g=="string"?g:g.light,te=typeof g=="string"?g:g.dark;return{CssVarsProvider:Z,useColorScheme:B,getInitColorSchemeScript:W=>KR({colorSchemeStorageKey:h,defaultLightColorScheme:G,defaultDarkColorScheme:te,modeStorageKey:l,...W})}}function n5(e=""){function t(...l){if(!l.length)return"";const h=l[0];return typeof h=="string"&&!h.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${h}${t(...l.slice(1))})`:`, ${h}`}return(l,...h)=>`var(--${e?`${e}-`:""}${l}${t(...h)})`}const f2=(e,t,o,l=[])=>{let h=e;t.forEach((m,g)=>{g===t.length-1?Array.isArray(h)?h[Number(m)]=o:h&&typeof h=="object"&&(h[m]=o):h&&typeof h=="object"&&(h[m]||(h[m]=l.includes(m)?[]:{}),h=h[m])})},i5=(e,t,o)=>{function l(h,m=[],g=[]){Object.entries(h).forEach(([u,k])=>{(!o||o&&!o([...m,u]))&&k!=null&&(typeof k=="object"&&Object.keys(k).length>0?l(k,[...m,u],Array.isArray(k)?[...g,u]:g):t([...m,u],k,g))})}l(e)},o5=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(l=>e.includes(l))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function X_(e,t){const{prefix:o,shouldSkipGeneratingVar:l}=t||{},h={},m={},g={};return i5(e,(u,k,M)=>{if((typeof k=="string"||typeof k=="number")&&(!l||!l(u,k))){const B=`--${o?`${o}-`:""}${u.join("-")}`,D=o5(u,k);Object.assign(h,{[B]:D}),f2(m,u,`var(${B})`,M),f2(g,u,`var(${B}, ${D})`,M)}},u=>u[0]==="vars"),{css:h,vars:m,varsWithDefaults:g}}function s5(e,t={}){const{getSelector:o=W,disableCssColorScheme:l,colorSchemeSelector:h,enableContrastVars:m}=t,{colorSchemes:g={},components:u,defaultColorScheme:k="light",...M}=e,{vars:B,css:D,varsWithDefaults:A}=X_(M,t);let Z=A;const G={},{[k]:te,...ne}=g;if(Object.entries(ne||{}).forEach(([K,he])=>{const{vars:ce,css:fe,varsWithDefaults:ge}=X_(he,t);Z=Zn(Z,ge),G[K]={css:fe,vars:ce}}),te){const{css:K,vars:he,varsWithDefaults:ce}=X_(te,t);Z=Zn(Z,ce),G[k]={css:K,vars:he}}function W(K,he){var fe,ge;let ce=h;if(h==="class"&&(ce=".%s"),h==="data"&&(ce="[data-%s]"),h!=null&&h.startsWith("data-")&&!h.includes("%s")&&(ce=`[${h}="%s"]`),K){if(ce==="media")return e.defaultColorScheme===K?":root":{[`@media (prefers-color-scheme: ${((ge=(fe=g[K])==null?void 0:fe.palette)==null?void 0:ge.mode)||K})`]:{":root":he}};if(ce)return e.defaultColorScheme===K?`:root, ${ce.replace("%s",String(K))}`:ce.replace("%s",String(K))}return":root"}return{vars:Z,generateThemeVars:()=>{let K={...B};return Object.entries(G).forEach(([,{vars:he}])=>{K=Zn(K,he)}),K},generateStyleSheets:()=>{var Te,Ae;const K=[],he=e.defaultColorScheme||"light";function ce(Re,X){Object.keys(X).length&&K.push(typeof Re=="string"?{[Re]:{...X}}:Re)}ce(o(void 0,{...D}),D);const{[he]:fe,...ge}=G;if(fe){const{css:Re}=fe,X=(Ae=(Te=g[he])==null?void 0:Te.palette)==null?void 0:Ae.mode,xe=!l&&X?{colorScheme:X,...Re}:{...Re};ce(o(he,{...xe}),xe)}return Object.entries(ge).forEach(([Re,{css:X}])=>{var Le,Be;const xe=(Be=(Le=g[Re])==null?void 0:Le.palette)==null?void 0:Be.mode,Ee=!l&&xe?{colorScheme:xe,...X}:{...X};ce(o(Re,{...Ee}),Ee)}),m&&K.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),K}}}function a5(e){return function(o){return e==="media"?`@media (prefers-color-scheme: ${o})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${o}"] &`:e==="class"?`.${o} &`:e==="data"?`[data-${o}] &`:`${e.replace("%s",o)} &`:"&"}}function qt(e,t,o=void 0){const l={};for(const h in e){const m=e[h];let g="",u=!0;for(let k=0;k<m.length;k+=1){const M=m[k];M&&(g+=(u===!0?"":" ")+t(M),u=!1,o&&o[M]&&(g+=" "+o[M]))}l[h]=g}return l}const l5=Wu(),c5=A0("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${st(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),u5=e=>z0({props:e,name:"MuiContainer",defaultTheme:l5}),d5=(e,t)=>{const o=k=>Gt(t,k),{classes:l,fixed:h,disableGutters:m,maxWidth:g}=e,u={root:["root",g&&`maxWidth${st(String(g))}`,h&&"fixed",m&&"disableGutters"]};return qt(u,o,l)};function h5(e={}){const{createStyledComponent:t=c5,useThemeProps:o=u5,componentName:l="MuiContainer"}=e,h=t(({theme:g,ownerState:u})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!u.disableGutters&&{paddingLeft:g.spacing(2),paddingRight:g.spacing(2),[g.breakpoints.up("sm")]:{paddingLeft:g.spacing(3),paddingRight:g.spacing(3)}}}),({theme:g,ownerState:u})=>u.fixed&&Object.keys(g.breakpoints.values).reduce((k,M)=>{const B=M,D=g.breakpoints.values[B];return D!==0&&(k[g.breakpoints.up(B)]={maxWidth:`${D}${g.breakpoints.unit}`}),k},{}),({theme:g,ownerState:u})=>({...u.maxWidth==="xs"&&{[g.breakpoints.up("xs")]:{maxWidth:Math.max(g.breakpoints.values.xs,444)}},...u.maxWidth&&u.maxWidth!=="xs"&&{[g.breakpoints.up(u.maxWidth)]:{maxWidth:`${g.breakpoints.values[u.maxWidth]}${g.breakpoints.unit}`}}}));return J.forwardRef(function(u,k){const M=o(u),{className:B,component:D="div",disableGutters:A=!1,fixed:Z=!1,maxWidth:G="lg",classes:te,...ne}=M,W={...M,component:D,disableGutters:A,fixed:Z,maxWidth:G},O=d5(W,l);return V.jsx(h,{as:D,ownerState:W,className:_t(O.root,B),ref:k,...ne})})}function jh(e,t){var o,l,h;return J.isValidElement(e)&&t.indexOf(e.type.muiName??((h=(l=(o=e.type)==null?void 0:o._payload)==null?void 0:l.value)==null?void 0:h.muiName))!==-1}const p5=(e,t)=>e.filter(o=>t.includes(o)),Gu=(e,t,o)=>{const l=e.keys[0];Array.isArray(t)?t.forEach((h,m)=>{o((g,u)=>{m<=e.keys.length-1&&(m===0?Object.assign(g,u):g[e.up(e.keys[m])]=u)},h)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:p5(e.keys,Object.keys(t))).forEach(m=>{if(e.keys.includes(m)){const g=t[m];g!==void 0&&o((u,k)=>{l===m?Object.assign(u,k):u[e.up(m)]=k},g)}}):(typeof t=="number"||typeof t=="string")&&o((h,m)=>{Object.assign(h,m)},t)};function qm(e){return`--Grid-${e}Spacing`}function Kg(e){return`--Grid-parent-${e}Spacing`}const m2="--Grid-columns",Pu="--Grid-parent-columns",f5=({theme:e,ownerState:t})=>{const o={};return Gu(e.breakpoints,t.size,(l,h)=>{let m={};h==="grow"&&(m={flexBasis:0,flexGrow:1,maxWidth:"100%"}),h==="auto"&&(m={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof h=="number"&&(m={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${h} / var(${Pu}) - (var(${Pu}) - ${h}) * (var(${Kg("column")}) / var(${Pu})))`}),l(o,m)}),o},m5=({theme:e,ownerState:t})=>{const o={};return Gu(e.breakpoints,t.offset,(l,h)=>{let m={};h==="auto"&&(m={marginLeft:"auto"}),typeof h=="number"&&(m={marginLeft:h===0?"0px":`calc(100% * ${h} / var(${Pu}) + var(${Kg("column")}) * ${h} / var(${Pu}))`}),l(o,m)}),o},g5=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={[m2]:12};return Gu(e.breakpoints,t.columns,(l,h)=>{const m=h??12;l(o,{[m2]:m,"> *":{[Pu]:m}})}),o},y5=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={};return Gu(e.breakpoints,t.rowSpacing,(l,h)=>{var g;const m=typeof h=="string"?h:(g=e.spacing)==null?void 0:g.call(e,h);l(o,{[qm("row")]:m,"> *":{[Kg("row")]:m}})}),o},_5=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={};return Gu(e.breakpoints,t.columnSpacing,(l,h)=>{var g;const m=typeof h=="string"?h:(g=e.spacing)==null?void 0:g.call(e,h);l(o,{[qm("column")]:m,"> *":{[Kg("column")]:m}})}),o},v5=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={};return Gu(e.breakpoints,t.direction,(l,h)=>{l(o,{flexDirection:h})}),o},x5=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${qm("row")}) var(${qm("column")})`}}),b5=e=>{const t=[];return Object.entries(e).forEach(([o,l])=>{l!==!1&&l!==void 0&&t.push(`grid-${o}-${String(l)}`)}),t},w5=(e,t="xs")=>{function o(l){return l===void 0?!1:typeof l=="string"&&!Number.isNaN(Number(l))||typeof l=="number"&&l>0}if(o(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const l=[];return Object.entries(e).forEach(([h,m])=>{o(m)&&l.push(`spacing-${h}-${String(m)}`)}),l}return[]},S5=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,o])=>`direction-${t}-${o}`):[`direction-xs-${String(e)}`];function C5(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(o=>{e[o]!==void 0&&delete e[o]})}const k5=Wu(),T5=A0("div",{name:"MuiGrid",slot:"Root"});function I5(e){return z0({props:e,name:"MuiGrid",defaultTheme:k5})}function P5(e={}){const{createStyledComponent:t=T5,useThemeProps:o=I5,useTheme:l=kp,componentName:h="MuiGrid"}=e,m=(M,B)=>{const{container:D,direction:A,spacing:Z,wrap:G,size:te}=M,ne={root:["root",D&&"container",G!=="wrap"&&`wrap-xs-${String(G)}`,...S5(A),...b5(te),...D?w5(Z,B.breakpoints.keys[0]):[]]};return qt(ne,W=>Gt(h,W),{})};function g(M,B,D=()=>!0){const A={};return M===null||(Array.isArray(M)?M.forEach((Z,G)=>{Z!==null&&D(Z)&&B.keys[G]&&(A[B.keys[G]]=Z)}):typeof M=="object"?Object.keys(M).forEach(Z=>{const G=M[Z];G!=null&&D(G)&&(A[Z]=G)}):A[B.keys[0]]=M),A}const u=t(g5,_5,y5,f5,v5,x5,m5),k=J.forwardRef(function(B,D){const A=l(),Z=o(B),G=Gg(Z);C5(G,A.breakpoints);const{className:te,children:ne,columns:W=12,container:O=!1,component:U="div",direction:K="row",wrap:he="wrap",size:ce={},offset:fe={},spacing:ge=0,rowSpacing:Te=ge,columnSpacing:Ae=ge,unstable_level:Re=0,...X}=G,xe=g(ce,A.breakpoints,Xe=>Xe!==!1),Ee=g(fe,A.breakpoints),Le=B.columns??(Re?void 0:W),Be=B.spacing??(Re?void 0:ge),Ze=B.rowSpacing??B.spacing??(Re?void 0:Te),ze=B.columnSpacing??B.spacing??(Re?void 0:Ae),Fe={...G,level:Re,columns:Le,container:O,direction:K,wrap:he,spacing:Be,rowSpacing:Ze,columnSpacing:ze,size:xe,offset:Ee},Ge=m(Fe,A);return V.jsx(u,{ref:D,as:U,ownerState:Fe,className:_t(Ge.root,te),...X,children:J.Children.map(ne,Xe=>{var ct;return J.isValidElement(Xe)&&jh(Xe,["Grid"])&&O&&Xe.props.container?J.cloneElement(Xe,{unstable_level:((ct=Xe.props)==null?void 0:ct.unstable_level)??Re+1}):Xe})})});return k.muiName="Grid",k}const E5=Wu(),M5=A0("div",{name:"MuiStack",slot:"Root"});function A5(e){return z0({props:e,name:"MuiStack",defaultTheme:E5})}function z5(e,t){const o=J.Children.toArray(e).filter(Boolean);return o.reduce((l,h,m)=>(l.push(h),m<o.length-1&&l.push(J.cloneElement(t,{key:`separator-${m}`})),l),[])}const R5=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],L5=({ownerState:e,theme:t})=>{let o={display:"flex",flexDirection:"column",...Jo({theme:t},H_({values:e.direction,breakpoints:t.breakpoints.values}),l=>({flexDirection:l}))};if(e.spacing){const l=$g(t),h=Object.keys(t.breakpoints.values).reduce((k,M)=>((typeof e.spacing=="object"&&e.spacing[M]!=null||typeof e.direction=="object"&&e.direction[M]!=null)&&(k[M]=!0),k),{}),m=H_({values:e.direction,base:h}),g=H_({values:e.spacing,base:h});typeof m=="object"&&Object.keys(m).forEach((k,M,B)=>{if(!m[k]){const A=M>0?m[B[M-1]]:"column";m[k]=A}}),o=Zn(o,Jo({theme:t},g,(k,M)=>e.useFlexGap?{gap:Ql(l,k)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${R5(M?m[M]:e.direction)}`]:Ql(l,k)}}))}return o=Pz(t.breakpoints,o),o};function D5(e={}){const{createStyledComponent:t=M5,useThemeProps:o=A5,componentName:l="MuiStack"}=e,h=()=>qt({root:["root"]},k=>Gt(l,k),{}),m=t(L5);return J.forwardRef(function(k,M){const B=o(k),D=Gg(B),{component:A="div",direction:Z="column",spacing:G=0,divider:te,children:ne,className:W,useFlexGap:O=!1,...U}=D,K={direction:Z,spacing:G,useFlexGap:O},he=h();return V.jsx(m,{as:A,ownerState:K,ref:M,className:_t(he.root,W),...U,children:te?z5(ne,te):ne})})}const pp={black:"#000",white:"#fff"},B5={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Jc={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Qc={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},mh={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},eu={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},tu={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},ru={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function cT(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:pp.white,default:pp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const uT=cT();function dT(){return{text:{primary:pp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:pp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const ax=dT();function g2(e,t,o,l){const h=l.light||l,m=l.dark||l*1.5;e[t]||(e.hasOwnProperty(o)?e[t]=e[o]:t==="light"?e.light=Xg(e.main,h):t==="dark"&&(e.dark=Zg(e.main,m)))}function y2(e,t,o,l,h){const m=h.light||h,g=h.dark||h*1.5;t[o]||(t.hasOwnProperty(l)?t[o]=t[l]:o==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(m*100).toFixed(0)}%)`:o==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(g*100).toFixed(0)}%)`))}function F5(e="light"){return e==="dark"?{main:eu[200],light:eu[50],dark:eu[400]}:{main:eu[700],light:eu[400],dark:eu[800]}}function O5(e="light"){return e==="dark"?{main:Jc[200],light:Jc[50],dark:Jc[400]}:{main:Jc[500],light:Jc[300],dark:Jc[700]}}function $5(e="light"){return e==="dark"?{main:Qc[500],light:Qc[300],dark:Qc[700]}:{main:Qc[700],light:Qc[400],dark:Qc[800]}}function N5(e="light"){return e==="dark"?{main:tu[400],light:tu[300],dark:tu[700]}:{main:tu[700],light:tu[500],dark:tu[900]}}function j5(e="light"){return e==="dark"?{main:ru[400],light:ru[300],dark:ru[700]}:{main:ru[800],light:ru[500],dark:ru[900]}}function V5(e="light"){return e==="dark"?{main:mh[400],light:mh[300],dark:mh[700]}:{main:"#ed6c02",light:mh[500],dark:mh[900]}}function U5(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function F0(e){const{mode:t="light",contrastThreshold:o=3,tonalOffset:l=.2,colorSpace:h,...m}=e,g=e.primary||F5(t),u=e.secondary||O5(t),k=e.error||$5(t),M=e.info||N5(t),B=e.success||j5(t),D=e.warning||V5(t);function A(ne){return h?U5(ne):DR(ne,ax.text.primary)>=o?ax.text.primary:uT.text.primary}const Z=({color:ne,name:W,mainShade:O=500,lightShade:U=300,darkShade:K=700})=>{if(ne={...ne},!ne.main&&ne[O]&&(ne.main=ne[O]),!ne.hasOwnProperty("main"))throw new Error(Qs(11,W?` (${W})`:"",O));if(typeof ne.main!="string")throw new Error(Qs(12,W?` (${W})`:"",JSON.stringify(ne.main)));return h?(y2(h,ne,"light",U,l),y2(h,ne,"dark",K,l)):(g2(ne,"light",U,l),g2(ne,"dark",K,l)),ne.contrastText||(ne.contrastText=A(ne.main)),ne};let G;return t==="light"?G=cT():t==="dark"&&(G=dT()),Zn({common:{...pp},mode:t,primary:Z({color:g,name:"primary"}),secondary:Z({color:u,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:Z({color:k,name:"error"}),warning:Z({color:D,name:"warning"}),info:Z({color:M,name:"info"}),success:Z({color:B,name:"success"}),grey:B5,contrastThreshold:o,getContrastText:A,augmentColor:Z,tonalOffset:l,...G},m)}function W5(e){const t={};return Object.entries(e).forEach(l=>{const[h,m]=l;typeof m=="object"&&(t[h]=`${m.fontStyle?`${m.fontStyle} `:""}${m.fontVariant?`${m.fontVariant} `:""}${m.fontWeight?`${m.fontWeight} `:""}${m.fontStretch?`${m.fontStretch} `:""}${m.fontSize||""}${m.lineHeight?`/${m.lineHeight} `:""}${m.fontFamily||""}`)}),t}function H5(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function G5(e){return Math.round(e*1e5)/1e5}const _2={textTransform:"uppercase"},v2='"Roboto", "Helvetica", "Arial", sans-serif';function hT(e,t){const{fontFamily:o=v2,fontSize:l=14,fontWeightLight:h=300,fontWeightRegular:m=400,fontWeightMedium:g=500,fontWeightBold:u=700,htmlFontSize:k=16,allVariants:M,pxToRem:B,...D}=typeof t=="function"?t(e):t,A=l/14,Z=B||(ne=>`${ne/k*A}rem`),G=(ne,W,O,U,K)=>({fontFamily:o,fontWeight:ne,fontSize:Z(W),lineHeight:O,...o===v2?{letterSpacing:`${G5(U/W)}em`}:{},...K,...M}),te={h1:G(h,96,1.167,-1.5),h2:G(h,60,1.2,-.5),h3:G(m,48,1.167,0),h4:G(m,34,1.235,.25),h5:G(m,24,1.334,0),h6:G(g,20,1.6,.15),subtitle1:G(m,16,1.75,.15),subtitle2:G(g,14,1.57,.1),body1:G(m,16,1.5,.15),body2:G(m,14,1.43,.15),button:G(g,14,1.75,.4,_2),caption:G(m,12,1.66,.4),overline:G(m,12,2.66,1,_2),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Zn({htmlFontSize:k,pxToRem:Z,fontFamily:o,fontSize:l,fontWeightLight:h,fontWeightRegular:m,fontWeightMedium:g,fontWeightBold:u,...te},D,{clone:!1})}const q5=.2,Z5=.14,X5=.12;function rn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${q5})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Z5})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${X5})`].join(",")}const K5=["none",rn(0,2,1,-1,0,1,1,0,0,1,3,0),rn(0,3,1,-2,0,2,2,0,0,1,5,0),rn(0,3,3,-2,0,3,4,0,0,1,8,0),rn(0,2,4,-1,0,4,5,0,0,1,10,0),rn(0,3,5,-1,0,5,8,0,0,1,14,0),rn(0,3,5,-1,0,6,10,0,0,1,18,0),rn(0,4,5,-2,0,7,10,1,0,2,16,1),rn(0,5,5,-3,0,8,10,1,0,3,14,2),rn(0,5,6,-3,0,9,12,1,0,3,16,2),rn(0,6,6,-3,0,10,14,1,0,4,18,3),rn(0,6,7,-4,0,11,15,1,0,4,20,3),rn(0,7,8,-4,0,12,17,2,0,5,22,4),rn(0,7,8,-4,0,13,19,2,0,5,24,4),rn(0,7,9,-4,0,14,21,2,0,5,26,4),rn(0,8,9,-5,0,15,22,2,0,6,28,5),rn(0,8,10,-5,0,16,24,2,0,6,30,5),rn(0,8,11,-5,0,17,26,2,0,6,32,5),rn(0,9,11,-5,0,18,28,2,0,7,34,6),rn(0,9,12,-6,0,19,29,2,0,7,36,6),rn(0,10,13,-6,0,20,31,3,0,8,38,7),rn(0,10,13,-6,0,21,33,3,0,8,40,7),rn(0,10,14,-6,0,22,35,3,0,8,42,7),rn(0,11,14,-7,0,23,36,3,0,9,44,8),rn(0,11,15,-7,0,24,38,3,0,9,46,8)],Y5={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},J5={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function x2(e){return`${Math.round(e)}ms`}function Q5(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function eL(e){const t={...Y5,...e.easing},o={...J5,...e.duration};return{getAutoHeightDuration:Q5,create:(h=["all"],m={})=>{const{duration:g=o.standard,easing:u=t.easeInOut,delay:k=0,...M}=m;return(Array.isArray(h)?h:[h]).map(B=>`${B} ${typeof g=="string"?g:x2(g)} ${u} ${typeof k=="string"?k:x2(k)}`).join(",")},...e,easing:t,duration:o}}const tL={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function rL(e){return ys(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function pT(e={}){const t={...e};function o(l){const h=Object.entries(l);for(let m=0;m<h.length;m++){const[g,u]=h[m];!rL(u)||g.startsWith("unstable_")?delete l[g]:ys(u)&&(l[g]={...u},o(l[g]))}}return o(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function b2(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const nL=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let o=0;for(let l=0;l<t.length;l+=1)o+=+t[l];return o};function iL(e){Object.assign(e,{alpha(t,o){const l=this||e;return l.colorSpace?`oklch(from ${t} l c h / ${typeof o=="string"?`calc(${o})`:o})`:l.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof o=="string"?`calc(${o})`:o})`:hp(t,nL(o))},lighten(t,o){const l=this||e;return l.colorSpace?`color-mix(in ${l.colorSpace}, ${t}, #fff ${b2(o)})`:Xg(t,o)},darken(t,o){const l=this||e;return l.colorSpace?`color-mix(in ${l.colorSpace}, ${t}, #000 ${b2(o)})`:Zg(t,o)}})}function lx(e={},...t){const{breakpoints:o,mixins:l={},spacing:h,palette:m={},transitions:g={},typography:u={},shape:k,colorSpace:M,...B}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Qs(20));const D=F0({...m,colorSpace:M}),A=Wu(e);let Z=Zn(A,{mixins:H5(A.breakpoints,l),palette:D,shadows:K5.slice(),typography:hT(D,u),transitions:eL(g),zIndex:{...tL}});return Z=Zn(Z,B),Z=t.reduce((G,te)=>Zn(G,te),Z),Z.unstable_sxConfig={...Cp,...B==null?void 0:B.unstable_sxConfig},Z.unstable_sx=function(te){return Ja({sx:te,theme:this})},Z.toRuntimeSource=pT,iL(Z),Z}function cx(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const oL=[...Array(25)].map((e,t)=>{if(t===0)return"none";const o=cx(t);return`linear-gradient(rgba(255 255 255 / ${o}), rgba(255 255 255 / ${o}))`});function fT(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function mT(e){return e==="dark"?oL:[]}function sL(e){const{palette:t={mode:"light"},opacity:o,overlays:l,colorSpace:h,...m}=e,g=F0({...t,colorSpace:h});return{palette:g,opacity:{...fT(g.mode),...o},overlays:l||mT(g.mode),...m}}function aL(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const lL=e=>[...[...Array(25)].map((t,o)=>`--${e?`${e}-`:""}overlays-${o}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],cL=e=>(t,o)=>{const l=e.rootSelector||":root",h=e.colorSchemeSelector;let m=h;if(h==="class"&&(m=".%s"),h==="data"&&(m="[data-%s]"),h!=null&&h.startsWith("data-")&&!h.includes("%s")&&(m=`[${h}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const g={};return lL(e.cssVarPrefix).forEach(u=>{g[u]=o[u],delete o[u]}),m==="media"?{[l]:o,"@media (prefers-color-scheme: dark)":{[l]:g}}:m?{[m.replace("%s",t)]:g,[`${l}, ${m.replace("%s",t)}`]:o}:{[l]:{...o,...g}}}if(m&&m!=="media")return`${l}, ${m.replace("%s",String(t))}`}else if(t){if(m==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[l]:o}};if(m)return m.replace("%s",String(t))}return l};function uL(e,t){t.forEach(o=>{e[o]||(e[o]={})})}function je(e,t,o){!e[t]&&o&&(e[t]=o)}function Ih(e){return typeof e!="string"||!e.startsWith("hsl")?e:rT(e)}function Ns(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Th(Ih(e[t])))}function dL(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const us=e=>{try{return e()}catch{}},hL=(e="mui")=>n5(e);function K_(e,t,o,l,h){if(!o)return;o=o===!0?{}:o;const m=h==="dark"?"dark":"light";if(!l){t[h]=sL({...o,palette:{mode:m,...o==null?void 0:o.palette},colorSpace:e});return}const{palette:g,...u}=lx({...l,palette:{mode:m,...o==null?void 0:o.palette},colorSpace:e});return t[h]={...o,palette:g,opacity:{...fT(m),...o==null?void 0:o.opacity},overlays:(o==null?void 0:o.overlays)||mT(m)},u}function pL(e={},...t){const{colorSchemes:o={light:!0},defaultColorScheme:l,disableCssColorScheme:h=!1,cssVarPrefix:m="mui",nativeColor:g=!1,shouldSkipGeneratingVar:u=aL,colorSchemeSelector:k=o.light&&o.dark?"media":void 0,rootSelector:M=":root",...B}=e,D=Object.keys(o)[0],A=l||(o.light&&D!=="light"?"light":D),Z=hL(m),{[A]:G,light:te,dark:ne,...W}=o,O={...W};let U=G;if((A==="dark"&&!("dark"in o)||A==="light"&&!("light"in o))&&(U=!0),!U)throw new Error(Qs(21,A));let K;g&&(K="oklch");const he=K_(K,O,U,B,A);te&&!O.light&&K_(K,O,te,void 0,"light"),ne&&!O.dark&&K_(K,O,ne,void 0,"dark");let ce={defaultColorScheme:A,...he,cssVarPrefix:m,colorSchemeSelector:k,rootSelector:M,getCssVar:Z,colorSchemes:O,font:{...W5(he.typography),...he.font},spacing:dL(B.spacing)};Object.keys(ce.colorSchemes).forEach(Re=>{const X=ce.colorSchemes[Re].palette,xe=Le=>{const Be=Le.split("-"),Ze=Be[1],ze=Be[2];return Z(Le,X[Ze][ze])};X.mode==="light"&&(je(X.common,"background","#fff"),je(X.common,"onBackground","#000")),X.mode==="dark"&&(je(X.common,"background","#000"),je(X.common,"onBackground","#fff"));function Ee(Le,Be,Ze){if(K){let ze;return Le===Al&&(ze=`transparent ${((1-Ze)*100).toFixed(0)}%`),Le===Br&&(ze=`#000 ${(Ze*100).toFixed(0)}%`),Le===Fr&&(ze=`#fff ${(Ze*100).toFixed(0)}%`),`color-mix(in ${K}, ${Be}, ${ze})`}return Le(Be,Ze)}if(uL(X,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),X.mode==="light"){je(X.Alert,"errorColor",Ee(Br,X.error.light,.6)),je(X.Alert,"infoColor",Ee(Br,X.info.light,.6)),je(X.Alert,"successColor",Ee(Br,X.success.light,.6)),je(X.Alert,"warningColor",Ee(Br,X.warning.light,.6)),je(X.Alert,"errorFilledBg",xe("palette-error-main")),je(X.Alert,"infoFilledBg",xe("palette-info-main")),je(X.Alert,"successFilledBg",xe("palette-success-main")),je(X.Alert,"warningFilledBg",xe("palette-warning-main")),je(X.Alert,"errorFilledColor",us(()=>X.getContrastText(X.error.main))),je(X.Alert,"infoFilledColor",us(()=>X.getContrastText(X.info.main))),je(X.Alert,"successFilledColor",us(()=>X.getContrastText(X.success.main))),je(X.Alert,"warningFilledColor",us(()=>X.getContrastText(X.warning.main))),je(X.Alert,"errorStandardBg",Ee(Fr,X.error.light,.9)),je(X.Alert,"infoStandardBg",Ee(Fr,X.info.light,.9)),je(X.Alert,"successStandardBg",Ee(Fr,X.success.light,.9)),je(X.Alert,"warningStandardBg",Ee(Fr,X.warning.light,.9)),je(X.Alert,"errorIconColor",xe("palette-error-main")),je(X.Alert,"infoIconColor",xe("palette-info-main")),je(X.Alert,"successIconColor",xe("palette-success-main")),je(X.Alert,"warningIconColor",xe("palette-warning-main")),je(X.AppBar,"defaultBg",xe("palette-grey-100")),je(X.Avatar,"defaultBg",xe("palette-grey-400")),je(X.Button,"inheritContainedBg",xe("palette-grey-300")),je(X.Button,"inheritContainedHoverBg",xe("palette-grey-A100")),je(X.Chip,"defaultBorder",xe("palette-grey-400")),je(X.Chip,"defaultAvatarColor",xe("palette-grey-700")),je(X.Chip,"defaultIconColor",xe("palette-grey-700")),je(X.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),je(X.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),je(X.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),je(X.LinearProgress,"primaryBg",Ee(Fr,X.primary.main,.62)),je(X.LinearProgress,"secondaryBg",Ee(Fr,X.secondary.main,.62)),je(X.LinearProgress,"errorBg",Ee(Fr,X.error.main,.62)),je(X.LinearProgress,"infoBg",Ee(Fr,X.info.main,.62)),je(X.LinearProgress,"successBg",Ee(Fr,X.success.main,.62)),je(X.LinearProgress,"warningBg",Ee(Fr,X.warning.main,.62)),je(X.Skeleton,"bg",K?Ee(Al,X.text.primary,.11):`rgba(${xe("palette-text-primaryChannel")} / 0.11)`),je(X.Slider,"primaryTrack",Ee(Fr,X.primary.main,.62)),je(X.Slider,"secondaryTrack",Ee(Fr,X.secondary.main,.62)),je(X.Slider,"errorTrack",Ee(Fr,X.error.main,.62)),je(X.Slider,"infoTrack",Ee(Fr,X.info.main,.62)),je(X.Slider,"successTrack",Ee(Fr,X.success.main,.62)),je(X.Slider,"warningTrack",Ee(Fr,X.warning.main,.62));const Le=K?Ee(Br,X.background.default,.6825):Xf(X.background.default,.8);je(X.SnackbarContent,"bg",Le),je(X.SnackbarContent,"color",us(()=>K?ax.text.primary:X.getContrastText(Le))),je(X.SpeedDialAction,"fabHoverBg",Xf(X.background.paper,.15)),je(X.StepConnector,"border",xe("palette-grey-400")),je(X.StepContent,"border",xe("palette-grey-400")),je(X.Switch,"defaultColor",xe("palette-common-white")),je(X.Switch,"defaultDisabledColor",xe("palette-grey-100")),je(X.Switch,"primaryDisabledColor",Ee(Fr,X.primary.main,.62)),je(X.Switch,"secondaryDisabledColor",Ee(Fr,X.secondary.main,.62)),je(X.Switch,"errorDisabledColor",Ee(Fr,X.error.main,.62)),je(X.Switch,"infoDisabledColor",Ee(Fr,X.info.main,.62)),je(X.Switch,"successDisabledColor",Ee(Fr,X.success.main,.62)),je(X.Switch,"warningDisabledColor",Ee(Fr,X.warning.main,.62)),je(X.TableCell,"border",Ee(Fr,Ee(Al,X.divider,1),.88)),je(X.Tooltip,"bg",Ee(Al,X.grey[700],.92))}if(X.mode==="dark"){je(X.Alert,"errorColor",Ee(Fr,X.error.light,.6)),je(X.Alert,"infoColor",Ee(Fr,X.info.light,.6)),je(X.Alert,"successColor",Ee(Fr,X.success.light,.6)),je(X.Alert,"warningColor",Ee(Fr,X.warning.light,.6)),je(X.Alert,"errorFilledBg",xe("palette-error-dark")),je(X.Alert,"infoFilledBg",xe("palette-info-dark")),je(X.Alert,"successFilledBg",xe("palette-success-dark")),je(X.Alert,"warningFilledBg",xe("palette-warning-dark")),je(X.Alert,"errorFilledColor",us(()=>X.getContrastText(X.error.dark))),je(X.Alert,"infoFilledColor",us(()=>X.getContrastText(X.info.dark))),je(X.Alert,"successFilledColor",us(()=>X.getContrastText(X.success.dark))),je(X.Alert,"warningFilledColor",us(()=>X.getContrastText(X.warning.dark))),je(X.Alert,"errorStandardBg",Ee(Br,X.error.light,.9)),je(X.Alert,"infoStandardBg",Ee(Br,X.info.light,.9)),je(X.Alert,"successStandardBg",Ee(Br,X.success.light,.9)),je(X.Alert,"warningStandardBg",Ee(Br,X.warning.light,.9)),je(X.Alert,"errorIconColor",xe("palette-error-main")),je(X.Alert,"infoIconColor",xe("palette-info-main")),je(X.Alert,"successIconColor",xe("palette-success-main")),je(X.Alert,"warningIconColor",xe("palette-warning-main")),je(X.AppBar,"defaultBg",xe("palette-grey-900")),je(X.AppBar,"darkBg",xe("palette-background-paper")),je(X.AppBar,"darkColor",xe("palette-text-primary")),je(X.Avatar,"defaultBg",xe("palette-grey-600")),je(X.Button,"inheritContainedBg",xe("palette-grey-800")),je(X.Button,"inheritContainedHoverBg",xe("palette-grey-700")),je(X.Chip,"defaultBorder",xe("palette-grey-700")),je(X.Chip,"defaultAvatarColor",xe("palette-grey-300")),je(X.Chip,"defaultIconColor",xe("palette-grey-300")),je(X.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),je(X.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),je(X.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),je(X.LinearProgress,"primaryBg",Ee(Br,X.primary.main,.5)),je(X.LinearProgress,"secondaryBg",Ee(Br,X.secondary.main,.5)),je(X.LinearProgress,"errorBg",Ee(Br,X.error.main,.5)),je(X.LinearProgress,"infoBg",Ee(Br,X.info.main,.5)),je(X.LinearProgress,"successBg",Ee(Br,X.success.main,.5)),je(X.LinearProgress,"warningBg",Ee(Br,X.warning.main,.5)),je(X.Skeleton,"bg",K?Ee(Al,X.text.primary,.13):`rgba(${xe("palette-text-primaryChannel")} / 0.13)`),je(X.Slider,"primaryTrack",Ee(Br,X.primary.main,.5)),je(X.Slider,"secondaryTrack",Ee(Br,X.secondary.main,.5)),je(X.Slider,"errorTrack",Ee(Br,X.error.main,.5)),je(X.Slider,"infoTrack",Ee(Br,X.info.main,.5)),je(X.Slider,"successTrack",Ee(Br,X.success.main,.5)),je(X.Slider,"warningTrack",Ee(Br,X.warning.main,.5));const Le=K?Ee(Fr,X.background.default,.985):Xf(X.background.default,.98);je(X.SnackbarContent,"bg",Le),je(X.SnackbarContent,"color",us(()=>K?uT.text.primary:X.getContrastText(Le))),je(X.SpeedDialAction,"fabHoverBg",Xf(X.background.paper,.15)),je(X.StepConnector,"border",xe("palette-grey-600")),je(X.StepContent,"border",xe("palette-grey-600")),je(X.Switch,"defaultColor",xe("palette-grey-300")),je(X.Switch,"defaultDisabledColor",xe("palette-grey-600")),je(X.Switch,"primaryDisabledColor",Ee(Br,X.primary.main,.55)),je(X.Switch,"secondaryDisabledColor",Ee(Br,X.secondary.main,.55)),je(X.Switch,"errorDisabledColor",Ee(Br,X.error.main,.55)),je(X.Switch,"infoDisabledColor",Ee(Br,X.info.main,.55)),je(X.Switch,"successDisabledColor",Ee(Br,X.success.main,.55)),je(X.Switch,"warningDisabledColor",Ee(Br,X.warning.main,.55)),je(X.TableCell,"border",Ee(Br,Ee(Al,X.divider,1),.68)),je(X.Tooltip,"bg",Ee(Al,X.grey[700],.92))}Ns(X.background,"default"),Ns(X.background,"paper"),Ns(X.common,"background"),Ns(X.common,"onBackground"),Ns(X,"divider"),Object.keys(X).forEach(Le=>{const Be=X[Le];Le!=="tonalOffset"&&Be&&typeof Be=="object"&&(Be.main&&je(X[Le],"mainChannel",Th(Ih(Be.main))),Be.light&&je(X[Le],"lightChannel",Th(Ih(Be.light))),Be.dark&&je(X[Le],"darkChannel",Th(Ih(Be.dark))),Be.contrastText&&je(X[Le],"contrastTextChannel",Th(Ih(Be.contrastText))),Le==="text"&&(Ns(X[Le],"primary"),Ns(X[Le],"secondary")),Le==="action"&&(Be.active&&Ns(X[Le],"active"),Be.selected&&Ns(X[Le],"selected")))})}),ce=t.reduce((Re,X)=>Zn(Re,X),ce);const fe={prefix:m,disableCssColorScheme:h,shouldSkipGeneratingVar:u,getSelector:cL(ce),enableContrastVars:g},{vars:ge,generateThemeVars:Te,generateStyleSheets:Ae}=s5(ce,fe);return ce.vars=ge,Object.entries(ce.colorSchemes[ce.defaultColorScheme]).forEach(([Re,X])=>{ce[Re]=X}),ce.generateThemeVars=Te,ce.generateStyleSheets=Ae,ce.generateSpacing=function(){return Gk(B.spacing,$g(this))},ce.getColorSchemeSelector=a5(k),ce.spacing=ce.generateSpacing(),ce.shouldSkipGeneratingVar=u,ce.unstable_sxConfig={...Cp,...B==null?void 0:B.unstable_sxConfig},ce.unstable_sx=function(X){return Ja({sx:X,theme:this})},ce.toRuntimeSource=pT,ce}function w2(e,t,o){e.colorSchemes&&o&&(e.colorSchemes[t]={...o!==!0&&o,palette:F0({...o===!0?{}:o.palette,mode:t})})}function Yg(e={},...t){const{palette:o,cssVariables:l=!1,colorSchemes:h=o?void 0:{light:!0},defaultColorScheme:m=o==null?void 0:o.mode,...g}=e,u=m||"light",k=h==null?void 0:h[u],M={...h,...o?{[u]:{...typeof k!="boolean"&&k,palette:o}}:void 0};if(l===!1){if(!("colorSchemes"in e))return lx(e,...t);let B=o;"palette"in e||M[u]&&(M[u]!==!0?B=M[u].palette:u==="dark"&&(B={mode:"dark"}));const D=lx({...e,palette:B},...t);return D.defaultColorScheme=u,D.colorSchemes=M,D.palette.mode==="light"&&(D.colorSchemes.light={...M.light!==!0&&M.light,palette:D.palette},w2(D,"dark",M.dark)),D.palette.mode==="dark"&&(D.colorSchemes.dark={...M.dark!==!0&&M.dark,palette:D.palette},w2(D,"light",M.light)),D}return!o&&!("light"in M)&&u==="light"&&(M.light=!0),pL({...g,colorSchemes:M,defaultColorScheme:u,...typeof l!="boolean"&&l},...t)}const O0=Yg();function Qo(){const e=kp(O0);return e[Ko]||e}function gT(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const xi=e=>gT(e)&&e!=="classes",it=Jk({themeId:Ko,defaultTheme:O0,rootShouldForwardProp:xi});function fL({theme:e,...t}){const o=Ko in e?e[Ko]:void 0;return V.jsx(aT,{...t,themeId:o?Ko:void 0,theme:o||e})}const Kf={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:mL}=r5({themeId:Ko,theme:()=>Yg({cssVariables:!0}),colorSchemeStorageKey:Kf.colorSchemeStorageKey,modeStorageKey:Kf.modeStorageKey,defaultColorScheme:{light:Kf.defaultLightColorScheme,dark:Kf.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:hT(e.palette,e.typography)};return t.unstable_sx=function(l){return Ja({sx:l,theme:this})},t}}),gL=mL;function yL({theme:e,...t}){const o=J.useMemo(()=>{if(typeof e=="function")return e;const l=Ko in e?e[Ko]:e;return"colorSchemes"in l?null:"vars"in l?e:{...e,vars:null}},[e]);return o?V.jsx(fL,{theme:o,...t}):V.jsx(gL,{theme:e,...t})}function _L(e){return V.jsx(qk,{...e,defaultTheme:O0,themeId:Ko})}function $0(e){return function(o){return V.jsx(_L,{styles:typeof e=="function"?l=>e({theme:l,...o}):e})}}function vL(){return Gg}function Wt(e){return WR(e)}const ux=typeof $0({})=="function",xL=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),bL=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),yT=(e,t=!1)=>{var m,g;const o={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([u,k])=>{var B,D;const M=e.getColorSchemeSelector(u);M.startsWith("@")?o[M]={":root":{colorScheme:(B=k.palette)==null?void 0:B.mode}}:o[M.replace(/\s*&/,"")]={colorScheme:(D=k.palette)==null?void 0:D.mode}});let l={html:xL(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...bL(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...o};const h=(g=(m=e.components)==null?void 0:m.MuiCssBaseline)==null?void 0:g.styleOverrides;return h&&(l=[l,h]),l},_m="mui-ecs",wL=e=>{const t=yT(e,!1),o=Array.isArray(t)?t[0]:t;return!e.vars&&o&&(o.html[`:root:has(${_m})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([l,h])=>{var g,u;const m=e.getColorSchemeSelector(l);m.startsWith("@")?o[m]={[`:root:not(:has(.${_m}))`]:{colorScheme:(g=h.palette)==null?void 0:g.mode}}:o[m.replace(/\s*&/,"")]={[`&:not(:has(.${_m}))`]:{colorScheme:(u=h.palette)==null?void 0:u.mode}}}),t},SL=$0(ux?({theme:e,enableColorScheme:t})=>yT(e,t):({theme:e})=>wL(e));function CL(e){const t=Wt({props:e,name:"MuiCssBaseline"}),{children:o,enableColorScheme:l=!1}=t;return V.jsxs(J.Fragment,{children:[ux&&V.jsx(SL,{enableColorScheme:l}),!ux&&!l&&V.jsx("span",{className:_m,style:{display:"none"}}),o]})}const S2=["red","blue","green","purple","orange","darkred","darkblue","darkgreen","cadetblue","pink","black","gray"],C2=[{sides:3,rotation:0},{sides:4,rotation:45},{sides:5,rotation:0},{sides:6,rotation:0},{sides:8,rotation:0},{sides:3,rotation:180},{sides:4,rotation:0}];function kL(e){const t=e.trim().split(`
`),o=t[0].split(",").map(l=>l.trim());return t.slice(1).map(l=>{const h=TL(l),m={};return o.forEach((g,u)=>{m[g]=h[u]||""}),m})}function TL(e){const t=[];let o="",l=!1;for(let h=0;h<e.length;h++){const m=e[h];m==='"'?l=!l:m===","&&!l?(t.push(o.trim()),o=""):o+=m}return t.push(o.trim()),t}async function IL(e="/tree_data.csv",t={}){const{photosUrl:o=""}=t;try{const l=await fetch(e);if(!l.ok)throw new Error(`Failed to load CSV: ${l.statusText}`);const h=await l.text(),m=kL(h),g=[...new Set(m.map(B=>B.genus).filter(B=>B))],u={};g.forEach((B,D)=>{u[B]={color:S2[D%S2.length],shape:C2[D%C2.length]}});const k=m.map(B=>{const D=B.genus||"Unknown",A=u[D]||{color:"gray",shape:{sides:4,rotation:0}};let Z=null;const G=parseFloat(B.crownNSm||B.crownNS),te=parseFloat(B.crownEWm||B.crownEW);!isNaN(G)&&!isNaN(te)?Z=(G+te)/4*5:isNaN(G)?isNaN(te)||(Z=te/2*5):Z=G/2*5;const ne=B.treecode||B.treeCode||"";let W=null;B.photoPath?W=B.photoPath.startsWith("/")?`/SchoolTreeMap${B.photoPath}`:B.photoPath:ne&&o&&(W=`${o}/${ne}.jpg`);const O=parseFloat(B.lat),U=parseFloat(B.lon);return{treeCode:ne,lat:O,lon:U,genus:B.genus||"",species:B.species||"",dbh:B.dbh||"",height:B.height||"",crownNS:G||null,crownEW:te||null,crownRadius:Z,color:A.color,shape:A.shape,photoUrl:W}}),M=k.filter(B=>isNaN(B.lat)||isNaN(B.lon)?(console.warn(`Skipping tree ${B.treeCode}: invalid coordinates (${B.lat}, ${B.lon})`),!1):B.lat<-90||B.lat>90?(console.warn(`Skipping tree ${B.treeCode}: latitude ${B.lat} out of range (-90 to 90)`),!1):B.lon<-180||B.lon>180?(console.warn(`Skipping tree ${B.treeCode}: longitude ${B.lon} out of range (-180 to 180)`),!1):!0);return M.length<k.length&&console.warn(`Filtered out ${k.length-M.length} trees with invalid coordinates`),{trees:M,genusStyles:u}}catch(l){throw console.error("Error loading tree data:",l),l}}const nu="/SchoolTreeMap/";function PL(e){const t=e.trim().split(`
`),o=k2(t[0]);return t.slice(1).map(l=>{const h=k2(l),m={};return o.forEach((g,u)=>{m[g]=h[u]||""}),m})}function k2(e){const t=[];let o="",l=!1;for(let h=0;h<e.length;h++){const m=e[h];m==='"'?l=!l:m===","&&!l?(t.push(o.trim()),o=""):o+=m}return t.push(o.trim()),t}async function _T(){try{const e=await fetch(`${nu}schools.csv`);if(!e.ok)throw new Error(`Failed to load schools: ${e.statusText}`);const t=await e.text();return PL(t).map(l=>({id:l.id,schoolName:l.school_name,logo:l.logo?`${nu}${l.logo}`:`${nu}logos/${l.id}.png`,address:l.address,dataUrl:`${nu}${l.data_file||`trees/${l.id}.csv`}`,boundaryUrl:`${nu}${l.boundary_file||`boundaries/${l.id}.geojson`}`,photosUrl:`${nu}${l.photos_folder||`photos/${l.id}`}`}))}catch(e){throw console.error("Error loading schools:",e),e}}function EL(){return new URLSearchParams(window.location.search).get("school")||"wildav"}async function ML(e){const o=(await _T()).find(l=>l.id===e);if(!o)throw new Error(`School not found: ${e}`);return o}async function AL(e){try{const t=await fetch(e);return t.ok?await t.json():(console.warn(`No boundary file found: ${e}`),null)}catch(t){return console.warn(`Error loading boundary: ${e}`,t),null}}function T2(...e){return e.reduce((t,o)=>o==null?t:function(...h){t.apply(this,h),o.apply(this,h)},()=>{})}const ir=ZR;function zL(e){return Gt("MuiSvgIcon",e)}Yt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const RL=e=>{const{color:t,fontSize:o,classes:l}=e,h={root:["root",t!=="inherit"&&`color${st(t)}`,`fontSize${st(o)}`]};return qt(h,zL,l)},LL=it("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="inherit"&&t[`color${st(o.color)}`],t[`fontSize${st(o.fontSize)}`]]}})(ir(({theme:e})=>{var t,o,l,h,m,g,u,k,M,B,D,A,Z,G;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(h=(t=e.transitions)==null?void 0:t.create)==null?void 0:h.call(t,"fill",{duration:(l=(o=(e.vars??e).transitions)==null?void 0:o.duration)==null?void 0:l.shorter}),variants:[{props:te=>!te.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((g=(m=e.typography)==null?void 0:m.pxToRem)==null?void 0:g.call(m,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((k=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:k.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((B=(M=e.typography)==null?void 0:M.pxToRem)==null?void 0:B.call(M,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,te])=>te&&te.main).map(([te])=>{var ne,W;return{props:{color:te},style:{color:(W=(ne=(e.vars??e).palette)==null?void 0:ne[te])==null?void 0:W.main}}}),{props:{color:"action"},style:{color:(A=(D=(e.vars??e).palette)==null?void 0:D.action)==null?void 0:A.active}},{props:{color:"disabled"},style:{color:(G=(Z=(e.vars??e).palette)==null?void 0:Z.action)==null?void 0:G.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),dx=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiSvgIcon"}),{children:h,className:m,color:g="inherit",component:u="svg",fontSize:k="medium",htmlColor:M,inheritViewBox:B=!1,titleAccess:D,viewBox:A="0 0 24 24",...Z}=l,G=J.isValidElement(h)&&h.type==="svg",te={...l,color:g,component:u,fontSize:k,instanceFontSize:t.fontSize,inheritViewBox:B,viewBox:A,hasSvgAsChild:G},ne={};B||(ne.viewBox=A);const W=RL(te);return V.jsxs(LL,{as:u,className:_t(W.root,m),focusable:"false",color:M,"aria-hidden":D?void 0:!0,role:D?"img":void 0,ref:o,...ne,...Z,...G&&h.props,ownerState:te,children:[G?h.props.children:h,D?V.jsx("title",{children:D}):null]})});dx.muiName="SvgIcon";function wn(e,t){function o(l,h){return V.jsx(dx,{"data-testid":void 0,ref:h,...l,children:e})}return o.muiName=dx.muiName,J.memo(J.forwardRef(o))}function N0(e,t=166){let o;function l(...h){const m=()=>{e.apply(this,h)};clearTimeout(o),o=setTimeout(m,t)}return l.clear=()=>{clearTimeout(o)},l}function Ai(e){return e&&e.ownerDocument||document}function Ri(e){return Ai(e).defaultView||window}function I2(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function P2(e){const{controlled:t,default:o,name:l,state:h="value"}=e,{current:m}=J.useRef(t!==void 0),[g,u]=J.useState(o),k=m?t:g,M=J.useCallback(B=>{m||u(B)},[]);return[k,M]}function bs(e){const t=J.useRef(e);return Yi(()=>{t.current=e}),J.useRef((...o)=>(0,t.current)(...o)).current}function Bn(...e){const t=J.useRef(void 0),o=J.useCallback(l=>{const h=e.map(m=>{if(m==null)return null;if(typeof m=="function"){const g=m,u=g(l);return typeof u=="function"?u:()=>{g(null)}}return m.current=l,()=>{m.current=null}});return()=>{h.forEach(m=>m==null?void 0:m())}},e);return J.useMemo(()=>e.every(l=>l==null)?null:l=>{t.current&&(t.current(),t.current=void 0),l!=null&&(t.current=o(l))},e)}function DL(e,t){const o=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&o>=65&&o<=90&&typeof t=="function"}function Zm(e,t){if(!e)return t;function o(g,u){const k={};return Object.keys(u).forEach(M=>{DL(M,u[M])&&typeof g[M]=="function"&&(k[M]=(...B)=>{g[M](...B),u[M](...B)})}),k}if(typeof e=="function"||typeof t=="function")return g=>{const u=typeof t=="function"?t(g):t,k=typeof e=="function"?e({...g,...u}):e,M=_t(g==null?void 0:g.className,u==null?void 0:u.className,k==null?void 0:k.className),B=o(k,u);return{...u,...k,...B,...!!M&&{className:M},...(u==null?void 0:u.style)&&(k==null?void 0:k.style)&&{style:{...u.style,...k.style}},...(u==null?void 0:u.sx)&&(k==null?void 0:k.sx)&&{sx:[...Array.isArray(u.sx)?u.sx:[u.sx],...Array.isArray(k.sx)?k.sx:[k.sx]]}}};const l=t,h=o(e,l),m=_t(l==null?void 0:l.className,e==null?void 0:e.className);return{...t,...e,...h,...!!m&&{className:m},...(l==null?void 0:l.style)&&(e==null?void 0:e.style)&&{style:{...l.style,...e.style}},...(l==null?void 0:l.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function vT(e,t){if(e==null)return{};var o={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;o[l]=e[l]}return o}function hx(e,t){return hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o},hx(e,t)}function xT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,hx(e,t)}const E2={disabled:!1},Xm=Mo.createContext(null);var BL=function(t){return t.scrollTop},Ph="unmounted",Bl="exited",Fl="entering",ou="entered",px="exiting",es=function(e){xT(t,e);function t(l,h){var m;m=e.call(this,l,h)||this;var g=h,u=g&&!g.isMounting?l.enter:l.appear,k;return m.appearStatus=null,l.in?u?(k=Bl,m.appearStatus=Fl):k=ou:l.unmountOnExit||l.mountOnEnter?k=Ph:k=Bl,m.state={status:k},m.nextCallback=null,m}t.getDerivedStateFromProps=function(h,m){var g=h.in;return g&&m.status===Ph?{status:Bl}:null};var o=t.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(h){var m=null;if(h!==this.props){var g=this.state.status;this.props.in?g!==Fl&&g!==ou&&(m=Fl):(g===Fl||g===ou)&&(m=px)}this.updateStatus(!1,m)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var h=this.props.timeout,m,g,u;return m=g=u=h,h!=null&&typeof h!="number"&&(m=h.exit,g=h.enter,u=h.appear!==void 0?h.appear:g),{exit:m,enter:g,appear:u}},o.updateStatus=function(h,m){if(h===void 0&&(h=!1),m!==null)if(this.cancelNextCallback(),m===Fl){if(this.props.unmountOnExit||this.props.mountOnEnter){var g=this.props.nodeRef?this.props.nodeRef.current:qf.findDOMNode(this);g&&BL(g)}this.performEnter(h)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bl&&this.setState({status:Ph})},o.performEnter=function(h){var m=this,g=this.props.enter,u=this.context?this.context.isMounting:h,k=this.props.nodeRef?[u]:[qf.findDOMNode(this),u],M=k[0],B=k[1],D=this.getTimeouts(),A=u?D.appear:D.enter;if(!h&&!g||E2.disabled){this.safeSetState({status:ou},function(){m.props.onEntered(M)});return}this.props.onEnter(M,B),this.safeSetState({status:Fl},function(){m.props.onEntering(M,B),m.onTransitionEnd(A,function(){m.safeSetState({status:ou},function(){m.props.onEntered(M,B)})})})},o.performExit=function(){var h=this,m=this.props.exit,g=this.getTimeouts(),u=this.props.nodeRef?void 0:qf.findDOMNode(this);if(!m||E2.disabled){this.safeSetState({status:Bl},function(){h.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:px},function(){h.props.onExiting(u),h.onTransitionEnd(g.exit,function(){h.safeSetState({status:Bl},function(){h.props.onExited(u)})})})},o.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(h,m){m=this.setNextCallback(m),this.setState(h,m)},o.setNextCallback=function(h){var m=this,g=!0;return this.nextCallback=function(u){g&&(g=!1,m.nextCallback=null,h(u))},this.nextCallback.cancel=function(){g=!1},this.nextCallback},o.onTransitionEnd=function(h,m){this.setNextCallback(m);var g=this.props.nodeRef?this.props.nodeRef.current:qf.findDOMNode(this),u=h==null&&!this.props.addEndListener;if(!g||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var k=this.props.nodeRef?[this.nextCallback]:[g,this.nextCallback],M=k[0],B=k[1];this.props.addEndListener(M,B)}h!=null&&setTimeout(this.nextCallback,h)},o.render=function(){var h=this.state.status;if(h===Ph)return null;var m=this.props,g=m.children;m.in,m.mountOnEnter,m.unmountOnExit,m.appear,m.enter,m.exit,m.timeout,m.addEndListener,m.onEnter,m.onEntering,m.onEntered,m.onExit,m.onExiting,m.onExited,m.nodeRef;var u=vT(m,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Mo.createElement(Xm.Provider,{value:null},typeof g=="function"?g(h,u):Mo.cloneElement(Mo.Children.only(g),u))},t}(Mo.Component);es.contextType=Xm;es.propTypes={};function iu(){}es.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:iu,onEntering:iu,onEntered:iu,onExit:iu,onExiting:iu,onExited:iu};es.UNMOUNTED=Ph;es.EXITED=Bl;es.ENTERING=Fl;es.ENTERED=ou;es.EXITING=px;function FL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j0(e,t){var o=function(m){return t&&J.isValidElement(m)?t(m):m},l=Object.create(null);return e&&J.Children.map(e,function(h){return h}).forEach(function(h){l[h.key]=o(h)}),l}function OL(e,t){e=e||{},t=t||{};function o(B){return B in t?t[B]:e[B]}var l=Object.create(null),h=[];for(var m in e)m in t?h.length&&(l[m]=h,h=[]):h.push(m);var g,u={};for(var k in t){if(l[k])for(g=0;g<l[k].length;g++){var M=l[k][g];u[l[k][g]]=o(M)}u[k]=o(k)}for(g=0;g<h.length;g++)u[h[g]]=o(h[g]);return u}function Wl(e,t,o){return o[t]!=null?o[t]:e.props[t]}function $L(e,t){return j0(e.children,function(o){return J.cloneElement(o,{onExited:t.bind(null,o),in:!0,appear:Wl(o,"appear",e),enter:Wl(o,"enter",e),exit:Wl(o,"exit",e)})})}function NL(e,t,o){var l=j0(e.children),h=OL(t,l);return Object.keys(h).forEach(function(m){var g=h[m];if(J.isValidElement(g)){var u=m in t,k=m in l,M=t[m],B=J.isValidElement(M)&&!M.props.in;k&&(!u||B)?h[m]=J.cloneElement(g,{onExited:o.bind(null,g),in:!0,exit:Wl(g,"exit",e),enter:Wl(g,"enter",e)}):!k&&u&&!B?h[m]=J.cloneElement(g,{in:!1}):k&&u&&J.isValidElement(M)&&(h[m]=J.cloneElement(g,{onExited:o.bind(null,g),in:M.props.in,exit:Wl(g,"exit",e),enter:Wl(g,"enter",e)}))}}),h}var jL=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},VL={component:"div",childFactory:function(t){return t}},V0=function(e){xT(t,e);function t(l,h){var m;m=e.call(this,l,h)||this;var g=m.handleExited.bind(FL(m));return m.state={contextValue:{isMounting:!0},handleExited:g,firstRender:!0},m}var o=t.prototype;return o.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},o.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(h,m){var g=m.children,u=m.handleExited,k=m.firstRender;return{children:k?$L(h,u):NL(h,g,u),firstRender:!1}},o.handleExited=function(h,m){var g=j0(this.props.children);h.key in g||(h.props.onExited&&h.props.onExited(m),this.mounted&&this.setState(function(u){var k=Wm({},u.children);return delete k[h.key],{children:k}}))},o.render=function(){var h=this.props,m=h.component,g=h.childFactory,u=vT(h,["component","childFactory"]),k=this.state.contextValue,M=jL(this.state.children).map(g);return delete u.appear,delete u.enter,delete u.exit,m===null?Mo.createElement(Xm.Provider,{value:k},M):Mo.createElement(Xm.Provider,{value:k},Mo.createElement(m,u,M))},t}(Mo.Component);V0.propTypes={};V0.defaultProps=VL;const M2={};function bT(e,t){const o=J.useRef(M2);return o.current===M2&&(o.current=e(t)),o}const UL=[];function WL(e){J.useEffect(e,UL)}class U0{constructor(){oh(this,"currentId",null);oh(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});oh(this,"disposeEffect",()=>this.clear)}static create(){return new U0}start(t,o){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,o()},t)}}function wT(){const e=bT(U0.create).current;return WL(e.disposeEffect),e}const W0=e=>e.scrollTop;function ec(e,t){const{timeout:o,easing:l,style:h={}}=e;return{duration:h.transitionDuration??(typeof o=="number"?o:o[t.mode]||0),easing:h.transitionTimingFunction??(typeof l=="object"?l[t.mode]:l),delay:h.transitionDelay}}function Fu(e){return typeof e=="string"}function ST(e,t,o){return e===void 0||Fu(e)?t:{...t,ownerState:{...t.ownerState,...o}}}function CT(e,t,o){return typeof e=="function"?e(t,o):e}function kT(e,t=[]){if(e===void 0)return{};const o={};return Object.keys(e).filter(l=>l.match(/^on[A-Z]/)&&typeof e[l]=="function"&&!t.includes(l)).forEach(l=>{o[l]=e[l]}),o}function A2(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(o=>!(o.match(/^on[A-Z]/)&&typeof e[o]=="function")).forEach(o=>{t[o]=e[o]}),t}function TT(e){const{getSlotProps:t,additionalProps:o,externalSlotProps:l,externalForwardedProps:h,className:m}=e;if(!t){const Z=_t(o==null?void 0:o.className,m,h==null?void 0:h.className,l==null?void 0:l.className),G={...o==null?void 0:o.style,...h==null?void 0:h.style,...l==null?void 0:l.style},te={...o,...h,...l};return Z.length>0&&(te.className=Z),Object.keys(G).length>0&&(te.style=G),{props:te,internalRef:void 0}}const g=kT({...h,...l}),u=A2(l),k=A2(h),M=t(g),B=_t(M==null?void 0:M.className,o==null?void 0:o.className,m,h==null?void 0:h.className,l==null?void 0:l.className),D={...M==null?void 0:M.style,...o==null?void 0:o.style,...h==null?void 0:h.style,...l==null?void 0:l.style},A={...M,...o,...k,...u};return B.length>0&&(A.className=B),Object.keys(D).length>0&&(A.style=D),{props:A,internalRef:M.ref}}function fr(e,t){const{className:o,elementType:l,ownerState:h,externalForwardedProps:m,internalForwardedProps:g,shouldForwardComponentProp:u=!1,...k}=t,{component:M,slots:B={[e]:void 0},slotProps:D={[e]:void 0},...A}=m,Z=B[e]||l,G=CT(D[e],h),{props:{component:te,...ne},internalRef:W}=TT({className:o,...k,externalForwardedProps:e==="root"?A:void 0,externalSlotProps:G}),O=Bn(W,G==null?void 0:G.ref,t.ref),U=e==="root"?te||M:te,K=ST(Z,{...e==="root"&&!M&&!B[e]&&g,...e!=="root"&&!B[e]&&g,...ne,...U&&!u&&{as:U},...U&&u&&{component:U},ref:O},h);return[Z,K]}function HL(e){return Gt("MuiPaper",e)}Yt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const GL=e=>{const{square:t,elevation:o,variant:l,classes:h}=e,m={root:["root",l,!t&&"rounded",l==="elevation"&&`elevation${o}`]};return qt(m,HL,h)},qL=it("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],!o.square&&t.rounded,o.variant==="elevation"&&t[`elevation${o.elevation}`]]}})(ir(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),nl=J.forwardRef(function(t,o){var Z;const l=Wt({props:t,name:"MuiPaper"}),h=Qo(),{className:m,component:g="div",elevation:u=1,square:k=!1,variant:M="elevation",...B}=l,D={...l,component:g,elevation:u,square:k,variant:M},A=GL(D);return V.jsx(qL,{as:g,ownerState:D,className:_t(A.root,m),ref:o,...B,style:{...M==="elevation"&&{"--Paper-shadow":(h.vars||h).shadows[u],...h.vars&&{"--Paper-overlay":(Z=h.vars.overlays)==null?void 0:Z[u]},...!h.vars&&h.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${hp("#fff",cx(u))}, ${hp("#fff",cx(u))})`}},...B.style}})});function Km(e){try{return e.matches(":focus-visible")}catch{}return!1}class Ym{constructor(){oh(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Ym}static use(){const t=bT(Ym.create).current,[o,l]=J.useState(!1);return t.shouldMount=o,t.setShouldMount=l,J.useEffect(t.mountEffect,[o]),t}mount(){return this.mounted||(this.mounted=XL(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var o;return(o=this.ref.current)==null?void 0:o.start(...t)})}stop(...t){this.mount().then(()=>{var o;return(o=this.ref.current)==null?void 0:o.stop(...t)})}pulsate(...t){this.mount().then(()=>{var o;return(o=this.ref.current)==null?void 0:o.pulsate(...t)})}}function ZL(){return Ym.use()}function XL(){let e,t;const o=new Promise((l,h)=>{e=l,t=h});return o.resolve=e,o.reject=t,o}function KL(e){const{className:t,classes:o,pulsate:l=!1,rippleX:h,rippleY:m,rippleSize:g,in:u,onExited:k,timeout:M}=e,[B,D]=J.useState(!1),A=_t(t,o.ripple,o.rippleVisible,l&&o.ripplePulsate),Z={width:g,height:g,top:-(g/2)+m,left:-(g/2)+h},G=_t(o.child,B&&o.childLeaving,l&&o.childPulsate);return!u&&!B&&D(!0),J.useEffect(()=>{if(!u&&k!=null){const te=setTimeout(k,M);return()=>{clearTimeout(te)}}},[k,u,M]),V.jsx("span",{className:A,style:Z,children:V.jsx("span",{className:G})})}const To=Yt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),fx=550,YL=80,JL=wp`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,QL=wp`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,eD=wp`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,tD=it("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),rD=it(KL,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${To.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${JL};
    animation-duration: ${fx}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${To.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${To.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${To.childLeaving} {
    opacity: 0;
    animation-name: ${QL};
    animation-duration: ${fx}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${To.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${eD};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,nD=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiTouchRipple"}),{center:h=!1,classes:m={},className:g,...u}=l,[k,M]=J.useState([]),B=J.useRef(0),D=J.useRef(null);J.useEffect(()=>{D.current&&(D.current(),D.current=null)},[k]);const A=J.useRef(!1),Z=wT(),G=J.useRef(null),te=J.useRef(null),ne=J.useCallback(K=>{const{pulsate:he,rippleX:ce,rippleY:fe,rippleSize:ge,cb:Te}=K;M(Ae=>[...Ae,V.jsx(rD,{classes:{ripple:_t(m.ripple,To.ripple),rippleVisible:_t(m.rippleVisible,To.rippleVisible),ripplePulsate:_t(m.ripplePulsate,To.ripplePulsate),child:_t(m.child,To.child),childLeaving:_t(m.childLeaving,To.childLeaving),childPulsate:_t(m.childPulsate,To.childPulsate)},timeout:fx,pulsate:he,rippleX:ce,rippleY:fe,rippleSize:ge},B.current)]),B.current+=1,D.current=Te},[m]),W=J.useCallback((K={},he={},ce=()=>{})=>{const{pulsate:fe=!1,center:ge=h||he.pulsate,fakeElement:Te=!1}=he;if((K==null?void 0:K.type)==="mousedown"&&A.current){A.current=!1;return}(K==null?void 0:K.type)==="touchstart"&&(A.current=!0);const Ae=Te?null:te.current,Re=Ae?Ae.getBoundingClientRect():{width:0,height:0,left:0,top:0};let X,xe,Ee;if(ge||K===void 0||K.clientX===0&&K.clientY===0||!K.clientX&&!K.touches)X=Math.round(Re.width/2),xe=Math.round(Re.height/2);else{const{clientX:Le,clientY:Be}=K.touches&&K.touches.length>0?K.touches[0]:K;X=Math.round(Le-Re.left),xe=Math.round(Be-Re.top)}if(ge)Ee=Math.sqrt((2*Re.width**2+Re.height**2)/3),Ee%2===0&&(Ee+=1);else{const Le=Math.max(Math.abs((Ae?Ae.clientWidth:0)-X),X)*2+2,Be=Math.max(Math.abs((Ae?Ae.clientHeight:0)-xe),xe)*2+2;Ee=Math.sqrt(Le**2+Be**2)}K!=null&&K.touches?G.current===null&&(G.current=()=>{ne({pulsate:fe,rippleX:X,rippleY:xe,rippleSize:Ee,cb:ce})},Z.start(YL,()=>{G.current&&(G.current(),G.current=null)})):ne({pulsate:fe,rippleX:X,rippleY:xe,rippleSize:Ee,cb:ce})},[h,ne,Z]),O=J.useCallback(()=>{W({},{pulsate:!0})},[W]),U=J.useCallback((K,he)=>{if(Z.clear(),(K==null?void 0:K.type)==="touchend"&&G.current){G.current(),G.current=null,Z.start(0,()=>{U(K,he)});return}G.current=null,M(ce=>ce.length>0?ce.slice(1):ce),D.current=he},[Z]);return J.useImperativeHandle(o,()=>({pulsate:O,start:W,stop:U}),[O,W,U]),V.jsx(tD,{className:_t(To.root,m.root,g),ref:te,...u,children:V.jsx(V0,{component:null,exit:!0,children:k})})});function iD(e){return Gt("MuiButtonBase",e)}const oD=Yt("MuiButtonBase",["root","disabled","focusVisible"]),sD=e=>{const{disabled:t,focusVisible:o,focusVisibleClassName:l,classes:h}=e,g=qt({root:["root",t&&"disabled",o&&"focusVisible"]},iD,h);return o&&l&&(g.root+=` ${l}`),g},aD=it("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${oD.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),qu=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiButtonBase"}),{action:h,centerRipple:m=!1,children:g,className:u,component:k="button",disabled:M=!1,disableRipple:B=!1,disableTouchRipple:D=!1,focusRipple:A=!1,focusVisibleClassName:Z,LinkComponent:G="a",onBlur:te,onClick:ne,onContextMenu:W,onDragLeave:O,onFocus:U,onFocusVisible:K,onKeyDown:he,onKeyUp:ce,onMouseDown:fe,onMouseLeave:ge,onMouseUp:Te,onTouchEnd:Ae,onTouchMove:Re,onTouchStart:X,tabIndex:xe=0,TouchRippleProps:Ee,touchRippleRef:Le,type:Be,...Ze}=l,ze=J.useRef(null),Fe=ZL(),Ge=Bn(Fe.ref,Le),[Xe,ct]=J.useState(!1);M&&Xe&&ct(!1),J.useImperativeHandle(h,()=>({focusVisible:()=>{ct(!0),ze.current.focus()}}),[]);const Tt=Fe.shouldMount&&!B&&!M;J.useEffect(()=>{Xe&&A&&!B&&Fe.pulsate()},[B,A,Xe,Fe]);const Ht=js(Fe,"start",fe,D),er=js(Fe,"stop",W,D),rr=js(Fe,"stop",O,D),Ye=js(Fe,"stop",Te,D),Jt=js(Fe,"stop",bt=>{Xe&&bt.preventDefault(),ge&&ge(bt)},D),zt=js(Fe,"start",X,D),ht=js(Fe,"stop",Ae,D),Rt=js(Fe,"stop",Re,D),Mt=js(Fe,"stop",bt=>{Km(bt.target)||ct(!1),te&&te(bt)},!1),Qt=bs(bt=>{ze.current||(ze.current=bt.currentTarget),Km(bt.target)&&(ct(!0),K&&K(bt)),U&&U(bt)}),kt=()=>{const bt=ze.current;return k&&k!=="button"&&!(bt.tagName==="A"&&bt.href)},Zt=bs(bt=>{A&&!bt.repeat&&Xe&&bt.key===" "&&Fe.stop(bt,()=>{Fe.start(bt)}),bt.target===bt.currentTarget&&kt()&&bt.key===" "&&bt.preventDefault(),he&&he(bt),bt.target===bt.currentTarget&&kt()&&bt.key==="Enter"&&!M&&(bt.preventDefault(),ne&&ne(bt))}),Ie=bs(bt=>{A&&bt.key===" "&&Xe&&!bt.defaultPrevented&&Fe.stop(bt,()=>{Fe.pulsate(bt)}),ce&&ce(bt),ne&&bt.target===bt.currentTarget&&kt()&&bt.key===" "&&!bt.defaultPrevented&&ne(bt)});let hr=k;hr==="button"&&(Ze.href||Ze.to)&&(hr=G);const _r={};if(hr==="button"){const bt=!!Ze.formAction;_r.type=Be===void 0&&!bt?"button":Be,_r.disabled=M}else!Ze.href&&!Ze.to&&(_r.role="button"),M&&(_r["aria-disabled"]=M);const Bt=Bn(o,ze),or={...l,centerRipple:m,component:k,disabled:M,disableRipple:B,disableTouchRipple:D,focusRipple:A,tabIndex:xe,focusVisible:Xe},Sr=sD(or);return V.jsxs(aD,{as:hr,className:_t(Sr.root,u),ownerState:or,onBlur:Mt,onClick:ne,onContextMenu:er,onFocus:Qt,onKeyDown:Zt,onKeyUp:Ie,onMouseDown:Ht,onMouseLeave:Jt,onMouseUp:Ye,onDragLeave:rr,onTouchEnd:ht,onTouchMove:Rt,onTouchStart:zt,ref:Bt,tabIndex:M?-1:xe,type:Be,..._r,...Ze,children:[g,Tt?V.jsx(nD,{ref:Ge,center:m,...Ee}):null]})});function js(e,t,o,l=!1){return bs(h=>(o&&o(h),l||e[t](h),!0))}function lD(e){return typeof e.main=="string"}function cD(e,t=[]){if(!lD(e))return!1;for(const o of t)if(!e.hasOwnProperty(o)||typeof e[o]!="string")return!1;return!0}function ii(e=[]){return([,t])=>t&&cD(t,e)}function uD(e){return Gt("MuiAlert",e)}const z2=Yt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function dD(e){return Gt("MuiCircularProgress",e)}Yt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Wo=44,mx=wp`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,gx=wp`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,hD=typeof mx!="string"?k0`
        animation: ${mx} 1.4s linear infinite;
      `:null,pD=typeof gx!="string"?k0`
        animation: ${gx} 1.4s ease-in-out infinite;
      `:null,fD=e=>{const{classes:t,variant:o,color:l,disableShrink:h}=e,m={root:["root",o,`color${st(l)}`],svg:["svg"],track:["track"],circle:["circle",`circle${st(o)}`,h&&"circleDisableShrink"]};return qt(m,dD,t)},mD=it("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`color${st(o.color)}`]]}})(ir(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:hD||{animation:`${mx} 1.4s linear infinite`}},...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),gD=it("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),yD=it("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.circle,t[`circle${st(o.variant)}`],o.disableShrink&&t.circleDisableShrink]}})(ir(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:pD||{animation:`${gx} 1.4s ease-in-out infinite`}}]}))),_D=it("circle",{name:"MuiCircularProgress",slot:"Track"})(ir(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),Tp=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiCircularProgress"}),{className:h,color:m="primary",disableShrink:g=!1,enableTrackSlot:u=!1,size:k=40,style:M,thickness:B=3.6,value:D=0,variant:A="indeterminate",...Z}=l,G={...l,color:m,disableShrink:g,size:k,thickness:B,value:D,variant:A,enableTrackSlot:u},te=fD(G),ne={},W={},O={};if(A==="determinate"){const U=2*Math.PI*((Wo-B)/2);ne.strokeDasharray=U.toFixed(3),O["aria-valuenow"]=Math.round(D),ne.strokeDashoffset=`${((100-D)/100*U).toFixed(3)}px`,W.transform="rotate(-90deg)"}return V.jsx(mD,{className:_t(te.root,h),style:{width:k,height:k,...W,...M},ownerState:G,ref:o,role:"progressbar",...O,...Z,children:V.jsxs(gD,{className:te.svg,ownerState:G,viewBox:`${Wo/2} ${Wo/2} ${Wo} ${Wo}`,children:[u?V.jsx(_D,{className:te.track,ownerState:G,cx:Wo,cy:Wo,r:(Wo-B)/2,fill:"none",strokeWidth:B,"aria-hidden":"true"}):null,V.jsx(yD,{className:te.circle,style:ne,ownerState:G,cx:Wo,cy:Wo,r:(Wo-B)/2,fill:"none",strokeWidth:B})]})})});function vD(e){return Gt("MuiIconButton",e)}const R2=Yt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),xD=e=>{const{classes:t,disabled:o,color:l,edge:h,size:m,loading:g}=e,u={root:["root",g&&"loading",o&&"disabled",l!=="default"&&`color${st(l)}`,h&&`edge${st(h)}`,`size${st(m)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return qt(u,vD,t)},bD=it(qu,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.loading&&t.loading,o.color!=="default"&&t[`color${st(o.color)}`],o.edge&&t[`edge${st(o.edge)}`],t[`size${st(o.size)}`]]}})(ir(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),ir(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${R2.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${R2.loading}`]:{color:"transparent"}}))),wD=it("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Jg=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiIconButton"}),{edge:h=!1,children:m,className:g,color:u="default",disabled:k=!1,disableFocusRipple:M=!1,size:B="medium",id:D,loading:A=null,loadingIndicator:Z,...G}=l,te=Hu(D),ne=Z??V.jsx(Tp,{"aria-labelledby":te,color:"inherit",size:16}),W={...l,edge:h,color:u,disabled:k,disableFocusRipple:M,loading:A,loadingIndicator:ne,size:B},O=xD(W);return V.jsxs(bD,{id:A?te:D,className:_t(O.root,g),centerRipple:!0,focusRipple:!M,disabled:k||A,ref:o,...G,ownerState:W,children:[typeof A=="boolean"&&V.jsx("span",{className:O.loadingWrapper,style:{display:"contents"},children:V.jsx(wD,{className:O.loadingIndicator,ownerState:W,children:A&&ne})}),m]})}),SD=wn(V.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),CD=wn(V.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),kD=wn(V.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),TD=wn(V.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),ID=wn(V.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),PD=e=>{const{variant:t,color:o,severity:l,classes:h}=e,m={root:["root",`color${st(o||l)}`,`${t}${st(o||l)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return qt(m,uD,h)},ED=it(nl,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`${o.variant}${st(o.color||o.severity)}`]]}})(ir(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,o=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(ii(["light"])).map(([l])=>({props:{colorSeverity:l,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${l}Color`]:t(e.palette[l].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${l}StandardBg`]:o(e.palette[l].light,.9),[`& .${z2.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette[l].main}}})),...Object.entries(e.palette).filter(ii(["light"])).map(([l])=>({props:{colorSeverity:l,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${l}Color`]:t(e.palette[l].light,.6),border:`1px solid ${(e.vars||e).palette[l].light}`,[`& .${z2.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette[l].main}}})),...Object.entries(e.palette).filter(ii(["dark"])).map(([l])=>({props:{colorSeverity:l,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${l}FilledColor`],backgroundColor:e.vars.palette.Alert[`${l}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[l].dark:e.palette[l].main,color:e.palette.getContrastText(e.palette[l].main)}}}))]}})),MD=it("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AD=it("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),zD=it("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),L2={success:V.jsx(SD,{fontSize:"inherit"}),warning:V.jsx(CD,{fontSize:"inherit"}),error:V.jsx(kD,{fontSize:"inherit"}),info:V.jsx(TD,{fontSize:"inherit"})},RD=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiAlert"}),{action:h,children:m,className:g,closeText:u="Close",color:k,components:M={},componentsProps:B={},icon:D,iconMapping:A=L2,onClose:Z,role:G="alert",severity:te="success",slotProps:ne={},slots:W={},variant:O="standard",...U}=l,K={...l,color:k,severity:te,variant:O,colorSeverity:k||te},he=PD(K),ce={slots:{closeButton:M.CloseButton,closeIcon:M.CloseIcon,...W},slotProps:{...B,...ne}},[fe,ge]=fr("root",{ref:o,shouldForwardComponentProp:!0,className:_t(he.root,g),elementType:ED,externalForwardedProps:{...ce,...U},ownerState:K,additionalProps:{role:G,elevation:0}}),[Te,Ae]=fr("icon",{className:he.icon,elementType:MD,externalForwardedProps:ce,ownerState:K}),[Re,X]=fr("message",{className:he.message,elementType:AD,externalForwardedProps:ce,ownerState:K}),[xe,Ee]=fr("action",{className:he.action,elementType:zD,externalForwardedProps:ce,ownerState:K}),[Le,Be]=fr("closeButton",{elementType:Jg,externalForwardedProps:ce,ownerState:K}),[Ze,ze]=fr("closeIcon",{elementType:ID,externalForwardedProps:ce,ownerState:K});return V.jsxs(fe,{...ge,children:[D!==!1?V.jsx(Te,{...Ae,children:D||A[te]||L2[te]}):null,V.jsx(Re,{...X,children:m}),h!=null?V.jsx(xe,{...Ee,children:h}):null,h==null&&Z?V.jsx(xe,{...Ee,children:V.jsx(Le,{size:"small","aria-label":u,title:u,color:"inherit",onClick:Z,...Be,children:V.jsx(Ze,{fontSize:"small",...ze})})}):null]})});function LD(e){return Gt("MuiTypography",e)}const D2=Yt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),DD={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},BD=vL(),FD=e=>{const{align:t,gutterBottom:o,noWrap:l,paragraph:h,variant:m,classes:g}=e,u={root:["root",m,e.align!=="inherit"&&`align${st(t)}`,o&&"gutterBottom",l&&"noWrap",h&&"paragraph"]};return qt(u,LD,g)},OD=it("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.variant&&t[o.variant],o.align!=="inherit"&&t[`align${st(o.align)}`],o.noWrap&&t.noWrap,o.gutterBottom&&t.gutterBottom,o.paragraph&&t.paragraph]}})(ir(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([o,l])=>o!=="inherit"&&l&&typeof l=="object").map(([o,l])=>({props:{variant:o},style:l})),...Object.entries(e.palette).filter(ii()).map(([o])=>({props:{color:o},style:{color:(e.vars||e).palette[o].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,o])=>typeof o=="string").map(([o])=>({props:{color:`text${st(o)}`},style:{color:(e.vars||e).palette.text[o]}})),{props:({ownerState:o})=>o.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:o})=>o.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:o})=>o.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:o})=>o.paragraph,style:{marginBottom:16}}]}})),B2={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ut=J.forwardRef(function(t,o){const{color:l,...h}=Wt({props:t,name:"MuiTypography"}),m=!DD[l],g=BD({...h,...m&&{color:l}}),{align:u="inherit",className:k,component:M,gutterBottom:B=!1,noWrap:D=!1,paragraph:A=!1,variant:Z="body1",variantMapping:G=B2,...te}=g,ne={...g,align:u,color:l,className:k,component:M,gutterBottom:B,noWrap:D,paragraph:A,variant:Z,variantMapping:G},W=M||(A?"p":G[Z]||B2[Z])||"span",O=FD(ne);return V.jsx(OD,{as:W,ref:o,className:_t(O.root,k),...te,ownerState:ne,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...te.style}})});function $D(e){return Gt("MuiAppBar",e)}Yt("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const ND=e=>{const{color:t,position:o,classes:l}=e,h={root:["root",`color${st(t)}`,`position${st(o)}`]};return qt(h,$D,l)},F2=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,jD=it(nl,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`position${st(o.position)}`],t[`color${st(o.color)}`]]}})(ir(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(ii(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?F2(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?F2(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),VD=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiAppBar"}),{className:h,color:m="primary",enableColorOnDark:g=!1,position:u="fixed",...k}=l,M={...l,color:m,position:u,enableColorOnDark:g},B=ND(M);return V.jsx(jD,{square:!0,component:"header",ownerState:M,elevation:4,className:_t(B.root,h,u==="fixed"&&"mui-fixed"),ref:o,...k})});function UD(e){var D;const{elementType:t,externalSlotProps:o,ownerState:l,skipResolvingSlotProps:h=!1,...m}=e,g=h?{}:CT(o,l),{props:u,internalRef:k}=TT({...m,externalSlotProps:g}),M=Bn(k,g==null?void 0:g.ref,(D=e.additionalProps)==null?void 0:D.ref);return ST(t,{...u,ref:M},l)}function Zu(e){var t;return parseInt(J.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function WD(e){return typeof e=="function"?e():e}const HD=J.forwardRef(function(t,o){const{children:l,container:h,disablePortal:m=!1}=t,[g,u]=J.useState(null),k=Bn(J.isValidElement(l)?Zu(l):null,o);if(Yi(()=>{m||u(WD(h)||document.body)},[h,m]),Yi(()=>{if(g&&!m)return I2(o,g),()=>{I2(o,null)}},[o,g,m]),m){if(J.isValidElement(l)){const M={ref:k};return J.cloneElement(l,M)}return l}return g&&ap.createPortal(l,g)});function Yf(e){return parseInt(e,10)||0}const GD={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function qD(e){for(const t in e)return!1;return!0}function O2(e){return qD(e)||e.outerHeightStyle===0&&!e.overflowing}const ZD=J.forwardRef(function(t,o){const{onChange:l,maxRows:h,minRows:m=1,style:g,value:u,...k}=t,{current:M}=J.useRef(u!=null),B=J.useRef(null),D=Bn(o,B),A=J.useRef(null),Z=J.useRef(null),G=J.useCallback(()=>{const U=B.current,K=Z.current;if(!U||!K)return;const ce=Ri(U).getComputedStyle(U);if(ce.width==="0px")return{outerHeightStyle:0,overflowing:!1};K.style.width=ce.width,K.value=U.value||t.placeholder||"x",K.value.slice(-1)===`
`&&(K.value+=" ");const fe=ce.boxSizing,ge=Yf(ce.paddingBottom)+Yf(ce.paddingTop),Te=Yf(ce.borderBottomWidth)+Yf(ce.borderTopWidth),Ae=K.scrollHeight;K.value="x";const Re=K.scrollHeight;let X=Ae;m&&(X=Math.max(Number(m)*Re,X)),h&&(X=Math.min(Number(h)*Re,X)),X=Math.max(X,Re);const xe=X+(fe==="border-box"?ge+Te:0),Ee=Math.abs(X-Ae)<=1;return{outerHeightStyle:xe,overflowing:Ee}},[h,m,t.placeholder]),te=bs(()=>{const U=B.current,K=G();if(!U||!K||O2(K))return!1;const he=K.outerHeightStyle;return A.current!=null&&A.current!==he}),ne=J.useCallback(()=>{const U=B.current,K=G();if(!U||!K||O2(K))return;const he=K.outerHeightStyle;A.current!==he&&(A.current=he,U.style.height=`${he}px`),U.style.overflow=K.overflowing?"hidden":""},[G]),W=J.useRef(-1);Yi(()=>{const U=N0(ne),K=B==null?void 0:B.current;if(!K)return;const he=Ri(K);he.addEventListener("resize",U);let ce;return typeof ResizeObserver<"u"&&(ce=new ResizeObserver(()=>{te()&&(ce.unobserve(K),cancelAnimationFrame(W.current),ne(),W.current=requestAnimationFrame(()=>{ce.observe(K)}))}),ce.observe(K)),()=>{U.clear(),cancelAnimationFrame(W.current),he.removeEventListener("resize",U),ce&&ce.disconnect()}},[G,ne,te]),Yi(()=>{ne()});const O=U=>{M||ne();const K=U.target,he=K.value.length,ce=K.value.endsWith(`
`),fe=K.selectionStart===he;ce&&fe&&K.setSelectionRange(he,he),l&&l(U)};return V.jsxs(J.Fragment,{children:[V.jsx("textarea",{value:u,onChange:O,ref:D,rows:m,style:g,...k}),V.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:Z,tabIndex:-1,style:{...GD.shadow,...g,paddingTop:0,paddingBottom:0}})]})});function Xu({props:e,states:t,muiFormControl:o}){return t.reduce((l,h)=>(l[h]=e[h],o&&typeof e[h]>"u"&&(l[h]=o[h]),l),{})}const H0=J.createContext(void 0);function Ku(){return J.useContext(H0)}function $2(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Jm(e,t=!1){return e&&($2(e.value)&&e.value!==""||t&&$2(e.defaultValue)&&e.defaultValue!=="")}function XD(e){return e.startAdornment}function KD(e){return Gt("MuiInputBase",e)}const Ou=Yt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var N2;const Qg=(e,t)=>{const{ownerState:o}=e;return[t.root,o.formControl&&t.formControl,o.startAdornment&&t.adornedStart,o.endAdornment&&t.adornedEnd,o.error&&t.error,o.size==="small"&&t.sizeSmall,o.multiline&&t.multiline,o.color&&t[`color${st(o.color)}`],o.fullWidth&&t.fullWidth,o.hiddenLabel&&t.hiddenLabel]},ey=(e,t)=>{const{ownerState:o}=e;return[t.input,o.size==="small"&&t.inputSizeSmall,o.multiline&&t.inputMultiline,o.type==="search"&&t.inputTypeSearch,o.startAdornment&&t.inputAdornedStart,o.endAdornment&&t.inputAdornedEnd,o.hiddenLabel&&t.inputHiddenLabel]},YD=e=>{const{classes:t,color:o,disabled:l,error:h,endAdornment:m,focused:g,formControl:u,fullWidth:k,hiddenLabel:M,multiline:B,readOnly:D,size:A,startAdornment:Z,type:G}=e,te={root:["root",`color${st(o)}`,l&&"disabled",h&&"error",k&&"fullWidth",g&&"focused",u&&"formControl",A&&A!=="medium"&&`size${st(A)}`,B&&"multiline",Z&&"adornedStart",m&&"adornedEnd",M&&"hiddenLabel",D&&"readOnly"],input:["input",l&&"disabled",G==="search"&&"inputTypeSearch",B&&"inputMultiline",A==="small"&&"inputSizeSmall",M&&"inputHiddenLabel",Z&&"inputAdornedStart",m&&"inputAdornedEnd",D&&"readOnly"]};return qt(te,KD,t)},ty=it("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Qg})(ir(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ou.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:o})=>t.multiline&&o==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),ry=it("input",{name:"MuiInputBase",slot:"Input",overridesResolver:ey})(ir(({theme:e})=>{const t=e.palette.mode==="light",o={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},l={opacity:"0 !important"},h=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ou.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":h,"&:focus::-moz-placeholder":h,"&:focus::-ms-input-placeholder":h},[`&.${Ou.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:m})=>!m.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:m})=>m.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),j2=$0({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),G0=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiInputBase"}),{"aria-describedby":h,autoComplete:m,autoFocus:g,className:u,color:k,components:M={},componentsProps:B={},defaultValue:D,disabled:A,disableInjectingGlobalStyles:Z,endAdornment:G,error:te,fullWidth:ne=!1,id:W,inputComponent:O="input",inputProps:U={},inputRef:K,margin:he,maxRows:ce,minRows:fe,multiline:ge=!1,name:Te,onBlur:Ae,onChange:Re,onClick:X,onFocus:xe,onKeyDown:Ee,onKeyUp:Le,placeholder:Be,readOnly:Ze,renderSuffix:ze,rows:Fe,size:Ge,slotProps:Xe={},slots:ct={},startAdornment:Tt,type:Ht="text",value:er,...rr}=l,Ye=U.value!=null?U.value:er,{current:Jt}=J.useRef(Ye!=null),zt=J.useRef(),ht=J.useCallback(Ft=>{},[]),Rt=Bn(zt,K,U.ref,ht),[Mt,Qt]=J.useState(!1),kt=Ku(),Zt=Xu({props:l,muiFormControl:kt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Zt.focused=kt?kt.focused:Mt,J.useEffect(()=>{!kt&&A&&Mt&&(Qt(!1),Ae&&Ae())},[kt,A,Mt,Ae]);const Ie=kt&&kt.onFilled,hr=kt&&kt.onEmpty,_r=J.useCallback(Ft=>{Jm(Ft)?Ie&&Ie():hr&&hr()},[Ie,hr]);Yi(()=>{Jt&&_r({value:Ye})},[Ye,_r,Jt]);const Bt=Ft=>{xe&&xe(Ft),U.onFocus&&U.onFocus(Ft),kt&&kt.onFocus?kt.onFocus(Ft):Qt(!0)},or=Ft=>{Ae&&Ae(Ft),U.onBlur&&U.onBlur(Ft),kt&&kt.onBlur?kt.onBlur(Ft):Qt(!1)},Sr=(Ft,...Nr)=>{if(!Jt){const He=Ft.target||zt.current;if(He==null)throw new Error(Qs(1));_r({value:He.value})}U.onChange&&U.onChange(Ft,...Nr),Re&&Re(Ft,...Nr)};J.useEffect(()=>{_r(zt.current)},[]);const bt=Ft=>{zt.current&&Ft.currentTarget===Ft.target&&zt.current.focus(),X&&X(Ft)};let _n=O,Ir=U;ge&&_n==="input"&&(Fe?Ir={type:void 0,minRows:Fe,maxRows:Fe,...Ir}:Ir={type:void 0,maxRows:ce,minRows:fe,...Ir},_n=ZD);const un=Ft=>{_r(Ft.animationName==="mui-auto-fill-cancel"?zt.current:{value:"x"})};J.useEffect(()=>{kt&&kt.setAdornedStart(!!Tt)},[kt,Tt]);const En={...l,color:Zt.color||"primary",disabled:Zt.disabled,endAdornment:G,error:Zt.error,focused:Zt.focused,formControl:kt,fullWidth:ne,hiddenLabel:Zt.hiddenLabel,multiline:ge,size:Zt.size,startAdornment:Tt,type:Ht},Fn=YD(En),qe=ct.root||M.Root||ty,dn=Xe.root||B.root||{},dr=ct.input||M.Input||ry;return Ir={...Ir,...Xe.input??B.input},V.jsxs(J.Fragment,{children:[!Z&&typeof j2=="function"&&(N2||(N2=V.jsx(j2,{}))),V.jsxs(qe,{...dn,ref:o,onClick:bt,...rr,...!Fu(qe)&&{ownerState:{...En,...dn.ownerState}},className:_t(Fn.root,dn.className,u,Ze&&"MuiInputBase-readOnly"),children:[Tt,V.jsx(H0.Provider,{value:null,children:V.jsx(dr,{"aria-invalid":Zt.error,"aria-describedby":h,autoComplete:m,autoFocus:g,defaultValue:D,disabled:Zt.disabled,id:W,onAnimationStart:un,name:Te,placeholder:Be,readOnly:Ze,required:Zt.required,rows:Fe,value:Ye,onKeyDown:Ee,onKeyUp:Le,type:Ht,...Ir,...!Fu(dr)&&{as:_n,ownerState:{...En,...Ir.ownerState}},ref:Rt,className:_t(Fn.input,Ir.className,Ze&&"MuiInputBase-readOnly"),onBlur:or,onChange:Sr,onFocus:Bt})}),G,ze?ze({...Zt,startAdornment:Tt}):null]})]})});function JD(e){return Gt("MuiInput",e)}const gh={...Ou,...Yt("MuiInput",["root","underline","input"])};function QD(e){return Gt("MuiOutlinedInput",e)}const ds={...Ou,...Yt("MuiOutlinedInput",["root","notchedOutline","input"])};function e4(e){return Gt("MuiFilledInput",e)}const zl={...Ou,...Yt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},t4=wn(V.jsx("path",{d:"M7 10l5 5 5-5z"})),r4={entering:{opacity:1},entered:{opacity:1}},yx=J.forwardRef(function(t,o){const l=Qo(),h={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:m,appear:g=!0,children:u,easing:k,in:M,onEnter:B,onEntered:D,onEntering:A,onExit:Z,onExited:G,onExiting:te,style:ne,timeout:W=h,TransitionComponent:O=es,...U}=t,K=J.useRef(null),he=Bn(K,Zu(u),o),ce=Ee=>Le=>{if(Ee){const Be=K.current;Le===void 0?Ee(Be):Ee(Be,Le)}},fe=ce(A),ge=ce((Ee,Le)=>{W0(Ee);const Be=ec({style:ne,timeout:W,easing:k},{mode:"enter"});Ee.style.webkitTransition=l.transitions.create("opacity",Be),Ee.style.transition=l.transitions.create("opacity",Be),B&&B(Ee,Le)}),Te=ce(D),Ae=ce(te),Re=ce(Ee=>{const Le=ec({style:ne,timeout:W,easing:k},{mode:"exit"});Ee.style.webkitTransition=l.transitions.create("opacity",Le),Ee.style.transition=l.transitions.create("opacity",Le),Z&&Z(Ee)}),X=ce(G),xe=Ee=>{m&&m(K.current,Ee)};return V.jsx(O,{appear:g,in:M,nodeRef:K,onEnter:ge,onEntered:Te,onEntering:fe,onExit:Re,onExited:X,onExiting:Ae,addEndListener:xe,timeout:W,...U,children:(Ee,{ownerState:Le,...Be})=>J.cloneElement(u,{style:{opacity:0,visibility:Ee==="exited"&&!M?"hidden":void 0,...r4[Ee],...ne,...u.props.style},ref:he,...Be})})});function n4(e){return Gt("MuiBackdrop",e)}Yt("MuiBackdrop",["root","invisible"]);const i4=e=>{const{classes:t,invisible:o}=e;return qt({root:["root",o&&"invisible"]},n4,t)},o4=it("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),IT=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiBackdrop"}),{children:h,className:m,component:g="div",invisible:u=!1,open:k,components:M={},componentsProps:B={},slotProps:D={},slots:A={},TransitionComponent:Z,transitionDuration:G,...te}=l,ne={...l,component:g,invisible:u},W=i4(ne),O={transition:Z,root:M.Root,...A},U={...B,...D},K={component:g,slots:O,slotProps:U},[he,ce]=fr("root",{elementType:o4,externalForwardedProps:K,className:_t(W.root,m),ownerState:ne}),[fe,ge]=fr("transition",{elementType:yx,externalForwardedProps:K,ownerState:ne});return V.jsx(fe,{in:k,timeout:G,...te,...ge,children:V.jsx(he,{"aria-hidden":!0,...ce,classes:W,ref:o,children:h})})}),s4=Yt("MuiBox",["root"]),a4=Yg(),Kt=xR({themeId:Ko,defaultTheme:a4,defaultClassName:s4.root,generateClassName:Zk.generate});function l4(e){return Gt("MuiButton",e)}const Rl=Yt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),PT=J.createContext({}),ET=J.createContext(void 0),c4=e=>{const{color:t,disableElevation:o,fullWidth:l,size:h,variant:m,loading:g,loadingPosition:u,classes:k}=e,M={root:["root",g&&"loading",m,`${m}${st(t)}`,`size${st(h)}`,`${m}Size${st(h)}`,`color${st(t)}`,o&&"disableElevation",l&&"fullWidth",g&&`loadingPosition${st(u)}`],startIcon:["icon","startIcon",`iconSize${st(h)}`],endIcon:["icon","endIcon",`iconSize${st(h)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},B=qt(M,l4,k);return{...k,...B}},MT=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],u4=it(qu,{shouldForwardProp:e=>xi(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`${o.variant}${st(o.color)}`],t[`size${st(o.size)}`],t[`${o.variant}Size${st(o.size)}`],o.color==="inherit"&&t.colorInherit,o.disableElevation&&t.disableElevation,o.fullWidth&&t.fullWidth,o.loading&&t.loading]}})(ir(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],o=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Rl.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Rl.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Rl.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Rl.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(ii()).map(([l])=>({props:{color:l},style:{"--variant-textColor":(e.vars||e).palette[l].main,"--variant-outlinedColor":(e.vars||e).palette[l].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[l].main,.5),"--variant-containedColor":(e.vars||e).palette[l].contrastText,"--variant-containedBg":(e.vars||e).palette[l].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[l].dark,"--variant-textBg":e.alpha((e.vars||e).palette[l].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[l].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[l].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:o,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Rl.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Rl.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Rl.loading}`]:{color:"transparent"}}}]}})),d4=it("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.startIcon,o.loading&&t.startIconLoadingStart,t[`iconSize${st(o.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...MT]})),h4=it("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.endIcon,o.loading&&t.endIconLoadingEnd,t[`iconSize${st(o.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...MT]})),p4=it("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),V2=it("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Ro=J.forwardRef(function(t,o){const l=J.useContext(PT),h=J.useContext(ET),m=dp(l,t),g=Wt({props:m,name:"MuiButton"}),{children:u,color:k="primary",component:M="button",className:B,disabled:D=!1,disableElevation:A=!1,disableFocusRipple:Z=!1,endIcon:G,focusVisibleClassName:te,fullWidth:ne=!1,id:W,loading:O=null,loadingIndicator:U,loadingPosition:K="center",size:he="medium",startIcon:ce,type:fe,variant:ge="text",...Te}=g,Ae=Hu(W),Re=U??V.jsx(Tp,{"aria-labelledby":Ae,color:"inherit",size:16}),X={...g,color:k,component:M,disabled:D,disableElevation:A,disableFocusRipple:Z,fullWidth:ne,loading:O,loadingIndicator:Re,loadingPosition:K,size:he,type:fe,variant:ge},xe=c4(X),Ee=(ce||O&&K==="start")&&V.jsx(d4,{className:xe.startIcon,ownerState:X,children:ce||V.jsx(V2,{className:xe.loadingIconPlaceholder,ownerState:X})}),Le=(G||O&&K==="end")&&V.jsx(h4,{className:xe.endIcon,ownerState:X,children:G||V.jsx(V2,{className:xe.loadingIconPlaceholder,ownerState:X})}),Be=h||"",Ze=typeof O=="boolean"?V.jsx("span",{className:xe.loadingWrapper,style:{display:"contents"},children:O&&V.jsx(p4,{className:xe.loadingIndicator,ownerState:X,children:Re})}):null;return V.jsxs(u4,{ownerState:X,className:_t(l.className,xe.root,B,Be),component:M,disabled:D||O,focusRipple:!Z,focusVisibleClassName:_t(xe.focusVisible,te),ref:o,type:fe,id:O?Ae:W,...Te,classes:xe,children:[Ee,K!=="end"&&Ze,u,K==="end"&&Ze,Le]})});function f4(e){return J.Children.toArray(e).filter(t=>J.isValidElement(t))}function m4(e){return Gt("MuiButtonGroup",e)}const lr=Yt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),g4=(e,t)=>{const{ownerState:o}=e;return[{[`& .${lr.grouped}`]:t.grouped},{[`& .${lr.grouped}`]:t[`grouped${st(o.orientation)}`]},{[`& .${lr.grouped}`]:t[`grouped${st(o.variant)}`]},{[`& .${lr.grouped}`]:t[`grouped${st(o.variant)}${st(o.orientation)}`]},{[`& .${lr.grouped}`]:t[`grouped${st(o.variant)}${st(o.color)}`]},{[`& .${lr.firstButton}`]:t.firstButton},{[`& .${lr.lastButton}`]:t.lastButton},{[`& .${lr.middleButton}`]:t.middleButton},t.root,t[o.variant],o.disableElevation===!0&&t.disableElevation,o.fullWidth&&t.fullWidth,o.orientation==="vertical"&&t.vertical]},y4=e=>{const{classes:t,color:o,disabled:l,disableElevation:h,fullWidth:m,orientation:g,variant:u}=e,k={root:["root",u,g,m&&"fullWidth",h&&"disableElevation",`color${st(o)}`],grouped:["grouped",`grouped${st(g)}`,`grouped${st(u)}`,`grouped${st(u)}${st(g)}`,`grouped${st(u)}${st(o)}`,l&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return qt(k,m4,t)},_4=it("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:g4})(ir(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${lr.lastButton},& .${lr.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${lr.lastButton},& .${lr.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${lr.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${lr.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(ii()).flatMap(([t])=>[{props:{variant:"text",color:t},style:{[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[t].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${lr.lastButton},& .${lr.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${lr.lastButton},& .${lr.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${lr.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${lr.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(ii(["dark"])).map(([t])=>({props:{variant:"contained",color:t},style:{[`& .${lr.firstButton},& .${lr.middleButton}`]:{borderColor:(e.vars||e).palette[t].dark}}}))],[`& .${lr.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),v4=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiButtonGroup"}),{children:h,className:m,color:g="primary",component:u="div",disabled:k=!1,disableElevation:M=!1,disableFocusRipple:B=!1,disableRipple:D=!1,fullWidth:A=!1,orientation:Z="horizontal",size:G="medium",variant:te="outlined",...ne}=l,W={...l,color:g,component:u,disabled:k,disableElevation:M,disableFocusRipple:B,disableRipple:D,fullWidth:A,orientation:Z,size:G,variant:te},O=y4(W),U=J.useMemo(()=>({className:O.grouped,color:g,disabled:k,disableElevation:M,disableFocusRipple:B,disableRipple:D,fullWidth:A,size:G,variant:te}),[g,k,M,B,D,A,G,te,O.grouped]),K=f4(h),he=K.length,ce=fe=>{const ge=fe===0,Te=fe===he-1;return ge&&Te?"":ge?O.firstButton:Te?O.lastButton:O.middleButton};return V.jsx(_4,{as:u,role:"group",className:_t(O.root,m),ref:o,ownerState:W,...ne,children:V.jsx(PT.Provider,{value:U,children:K.map((fe,ge)=>V.jsx(ET.Provider,{value:ce(ge),children:fe},ge))})})});function x4(e){return Gt("MuiCard",e)}Yt("MuiCard",["root"]);const b4=e=>{const{classes:t}=e;return qt({root:["root"]},x4,t)},w4=it(nl,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),ql=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiCard"}),{className:h,raised:m=!1,...g}=l,u={...l,raised:m},k=b4(u);return V.jsx(w4,{className:_t(k.root,h),elevation:m?8:void 0,ref:o,ownerState:u,...g})});function S4(e){return Gt("MuiCardActionArea",e)}const Y_=Yt("MuiCardActionArea",["root","focusVisible","focusHighlight"]),C4=e=>{const{classes:t}=e;return qt({root:["root"],focusHighlight:["focusHighlight"]},S4,t)},k4=it(qu,{name:"MuiCardActionArea",slot:"Root"})(ir(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${Y_.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${Y_.focusVisible} .${Y_.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}}))),T4=it("span",{name:"MuiCardActionArea",slot:"FocusHighlight"})(ir(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}))),I4=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiCardActionArea"}),{children:h,className:m,focusVisibleClassName:g,slots:u={},slotProps:k={},...M}=l,B=l,D=C4(B),A={slots:u,slotProps:k},[Z,G]=fr("root",{elementType:k4,externalForwardedProps:{...A,...M},shouldForwardComponentProp:!0,ownerState:B,ref:o,className:_t(D.root,m),additionalProps:{focusVisibleClassName:_t(g,D.focusVisible)}}),[te,ne]=fr("focusHighlight",{elementType:T4,externalForwardedProps:A,ownerState:B,ref:o,className:D.focusHighlight});return V.jsxs(Z,{...G,children:[h,V.jsx(te,{...ne})]})});function P4(e){return Gt("MuiCardContent",e)}Yt("MuiCardContent",["root"]);const E4=e=>{const{classes:t}=e;return qt({root:["root"]},P4,t)},M4=it("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),$u=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiCardContent"}),{className:h,component:m="div",...g}=l,u={...l,component:m},k=E4(u);return V.jsx(M4,{as:m,className:_t(k.root,h),ownerState:u,ref:o,...g})}),U2=h5({createStyledComponent:it("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${st(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Wt({props:e,name:"MuiContainer"})});function AT(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function A4(e){const t=Ai(e);return t.body===e?Ri(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Vh(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function W2(e){return parseInt(Ri(e).getComputedStyle(e).paddingRight,10)||0}function z4(e){const o=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),l=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return o||l}function H2(e,t,o,l,h){const m=[t,o,...l];[].forEach.call(e.children,g=>{const u=!m.includes(g),k=!z4(g);u&&k&&Vh(g,h)})}function J_(e,t){let o=-1;return e.some((l,h)=>t(l)?(o=h,!0):!1),o}function R4(e,t){const o=[],l=e.container;if(!t.disableScrollLock){if(A4(l)){const g=AT(Ri(l));o.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${W2(l)+g}px`;const u=Ai(l).querySelectorAll(".mui-fixed");[].forEach.call(u,k=>{o.push({value:k.style.paddingRight,property:"padding-right",el:k}),k.style.paddingRight=`${W2(k)+g}px`})}let m;if(l.parentNode instanceof DocumentFragment)m=Ai(l).body;else{const g=l.parentElement,u=Ri(l);m=(g==null?void 0:g.nodeName)==="HTML"&&u.getComputedStyle(g).overflowY==="scroll"?g:l}o.push({value:m.style.overflow,property:"overflow",el:m},{value:m.style.overflowX,property:"overflow-x",el:m},{value:m.style.overflowY,property:"overflow-y",el:m}),m.style.overflow="hidden"}return()=>{o.forEach(({value:m,el:g,property:u})=>{m?g.style.setProperty(u,m):g.style.removeProperty(u)})}}function L4(e){const t=[];return[].forEach.call(e.children,o=>{o.getAttribute("aria-hidden")==="true"&&t.push(o)}),t}class D4{constructor(){this.modals=[],this.containers=[]}add(t,o){let l=this.modals.indexOf(t);if(l!==-1)return l;l=this.modals.length,this.modals.push(t),t.modalRef&&Vh(t.modalRef,!1);const h=L4(o);H2(o,t.mount,t.modalRef,h,!0);const m=J_(this.containers,g=>g.container===o);return m!==-1?(this.containers[m].modals.push(t),l):(this.containers.push({modals:[t],container:o,restore:null,hiddenSiblings:h}),l)}mount(t,o){const l=J_(this.containers,m=>m.modals.includes(t)),h=this.containers[l];h.restore||(h.restore=R4(h,o))}remove(t,o=!0){const l=this.modals.indexOf(t);if(l===-1)return l;const h=J_(this.containers,g=>g.modals.includes(t)),m=this.containers[h];if(m.modals.splice(m.modals.indexOf(t),1),this.modals.splice(l,1),m.modals.length===0)m.restore&&m.restore(),t.modalRef&&Vh(t.modalRef,o),H2(m.container,t.mount,t.modalRef,m.hiddenSiblings,!1),this.containers.splice(h,1);else{const g=m.modals[m.modals.length-1];g.modalRef&&Vh(g.modalRef,!1)}return l}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function Eh(e){var o;let t=e.activeElement;for(;((o=t==null?void 0:t.shadowRoot)==null?void 0:o.activeElement)!=null;)t=t.shadowRoot.activeElement;return t}const B4=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function F4(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function O4(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=l=>e.ownerDocument.querySelector(`input[type="radio"]${l}`);let o=t(`[name="${e.name}"]:checked`);return o||(o=t(`[name="${e.name}"]`)),o!==e}function $4(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||O4(e))}function N4(e){const t=[],o=[];return Array.from(e.querySelectorAll(B4)).forEach((l,h)=>{const m=F4(l);m===-1||!$4(l)||(m===0?t.push(l):o.push({documentOrder:h,tabIndex:m,node:l}))}),o.sort((l,h)=>l.tabIndex===h.tabIndex?l.documentOrder-h.documentOrder:l.tabIndex-h.tabIndex).map(l=>l.node).concat(t)}function j4(){return!0}function V4(e){const{children:t,disableAutoFocus:o=!1,disableEnforceFocus:l=!1,disableRestoreFocus:h=!1,getTabbable:m=N4,isEnabled:g=j4,open:u}=e,k=J.useRef(!1),M=J.useRef(null),B=J.useRef(null),D=J.useRef(null),A=J.useRef(null),Z=J.useRef(!1),G=J.useRef(null),te=Bn(Zu(t),G),ne=J.useRef(null);J.useEffect(()=>{!u||!G.current||(Z.current=!o)},[o,u]),J.useEffect(()=>{if(!u||!G.current)return;const U=Ai(G.current),K=Eh(U);return G.current.contains(K)||(G.current.hasAttribute("tabIndex")||G.current.setAttribute("tabIndex","-1"),Z.current&&G.current.focus()),()=>{h||(D.current&&D.current.focus&&(k.current=!0,D.current.focus()),D.current=null)}},[u]),J.useEffect(()=>{if(!u||!G.current)return;const U=Ai(G.current),K=Eh(U),he=ge=>{ne.current=ge,!(l||!g()||ge.key!=="Tab")&&K===G.current&&ge.shiftKey&&(k.current=!0,B.current&&B.current.focus())},ce=()=>{var Re,X;const ge=G.current;if(ge===null)return;const Te=Eh(U);if(!U.hasFocus()||!g()||k.current){k.current=!1;return}if(ge.contains(Te)||l&&Te!==M.current&&Te!==B.current)return;if(Te!==A.current)A.current=null;else if(A.current!==null)return;if(!Z.current)return;let Ae=[];if((Te===M.current||Te===B.current)&&(Ae=m(G.current)),Ae.length>0){const xe=!!((Re=ne.current)!=null&&Re.shiftKey&&((X=ne.current)==null?void 0:X.key)==="Tab"),Ee=Ae[0],Le=Ae[Ae.length-1];typeof Ee!="string"&&typeof Le!="string"&&(xe?Le.focus():Ee.focus())}else ge.focus()};U.addEventListener("focusin",ce),U.addEventListener("keydown",he,!0);const fe=setInterval(()=>{const ge=Eh(U);ge&&ge.tagName==="BODY"&&ce()},50);return()=>{clearInterval(fe),U.removeEventListener("focusin",ce),U.removeEventListener("keydown",he,!0)}},[o,l,h,g,u,m]);const W=U=>{D.current===null&&(D.current=U.relatedTarget),Z.current=!0,A.current=U.target;const K=t.props.onFocus;K&&K(U)},O=U=>{D.current===null&&(D.current=U.relatedTarget),Z.current=!0};return V.jsxs(J.Fragment,{children:[V.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:M,"data-testid":"sentinelStart"}),J.cloneElement(t,{ref:te,onFocus:W}),V.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:B,"data-testid":"sentinelEnd"})]})}function U4(e){return typeof e=="function"?e():e}function W4(e){return e?e.props.hasOwnProperty("in"):!1}const G2=()=>{},Jf=new D4;function H4(e){const{container:t,disableEscapeKeyDown:o=!1,disableScrollLock:l=!1,closeAfterTransition:h=!1,onTransitionEnter:m,onTransitionExited:g,children:u,onClose:k,open:M,rootRef:B}=e,D=J.useRef({}),A=J.useRef(null),Z=J.useRef(null),G=Bn(Z,B),[te,ne]=J.useState(!M),W=W4(u);let O=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(O=!1);const U=()=>Ai(A.current),K=()=>(D.current.modalRef=Z.current,D.current.mount=A.current,D.current),he=()=>{Jf.mount(K(),{disableScrollLock:l}),Z.current&&(Z.current.scrollTop=0)},ce=bs(()=>{const Le=U4(t)||U().body;Jf.add(K(),Le),Z.current&&he()}),fe=()=>Jf.isTopModal(K()),ge=bs(Le=>{A.current=Le,Le&&(M&&fe()?he():Z.current&&Vh(Z.current,O))}),Te=J.useCallback(()=>{Jf.remove(K(),O)},[O]);J.useEffect(()=>()=>{Te()},[Te]),J.useEffect(()=>{M?ce():(!W||!h)&&Te()},[M,Te,W,h,ce]);const Ae=Le=>Be=>{var Ze;(Ze=Le.onKeyDown)==null||Ze.call(Le,Be),!(Be.key!=="Escape"||Be.which===229||!fe())&&(o||(Be.stopPropagation(),k&&k(Be,"escapeKeyDown")))},Re=Le=>Be=>{var Ze;(Ze=Le.onClick)==null||Ze.call(Le,Be),Be.target===Be.currentTarget&&k&&k(Be,"backdropClick")};return{getRootProps:(Le={})=>{const Be=kT(e);delete Be.onTransitionEnter,delete Be.onTransitionExited;const Ze={...Be,...Le};return{role:"presentation",...Ze,onKeyDown:Ae(Ze),ref:G}},getBackdropProps:(Le={})=>{const Be=Le;return{"aria-hidden":!0,...Be,onClick:Re(Be),open:M}},getTransitionProps:()=>{const Le=()=>{ne(!1),m&&m()},Be=()=>{ne(!0),g&&g(),h&&Te()};return{onEnter:T2(Le,(u==null?void 0:u.props.onEnter)??G2),onExited:T2(Be,(u==null?void 0:u.props.onExited)??G2)}},rootRef:G,portalRef:ge,isTopModal:fe,exited:te,hasTransition:W}}function G4(e){return Gt("MuiModal",e)}Yt("MuiModal",["root","hidden","backdrop"]);const q4=e=>{const{open:t,exited:o,classes:l}=e;return qt({root:["root",!t&&o&&"hidden"],backdrop:["backdrop"]},G4,l)},Z4=it("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.open&&o.exited&&t.hidden]}})(ir(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),X4=it(IT,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),q0=J.forwardRef(function(t,o){const l=Wt({name:"MuiModal",props:t}),{BackdropComponent:h=X4,BackdropProps:m,classes:g,className:u,closeAfterTransition:k=!1,children:M,container:B,component:D,components:A={},componentsProps:Z={},disableAutoFocus:G=!1,disableEnforceFocus:te=!1,disableEscapeKeyDown:ne=!1,disablePortal:W=!1,disableRestoreFocus:O=!1,disableScrollLock:U=!1,hideBackdrop:K=!1,keepMounted:he=!1,onClose:ce,onTransitionEnter:fe,onTransitionExited:ge,open:Te,slotProps:Ae={},slots:Re={},theme:X,...xe}=l,Ee={...l,closeAfterTransition:k,disableAutoFocus:G,disableEnforceFocus:te,disableEscapeKeyDown:ne,disablePortal:W,disableRestoreFocus:O,disableScrollLock:U,hideBackdrop:K,keepMounted:he},{getRootProps:Le,getBackdropProps:Be,getTransitionProps:Ze,portalRef:ze,isTopModal:Fe,exited:Ge,hasTransition:Xe}=H4({...Ee,rootRef:o}),ct={...Ee,exited:Ge},Tt=q4(ct),Ht={};if(M.props.tabIndex===void 0&&(Ht.tabIndex="-1"),Xe){const{onEnter:ht,onExited:Rt}=Ze();Ht.onEnter=ht,Ht.onExited=Rt}const er={slots:{root:A.Root,backdrop:A.Backdrop,...Re},slotProps:{...Z,...Ae}},[rr,Ye]=fr("root",{ref:o,elementType:Z4,externalForwardedProps:{...er,...xe,component:D},getSlotProps:Le,ownerState:ct,className:_t(u,Tt==null?void 0:Tt.root,!ct.open&&ct.exited&&(Tt==null?void 0:Tt.hidden))}),[Jt,zt]=fr("backdrop",{ref:m==null?void 0:m.ref,elementType:h,externalForwardedProps:er,shouldForwardComponentProp:!0,additionalProps:m,getSlotProps:ht=>Be({...ht,onClick:Rt=>{ht!=null&&ht.onClick&&ht.onClick(Rt)}}),className:_t(m==null?void 0:m.className,Tt==null?void 0:Tt.backdrop),ownerState:ct});return!he&&!Te&&(!Xe||Ge)?null:V.jsx(HD,{ref:ze,container:B,disablePortal:W,children:V.jsxs(rr,{...Ye,children:[!K&&h?V.jsx(Jt,{...zt}):null,V.jsx(V4,{disableEnforceFocus:te,disableAutoFocus:G,disableRestoreFocus:O,isEnabled:Fe,open:Te,children:J.cloneElement(M,Ht)})]})})});function K4(e){return Gt("MuiDialog",e)}const Q_=Yt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),zT=J.createContext({}),Y4=it(IT,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),J4=e=>{const{classes:t,scroll:o,maxWidth:l,fullWidth:h,fullScreen:m}=e,g={root:["root"],container:["container",`scroll${st(o)}`],paper:["paper",`paperScroll${st(o)}`,`paperWidth${st(String(l))}`,h&&"paperFullWidth",m&&"paperFullScreen"]};return qt(g,K4,t)},Q4=it(q0,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),e3=it("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.container,t[`scroll${st(o.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),t3=it(nl,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`scrollPaper${st(o.scroll)}`],t[`paperWidth${st(String(o.maxWidth))}`],o.fullWidth&&t.paperFullWidth,o.fullScreen&&t.paperFullScreen]}})(ir(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${Q_.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${Q_.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Q_.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),r3=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiDialog"}),h=Qo(),m={enter:h.transitions.duration.enteringScreen,exit:h.transitions.duration.leavingScreen},{"aria-describedby":g,"aria-labelledby":u,"aria-modal":k=!0,BackdropComponent:M,BackdropProps:B,children:D,className:A,disableEscapeKeyDown:Z=!1,fullScreen:G=!1,fullWidth:te=!1,maxWidth:ne="sm",onClick:W,onClose:O,open:U,PaperComponent:K=nl,PaperProps:he={},scroll:ce="paper",slots:fe={},slotProps:ge={},TransitionComponent:Te=yx,transitionDuration:Ae=m,TransitionProps:Re,...X}=l,xe={...l,disableEscapeKeyDown:Z,fullScreen:G,fullWidth:te,maxWidth:ne,scroll:ce},Ee=J4(xe),Le=J.useRef(),Be=Qt=>{Le.current=Qt.target===Qt.currentTarget},Ze=Qt=>{W&&W(Qt),Le.current&&(Le.current=null,O&&O(Qt,"backdropClick"))},ze=Hu(u),Fe=J.useMemo(()=>({titleId:ze}),[ze]),Ge={transition:Te,...fe},Xe={transition:Re,paper:he,backdrop:B,...ge},ct={slots:Ge,slotProps:Xe},[Tt,Ht]=fr("root",{elementType:Q4,shouldForwardComponentProp:!0,externalForwardedProps:ct,ownerState:xe,className:_t(Ee.root,A),ref:o}),[er,rr]=fr("backdrop",{elementType:Y4,shouldForwardComponentProp:!0,externalForwardedProps:ct,ownerState:xe}),[Ye,Jt]=fr("paper",{elementType:t3,shouldForwardComponentProp:!0,externalForwardedProps:ct,ownerState:xe,className:_t(Ee.paper,he.className)}),[zt,ht]=fr("container",{elementType:e3,externalForwardedProps:ct,ownerState:xe,className:Ee.container}),[Rt,Mt]=fr("transition",{elementType:yx,externalForwardedProps:ct,ownerState:xe,additionalProps:{appear:!0,in:U,timeout:Ae,role:"presentation"}});return V.jsx(Tt,{closeAfterTransition:!0,slots:{backdrop:er},slotProps:{backdrop:{transitionDuration:Ae,as:M,...rr}},disableEscapeKeyDown:Z,onClose:O,open:U,onClick:Ze,...Ht,...X,children:V.jsx(Rt,{...Mt,children:V.jsx(zt,{onMouseDown:Be,...ht,children:V.jsx(Ye,{as:K,elevation:24,role:"dialog","aria-describedby":g,"aria-labelledby":ze,"aria-modal":k,...Jt,children:V.jsx(zT.Provider,{value:Fe,children:D})})})})})});function n3(e){return Gt("MuiDialogActions",e)}Yt("MuiDialogActions",["root","spacing"]);const i3=e=>{const{classes:t,disableSpacing:o}=e;return qt({root:["root",!o&&"spacing"]},n3,t)},o3=it("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),s3=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiDialogActions"}),{className:h,disableSpacing:m=!1,...g}=l,u={...l,disableSpacing:m},k=i3(u);return V.jsx(o3,{className:_t(k.root,h),ownerState:u,ref:o,...g})});function a3(e){return Gt("MuiDialogContent",e)}Yt("MuiDialogContent",["root","dividers"]);function l3(e){return Gt("MuiDialogTitle",e)}const c3=Yt("MuiDialogTitle",["root"]),u3=e=>{const{classes:t,dividers:o}=e;return qt({root:["root",o&&"dividers"]},a3,t)},d3=it("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})(ir(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${c3.root} + &`]:{paddingTop:0}}}]}))),h3=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiDialogContent"}),{className:h,dividers:m=!1,...g}=l,u={...l,dividers:m},k=u3(u);return V.jsx(d3,{className:_t(k.root,h),ownerState:u,ref:o,...g})}),p3=e=>{const{classes:t}=e;return qt({root:["root"]},l3,t)},f3=it(Ut,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),m3=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiDialogTitle"}),{className:h,id:m,...g}=l,u=l,k=p3(u),{titleId:M=m}=J.useContext(zT);return V.jsx(f3,{component:"h2",className:_t(k.root,h),ownerState:u,ref:o,variant:"h6",id:m??M,...g})});function g3(e){return Gt("MuiDivider",e)}const q2=Yt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),y3=e=>{const{absolute:t,children:o,classes:l,flexItem:h,light:m,orientation:g,textAlign:u,variant:k}=e;return qt({root:["root",t&&"absolute",k,m&&"light",g==="vertical"&&"vertical",h&&"flexItem",o&&"withChildren",o&&g==="vertical"&&"withChildrenVertical",u==="right"&&g!=="vertical"&&"textAlignRight",u==="left"&&g!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",g==="vertical"&&"wrapperVertical"]},g3,l)},_3=it("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.absolute&&t.absolute,t[o.variant],o.light&&t.light,o.orientation==="vertical"&&t.vertical,o.flexItem&&t.flexItem,o.children&&t.withChildren,o.children&&o.orientation==="vertical"&&t.withChildrenVertical,o.textAlign==="right"&&o.orientation!=="vertical"&&t.textAlignRight,o.textAlign==="left"&&o.orientation!=="vertical"&&t.textAlignLeft]}})(ir(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),v3=it("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.wrapper,o.orientation==="vertical"&&t.wrapperVertical]}})(ir(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),Hs=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiDivider"}),{absolute:h=!1,children:m,className:g,orientation:u="horizontal",component:k=m||u==="vertical"?"div":"hr",flexItem:M=!1,light:B=!1,role:D=k!=="hr"?"separator":void 0,textAlign:A="center",variant:Z="fullWidth",...G}=l,te={...l,absolute:h,component:k,flexItem:M,light:B,orientation:u,role:D,textAlign:A,variant:Z},ne=y3(te);return V.jsx(_3,{as:k,className:_t(ne.root,g),role:D,ref:o,ownerState:te,"aria-orientation":D==="separator"&&(k!=="hr"||u==="vertical")?u:void 0,...G,children:m?V.jsx(v3,{className:ne.wrapper,ownerState:te,children:m}):null})});Hs&&(Hs.muiSkipListHighlight=!0);function x3(e,t,o){const l=t.getBoundingClientRect(),h=o&&o.getBoundingClientRect(),m=Ri(t);let g;if(t.fakeTransform)g=t.fakeTransform;else{const M=m.getComputedStyle(t);g=M.getPropertyValue("-webkit-transform")||M.getPropertyValue("transform")}let u=0,k=0;if(g&&g!=="none"&&typeof g=="string"){const M=g.split("(")[1].split(")")[0].split(",");u=parseInt(M[4],10),k=parseInt(M[5],10)}return e==="left"?h?`translateX(${h.right+u-l.left}px)`:`translateX(${m.innerWidth+u-l.left}px)`:e==="right"?h?`translateX(-${l.right-h.left-u}px)`:`translateX(-${l.left+l.width-u}px)`:e==="up"?h?`translateY(${h.bottom+k-l.top}px)`:`translateY(${m.innerHeight+k-l.top}px)`:h?`translateY(-${l.top-h.top+l.height-k}px)`:`translateY(-${l.top+l.height-k}px)`}function b3(e){return typeof e=="function"?e():e}function Qf(e,t,o){const l=b3(o),h=x3(e,t,l);h&&(t.style.webkitTransform=h,t.style.transform=h)}const w3=J.forwardRef(function(t,o){const l=Qo(),h={enter:l.transitions.easing.easeOut,exit:l.transitions.easing.sharp},m={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:g,appear:u=!0,children:k,container:M,direction:B="down",easing:D=h,in:A,onEnter:Z,onEntered:G,onEntering:te,onExit:ne,onExited:W,onExiting:O,style:U,timeout:K=m,TransitionComponent:he=es,...ce}=t,fe=J.useRef(null),ge=Bn(Zu(k),fe,o),Te=ze=>Fe=>{ze&&(Fe===void 0?ze(fe.current):ze(fe.current,Fe))},Ae=Te((ze,Fe)=>{Qf(B,ze,M),W0(ze),Z&&Z(ze,Fe)}),Re=Te((ze,Fe)=>{const Ge=ec({timeout:K,style:U,easing:D},{mode:"enter"});ze.style.webkitTransition=l.transitions.create("-webkit-transform",{...Ge}),ze.style.transition=l.transitions.create("transform",{...Ge}),ze.style.webkitTransform="none",ze.style.transform="none",te&&te(ze,Fe)}),X=Te(G),xe=Te(O),Ee=Te(ze=>{const Fe=ec({timeout:K,style:U,easing:D},{mode:"exit"});ze.style.webkitTransition=l.transitions.create("-webkit-transform",Fe),ze.style.transition=l.transitions.create("transform",Fe),Qf(B,ze,M),ne&&ne(ze)}),Le=Te(ze=>{ze.style.webkitTransition="",ze.style.transition="",W&&W(ze)}),Be=ze=>{g&&g(fe.current,ze)},Ze=J.useCallback(()=>{fe.current&&Qf(B,fe.current,M)},[B,M]);return J.useEffect(()=>{if(A||B==="down"||B==="right")return;const ze=N0(()=>{fe.current&&Qf(B,fe.current,M)}),Fe=Ri(fe.current);return Fe.addEventListener("resize",ze),()=>{ze.clear(),Fe.removeEventListener("resize",ze)}},[B,A,M]),J.useEffect(()=>{A||Ze()},[A,Ze]),V.jsx(he,{nodeRef:fe,onEnter:Ae,onEntered:X,onEntering:Re,onExit:Ee,onExited:Le,onExiting:xe,addEndListener:Be,appear:u,in:A,timeout:K,...ce,children:(ze,{ownerState:Fe,...Ge})=>J.cloneElement(k,{ref:ge,style:{visibility:ze==="exited"&&!A?"hidden":void 0,...U,...k.props.style},...Ge})})});function S3(e){return Gt("MuiDrawer",e)}Yt("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const RT=(e,t)=>{const{ownerState:o}=e;return[t.root,(o.variant==="permanent"||o.variant==="persistent")&&t.docked,t.modal]},C3=e=>{const{classes:t,anchor:o,variant:l}=e,h={root:["root",`anchor${st(o)}`],docked:[(l==="permanent"||l==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${st(o)}`,l!=="temporary"&&`paperAnchorDocked${st(o)}`]};return qt(h,S3,t)},k3=it(q0,{name:"MuiDrawer",slot:"Root",overridesResolver:RT})(ir(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),T3=it("div",{shouldForwardProp:xi,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:RT})({flex:"0 0 auto"}),I3=it(nl,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`paperAnchor${st(o.anchor)}`],o.variant!=="temporary"&&t[`paperAnchorDocked${st(o.anchor)}`]]}})(ir(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),LT={left:"right",right:"left",top:"down",bottom:"up"};function Ol(e){return["left","right"].includes(e)}function Mh({direction:e},t){return e==="rtl"&&Ol(t)?LT[t]:t}const DT=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiDrawer"}),h=Qo(),m=oT(),g={enter:h.transitions.duration.enteringScreen,exit:h.transitions.duration.leavingScreen},{anchor:u="left",BackdropProps:k,children:M,className:B,elevation:D=16,hideBackdrop:A=!1,ModalProps:{BackdropProps:Z,...G}={},onClose:te,open:ne=!1,PaperProps:W={},SlideProps:O,TransitionComponent:U,transitionDuration:K=g,variant:he="temporary",slots:ce={},slotProps:fe={},...ge}=l,Te=J.useRef(!1);J.useEffect(()=>{Te.current=!0},[]);const Ae=Mh({direction:m?"rtl":"ltr"},u),X={...l,anchor:u,elevation:D,open:ne,variant:he,...ge},xe=C3(X),Ee={slots:{transition:U,...ce},slotProps:{paper:W,transition:O,...fe,backdrop:Zm(fe.backdrop||{...k,...Z},{transitionDuration:K})}},[Le,Be]=fr("root",{ref:o,elementType:k3,className:_t(xe.root,xe.modal,B),shouldForwardComponentProp:!0,ownerState:X,externalForwardedProps:{...Ee,...ge,...G},additionalProps:{open:ne,onClose:te,hideBackdrop:A,slots:{backdrop:Ee.slots.backdrop},slotProps:{backdrop:Ee.slotProps.backdrop}}}),[Ze,ze]=fr("paper",{elementType:I3,shouldForwardComponentProp:!0,className:_t(xe.paper,W.className),ownerState:X,externalForwardedProps:Ee,additionalProps:{elevation:he==="temporary"?D:0,square:!0,...he==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[Fe,Ge]=fr("docked",{elementType:T3,ref:o,className:_t(xe.root,xe.docked,B),ownerState:X,externalForwardedProps:Ee,additionalProps:ge}),[Xe,ct]=fr("transition",{elementType:w3,ownerState:X,externalForwardedProps:Ee,additionalProps:{in:ne,direction:LT[Ae],timeout:K,appear:Te.current}}),Tt=V.jsx(Ze,{...ze,children:M});if(he==="permanent")return V.jsx(Fe,{...Ge,children:Tt});const Ht=V.jsx(Xe,{...ct,children:Tt});return he==="persistent"?V.jsx(Fe,{...Ge,children:Ht}):V.jsx(Le,{...Be,children:Ht})});function P3(e){return Gt("MuiFab",e)}const Z2=Yt("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),E3=e=>{const{color:t,variant:o,classes:l,size:h}=e,m={root:["root",o,`size${st(h)}`,t==="inherit"?"colorInherit":t]},g=qt(m,P3,l);return{...l,...g}},M3=it(qu,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>xi(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`size${st(o.size)}`],o.color==="inherit"&&t.colorInherit,t[st(o.size)],t[o.color]]}})(ir(({theme:e})=>{var t,o;return{...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:(o=(t=e.palette).getContrastText)==null?void 0:o.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${Z2.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),ir(({theme:e})=>({variants:[...Object.entries(e.palette).filter(ii(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),ir(({theme:e})=>({[`&.${Z2.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),ev=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiFab"}),{children:h,className:m,color:g="default",component:u="button",disabled:k=!1,disableFocusRipple:M=!1,focusVisibleClassName:B,size:D="large",variant:A="circular",...Z}=l,G={...l,color:g,component:u,disabled:k,disableFocusRipple:M,size:D,variant:A},te=E3(G);return V.jsx(M3,{className:_t(te.root,m),component:u,disabled:k,focusRipple:!M,focusVisibleClassName:_t(te.focusVisible,B),ownerState:G,ref:o,...Z,classes:te,children:h})}),A3=e=>{const{classes:t,disableUnderline:o,startAdornment:l,endAdornment:h,size:m,hiddenLabel:g,multiline:u}=e,k={root:["root",!o&&"underline",l&&"adornedStart",h&&"adornedEnd",m==="small"&&`size${st(m)}`,g&&"hiddenLabel",u&&"multiline"],input:["input"]},M=qt(k,e4,t);return{...t,...M}},z3=it(ty,{shouldForwardProp:e=>xi(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...Qg(e,t),!o.disableUnderline&&t.underline]}})(ir(({theme:e})=>{const t=e.palette.mode==="light",o=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",l=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",h=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",m=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:l,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:h,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:l}},[`&.${zl.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:l},[`&.${zl.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:m},variants:[{props:({ownerState:g})=>!g.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${zl.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${zl.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${zl.disabled}, .${zl.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${zl.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(ii()).map(([g])=>{var u;return{props:{disableUnderline:!1,color:g},style:{"&::after":{borderBottom:`2px solid ${(u=(e.vars||e).palette[g])==null?void 0:u.main}`}}}}),{props:({ownerState:g})=>g.startAdornment,style:{paddingLeft:12}},{props:({ownerState:g})=>g.endAdornment,style:{paddingRight:12}},{props:({ownerState:g})=>g.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:g,size:u})=>g.multiline&&u==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:g})=>g.multiline&&g.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:g})=>g.multiline&&g.hiddenLabel&&g.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),R3=it(ry,{name:"MuiFilledInput",slot:"Input",overridesResolver:ey})(ir(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),Z0=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiFilledInput"}),{disableUnderline:h=!1,components:m={},componentsProps:g,fullWidth:u=!1,hiddenLabel:k,inputComponent:M="input",multiline:B=!1,slotProps:D,slots:A={},type:Z="text",...G}=l,te={...l,disableUnderline:h,fullWidth:u,inputComponent:M,multiline:B,type:Z},ne=A3(l),W={root:{ownerState:te},input:{ownerState:te}},O=D??g?Zn(W,D??g):W,U=A.root??m.Root??z3,K=A.input??m.Input??R3;return V.jsx(G0,{slots:{root:U,input:K},slotProps:O,fullWidth:u,inputComponent:M,multiline:B,ref:o,type:Z,...G,classes:ne})});Z0.muiName="Input";function L3(e){return Gt("MuiFormControl",e)}Yt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const D3=e=>{const{classes:t,margin:o,fullWidth:l}=e,h={root:["root",o!=="none"&&`margin${st(o)}`,l&&"fullWidth"]};return qt(h,L3,t)},B3=it("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`margin${st(o.margin)}`],o.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),BT=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiFormControl"}),{children:h,className:m,color:g="primary",component:u="div",disabled:k=!1,error:M=!1,focused:B,fullWidth:D=!1,hiddenLabel:A=!1,margin:Z="none",required:G=!1,size:te="medium",variant:ne="outlined",...W}=l,O={...l,color:g,component:u,disabled:k,error:M,fullWidth:D,hiddenLabel:A,margin:Z,required:G,size:te,variant:ne},U=D3(O),[K,he]=J.useState(()=>{let Le=!1;return h&&J.Children.forEach(h,Be=>{if(!jh(Be,["Input","Select"]))return;const Ze=jh(Be,["Select"])?Be.props.input:Be;Ze&&XD(Ze.props)&&(Le=!0)}),Le}),[ce,fe]=J.useState(()=>{let Le=!1;return h&&J.Children.forEach(h,Be=>{jh(Be,["Input","Select"])&&(Jm(Be.props,!0)||Jm(Be.props.inputProps,!0))&&(Le=!0)}),Le}),[ge,Te]=J.useState(!1);k&&ge&&Te(!1);const Ae=B!==void 0&&!k?B:ge;let Re;J.useRef(!1);const X=J.useCallback(()=>{fe(!0)},[]),xe=J.useCallback(()=>{fe(!1)},[]),Ee=J.useMemo(()=>({adornedStart:K,setAdornedStart:he,color:g,disabled:k,error:M,filled:ce,focused:Ae,fullWidth:D,hiddenLabel:A,size:te,onBlur:()=>{Te(!1)},onFocus:()=>{Te(!0)},onEmpty:xe,onFilled:X,registerEffect:Re,required:G,variant:ne}),[K,g,k,M,ce,Ae,D,A,Re,xe,X,G,te,ne]);return V.jsx(H0.Provider,{value:Ee,children:V.jsx(B3,{as:u,ownerState:O,className:_t(U.root,m),ref:o,...W,children:h})})});function F3(e){return Gt("MuiFormHelperText",e)}const X2=Yt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var K2;const O3=e=>{const{classes:t,contained:o,size:l,disabled:h,error:m,filled:g,focused:u,required:k}=e,M={root:["root",h&&"disabled",m&&"error",l&&`size${st(l)}`,o&&"contained",u&&"focused",g&&"filled",k&&"required"]};return qt(M,F3,t)},$3=it("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.size&&t[`size${st(o.size)}`],o.contained&&t.contained,o.filled&&t.filled]}})(ir(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${X2.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${X2.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),N3=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiFormHelperText"}),{children:h,className:m,component:g="p",disabled:u,error:k,filled:M,focused:B,margin:D,required:A,variant:Z,...G}=l,te=Ku(),ne=Xu({props:l,muiFormControl:te,states:["variant","size","disabled","error","filled","focused","required"]}),W={...l,component:g,contained:ne.variant==="filled"||ne.variant==="outlined",variant:ne.variant,size:ne.size,disabled:ne.disabled,error:ne.error,filled:ne.filled,focused:ne.focused,required:ne.required};delete W.ownerState;const O=O3(W);return V.jsx($3,{as:g,className:_t(O.root,m),ref:o,...G,ownerState:W,children:h===" "?K2||(K2=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):h})});function j3(e){return Gt("MuiFormLabel",e)}const Uh=Yt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),V3=e=>{const{classes:t,color:o,focused:l,disabled:h,error:m,filled:g,required:u}=e,k={root:["root",`color${st(o)}`,h&&"disabled",m&&"error",g&&"filled",l&&"focused",u&&"required"],asterisk:["asterisk",m&&"error"]};return qt(k,j3,t)},U3=it("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color==="secondary"&&t.colorSecondary,o.filled&&t.filled]}})(ir(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{color:t},style:{[`&.${Uh.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${Uh.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Uh.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),W3=it("span",{name:"MuiFormLabel",slot:"Asterisk"})(ir(({theme:e})=>({[`&.${Uh.error}`]:{color:(e.vars||e).palette.error.main}}))),H3=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiFormLabel"}),{children:h,className:m,color:g,component:u="label",disabled:k,error:M,filled:B,focused:D,required:A,...Z}=l,G=Ku(),te=Xu({props:l,muiFormControl:G,states:["color","required","focused","disabled","error","filled"]}),ne={...l,color:te.color||"primary",component:u,disabled:te.disabled,error:te.error,filled:te.filled,focused:te.focused,required:te.required},W=V3(ne);return V.jsxs(U3,{as:u,ownerState:ne,className:_t(W.root,m),ref:o,...Z,children:[h,te.required&&V.jsxs(W3,{ownerState:ne,"aria-hidden":!0,className:W.asterisk,children:["","*"]})]})}),yh=P5({createStyledComponent:it("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>Wt({props:e,name:"MuiGrid"}),useTheme:Qo});function _x(e){return`scale(${e}, ${e**2})`}const G3={entering:{opacity:1,transform:_x(1)},entered:{opacity:1,transform:"none"}},tv=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),vx=J.forwardRef(function(t,o){const{addEndListener:l,appear:h=!0,children:m,easing:g,in:u,onEnter:k,onEntered:M,onEntering:B,onExit:D,onExited:A,onExiting:Z,style:G,timeout:te="auto",TransitionComponent:ne=es,...W}=t,O=wT(),U=J.useRef(),K=Qo(),he=J.useRef(null),ce=Bn(he,Zu(m),o),fe=Le=>Be=>{if(Le){const Ze=he.current;Be===void 0?Le(Ze):Le(Ze,Be)}},ge=fe(B),Te=fe((Le,Be)=>{W0(Le);const{duration:Ze,delay:ze,easing:Fe}=ec({style:G,timeout:te,easing:g},{mode:"enter"});let Ge;te==="auto"?(Ge=K.transitions.getAutoHeightDuration(Le.clientHeight),U.current=Ge):Ge=Ze,Le.style.transition=[K.transitions.create("opacity",{duration:Ge,delay:ze}),K.transitions.create("transform",{duration:tv?Ge:Ge*.666,delay:ze,easing:Fe})].join(","),k&&k(Le,Be)}),Ae=fe(M),Re=fe(Z),X=fe(Le=>{const{duration:Be,delay:Ze,easing:ze}=ec({style:G,timeout:te,easing:g},{mode:"exit"});let Fe;te==="auto"?(Fe=K.transitions.getAutoHeightDuration(Le.clientHeight),U.current=Fe):Fe=Be,Le.style.transition=[K.transitions.create("opacity",{duration:Fe,delay:Ze}),K.transitions.create("transform",{duration:tv?Fe:Fe*.666,delay:tv?Ze:Ze||Fe*.333,easing:ze})].join(","),Le.style.opacity=0,Le.style.transform=_x(.75),D&&D(Le)}),xe=fe(A),Ee=Le=>{te==="auto"&&O.start(U.current||0,Le),l&&l(he.current,Le)};return V.jsx(ne,{appear:h,in:u,nodeRef:he,onEnter:Te,onEntered:Ae,onEntering:ge,onExit:X,onExited:xe,onExiting:Re,addEndListener:Ee,timeout:te==="auto"?null:te,...W,children:(Le,{ownerState:Be,...Ze})=>J.cloneElement(m,{style:{opacity:0,transform:_x(.75),visibility:Le==="exited"&&!u?"hidden":void 0,...G3[Le],...G,...m.props.style},ref:ce,...Ze})})});vx&&(vx.muiSupportAuto=!0);const q3=e=>{const{classes:t,disableUnderline:o}=e,h=qt({root:["root",!o&&"underline"],input:["input"]},JD,t);return{...t,...h}},Z3=it(ty,{shouldForwardProp:e=>xi(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...Qg(e,t),!o.disableUnderline&&t.underline]}})(ir(({theme:e})=>{let o=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(o=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:l})=>l.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:l})=>!l.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${gh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${gh.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${gh.disabled}, .${gh.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${o}`}},[`&.${gh.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(ii()).map(([l])=>({props:{color:l,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[l].main}`}}}))]}})),X3=it(ry,{name:"MuiInput",slot:"Input",overridesResolver:ey})({}),X0=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiInput"}),{disableUnderline:h=!1,components:m={},componentsProps:g,fullWidth:u=!1,inputComponent:k="input",multiline:M=!1,slotProps:B,slots:D={},type:A="text",...Z}=l,G=q3(l),ne={root:{ownerState:{disableUnderline:h}}},W=B??g?Zn(B??g,ne):ne,O=D.root??m.Root??Z3,U=D.input??m.Input??X3;return V.jsx(G0,{slots:{root:O,input:U},slotProps:W,fullWidth:u,inputComponent:k,multiline:M,ref:o,type:A,...Z,classes:G})});X0.muiName="Input";function K3(e){return Gt("MuiInputLabel",e)}Yt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Y3=e=>{const{classes:t,formControl:o,size:l,shrink:h,disableAnimation:m,variant:g,required:u}=e,k={root:["root",o&&"formControl",!m&&"animated",h&&"shrink",l&&l!=="medium"&&`size${st(l)}`,g],asterisk:[u&&"asterisk"]},M=qt(k,K3,t);return{...t,...M}},J3=it(H3,{shouldForwardProp:e=>xi(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${Uh.asterisk}`]:t.asterisk},t.root,o.formControl&&t.formControl,o.size==="small"&&t.sizeSmall,o.shrink&&t.shrink,!o.disableAnimation&&t.animated,o.focused&&t.focused,t[o.variant]]}})(ir(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:o})=>t==="filled"&&o.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:o,size:l})=>t==="filled"&&o.shrink&&l==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:o})=>t==="outlined"&&o.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),FT=J.forwardRef(function(t,o){const l=Wt({name:"MuiInputLabel",props:t}),{disableAnimation:h=!1,margin:m,shrink:g,variant:u,className:k,...M}=l,B=Ku();let D=g;typeof D>"u"&&B&&(D=B.filled||B.focused||B.adornedStart);const A=Xu({props:l,muiFormControl:B,states:["size","variant","required","focused"]}),Z={...l,disableAnimation:h,formControl:B,shrink:D,size:A.size,variant:A.variant,required:A.required,focused:A.focused},G=Y3(Z);return V.jsx(J3,{"data-shrink":D,ref:o,className:_t(G.root,k),...M,ownerState:Z,classes:G})});function Q3(e){return Gt("MuiLink",e)}const eB=Yt("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),tB=({theme:e,ownerState:t})=>{const o=t.color;if("colorSpace"in e&&e.colorSpace){const m=ms(e,`palette.${o}.main`)||ms(e,`palette.${o}`)||t.color;return e.alpha(m,.4)}const l=ms(e,`palette.${o}.main`,!1)||ms(e,`palette.${o}`,!1)||t.color,h=ms(e,`palette.${o}.mainChannel`)||ms(e,`palette.${o}Channel`);return"vars"in e&&h?`rgba(${h} / 0.4)`:hp(l,.4)},Y2={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},rB=e=>{const{classes:t,component:o,focusVisible:l,underline:h}=e,m={root:["root",`underline${st(h)}`,o==="button"&&"button",l&&"focusVisible"]};return qt(m,Q3,t)},nB=it(Ut,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`underline${st(o.underline)}`],o.component==="button"&&t.button]}})(ir(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:o})=>t==="always"&&o.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:t,ownerState:o})=>t==="always"&&o.color==="inherit",style:e.colorSpace?{textDecorationColor:e.alpha("currentColor",.4)}:null},...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${eB.focusVisible}`]:{outline:"auto"}}}]}))),iB=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiLink"}),h=Qo(),{className:m,color:g="primary",component:u="a",onBlur:k,onFocus:M,TypographyClasses:B,underline:D="always",variant:A="inherit",sx:Z,...G}=l,[te,ne]=J.useState(!1),W=he=>{Km(he.target)||ne(!1),k&&k(he)},O=he=>{Km(he.target)&&ne(!0),M&&M(he)},U={...l,color:g,component:u,focusVisible:te,underline:D,variant:A},K=rB(U);return V.jsx(nB,{color:g,className:_t(K.root,m),classes:B,component:u,onBlur:W,onFocus:O,ref:o,ownerState:U,variant:A,...G,sx:[...Y2[g]===void 0?[{color:g}]:[],...Array.isArray(Z)?Z:[Z]],style:{...G.style,...D==="always"&&g!=="inherit"&&!Y2[g]&&{"--Link-underlineColor":tB({theme:h,ownerState:U})}}})}),ws=J.createContext({});function oB(e){return Gt("MuiList",e)}Yt("MuiList",["root","padding","dense","subheader"]);const sB=e=>{const{classes:t,disablePadding:o,dense:l,subheader:h}=e;return qt({root:["root",!o&&"padding",l&&"dense",h&&"subheader"]},oB,t)},aB=it("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disablePadding&&t.padding,o.dense&&t.dense,o.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),K0=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiList"}),{children:h,className:m,component:g="ul",dense:u=!1,disablePadding:k=!1,subheader:M,...B}=l,D=J.useMemo(()=>({dense:u}),[u]),A={...l,component:g,dense:u,disablePadding:k},Z=sB(A);return V.jsx(ws.Provider,{value:D,children:V.jsxs(aB,{as:g,className:_t(Z.root,m),ref:o,ownerState:A,...B,children:[M,h]})})});function lB(e){return Gt("MuiListItem",e)}Yt("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function cB(e){return Gt("MuiListItemButton",e)}const su=Yt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),uB=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters]},dB=e=>{const{alignItems:t,classes:o,dense:l,disabled:h,disableGutters:m,divider:g,selected:u}=e,M=qt({root:["root",l&&"dense",!m&&"gutters",g&&"divider",h&&"disabled",t==="flex-start"&&"alignItemsFlexStart",u&&"selected"]},cB,o);return{...o,...M}},hB=it(qu,{shouldForwardProp:e=>xi(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:uB})(ir(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${su.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${su.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${su.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${su.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${su.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),pB=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiListItemButton"}),{alignItems:h="center",autoFocus:m=!1,component:g="div",children:u,dense:k=!1,disableGutters:M=!1,divider:B=!1,focusVisibleClassName:D,selected:A=!1,className:Z,...G}=l,te=J.useContext(ws),ne=J.useMemo(()=>({dense:k||te.dense||!1,alignItems:h,disableGutters:M}),[h,te.dense,k,M]),W=J.useRef(null);Yi(()=>{m&&W.current&&W.current.focus()},[m]);const O={...l,alignItems:h,dense:ne.dense,disableGutters:M,divider:B,selected:A},U=dB(O),K=Bn(W,o);return V.jsx(ws.Provider,{value:ne,children:V.jsx(hB,{ref:K,href:G.href||G.to,component:(G.href||G.to)&&g==="div"?"button":g,focusVisibleClassName:_t(U.focusVisible,D),ownerState:O,className:_t(U.root,Z),...G,classes:U,children:u})})});function fB(e){return Gt("MuiListItemSecondaryAction",e)}Yt("MuiListItemSecondaryAction",["root","disableGutters"]);const mB=e=>{const{disableGutters:t,classes:o}=e;return qt({root:["root",t&&"disableGutters"]},fB,o)},gB=it("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),OT=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiListItemSecondaryAction"}),{className:h,...m}=l,g=J.useContext(ws),u={...l,disableGutters:g.disableGutters},k=mB(u);return V.jsx(gB,{className:_t(k.root,h),ownerState:u,ref:o,...m})});OT.muiName="ListItemSecondaryAction";const yB=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters,!o.disablePadding&&t.padding,o.hasSecondaryAction&&t.secondaryAction]},_B=e=>{const{alignItems:t,classes:o,dense:l,disableGutters:h,disablePadding:m,divider:g,hasSecondaryAction:u}=e;return qt({root:["root",l&&"dense",!h&&"gutters",!m&&"padding",g&&"divider",t==="flex-start"&&"alignItemsFlexStart",u&&"secondaryAction"],container:["container"],secondaryAction:["secondaryAction"]},lB,o)},vB=it("div",{name:"MuiListItem",slot:"Root",overridesResolver:yB})(ir(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${su.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),xB=it("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),$l=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiListItem"}),{alignItems:h="center",children:m,className:g,component:u,components:k={},componentsProps:M={},ContainerComponent:B="li",ContainerProps:{className:D,...A}={},dense:Z=!1,disableGutters:G=!1,disablePadding:te=!1,divider:ne=!1,secondaryAction:W,slotProps:O={},slots:U={},...K}=l,he=J.useContext(ws),ce=J.useMemo(()=>({dense:Z||he.dense||!1,alignItems:h,disableGutters:G}),[h,he.dense,Z,G]),fe=J.useRef(null),ge=J.Children.toArray(m),Te=ge.length&&jh(ge[ge.length-1],["ListItemSecondaryAction"]),Ae={...l,alignItems:h,dense:ce.dense,disableGutters:G,disablePadding:te,divider:ne,hasSecondaryAction:Te},Re=_B(Ae),X=Bn(fe,o),xe={slots:U,slotProps:O},[Ee,Le]=fr("secondaryAction",{elementType:OT,externalForwardedProps:xe,ownerState:Ae,className:Re.secondaryAction}),Be=U.root||k.Root||vB,Ze=O.root||M.root||{},ze={className:_t(Re.root,Ze.className,g),...K};let Fe=u||"li";return Te?(Fe=!ze.component&&!u?"div":Fe,B==="li"&&(Fe==="li"?Fe="div":ze.component==="li"&&(ze.component="div")),V.jsx(ws.Provider,{value:ce,children:V.jsxs(xB,{as:B,className:_t(Re.container,D),ref:X,ownerState:Ae,...A,children:[V.jsx(Be,{...Ze,...!Fu(Be)&&{as:Fe,ownerState:{...Ae,...Ze.ownerState}},...ze,children:ge}),ge.pop()]})})):V.jsx(ws.Provider,{value:ce,children:V.jsxs(Be,{...Ze,as:Fe,ref:X,...!Fu(Be)&&{ownerState:{...Ae,...Ze.ownerState}},...ze,children:[ge,W&&V.jsx(Ee,{...Le,children:W})]})})}),J2=Yt("MuiListItemIcon",["root","alignItemsFlexStart"]);function bB(e){return Gt("MuiListItemText",e)}const vu=Yt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),wB=e=>{const{classes:t,inset:o,primary:l,secondary:h,dense:m}=e;return qt({root:["root",o&&"inset",m&&"dense",l&&h&&"multiline"],primary:["primary"],secondary:["secondary"]},bB,t)},SB=it("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${vu.primary}`]:t.primary},{[`& .${vu.secondary}`]:t.secondary},t.root,o.inset&&t.inset,o.primary&&o.secondary&&t.multiline,o.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${D2.root}:where(& .${vu.primary})`]:{display:"block"},[`.${D2.root}:where(& .${vu.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),Q2=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiListItemText"}),{children:h,className:m,disableTypography:g=!1,inset:u=!1,primary:k,primaryTypographyProps:M,secondary:B,secondaryTypographyProps:D,slots:A={},slotProps:Z={},...G}=l,{dense:te}=J.useContext(ws);let ne=k??h,W=B;const O={...l,disableTypography:g,inset:u,primary:!!ne,secondary:!!W,dense:te},U=wB(O),K={slots:A,slotProps:{primary:M,secondary:D,...Z}},[he,ce]=fr("root",{className:_t(U.root,m),elementType:SB,externalForwardedProps:{...K,...G},ownerState:O,ref:o}),[fe,ge]=fr("primary",{className:U.primary,elementType:Ut,externalForwardedProps:K,ownerState:O}),[Te,Ae]=fr("secondary",{className:U.secondary,elementType:Ut,externalForwardedProps:K,ownerState:O});return ne!=null&&ne.type!==Ut&&!g&&(ne=V.jsx(fe,{variant:te?"body2":"body1",component:ge!=null&&ge.variant?void 0:"span",...ge,children:ne})),W!=null&&W.type!==Ut&&!g&&(W=V.jsx(Te,{variant:"body2",color:"textSecondary",...Ae,children:W})),V.jsxs(he,{...ce,children:[ne,W]})});function rv(e,t,o){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:o?null:e.firstChild}function eS(e,t,o){return e===t?o?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:o?null:e.lastChild}function $T(e,t){if(t===void 0)return!0;let o=e.innerText;return o===void 0&&(o=e.textContent),o=o.trim().toLowerCase(),o.length===0?!1:t.repeating?o[0]===t.keys[0]:o.startsWith(t.keys.join(""))}function _h(e,t,o,l,h,m){let g=!1,u=h(e,t,t?o:!1);for(;u;){if(u===e.firstChild){if(g)return!1;g=!0}const k=l?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!$T(u,m)||k)u=h(e,u,o);else return u.focus(),!0}return!1}const CB=J.forwardRef(function(t,o){const{actions:l,autoFocus:h=!1,autoFocusItem:m=!1,children:g,className:u,disabledItemsFocusable:k=!1,disableListWrap:M=!1,onKeyDown:B,variant:D="selectedMenu",...A}=t,Z=J.useRef(null),G=J.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Yi(()=>{h&&Z.current.focus()},[h]),J.useImperativeHandle(l,()=>({adjustStyleForScrollbar:(U,{direction:K})=>{const he=!Z.current.style.width;if(U.clientHeight<Z.current.clientHeight&&he){const ce=`${AT(Ri(U))}px`;Z.current.style[K==="rtl"?"paddingLeft":"paddingRight"]=ce,Z.current.style.width=`calc(100% + ${ce})`}return Z.current}}),[]);const te=U=>{const K=Z.current,he=U.key;if(U.ctrlKey||U.metaKey||U.altKey){B&&B(U);return}const fe=Eh(Ai(K));if(he==="ArrowDown")U.preventDefault(),_h(K,fe,M,k,rv);else if(he==="ArrowUp")U.preventDefault(),_h(K,fe,M,k,eS);else if(he==="Home")U.preventDefault(),_h(K,null,M,k,rv);else if(he==="End")U.preventDefault(),_h(K,null,M,k,eS);else if(he.length===1){const ge=G.current,Te=he.toLowerCase(),Ae=performance.now();ge.keys.length>0&&(Ae-ge.lastTime>500?(ge.keys=[],ge.repeating=!0,ge.previousKeyMatched=!0):ge.repeating&&Te!==ge.keys[0]&&(ge.repeating=!1)),ge.lastTime=Ae,ge.keys.push(Te);const Re=fe&&!ge.repeating&&$T(fe,ge);ge.previousKeyMatched&&(Re||_h(K,fe,!1,k,rv,ge))?U.preventDefault():ge.previousKeyMatched=!1}B&&B(U)},ne=Bn(Z,o);let W=-1;J.Children.forEach(g,(U,K)=>{if(!J.isValidElement(U)){W===K&&(W+=1,W>=g.length&&(W=-1));return}U.props.disabled||(D==="selectedMenu"&&U.props.selected||W===-1)&&(W=K),W===K&&(U.props.disabled||U.props.muiSkipListHighlight||U.type.muiSkipListHighlight)&&(W+=1,W>=g.length&&(W=-1))});const O=J.Children.map(g,(U,K)=>{if(K===W){const he={};return m&&(he.autoFocus=!0),U.props.tabIndex===void 0&&D==="selectedMenu"&&(he.tabIndex=0),J.cloneElement(U,he)}return U});return V.jsx(K0,{role:"menu",ref:ne,className:u,onKeyDown:te,tabIndex:h?0:-1,...A,children:O})});function kB(e){return Gt("MuiPopover",e)}Yt("MuiPopover",["root","paper"]);function tS(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.height/2:t==="bottom"&&(o=e.height),o}function rS(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.width/2:t==="right"&&(o=e.width),o}function nS(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function em(e){return typeof e=="function"?e():e}const TB=e=>{const{classes:t}=e;return qt({root:["root"],paper:["paper"]},kB,t)},IB=it(q0,{name:"MuiPopover",slot:"Root"})({}),NT=it(nl,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),PB=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiPopover"}),{action:h,anchorEl:m,anchorOrigin:g={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:k="anchorEl",children:M,className:B,container:D,elevation:A=8,marginThreshold:Z=16,open:G,PaperProps:te={},slots:ne={},slotProps:W={},transformOrigin:O={vertical:"top",horizontal:"left"},TransitionComponent:U,transitionDuration:K="auto",TransitionProps:he={},disableScrollLock:ce=!1,...fe}=l,ge=J.useRef(),Te={...l,anchorOrigin:g,anchorReference:k,elevation:A,marginThreshold:Z,transformOrigin:O,TransitionComponent:U,transitionDuration:K,TransitionProps:he},Ae=TB(Te),Re=J.useCallback(()=>{if(k==="anchorPosition")return u;const ht=em(m),Mt=(ht&&ht.nodeType===1?ht:Ai(ge.current).body).getBoundingClientRect();return{top:Mt.top+tS(Mt,g.vertical),left:Mt.left+rS(Mt,g.horizontal)}},[m,g.horizontal,g.vertical,u,k]),X=J.useCallback(ht=>({vertical:tS(ht,O.vertical),horizontal:rS(ht,O.horizontal)}),[O.horizontal,O.vertical]),xe=J.useCallback(ht=>{const Rt={width:ht.offsetWidth,height:ht.offsetHeight},Mt=X(Rt);if(k==="none")return{top:null,left:null,transformOrigin:nS(Mt)};const Qt=Re();let kt=Qt.top-Mt.vertical,Zt=Qt.left-Mt.horizontal;const Ie=kt+Rt.height,hr=Zt+Rt.width,_r=Ri(em(m)),Bt=_r.innerHeight-Z,or=_r.innerWidth-Z;if(Z!==null&&kt<Z){const Sr=kt-Z;kt-=Sr,Mt.vertical+=Sr}else if(Z!==null&&Ie>Bt){const Sr=Ie-Bt;kt-=Sr,Mt.vertical+=Sr}if(Z!==null&&Zt<Z){const Sr=Zt-Z;Zt-=Sr,Mt.horizontal+=Sr}else if(hr>or){const Sr=hr-or;Zt-=Sr,Mt.horizontal+=Sr}return{top:`${Math.round(kt)}px`,left:`${Math.round(Zt)}px`,transformOrigin:nS(Mt)}},[m,k,Re,X,Z]),[Ee,Le]=J.useState(G),Be=J.useCallback(()=>{const ht=ge.current;if(!ht)return;const Rt=xe(ht);Rt.top!==null&&ht.style.setProperty("top",Rt.top),Rt.left!==null&&(ht.style.left=Rt.left),ht.style.transformOrigin=Rt.transformOrigin,Le(!0)},[xe]);J.useEffect(()=>(ce&&window.addEventListener("scroll",Be),()=>window.removeEventListener("scroll",Be)),[m,ce,Be]);const Ze=()=>{Be()},ze=()=>{Le(!1)};J.useEffect(()=>{G&&Be()}),J.useImperativeHandle(h,()=>G?{updatePosition:()=>{Be()}}:null,[G,Be]),J.useEffect(()=>{if(!G)return;const ht=N0(()=>{Be()}),Rt=Ri(em(m));return Rt.addEventListener("resize",ht),()=>{ht.clear(),Rt.removeEventListener("resize",ht)}},[m,G,Be]);let Fe=K;const Ge={slots:{transition:U,...ne},slotProps:{transition:he,paper:te,...W}},[Xe,ct]=fr("transition",{elementType:vx,externalForwardedProps:Ge,ownerState:Te,getSlotProps:ht=>({...ht,onEntering:(Rt,Mt)=>{var Qt;(Qt=ht.onEntering)==null||Qt.call(ht,Rt,Mt),Ze()},onExited:Rt=>{var Mt;(Mt=ht.onExited)==null||Mt.call(ht,Rt),ze()}}),additionalProps:{appear:!0,in:G}});K==="auto"&&!Xe.muiSupportAuto&&(Fe=void 0);const Tt=D||(m?Ai(em(m)).body:void 0),[Ht,{slots:er,slotProps:rr,...Ye}]=fr("root",{ref:o,elementType:IB,externalForwardedProps:{...Ge,...fe},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:ne.backdrop},slotProps:{backdrop:Zm(typeof W.backdrop=="function"?W.backdrop(Te):W.backdrop,{invisible:!0})},container:Tt,open:G},ownerState:Te,className:_t(Ae.root,B)}),[Jt,zt]=fr("paper",{ref:ge,className:Ae.paper,elementType:NT,externalForwardedProps:Ge,shouldForwardComponentProp:!0,additionalProps:{elevation:A,style:Ee?void 0:{opacity:0}},ownerState:Te});return V.jsx(Ht,{...Ye,...!Fu(Ht)&&{slots:er,slotProps:rr,disableScrollLock:ce},children:V.jsx(Xe,{...ct,timeout:Fe,children:V.jsx(Jt,{...zt,children:M})})})});function EB(e){return Gt("MuiMenu",e)}Yt("MuiMenu",["root","paper","list"]);const MB={vertical:"top",horizontal:"right"},AB={vertical:"top",horizontal:"left"},zB=e=>{const{classes:t}=e;return qt({root:["root"],paper:["paper"],list:["list"]},EB,t)},RB=it(PB,{shouldForwardProp:e=>xi(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),LB=it(NT,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),DB=it(CB,{name:"MuiMenu",slot:"List"})({outline:0}),BB=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiMenu"}),{autoFocus:h=!0,children:m,className:g,disableAutoFocusItem:u=!1,MenuListProps:k={},onClose:M,open:B,PaperProps:D={},PopoverClasses:A,transitionDuration:Z="auto",TransitionProps:{onEntering:G,...te}={},variant:ne="selectedMenu",slots:W={},slotProps:O={},...U}=l,K=oT(),he={...l,autoFocus:h,disableAutoFocusItem:u,MenuListProps:k,onEntering:G,PaperProps:D,transitionDuration:Z,TransitionProps:te,variant:ne},ce=zB(he),fe=h&&!u&&B,ge=J.useRef(null),Te=(Fe,Ge)=>{ge.current&&ge.current.adjustStyleForScrollbar(Fe,{direction:K?"rtl":"ltr"}),G&&G(Fe,Ge)},Ae=Fe=>{Fe.key==="Tab"&&(Fe.preventDefault(),M&&M(Fe,"tabKeyDown"))};let Re=-1;J.Children.map(m,(Fe,Ge)=>{J.isValidElement(Fe)&&(Fe.props.disabled||(ne==="selectedMenu"&&Fe.props.selected||Re===-1)&&(Re=Ge))});const X={slots:W,slotProps:{list:k,transition:te,paper:D,...O}},xe=UD({elementType:W.root,externalSlotProps:O.root,ownerState:he,className:[ce.root,g]}),[Ee,Le]=fr("paper",{className:ce.paper,elementType:LB,externalForwardedProps:X,shouldForwardComponentProp:!0,ownerState:he}),[Be,Ze]=fr("list",{className:_t(ce.list,k.className),elementType:DB,shouldForwardComponentProp:!0,externalForwardedProps:X,getSlotProps:Fe=>({...Fe,onKeyDown:Ge=>{var Xe;Ae(Ge),(Xe=Fe.onKeyDown)==null||Xe.call(Fe,Ge)}}),ownerState:he}),ze=typeof X.slotProps.transition=="function"?X.slotProps.transition(he):X.slotProps.transition;return V.jsx(RB,{onClose:M,anchorOrigin:{vertical:"bottom",horizontal:K?"right":"left"},transformOrigin:K?MB:AB,slots:{root:W.root,paper:Ee,backdrop:W.backdrop,...W.transition&&{transition:W.transition}},slotProps:{root:xe,paper:Le,backdrop:typeof O.backdrop=="function"?O.backdrop(he):O.backdrop,transition:{...ze,onEntering:(...Fe)=>{var Ge;Te(...Fe),(Ge=ze==null?void 0:ze.onEntering)==null||Ge.call(ze,...Fe)}}},open:B,ref:o,transitionDuration:Z,ownerState:he,...U,classes:A,children:V.jsx(Be,{actions:ge,autoFocus:h&&(Re===-1||u),autoFocusItem:fe,variant:ne,...Ze,children:m})})});function FB(e){return Gt("MuiMenuItem",e)}const vh=Yt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),OB=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.divider&&t.divider,!o.disableGutters&&t.gutters]},$B=e=>{const{disabled:t,dense:o,divider:l,disableGutters:h,selected:m,classes:g}=e,k=qt({root:["root",o&&"dense",t&&"disabled",!h&&"gutters",l&&"divider",m&&"selected"]},FB,g);return{...g,...k}},NB=it(qu,{shouldForwardProp:e=>xi(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:OB})(ir(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${vh.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${vh.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${vh.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${vh.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${vh.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${q2.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${q2.inset}`]:{marginLeft:52},[`& .${vu.root}`]:{marginTop:0,marginBottom:0},[`& .${vu.inset}`]:{paddingLeft:36},[`& .${J2.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${J2.root} svg`]:{fontSize:"1.25rem"}}}]}))),iS=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiMenuItem"}),{autoFocus:h=!1,component:m="li",dense:g=!1,divider:u=!1,disableGutters:k=!1,focusVisibleClassName:M,role:B="menuitem",tabIndex:D,className:A,...Z}=l,G=J.useContext(ws),te=J.useMemo(()=>({dense:g||G.dense||!1,disableGutters:k}),[G.dense,g,k]),ne=J.useRef(null);Yi(()=>{h&&ne.current&&ne.current.focus()},[h]);const W={...l,dense:te.dense,divider:u,disableGutters:k},O=$B(l),U=Bn(ne,o);let K;return l.disabled||(K=D!==void 0?D:-1),V.jsx(ws.Provider,{value:te,children:V.jsx(NB,{ref:U,role:B,tabIndex:K,component:m,focusVisibleClassName:_t(O.focusVisible,M),className:_t(O.root,A),...Z,ownerState:W,classes:O})})});function jB(e){return Gt("MuiNativeSelect",e)}const Y0=Yt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),VB=e=>{const{classes:t,variant:o,disabled:l,multiple:h,open:m,error:g}=e,u={select:["select",o,l&&"disabled",h&&"multiple",g&&"error"],icon:["icon",`icon${st(o)}`,m&&"iconOpen",l&&"disabled"]};return qt(u,jB,t)},jT=it("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${Y0.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),UB=it(jT,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:xi,overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.select,t[o.variant],o.error&&t.error,{[`&.${Y0.multiple}`]:t.multiple}]}})({}),VT=it("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${Y0.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),WB=it(VT,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${st(o.variant)}`],o.open&&t.iconOpen]}})({}),HB=J.forwardRef(function(t,o){const{className:l,disabled:h,error:m,IconComponent:g,inputRef:u,variant:k="standard",...M}=t,B={...t,disabled:h,variant:k,error:m},D=VB(B);return V.jsxs(J.Fragment,{children:[V.jsx(UB,{ownerState:B,className:_t(D.select,l),disabled:h,ref:u||o,...M}),t.multiple?null:V.jsx(WB,{as:g,ownerState:B,className:D.icon})]})});function GB(e){const{children:t,defer:o=!1,fallback:l=null}=e,[h,m]=J.useState(!1);return Yi(()=>{o||m(!0)},[o]),J.useEffect(()=>{o&&m(!0)},[o]),h?t:l}var oS;const qB=it("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:xi})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),ZB=it("legend",{name:"MuiNotchedOutlined",shouldForwardProp:xi})(ir(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function XB(e){const{children:t,classes:o,className:l,label:h,notched:m,...g}=e,u=h!=null&&h!=="",k={...e,notched:m,withLabel:u};return V.jsx(qB,{"aria-hidden":!0,className:l,ownerState:k,...g,children:V.jsx(ZB,{ownerState:k,children:u?V.jsx("span",{children:h}):oS||(oS=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const KB=e=>{const{classes:t}=e,l=qt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},QD,t);return{...t,...l}},YB=it(ty,{shouldForwardProp:e=>xi(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Qg})(ir(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${ds.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${ds.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${ds.focused} .${ds.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(ii()).map(([o])=>({props:{color:o},style:{[`&.${ds.focused} .${ds.notchedOutline}`]:{borderColor:(e.vars||e).palette[o].main}}})),{props:{},style:{[`&.${ds.error} .${ds.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${ds.disabled} .${ds.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:14}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:14}},{props:({ownerState:o})=>o.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:o,size:l})=>o.multiline&&l==="small",style:{padding:"8.5px 14px"}}]}})),JB=it(XB,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(ir(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),QB=it(ry,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:ey})(ir(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),J0=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiOutlinedInput"}),{components:h={},fullWidth:m=!1,inputComponent:g="input",label:u,multiline:k=!1,notched:M,slots:B={},slotProps:D={},type:A="text",...Z}=l,G=KB(l),te=Ku(),ne=Xu({props:l,muiFormControl:te,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),W={...l,color:ne.color||"primary",disabled:ne.disabled,error:ne.error,focused:ne.focused,formControl:te,fullWidth:m,hiddenLabel:ne.hiddenLabel,multiline:k,size:ne.size,type:A},O=B.root??h.Root??YB,U=B.input??h.Input??QB,[K,he]=fr("notchedOutline",{elementType:JB,className:G.notchedOutline,shouldForwardComponentProp:!0,ownerState:W,externalForwardedProps:{slots:B,slotProps:D},additionalProps:{label:u!=null&&u!==""&&ne.required?V.jsxs(J.Fragment,{children:[u,"","*"]}):u}});return V.jsx(G0,{slots:{root:O,input:U},slotProps:D,renderSuffix:ce=>V.jsx(K,{...he,notched:typeof M<"u"?M:!!(ce.startAdornment||ce.filled||ce.focused)}),fullWidth:m,inputComponent:g,multiline:k,ref:o,type:A,...Z,classes:{...G,notchedOutline:null}})});J0.muiName="Input";function UT(e){return Gt("MuiSelect",e)}const xh=Yt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var sS;const eF=it(jT,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`&.${xh.select}`]:t.select},{[`&.${xh.select}`]:t[o.variant]},{[`&.${xh.error}`]:t.error},{[`&.${xh.multiple}`]:t.multiple}]}})({[`&.${xh.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),tF=it(VT,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${st(o.variant)}`],o.open&&t.iconOpen]}})({}),rF=it("input",{shouldForwardProp:e=>gT(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function aS(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function nF(e){return e==null||typeof e=="string"&&!e.trim()}const iF=e=>{const{classes:t,variant:o,disabled:l,multiple:h,open:m,error:g}=e,u={select:["select",o,l&&"disabled",h&&"multiple",g&&"error"],icon:["icon",`icon${st(o)}`,m&&"iconOpen",l&&"disabled"],nativeInput:["nativeInput"]};return qt(u,UT,t)},oF=J.forwardRef(function(t,o){var si,Nt,bi,Bi;const{"aria-describedby":l,"aria-label":h,autoFocus:m,autoWidth:g,children:u,className:k,defaultOpen:M,defaultValue:B,disabled:D,displayEmpty:A,error:Z=!1,IconComponent:G,inputRef:te,labelId:ne,MenuProps:W={},multiple:O,name:U,onBlur:K,onChange:he,onClose:ce,onFocus:fe,onKeyDown:ge,onMouseDown:Te,onOpen:Ae,open:Re,readOnly:X,renderValue:xe,required:Ee,SelectDisplayProps:Le={},tabIndex:Be,type:Ze,value:ze,variant:Fe="standard",...Ge}=t,[Xe,ct]=P2({controlled:ze,default:B,name:"Select"}),[Tt,Ht]=P2({controlled:Re,default:M,name:"Select"}),er=J.useRef(null),rr=J.useRef(null),[Ye,Jt]=J.useState(null),{current:zt}=J.useRef(Re!=null),[ht,Rt]=J.useState(),Mt=Bn(o,te),Qt=J.useCallback(Pt=>{rr.current=Pt,Pt&&Jt(Pt)},[]),kt=Ye==null?void 0:Ye.parentNode;J.useImperativeHandle(Mt,()=>({focus:()=>{rr.current.focus()},node:er.current,value:Xe}),[Xe]),J.useEffect(()=>{M&&Tt&&Ye&&!zt&&(Rt(g?null:kt.clientWidth),rr.current.focus())},[Ye,g]),J.useEffect(()=>{m&&rr.current.focus()},[m]),J.useEffect(()=>{if(!ne)return;const Pt=Ai(rr.current).getElementById(ne);if(Pt){const pr=()=>{getSelection().isCollapsed&&rr.current.focus()};return Pt.addEventListener("click",pr),()=>{Pt.removeEventListener("click",pr)}}},[ne]);const Zt=(Pt,pr)=>{Pt?Ae&&Ae(pr):ce&&ce(pr),zt||(Rt(g?null:kt.clientWidth),Ht(Pt))},Ie=Pt=>{Te==null||Te(Pt),Pt.button===0&&(Pt.preventDefault(),rr.current.focus(),Zt(!0,Pt))},hr=Pt=>{Zt(!1,Pt)},_r=J.Children.toArray(u),Bt=Pt=>{const pr=_r.find(ie=>ie.props.value===Pt.target.value);pr!==void 0&&(ct(pr.props.value),he&&he(Pt,pr))},or=Pt=>pr=>{let ie;if(pr.currentTarget.hasAttribute("tabindex")){if(O){ie=Array.isArray(Xe)?Xe.slice():[];const $=Xe.indexOf(Pt.props.value);$===-1?ie.push(Pt.props.value):ie.splice($,1)}else ie=Pt.props.value;if(Pt.props.onClick&&Pt.props.onClick(pr),Xe!==ie&&(ct(ie),he)){const $=pr.nativeEvent||pr,N=new $.constructor($.type,$);Object.defineProperty(N,"target",{writable:!0,value:{value:ie,name:U}}),he(N,Pt)}O||Zt(!1,pr)}},Sr=Pt=>{X||([" ","ArrowUp","ArrowDown","Enter"].includes(Pt.key)&&(Pt.preventDefault(),Zt(!0,Pt)),ge==null||ge(Pt))},bt=Ye!==null&&Tt,_n=Pt=>{!bt&&K&&(Object.defineProperty(Pt,"target",{writable:!0,value:{value:Xe,name:U}}),K(Pt))};delete Ge["aria-invalid"];let Ir,un;const En=[];let Fn=!1;(Jm({value:Xe})||A)&&(xe?Ir=xe(Xe):Fn=!0);const qe=_r.map(Pt=>{if(!J.isValidElement(Pt))return null;let pr;if(O){if(!Array.isArray(Xe))throw new Error(Qs(2));pr=Xe.some(ie=>aS(ie,Pt.props.value)),pr&&Fn&&En.push(Pt.props.children)}else pr=aS(Xe,Pt.props.value),pr&&Fn&&(un=Pt.props.children);return J.cloneElement(Pt,{"aria-selected":pr?"true":"false",onClick:or(Pt),onKeyUp:ie=>{ie.key===" "&&ie.preventDefault(),Pt.props.onKeyUp&&Pt.props.onKeyUp(ie)},role:"option",selected:pr,value:void 0,"data-value":Pt.props.value})});Fn&&(O?En.length===0?Ir=null:Ir=En.reduce((Pt,pr,ie)=>(Pt.push(pr),ie<En.length-1&&Pt.push(", "),Pt),[]):Ir=un);let dn=ht;!g&&zt&&Ye&&(dn=kt.clientWidth);let dr;typeof Be<"u"?dr=Be:dr=D?null:0;const Ft=Le.id||(U?`mui-component-select-${U}`:void 0),Nr={...t,variant:Fe,value:Xe,open:bt,error:Z},He=iF(Nr),It={...W.PaperProps,...typeof((si=W.slotProps)==null?void 0:si.paper)=="function"?W.slotProps.paper(Nr):(Nt=W.slotProps)==null?void 0:Nt.paper},Lt={...W.MenuListProps,...typeof((bi=W.slotProps)==null?void 0:bi.list)=="function"?W.slotProps.list(Nr):(Bi=W.slotProps)==null?void 0:Bi.list},Mn=Hu();return V.jsxs(J.Fragment,{children:[V.jsx(eF,{as:"div",ref:Qt,tabIndex:dr,role:"combobox","aria-controls":bt?Mn:void 0,"aria-disabled":D?"true":void 0,"aria-expanded":bt?"true":"false","aria-haspopup":"listbox","aria-label":h,"aria-labelledby":[ne,Ft].filter(Boolean).join(" ")||void 0,"aria-describedby":l,"aria-required":Ee?"true":void 0,"aria-invalid":Z?"true":void 0,onKeyDown:Sr,onMouseDown:D||X?null:Ie,onBlur:_n,onFocus:fe,...Le,ownerState:Nr,className:_t(Le.className,He.select,k),id:Ft,children:nF(Ir)?sS||(sS=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):Ir}),V.jsx(rF,{"aria-invalid":Z,value:Array.isArray(Xe)?Xe.join(","):Xe,name:U,ref:er,"aria-hidden":!0,onChange:Bt,tabIndex:-1,disabled:D,className:He.nativeInput,autoFocus:m,required:Ee,...Ge,ownerState:Nr}),V.jsx(tF,{as:G,className:He.icon,ownerState:Nr}),V.jsx(BB,{id:`menu-${U||""}`,anchorEl:kt,open:bt,onClose:hr,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...W,slotProps:{...W.slotProps,list:{"aria-labelledby":ne,role:"listbox","aria-multiselectable":O?"true":void 0,disableListWrap:!0,id:Mn,...Lt},paper:{...It,style:{minWidth:dn,...It!=null?It.style:null}}},children:qe})]})}),sF=e=>{const{classes:t}=e,l=qt({root:["root"]},UT,t);return{...t,...l}},Q0={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>xi(e)&&e!=="variant"},aF=it(X0,Q0)(""),lF=it(J0,Q0)(""),cF=it(Z0,Q0)(""),eb=J.forwardRef(function(t,o){const l=Wt({name:"MuiSelect",props:t}),{autoWidth:h=!1,children:m,classes:g={},className:u,defaultOpen:k=!1,displayEmpty:M=!1,IconComponent:B=t4,id:D,input:A,inputProps:Z,label:G,labelId:te,MenuProps:ne,multiple:W=!1,native:O=!1,onClose:U,onOpen:K,open:he,renderValue:ce,SelectDisplayProps:fe,variant:ge="outlined",...Te}=l,Ae=O?HB:oF,Re=Ku(),X=Xu({props:l,muiFormControl:Re,states:["variant","error"]}),xe=X.variant||ge,Ee={...l,variant:xe,classes:g},Le=sF(Ee),{root:Be,...Ze}=Le,ze=A||{standard:V.jsx(aF,{ownerState:Ee}),outlined:V.jsx(lF,{label:G,ownerState:Ee}),filled:V.jsx(cF,{ownerState:Ee})}[xe],Fe=Bn(o,Zu(ze));return V.jsx(J.Fragment,{children:J.cloneElement(ze,{inputComponent:Ae,inputProps:{children:m,error:X.error,IconComponent:B,variant:xe,type:void 0,multiple:W,...O?{id:D}:{autoWidth:h,defaultOpen:k,displayEmpty:M,labelId:te,MenuProps:ne,onClose:U,onOpen:K,open:he,renderValue:ce,SelectDisplayProps:{id:D,...fe}},...Z,classes:Z?Zn(Ze,Z.classes):Ze,...A?A.props.inputProps:{}},...(W&&O||M)&&xe==="outlined"?{notched:!0}:{},ref:Fe,className:_t(ze.props.className,u,Le.root),...!A&&{variant:xe},...Te})})});eb.muiName="Select";const nv=D5({createStyledComponent:it("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>Wt({props:e,name:"MuiStack"})}),uF=it("div",{name:"MuiSwipeArea",shouldForwardProp:xi})(ir(({theme:e})=>({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1,variants:[{props:{anchor:"left"},style:{right:"auto"}},{props:{anchor:"right"},style:{left:"auto",right:0}},{props:{anchor:"top"},style:{bottom:"auto",right:0}},{props:{anchor:"bottom"},style:{top:"auto",bottom:0,right:0}}]}))),dF=J.forwardRef(function(t,o){const{anchor:l,classes:h={},className:m,width:g,style:u,...k}=t,M=t;return V.jsx(uF,{className:_t("PrivateSwipeArea-root",h.root,h[`anchor${st(l)}`],m),ref:o,style:{[Ol(l)?"width":"height"]:g,...u},ownerState:M,...k})}),tm=3,iv=20;let Vs=null;function ov(e,t,o){return e==="right"?o.body.offsetWidth-t[0].pageX:t[0].pageX}function sv(e,t,o){return e==="bottom"?o.innerHeight-t[0].clientY:t[0].clientY}function bh(e,t){return e?t.clientWidth:t.clientHeight}function lS(e,t,o,l){return Math.min(Math.max(o?t-e:l+t-e,0),l)}function hF(e,t){const o=[];for(;e&&e!==t.parentElement;){const l=Ri(t).getComputedStyle(e);l.getPropertyValue("position")==="absolute"||l.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&o.push(e),e=e.parentElement}return o}function pF({domTreeShapes:e,start:t,current:o,anchor:l}){const h={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(m=>{let g=o>=t;(l==="top"||l==="left")&&(g=!g);const u=l==="left"||l==="right"?"x":"y",k=Math.round(m[h.scrollPosition[u]]),M=k>0,B=k+m[h.clientLength[u]]<m[h.scrollLength[u]];return!!(g&&B||!g&&M)})}const fF=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),mF=J.forwardRef(function(t,o){const l=Wt({name:"MuiSwipeableDrawer",props:t}),h=Qo(),m={enter:h.transitions.duration.enteringScreen,exit:h.transitions.duration.leavingScreen},{anchor:g="left",disableBackdropTransition:u=!1,disableDiscovery:k=!1,disableSwipeToOpen:M=fF,hideBackdrop:B,hysteresis:D=.52,allowSwipeInChildren:A=!1,minFlingVelocity:Z=450,ModalProps:{BackdropProps:G,...te}={},onClose:ne,onOpen:W,open:O=!1,PaperProps:U={},SwipeAreaProps:K,swipeAreaWidth:he=20,transitionDuration:ce=m,variant:fe="temporary",slots:ge={},slotProps:Te={},...Ae}=l,[Re,X]=J.useState(!1),xe=J.useRef({isSwiping:null}),Ee=J.useRef(),Le=J.useRef(),Be=J.useRef(),Ze=Bn(U.ref,Be),ze=J.useRef(!1),Fe=J.useRef();Yi(()=>{Fe.current=null},[O]);const Ge=J.useCallback((Ye,Jt={})=>{const{mode:zt=null,changeTransition:ht=!0}=Jt,Rt=Mh(h,g),Mt=["right","bottom"].includes(Rt)?1:-1,Qt=Ol(g),kt=Qt?`translate(${Mt*Ye}px, 0)`:`translate(0, ${Mt*Ye}px)`,Zt=Be.current.style;Zt.webkitTransform=kt,Zt.transform=kt;let Ie="";if(zt&&(Ie=h.transitions.create("all",ec({easing:void 0,style:void 0,timeout:ce},{mode:zt}))),ht&&(Zt.webkitTransition=Ie,Zt.transition=Ie),!u&&!B){const hr=Le.current.style;hr.opacity=1-Ye/bh(Qt,Be.current),ht&&(hr.webkitTransition=Ie,hr.transition=Ie)}},[g,u,B,h,ce]),Xe=bs(Ye=>{if(!ze.current)return;if(Vs=null,ze.current=!1,ap.flushSync(()=>{X(!1)}),!xe.current.isSwiping){xe.current.isSwiping=null;return}xe.current.isSwiping=null;const Jt=Mh(h,g),zt=Ol(g);let ht;zt?ht=ov(Jt,Ye.changedTouches,Ai(Ye.currentTarget)):ht=sv(Jt,Ye.changedTouches,Ri(Ye.currentTarget));const Rt=zt?xe.current.startX:xe.current.startY,Mt=bh(zt,Be.current),Qt=lS(ht,Rt,O,Mt),kt=Qt/Mt;if(Math.abs(xe.current.velocity)>Z&&(Fe.current=Math.abs((Mt-Qt)/xe.current.velocity)*1e3),O){xe.current.velocity>Z||kt>D?ne():Ge(0,{mode:"exit"});return}xe.current.velocity<-Z||1-kt>D?W():Ge(bh(zt,Be.current),{mode:"enter"})}),ct=(Ye=!1)=>{if(!Re){(Ye||!(k&&A))&&ap.flushSync(()=>{X(!0)});const Jt=Ol(g);!O&&Be.current&&Ge(bh(Jt,Be.current)+(k?15:-iv),{changeTransition:!1}),xe.current.velocity=0,xe.current.lastTime=null,xe.current.lastTranslate=null,xe.current.paperHit=!1,ze.current=!0}},Tt=bs(Ye=>{if(!Be.current||!ze.current||Vs!==null&&Vs!==xe.current)return;ct(!0);const Jt=Mh(h,g),zt=Ol(g),ht=ov(Jt,Ye.touches,Ai(Ye.currentTarget)),Rt=sv(Jt,Ye.touches,Ri(Ye.currentTarget));if(O&&Be.current.contains(Ye.target)&&Vs===null){const Ie=hF(Ye.target,Be.current);if(pF({domTreeShapes:Ie,start:zt?xe.current.startX:xe.current.startY,current:zt?ht:Rt,anchor:g})){Vs=!0;return}Vs=xe.current}if(xe.current.isSwiping==null){const Ie=Math.abs(ht-xe.current.startX),hr=Math.abs(Rt-xe.current.startY),_r=zt?Ie>hr&&Ie>tm:hr>Ie&&hr>tm;if(_r&&Ye.cancelable&&Ye.preventDefault(),_r===!0||(zt?hr>tm:Ie>tm)){if(xe.current.isSwiping=_r,!_r){Xe(Ye);return}xe.current.startX=ht,xe.current.startY=Rt,!k&&!O&&(zt?xe.current.startX-=iv:xe.current.startY-=iv)}}if(!xe.current.isSwiping)return;const Mt=bh(zt,Be.current);let Qt=zt?xe.current.startX:xe.current.startY;O&&!xe.current.paperHit&&(Qt=Math.min(Qt,Mt));const kt=lS(zt?ht:Rt,Qt,O,Mt);if(O)if(xe.current.paperHit)kt===0&&(xe.current.startX=ht,xe.current.startY=Rt);else if(zt?ht<Mt:Rt<Mt)xe.current.paperHit=!0,xe.current.startX=ht,xe.current.startY=Rt;else return;xe.current.lastTranslate===null&&(xe.current.lastTranslate=kt,xe.current.lastTime=performance.now()+1);const Zt=(kt-xe.current.lastTranslate)/(performance.now()-xe.current.lastTime)*1e3;xe.current.velocity=xe.current.velocity*.4+Zt*.6,xe.current.lastTranslate=kt,xe.current.lastTime=performance.now(),Ye.cancelable&&Ye.preventDefault(),Ge(kt)}),Ht=bs(Ye=>{var Mt;if(Ye.defaultPrevented||Ye.defaultMuiPrevented||O&&(B||!Le.current.contains(Ye.target))&&!Be.current.contains(Ye.target))return;const Jt=Mh(h,g),zt=Ol(g),ht=ov(Jt,Ye.touches,Ai(Ye.currentTarget)),Rt=sv(Jt,Ye.touches,Ri(Ye.currentTarget));if(!O){if(M||!(Ye.target===Ee.current||(Mt=Be.current)!=null&&Mt.contains(Ye.target)&&(typeof A=="function"?A(Ye,Ee.current,Be.current):A)))return;if(zt){if(ht>he)return}else if(Rt>he)return}Ye.defaultMuiPrevented=!0,Vs=null,xe.current.startX=ht,xe.current.startY=Rt,ct()});J.useEffect(()=>{if(fe==="temporary"){const Ye=Ai(Be.current);return Ye.addEventListener("touchstart",Ht),Ye.addEventListener("touchmove",Tt,{passive:!O}),Ye.addEventListener("touchend",Xe),()=>{Ye.removeEventListener("touchstart",Ht),Ye.removeEventListener("touchmove",Tt,{passive:!O}),Ye.removeEventListener("touchend",Xe)}}},[fe,O,Ht,Tt,Xe]),J.useEffect(()=>()=>{Vs===xe.current&&(Vs=null)},[]),J.useEffect(()=>{O||X(!1)},[O]);const[er,rr]=fr("swipeArea",{ref:Ee,elementType:dF,ownerState:l,externalForwardedProps:{slots:ge,slotProps:{swipeArea:K,...Te}},additionalProps:{width:he,anchor:g}});return V.jsxs(J.Fragment,{children:[V.jsx(DT,{open:fe==="temporary"&&Re?!0:O,variant:fe,ModalProps:{BackdropProps:{...G,ref:Le},...fe==="temporary"&&{keepMounted:!0},...te},hideBackdrop:B,anchor:g,transitionDuration:Fe.current||ce,onClose:ne,ref:o,slots:ge,slotProps:{...Te,backdrop:Zm(Te.backdrop??G,{ref:Le}),paper:Zm(Te.paper??U,{style:{pointerEvents:fe==="temporary"&&!O&&!A?"none":""},ref:Ze})},...Ae}),!M&&fe==="temporary"&&V.jsx(GB,{children:V.jsx(er,{...rr})})]})});function gF(e){return Gt("MuiToolbar",e)}Yt("MuiToolbar",["root","gutters","regular","dense"]);const yF=e=>{const{classes:t,disableGutters:o,variant:l}=e;return qt({root:["root",!o&&"gutters",l]},gF,t)},_F=it("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableGutters&&t.gutters,t[o.variant]]}})(ir(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),vF=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiToolbar"}),{className:h,component:m="div",disableGutters:g=!1,variant:u="regular",...k}=l,M={...l,component:m,disableGutters:g,variant:u},B=yF(M);return V.jsx(_F,{as:m,className:_t(B.root,h),ref:o,ownerState:M,...k})});function xF(e){return Gt("MuiTextField",e)}Yt("MuiTextField",["root"]);const bF={standard:X0,filled:Z0,outlined:J0},wF=e=>{const{classes:t}=e;return qt({root:["root"]},xF,t)},SF=it(BT,{name:"MuiTextField",slot:"Root"})({}),CF=J.forwardRef(function(t,o){const l=Wt({props:t,name:"MuiTextField"}),{autoComplete:h,autoFocus:m=!1,children:g,className:u,color:k="primary",defaultValue:M,disabled:B=!1,error:D=!1,FormHelperTextProps:A,fullWidth:Z=!1,helperText:G,id:te,InputLabelProps:ne,inputProps:W,InputProps:O,inputRef:U,label:K,maxRows:he,minRows:ce,multiline:fe=!1,name:ge,onBlur:Te,onChange:Ae,onFocus:Re,placeholder:X,required:xe=!1,rows:Ee,select:Le=!1,SelectProps:Be,slots:Ze={},slotProps:ze={},type:Fe,value:Ge,variant:Xe="outlined",...ct}=l,Tt={...l,autoFocus:m,color:k,disabled:B,error:D,fullWidth:Z,multiline:fe,required:xe,select:Le,variant:Xe},Ht=wF(Tt),er=Hu(te),rr=G&&er?`${er}-helper-text`:void 0,Ye=K&&er?`${er}-label`:void 0,Jt=bF[Xe],zt={slots:Ze,slotProps:{input:O,inputLabel:ne,htmlInput:W,formHelperText:A,select:Be,...ze}},ht={},Rt=zt.slotProps.inputLabel;Xe==="outlined"&&(Rt&&typeof Rt.shrink<"u"&&(ht.notched=Rt.shrink),ht.label=K),Le&&((!Be||!Be.native)&&(ht.id=void 0),ht["aria-describedby"]=void 0);const[Mt,Qt]=fr("root",{elementType:SF,shouldForwardComponentProp:!0,externalForwardedProps:{...zt,...ct},ownerState:Tt,className:_t(Ht.root,u),ref:o,additionalProps:{disabled:B,error:D,fullWidth:Z,required:xe,color:k,variant:Xe}}),[kt,Zt]=fr("input",{elementType:Jt,externalForwardedProps:zt,additionalProps:ht,ownerState:Tt}),[Ie,hr]=fr("inputLabel",{elementType:FT,externalForwardedProps:zt,ownerState:Tt}),[_r,Bt]=fr("htmlInput",{elementType:"input",externalForwardedProps:zt,ownerState:Tt}),[or,Sr]=fr("formHelperText",{elementType:N3,externalForwardedProps:zt,ownerState:Tt}),[bt,_n]=fr("select",{elementType:eb,externalForwardedProps:zt,ownerState:Tt}),Ir=V.jsx(kt,{"aria-describedby":rr,autoComplete:h,autoFocus:m,defaultValue:M,fullWidth:Z,multiline:fe,name:ge,rows:Ee,maxRows:he,minRows:ce,type:Fe,value:Ge,id:er,inputRef:U,onBlur:Te,onChange:Ae,onFocus:Re,placeholder:X,inputProps:Bt,slots:{input:Ze.htmlInput?_r:void 0},...Zt});return V.jsxs(Mt,{...Qt,children:[K!=null&&K!==""&&V.jsx(Ie,{htmlFor:er,id:Ye,...hr,children:K}),Le?V.jsx(bt,{"aria-describedby":rr,id:er,labelId:Ye,value:Ge,input:Ir,..._n,children:g}):Ir,G&&V.jsx(or,{id:rr,...Sr,children:G})]})}),WT=tT({themeId:Ko}),kF=wn(V.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"})),TF=wn(V.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),IF=wn(V.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),HT=wn(V.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),PF=wn(V.jsx("path",{d:"M21.95 10.99c-1.79-.03-3.7-1.95-2.68-4.22-2.98 1-5.77-1.59-5.19-4.56C6.95.71 2 6.58 2 12c0 5.52 4.48 10 10 10 5.89 0 10.54-5.08 9.95-11.01M8.5 15c-.83 0-1.5-.67-1.5-1.5S7.67 12 8.5 12s1.5.67 1.5 1.5S9.33 15 8.5 15m2-5C9.67 10 9 9.33 9 8.5S9.67 7 10.5 7s1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"})),EF=wn(V.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),MF=wn(V.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"})),AF=wn(V.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),zF=wn(V.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"})),RF=wn(V.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"})),LF=wn(V.jsx("path",{d:"M13 16.12c3.47-.41 6.17-3.36 6.17-6.95 0-3.87-3.13-7-7-7s-7 3.13-7 7c0 3.47 2.52 6.34 5.83 6.89V20H5v2h14v-2h-6z"})),DF=wn(V.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),BF=wn(V.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),FF=wn(V.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),OF=wn(V.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}));var GT={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(o,l){e.exports=l()})(UP,function(){var o={},l={};function h(g,u,k){if(l[g]=k,g==="index"){var M="var sharedModule = {}; ("+l.shared+")(sharedModule); ("+l.worker+")(sharedModule);",B={};return l.shared(B),l.index(o,B),typeof window<"u"&&o.setWorkerUrl(window.URL.createObjectURL(new Blob([M],{type:"text/javascript"}))),o}}h("shared",["exports"],function(g){function u(i,n,s,c){return new(s||(s=Promise))(function(f,v){function x(I){try{S(c.next(I))}catch(P){v(P)}}function b(I){try{S(c.throw(I))}catch(P){v(P)}}function S(I){var P;I.done?f(I.value):(P=I.value,P instanceof s?P:new s(function(z){z(P)})).then(x,b)}S((c=c.apply(i,n||[])).next())})}function k(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}typeof SuppressedError=="function"&&SuppressedError;var M=B;function B(i,n){this.x=i,this.y=n}B.prototype={clone:function(){return new B(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,n){return this.clone()._rotateAround(i,n)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var n=i.x-this.x,s=i.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult:function(i){var n=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=n,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var n=Math.cos(i),s=Math.sin(i),c=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=c,this},_rotateAround:function(i,n){var s=Math.cos(i),c=Math.sin(i),f=n.y+c*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-c*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},B.convert=function(i){return i instanceof B?i:Array.isArray(i)?new B(i[0],i[1]):i};var D=k(M),A=Z;function Z(i,n,s,c){this.cx=3*i,this.bx=3*(s-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=s,this.p2y=c}Z.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var s=i,c=0;c<8;c++){var f=this.sampleCurveX(s)-i;if(Math.abs(f)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,b=1;for(s=i,c=0;c<20&&(f=this.sampleCurveX(s),!(Math.abs(f-i)<n));c++)i>f?x=s:b=s,s=.5*(b-x)+x;return s},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var G=k(A);let te,ne;function W(){return te==null&&(te=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),te}function O(){if(ne==null&&(ne=!1,W())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let c=0;c<5*5;c++){const f=4*c;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(c%5,Math.floor(c/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let c=0;c<5*5*4;c++)if(c%4!=3&&s[c]!==c){ne=!0;break}}}return ne||!1}function U(i,n,s,c){const f=new G(i,n,s,c);return v=>f.solve(v)}const K=U(.25,.1,.25,1);function he(i,n,s){return Math.min(s,Math.max(n,i))}function ce(i,n,s){const c=s-n,f=((i-n)%c+c)%c+n;return f===n?s:f}function fe(i,...n){for(const s of n)for(const c in s)i[c]=s[c];return i}let ge=1;function Te(i,n,s){const c={};for(const f in i)c[f]=n.call(this,i[f],f,i);return c}function Ae(i,n,s){const c={};for(const f in i)n.call(this,i[f],f,i)&&(c[f]=i[f]);return c}function Re(i){return Array.isArray(i)?i.map(Re):typeof i=="object"&&i?Te(i,Re):i}const X={};function xe(i){X[i]||(typeof console<"u"&&console.warn(i),X[i]=!0)}function Ee(i,n,s){return(s.y-i.y)*(n.x-i.x)>(n.y-i.y)*(s.x-i.x)}function Le(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let Be=null;function Ze(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Fe(i,n,s,c,f){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(i,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const b=x.startsWith("BGR"),S=new Uint8ClampedArray(c*f*4);if(yield v.copyTo(S,function(I,P,z,F,j){const q=4*Math.max(-P,0),Y=(Math.max(0,z)-z)*F*4+q,se=4*F,ue=Math.max(0,P),Pe=Math.max(0,z);return{rect:{x:ue,y:Pe,width:Math.min(I.width,P+F)-ue,height:Math.min(I.height,z+j)-Pe},layout:[{offset:Y,stride:se}]}}(i,n,s,c,f)),b)for(let I=0;I<S.length;I+=4){const P=S[I];S[I]=S[I+2],S[I+2]=P}return S}finally{v.close()}})}let Ge,Xe;const ct="AbortError";function Tt(){return new Error(ct)}const Ht={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function er(i){return Ht.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const rr="global-dispatcher";class Ye extends Error{constructor(n,s,c,f){super(`AJAXError: ${s} (${n}): ${c}`),this.status=n,this.statusText=s,this.url=c,this.body=f}}const Jt=()=>Le(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,zt=function(i,n){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const c=er(i.url);if(c)return c(i,n);if(Le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:rr},n)}if(!(/^file:/.test(s=i.url)||/^file:/.test(Jt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(c,f){return u(this,void 0,void 0,function*(){const v=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:Jt(),signal:f.signal});c.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const I=yield x.blob();throw new Ye(x.status,x.statusText,c.url,I)}let b;b=c.type==="arrayBuffer"||c.type==="image"?x.arrayBuffer():c.type==="json"?x.json():x.text();const S=yield b;if(f.signal.aborted)throw Tt();return{data:S,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(i,n);if(Le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:rr},n)}var s;return function(c,f){return new Promise((v,x)=>{var b;const S=new XMLHttpRequest;S.open(c.method||"GET",c.url,!0),c.type!=="arrayBuffer"&&c.type!=="image"||(S.responseType="arraybuffer");for(const I in c.headers)S.setRequestHeader(I,c.headers[I]);c.type==="json"&&(S.responseType="text",!((b=c.headers)===null||b===void 0)&&b.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=c.credentials==="include",S.onerror=()=>{x(new Error(S.statusText))},S.onload=()=>{if(!f.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let I=S.response;if(c.type==="json")try{I=JSON.parse(S.response)}catch(P){return void x(P)}v({data:I,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const I=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});x(new Ye(S.status,S.statusText,c.url,I))}},f.signal.addEventListener("abort",()=>{S.abort(),x(Tt())}),S.send(c.body)})}(i,n)};function ht(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const n=new URL(i),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Rt(i,n,s){s[i]&&s[i].indexOf(n)!==-1||(s[i]=s[i]||[],s[i].push(n))}function Mt(i,n,s){if(s&&s[i]){const c=s[i].indexOf(n);c!==-1&&s[i].splice(c,1)}}class Qt{constructor(n,s={}){fe(this,s),this.type=n}}class kt extends Qt{constructor(n,s={}){super("error",fe({error:n},s))}}class Zt{on(n,s){return this._listeners=this._listeners||{},Rt(n,s,this._listeners),this}off(n,s){return Mt(n,s,this._listeners),Mt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Rt(n,s,this._oneTimeListeners),this):new Promise(c=>this.once(n,c))}fire(n,s){typeof n=="string"&&(n=new Qt(n,s||{}));const c=n.type;if(this.listens(c)){n.target=this;const f=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const b of f)b.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const b of v)Mt(c,b,this._oneTimeListeners),b.call(this,n);const x=this._eventedParent;x&&(fe(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof kt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const hr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _r(i,n){const s={};for(const c in i)c!=="ref"&&(s[c]=i[c]);return hr.forEach(c=>{c in n&&(s[c]=n[c])}),s}function Bt(i,n){if(Array.isArray(i)){if(!Array.isArray(n)||i.length!==n.length)return!1;for(let s=0;s<i.length;s++)if(!Bt(i[s],n[s]))return!1;return!0}if(typeof i=="object"&&i!==null&&n!==null){if(typeof n!="object"||Object.keys(i).length!==Object.keys(n).length)return!1;for(const s in i)if(!Bt(i[s],n[s]))return!1;return!0}return i===n}function or(i,n){i.push(n)}function Sr(i,n,s){or(s,{command:"addSource",args:[i,n[i]]})}function bt(i,n,s){or(n,{command:"removeSource",args:[i]}),s[i]=!0}function _n(i,n,s,c){bt(i,s,c),Sr(i,n,s)}function Ir(i,n,s){let c;for(c in i[s])if(Object.prototype.hasOwnProperty.call(i[s],c)&&c!=="data"&&!Bt(i[s][c],n[s][c]))return!1;for(c in n[s])if(Object.prototype.hasOwnProperty.call(n[s],c)&&c!=="data"&&!Bt(i[s][c],n[s][c]))return!1;return!0}function un(i,n,s,c,f,v){i=i||{},n=n||{};for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&(Bt(i[x],n[x])||s.push({command:v,args:[c,x,n[x],f]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(i,x)&&(Bt(i[x],n[x])||s.push({command:v,args:[c,x,n[x],f]}))}function En(i){return i.id}function Fn(i,n){return i[n.id]=n,i}class qe{constructor(n,s,c,f){this.message=(n?`${n}: `:"")+c,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function dn(i,...n){for(const s of n)for(const c in s)i[c]=s[c];return i}class dr extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Ft{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[c,f]of s)this.bindings[c]=f}concat(n){return new Ft(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Nr={kind:"null"},He={kind:"number"},It={kind:"string"},Lt={kind:"boolean"},Mn={kind:"color"},si={kind:"object"},Nt={kind:"value"},bi={kind:"collator"},Bi={kind:"formatted"},Pt={kind:"padding"},pr={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function $(i,n){return{kind:"array",itemType:i,N:n}}function N(i){if(i.kind==="array"){const n=N(i.itemType);return typeof i.N=="number"?`array<${n}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${n}>`}return i.kind}const Q=[Nr,He,It,Lt,Mn,Bi,si,$(Nt),Pt,pr,ie];function ae(i,n){if(n.kind==="error")return null;if(i.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!ae(i.itemType,n.itemType))&&(typeof i.N!="number"||i.N===n.N))return null}else{if(i.kind===n.kind)return null;if(i.kind==="value"){for(const s of Q)if(!ae(s,n))return null}}return`Expected ${N(i)} but found ${N(n)} instead.`}function ve(i,n){return n.some(s=>s.kind===i.kind)}function we(i,n){return n.some(s=>s==="null"?i===null:s==="array"?Array.isArray(i):s==="object"?i&&!Array.isArray(i)&&typeof i=="object":s===typeof i)}function ke(i,n){return i.kind==="array"&&n.kind==="array"?i.itemType.kind===n.itemType.kind&&typeof i.N=="number":i.kind===n.kind}const me=.96422,$e=.82521,Ue=4/29,De=6/29,Qe=3*De*De,St=De*De*De,Et=Math.PI/180,mr=180/Math.PI;function Vt(i){return(i%=360)<0&&(i+=360),i}function gr([i,n,s,c]){let f,v;const x=hn((.2225045*(i=sr(i))+.7168786*(n=sr(n))+.0606169*(s=sr(s)))/1);i===n&&n===s?f=v=x:(f=hn((.4360747*i+.3850649*n+.1430804*s)/me),v=hn((.0139322*i+.0971045*n+.7141733*s)/$e));const b=116*x-16;return[b<0?0:b,500*(f-x),200*(x-v),c]}function sr(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function hn(i){return i>St?Math.pow(i,1/3):i/Qe+Ue}function Xr([i,n,s,c]){let f=(i+16)/116,v=isNaN(n)?f:f+n/500,x=isNaN(s)?f:f-s/200;return f=1*kr(f),v=me*kr(v),x=$e*kr(x),[tr(3.1338561*v-1.6168667*f-.4906146*x),tr(-.9787684*v+1.9161415*f+.033454*x),tr(.0719453*v-.2289914*f+1.4052427*x),c]}function tr(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function kr(i){return i>De?i*i*i:Qe*(i-Ue)}function Gr(i){return parseInt(i.padEnd(2,i),16)/255}function Sn(i,n){return An(n?i/100:i,0,1)}function An(i,n,s){return Math.min(Math.max(n,i),s)}function Kn(i){return!i.some(Number.isNaN)}const ta={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Tr{constructor(n,s,c,f=1,v=!0){this.r=n,this.g=s,this.b=c,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,s,c,f]))}static parse(n){if(n instanceof Tr)return n;if(typeof n!="string")return;const s=function(c){if((c=c.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=ta[c];if(f){const[x,b,S]=f;return[x/255,b/255,S/255,1]}if(c.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(c)){const x=c.length<6?1:2;let b=1;return[Gr(c.slice(b,b+=x)),Gr(c.slice(b,b+=x)),Gr(c.slice(b,b+=x)),Gr(c.slice(b,b+x)||"ff")]}if(c.startsWith("rgb")){const x=c.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,S,I,P,z,F,j,q,Y,se,ue,Pe]=x,_e=[P||" ",j||" ",se].join("");if(_e==="  "||_e==="  /"||_e===",,"||_e===",,,"){const Ce=[I,F,Y].join(""),Oe=Ce==="%%%"?100:Ce===""?255:0;if(Oe){const We=[An(+S/Oe,0,1),An(+z/Oe,0,1),An(+q/Oe,0,1),ue?Sn(+ue,Pe):1];if(Kn(We))return We}}return}}const v=c.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,b,S,I,P,z,F,j,q]=v,Y=[S||" ",P||" ",F].join("");if(Y==="  "||Y==="  /"||Y===",,"||Y===",,,"){const se=[+b,An(+I,0,100),An(+z,0,100),j?Sn(+j,q):1];if(Kn(se))return function([ue,Pe,_e,Ce]){function Oe(We){const ut=(We+ue/30)%12,At=Pe*Math.min(_e,1-_e);return _e-At*Math.max(-1,Math.min(ut-3,9-ut,1))}return ue=Vt(ue),Pe/=100,_e/=100,[Oe(0),Oe(8),Oe(4),Ce]}(se)}}}(n);return s?new Tr(...s,!1):void 0}get rgb(){const{r:n,g:s,b:c,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[n/v,s/v,c/v,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,c,f,v]=gr(n),x=Math.sqrt(c*c+f*f);return[Math.round(1e4*x)?Vt(Math.atan2(f,c)*mr):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",gr(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,c,f]=this.rgb;return`rgba(${[n,s,c].map(v=>Math.round(255*v)).join(",")},${f})`}}Tr.black=new Tr(0,0,0,1),Tr.white=new Tr(1,1,1,1),Tr.transparent=new Tr(0,0,0,0),Tr.red=new Tr(1,0,0,1);class Yu{constructor(n,s,c){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ju{constructor(n,s,c,f,v){this.text=n,this.image=s,this.scale=c,this.fontStack=f,this.textColor=v}}class wi{constructor(n){this.sections=n}static fromString(n){return new wi([new Ju(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof wi?n:wi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Si{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Si)return n;if(typeof n=="number")return new Si([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Si(n)}}toString(){return JSON.stringify(this.values)}}const ny=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Fi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Fi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const c=n[s],f=n[s+1];if(typeof c!="string"||!ny.has(c)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Fi(n)}}toString(){return JSON.stringify(this.values)}}class Ci{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Ci({name:n,available:!1}):null}}function ra(i,n,s,c){return typeof i=="number"&&i>=0&&i<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[i,n,s,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[i,n,s,c]:[i,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ss(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Tr||i instanceof Yu||i instanceof wi||i instanceof Si||i instanceof Fi||i instanceof Ci)return!0;if(Array.isArray(i)){for(const n of i)if(!Ss(n))return!1;return!0}if(typeof i=="object"){for(const n in i)if(!Ss(i[n]))return!1;return!0}return!1}function pn(i){if(i===null)return Nr;if(typeof i=="string")return It;if(typeof i=="boolean")return Lt;if(typeof i=="number")return He;if(i instanceof Tr)return Mn;if(i instanceof Yu)return bi;if(i instanceof wi)return Bi;if(i instanceof Si)return Pt;if(i instanceof Fi)return ie;if(i instanceof Ci)return pr;if(Array.isArray(i)){const n=i.length;let s;for(const c of i){const f=pn(c);if(s){if(s===f)continue;s=Nt;break}s=f}return $(s||Nt,n)}return si}function il(i){const n=typeof i;return i===null?"":n==="string"||n==="number"||n==="boolean"?String(i):i instanceof Tr||i instanceof wi||i instanceof Si||i instanceof Fi||i instanceof Ci?i.toString():JSON.stringify(i)}class Ji{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ss(n[1]))return s.error("invalid value");const c=n[1];let f=pn(c);const v=s.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new Ji(f,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class on{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const nc={string:It,number:He,boolean:Lt,object:si};class Qi{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let c,f=1;const v=n[0];if(v==="array"){let b,S;if(n.length>2){const I=n[1];if(typeof I!="string"||!(I in nc)||I==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=nc[I],f++}else b=Nt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);S=n[2],f++}c=$(b,S)}else{if(!nc[v])throw new Error(`Types doesn't contain name = ${v}`);c=nc[v]}const x=[];for(;f<n.length;f++){const b=s.parse(n[f],f,Nt);if(!b)return null;x.push(b)}return new Qi(c,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const c=this.args[s].evaluate(n);if(!ae(this.type,pn(c)))return c;if(s===this.args.length-1)throw new on(`Expected value to be of type ${N(this.type)}, but found ${N(pn(c))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Qu={"to-boolean":Lt,"to-color":Mn,"to-number":He,"to-string":It};class eo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const c=n[0];if(!Qu[c])throw new Error(`Can't parse ${c} as it is not part of the known types`);if((c==="to-boolean"||c==="to-string")&&n.length!==2)return s.error("Expected one argument.");const f=Qu[c],v=[];for(let x=1;x<n.length;x++){const b=s.parse(n[x],x,Nt);if(!b)return null;v.push(b)}return new eo(f,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,c;for(const f of this.args){if(s=f.evaluate(n),c=null,s instanceof Tr)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(c=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:ra(s[0],s[1],s[2],s[3]),!c))return new Tr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new on(c||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const c of this.args){s=c.evaluate(n);const f=Si.parse(s);if(f)return f}throw new on(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const c of this.args){s=c.evaluate(n);const f=Fi.parse(s);if(f)return f}throw new on(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const c of this.args){if(s=c.evaluate(n),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new on(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return wi.fromString(il(this.args[0].evaluate(n)));case"resolvedImage":return Ci.fromString(il(this.args[0].evaluate(n)));default:return il(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const iy=["Unknown","Point","LineString","Polygon"];class ic{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?iy[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Tr.parse(n)),s}}class Cs{constructor(n,s,c=[],f,v=new Ft,x=[]){this.registry=n,this.path=c,this.key=c.map(b=>`[${b}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=s}parse(n,s,c,f,v={}){return s?this.concat(s,c,f)._parse(n,v):this._parse(n,v)}_parse(n,s){function c(f,v,x){return x==="assert"?new Qi(v,[f]):x==="coerce"?new eo(v,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const b=this.expectedType,S=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||S.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(b.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||S.kind!=="value"&&S.kind!=="array"){if(this.checkSubtype(b,S))return null}else x=c(x,b,s.typeAnnotation||"coerce");else x=c(x,b,s.typeAnnotation||"coerce");else x=c(x,b,s.typeAnnotation||"coerce");else x=c(x,b,s.typeAnnotation||"assert")}if(!(x instanceof Ji)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const b=new ic;try{x=new Ji(x.type,x.evaluate(b))}catch(S){return this.error(S.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,c){const f=typeof n=="number"?this.path.concat(n):this.path,v=c?this.scope.concat(c):this.scope;return new Cs(this.registry,this._isConstant,f,s||null,v,this.errors)}error(n,...s){const c=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new dr(c,n))}checkSubtype(n,s){const c=ae(n,s);return c&&this.error(c),c}}class ts{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const c=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const b=s.parse(n[v+1],v+1);if(!b)return null;c.push([x,b])}const f=s.parse(n[n.length-1],n.length-1,s.expectedType,c);return f?new ts(c,f):null}outputDefined(){return this.result.outputDefined()}}class br{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const c=n[1];return s.scope.has(c)?new br(c,s.scope.get(c)):s.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ed{constructor(n,s,c){this.type=n,this.index=s,this.input=c}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,He),f=s.parse(n[2],2,$(s.expectedType||Nt));return c&&f?new ed(f.type.itemType,c,f):null}evaluate(n){const s=this.index.evaluate(n),c=this.input.evaluate(n);if(s<0)throw new on(`Array index out of bounds: ${s} < 0.`);if(s>=c.length)throw new on(`Array index out of bounds: ${s} > ${c.length-1}.`);if(s!==Math.floor(s))throw new on(`Array index must be an integer, but found ${s} instead.`);return c[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class td{constructor(n,s){this.type=Lt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,Nt),f=s.parse(n[2],2,Nt);return c&&f?ve(c.type,[Lt,It,He,Nr,Nt])?new td(c,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${N(c.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!c)return!1;if(!we(s,["boolean","string","number","null"]))throw new on(`Expected first argument to be of type boolean, string, number or null, but found ${N(pn(s))} instead.`);if(!we(c,["string","array"]))throw new on(`Expected second argument to be of type array or string, but found ${N(pn(c))} instead.`);return c.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class na{constructor(n,s,c){this.type=He,this.needle=n,this.haystack=s,this.fromIndex=c}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,Nt),f=s.parse(n[2],2,Nt);if(!c||!f)return null;if(!ve(c.type,[Lt,It,He,Nr,Nt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${N(c.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,He);return v?new na(c,f,v):null}return new na(c,f)}evaluate(n){const s=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!we(s,["boolean","string","number","null"]))throw new on(`Expected first argument to be of type boolean, string, number or null, but found ${N(pn(s))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(n)),we(c,["string"])){const v=c.indexOf(s,f);return v===-1?-1:[...c.slice(0,v)].length}if(we(c,["array"]))return c.indexOf(s,f);throw new on(`Expected second argument to be of type array or string, but found ${N(pn(c))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class rd{constructor(n,s,c,f,v,x){this.inputType=n,this.type=s,this.input=c,this.cases=f,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let c,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v={},x=[];for(let I=2;I<n.length-1;I+=2){let P=n[I];const z=n[I+1];Array.isArray(P)||(P=[P]);const F=s.concat(I);if(P.length===0)return F.error("Expected at least one branch label.");for(const q of P){if(typeof q!="number"&&typeof q!="string")return F.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return F.error("Numeric branch labels must be integer values.");if(c){if(F.checkSubtype(c,pn(q)))return null}else c=pn(q);if(v[String(q)]!==void 0)return F.error("Branch labels must be unique.");v[String(q)]=x.length}const j=s.parse(z,I,f);if(!j)return null;f=f||j.type,x.push(j)}const b=s.parse(n[1],1,Nt);if(!b)return null;const S=s.parse(n[n.length-1],n.length-1,f);return S?b.type.kind!=="value"&&s.concat(1).checkSubtype(c,b.type)?null:new rd(c,f,b,v,x,S):null}evaluate(n){const s=this.input.evaluate(n);return(pn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class oc{constructor(n,s,c){this.type=n,this.branches=s,this.otherwise=c}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let c;s.expectedType&&s.expectedType.kind!=="value"&&(c=s.expectedType);const f=[];for(let x=1;x<n.length-1;x+=2){const b=s.parse(n[x],x,Lt);if(!b)return null;const S=s.parse(n[x+1],x+1,c);if(!S)return null;f.push([b,S]),c=c||S.type}const v=s.parse(n[n.length-1],n.length-1,c);if(!v)return null;if(!c)throw new Error("Can't infer output type");return new oc(c,f,v)}evaluate(n){for(const[s,c]of this.branches)if(s.evaluate(n))return c.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,c]of this.branches)n(s),n(c);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class ol{constructor(n,s,c,f){this.type=n,this.input=s,this.beginIndex=c,this.endIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,Nt),f=s.parse(n[2],2,He);if(!c||!f)return null;if(!ve(c.type,[$(Nt),It,Nt]))return s.error(`Expected first argument to be of type array or string, but found ${N(c.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,He);return v?new ol(c.type,c,f,v):null}return new ol(c.type,c,f)}evaluate(n){const s=this.input.evaluate(n),c=this.beginIndex.evaluate(n);let f;if(this.endIndex&&(f=this.endIndex.evaluate(n)),we(s,["string"]))return[...s].slice(c,f).join("");if(we(s,["array"]))return s.slice(c,f);throw new on(`Expected first argument to be of type array or string, but found ${N(pn(s))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function sc(i,n){const s=i.length-1;let c,f,v=0,x=s,b=0;for(;v<=x;)if(b=Math.floor((v+x)/2),c=i[b],f=i[b+1],c<=n){if(b===s||n<f)return b;v=b+1}else{if(!(c>n))throw new on("Input is not a number.");x=b-1}return 0}class ia{constructor(n,s,c){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[f,v]of c)this.labels.push(f),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const c=s.parse(n[1],1,He);if(!c)return null;const f=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const b=x===1?-1/0:n[x],S=n[x+1],I=x,P=x+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(f.length&&f[f.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const z=s.parse(S,P,v);if(!z)return null;v=v||z.type,f.push([b,z])}return new ia(v,c,f)}evaluate(n){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return c[0].evaluate(n);const v=s.length;return f>=s[v-1]?c[v-1].evaluate(n):c[sc(s,f)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Ip(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var oy=Pp;function Pp(i,n,s,c){this.cx=3*i,this.bx=3*(s-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=s,this.p2y=c}Pp.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var s=i,c=0;c<8;c++){var f=this.sampleCurveX(s)-i;if(Math.abs(f)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,b=1;for(s=i,c=0;c<20&&(f=this.sampleCurveX(s),!(Math.abs(f-i)<n));c++)i>f?x=s:b=s,s=.5*(b-x)+x;return s},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var sy=Ip(oy);function ks(i,n,s){return i+s*(n-i)}function sl(i,n,s){return i.map((c,f)=>ks(c,n[f],s))}const ai={number:ks,color:function(i,n,s,c="rgb"){switch(c){case"rgb":{const[f,v,x,b]=sl(i.rgb,n.rgb,s);return new Tr(f,v,x,b,!1)}case"hcl":{const[f,v,x,b]=i.hcl,[S,I,P,z]=n.hcl;let F,j;if(isNaN(f)||isNaN(S))isNaN(f)?isNaN(S)?F=NaN:(F=S,x!==1&&x!==0||(j=I)):(F=f,P!==1&&P!==0||(j=v));else{let Pe=S-f;S>f&&Pe>180?Pe-=360:S<f&&f-S>180&&(Pe+=360),F=f+s*Pe}const[q,Y,se,ue]=function([Pe,_e,Ce,Oe]){return Pe=isNaN(Pe)?0:Pe*Et,Xr([Ce,Math.cos(Pe)*_e,Math.sin(Pe)*_e,Oe])}([F,j??ks(v,I,s),ks(x,P,s),ks(b,z,s)]);return new Tr(q,Y,se,ue,!1)}case"lab":{const[f,v,x,b]=Xr(sl(i.lab,n.lab,s));return new Tr(f,v,x,b,!1)}}},array:sl,padding:function(i,n,s){return new Si(sl(i.values,n.values,s))},variableAnchorOffsetCollection:function(i,n,s){const c=i.values,f=n.values;if(c.length!==f.length)throw new on(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<c.length;x+=2){if(c[x]!==f[x])throw new on(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${c[x]}, to[${x}]: ${f[x]}`);v.push(c[x]);const[b,S]=c[x+1],[I,P]=f[x+1];v.push([ks(b,I,s),ks(S,P,s)])}return new Fi(v)}};class li{constructor(n,s,c,f,v){this.type=n,this.operator=s,this.interpolation=c,this.input=f,this.labels=[],this.outputs=[];for(const[x,b]of v)this.labels.push(x),this.outputs.push(b)}static interpolationFactor(n,s,c,f){let v=0;if(n.name==="exponential")v=ac(s,n.base,c,f);else if(n.name==="linear")v=ac(s,1,c,f);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new sy(x[0],x[1],x[2],x[3]).solve(ac(s,1,c,f))}return v}static parse(n,s){let[c,f,v,...x]=n;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const I=f[1];if(typeof I!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:I}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const I=f.slice(1);if(I.length!==4||I.some(P=>typeof P!="number"||P<0||P>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:I}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,He),!v)return null;const b=[];let S=null;c==="interpolate-hcl"||c==="interpolate-lab"?S=Mn:s.expectedType&&s.expectedType.kind!=="value"&&(S=s.expectedType);for(let I=0;I<x.length;I+=2){const P=x[I],z=x[I+1],F=I+3,j=I+4;if(typeof P!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(b.length&&b[b.length-1][0]>=P)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);const q=s.parse(z,j,S);if(!q)return null;S=S||q.type,b.push([P,q])}return ke(S,He)||ke(S,Mn)||ke(S,Pt)||ke(S,ie)||ke(S,$(He))?new li(S,c,f,v,b):s.error(`Type ${N(S)} is not interpolatable.`)}evaluate(n){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return c[0].evaluate(n);const v=s.length;if(f>=s[v-1])return c[v-1].evaluate(n);const x=sc(s,f),b=li.interpolationFactor(this.interpolation,f,s[x],s[x+1]),S=c[x].evaluate(n),I=c[x+1].evaluate(n);switch(this.operator){case"interpolate":return ai[this.type.kind](S,I,b);case"interpolate-hcl":return ai.color(S,I,b,"hcl");case"interpolate-lab":return ai.color(S,I,b,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ac(i,n,s,c){const f=c-s,v=i-s;return f===0?0:n===1?v/f:(Math.pow(n,v)-1)/(Math.pow(n,f)-1)}class lc{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let c=null;const f=s.expectedType;f&&f.kind!=="value"&&(c=f);const v=[];for(const b of n.slice(1)){const S=s.parse(b,1+v.length,c,void 0,{typeAnnotation:"omit"});if(!S)return null;c=c||S.type,v.push(S)}if(!c)throw new Error("No output type");const x=f&&v.some(b=>ae(f,b.type));return new lc(x?Nt:c,v)}evaluate(n){let s,c=null,f=0;for(const v of this.args)if(f++,c=v.evaluate(n),c&&c instanceof Ci&&!c.available&&(s||(s=c.name),c=null,f===this.args.length&&(c=s)),c!==null)break;return c}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function cc(i,n){return i==="=="||i==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Ep(i,n,s,c){return c.compare(n,s)===0}function oa(i,n,s){const c=i!=="=="&&i!=="!=";return class qT{constructor(v,x,b){this.type=Lt,this.lhs=v,this.rhs=x,this.collator=b,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const b=v[0];let S=x.parse(v[1],1,Nt);if(!S)return null;if(!cc(b,S.type))return x.concat(1).error(`"${b}" comparisons are not supported for type '${N(S.type)}'.`);let I=x.parse(v[2],2,Nt);if(!I)return null;if(!cc(b,I.type))return x.concat(2).error(`"${b}" comparisons are not supported for type '${N(I.type)}'.`);if(S.type.kind!==I.type.kind&&S.type.kind!=="value"&&I.type.kind!=="value")return x.error(`Cannot compare types '${N(S.type)}' and '${N(I.type)}'.`);c&&(S.type.kind==="value"&&I.type.kind!=="value"?S=new Qi(I.type,[S]):S.type.kind!=="value"&&I.type.kind==="value"&&(I=new Qi(S.type,[I])));let P=null;if(v.length===4){if(S.type.kind!=="string"&&I.type.kind!=="string"&&S.type.kind!=="value"&&I.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(P=x.parse(v[3],3,bi),!P)return null}return new qT(S,I,P)}evaluate(v){const x=this.lhs.evaluate(v),b=this.rhs.evaluate(v);if(c&&this.hasUntypedArgument){const S=pn(x),I=pn(b);if(S.kind!==I.kind||S.kind!=="string"&&S.kind!=="number")throw new on(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${I.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const S=pn(x),I=pn(b);if(S.kind!=="string"||I.kind!=="string")return n(v,x,b)}return this.collator?s(v,x,b,this.collator.evaluate(v)):n(v,x,b)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const ay=oa("==",function(i,n,s){return n===s},Ep),Mp=oa("!=",function(i,n,s){return n!==s},function(i,n,s,c){return!Ep(0,n,s,c)}),Ap=oa("<",function(i,n,s){return n<s},function(i,n,s,c){return c.compare(n,s)<0}),ly=oa(">",function(i,n,s){return n>s},function(i,n,s,c){return c.compare(n,s)>0}),cy=oa("<=",function(i,n,s){return n<=s},function(i,n,s,c){return c.compare(n,s)<=0}),zp=oa(">=",function(i,n,s){return n>=s},function(i,n,s,c){return c.compare(n,s)>=0});class al{constructor(n,s,c){this.type=bi,this.locale=c,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const c=n[1];if(typeof c!="object"||Array.isArray(c))return s.error("Collator options argument must be an object.");const f=s.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,Lt);if(!f)return null;const v=s.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,Lt);if(!v)return null;let x=null;return c.locale&&(x=s.parse(c.locale,1,It),!x)?null:new al(f,v,x)}evaluate(n){return new Yu(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class nd{constructor(n,s,c,f,v){this.type=It,this.number=n,this.locale=s,this.currency=c,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const c=s.parse(n[1],1,He);if(!c)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=s.parse(f.locale,1,It),!v))return null;let x=null;if(f.currency&&(x=s.parse(f.currency,1,It),!x))return null;let b=null;if(f["min-fraction-digits"]&&(b=s.parse(f["min-fraction-digits"],1,He),!b))return null;let S=null;return f["max-fraction-digits"]&&(S=s.parse(f["max-fraction-digits"],1,He),!S)?null:new nd(c,v,x,b,S)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class uc{constructor(n){this.type=Bi,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const c=n[1];if(!Array.isArray(c)&&typeof c=="object")return s.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=n.length-1;++x){const b=n[x];if(v&&typeof b=="object"&&!Array.isArray(b)){v=!1;let S=null;if(b["font-scale"]&&(S=s.parse(b["font-scale"],1,He),!S))return null;let I=null;if(b["text-font"]&&(I=s.parse(b["text-font"],1,$(It)),!I))return null;let P=null;if(b["text-color"]&&(P=s.parse(b["text-color"],1,Mn),!P))return null;const z=f[f.length-1];z.scale=S,z.font=I,z.textColor=P}else{const S=s.parse(n[x],1,Nt);if(!S)return null;const I=S.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:S,scale:null,font:null,textColor:null})}}return new uc(f)}evaluate(n){return new wi(this.sections.map(s=>{const c=s.content.evaluate(n);return pn(c)===pr?new Ju("",c,null,null,null):new Ju(il(c),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class id{constructor(n){this.type=pr,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const c=s.parse(n[1],1,It);return c?new id(c):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),c=Ci.fromString(s);return c&&n.availableImages&&(c.available=n.availableImages.indexOf(s)>-1),c}eachChild(n){n(this.input)}outputDefined(){return!1}}class od{constructor(n){this.type=He,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const c=s.parse(n[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${N(c.type)} instead.`):new od(c):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new on(`Expected value to be of type string or array, but found ${N(pn(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const xo=8192;function uy(i,n){const s=(180+i[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(s*f*xo),Math.round(c*f*xo)]}function sd(i,n){const s=Math.pow(2,n.z);return[(f=(i[0]/xo+n.x)/s,360*f-180),(c=(i[1]/xo+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90)];var c,f}function Ts(i,n){i[0]=Math.min(i[0],n[0]),i[1]=Math.min(i[1],n[1]),i[2]=Math.max(i[2],n[0]),i[3]=Math.max(i[3],n[1])}function rs(i,n){return!(i[0]<=n[0]||i[2]>=n[2]||i[1]<=n[1]||i[3]>=n[3])}function wr(i,n,s){const c=i[0]-n[0],f=i[1]-n[1],v=i[0]-s[0],x=i[1]-s[1];return c*x-v*f==0&&c*v<=0&&f*x<=0}function dc(i,n,s,c){return(f=[c[0]-s[0],c[1]-s[1]])[0]*(v=[n[0]-i[0],n[1]-i[1]])[1]-f[1]*v[0]!=0&&!(!Lp(i,n,s,c)||!Lp(s,c,i,n));var f,v}function dy(i,n,s){for(const c of s)for(let f=0;f<c.length-1;++f)if(dc(i,n,c[f],c[f+1]))return!0;return!1}function sa(i,n,s=!1){let c=!1;for(const b of n)for(let S=0;S<b.length-1;S++){if(wr(i,b[S],b[S+1]))return s;(v=b[S])[1]>(f=i)[1]!=(x=b[S+1])[1]>f[1]&&f[0]<(x[0]-v[0])*(f[1]-v[1])/(x[1]-v[1])+v[0]&&(c=!c)}var f,v,x;return c}function hy(i,n){for(const s of n)if(sa(i,s))return!0;return!1}function Rp(i,n){for(const s of i)if(!sa(s,n))return!1;for(let s=0;s<i.length-1;++s)if(dy(i[s],i[s+1],n))return!1;return!0}function py(i,n){for(const s of n)if(Rp(i,s))return!0;return!1}function Lp(i,n,s,c){const f=c[0]-s[0],v=c[1]-s[1],x=(i[0]-s[0])*v-f*(i[1]-s[1]),b=(n[0]-s[0])*v-f*(n[1]-s[1]);return x>0&&b<0||x<0&&b>0}function ad(i,n,s){const c=[];for(let f=0;f<i.length;f++){const v=[];for(let x=0;x<i[f].length;x++){const b=uy(i[f][x],s);Ts(n,b),v.push(b)}c.push(v)}return c}function Dp(i,n,s){const c=[];for(let f=0;f<i.length;f++){const v=ad(i[f],n,s);c.push(v)}return c}function Bp(i,n,s,c){if(i[0]<s[0]||i[0]>s[2]){const f=.5*c;let v=i[0]-s[0]>f?-c:s[0]-i[0]>f?c:0;v===0&&(v=i[0]-s[2]>f?-c:s[2]-i[0]>f?c:0),i[0]+=v}Ts(n,i)}function Fp(i,n,s,c){const f=Math.pow(2,c.z)*xo,v=[c.x*xo,c.y*xo],x=[];for(const b of i)for(const S of b){const I=[S.x+v[0],S.y+v[1]];Bp(I,n,s,f),x.push(I)}return x}function Op(i,n,s,c){const f=Math.pow(2,c.z)*xo,v=[c.x*xo,c.y*xo],x=[];for(const S of i){const I=[];for(const P of S){const z=[P.x+v[0],P.y+v[1]];Ts(n,z),I.push(z)}x.push(I)}if(n[2]-n[0]<=f/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const S of x)for(const I of S)Bp(I,n,s,f)}var b;return x}class Is{constructor(n,s){this.type=Lt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ss(n[1])){const c=n[1];if(c.type==="FeatureCollection"){const f=[];for(const v of c.features){const{type:x,coordinates:b}=v.geometry;x==="Polygon"&&f.push(b),x==="MultiPolygon"&&f.push(...b)}if(f.length)return new Is(c,{type:"MultiPolygon",coordinates:f})}else if(c.type==="Feature"){const f=c.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Is(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new Is(c,c)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,c){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(c.type==="Polygon"){const b=ad(c.coordinates,v,x),S=Fp(s.geometry(),f,v,x);if(!rs(f,v))return!1;for(const I of S)if(!sa(I,b))return!1}if(c.type==="MultiPolygon"){const b=Dp(c.coordinates,v,x),S=Fp(s.geometry(),f,v,x);if(!rs(f,v))return!1;for(const I of S)if(!hy(I,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,c){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(c.type==="Polygon"){const b=ad(c.coordinates,v,x),S=Op(s.geometry(),f,v,x);if(!rs(f,v))return!1;for(const I of S)if(!Rp(I,b))return!1}if(c.type==="MultiPolygon"){const b=Dp(c.coordinates,v,x),S=Op(s.geometry(),f,v,x);if(!rs(f,v))return!1;for(const I of S)if(!py(I,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let $p=class{constructor(i=[],n=(s,c)=>s<c?-1:s>c?1:0){if(this.data=i,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:n,compare:s}=this,c=n[i];for(;i>0;){const f=i-1>>1,v=n[f];if(s(c,v)>=0)break;n[i]=v,i=f}n[i]=c}_down(i){const{data:n,compare:s}=this,c=this.length>>1,f=n[i];for(;i<c;){let v=1+(i<<1);const x=v+1;if(x<this.length&&s(n[x],n[v])<0&&(v=x),s(n[v],f)>=0)break;n[i]=n[v],i=v}n[i]=f}};function fy(i,n,s,c,f){Np(i,n,s,c||i.length-1,f||my)}function Np(i,n,s,c,f){for(;c>s;){if(c-s>600){var v=c-s+1,x=n-s+1,b=Math.log(v),S=.5*Math.exp(2*b/3),I=.5*Math.sqrt(b*S*(v-S)/v)*(x-v/2<0?-1:1);Np(i,n,Math.max(s,Math.floor(n-x*S/v+I)),Math.min(c,Math.floor(n+(v-x)*S/v+I)),f)}var P=i[n],z=s,F=c;for(ll(i,s,n),f(i[c],P)>0&&ll(i,s,c);z<F;){for(ll(i,z,F),z++,F--;f(i[z],P)<0;)z++;for(;f(i[F],P)>0;)F--}f(i[s],P)===0?ll(i,s,F):ll(i,++F,c),F<=n&&(s=F+1),n<=F&&(c=F-1)}}function ll(i,n,s){var c=i[n];i[n]=i[s],i[s]=c}function my(i,n){return i<n?-1:i>n?1:0}function hc(i,n){if(i.length<=1)return[i];const s=[];let c,f;for(const v of i){const x=yy(v);x!==0&&(v.area=Math.abs(x),f===void 0&&(f=x<0),f===x<0?(c&&s.push(c),c=[v]):c.push(v))}if(c&&s.push(c),n>1)for(let v=0;v<s.length;v++)s[v].length<=n||(fy(s[v],n,1,s[v].length-1,gy),s[v]=s[v].slice(0,n));return s}function gy(i,n){return n.area-i.area}function yy(i){let n=0;for(let s,c,f=0,v=i.length,x=v-1;f<v;x=f++)s=i[f],c=i[x],n+=(c.x-s.x)*(s.y+c.y);return n}const jp=1/298.257223563,Vp=jp*(2-jp),Up=Math.PI/180;class ld{constructor(n){const s=6378.137*Up*1e3,c=Math.cos(n*Up),f=1/(1-Vp*(1-c*c)),v=Math.sqrt(f);this.kx=s*v*c,this.ky=s*v*f*(1-Vp)}distance(n,s){const c=this.wrap(n[0]-s[0])*this.kx,f=(n[1]-s[1])*this.ky;return Math.sqrt(c*c+f*f)}pointOnLine(n,s){let c,f,v,x,b=1/0;for(let S=0;S<n.length-1;S++){let I=n[S][0],P=n[S][1],z=this.wrap(n[S+1][0]-I)*this.kx,F=(n[S+1][1]-P)*this.ky,j=0;z===0&&F===0||(j=(this.wrap(s[0]-I)*this.kx*z+(s[1]-P)*this.ky*F)/(z*z+F*F),j>1?(I=n[S+1][0],P=n[S+1][1]):j>0&&(I+=z/this.kx*j,P+=F/this.ky*j)),z=this.wrap(s[0]-I)*this.kx,F=(s[1]-P)*this.ky;const q=z*z+F*F;q<b&&(b=q,c=I,f=P,v=S,x=j)}return{point:[c,f],index:v,t:Math.max(0,Math.min(1,x))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Wp(i,n){return n[0]-i[0]}function pc(i){return i[1]-i[0]+1}function Oo(i,n){return i[1]>=i[0]&&i[1]<n}function cd(i,n){if(i[0]>i[1])return[null,null];const s=pc(i);if(n){if(s===2)return[i,null];const f=Math.floor(s/2);return[[i[0],i[0]+f],[i[0]+f,i[1]]]}if(s===1)return[i,null];const c=Math.floor(s/2)-1;return[[i[0],i[0]+c],[i[0]+c+1,i[1]]]}function ud(i,n){if(!Oo(n,i.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let c=n[0];c<=n[1];++c)Ts(s,i[c]);return s}function dd(i){const n=[1/0,1/0,-1/0,-1/0];for(const s of i)for(const c of s)Ts(n,c);return n}function fc(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function hd(i,n,s){if(!fc(i)||!fc(n))return NaN;let c=0,f=0;return i[2]<n[0]&&(c=n[0]-i[2]),i[0]>n[2]&&(c=i[0]-n[2]),i[1]>n[3]&&(f=i[1]-n[3]),i[3]<n[1]&&(f=n[1]-i[3]),s.distance([0,0],[c,f])}function Ps(i,n,s){const c=s.pointOnLine(n,i);return s.distance(i,c.point)}function pd(i,n,s,c,f){const v=Math.min(Ps(i,[s,c],f),Ps(n,[s,c],f)),x=Math.min(Ps(s,[i,n],f),Ps(c,[i,n],f));return Math.min(v,x)}function _y(i,n,s,c,f){if(!Oo(n,i.length)||!Oo(c,s.length))return 1/0;let v=1/0;for(let x=n[0];x<n[1];++x){const b=i[x],S=i[x+1];for(let I=c[0];I<c[1];++I){const P=s[I],z=s[I+1];if(dc(b,S,P,z))return 0;v=Math.min(v,pd(b,S,P,z,f))}}return v}function Qr(i,n,s,c,f){if(!Oo(n,i.length)||!Oo(c,s.length))return NaN;let v=1/0;for(let x=n[0];x<=n[1];++x)for(let b=c[0];b<=c[1];++b)if(v=Math.min(v,f.distance(i[x],s[b])),v===0)return v;return v}function vy(i,n,s){if(sa(i,n,!0))return 0;let c=1/0;for(const f of n){const v=f[0],x=f[f.length-1];if(v!==x&&(c=Math.min(c,Ps(i,[x,v],s)),c===0))return c;const b=s.pointOnLine(f,i);if(c=Math.min(c,s.distance(i,b.point)),c===0)return c}return c}function nr(i,n,s,c){if(!Oo(n,i.length))return NaN;for(let v=n[0];v<=n[1];++v)if(sa(i[v],s,!0))return 0;let f=1/0;for(let v=n[0];v<n[1];++v){const x=i[v],b=i[v+1];for(const S of s)for(let I=0,P=S.length,z=P-1;I<P;z=I++){const F=S[z],j=S[I];if(dc(x,b,F,j))return 0;f=Math.min(f,pd(x,b,F,j,c))}}return f}function mc(i,n){for(const s of i)for(const c of s)if(sa(c,n,!0))return!0;return!1}function Lr(i,n,s,c=1/0){const f=dd(i),v=dd(n);if(c!==1/0&&hd(f,v,s)>=c)return c;if(rs(f,v)){if(mc(i,n))return 0}else if(mc(n,i))return 0;let x=1/0;for(const b of i)for(let S=0,I=b.length,P=I-1;S<I;P=S++){const z=b[P],F=b[S];for(const j of n)for(let q=0,Y=j.length,se=Y-1;q<Y;se=q++){const ue=j[se],Pe=j[q];if(dc(z,F,ue,Pe))return 0;x=Math.min(x,pd(z,F,ue,Pe,s))}}return x}function Pr(i,n,s,c,f,v){if(!v)return;const x=hd(ud(c,v),f,s);x<n&&i.push([x,v,[0,0]])}function Es(i,n,s,c,f,v,x){if(!v||!x)return;const b=hd(ud(c,v),ud(f,x),s);b<n&&i.push([b,v,x])}function cl(i,n,s,c,f=1/0){let v=Math.min(c.distance(i[0],s[0][0]),f);if(v===0)return v;const x=new $p([[0,[0,i.length-1],[0,0]]],Wp),b=dd(s);for(;x.length>0;){const S=x.pop();if(S[0]>=v)continue;const I=S[1],P=n?50:100;if(pc(I)<=P){if(!Oo(I,i.length))return NaN;if(n){const z=nr(i,I,s,c);if(isNaN(z)||z===0)return z;v=Math.min(v,z)}else for(let z=I[0];z<=I[1];++z){const F=vy(i[z],s,c);if(v=Math.min(v,F),v===0)return 0}}else{const z=cd(I,n);Pr(x,v,c,i,b,z[0]),Pr(x,v,c,i,b,z[1])}}return v}function ul(i,n,s,c,f,v=1/0){let x=Math.min(v,f.distance(i[0],s[0]));if(x===0)return x;const b=new $p([[0,[0,i.length-1],[0,s.length-1]]],Wp);for(;b.length>0;){const S=b.pop();if(S[0]>=x)continue;const I=S[1],P=S[2],z=n?50:100,F=c?50:100;if(pc(I)<=z&&pc(P)<=F){if(!Oo(I,i.length)&&Oo(P,s.length))return NaN;let j;if(n&&c)j=_y(i,I,s,P,f),x=Math.min(x,j);else if(n&&!c){const q=i.slice(I[0],I[1]+1);for(let Y=P[0];Y<=P[1];++Y)if(j=Ps(s[Y],q,f),x=Math.min(x,j),x===0)return x}else if(!n&&c){const q=s.slice(P[0],P[1]+1);for(let Y=I[0];Y<=I[1];++Y)if(j=Ps(i[Y],q,f),x=Math.min(x,j),x===0)return x}else j=Qr(i,I,s,P,f),x=Math.min(x,j)}else{const j=cd(I,n),q=cd(P,c);Es(b,x,f,i,s,j[0],q[0]),Es(b,x,f,i,s,j[0],q[1]),Es(b,x,f,i,s,j[1],q[0]),Es(b,x,f,i,s,j[1],q[1])}}return x}function fd(i){return i.type==="MultiPolygon"?i.coordinates.map(n=>({type:"Polygon",coordinates:n})):i.type==="MultiLineString"?i.coordinates.map(n=>({type:"LineString",coordinates:n})):i.type==="MultiPoint"?i.coordinates.map(n=>({type:"Point",coordinates:n})):[i]}class Ms{constructor(n,s){this.type=He,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ss(n[1])){const c=n[1];if(c.type==="FeatureCollection")return new Ms(c,c.features.map(f=>fd(f.geometry)).flat());if(c.type==="Feature")return new Ms(c,fd(c.geometry));if("type"in c&&"coordinates"in c)return new Ms(c,fd(c))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,c){const f=s.geometry(),v=f.flat().map(S=>sd([S.x,S.y],s.canonical));if(f.length===0)return NaN;const x=new ld(v[0][1]);let b=1/0;for(const S of c){switch(S.type){case"Point":b=Math.min(b,ul(v,!1,[S.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,ul(v,!1,S.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,cl(v,!1,S.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,c){const f=s.geometry(),v=f.flat().map(S=>sd([S.x,S.y],s.canonical));if(f.length===0)return NaN;const x=new ld(v[0][1]);let b=1/0;for(const S of c){switch(S.type){case"Point":b=Math.min(b,ul(v,!0,[S.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,ul(v,!0,S.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,cl(v,!0,S.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,c){const f=s.geometry();if(f.length===0||f[0].length===0)return NaN;const v=hc(f,0).map(S=>S.map(I=>I.map(P=>sd([P.x,P.y],s.canonical)))),x=new ld(v[0][0][0][1]);let b=1/0;for(const S of c)for(const I of v){switch(S.type){case"Point":b=Math.min(b,cl([S.coordinates],!1,I,x,b));break;case"LineString":b=Math.min(b,cl(S.coordinates,!0,I,x,b));break;case"Polygon":b=Math.min(b,Lr(I,S.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const aa={"==":ay,"!=":Mp,">":ly,"<":Ap,">=":zp,"<=":cy,array:Qi,at:ed,boolean:Qi,case:oc,coalesce:lc,collator:al,format:uc,image:id,in:td,"index-of":na,interpolate:li,"interpolate-hcl":li,"interpolate-lab":li,length:od,let:ts,literal:Ji,match:rd,number:Qi,"number-format":nd,object:Qi,slice:ol,step:ia,string:Qi,"to-boolean":eo,"to-color":eo,"to-number":eo,"to-string":eo,var:br,within:Is,distance:Ms};class Oi{constructor(n,s,c,f){this.name=n,this.type=s,this._evaluate=c,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const c=n[0],f=Oi.definitions[c];if(!f)return s.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,b=x.filter(([I])=>!Array.isArray(I)||I.length===n.length-1);let S=null;for(const[I,P]of b){S=new Cs(s.registry,dl,s.path,null,s.scope);const z=[];let F=!1;for(let j=1;j<n.length;j++){const q=n[j],Y=Array.isArray(I)?I[j-1]:I.type,se=S.parse(q,1+z.length,Y);if(!se){F=!0;break}z.push(se)}if(!F)if(Array.isArray(I)&&I.length!==z.length)S.error(`Expected ${I.length} arguments, but found ${z.length} instead.`);else{for(let j=0;j<z.length;j++){const q=Array.isArray(I)?I[j]:I.type,Y=z[j];S.concat(j+1).checkSubtype(q,Y.type)}if(S.errors.length===0)return new Oi(c,v,P,z)}}if(b.length===1)s.errors.push(...S.errors);else{const I=(b.length?b:x).map(([z])=>{return F=z,Array.isArray(F)?`(${F.map(N).join(", ")})`:`(${N(F.type)}...)`;var F}).join(" | "),P=[];for(let z=1;z<n.length;z++){const F=s.parse(n[z],1+P.length);if(!F)return null;P.push(N(F.type))}s.error(`Expected arguments of type ${I}, but found (${P.join(", ")}) instead.`)}return null}static register(n,s){Oi.definitions=s;for(const c in s)n[c]=Oi}}function md(i,[n,s,c,f]){n=n.evaluate(i),s=s.evaluate(i),c=c.evaluate(i);const v=f?f.evaluate(i):1,x=ra(n,s,c,v);if(x)throw new on(x);return new Tr(n/255,s/255,c/255,v,!1)}function gd(i,n){return i in n}function yd(i,n){const s=n[i];return s===void 0?null:s}function As(i){return{type:i}}function dl(i){if(i instanceof br)return dl(i.boundExpression);if(i instanceof Oi&&i.name==="error"||i instanceof al||i instanceof Is||i instanceof Ms)return!1;const n=i instanceof eo||i instanceof Qi;let s=!0;return i.eachChild(c=>{s=n?s&&dl(c):s&&c instanceof Ji}),!!s&&hl(i)&&pl(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function hl(i){if(i instanceof Oi&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Is||i instanceof Ms)return!1;let n=!0;return i.eachChild(s=>{n&&!hl(s)&&(n=!1)}),n}function la(i){if(i instanceof Oi&&i.name==="feature-state")return!1;let n=!0;return i.eachChild(s=>{n&&!la(s)&&(n=!1)}),n}function pl(i,n){if(i instanceof Oi&&n.indexOf(i.name)>=0)return!1;let s=!0;return i.eachChild(c=>{s&&!pl(c,n)&&(s=!1)}),s}function gc(i){return{result:"success",value:i}}function ca(i){return{result:"error",value:i}}function ua(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Hp(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function _d(i){return!!i.expression&&i.expression.interpolated}function vr(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function yc(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function xy(i){return i}function Gp(i,n){const s=n.type==="color",c=i.stops&&typeof i.stops[0][0]=="object",f=c||!(c||i.property!==void 0),v=i.type||(_d(n)?"exponential":"interval");if(s||n.type==="padding"){const P=s?Tr.parse:Si.parse;(i=dn({},i)).stops&&(i.stops=i.stops.map(z=>[z[0],P(z[1])])),i.default=P(i.default?i.default:n.default)}if(i.colorSpace&&(x=i.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var x;let b,S,I;if(v==="exponential")b=Zp;else if(v==="interval")b=_c;else if(v==="categorical"){b=qp,S=Object.create(null);for(const P of i.stops)S[P[0]]=P[1];I=typeof i.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);b=Xp}if(c){const P={},z=[];for(let q=0;q<i.stops.length;q++){const Y=i.stops[q],se=Y[0].zoom;P[se]===void 0&&(P[se]={zoom:se,type:i.type,property:i.property,default:i.default,stops:[]},z.push(se)),P[se].stops.push([Y[0].value,Y[1]])}const F=[];for(const q of z)F.push([P[q].zoom,Gp(P[q],n)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:li.interpolationFactor.bind(void 0,j),zoomStops:F.map(q=>q[0]),evaluate:({zoom:q},Y)=>Zp({stops:F,base:i.base},n,q).evaluate(q,Y)}}if(f){const P=v==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:li.interpolationFactor.bind(void 0,P),zoomStops:i.stops.map(z=>z[0]),evaluate:({zoom:z})=>b(i,n,z,S,I)}}return{kind:"source",evaluate(P,z){const F=z&&z.properties?z.properties[i.property]:void 0;return F===void 0?da(i.default,n.default):b(i,n,F,S,I)}}}function da(i,n,s){return i!==void 0?i:n!==void 0?n:s!==void 0?s:void 0}function qp(i,n,s,c,f){return da(typeof s===f?c[s]:void 0,i.default,n.default)}function _c(i,n,s){if(vr(s)!=="number")return da(i.default,n.default);const c=i.stops.length;if(c===1||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[c-1][0])return i.stops[c-1][1];const f=sc(i.stops.map(v=>v[0]),s);return i.stops[f][1]}function Zp(i,n,s){const c=i.base!==void 0?i.base:1;if(vr(s)!=="number")return da(i.default,n.default);const f=i.stops.length;if(f===1||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[f-1][0])return i.stops[f-1][1];const v=sc(i.stops.map(P=>P[0]),s),x=function(P,z,F,j){const q=j-F,Y=P-F;return q===0?0:z===1?Y/q:(Math.pow(z,Y)-1)/(Math.pow(z,q)-1)}(s,c,i.stops[v][0],i.stops[v+1][0]),b=i.stops[v][1],S=i.stops[v+1][1],I=ai[n.type]||xy;return typeof b.evaluate=="function"?{evaluate(...P){const z=b.evaluate.apply(void 0,P),F=S.evaluate.apply(void 0,P);if(z!==void 0&&F!==void 0)return I(z,F,x,i.colorSpace)}}:I(b,S,x,i.colorSpace)}function Xp(i,n,s){switch(n.type){case"color":s=Tr.parse(s);break;case"formatted":s=wi.fromString(s.toString());break;case"resolvedImage":s=Ci.fromString(s.toString());break;case"padding":s=Si.parse(s);break;default:vr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return da(s,i.default,n.default)}Oi.register(aa,{error:[{kind:"error"},[It],(i,[n])=>{throw new on(n.evaluate(i))}],typeof:[It,[Nt],(i,[n])=>N(pn(n.evaluate(i)))],"to-rgba":[$(He,4),[Mn],(i,[n])=>{const[s,c,f,v]=n.evaluate(i).rgb;return[255*s,255*c,255*f,v]}],rgb:[Mn,[He,He,He],md],rgba:[Mn,[He,He,He,He],md],has:{type:Lt,overloads:[[[It],(i,[n])=>gd(n.evaluate(i),i.properties())],[[It,si],(i,[n,s])=>gd(n.evaluate(i),s.evaluate(i))]]},get:{type:Nt,overloads:[[[It],(i,[n])=>yd(n.evaluate(i),i.properties())],[[It,si],(i,[n,s])=>yd(n.evaluate(i),s.evaluate(i))]]},"feature-state":[Nt,[It],(i,[n])=>yd(n.evaluate(i),i.featureState||{})],properties:[si,[],i=>i.properties()],"geometry-type":[It,[],i=>i.geometryType()],id:[Nt,[],i=>i.id()],zoom:[He,[],i=>i.globals.zoom],"heatmap-density":[He,[],i=>i.globals.heatmapDensity||0],"line-progress":[He,[],i=>i.globals.lineProgress||0],accumulated:[Nt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[He,As(He),(i,n)=>{let s=0;for(const c of n)s+=c.evaluate(i);return s}],"*":[He,As(He),(i,n)=>{let s=1;for(const c of n)s*=c.evaluate(i);return s}],"-":{type:He,overloads:[[[He,He],(i,[n,s])=>n.evaluate(i)-s.evaluate(i)],[[He],(i,[n])=>-n.evaluate(i)]]},"/":[He,[He,He],(i,[n,s])=>n.evaluate(i)/s.evaluate(i)],"%":[He,[He,He],(i,[n,s])=>n.evaluate(i)%s.evaluate(i)],ln2:[He,[],()=>Math.LN2],pi:[He,[],()=>Math.PI],e:[He,[],()=>Math.E],"^":[He,[He,He],(i,[n,s])=>Math.pow(n.evaluate(i),s.evaluate(i))],sqrt:[He,[He],(i,[n])=>Math.sqrt(n.evaluate(i))],log10:[He,[He],(i,[n])=>Math.log(n.evaluate(i))/Math.LN10],ln:[He,[He],(i,[n])=>Math.log(n.evaluate(i))],log2:[He,[He],(i,[n])=>Math.log(n.evaluate(i))/Math.LN2],sin:[He,[He],(i,[n])=>Math.sin(n.evaluate(i))],cos:[He,[He],(i,[n])=>Math.cos(n.evaluate(i))],tan:[He,[He],(i,[n])=>Math.tan(n.evaluate(i))],asin:[He,[He],(i,[n])=>Math.asin(n.evaluate(i))],acos:[He,[He],(i,[n])=>Math.acos(n.evaluate(i))],atan:[He,[He],(i,[n])=>Math.atan(n.evaluate(i))],min:[He,As(He),(i,n)=>Math.min(...n.map(s=>s.evaluate(i)))],max:[He,As(He),(i,n)=>Math.max(...n.map(s=>s.evaluate(i)))],abs:[He,[He],(i,[n])=>Math.abs(n.evaluate(i))],round:[He,[He],(i,[n])=>{const s=n.evaluate(i);return s<0?-Math.round(-s):Math.round(s)}],floor:[He,[He],(i,[n])=>Math.floor(n.evaluate(i))],ceil:[He,[He],(i,[n])=>Math.ceil(n.evaluate(i))],"filter-==":[Lt,[It,Nt],(i,[n,s])=>i.properties()[n.value]===s.value],"filter-id-==":[Lt,[Nt],(i,[n])=>i.id()===n.value],"filter-type-==":[Lt,[It],(i,[n])=>i.geometryType()===n.value],"filter-<":[Lt,[It,Nt],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c<f}],"filter-id-<":[Lt,[Nt],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s<c}],"filter->":[Lt,[It,Nt],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c>f}],"filter-id->":[Lt,[Nt],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s>c}],"filter-<=":[Lt,[It,Nt],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c<=f}],"filter-id-<=":[Lt,[Nt],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s<=c}],"filter->=":[Lt,[It,Nt],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c>=f}],"filter-id->=":[Lt,[Nt],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s>=c}],"filter-has":[Lt,[Nt],(i,[n])=>n.value in i.properties()],"filter-has-id":[Lt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Lt,[$(It)],(i,[n])=>n.value.indexOf(i.geometryType())>=0],"filter-id-in":[Lt,[$(Nt)],(i,[n])=>n.value.indexOf(i.id())>=0],"filter-in-small":[Lt,[It,$(Nt)],(i,[n,s])=>s.value.indexOf(i.properties()[n.value])>=0],"filter-in-large":[Lt,[It,$(Nt)],(i,[n,s])=>function(c,f,v,x){for(;v<=x;){const b=v+x>>1;if(f[b]===c)return!0;f[b]>c?x=b-1:v=b+1}return!1}(i.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Lt,overloads:[[[Lt,Lt],(i,[n,s])=>n.evaluate(i)&&s.evaluate(i)],[As(Lt),(i,n)=>{for(const s of n)if(!s.evaluate(i))return!1;return!0}]]},any:{type:Lt,overloads:[[[Lt,Lt],(i,[n,s])=>n.evaluate(i)||s.evaluate(i)],[As(Lt),(i,n)=>{for(const s of n)if(s.evaluate(i))return!0;return!1}]]},"!":[Lt,[Lt],(i,[n])=>!n.evaluate(i)],"is-supported-script":[Lt,[It],(i,[n])=>{const s=i.globals&&i.globals.isSupportedScript;return!s||s(n.evaluate(i))}],upcase:[It,[It],(i,[n])=>n.evaluate(i).toUpperCase()],downcase:[It,[It],(i,[n])=>n.evaluate(i).toLowerCase()],concat:[It,As(Nt),(i,n)=>n.map(s=>il(s.evaluate(i))).join("")],"resolved-locale":[It,[bi],(i,[n])=>n.evaluate(i).resolvedLocale()]});class vc{constructor(n,s){var c;this.expression=n,this._warningHistory={},this._evaluator=new ic,this._defaultValue=s?(c=s).type==="color"&&yc(c.default)?new Tr(0,0,0,0):c.type==="color"?Tr.parse(c.default)||null:c.type==="padding"?Si.parse(c.default)||null:c.type==="variableAnchorOffsetCollection"?Fi.parse(c.default)||null:c.default===void 0?null:c.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,c,f,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=c,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,c,f,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=c||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new on(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function xc(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in aa}function ha(i,n){const s=new Cs(aa,dl,[],n?function(f){const v={color:Mn,string:It,number:He,enum:It,boolean:Lt,formatted:Bi,padding:Pt,resolvedImage:pr,variableAnchorOffsetCollection:ie};return f.type==="array"?$(v[f.value]||Nt,f.length):v[f.type]}(n):void 0),c=s.parse(i,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?gc(new vc(c,n)):ca(s.errors)}class pa{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!la(s.expression)}evaluateWithoutErrorHandling(n,s,c,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,c,f,v,x)}evaluate(n,s,c,f,v,x){return this._styleExpression.evaluate(n,s,c,f,v,x)}}class fa{constructor(n,s,c,f){this.kind=n,this.zoomStops=c,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!la(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,s,c,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,c,f,v,x)}evaluate(n,s,c,f,v,x){return this._styleExpression.evaluate(n,s,c,f,v,x)}interpolationFactor(n,s,c){return this.interpolationType?li.interpolationFactor(this.interpolationType,n,s,c):0}}function vd(i,n){const s=ha(i,n);if(s.result==="error")return s;const c=s.value.expression,f=hl(c);if(!f&&!ua(n))return ca([new dr("","data expressions not supported")]);const v=pl(c,["zoom"]);if(!v&&!Hp(n))return ca([new dr("","zoom expressions not supported")]);const x=fl(c);return x||v?x instanceof dr?ca([x]):x instanceof li&&!_d(n)?ca([new dr("",'"interpolate" expressions cannot be used with this property')]):gc(x?new fa(f?"camera":"composite",s.value,x.labels,x instanceof li?x.interpolation:void 0):new pa(f?"constant":"source",s.value)):ca([new dr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ma{constructor(n,s){this._parameters=n,this._specification=s,dn(this,Gp(this._parameters,this._specification))}static deserialize(n){return new ma(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function fl(i){let n=null;if(i instanceof ts)n=fl(i.result);else if(i instanceof lc){for(const s of i.args)if(n=fl(s),n)break}else(i instanceof ia||i instanceof li)&&i.input instanceof Oi&&i.input.name==="zoom"&&(n=i);return n instanceof dr||i.eachChild(s=>{const c=fl(s);c instanceof dr?n=c:!n&&c?n=new dr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&c&&n!==c&&(n=new dr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function bc(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const n of i.slice(1))if(!bc(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const wc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xd(i){if(i==null)return{filter:()=>!0,needGeometry:!1};bc(i)||(i=Sc(i));const n=ha(i,wc);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,c,f)=>n.value.evaluate(s,c,{},f),needGeometry:Kp(i)}}function by(i,n){return i<n?-1:i>n?1:0}function Kp(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let n=1;n<i.length;n++)if(Kp(i[n]))return!0;return!1}function Sc(i){if(!i)return!0;const n=i[0];return i.length<=1?n!=="any":n==="=="?bd(i[1],i[2],"=="):n==="!="?On(bd(i[1],i[2],"==")):n==="<"||n===">"||n==="<="||n===">="?bd(i[1],i[2],n):n==="any"?(s=i.slice(1),["any"].concat(s.map(Sc))):n==="all"?["all"].concat(i.slice(1).map(Sc)):n==="none"?["all"].concat(i.slice(1).map(Sc).map(On)):n==="in"?ml(i[1],i.slice(2)):n==="!in"?On(ml(i[1],i.slice(2))):n==="has"?gl(i[1]):n!=="!has"||On(gl(i[1]));var s}function bd(i,n,s){switch(i){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,i,n]}}function ml(i,n){if(n.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",i,["literal",n.sort(by)]]:["filter-in-small",i,["literal",n]]}}function gl(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function On(i){return["!",i]}function zs(i){const n=typeof i;if(n==="number"||n==="boolean"||n==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let f="[";for(const v of i)f+=`${zs(v)},`;return`${f}]`}const s=Object.keys(i).sort();let c="{";for(let f=0;f<s.length;f++)c+=`${JSON.stringify(s[f])}:${zs(i[s[f]])},`;return`${c}}`}function Yp(i){let n="";for(const s of hr)n+=`/${zs(i[s])}`;return n}function Jp(i){const n=i.value;return n?[new qe(i.key,n,"constants have been deprecated as of v8")]:[]}function en(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function to(i){if(Array.isArray(i))return i.map(to);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const n={};for(const s in i)n[s]=to(i[s]);return n}return en(i)}function ki(i){const n=i.key,s=i.value,c=i.valueSpec||{},f=i.objectElementValidators||{},v=i.style,x=i.styleSpec,b=i.validateSpec;let S=[];const I=vr(s);if(I!=="object")return[new qe(n,s,`object expected, ${I} found`)];for(const P in s){const z=P.split(".")[0],F=c[z]||c["*"];let j;if(f[z])j=f[z];else if(c[z])j=b;else if(f["*"])j=f["*"];else{if(!c["*"]){S.push(new qe(n,s[P],`unknown property "${P}"`));continue}j=b}S=S.concat(j({key:(n&&`${n}.`)+P,value:s[P],valueSpec:F,style:v,styleSpec:x,object:s,objectKey:P,validateSpec:b},s))}for(const P in c)f[P]||c[P].required&&c[P].default===void 0&&s[P]===void 0&&S.push(new qe(n,s,`missing required property "${P}"`));return S}function yl(i){const n=i.value,s=i.valueSpec,c=i.style,f=i.styleSpec,v=i.key,x=i.arrayElementValidator||i.validateSpec;if(vr(n)!=="array")return[new qe(v,n,`array expected, ${vr(n)} found`)];if(s.length&&n.length!==s.length)return[new qe(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new qe(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let b={type:s.value,values:s.values};f.$version<7&&(b.function=s.function),vr(s.value)==="object"&&(b=s.value);let S=[];for(let I=0;I<n.length;I++)S=S.concat(x({array:n,arrayIndex:I,value:n[I],valueSpec:b,validateSpec:i.validateSpec,style:c,styleSpec:f,key:`${v}[${I}]`}));return S}function wd(i){const n=i.key,s=i.value,c=i.valueSpec;let f=vr(s);return f==="number"&&s!=s&&(f="NaN"),f!=="number"?[new qe(n,s,`number expected, ${f} found`)]:"minimum"in c&&s<c.minimum?[new qe(n,s,`${s} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&s>c.maximum?[new qe(n,s,`${s} is greater than the maximum value ${c.maximum}`)]:[]}function Cc(i){const n=i.valueSpec,s=en(i.value.type);let c,f,v,x={};const b=s!=="categorical"&&i.value.property===void 0,S=!b,I=vr(i.value.stops)==="array"&&vr(i.value.stops[0])==="array"&&vr(i.value.stops[0][0])==="object",P=ki({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(j){if(s==="identity")return[new qe(j.key,j.value,'identity function may not have a "stops" property')];let q=[];const Y=j.value;return q=q.concat(yl({key:j.key,value:Y,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:z})),vr(Y)==="array"&&Y.length===0&&q.push(new qe(j.key,Y,"array must have at least one stop")),q},default:function(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:n,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}});return s==="identity"&&b&&P.push(new qe(i.key,i.value,'missing required property "property"')),s==="identity"||i.value.stops||P.push(new qe(i.key,i.value,'missing required property "stops"')),s==="exponential"&&i.valueSpec.expression&&!_d(i.valueSpec)&&P.push(new qe(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!ua(i.valueSpec)?P.push(new qe(i.key,i.value,"property functions not supported")):b&&!Hp(i.valueSpec)&&P.push(new qe(i.key,i.value,"zoom functions not supported"))),s!=="categorical"&&!I||i.value.property!==void 0||P.push(new qe(i.key,i.value,'"property" property is required')),P;function z(j){let q=[];const Y=j.value,se=j.key;if(vr(Y)!=="array")return[new qe(se,Y,`array expected, ${vr(Y)} found`)];if(Y.length!==2)return[new qe(se,Y,`array length 2 expected, length ${Y.length} found`)];if(I){if(vr(Y[0])!=="object")return[new qe(se,Y,`object expected, ${vr(Y[0])} found`)];if(Y[0].zoom===void 0)return[new qe(se,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new qe(se,Y,"object stop key must have value")];if(v&&v>en(Y[0].zoom))return[new qe(se,Y[0].zoom,"stop zoom values must appear in ascending order")];en(Y[0].zoom)!==v&&(v=en(Y[0].zoom),f=void 0,x={}),q=q.concat(ki({key:`${se}[0]`,value:Y[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:wd,value:F}}))}else q=q.concat(F({key:`${se}[0]`,value:Y[0],validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},Y));return xc(to(Y[1]))?q.concat([new qe(`${se}[1]`,Y[1],"expressions are not allowed in function stops.")]):q.concat(j.validateSpec({key:`${se}[1]`,value:Y[1],valueSpec:n,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function F(j,q){const Y=vr(j.value),se=en(j.value),ue=j.value!==null?j.value:q;if(c){if(Y!==c)return[new qe(j.key,ue,`${Y} stop domain type must match previous stop domain type ${c}`)]}else c=Y;if(Y!=="number"&&Y!=="string"&&Y!=="boolean")return[new qe(j.key,ue,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&s!=="categorical"){let Pe=`number expected, ${Y} found`;return ua(n)&&s===void 0&&(Pe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe(j.key,ue,Pe)]}return s!=="categorical"||Y!=="number"||isFinite(se)&&Math.floor(se)===se?s!=="categorical"&&Y==="number"&&f!==void 0&&se<f?[new qe(j.key,ue,"stop domain values must appear in ascending order")]:(f=se,s==="categorical"&&se in x?[new qe(j.key,ue,"stop domain values must be unique")]:(x[se]=!0,[])):[new qe(j.key,ue,`integer expected, found ${se}`)]}}function ga(i){const n=(i.expressionContext==="property"?vd:ha)(to(i.value),i.valueSpec);if(n.result==="error")return n.value.map(c=>new qe(`${i.key}${c.key}`,i.value,c.message));const s=n.value.expression||n.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!s.outputDefined())return[new qe(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!la(s))return[new qe(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!la(s))return[new qe(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!pl(s,["zoom","feature-state"]))return[new qe(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!hl(s))return[new qe(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $o(i){const n=i.key,s=i.value,c=i.valueSpec,f=[];return Array.isArray(c.values)?c.values.indexOf(en(s))===-1&&f.push(new qe(n,s,`expected one of [${c.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(c.values).indexOf(en(s))===-1&&f.push(new qe(n,s,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function Sd(i){return bc(to(i.value))?ga(dn({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):kc(i)}function kc(i){const n=i.value,s=i.key;if(vr(n)!=="array")return[new qe(s,n,`array expected, ${vr(n)} found`)];const c=i.styleSpec;let f,v=[];if(n.length<1)return[new qe(s,n,"filter array must have at least 1 element")];switch(v=v.concat($o({key:`${s}[0]`,value:n[0],valueSpec:c.filter_operator,style:i.style,styleSpec:i.styleSpec})),en(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&en(n[1])==="$type"&&v.push(new qe(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new qe(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=vr(n[1]),f!=="string"&&v.push(new qe(`${s}[1]`,n[1],`string expected, ${f} found`)));for(let x=2;x<n.length;x++)f=vr(n[x]),en(n[1])==="$type"?v=v.concat($o({key:`${s}[${x}]`,value:n[x],valueSpec:c.geometry_type,style:i.style,styleSpec:i.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new qe(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(kc({key:`${s}[${x}]`,value:n[x],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":f=vr(n[1]),n.length!==2?v.push(new qe(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new qe(`${s}[1]`,n[1],`string expected, ${f} found`))}return v}function Cd(i,n){const s=i.key,c=i.validateSpec,f=i.style,v=i.styleSpec,x=i.value,b=i.objectKey,S=v[`${n}_${i.layerType}`];if(!S)return[];const I=b.match(/^(.*)-transition$/);if(n==="paint"&&I&&S[I[1]]&&S[I[1]].transition)return c({key:s,value:x,valueSpec:v.transition,style:f,styleSpec:v});const P=i.valueSpec||S[b];if(!P)return[new qe(s,x,`unknown property "${b}"`)];let z;if(vr(x)==="string"&&ua(P)&&!P.tokens&&(z=/^{([^}]+)}$/.exec(x)))return[new qe(s,x,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const F=[];return i.layerType==="symbol"&&(b==="text-field"&&f&&!f.glyphs&&F.push(new qe(s,x,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&yc(to(x))&&en(x.type)==="identity"&&F.push(new qe(s,x,'"text-font" does not support identity functions'))),F.concat(c({key:i.key,value:x,valueSpec:P,style:f,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:b}))}function Tc(i){return Cd(i,"paint")}function kd(i){return Cd(i,"layout")}function Td(i){let n=[];const s=i.value,c=i.key,f=i.style,v=i.styleSpec;s.type||s.ref||n.push(new qe(c,s,'either "type" or "ref" is required'));let x=en(s.type);const b=en(s.ref);if(s.id){const S=en(s.id);for(let I=0;I<i.arrayIndex;I++){const P=f.layers[I];en(P.id)===S&&n.push(new qe(c,s.id,`duplicate layer id "${s.id}", previously used at line ${P.id.__line__}`))}}if("ref"in s){let S;["type","source","source-layer","filter","layout"].forEach(I=>{I in s&&n.push(new qe(c,s[I],`"${I}" is prohibited for ref layers`))}),f.layers.forEach(I=>{en(I.id)===b&&(S=I)}),S?S.ref?n.push(new qe(c,s.ref,"ref cannot reference another ref layer")):x=en(S.type):n.push(new qe(c,s.ref,`ref layer "${b}" not found`))}else if(x!=="background")if(s.source){const S=f.sources&&f.sources[s.source],I=S&&en(S.type);S?I==="vector"&&x==="raster"?n.push(new qe(c,s.source,`layer "${s.id}" requires a raster source`)):I!=="raster-dem"&&x==="hillshade"?n.push(new qe(c,s.source,`layer "${s.id}" requires a raster-dem source`)):I==="raster"&&x!=="raster"?n.push(new qe(c,s.source,`layer "${s.id}" requires a vector source`)):I!=="vector"||s["source-layer"]?I==="raster-dem"&&x!=="hillshade"?n.push(new qe(c,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||I==="geojson"&&S.lineMetrics||n.push(new qe(c,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new qe(c,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new qe(c,s.source,`source "${s.source}" not found`))}else n.push(new qe(c,s,'missing required property "source"'));return n=n.concat(ki({key:c,value:s,valueSpec:v.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${c}.type`,value:s.type,valueSpec:v.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:s,objectKey:"type"}),filter:Sd,layout:S=>ki({layer:s,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":I=>kd(dn({layerType:x},I))}}),paint:S=>ki({layer:s,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":I=>Tc(dn({layerType:x},I))}})}})),n}function Rs(i){const n=i.value,s=i.key,c=vr(n);return c!=="string"?[new qe(s,n,`string expected, ${c} found`)]:[]}const Ic={promoteId:function({key:i,value:n}){if(vr(n)==="string")return Rs({key:i,value:n});{const s=[];for(const c in n)s.push(...Rs({key:`${i}.${c}`,value:n[c]}));return s}}};function _l(i){const n=i.value,s=i.key,c=i.styleSpec,f=i.style,v=i.validateSpec;if(!n.type)return[new qe(s,n,'"type" is required')];const x=en(n.type);let b;switch(x){case"vector":case"raster":return b=ki({key:s,value:n,valueSpec:c[`source_${x.replace("-","_")}`],style:i.style,styleSpec:c,objectElementValidators:Ic,validateSpec:v}),b;case"raster-dem":return b=function(S){var I;const P=(I=S.sourceName)!==null&&I!==void 0?I:"",z=S.value,F=S.styleSpec,j=F.source_raster_dem,q=S.style;let Y=[];const se=vr(z);if(z===void 0)return Y;if(se!=="object")return Y.push(new qe("source_raster_dem",z,`object expected, ${se} found`)),Y;const ue=en(z.encoding)==="custom",Pe=["redFactor","greenFactor","blueFactor","baseShift"],_e=S.value.encoding?`"${S.value.encoding}"`:"Default";for(const Ce in z)!ue&&Pe.includes(Ce)?Y.push(new qe(Ce,z[Ce],`In "${P}": "${Ce}" is only valid when "encoding" is set to "custom". ${_e} encoding found`)):j[Ce]?Y=Y.concat(S.validateSpec({key:Ce,value:z[Ce],valueSpec:j[Ce],validateSpec:S.validateSpec,style:q,styleSpec:F})):Y.push(new qe(Ce,z[Ce],`unknown property "${Ce}"`));return Y}({sourceName:s,value:n,style:i.style,styleSpec:c,validateSpec:v}),b;case"geojson":if(b=ki({key:s,value:n,valueSpec:c.source_geojson,style:f,styleSpec:c,validateSpec:v,objectElementValidators:Ic}),n.cluster)for(const S in n.clusterProperties){const[I,P]=n.clusterProperties[S],z=typeof I=="string"?[I,["accumulated"],["get",S]]:I;b.push(...ga({key:`${s}.${S}.map`,value:P,expressionContext:"cluster-map"})),b.push(...ga({key:`${s}.${S}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return b;case"video":return ki({key:s,value:n,valueSpec:c.source_video,style:f,validateSpec:v,styleSpec:c});case"image":return ki({key:s,value:n,valueSpec:c.source_image,style:f,validateSpec:v,styleSpec:c});case"canvas":return[new qe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $o({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Id(i){const n=i.value,s=i.styleSpec,c=s.light,f=i.style;let v=[];const x=vr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new qe("light",n,`object expected, ${x} found`)]),v;for(const b in n){const S=b.match(/^(.*)-transition$/);v=v.concat(S&&c[S[1]]&&c[S[1]].transition?i.validateSpec({key:b,value:n[b],valueSpec:s.transition,validateSpec:i.validateSpec,style:f,styleSpec:s}):c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],validateSpec:i.validateSpec,style:f,styleSpec:s}):[new qe(b,n[b],`unknown property "${b}"`)])}return v}function Pd(i){const n=i.value,s=i.styleSpec,c=s.sky,f=i.style,v=vr(n);if(n===void 0)return[];if(v!=="object")return[new qe("sky",n,`object expected, ${v} found`)];let x=[];for(const b in n)x=x.concat(c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],style:f,styleSpec:s}):[new qe(b,n[b],`unknown property "${b}"`)]);return x}function Ed(i){const n=i.value,s=i.styleSpec,c=s.terrain,f=i.style;let v=[];const x=vr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new qe("terrain",n,`object expected, ${x} found`)]),v;for(const b in n)v=v.concat(c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],validateSpec:i.validateSpec,style:f,styleSpec:s}):[new qe(b,n[b],`unknown property "${b}"`)]);return v}function Md(i){let n=[];const s=i.value,c=i.key;if(Array.isArray(s)){const f=[],v=[];for(const x in s)s[x].id&&f.includes(s[x].id)&&n.push(new qe(c,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),f.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new qe(c,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(ki({key:`${c}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return n}return Rs({key:c,value:s})}const Pc={"*":()=>[],array:yl,boolean:function(i){const n=i.value,s=i.key,c=vr(n);return c!=="boolean"?[new qe(s,n,`boolean expected, ${c} found`)]:[]},number:wd,color:function(i){const n=i.key,s=i.value,c=vr(s);return c!=="string"?[new qe(n,s,`color expected, ${c} found`)]:Tr.parse(String(s))?[]:[new qe(n,s,`color expected, "${s}" found`)]},constants:Jp,enum:$o,filter:Sd,function:Cc,layer:Td,object:ki,source:_l,light:Id,sky:Pd,terrain:Ed,projection:function(i){const n=i.value,s=i.styleSpec,c=s.projection,f=i.style,v=vr(n);if(n===void 0)return[];if(v!=="object")return[new qe("projection",n,`object expected, ${v} found`)];let x=[];for(const b in n)x=x.concat(c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],style:f,styleSpec:s}):[new qe(b,n[b],`unknown property "${b}"`)]);return x},string:Rs,formatted:function(i){return Rs(i).length===0?[]:ga(i)},resolvedImage:function(i){return Rs(i).length===0?[]:ga(i)},padding:function(i){const n=i.key,s=i.value;if(vr(s)==="array"){if(s.length<1||s.length>4)return[new qe(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const c={type:"number"};let f=[];for(let v=0;v<s.length;v++)f=f.concat(i.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:i.validateSpec,valueSpec:c}));return f}return wd({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const n=i.key,s=i.value,c=vr(s),f=i.styleSpec;if(c!=="array"||s.length<1||s.length%2!=0)return[new qe(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat($o({key:`${n}[${x}]`,value:s[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(yl({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:f}));return v},sprite:Md};function vl(i){const n=i.value,s=i.valueSpec,c=i.styleSpec;return i.validateSpec=vl,s.expression&&yc(en(n))?Cc(i):s.expression&&xc(to(n))?ga(i):s.type&&Pc[s.type]?Pc[s.type](i):ki(dn({},i,{valueSpec:s.type?c[s.type]:s}))}function Qp(i){const n=i.value,s=i.key,c=Rs(i);return c.length||(n.indexOf("{fontstack}")===-1&&c.push(new qe(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&c.push(new qe(s,n,'"glyphs" url must include a "{range}" token'))),c}function $i(i,n=Ie){let s=[];return s=s.concat(vl({key:"",value:i,valueSpec:n.$root,styleSpec:n,style:i,validateSpec:vl,objectElementValidators:{glyphs:Qp,"*":()=>[]}})),i.constants&&(s=s.concat(Jp({key:"constants",value:i.constants}))),Ad(s)}function bo(i){return function(n){return i({...n,validateSpec:vl})}}function Ad(i){return[].concat(i).sort((n,s)=>n.line-s.line)}function ro(i){return function(...n){return Ad(i.apply(this,n))}}$i.source=ro(bo(_l)),$i.sprite=ro(bo(Md)),$i.glyphs=ro(bo(Qp)),$i.light=ro(bo(Id)),$i.sky=ro(bo(Pd)),$i.terrain=ro(bo(Ed)),$i.layer=ro(bo(Td)),$i.filter=ro(bo(Sd)),$i.paintProperty=ro(bo(Tc)),$i.layoutProperty=ro(bo(kd));const Ls=$i,wy=Ls.light,Sy=Ls.sky,ef=Ls.paintProperty,tf=Ls.layoutProperty;function zd(i,n){let s=!1;if(n&&n.length)for(const c of n)i.fire(new kt(new Error(c.message))),s=!0;return s}class ya{constructor(n,s,c){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(c=x[2]);for(let S=0;S<this.d*this.d;S++){const I=x[3+S],P=x[3+S+1];f.push(I===P?null:x.subarray(I,P))}const b=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],b),this.bboxes=x.subarray(b),this.insert=this._insertReadonly}else{this.d=s+2*c;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=c,this.scale=s/n,this.uid=0;const v=c/s*n;this.min=-v,this.max=n+v}insert(n,s,c,f,v){this._forEachCell(s,c,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,c,f,v,x){this.cells[v].push(x)}query(n,s,c,f,v){const x=this.min,b=this.max;if(n<=x&&s<=x&&b<=c&&b<=f&&!v)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(n,s,c,f,this._queryCell,S,{},v),S}}_queryCell(n,s,c,f,v,x,b,S){const I=this.cells[v];if(I!==null){const P=this.keys,z=this.bboxes;for(let F=0;F<I.length;F++){const j=I[F];if(b[j]===void 0){const q=4*j;(S?S(z[q+0],z[q+1],z[q+2],z[q+3]):n<=z[q+2]&&s<=z[q+3]&&c>=z[q+0]&&f>=z[q+1])?(b[j]=!0,x.push(P[j])):b[j]=!1}}}}_forEachCell(n,s,c,f,v,x,b,S){const I=this._convertToCellCoord(n),P=this._convertToCellCoord(s),z=this._convertToCellCoord(c),F=this._convertToCellCoord(f);for(let j=I;j<=z;j++)for(let q=P;q<=F;q++){const Y=this.d*q+j;if((!S||S(this._convertFromCellCoord(j),this._convertFromCellCoord(q),this._convertFromCellCoord(j+1),this._convertFromCellCoord(q+1)))&&v.call(this,n,s,c,f,Y,x,b,S))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let c=0;for(let x=0;x<this.cells.length;x++)c+=this.cells[x].length;const f=new Int32Array(s+c+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const b=n[x];f[3+x]=v,f.set(b,v),v+=b.length}return f[3+n.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+n.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(n,s){const c=n.toArrayBuffer();return s&&s.push(c),{buffer:c}}static deserialize(n){return new ya(n.buffer)}}const Ni={};function ft(i,n,s={}){if(Ni[i])throw new Error(`${i} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:i,writeable:!1}),Ni[i]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}ft("Object",Object),ft("TransferableGridIndex",ya),ft("Color",Tr),ft("Error",Error),ft("AJAXError",Ye),ft("ResolvedImage",Ci),ft("StylePropertyFunction",ma),ft("StyleExpression",vc,{omit:["_evaluator"]}),ft("ZoomDependentExpression",fa),ft("ZoomConstantExpression",pa),ft("CompoundExpression",Oi,{omit:["_evaluate"]});for(const i in aa)aa[i]._classRegistryKey||ft(`Expression_${i}`,aa[i]);function Ec(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Rd(i){return i.$name||i.constructor._classRegistryKey}function rf(i){return!function(n){if(n===null||typeof n!="object")return!1;const s=Rd(n);return!(!s||s==="Object")}(i)&&(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||Ec(i)||Ze(i)||ArrayBuffer.isView(i)||i instanceof ImageData)}function _a(i,n){if(rf(i))return(Ec(i)||Ze(i))&&n&&n.push(i),ArrayBuffer.isView(i)&&n&&n.push(i.buffer),i instanceof ImageData&&n&&n.push(i.data.buffer),i;if(Array.isArray(i)){const v=[];for(const x of i)v.push(_a(x,n));return v}if(typeof i!="object")throw new Error("can't serialize object of type "+typeof i);const s=Rd(i);if(!s)throw new Error(`can't serialize object of unregistered class ${i.constructor.name}`);if(!Ni[s])throw new Error(`${s} is not registered.`);const{klass:c}=Ni[s],f=c.serialize?c.serialize(i,n):{};if(c.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in i){if(!i.hasOwnProperty(v)||Ni[s].omit.indexOf(v)>=0)continue;const x=i[v];f[v]=Ni[s].shallow.indexOf(v)>=0?x:_a(x,n)}i instanceof Error&&(f.message=i.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(f.$name=s),f}function va(i){if(rf(i))return i;if(Array.isArray(i))return i.map(va);if(typeof i!="object")throw new Error("can't deserialize object of type "+typeof i);const n=Rd(i)||"Object";if(!Ni[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Ni[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(i);const c=Object.create(s.prototype);for(const f of Object.keys(i)){if(f==="$name")continue;const v=i[f];c[f]=Ni[n].shallow.indexOf(f)>=0?v:va(v)}return c}class Ld{constructor(){this.first=!0}update(n,s){const c=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=c,!0))}}const cr={"Latin-1 Supplement":i=>i>=128&&i<=255,"Hangul Jamo":i=>i>=4352&&i<=4607,Khmer:i=>i>=6016&&i<=6143,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Katakana:i=>i>=12448&&i<=12543,Kanbun:i=>i>=12688&&i<=12703,"CJK Strokes":i=>i>=12736&&i<=12783,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"Private Use Area":i=>i>=57344&&i<=63743,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Dd(i){for(const n of i)if(Fd(n.charCodeAt(0)))return!0;return!1}function Cy(i){for(const n of i)if(!xa(n.charCodeAt(0)))return!1;return!0}function Bd(i){const n=i.map(s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}}).filter(s=>s);return new RegExp(n.join("|"),"u")}const ky=Bd(["Arab","Dupl","Mong","Ougr","Syrc"]);function xa(i){return!ky.test(String.fromCodePoint(i))}const nf=Bd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Fd(i){return!(i!==746&&i!==747&&(i<4352||!(cr["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||cr["CJK Compatibility"](i)||cr["CJK Strokes"](i)||!(!cr["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||cr["Enclosed CJK Letters and Months"](i)||cr["Ideographic Description Characters"](i)||cr.Kanbun(i)||cr.Katakana(i)&&i!==12540||!(!cr["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!cr["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||cr["Vertical Forms"](i)||cr["Yijing Hexagram Symbols"](i)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(i))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(i))||nf.test(String.fromCodePoint(i)))))}function of(i){return!(Fd(i)||function(n){return!!(cr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||cr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||cr["Letterlike Symbols"](n)||cr["Number Forms"](n)||cr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||cr["Control Pictures"](n)&&n!==9251||cr["Optical Character Recognition"](n)||cr["Enclosed Alphanumerics"](n)||cr["Geometric Shapes"](n)||cr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||cr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||cr["CJK Symbols and Punctuation"](n)||cr.Katakana(n)||cr["Private Use Area"](n)||cr["CJK Compatibility Forms"](n)||cr["Small Form Variants"](n)||cr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(i))}const Ty=Bd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Od(i){return Ty.test(String.fromCodePoint(i))}function Iy(i,n){return!(!n&&Od(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||cr.Khmer(i))}function Py(i){for(const n of i)if(Od(n.charCodeAt(0)))return!0;return!1}const Ti=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class jr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ld,this.transition={})}isSupportedScript(n){return function(s,c){for(const f of s)if(!Iy(f.charCodeAt(0),c))return!1;return!0}(n,Ti.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),c=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*s}}}class ba{constructor(n,s){this.property=n,this.value=s,this.expression=function(c,f){if(yc(c))return new ma(c,f);if(xc(c)){const v=vd(c,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=c;return f.type==="color"&&typeof c=="string"?v=Tr.parse(c):f.type!=="padding"||typeof c!="number"&&!Array.isArray(c)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(c)&&(v=Fi.parse(c)):v=Si.parse(c),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,c){return this.property.possiblyEvaluate(this,n,s,c)}}class Mc{constructor(n){this.property=n,this.value=new ba(n,void 0)}transitioned(n,s){return new sf(this.property,this.value,s,fe({},n.transition,this.transition),n.now)}untransitioned(){return new sf(this.property,this.value,null,{},0)}}class Ac{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Re(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Mc(this._values[n].property)),this._values[n].value=new ba(this._values[n].property,s===null?void 0:Re(s))}getTransition(n){return Re(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Mc(this._values[n].property)),this._values[n].transition=Re(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(n[s]=c);const f=this.getTransition(s);f!==void 0&&(n[`${s}-transition`]=f)}return n}transitioned(n,s){const c=new xl(this._properties);for(const f of Object.keys(this._values))c._values[f]=this._values[f].transitioned(n,s._values[f]);return c}untransitioned(){const n=new xl(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class sf{constructor(n,s,c,f,v){this.property=n,this.value=s,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=c)}possiblyEvaluate(n,s,c){const f=n.now||0,v=this.value.possiblyEvaluate(n,s,c),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(n,s,c);{const b=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,c),v,function(S){if(S<=0)return 0;if(S>=1)return 1;const I=S*S,P=I*S;return 4*(S<.5?P:3*(S-I)+P-.75)}(b))}}return v}}class xl{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,c){const f=new wl(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,c);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class bl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Re(this._values[n].value)}setValue(n,s){this._values[n]=new ba(this._values[n].property,s===null?void 0:Re(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(n[s]=c)}return n}possiblyEvaluate(n,s,c){const f=new wl(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,c);return f}}class wo{constructor(n,s,c){this.property=n,this.value=s,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,c,f){return this.property.evaluate(this.value,this.parameters,n,s,c,f)}}class wl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class gt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,c){const f=ai[this.specification.type];return f?f(n,s,c):n}}class Dt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,c,f){return new wo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},c,f)}:n.expression,s)}interpolate(n,s,c){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new wo(this,{kind:"constant",value:void 0},n.parameters);const f=ai[this.specification.type];if(f){const v=f(n.value.value,s.value.value,c);return new wo(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,c,f,v,x){return n.kind==="constant"?n.value:n.evaluate(s,c,f,v,x)}}class zc extends Dt{possiblyEvaluate(n,s,c,f){if(n.value===void 0)return new wo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},c,f),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,b=this._calculate(x,x,x,s);return new wo(this,{kind:"constant",value:b},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new wo(this,{kind:"constant",value:v},s)}return new wo(this,n.expression,s)}evaluate(n,s,c,f,v,x){if(n.kind==="source"){const b=n.evaluate(s,c,f,v,x);return this._calculate(b,b,b,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},c,f),n.evaluate({zoom:Math.floor(s.zoom)},c,f),n.evaluate({zoom:Math.floor(s.zoom)+1},c,f),s):n.value}_calculate(n,s,c,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:c,to:s}}interpolate(n){return n}}class Rc{constructor(n){this.specification=n}possiblyEvaluate(n,s,c,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},c,f);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new jr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new jr(Math.floor(s.zoom),s)),n.expression.evaluate(new jr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,c,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:c,to:s}}interpolate(n){return n}}class $d{constructor(n){this.specification=n}possiblyEvaluate(n,s,c,f){return!!n.expression.evaluate(s,null,{},c,f)}interpolate(){return!1}}class _{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const c=n[s];c.specification.overridable&&this.overridableProperties.push(s);const f=this.defaultPropertyValues[s]=new ba(c,void 0),v=this.defaultTransitionablePropertyValues[s]=new Mc(c);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=f.possiblyEvaluate({})}}}ft("DataDrivenProperty",Dt),ft("DataConstantProperty",gt),ft("CrossFadedDataDrivenProperty",zc),ft("CrossFadedProperty",Rc),ft("ColorRampProperty",$d);const r="-transition";class a extends Zt{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new bl(s.layout)),s.paint)){this._transitionablePaint=new Ac(s.paint);for(const c in n.paint)this.setPaintProperty(c,n.paint[c],{validate:!1});for(const c in n.layout)this.setLayoutProperty(c,n.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new wl(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,c={}){s!=null&&this._validate(tf,`layers.${this.id}.layout.${n}`,n,s,c)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(r)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,c={}){if(s!=null&&this._validate(ef,`layers.${this.id}.paint.${n}`,n,s,c))return!1;if(n.endsWith(r))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const f=this._transitionablePaint._values[n],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),b=f.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const S=this._transitionablePaint._values[n].value;return S.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,b,S)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,c){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Ae(n,(s,c)=>!(s===void 0||c==="layout"&&!Object.keys(s).length||c==="paint"&&!Object.keys(s).length))}_validate(n,s,c,f,v={}){return(!v||v.validate!==!1)&&zd(this,n.call(Ls,{key:s,layerType:this.type,objectKey:c,value:f,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof wo&&ua(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class p{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function w(i,n=1){let s=0,c=0;return{members:i.map(f=>{const v=d[f.type].BYTES_PER_ELEMENT,x=s=C(s,Math.max(n,v)),b=f.components||1;return c=Math.max(c,v),s+=v*b,{name:f.name,type:f.type,components:b,offset:x}}),size:C(s,Math.max(c,n)),alignment:n}}function C(i,n){return Math.ceil(i/n)*n}class T extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const c=this.length;return this.resize(c+1),this.emplace(c,n,s)}emplace(n,s,c){const f=2*n;return this.int16[f+0]=s,this.int16[f+1]=c,n}}T.prototype.bytesPerElement=4,ft("StructArrayLayout2i4",T);class E extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=c,this.int16[v+2]=f,n}}E.prototype.bytesPerElement=6,ft("StructArrayLayout3i6",E);class R extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,c,f)}emplace(n,s,c,f,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=c,this.int16[x+2]=f,this.int16[x+3]=v,n}}R.prototype.bytesPerElement=8,ft("StructArrayLayout4i8",R);class L extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=6*n;return this.int16[S+0]=s,this.int16[S+1]=c,this.int16[S+2]=f,this.int16[S+3]=v,this.int16[S+4]=x,this.int16[S+5]=b,n}}L.prototype.bytesPerElement=12,ft("StructArrayLayout2i4i12",L);class H extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=4*n,I=8*n;return this.int16[S+0]=s,this.int16[S+1]=c,this.uint8[I+4]=f,this.uint8[I+5]=v,this.uint8[I+6]=x,this.uint8[I+7]=b,n}}H.prototype.bytesPerElement=8,ft("StructArrayLayout2i4ub8",H);class ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const c=this.length;return this.resize(c+1),this.emplace(c,n,s)}emplace(n,s,c){const f=2*n;return this.float32[f+0]=s,this.float32[f+1]=c,n}}ee.prototype.bytesPerElement=8,ft("StructArrayLayout2f8",ee);class re extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,I,P){const z=this.length;return this.resize(z+1),this.emplace(z,n,s,c,f,v,x,b,S,I,P)}emplace(n,s,c,f,v,x,b,S,I,P,z){const F=10*n;return this.uint16[F+0]=s,this.uint16[F+1]=c,this.uint16[F+2]=f,this.uint16[F+3]=v,this.uint16[F+4]=x,this.uint16[F+5]=b,this.uint16[F+6]=S,this.uint16[F+7]=I,this.uint16[F+8]=P,this.uint16[F+9]=z,n}}re.prototype.bytesPerElement=20,ft("StructArrayLayout10ui20",re);class le extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,I,P,z,F){const j=this.length;return this.resize(j+1),this.emplace(j,n,s,c,f,v,x,b,S,I,P,z,F)}emplace(n,s,c,f,v,x,b,S,I,P,z,F,j){const q=12*n;return this.int16[q+0]=s,this.int16[q+1]=c,this.int16[q+2]=f,this.int16[q+3]=v,this.uint16[q+4]=x,this.uint16[q+5]=b,this.uint16[q+6]=S,this.uint16[q+7]=I,this.int16[q+8]=P,this.int16[q+9]=z,this.int16[q+10]=F,this.int16[q+11]=j,n}}le.prototype.bytesPerElement=24,ft("StructArrayLayout4i4ui4i24",le);class de extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=c,this.float32[v+2]=f,n}}de.prototype.bytesPerElement=12,ft("StructArrayLayout3f12",de);class pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}pe.prototype.bytesPerElement=4,ft("StructArrayLayout1ul4",pe);class ye extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,I){const P=this.length;return this.resize(P+1),this.emplace(P,n,s,c,f,v,x,b,S,I)}emplace(n,s,c,f,v,x,b,S,I,P){const z=10*n,F=5*n;return this.int16[z+0]=s,this.int16[z+1]=c,this.int16[z+2]=f,this.int16[z+3]=v,this.int16[z+4]=x,this.int16[z+5]=b,this.uint32[F+3]=S,this.uint16[z+8]=I,this.uint16[z+9]=P,n}}ye.prototype.bytesPerElement=20,ft("StructArrayLayout6i1ul2ui20",ye);class oe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=6*n;return this.int16[S+0]=s,this.int16[S+1]=c,this.int16[S+2]=f,this.int16[S+3]=v,this.int16[S+4]=x,this.int16[S+5]=b,n}}oe.prototype.bytesPerElement=12,ft("StructArrayLayout2i2i2i12",oe);class be extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,c,f,v)}emplace(n,s,c,f,v,x){const b=4*n,S=8*n;return this.float32[b+0]=s,this.float32[b+1]=c,this.float32[b+2]=f,this.int16[S+6]=v,this.int16[S+7]=x,n}}be.prototype.bytesPerElement=16,ft("StructArrayLayout2f1f2i16",be);class Se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=16*n,I=4*n,P=8*n;return this.uint8[S+0]=s,this.uint8[S+1]=c,this.float32[I+1]=f,this.float32[I+2]=v,this.int16[P+6]=x,this.int16[P+7]=b,n}}Se.prototype.bytesPerElement=16,ft("StructArrayLayout2ub2f2i16",Se);class Me extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=c,this.uint16[v+2]=f,n}}Me.prototype.bytesPerElement=6,ft("StructArrayLayout3ui6",Me);class Ve extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,I,P,z,F,j,q,Y,se,ue){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,n,s,c,f,v,x,b,S,I,P,z,F,j,q,Y,se,ue)}emplace(n,s,c,f,v,x,b,S,I,P,z,F,j,q,Y,se,ue,Pe){const _e=24*n,Ce=12*n,Oe=48*n;return this.int16[_e+0]=s,this.int16[_e+1]=c,this.uint16[_e+2]=f,this.uint16[_e+3]=v,this.uint32[Ce+2]=x,this.uint32[Ce+3]=b,this.uint32[Ce+4]=S,this.uint16[_e+10]=I,this.uint16[_e+11]=P,this.uint16[_e+12]=z,this.float32[Ce+7]=F,this.float32[Ce+8]=j,this.uint8[Oe+36]=q,this.uint8[Oe+37]=Y,this.uint8[Oe+38]=se,this.uint32[Ce+10]=ue,this.int16[_e+22]=Pe,n}}Ve.prototype.bytesPerElement=48,ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ve);class Ke extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,I,P,z,F,j,q,Y,se,ue,Pe,_e,Ce,Oe,We,ut,At,at,nt,xt,mt){const pt=this.length;return this.resize(pt+1),this.emplace(pt,n,s,c,f,v,x,b,S,I,P,z,F,j,q,Y,se,ue,Pe,_e,Ce,Oe,We,ut,At,at,nt,xt,mt)}emplace(n,s,c,f,v,x,b,S,I,P,z,F,j,q,Y,se,ue,Pe,_e,Ce,Oe,We,ut,At,at,nt,xt,mt,pt){const Ne=32*n,wt=16*n;return this.int16[Ne+0]=s,this.int16[Ne+1]=c,this.int16[Ne+2]=f,this.int16[Ne+3]=v,this.int16[Ne+4]=x,this.int16[Ne+5]=b,this.int16[Ne+6]=S,this.int16[Ne+7]=I,this.uint16[Ne+8]=P,this.uint16[Ne+9]=z,this.uint16[Ne+10]=F,this.uint16[Ne+11]=j,this.uint16[Ne+12]=q,this.uint16[Ne+13]=Y,this.uint16[Ne+14]=se,this.uint16[Ne+15]=ue,this.uint16[Ne+16]=Pe,this.uint16[Ne+17]=_e,this.uint16[Ne+18]=Ce,this.uint16[Ne+19]=Oe,this.uint16[Ne+20]=We,this.uint16[Ne+21]=ut,this.uint16[Ne+22]=At,this.uint32[wt+12]=at,this.float32[wt+13]=nt,this.float32[wt+14]=xt,this.uint16[Ne+30]=mt,this.uint16[Ne+31]=pt,n}}Ke.prototype.bytesPerElement=64,ft("StructArrayLayout8i15ui1ul2f2ui64",Ke);class ot extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}ot.prototype.bytesPerElement=4,ft("StructArrayLayout1f4",ot);class dt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=c,this.float32[v+2]=f,n}}dt.prototype.bytesPerElement=12,ft("StructArrayLayout1ui2f12",dt);class tt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=c,this.uint16[v+3]=f,n}}tt.prototype.bytesPerElement=8,ft("StructArrayLayout1ul2ui8",tt);class et extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const c=this.length;return this.resize(c+1),this.emplace(c,n,s)}emplace(n,s,c){const f=2*n;return this.uint16[f+0]=s,this.uint16[f+1]=c,n}}et.prototype.bytesPerElement=4,ft("StructArrayLayout2ui4",et);class yt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}yt.prototype.bytesPerElement=2,ft("StructArrayLayout1ui2",yt);class jt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,c,f)}emplace(n,s,c,f,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=c,this.float32[x+2]=f,this.float32[x+3]=v,n}}jt.prototype.bytesPerElement=16,ft("StructArrayLayout4f16",jt);class rt extends p{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new D(this.anchorPointX,this.anchorPointY)}}rt.prototype.size=20;class lt extends ye{get(n){return new rt(this,n)}}ft("CollisionBoxArray",lt);class Ot extends p{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ot.prototype.size=48;class Vr extends Ve{get(n){return new Ot(this,n)}}ft("PlacedSymbolArray",Vr);class Xt extends p{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Xt.prototype.size=64;class ar extends Ke{get(n){return new Xt(this,n)}}ft("SymbolInstanceArray",ar);class Ur extends ot{getoffsetX(n){return this.float32[1*n+0]}}ft("GlyphOffsetArray",Ur);class $n extends E{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}ft("SymbolLineVertexArray",$n);class no extends p{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}no.prototype.size=12;class Wr extends dt{get(n){return new no(this,n)}}ft("TextAnchorOffsetArray",Wr);class ci extends p{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ci.prototype.size=8;class Yn extends tt{get(n){return new ci(this,n)}}ft("FeatureIndexArray",Yn);class Nn extends T{}class Jn extends T{}class So extends T{}class wa extends L{}class Lc extends H{}class Sa extends ee{}class ji extends re{}class Dc extends le{}class Nd extends de{}class Vi extends pe{}class Ui extends oe{}class ns extends Se{}class io extends Me{}class zn extends et{}const jn=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ii}=jn;class ur{constructor(n=[]){this.segments=n}prepareSegment(n,s,c,f){let v=this.segments[this.segments.length-1];return n>ur.MAX_VERTEX_ARRAY_LENGTH&&xe(`Max vertices per segment is ${ur.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>ur.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:s.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,c,f){return new ur([{vertexOffset:n,primitiveOffset:s,vertexLength:c,primitiveLength:f,vaos:{},sortKey:0}])}}function Ds(i,n){return 256*(i=he(Math.floor(i),0,255))+he(Math.floor(n),0,255)}ur.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ft("SegmentVector",ur);const Ca=w([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ka={exports:{}},af={exports:{}};af.exports=function(i,n){var s,c,f,v,x,b,S,I;for(c=i.length-(s=3&i.length),f=n,x=3432918353,b=461845907,I=0;I<c;)S=255&i.charCodeAt(I)|(255&i.charCodeAt(++I))<<8|(255&i.charCodeAt(++I))<<16|(255&i.charCodeAt(++I))<<24,++I,f=27492+(65535&(v=5*(65535&(f=(f^=S=(65535&(S=(S=(65535&S)*x+(((S>>>16)*x&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(S=0,s){case 3:S^=(255&i.charCodeAt(I+2))<<16;case 2:S^=(255&i.charCodeAt(I+1))<<8;case 1:f^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(I)))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295}return f^=i.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var Ey=af.exports,lf={exports:{}};lf.exports=function(i,n){for(var s,c=i.length,f=n^c,v=0;c>=4;)s=1540483477*(65535&(s=255&i.charCodeAt(v)|(255&i.charCodeAt(++v))<<8|(255&i.charCodeAt(++v))<<16|(255&i.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),c-=4,++v;switch(c){case 3:f^=(255&i.charCodeAt(v+2))<<16;case 2:f^=(255&i.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&i.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var is=Ey,cf=lf.exports;ka.exports=is,ka.exports.murmur3=is,ka.exports.murmur2=cf;var Bc=k(ka.exports);class Sl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,c,f){this.ids.push(Fc(n)),this.positions.push(s,c,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Fc(n);let c=0,f=this.ids.length-1;for(;c<f;){const x=c+f>>1;this.ids[x]>=s?f=x:c=x+1}const v=[];for(;this.ids[c]===s;)v.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return v}static serialize(n,s){const c=new Float64Array(n.ids),f=new Uint32Array(n.positions);return Oc(c,f,0,c.length-1),s&&s.push(c.buffer,f.buffer),{ids:c,positions:f}}static deserialize(n){const s=new Sl;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Fc(i){const n=+i;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Bc(String(i))}function Oc(i,n,s,c){for(;s<c;){const f=i[s+c>>1];let v=s-1,x=c+1;for(;;){do v++;while(i[v]<f);do x--;while(i[x]>f);if(v>=x)break;Ta(i,v,x),Ta(n,3*v,3*x),Ta(n,3*v+1,3*x+1),Ta(n,3*v+2,3*x+2)}x-s<c-x?(Oc(i,n,s,x),s=x+1):(Oc(i,n,x+1,c),c=x)}}function Ta(i,n,s){const c=i[n];i[n]=i[s],i[s]=c}ft("FeaturePositionMap",Sl);class Cl{constructor(n,s){this.gl=n.gl,this.location=s}}class uf extends Cl{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class tb extends Cl{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class rb extends Cl{constructor(n,s){super(n,s),this.current=Tr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const ZT=new Float32Array(16);function My(i){return[Ds(255*i.r,255*i.g),Ds(255*i.b,255*i.a)]}class jd{constructor(n,s,c){this.value=n,this.uniformNames=s.map(f=>`u_${f}`),this.type=c}setUniform(n,s,c){n.set(c.constantOr(this.value))}getBinding(n,s,c){return this.type==="color"?new rb(n,s):new uf(n,s)}}class $c{constructor(n,s){this.uniformNames=s.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,c,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,c){return c.substr(0,9)==="u_pattern"?new tb(n,s):new uf(n,s)}}class Bs{constructor(n,s,c,f){this.expression=n,this.type=c,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,s,c,f,v){const x=this.paintVertexArray.length,b=this.expression.evaluate(new jr(0),s,{},f,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,b)}updatePaintArray(n,s,c,f){const v=this.expression.evaluate({zoom:0},c,f);this._setPaintValue(n,s,v)}_setPaintValue(n,s,c){if(this.type==="color"){const f=My(c);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=n;f<s;f++)this.paintVertexArray.emplace(f,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class No{constructor(n,s,c,f,v,x){this.expression=n,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=c,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,c,f,v){const x=this.expression.evaluate(new jr(this.zoom),s,{},f,[],v),b=this.expression.evaluate(new jr(this.zoom+1),s,{},f,[],v),S=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(S,n,x,b)}updatePaintArray(n,s,c,f){const v=this.expression.evaluate({zoom:this.zoom},c,f),x=this.expression.evaluate({zoom:this.zoom+1},c,f);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,c,f){if(this.type==="color"){const v=My(c),x=My(f);for(let b=n;b<s;b++)this.paintVertexArray.emplace(b,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,c,f);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const c=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,f=he(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,s,c){return new uf(n,s)}}class Ia{constructor(n,s,c,f,v,x){this.expression=n,this.type=s,this.useIntegerZoom=c,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,c){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,s.patterns&&s.patterns[this.layerId],c)}updatePaintArray(n,s,c,f,v){this._setPaintValues(n,s,c.patterns&&c.patterns[this.layerId],v)}_setPaintValues(n,s,c,f){if(!f||!c)return;const{min:v,mid:x,max:b}=c,S=f[v],I=f[x],P=f[b];if(S&&I&&P)for(let z=n;z<s;z++)this.zoomInPaintVertexArray.emplace(z,I.tl[0],I.tl[1],I.br[0],I.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],I.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(z,I.tl[0],I.tl[1],I.br[0],I.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],I.pixelRatio,P.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Ca.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Ca.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class nb{constructor(n,s,c){this.binders={},this._buffers=[];const f=[];for(const v in n.paint._values){if(!c(v))continue;const x=n.paint.get(v);if(!(x instanceof wo&&ua(x.property.specification)))continue;const b=XT(v,n.type),S=x.value,I=x.property.specification.type,P=x.property.useIntegerZoom,z=x.property.specification["property-type"],F=z==="cross-faded"||z==="cross-faded-data-driven";if(S.kind==="constant")this.binders[v]=F?new $c(S.value,b):new jd(S.value,b,I),f.push(`/u_${v}`);else if(S.kind==="source"||F){const j=ib(v,I,"source");this.binders[v]=F?new Ia(S,I,P,s,j,n.id):new Bs(S,b,I,j),f.push(`/a_${v}`)}else{const j=ib(v,I,"composite");this.binders[v]=new No(S,b,I,P,s,j),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Bs||s instanceof No?s.maxValue:0}populatePaintArrays(n,s,c,f,v){for(const x in this.binders){const b=this.binders[x];(b instanceof Bs||b instanceof No||b instanceof Ia)&&b.populatePaintArray(n,s,c,f,v)}}setConstantPatternPositions(n,s){for(const c in this.binders){const f=this.binders[c];f instanceof $c&&f.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,c,f,v){let x=!1;for(const b in n){const S=s.getPositions(b);for(const I of S){const P=c.feature(I.index);for(const z in this.binders){const F=this.binders[z];if((F instanceof Bs||F instanceof No||F instanceof Ia)&&F.expression.isStateDependent===!0){const j=f.paint.get(z);F.expression=j.value,F.updatePaintArray(I.start,I.end,P,n[b],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const c=this.binders[s];(c instanceof jd||c instanceof $c)&&n.push(...c.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Bs||c instanceof No)for(let f=0;f<c.paintVertexAttributes.length;f++)n.push(c.paintVertexAttributes[f].name);else if(c instanceof Ia)for(let f=0;f<Ca.members.length;f++)n.push(Ca.members[f].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof jd||c instanceof $c||c instanceof No)for(const f of c.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const c=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof jd||v instanceof $c||v instanceof No){for(const x of v.uniformNames)if(s[x]){const b=v.getBinding(n,s[x],x);c.push({name:x,property:f,binding:b})}}}return c}setUniforms(n,s,c,f){for(const{name:v,property:x,binding:b}of s)this.binders[x].setUniform(b,f,c.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const c=this.binders[s];if(n&&c instanceof Ia){const f=n.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(c instanceof Bs||c instanceof No)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(n){for(const s in this.binders){const c=this.binders[s];(c instanceof Bs||c instanceof No||c instanceof Ia)&&c.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Bs||s instanceof No||s instanceof Ia)&&s.destroy()}}}class kl{constructor(n,s,c=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new nb(f,s,c);this.needsUpload=!1,this._featureMap=new Sl,this._bufferOffset=0}populatePaintArrays(n,s,c,f,v,x){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,s,f,v,x);s.id!==void 0&&this._featureMap.add(s.id,c,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,c,f){for(const v of c)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function XT(i,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${n}-`,"").replace(/-/g,"_")]}function ib(i,n,s){const c={color:{source:ee,composite:jt},number:{source:ot,composite:ee}},f=function(v){return{"line-pattern":{source:ji,composite:ji},"fill-pattern":{source:ji,composite:ji},"fill-extrusion-pattern":{source:ji,composite:ji}}[v]}(i);return f&&f[s]||c[n][s]}ft("ConstantBinder",jd),ft("CrossFadedConstantBinder",$c),ft("SourceExpressionBinder",Bs),ft("CrossFadedCompositeBinder",Ia),ft("CompositeExpressionBinder",No),ft("ProgramConfiguration",nb,{omit:["_buffers"]}),ft("ProgramConfigurationSet",kl);const fn=8192,Ay=Math.pow(2,14)-1,ob=-Ay-1;function Tl(i){const n=fn/i.extent,s=i.loadGeometry();for(let c=0;c<s.length;c++){const f=s[c];for(let v=0;v<f.length;v++){const x=f[v],b=Math.round(x.x*n),S=Math.round(x.y*n);x.x=he(b,ob,Ay),x.y=he(S,ob,Ay),(b<x.x||b>x.x+1||S<x.y||S>x.y+1)&&xe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Il(i,n){return{type:i.type,id:i.id,properties:i.properties,geometry:n?Tl(i):[]}}function df(i,n,s,c,f){i.emplaceBack(2*n+(c+1)/2,2*s+(f+1)/2)}class zy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Jn,this.indexArray=new io,this.segments=new ur,this.programConfigurations=new kl(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){const f=this.layers[0],v=[];let x=null,b=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),b=!x.isConstant());for(const{feature:S,id:I,index:P,sourceLayerIndex:z}of n){const F=this.layers[0]._featureFilter.needGeometry,j=Il(S,F);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),j,c))continue;const q=b?x.evaluate(j,{},c):void 0,Y={id:I,properties:S.properties,type:S.type,sourceLayerIndex:z,index:P,geometry:F?j.geometry:Tl(S),patterns:{},sortKey:q};v.push(Y)}b&&v.sort((S,I)=>S.sortKey-I.sortKey);for(const S of v){const{geometry:I,index:P,sourceLayerIndex:z}=S,F=n[P].feature;this.addFeature(S,I,P,c),s.featureIndex.insert(F,I,P,z,this.index)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ii),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,c,f){for(const v of s)for(const x of v){const b=x.x,S=x.y;if(b<0||b>=fn||S<0||S>=fn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),P=I.vertexLength;df(this.layoutVertexArray,b,S,-1,-1),df(this.layoutVertexArray,b,S,1,-1),df(this.layoutVertexArray,b,S,1,1),df(this.layoutVertexArray,b,S,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+3,P+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,{},f)}}function sb(i,n){for(let s=0;s<i.length;s++)if(Nc(n,i[s]))return!0;for(let s=0;s<n.length;s++)if(Nc(i,n[s]))return!0;return!!Ry(i,n)}function KT(i,n,s){return!!Nc(i,n)||!!Ly(n,i,s)}function ab(i,n){if(i.length===1)return cb(n,i[0]);for(let s=0;s<n.length;s++){const c=n[s];for(let f=0;f<c.length;f++)if(Nc(i,c[f]))return!0}for(let s=0;s<i.length;s++)if(cb(n,i[s]))return!0;for(let s=0;s<n.length;s++)if(Ry(i,n[s]))return!0;return!1}function YT(i,n,s){if(i.length>1){if(Ry(i,n))return!0;for(let c=0;c<n.length;c++)if(Ly(n[c],i,s))return!0}for(let c=0;c<i.length;c++)if(Ly(i[c],n,s))return!0;return!1}function Ry(i,n){if(i.length===0||n.length===0)return!1;for(let s=0;s<i.length-1;s++){const c=i[s],f=i[s+1];for(let v=0;v<n.length-1;v++)if(JT(c,f,n[v],n[v+1]))return!0}return!1}function JT(i,n,s,c){return Ee(i,s,c)!==Ee(n,s,c)&&Ee(i,n,s)!==Ee(i,n,c)}function Ly(i,n,s){const c=s*s;if(n.length===1)return i.distSqr(n[0])<c;for(let f=1;f<n.length;f++)if(lb(i,n[f-1],n[f])<c)return!0;return!1}function lb(i,n,s){const c=n.distSqr(s);if(c===0)return i.distSqr(n);const f=((i.x-n.x)*(s.x-n.x)+(i.y-n.y)*(s.y-n.y))/c;return i.distSqr(f<0?n:f>1?s:s.sub(n)._mult(f)._add(n))}function cb(i,n){let s,c,f,v=!1;for(let x=0;x<i.length;x++){s=i[x];for(let b=0,S=s.length-1;b<s.length;S=b++)c=s[b],f=s[S],c.y>n.y!=f.y>n.y&&n.x<(f.x-c.x)*(n.y-c.y)/(f.y-c.y)+c.x&&(v=!v)}return v}function Nc(i,n){let s=!1;for(let c=0,f=i.length-1;c<i.length;f=c++){const v=i[c],x=i[f];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function QT(i,n,s){const c=s[0],f=s[2];if(i.x<c.x&&n.x<c.x||i.x>f.x&&n.x>f.x||i.y<c.y&&n.y<c.y||i.y>f.y&&n.y>f.y)return!1;const v=Ee(i,n,s[0]);return v!==Ee(i,n,s[1])||v!==Ee(i,n,s[2])||v!==Ee(i,n,s[3])}function Vd(i,n,s){const c=n.paint.get(i).value;return c.kind==="constant"?c.value:s.programConfigurations.get(n.id).getMaxValue(i)}function hf(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function pf(i,n,s,c,f){if(!n[0]&&!n[1])return i;const v=D.convert(n)._mult(f);s==="viewport"&&v._rotate(-c);const x=[];for(let b=0;b<i.length;b++)x.push(i[b].sub(v));return x}let ub,db;ft("CircleBucket",zy,{omit:["layers"]});var eI={get paint(){return db=db||new _({"circle-radius":new Dt(Ie.paint_circle["circle-radius"]),"circle-color":new Dt(Ie.paint_circle["circle-color"]),"circle-blur":new Dt(Ie.paint_circle["circle-blur"]),"circle-opacity":new Dt(Ie.paint_circle["circle-opacity"]),"circle-translate":new gt(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new gt(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gt(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gt(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Dt(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Dt(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Dt(Ie.paint_circle["circle-stroke-opacity"])})},get layout(){return ub=ub||new _({"circle-sort-key":new Dt(Ie.layout_circle["circle-sort-key"])})}},ui=1e-6,jc=typeof Float32Array<"u"?Float32Array:Array;function Dy(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function hb(i,n,s){var c=n[0],f=n[1],v=n[2],x=n[3],b=n[4],S=n[5],I=n[6],P=n[7],z=n[8],F=n[9],j=n[10],q=n[11],Y=n[12],se=n[13],ue=n[14],Pe=n[15],_e=s[0],Ce=s[1],Oe=s[2],We=s[3];return i[0]=_e*c+Ce*b+Oe*z+We*Y,i[1]=_e*f+Ce*S+Oe*F+We*se,i[2]=_e*v+Ce*I+Oe*j+We*ue,i[3]=_e*x+Ce*P+Oe*q+We*Pe,i[4]=(_e=s[4])*c+(Ce=s[5])*b+(Oe=s[6])*z+(We=s[7])*Y,i[5]=_e*f+Ce*S+Oe*F+We*se,i[6]=_e*v+Ce*I+Oe*j+We*ue,i[7]=_e*x+Ce*P+Oe*q+We*Pe,i[8]=(_e=s[8])*c+(Ce=s[9])*b+(Oe=s[10])*z+(We=s[11])*Y,i[9]=_e*f+Ce*S+Oe*F+We*se,i[10]=_e*v+Ce*I+Oe*j+We*ue,i[11]=_e*x+Ce*P+Oe*q+We*Pe,i[12]=(_e=s[12])*c+(Ce=s[13])*b+(Oe=s[14])*z+(We=s[15])*Y,i[13]=_e*f+Ce*S+Oe*F+We*se,i[14]=_e*v+Ce*I+Oe*j+We*ue,i[15]=_e*x+Ce*P+Oe*q+We*Pe,i}Math.hypot||(Math.hypot=function(){for(var i=0,n=arguments.length;n--;)i+=arguments[n]*arguments[n];return Math.sqrt(i)});var Ud,tI=hb;function ff(i,n,s){var c=n[0],f=n[1],v=n[2],x=n[3];return i[0]=s[0]*c+s[4]*f+s[8]*v+s[12]*x,i[1]=s[1]*c+s[5]*f+s[9]*v+s[13]*x,i[2]=s[2]*c+s[6]*f+s[10]*v+s[14]*x,i[3]=s[3]*c+s[7]*f+s[11]*v+s[15]*x,i}Ud=new jc(4),jc!=Float32Array&&(Ud[0]=0,Ud[1]=0,Ud[2]=0,Ud[3]=0);class rI extends a{constructor(n){super(n,eI)}createBucket(n){return new zy(n)}queryRadius(n){const s=n;return Vd("circle-radius",this,s)+Vd("circle-stroke-width",this,s)+hf(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,c,f,v,x,b,S){const I=pf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,b),P=this.paint.get("circle-radius").evaluate(s,c)+this.paint.get("circle-stroke-width").evaluate(s,c),z=this.paint.get("circle-pitch-alignment")==="map",F=z?I:function(q,Y){return q.map(se=>pb(se,Y))}(I,S),j=z?P*b:P;for(const q of f)for(const Y of q){const se=z?Y:pb(Y,S);let ue=j;const Pe=ff([],[Y.x,Y.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ue*=Pe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ue*=x.cameraToCenterDistance/Pe[3]),KT(F,se,ue))return!0}return!1}}function pb(i,n){const s=ff([],[i.x,i.y,0,1],n);return new D(s[0]/s[3],s[1]/s[3])}class fb extends zy{}let mb;ft("HeatmapBucket",fb,{omit:["layers"]});var nI={get paint(){return mb=mb||new _({"heatmap-radius":new Dt(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Dt(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gt(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $d(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gt(Ie.paint_heatmap["heatmap-opacity"])})}};function By(i,{width:n,height:s},c,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*s*c)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*s*c}`)}else f=new Uint8Array(n*s*c);return i.width=n,i.height=s,i.data=f,i}function gb(i,{width:n,height:s},c){if(n===i.width&&s===i.height)return;const f=By({},{width:n,height:s},c);Fy(i,f,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,n),height:Math.min(i.height,s)},c),i.width=n,i.height=s,i.data=f.data}function Fy(i,n,s,c,f,v){if(f.width===0||f.height===0)return n;if(f.width>i.width||f.height>i.height||s.x>i.width-f.width||s.y>i.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||c.x>n.width-f.width||c.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=i.data,b=n.data;if(x===b)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<f.height;S++){const I=((s.y+S)*i.width+s.x)*v,P=((c.y+S)*n.width+c.x)*v;for(let z=0;z<f.width*v;z++)b[P+z]=x[I+z]}return n}class Wd{constructor(n,s){By(this,n,1,s)}resize(n){gb(this,n,1)}clone(){return new Wd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,c,f,v){Fy(n,s,c,f,v,1)}}class oo{constructor(n,s){By(this,n,4,s)}resize(n){gb(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new oo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,c,f,v){Fy(n,s,c,f,v,4)}}function yb(i){const n={},s=i.resolution||256,c=i.clips?i.clips.length:1,f=i.image||new oo({width:s,height:c});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,b,S)=>{n[i.evaluationKey]=S;const I=i.expression.evaluate(n);f.data[x+b+0]=Math.floor(255*I.r/I.a),f.data[x+b+1]=Math.floor(255*I.g/I.a),f.data[x+b+2]=Math.floor(255*I.b/I.a),f.data[x+b+3]=Math.floor(255*I.a)};if(i.clips)for(let x=0,b=0;x<c;++x,b+=4*s)for(let S=0,I=0;S<s;S++,I+=4){const P=S/(s-1),{start:z,end:F}=i.clips[x];v(b,I,z*(1-P)+F*P)}else for(let x=0,b=0;x<s;x++,b+=4)v(0,b,x/(s-1));return f}ft("AlphaImage",Wd),ft("RGBAImage",oo);const Oy="big-fb";class iI extends a{createBucket(n){return new fb(n)}constructor(n){super(n,nI),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Oy)&&this.heatmapFbos.delete(Oy)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let _b;var oI={get paint(){return _b=_b||new _({"hillshade-illumination-direction":new gt(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new gt(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gt(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gt(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gt(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gt(Ie.paint_hillshade["hillshade-accent-color"])})}};class sI extends a{constructor(n){super(n,oI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const aI=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:lI}=aI;function vb(i,n,s=2){const c=n&&n.length,f=c?n[0]*s:i.length;let v=xb(i,0,f,s,!0);const x=[];if(!v||v.next===v.prev)return x;let b,S,I;if(c&&(v=function(P,z,F,j){const q=[];for(let Y=0,se=z.length;Y<se;Y++){const ue=xb(P,z[Y]*j,Y<se-1?z[Y+1]*j:P.length,j,!1);ue===ue.next&&(ue.steiner=!0),q.push(gI(ue))}q.sort(pI);for(let Y=0;Y<q.length;Y++)F=fI(q[Y],F);return F}(i,n,v,s)),i.length>80*s){b=1/0,S=1/0;let P=-1/0,z=-1/0;for(let F=s;F<f;F+=s){const j=i[F],q=i[F+1];j<b&&(b=j),q<S&&(S=q),j>P&&(P=j),q>z&&(z=q)}I=Math.max(P-b,z-S),I=I!==0?32767/I:0}return Hd(v,x,s,b,S,I,0),x}function xb(i,n,s,c,f){let v;if(f===function(x,b,S,I){let P=0;for(let z=b,F=S-I;z<S;z+=I)P+=(x[F]-x[z])*(x[z+1]+x[F+1]),F=z;return P}(i,n,s,c)>0)for(let x=n;x<s;x+=c)v=Sb(x/c|0,i[x],i[x+1],v);else for(let x=s-c;x>=n;x-=c)v=Sb(x/c|0,i[x],i[x+1],v);return v&&mf(v,v.next)&&(qd(v),v=v.next),v}function Pl(i,n){if(!i)return i;n||(n=i);let s,c=i;do if(s=!1,c.steiner||!mf(c,c.next)&&sn(c.prev,c,c.next)!==0)c=c.next;else{if(qd(c),c=n=c.prev,c===c.next)break;s=!0}while(s||c!==n);return n}function Hd(i,n,s,c,f,v,x){if(!i)return;!x&&v&&function(S,I,P,z){let F=S;do F.z===0&&(F.z=$y(F.x,F.y,I,P,z)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==S);F.prevZ.nextZ=null,F.prevZ=null,function(j){let q,Y=1;do{let se,ue=j;j=null;let Pe=null;for(q=0;ue;){q++;let _e=ue,Ce=0;for(let We=0;We<Y&&(Ce++,_e=_e.nextZ,_e);We++);let Oe=Y;for(;Ce>0||Oe>0&&_e;)Ce!==0&&(Oe===0||!_e||ue.z<=_e.z)?(se=ue,ue=ue.nextZ,Ce--):(se=_e,_e=_e.nextZ,Oe--),Pe?Pe.nextZ=se:j=se,se.prevZ=Pe,Pe=se;ue=_e}Pe.nextZ=null,Y*=2}while(q>1)}(F)}(i,c,f,v);let b=i;for(;i.prev!==i.next;){const S=i.prev,I=i.next;if(v?uI(i,c,f,v):cI(i))n.push(S.i,i.i,I.i),qd(i),i=I.next,b=I.next;else if((i=I)===b){x?x===1?Hd(i=dI(Pl(i),n),n,s,c,f,v,2):x===2&&hI(i,n,s,c,f,v):Hd(Pl(i),n,s,c,f,v,1);break}}}function cI(i){const n=i.prev,s=i,c=i.next;if(sn(n,s,c)>=0)return!1;const f=n.x,v=s.x,x=c.x,b=n.y,S=s.y,I=c.y,P=f<v?f<x?f:x:v<x?v:x,z=b<S?b<I?b:I:S<I?S:I,F=f>v?f>x?f:x:v>x?v:x,j=b>S?b>I?b:I:S>I?S:I;let q=c.next;for(;q!==n;){if(q.x>=P&&q.x<=F&&q.y>=z&&q.y<=j&&Vc(f,b,v,S,x,I,q.x,q.y)&&sn(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function uI(i,n,s,c){const f=i.prev,v=i,x=i.next;if(sn(f,v,x)>=0)return!1;const b=f.x,S=v.x,I=x.x,P=f.y,z=v.y,F=x.y,j=b<S?b<I?b:I:S<I?S:I,q=P<z?P<F?P:F:z<F?z:F,Y=b>S?b>I?b:I:S>I?S:I,se=P>z?P>F?P:F:z>F?z:F,ue=$y(j,q,n,s,c),Pe=$y(Y,se,n,s,c);let _e=i.prevZ,Ce=i.nextZ;for(;_e&&_e.z>=ue&&Ce&&Ce.z<=Pe;){if(_e.x>=j&&_e.x<=Y&&_e.y>=q&&_e.y<=se&&_e!==f&&_e!==x&&Vc(b,P,S,z,I,F,_e.x,_e.y)&&sn(_e.prev,_e,_e.next)>=0||(_e=_e.prevZ,Ce.x>=j&&Ce.x<=Y&&Ce.y>=q&&Ce.y<=se&&Ce!==f&&Ce!==x&&Vc(b,P,S,z,I,F,Ce.x,Ce.y)&&sn(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;_e&&_e.z>=ue;){if(_e.x>=j&&_e.x<=Y&&_e.y>=q&&_e.y<=se&&_e!==f&&_e!==x&&Vc(b,P,S,z,I,F,_e.x,_e.y)&&sn(_e.prev,_e,_e.next)>=0)return!1;_e=_e.prevZ}for(;Ce&&Ce.z<=Pe;){if(Ce.x>=j&&Ce.x<=Y&&Ce.y>=q&&Ce.y<=se&&Ce!==f&&Ce!==x&&Vc(b,P,S,z,I,F,Ce.x,Ce.y)&&sn(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function dI(i,n){let s=i;do{const c=s.prev,f=s.next.next;!mf(c,f)&&bb(c,s,s.next,f)&&Gd(c,f)&&Gd(f,c)&&(n.push(c.i,s.i,f.i),qd(s),qd(s.next),s=i=f),s=s.next}while(s!==i);return Pl(s)}function hI(i,n,s,c,f,v){let x=i;do{let b=x.next.next;for(;b!==x.prev;){if(x.i!==b.i&&yI(x,b)){let S=wb(x,b);return x=Pl(x,x.next),S=Pl(S,S.next),Hd(x,n,s,c,f,v,0),void Hd(S,n,s,c,f,v,0)}b=b.next}x=x.next}while(x!==i)}function pI(i,n){return i.x-n.x}function fI(i,n){const s=function(f,v){let x=v;const b=f.x,S=f.y;let I,P=-1/0;do{if(S<=x.y&&S>=x.next.y&&x.next.y!==x.y){const Y=x.x+(S-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(Y<=b&&Y>P&&(P=Y,I=x.x<x.next.x?x:x.next,Y===b))return I}x=x.next}while(x!==v);if(!I)return null;const z=I,F=I.x,j=I.y;let q=1/0;x=I;do{if(b>=x.x&&x.x>=F&&b!==x.x&&Vc(S<j?b:P,S,F,j,S<j?P:b,S,x.x,x.y)){const Y=Math.abs(S-x.y)/(b-x.x);Gd(x,f)&&(Y<q||Y===q&&(x.x>I.x||x.x===I.x&&mI(I,x)))&&(I=x,q=Y)}x=x.next}while(x!==z);return I}(i,n);if(!s)return n;const c=wb(s,i);return Pl(c,c.next),Pl(s,s.next)}function mI(i,n){return sn(i.prev,i,n.prev)<0&&sn(n.next,i,i.next)<0}function $y(i,n,s,c,f){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-s)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-c)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function gI(i){let n=i,s=i;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==i);return s}function Vc(i,n,s,c,f,v,x,b){return(f-x)*(n-b)>=(i-x)*(v-b)&&(i-x)*(c-b)>=(s-x)*(n-b)&&(s-x)*(v-b)>=(f-x)*(c-b)}function yI(i,n){return i.next.i!==n.i&&i.prev.i!==n.i&&!function(s,c){let f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==c.i&&f.next.i!==c.i&&bb(f,f.next,s,c))return!0;f=f.next}while(f!==s);return!1}(i,n)&&(Gd(i,n)&&Gd(n,i)&&function(s,c){let f=s,v=!1;const x=(s.x+c.x)/2,b=(s.y+c.y)/2;do f.y>b!=f.next.y>b&&f.next.y!==f.y&&x<(f.next.x-f.x)*(b-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==s);return v}(i,n)&&(sn(i.prev,i,n.prev)||sn(i,n.prev,n))||mf(i,n)&&sn(i.prev,i,i.next)>0&&sn(n.prev,n,n.next)>0)}function sn(i,n,s){return(n.y-i.y)*(s.x-n.x)-(n.x-i.x)*(s.y-n.y)}function mf(i,n){return i.x===n.x&&i.y===n.y}function bb(i,n,s,c){const f=yf(sn(i,n,s)),v=yf(sn(i,n,c)),x=yf(sn(s,c,i)),b=yf(sn(s,c,n));return f!==v&&x!==b||!(f!==0||!gf(i,s,n))||!(v!==0||!gf(i,c,n))||!(x!==0||!gf(s,i,c))||!(b!==0||!gf(s,n,c))}function gf(i,n,s){return n.x<=Math.max(i.x,s.x)&&n.x>=Math.min(i.x,s.x)&&n.y<=Math.max(i.y,s.y)&&n.y>=Math.min(i.y,s.y)}function yf(i){return i>0?1:i<0?-1:0}function Gd(i,n){return sn(i.prev,i,i.next)<0?sn(i,n,i.next)>=0&&sn(i,i.prev,n)>=0:sn(i,n,i.prev)<0||sn(i,i.next,n)<0}function wb(i,n){const s=Ny(i.i,i.x,i.y),c=Ny(n.i,n.x,n.y),f=i.next,v=n.prev;return i.next=n,n.prev=i,s.next=f,f.prev=s,c.next=s,s.prev=c,v.next=c,c.prev=v,c}function Sb(i,n,s,c){const f=Ny(i,n,s);return c?(f.next=c.next,f.prev=c,c.next.prev=f,c.next=f):(f.prev=f,f.next=f),f}function qd(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Ny(i,n,s){return{i,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function jy(i,n,s){const c=s.patternDependencies;let f=!1;for(const v of n){const x=v.paint.get(`${i}-pattern`);x.isConstant()||(f=!0);const b=x.constantOr(null);b&&(f=!0,c[b.to]=!0,c[b.from]=!0)}return f}function Vy(i,n,s,c,f){const v=f.patternDependencies;for(const x of n){const b=x.paint.get(`${i}-pattern`).value;if(b.kind!=="constant"){let S=b.evaluate({zoom:c-1},s,{},f.availableImages),I=b.evaluate({zoom:c},s,{},f.availableImages),P=b.evaluate({zoom:c+1},s,{},f.availableImages);S=S&&S.name?S.name:S,I=I&&I.name?I.name:I,P=P&&P.name?P.name:P,v[S]=!0,v[I]=!0,v[P]=!0,s.patterns[x.id]={min:S,mid:I,max:P}}}return s}class Uy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new So,this.indexArray=new io,this.indexArray2=new zn,this.programConfigurations=new kl(n.layers,n.zoom),this.segments=new ur,this.segments2=new ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){this.hasPattern=jy("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:b,id:S,index:I,sourceLayerIndex:P}of n){const z=this.layers[0]._featureFilter.needGeometry,F=Il(b,z);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),F,c))continue;const j=v?f.evaluate(F,{},c,s.availableImages):void 0,q={id:S,properties:b.properties,type:b.type,sourceLayerIndex:P,index:I,geometry:z?F.geometry:Tl(b),patterns:{},sortKey:j};x.push(q)}v&&x.sort((b,S)=>b.sortKey-S.sortKey);for(const b of x){const{geometry:S,index:I,sourceLayerIndex:P}=b;if(this.hasPattern){const z=Vy("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(z)}else this.addFeature(b,S,I,c,{});s.featureIndex.insert(n[I].feature,S,I,P,this.index)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}addFeatures(n,s,c){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,lI),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,c,f,v){for(const x of hc(s,500)){let b=0;for(const j of x)b+=j.length;const S=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),I=S.vertexLength,P=[],z=[];for(const j of x){if(j.length===0)continue;j!==x[0]&&z.push(P.length/2);const q=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),Y=q.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(Y+j.length-1,Y),P.push(j[0].x),P.push(j[0].y);for(let se=1;se<j.length;se++)this.layoutVertexArray.emplaceBack(j[se].x,j[se].y),this.indexArray2.emplaceBack(Y+se-1,Y+se),P.push(j[se].x),P.push(j[se].y);q.vertexLength+=j.length,q.primitiveLength+=j.length}const F=vb(P,z);for(let j=0;j<F.length;j+=3)this.indexArray.emplaceBack(I+F[j],I+F[j+1],I+F[j+2]);S.vertexLength+=b,S.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,f)}}let Cb,kb;ft("FillBucket",Uy,{omit:["layers","patternFeatures"]});var _I={get paint(){return kb=kb||new _({"fill-antialias":new gt(Ie.paint_fill["fill-antialias"]),"fill-opacity":new Dt(Ie.paint_fill["fill-opacity"]),"fill-color":new Dt(Ie.paint_fill["fill-color"]),"fill-outline-color":new Dt(Ie.paint_fill["fill-outline-color"]),"fill-translate":new gt(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new gt(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new zc(Ie.paint_fill["fill-pattern"])})},get layout(){return Cb=Cb||new _({"fill-sort-key":new Dt(Ie.layout_fill["fill-sort-key"])})}};class vI extends a{constructor(n){super(n,_I)}recalculate(n,s){super.recalculate(n,s);const c=this.paint._values["fill-outline-color"];c.value.kind==="constant"&&c.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Uy(n)}queryRadius(){return hf(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,c,f,v,x,b){return ab(pf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,b),f)}isTileClipped(){return!0}}const xI=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),bI=w([{name:"a_centroid",components:2,type:"Int16"}],4),{members:wI}=xI;var Pa={},SI=M,Tb=Uc;function Uc(i,n,s,c,f){this.properties={},this.extent=s,this.type=0,this._pbf=i,this._geometry=-1,this._keys=c,this._values=f,i.readFields(CI,this,n)}function CI(i,n,s){i==1?n.id=s.readVarint():i==2?function(c,f){for(var v=c.readVarint()+c.pos;c.pos<v;){var x=f._keys[c.readVarint()],b=f._values[c.readVarint()];f.properties[x]=b}}(s,n):i==3?n.type=s.readVarint():i==4&&(n._geometry=s.pos)}function kI(i){for(var n,s,c=0,f=0,v=i.length,x=v-1;f<v;x=f++)c+=((s=i[x]).x-(n=i[f]).x)*(n.y+s.y);return c}Uc.types=["Unknown","Point","LineString","Polygon"],Uc.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var n,s=i.readVarint()+i.pos,c=1,f=0,v=0,x=0,b=[];i.pos<s;){if(f<=0){var S=i.readVarint();c=7&S,f=S>>3}if(f--,c===1||c===2)v+=i.readSVarint(),x+=i.readSVarint(),c===1&&(n&&b.push(n),n=[]),n.push(new SI(v,x));else{if(c!==7)throw new Error("unknown command "+c);n&&n.push(n[0].clone())}}return n&&b.push(n),b},Uc.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var n=i.readVarint()+i.pos,s=1,c=0,f=0,v=0,x=1/0,b=-1/0,S=1/0,I=-1/0;i.pos<n;){if(c<=0){var P=i.readVarint();s=7&P,c=P>>3}if(c--,s===1||s===2)(f+=i.readSVarint())<x&&(x=f),f>b&&(b=f),(v+=i.readSVarint())<S&&(S=v),v>I&&(I=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,S,b,I]},Uc.prototype.toGeoJSON=function(i,n,s){var c,f,v=this.extent*Math.pow(2,s),x=this.extent*i,b=this.extent*n,S=this.loadGeometry(),I=Uc.types[this.type];function P(j){for(var q=0;q<j.length;q++){var Y=j[q];j[q]=[360*(Y.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+b)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(c=0;c<S.length;c++)z[c]=S[c][0];P(S=z);break;case 2:for(c=0;c<S.length;c++)P(S[c]);break;case 3:for(S=function(j){var q=j.length;if(q<=1)return[j];for(var Y,se,ue=[],Pe=0;Pe<q;Pe++){var _e=kI(j[Pe]);_e!==0&&(se===void 0&&(se=_e<0),se===_e<0?(Y&&ue.push(Y),Y=[j[Pe]]):Y.push(j[Pe]))}return Y&&ue.push(Y),ue}(S),c=0;c<S.length;c++)for(f=0;f<S[c].length;f++)P(S[c][f])}S.length===1?S=S[0]:I="Multi"+I;var F={type:"Feature",geometry:{type:I,coordinates:S},properties:this.properties};return"id"in this&&(F.id=this.id),F};var TI=Tb,Ib=Pb;function Pb(i,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(II,this,n),this.length=this._features.length}function II(i,n,s){i===15?n.version=s.readVarint():i===1?n.name=s.readString():i===5?n.extent=s.readVarint():i===2?n._features.push(s.pos):i===3?n._keys.push(s.readString()):i===4&&n._values.push(function(c){for(var f=null,v=c.readVarint()+c.pos;c.pos<v;){var x=c.readVarint()>>3;f=x===1?c.readString():x===2?c.readFloat():x===3?c.readDouble():x===4?c.readVarint64():x===5?c.readVarint():x===6?c.readSVarint():x===7?c.readBoolean():null}return f}(s))}Pb.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var n=this._pbf.readVarint()+this._pbf.pos;return new TI(this._pbf,n,this.extent,this._keys,this._values)};var PI=Ib;function EI(i,n,s){if(i===3){var c=new PI(s,s.readVarint()+s.pos);c.length&&(n[c.name]=c)}}Pa.VectorTile=function(i,n){this.layers=i.readFields(EI,{},n)},Pa.VectorTileFeature=Tb,Pa.VectorTileLayer=Ib;const MI=Pa.VectorTileFeature.types,Wy=Math.pow(2,13);function Zd(i,n,s,c,f,v,x,b){i.emplaceBack(n,s,2*Math.floor(c*Wy)+x,f*Wy*2,v*Wy*2,Math.round(b))}class Hy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new wa,this.centroidVertexArray=new Nn,this.indexArray=new io,this.programConfigurations=new kl(n.layers,n.zoom),this.segments=new ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){this.features=[],this.hasPattern=jy("fill-extrusion",this.layers,s);for(const{feature:f,id:v,index:x,sourceLayerIndex:b}of n){const S=this.layers[0]._featureFilter.needGeometry,I=Il(f,S);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),I,c))continue;const P={id:v,sourceLayerIndex:b,index:x,geometry:S?I.geometry:Tl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Vy("fill-extrusion",this.layers,P,this.zoom,s)):this.addFeature(P,P.geometry,x,c,{}),s.featureIndex.insert(f,P.geometry,x,b,this.index,!0)}}addFeatures(n,s,c){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,s,c)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,wI),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,bI.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,c,f,v){for(const x of hc(s,500)){const b={x:0,y:0,vertexCount:0};let S=0;for(const q of x)S+=q.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const q of x){if(q.length===0||zI(q))continue;let Y=0;for(let se=0;se<q.length;se++){const ue=q[se];if(se>=1){const Pe=q[se-1];if(!AI(ue,Pe)){I.vertexLength+4>ur.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const _e=ue.sub(Pe)._perp()._unit(),Ce=Pe.dist(ue);Y+Ce>32768&&(Y=0),Zd(this.layoutVertexArray,ue.x,ue.y,_e.x,_e.y,0,0,Y),Zd(this.layoutVertexArray,ue.x,ue.y,_e.x,_e.y,0,1,Y),b.x+=2*ue.x,b.y+=2*ue.y,b.vertexCount+=2,Y+=Ce,Zd(this.layoutVertexArray,Pe.x,Pe.y,_e.x,_e.y,0,0,Y),Zd(this.layoutVertexArray,Pe.x,Pe.y,_e.x,_e.y,0,1,Y),b.x+=2*Pe.x,b.y+=2*Pe.y,b.vertexCount+=2;const Oe=I.vertexLength;this.indexArray.emplaceBack(Oe,Oe+2,Oe+1),this.indexArray.emplaceBack(Oe+1,Oe+2,Oe+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+S>ur.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),MI[n.type]!=="Polygon")continue;const P=[],z=[],F=I.vertexLength;for(const q of x)if(q.length!==0){q!==x[0]&&z.push(P.length/2);for(let Y=0;Y<q.length;Y++){const se=q[Y];Zd(this.layoutVertexArray,se.x,se.y,0,0,1,1,0),b.x+=se.x,b.y+=se.y,b.vertexCount+=1,P.push(se.x),P.push(se.y)}}const j=vb(P,z);for(let q=0;q<j.length;q+=3)this.indexArray.emplaceBack(F+j[q],F+j[q+2],F+j[q+1]);I.primitiveLength+=j.length/3,I.vertexLength+=S;for(let q=0;q<b.vertexCount;q++){const Y=Math.floor(b.x/b.vertexCount),se=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(Y,se)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,f)}}function AI(i,n){return i.x===n.x&&(i.x<0||i.x>fn)||i.y===n.y&&(i.y<0||i.y>fn)}function zI(i){return i.every(n=>n.x<0)||i.every(n=>n.x>fn)||i.every(n=>n.y<0)||i.every(n=>n.y>fn)}let Eb;ft("FillExtrusionBucket",Hy,{omit:["layers","features"]});var RI={get paint(){return Eb=Eb||new _({"fill-extrusion-opacity":new gt(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Dt(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gt(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gt(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new zc(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Dt(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Dt(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gt(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class LI extends a{constructor(n){super(n,RI)}createBucket(n){return new Hy(n)}queryRadius(){return hf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,c,f,v,x,b,S){const I=pf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,b),P=this.paint.get("fill-extrusion-height").evaluate(s,c),z=this.paint.get("fill-extrusion-base").evaluate(s,c),F=function(q,Y,se,ue){const Pe=[];for(const _e of q){const Ce=[_e.x,_e.y,0,1];ff(Ce,Ce,Y),Pe.push(new D(Ce[0]/Ce[3],Ce[1]/Ce[3]))}return Pe}(I,S),j=function(q,Y,se,ue){const Pe=[],_e=[],Ce=ue[8]*Y,Oe=ue[9]*Y,We=ue[10]*Y,ut=ue[11]*Y,At=ue[8]*se,at=ue[9]*se,nt=ue[10]*se,xt=ue[11]*se;for(const mt of q){const pt=[],Ne=[];for(const wt of mt){const vt=wt.x,$t=wt.y,Rr=ue[0]*vt+ue[4]*$t+ue[12],Mr=ue[1]*vt+ue[5]*$t+ue[13],Cn=ue[2]*vt+ue[6]*$t+ue[14],Co=ue[3]*vt+ue[7]*$t+ue[15],Un=Cn+We,kn=Co+ut,di=Rr+At,hi=Mr+at,pi=Cn+nt,tn=Co+xt,Tn=new D((Rr+Ce)/kn,(Mr+Oe)/kn);Tn.z=Un/kn,pt.push(Tn);const Qn=new D(di/tn,hi/tn);Qn.z=pi/tn,Ne.push(Qn)}Pe.push(pt),_e.push(Ne)}return[Pe,_e]}(f,z,P,S);return function(q,Y,se){let ue=1/0;ab(se,Y)&&(ue=Mb(se,Y[0]));for(let Pe=0;Pe<Y.length;Pe++){const _e=Y[Pe],Ce=q[Pe];for(let Oe=0;Oe<_e.length-1;Oe++){const We=_e[Oe],ut=[We,_e[Oe+1],Ce[Oe+1],Ce[Oe],We];sb(se,ut)&&(ue=Math.min(ue,Mb(se,ut)))}}return ue!==1/0&&ue}(j[0],j[1],F)}}function Xd(i,n){return i.x*n.x+i.y*n.y}function Mb(i,n){if(i.length===1){let s=0;const c=n[s++];let f;for(;!f||c.equals(f);)if(f=n[s++],!f)return 1/0;for(;s<n.length;s++){const v=n[s],x=i[0],b=f.sub(c),S=v.sub(c),I=x.sub(c),P=Xd(b,b),z=Xd(b,S),F=Xd(S,S),j=Xd(I,b),q=Xd(I,S),Y=P*F-z*z,se=(F*j-z*q)/Y,ue=(P*q-z*j)/Y,Pe=c.z*(1-se-ue)+f.z*se+v.z*ue;if(isFinite(Pe))return Pe}return 1/0}{let s=1/0;for(const c of n)s=Math.min(s,c.z);return s}}const DI=w([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:BI}=DI,FI=w([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:OI}=FI,$I=Pa.VectorTileFeature.types,NI=Math.cos(Math.PI/180*37.5),Ab=Math.pow(2,14)/.5;class Gy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Lc,this.layoutVertexArray2=new Sa,this.indexArray=new io,this.programConfigurations=new kl(n.layers,n.zoom),this.segments=new ur,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){this.hasPattern=jy("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:b,id:S,index:I,sourceLayerIndex:P}of n){const z=this.layers[0]._featureFilter.needGeometry,F=Il(b,z);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),F,c))continue;const j=v?f.evaluate(F,{},c):void 0,q={id:S,properties:b.properties,type:b.type,sourceLayerIndex:P,index:I,geometry:z?F.geometry:Tl(b),patterns:{},sortKey:j};x.push(q)}v&&x.sort((b,S)=>b.sortKey-S.sortKey);for(const b of x){const{geometry:S,index:I,sourceLayerIndex:P}=b;if(this.hasPattern){const z=Vy("line",this.layers,b,this.zoom,s);this.patternFeatures.push(z)}else this.addFeature(b,S,I,c,{});s.featureIndex.insert(n[I].feature,S,I,P,this.index)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}addFeatures(n,s,c){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,OI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,BI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,c,f,v){const x=this.layers[0].layout,b=x.get("line-join").evaluate(n,{}),S=x.get("line-cap"),I=x.get("line-miter-limit"),P=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const z of s)this.addLine(z,n,b,S,I,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,f)}addLine(n,s,c,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<n.length-1;ue++)this.totalDistance+=n[ue].dist(n[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=$I[s.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let I=0;for(;I<S-1&&n[I].equals(n[I+1]);)I++;if(S<(b?3:2))return;c==="bevel"&&(v=1.05);const P=this.overscaling<=16?15*fn/(512*this.overscaling):0,z=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let F,j,q,Y,se;this.e1=this.e2=-1,b&&(F=n[S-2],se=n[I].sub(F)._unit()._perp());for(let ue=I;ue<S;ue++){if(q=ue===S-1?b?n[I+1]:void 0:n[ue+1],q&&n[ue].equals(q))continue;se&&(Y=se),F&&(j=F),F=n[ue],se=q?q.sub(F)._unit()._perp():Y,Y=Y||se;let Pe=Y.add(se);Pe.x===0&&Pe.y===0||Pe._unit();const _e=Y.x*se.x+Y.y*se.y,Ce=Pe.x*se.x+Pe.y*se.y,Oe=Ce!==0?1/Ce:1/0,We=2*Math.sqrt(2-2*Ce),ut=Ce<NI&&j&&q,At=Y.x*se.y-Y.y*se.x>0;if(ut&&ue>I){const xt=F.dist(j);if(xt>2*P){const mt=F.sub(F.sub(j)._mult(P/xt)._round());this.updateDistance(j,mt),this.addCurrentVertex(mt,Y,0,0,z),j=mt}}const at=j&&q;let nt=at?c:b?"butt":f;if(at&&nt==="round"&&(Oe<x?nt="miter":Oe<=2&&(nt="fakeround")),nt==="miter"&&Oe>v&&(nt="bevel"),nt==="bevel"&&(Oe>2&&(nt="flipbevel"),Oe<v&&(nt="miter")),j&&this.updateDistance(j,F),nt==="miter")Pe._mult(Oe),this.addCurrentVertex(F,Pe,0,0,z);else if(nt==="flipbevel"){if(Oe>100)Pe=se.mult(-1);else{const xt=Oe*Y.add(se).mag()/Y.sub(se).mag();Pe._perp()._mult(xt*(At?-1:1))}this.addCurrentVertex(F,Pe,0,0,z),this.addCurrentVertex(F,Pe.mult(-1),0,0,z)}else if(nt==="bevel"||nt==="fakeround"){const xt=-Math.sqrt(Oe*Oe-1),mt=At?xt:0,pt=At?0:xt;if(j&&this.addCurrentVertex(F,Y,mt,pt,z),nt==="fakeround"){const Ne=Math.round(180*We/Math.PI/20);for(let wt=1;wt<Ne;wt++){let vt=wt/Ne;if(vt!==.5){const Rr=vt-.5;vt+=vt*Rr*(vt-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*Rr*Rr+(.848013+_e*(.215638*_e-1.06021)))}const $t=se.sub(Y)._mult(vt)._add(Y)._unit()._mult(At?-1:1);this.addHalfVertex(F,$t.x,$t.y,!1,At,0,z)}}q&&this.addCurrentVertex(F,se,-mt,-pt,z)}else if(nt==="butt")this.addCurrentVertex(F,Pe,0,0,z);else if(nt==="square"){const xt=j?1:-1;this.addCurrentVertex(F,Pe,xt,xt,z)}else nt==="round"&&(j&&(this.addCurrentVertex(F,Y,0,0,z),this.addCurrentVertex(F,Y,1,1,z,!0)),q&&(this.addCurrentVertex(F,se,-1,-1,z,!0),this.addCurrentVertex(F,se,0,0,z)));if(ut&&ue<S-1){const xt=F.dist(q);if(xt>2*P){const mt=F.add(q.sub(F)._mult(P/xt)._round());this.updateDistance(F,mt),this.addCurrentVertex(mt,se,0,0,z),F=mt}}}}addCurrentVertex(n,s,c,f,v,x=!1){const b=s.y*f-s.x,S=-s.y-s.x*f;this.addHalfVertex(n,s.x+s.y*c,s.y-s.x*c,x,!1,c,v),this.addHalfVertex(n,b,S,x,!0,-f,v),this.distance>Ab/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,c,f,v,x))}addHalfVertex({x:n,y:s},c,f,v,x,b,S){const I=.5*(this.lineClips?this.scaledDistance*(Ab-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*c)+128,Math.round(63*f)+128,1+(b===0?0:b<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),S.primitiveLength++),x?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let zb,Rb;ft("LineBucket",Gy,{omit:["layers","patternFeatures"]});var Lb={get paint(){return Rb=Rb||new _({"line-opacity":new Dt(Ie.paint_line["line-opacity"]),"line-color":new Dt(Ie.paint_line["line-color"]),"line-translate":new gt(Ie.paint_line["line-translate"]),"line-translate-anchor":new gt(Ie.paint_line["line-translate-anchor"]),"line-width":new Dt(Ie.paint_line["line-width"]),"line-gap-width":new Dt(Ie.paint_line["line-gap-width"]),"line-offset":new Dt(Ie.paint_line["line-offset"]),"line-blur":new Dt(Ie.paint_line["line-blur"]),"line-dasharray":new Rc(Ie.paint_line["line-dasharray"]),"line-pattern":new zc(Ie.paint_line["line-pattern"]),"line-gradient":new $d(Ie.paint_line["line-gradient"])})},get layout(){return zb=zb||new _({"line-cap":new gt(Ie.layout_line["line-cap"]),"line-join":new Dt(Ie.layout_line["line-join"]),"line-miter-limit":new gt(Ie.layout_line["line-miter-limit"]),"line-round-limit":new gt(Ie.layout_line["line-round-limit"]),"line-sort-key":new Dt(Ie.layout_line["line-sort-key"])})}};class jI extends Dt{possiblyEvaluate(n,s){return s=new jr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,c,f){return s=fe({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,c,f)}}let _f;class VI extends a{constructor(n){super(n,Lb),this.gradientVersion=0,_f||(_f=new jI(Lb.paint.properties["line-width"].specification),_f.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(c){return c._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof ia,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=_f.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Gy(n)}queryRadius(n){const s=n,c=Db(Vd("line-width",this,s),Vd("line-gap-width",this,s)),f=Vd("line-offset",this,s);return c/2+Math.abs(f)+hf(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,c,f,v,x,b){const S=pf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,b),I=b/2*Db(this.paint.get("line-width").evaluate(s,c),this.paint.get("line-gap-width").evaluate(s,c)),P=this.paint.get("line-offset").evaluate(s,c);return P&&(f=function(z,F){const j=[];for(let q=0;q<z.length;q++){const Y=z[q],se=[];for(let ue=0;ue<Y.length;ue++){const Pe=Y[ue-1],_e=Y[ue],Ce=Y[ue+1],Oe=ue===0?new D(0,0):_e.sub(Pe)._unit()._perp(),We=ue===Y.length-1?new D(0,0):Ce.sub(_e)._unit()._perp(),ut=Oe._add(We)._unit(),At=ut.x*We.x+ut.y*We.y;At!==0&&ut._mult(1/At),se.push(ut._mult(F)._add(_e))}j.push(se)}return j}(f,P*b)),function(z,F,j){for(let q=0;q<F.length;q++){const Y=F[q];if(z.length>=3){for(let se=0;se<Y.length;se++)if(Nc(z,Y[se]))return!0}if(YT(z,Y,j))return!0}return!1}(S,f,I)}isTileClipped(){return!0}}function Db(i,n){return n>0?n+2*i:i}const UI=w([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),WI=w([{name:"a_projected_pos",components:3,type:"Float32"}],4);w([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const HI=w([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);w([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bb=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),GI=w([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qI(i,n,s){return i.sections.forEach(c=>{c.text=function(f,v,x){const b=v.layout.get("text-transform").evaluate(x,{});return b==="uppercase"?f=f.toLocaleUpperCase():b==="lowercase"&&(f=f.toLocaleLowerCase()),Ti.applyArabicShaping&&(f=Ti.applyArabicShaping(f)),f}(c.text,n,s)}),i}w([{name:"triangle",components:3,type:"Uint16"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),w([{type:"Float32",name:"offsetX"}]),w([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),w([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Kd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var vn=24,Fb=Er,Ob=function(i,n,s,c,f){var v,x,b=8*f-c-1,S=(1<<b)-1,I=S>>1,P=-7,z=f-1,F=-1,j=i[n+z];for(z+=F,v=j&(1<<-P)-1,j>>=-P,P+=b;P>0;v=256*v+i[n+z],z+=F,P-=8);for(x=v&(1<<-P)-1,v>>=-P,P+=c;P>0;x=256*x+i[n+z],z+=F,P-=8);if(v===0)v=1-I;else{if(v===S)return x?NaN:1/0*(j?-1:1);x+=Math.pow(2,c),v-=I}return(j?-1:1)*x*Math.pow(2,v-c)},$b=function(i,n,s,c,f,v){var x,b,S,I=8*v-f-1,P=(1<<I)-1,z=P>>1,F=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=0,q=1,Y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,x=P):(x=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-x))<1&&(x--,S*=2),(n+=x+z>=1?F/S:F*Math.pow(2,1-z))*S>=2&&(x++,S/=2),x+z>=P?(b=0,x=P):x+z>=1?(b=(n*S-1)*Math.pow(2,f),x+=z):(b=n*Math.pow(2,z-1)*Math.pow(2,f),x=0));f>=8;i[s+j]=255&b,j+=q,b/=256,f-=8);for(x=x<<f|b,I+=f;I>0;i[s+j]=255&x,j+=q,x/=256,I-=8);i[s+j-q]|=128*Y};function Er(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Er.Varint=0,Er.Fixed64=1,Er.Bytes=2,Er.Fixed32=5;var qy=4294967296,Nb=1/qy,jb=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Fs(i){return i.type===Er.Bytes?i.readVarint()+i.pos:i.pos+1}function Wc(i,n,s){return s?4294967296*n+(i>>>0):4294967296*(n>>>0)+(i>>>0)}function Vb(i,n,s){var c=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(c);for(var f=s.pos-1;f>=i;f--)s.buf[f+c]=s.buf[f]}function ZI(i,n){for(var s=0;s<i.length;s++)n.writeVarint(i[s])}function XI(i,n){for(var s=0;s<i.length;s++)n.writeSVarint(i[s])}function KI(i,n){for(var s=0;s<i.length;s++)n.writeFloat(i[s])}function YI(i,n){for(var s=0;s<i.length;s++)n.writeDouble(i[s])}function JI(i,n){for(var s=0;s<i.length;s++)n.writeBoolean(i[s])}function QI(i,n){for(var s=0;s<i.length;s++)n.writeFixed32(i[s])}function eP(i,n){for(var s=0;s<i.length;s++)n.writeSFixed32(i[s])}function tP(i,n){for(var s=0;s<i.length;s++)n.writeFixed64(i[s])}function rP(i,n){for(var s=0;s<i.length;s++)n.writeSFixed64(i[s])}function vf(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+16777216*i[n+3]}function Hc(i,n,s){i[s]=n,i[s+1]=n>>>8,i[s+2]=n>>>16,i[s+3]=n>>>24}function Ub(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+(i[n+3]<<24)}Er.prototype={destroy:function(){this.buf=null},readFields:function(i,n,s){for(s=s||this.length;this.pos<s;){var c=this.readVarint(),f=c>>3,v=this.pos;this.type=7&c,i(f,n,this),this.pos===v&&this.skip(c)}return n},readMessage:function(i,n){return this.readFields(i,n,this.readVarint()+this.pos)},readFixed32:function(){var i=vf(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Ub(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=vf(this.buf,this.pos)+vf(this.buf,this.pos+4)*qy;return this.pos+=8,i},readSFixed64:function(){var i=vf(this.buf,this.pos)+Ub(this.buf,this.pos+4)*qy;return this.pos+=8,i},readFloat:function(){var i=Ob(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=Ob(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var n,s,c=this.buf;return n=127&(s=c[this.pos++]),s<128?n:(n|=(127&(s=c[this.pos++]))<<7,s<128?n:(n|=(127&(s=c[this.pos++]))<<14,s<128?n:(n|=(127&(s=c[this.pos++]))<<21,s<128?n:function(f,v,x){var b,S,I=x.buf;if(b=(112&(S=I[x.pos++]))>>4,S<128||(b|=(127&(S=I[x.pos++]))<<3,S<128)||(b|=(127&(S=I[x.pos++]))<<10,S<128)||(b|=(127&(S=I[x.pos++]))<<17,S<128)||(b|=(127&(S=I[x.pos++]))<<24,S<128)||(b|=(1&(S=I[x.pos++]))<<31,S<128))return Wc(f,b,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=c[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=12&&jb?function(s,c,f){return jb.decode(s.subarray(c,f))}(this.buf,n,i):function(s,c,f){for(var v="",x=c;x<f;){var b,S,I,P=s[x],z=null,F=P>239?4:P>223?3:P>191?2:1;if(x+F>f)break;F===1?P<128&&(z=P):F===2?(192&(b=s[x+1]))==128&&(z=(31&P)<<6|63&b)<=127&&(z=null):F===3?(S=s[x+2],(192&(b=s[x+1]))==128&&(192&S)==128&&((z=(15&P)<<12|(63&b)<<6|63&S)<=2047||z>=55296&&z<=57343)&&(z=null)):F===4&&(S=s[x+2],I=s[x+3],(192&(b=s[x+1]))==128&&(192&S)==128&&(192&I)==128&&((z=(15&P)<<18|(63&b)<<12|(63&S)<<6|63&I)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,F=1):z>65535&&(z-=65536,v+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),v+=String.fromCharCode(z),x+=F}return v}(this.buf,n,i)},readBytes:function(){var i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n},readPackedVarint:function(i,n){if(this.type!==Er.Bytes)return i.push(this.readVarint(n));var s=Fs(this);for(i=i||[];this.pos<s;)i.push(this.readVarint(n));return i},readPackedSVarint:function(i){if(this.type!==Er.Bytes)return i.push(this.readSVarint());var n=Fs(this);for(i=i||[];this.pos<n;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Er.Bytes)return i.push(this.readBoolean());var n=Fs(this);for(i=i||[];this.pos<n;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Er.Bytes)return i.push(this.readFloat());var n=Fs(this);for(i=i||[];this.pos<n;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Er.Bytes)return i.push(this.readDouble());var n=Fs(this);for(i=i||[];this.pos<n;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Er.Bytes)return i.push(this.readFixed32());var n=Fs(this);for(i=i||[];this.pos<n;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Er.Bytes)return i.push(this.readSFixed32());var n=Fs(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Er.Bytes)return i.push(this.readFixed64());var n=Fs(this);for(i=i||[];this.pos<n;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Er.Bytes)return i.push(this.readSFixed64());var n=Fs(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed64());return i},skip:function(i){var n=7&i;if(n===Er.Varint)for(;this.buf[this.pos++]>127;);else if(n===Er.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Er.Fixed32)this.pos+=4;else{if(n!==Er.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(i,n){this.writeVarint(i<<3|n)},realloc:function(i){for(var n=this.length||16;n<this.pos+i;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Hc(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Hc(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Hc(this.buf,-1&i,this.pos),Hc(this.buf,Math.floor(i*Nb),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Hc(this.buf,-1&i,this.pos),Hc(this.buf,Math.floor(i*Nb),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(n,s){var c,f;if(n>=0?(c=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(c=~(-n%4294967296))?c=c+1|0:(c=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,b){b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,b.buf[b.pos]=127&(v>>>=7)}(c,0,s),function(v,x){var b=(7&v)<<4;x.buf[x.pos++]|=b|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,s)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var n=this.pos;this.pos=function(c,f,v){for(var x,b,S=0;S<f.length;S++){if((x=f.charCodeAt(S))>55295&&x<57344){if(!b){x>56319||S+1===f.length?(c[v++]=239,c[v++]=191,c[v++]=189):b=x;continue}if(x<56320){c[v++]=239,c[v++]=191,c[v++]=189,b=x;continue}x=b-55296<<10|x-56320|65536,b=null}else b&&(c[v++]=239,c[v++]=191,c[v++]=189,b=null);x<128?c[v++]=x:(x<2048?c[v++]=x>>6|192:(x<65536?c[v++]=x>>12|224:(c[v++]=x>>18|240,c[v++]=x>>12&63|128),c[v++]=x>>6&63|128),c[v++]=63&x|128)}return v}(this.buf,i,this.pos);var s=this.pos-n;s>=128&&Vb(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(i){this.realloc(4),$b(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),$b(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var n=i.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=i[s]},writeRawMessage:function(i,n){this.pos++;var s=this.pos;i(n,this);var c=this.pos-s;c>=128&&Vb(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeMessage:function(i,n,s){this.writeTag(i,Er.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(i,n){n.length&&this.writeMessage(i,ZI,n)},writePackedSVarint:function(i,n){n.length&&this.writeMessage(i,XI,n)},writePackedBoolean:function(i,n){n.length&&this.writeMessage(i,JI,n)},writePackedFloat:function(i,n){n.length&&this.writeMessage(i,KI,n)},writePackedDouble:function(i,n){n.length&&this.writeMessage(i,YI,n)},writePackedFixed32:function(i,n){n.length&&this.writeMessage(i,QI,n)},writePackedSFixed32:function(i,n){n.length&&this.writeMessage(i,eP,n)},writePackedFixed64:function(i,n){n.length&&this.writeMessage(i,tP,n)},writePackedSFixed64:function(i,n){n.length&&this.writeMessage(i,rP,n)},writeBytesField:function(i,n){this.writeTag(i,Er.Bytes),this.writeBytes(n)},writeFixed32Field:function(i,n){this.writeTag(i,Er.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(i,n){this.writeTag(i,Er.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(i,n){this.writeTag(i,Er.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(i,n){this.writeTag(i,Er.Fixed64),this.writeSFixed64(n)},writeVarintField:function(i,n){this.writeTag(i,Er.Varint),this.writeVarint(n)},writeSVarintField:function(i,n){this.writeTag(i,Er.Varint),this.writeSVarint(n)},writeStringField:function(i,n){this.writeTag(i,Er.Bytes),this.writeString(n)},writeFloatField:function(i,n){this.writeTag(i,Er.Fixed32),this.writeFloat(n)},writeDoubleField:function(i,n){this.writeTag(i,Er.Fixed64),this.writeDouble(n)},writeBooleanField:function(i,n){this.writeVarintField(i,!!n)}};var Zy=k(Fb);const Xy=3;function nP(i,n,s){i===1&&s.readMessage(iP,n)}function iP(i,n,s){if(i===3){const{id:c,bitmap:f,width:v,height:x,left:b,top:S,advance:I}=s.readMessage(oP,{});n.push({id:c,bitmap:new Wd({width:v+2*Xy,height:x+2*Xy},f),metrics:{width:v,height:x,left:b,top:S,advance:I}})}}function oP(i,n,s){i===1?n.id=s.readVarint():i===2?n.bitmap=s.readBytes():i===3?n.width=s.readVarint():i===4?n.height=s.readVarint():i===5?n.left=s.readSVarint():i===6?n.top=s.readSVarint():i===7&&(n.advance=s.readVarint())}const Wb=Xy;function Hb(i){let n=0,s=0;for(const x of i)n+=x.w*x.h,s=Math.max(s,x.w);i.sort((x,b)=>b.h-x.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let f=0,v=0;for(const x of i)for(let b=c.length-1;b>=0;b--){const S=c[b];if(!(x.w>S.w||x.h>S.h)){if(x.x=S.x,x.y=S.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===S.w&&x.h===S.h){const I=c.pop();b<c.length&&(c[b]=I)}else x.h===S.h?(S.x+=x.w,S.w-=x.w):x.w===S.w?(S.y+=x.h,S.h-=x.h):(c.push({x:S.x+x.w,y:S.y,w:S.w-x.w,h:x.h}),S.y+=x.h,S.h-=x.h);break}}return{w:f,h:v,fill:n/(f*v)||0}}const Pi=1;class Ky{constructor(n,{pixelRatio:s,version:c,stretchX:f,stretchY:v,content:x,textFitWidth:b,textFitHeight:S}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=f,this.stretchY=v,this.content=x,this.version=c,this.textFitWidth=b,this.textFitHeight=S}get tl(){return[this.paddedRect.x+Pi,this.paddedRect.y+Pi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Pi,this.paddedRect.y+this.paddedRect.h-Pi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Pi)/this.pixelRatio,(this.paddedRect.h-2*Pi)/this.pixelRatio]}}class Gb{constructor(n,s){const c={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,c,v),this.addImages(s,f,v);const{w:x,h:b}=Hb(v),S=new oo({width:x||1,height:b||1});for(const I in n){const P=n[I],z=c[I].paddedRect;oo.copy(P.data,S,{x:0,y:0},{x:z.x+Pi,y:z.y+Pi},P.data)}for(const I in s){const P=s[I],z=f[I].paddedRect,F=z.x+Pi,j=z.y+Pi,q=P.data.width,Y=P.data.height;oo.copy(P.data,S,{x:0,y:0},{x:F,y:j},P.data),oo.copy(P.data,S,{x:0,y:Y-1},{x:F,y:j-1},{width:q,height:1}),oo.copy(P.data,S,{x:0,y:0},{x:F,y:j+Y},{width:q,height:1}),oo.copy(P.data,S,{x:q-1,y:0},{x:F-1,y:j},{width:1,height:Y}),oo.copy(P.data,S,{x:0,y:0},{x:F+q,y:j},{width:1,height:Y})}this.image=S,this.iconPositions=c,this.patternPositions=f}addImages(n,s,c){for(const f in n){const v=n[f],x={x:0,y:0,w:v.data.width+2*Pi,h:v.data.height+2*Pi};c.push(x),s[f]=new Ky(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in n.updatedImages)this.patchUpdatedImage(this.iconPositions[c],n.getImage(c),s),this.patchUpdatedImage(this.patternPositions[c],n.getImage(c),s)}patchUpdatedImage(n,s,c){if(!n||!s||n.version===s.version)return;n.version=s.version;const[f,v]=n.tl;c.update(s.data,void 0,{x:f,y:v})}}var Ea;ft("ImagePosition",Ky),ft("ImageAtlas",Gb),g.ah=void 0,(Ea=g.ah||(g.ah={}))[Ea.none=0]="none",Ea[Ea.horizontal=1]="horizontal",Ea[Ea.vertical=2]="vertical",Ea[Ea.horizontalOnly=3]="horizontalOnly";const Yd=-17;class Jd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const c=new Jd;return c.scale=n||1,c.fontStack=s,c}static forImage(n){const s=new Jd;return s.imageName=n,s}}class Gc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const c=new Gc;for(let f=0;f<n.sections.length;f++){const v=n.sections[f];v.image?c.addImageSection(v):c.addTextSection(v,s)}return c}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let c=0;c<n.length;c++){const f=n.charCodeAt(c+1)||null,v=n.charCodeAt(c-1)||null;s+=f&&of(f)&&!Kd[n[c+1]]||v&&of(v)&&!Kd[n[c-1]]||!Kd[n[c]]?n[c]:Kd[n[c]]}return s}(this.text)}trim(){let n=0;for(let c=0;c<this.text.length&&bf[this.text.charCodeAt(c)];c++)n++;let s=this.text.length;for(let c=this.text.length-1;c>=0&&c>=n&&bf[this.text.charCodeAt(c)];c--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const c=new Gc;return c.text=this.text.substring(n,s),c.sectionIndex=this.sectionIndex.slice(n,s),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Jd.forText(n.scale,n.fontStack||s));const c=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(c)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void xe("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(Jd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):xe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function xf(i,n,s,c,f,v,x,b,S,I,P,z,F,j,q){const Y=Gc.fromFeature(i,f);let se;z===g.ah.vertical&&Y.verticalizePunctuation();const{processBidirectionalText:ue,processStyledBidirectionalText:Pe}=Ti;if(ue&&Y.sections.length===1){se=[];const Oe=ue(Y.toString(),Yy(Y,I,v,n,c,j));for(const We of Oe){const ut=new Gc;ut.text=We,ut.sections=Y.sections;for(let At=0;At<We.length;At++)ut.sectionIndex.push(0);se.push(ut)}}else if(Pe){se=[];const Oe=Pe(Y.text,Y.sectionIndex,Yy(Y,I,v,n,c,j));for(const We of Oe){const ut=new Gc;ut.text=We[0],ut.sectionIndex=We[1],ut.sections=Y.sections,se.push(ut)}}else se=function(Oe,We){const ut=[],At=Oe.text;let at=0;for(const nt of We)ut.push(Oe.substring(at,nt)),at=nt;return at<At.length&&ut.push(Oe.substring(at,At.length)),ut}(Y,Yy(Y,I,v,n,c,j));const _e=[],Ce={positionedLines:_e,text:Y.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(Oe,We,ut,At,at,nt,xt,mt,pt,Ne,wt,vt){let $t=0,Rr=Yd,Mr=0,Cn=0;const Co=mt==="right"?1:mt==="left"?0:.5;let Un=0;for(const tn of at){tn.trim();const Tn=tn.getMaxScale(),Qn=(Tn-1)*vn,Wn={positionedGlyphs:[],lineOffset:0};Oe.positionedLines[Un]=Wn;const fi=Wn.positionedGlyphs;let Hn=0;if(!tn.length()){Rr+=nt,++Un;continue}for(let Ei=0;Ei<tn.length();Ei++){const xr=tn.getSection(Ei),Dr=tn.getSectionIndex(Ei),Hr=tn.getCharCode(Ei);let Wi=0,Kr=null,Kc=null,ss=null,as=vn;const ko=!(pt===g.ah.horizontal||!wt&&!Fd(Hr)||wt&&(bf[Hr]||(kn=Hr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(kn)))));if(xr.imageName){const lo=At[xr.imageName];if(!lo)continue;ss=xr.imageName,Oe.iconsInText=Oe.iconsInText||!0,Kc=lo.paddedRect;const Rn=lo.displaySize;xr.scale=xr.scale*vn/vt,Kr={width:Rn[0],height:Rn[1],left:Pi,top:-Wb,advance:ko?Rn[1]:Rn[0]},Wi=Qn+(vn-Rn[1]*xr.scale),as=Kr.advance;const Os=ko?Rn[0]*xr.scale-vn*Tn:Rn[1]*xr.scale-vn*Tn;Os>0&&Os>Hn&&(Hn=Os)}else{const lo=ut[xr.fontStack],Rn=lo&&lo[Hr];if(Rn&&Rn.rect)Kc=Rn.rect,Kr=Rn.metrics;else{const Os=We[xr.fontStack],ih=Os&&Os[Hr];if(!ih)continue;Kr=ih.metrics}Wi=(Tn-xr.scale)*vn}ko?(Oe.verticalizable=!0,fi.push({glyph:Hr,imageName:ss,x:$t,y:Rr+Wi,vertical:ko,scale:xr.scale,fontStack:xr.fontStack,sectionIndex:Dr,metrics:Kr,rect:Kc}),$t+=as*xr.scale+Ne):(fi.push({glyph:Hr,imageName:ss,x:$t,y:Rr+Wi,vertical:ko,scale:xr.scale,fontStack:xr.fontStack,sectionIndex:Dr,metrics:Kr,rect:Kc}),$t+=Kr.advance*xr.scale+Ne)}fi.length!==0&&(Mr=Math.max($t-Ne,Mr),cP(fi,0,fi.length-1,Co,Hn)),$t=0;const ao=nt*Tn+Hn;Wn.lineOffset=Math.max(Hn,Qn),Rr+=ao,Cn=Math.max(ao,Cn),++Un}var kn;const di=Rr-Yd,{horizontalAlign:hi,verticalAlign:pi}=Jy(xt);(function(tn,Tn,Qn,Wn,fi,Hn,ao,Ei,xr){const Dr=(Tn-Qn)*fi;let Hr=0;Hr=Hn!==ao?-Ei*Wn-Yd:(-Wn*xr+.5)*ao;for(const Wi of tn)for(const Kr of Wi.positionedGlyphs)Kr.x+=Dr,Kr.y+=Hr})(Oe.positionedLines,Co,hi,pi,Mr,Cn,nt,di,at.length),Oe.top+=-pi*di,Oe.bottom=Oe.top+di,Oe.left+=-hi*Mr,Oe.right=Oe.left+Mr}(Ce,n,s,c,se,x,b,S,z,I,F,q),!function(Oe){for(const We of Oe)if(We.positionedGlyphs.length!==0)return!1;return!0}(_e)&&Ce}const bf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},sP={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},aP={40:!0};function qb(i,n,s,c,f,v){if(n.imageName){const x=c[n.imageName];return x?x.displaySize[0]*n.scale*vn/v+f:0}{const x=s[n.fontStack],b=x&&x[i];return b?b.metrics.advance*n.scale+f:0}}function Zb(i,n,s,c){const f=Math.pow(i-n,2);return c?i<n?f/2:2*f:f+Math.abs(s)*s}function lP(i,n,s){let c=0;return i===10&&(c-=1e4),s&&(c+=150),i!==40&&i!==65288||(c+=50),n!==41&&n!==65289||(c+=50),c}function Xb(i,n,s,c,f,v){let x=null,b=Zb(n,s,f,v);for(const S of c){const I=Zb(n-S.x,s,f,v)+S.badness;I<=b&&(x=S,b=I)}return{index:i,x:n,priorBreak:x,badness:b}}function Kb(i){return i?Kb(i.priorBreak).concat(i.index):[]}function Yy(i,n,s,c,f,v){if(!i)return[];const x=[],b=function(z,F,j,q,Y,se){let ue=0;for(let Pe=0;Pe<z.length();Pe++){const _e=z.getSection(Pe);ue+=qb(z.getCharCode(Pe),_e,q,Y,F,se)}return ue/Math.max(1,Math.ceil(ue/j))}(i,n,s,c,f,v),S=i.text.indexOf("")>=0;let I=0;for(let z=0;z<i.length();z++){const F=i.getSection(z),j=i.getCharCode(z);if(bf[j]||(I+=qb(j,F,c,f,n,v)),z<i.length()-1){const q=!((P=j)<11904)&&(!!cr["CJK Compatibility Forms"](P)||!!cr["CJK Compatibility"](P)||!!cr["CJK Strokes"](P)||!!cr["CJK Symbols and Punctuation"](P)||!!cr["Enclosed CJK Letters and Months"](P)||!!cr["Halfwidth and Fullwidth Forms"](P)||!!cr["Ideographic Description Characters"](P)||!!cr["Vertical Forms"](P)||nf.test(String.fromCodePoint(P)));(sP[j]||q||F.imageName||z!==i.length()-2&&aP[i.getCharCode(z+1)])&&x.push(Xb(z+1,I,b,x,lP(j,i.getCharCode(z+1),q&&S),!1))}}var P;return Kb(Xb(i.length(),I,b,x,0,!0))}function Jy(i){let n=.5,s=.5;switch(i){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function cP(i,n,s,c,f){if(!c&&!f)return;const v=i[s],x=(i[s].x+v.metrics.advance*v.scale)*c;for(let b=n;b<=s;b++)i[b].x-=x,i[b].y+=f}function uP(i,n,s){const{horizontalAlign:c,verticalAlign:f}=Jy(s),v=n[0]-i.displaySize[0]*c,x=n[1]-i.displaySize[1]*f;return{image:i,top:x,bottom:x+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function Yb(i){var n,s;let c=i.left,f=i.top,v=i.right-c,x=i.bottom-f;const b=(n=i.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",S=(s=i.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",I=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(S==="proportional"){if(b==="stretchOnly"&&v/x<I||b==="proportional"){const P=Math.ceil(x*I);c*=P/v,v=P}}else if(b==="proportional"&&S==="stretchOnly"&&I!==0&&v/x>I){const P=Math.ceil(v/I);f*=P/x,x=P}return{x1:c,y1:f,x2:c+v,y2:f+x}}function Jb(i,n,s,c,f,v){const x=i.image;let b;if(x.content){const se=x.content,ue=x.pixelRatio||1;b=[se[0]/ue,se[1]/ue,x.displaySize[0]-se[2]/ue,x.displaySize[1]-se[3]/ue]}const S=n.left*v,I=n.right*v;let P,z,F,j;s==="width"||s==="both"?(j=f[0]+S-c[3],z=f[0]+I+c[1]):(j=f[0]+(S+I-x.displaySize[0])/2,z=j+x.displaySize[0]);const q=n.top*v,Y=n.bottom*v;return s==="height"||s==="both"?(P=f[1]+q-c[0],F=f[1]+Y+c[2]):(P=f[1]+(q+Y-x.displaySize[1])/2,F=P+x.displaySize[1]),{image:x,top:P,right:z,bottom:F,left:j,collisionPadding:b}}const Qd=255,os=128,Ma=Qd*os;function Qb(i,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new jr(i+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:f}=s;let v=0;for(;v<c.length&&c[v]<=i;)v++;v=Math.max(0,v-1);let x=v;for(;x<c.length&&c[x]<i+1;)x++;x=Math.min(c.length-1,x);const b=c[v],S=c[x];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:S,interpolationType:f}:{kind:"camera",minZoom:b,maxZoom:S,minSize:s.evaluate(new jr(b)),maxSize:s.evaluate(new jr(S)),interpolationType:f}}}function Qy(i,n,s){let c="never";const f=i.get(n);return f?c=f:i.get(s)&&(c="always"),c}const dP=Pa.VectorTileFeature.types,hP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function wf(i,n,s,c,f,v,x,b,S,I,P,z,F){const j=b?Math.min(Ma,Math.round(b[0])):0,q=b?Math.min(Ma,Math.round(b[1])):0;i.emplaceBack(n,s,Math.round(32*c),Math.round(32*f),v,x,(j<<1)+(S?1:0),q,16*I,16*P,256*z,256*F)}function e_(i,n,s){i.emplaceBack(n.x,n.y,s),i.emplaceBack(n.x,n.y,s),i.emplaceBack(n.x,n.y,s),i.emplaceBack(n.x,n.y,s)}function pP(i){for(const n of i.sections)if(Py(n.text))return!0;return!1}class t_{constructor(n){this.layoutVertexArray=new Dc,this.indexArray=new io,this.programConfigurations=n,this.segments=new ur,this.dynamicLayoutVertexArray=new Nd,this.opacityVertexArray=new Vi,this.hasVisibleVertices=!1,this.placedSymbolArray=new Vr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,c,f){this.isEmpty()||(c&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,UI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,WI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,hP,!0),this.opacityVertexBuffer.itemSize=1),(c||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ft("SymbolBuffers",t_);class r_{constructor(n,s,c){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new c,this.segments=new ur,this.collisionVertexArray=new ns}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,HI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ft("CollisionBuffers",r_);class qc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Dy([]),this.placementViewportMatrix=Dy([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Qb(this.zoom,s["text-size"]),this.iconSizeData=Qb(this.zoom,s["icon-size"]);const c=this.layers[0].layout,f=c.get("symbol-sort-key"),v=c.get("symbol-z-order");this.canOverlap=Qy(c,"text-overlap","text-allow-overlap")!=="never"||Qy(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(x=>g.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new t_(new kl(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new t_(new kl(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ur,this.lineVertexArray=new $n,this.symbolInstances=new ar,this.textAnchorOffsets=new Wr}calculateGlyphDependencies(n,s,c,f,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(c||f)&&v){const b=Kd[n.charAt(x)];b&&(s[b.charCodeAt(0)]=!0)}}populate(n,s,c){const f=this.layers[0],v=f.layout,x=v.get("text-font"),b=v.get("text-field"),S=v.get("icon-image"),I=(b.value.kind!=="constant"||b.value.value instanceof wi&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),P=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,z=v.get("symbol-sort-key");if(this.features=[],!I&&!P)return;const F=s.iconDependencies,j=s.glyphDependencies,q=s.availableImages,Y=new jr(this.zoom);for(const{feature:se,id:ue,index:Pe,sourceLayerIndex:_e}of n){const Ce=f._featureFilter.needGeometry,Oe=Il(se,Ce);if(!f._featureFilter.filter(Y,Oe,c))continue;let We,ut;if(Ce||(Oe.geometry=Tl(se)),I){const at=f.getValueAndResolveTokens("text-field",Oe,c,q),nt=wi.factory(at),xt=this.hasRTLText=this.hasRTLText||pP(nt);(!xt||Ti.getRTLTextPluginStatus()==="unavailable"||xt&&Ti.isParsed())&&(We=qI(nt,f,Oe))}if(P){const at=f.getValueAndResolveTokens("icon-image",Oe,c,q);ut=at instanceof Ci?at:Ci.fromString(at)}if(!We&&!ut)continue;const At=this.sortFeaturesByKey?z.evaluate(Oe,{},c):void 0;if(this.features.push({id:ue,text:We,icon:ut,index:Pe,sourceLayerIndex:_e,geometry:Oe.geometry,properties:se.properties,type:dP[se.type],sortKey:At}),ut&&(F[ut.name]=!0),We){const at=x.evaluate(Oe,{},c).join(","),nt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.ah.vertical)>=0;for(const xt of We.sections)if(xt.image)F[xt.image.name]=!0;else{const mt=Dd(We.toString()),pt=xt.fontStack||at,Ne=j[pt]=j[pt]||{};this.calculateGlyphDependencies(xt.text,Ne,nt,this.allowVerticalPlacement,mt)}}}v.get("symbol-placement")==="line"&&(this.features=function(se){const ue={},Pe={},_e=[];let Ce=0;function Oe(at){_e.push(se[at]),Ce++}function We(at,nt,xt){const mt=Pe[at];return delete Pe[at],Pe[nt]=mt,_e[mt].geometry[0].pop(),_e[mt].geometry[0]=_e[mt].geometry[0].concat(xt[0]),mt}function ut(at,nt,xt){const mt=ue[nt];return delete ue[nt],ue[at]=mt,_e[mt].geometry[0].shift(),_e[mt].geometry[0]=xt[0].concat(_e[mt].geometry[0]),mt}function At(at,nt,xt){const mt=xt?nt[0][nt[0].length-1]:nt[0][0];return`${at}:${mt.x}:${mt.y}`}for(let at=0;at<se.length;at++){const nt=se[at],xt=nt.geometry,mt=nt.text?nt.text.toString():null;if(!mt){Oe(at);continue}const pt=At(mt,xt),Ne=At(mt,xt,!0);if(pt in Pe&&Ne in ue&&Pe[pt]!==ue[Ne]){const wt=ut(pt,Ne,xt),vt=We(pt,Ne,_e[wt].geometry);delete ue[pt],delete Pe[Ne],Pe[At(mt,_e[vt].geometry,!0)]=vt,_e[wt].geometry=null}else pt in Pe?We(pt,Ne,xt):Ne in ue?ut(pt,Ne,xt):(Oe(at),ue[pt]=Ce-1,Pe[Ne]=Ce-1)}return _e.filter(at=>at.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((se,ue)=>se.sortKey-ue.sortKey)}update(n,s,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,c),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const c=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let b=n.segment+1;b<s.length;b++)x[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:f},b<s.length-1&&(f+=s[b+1].dist(s[b]));for(let b=n.segment||0;b>=0;b--)x[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:v},b>0&&(v+=s[b-1].dist(s[b]));for(let b=0;b<s.length;b++){const S=x[b];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(n,s,c,f,v,x,b,S,I,P,z,F){const j=n.indexArray,q=n.layoutVertexArray,Y=n.segments.prepareSegment(4*s.length,q,j,this.canOverlap?x.sortKey:void 0),se=this.glyphOffsetArray.length,ue=Y.vertexLength,Pe=this.allowVerticalPlacement&&b===g.ah.vertical?Math.PI/2:0,_e=x.text&&x.text.sections;for(let Ce=0;Ce<s.length;Ce++){const{tl:Oe,tr:We,bl:ut,br:At,tex:at,pixelOffsetTL:nt,pixelOffsetBR:xt,minFontScaleX:mt,minFontScaleY:pt,glyphOffset:Ne,isSDF:wt,sectionIndex:vt}=s[Ce],$t=Y.vertexLength,Rr=Ne[1];wf(q,S.x,S.y,Oe.x,Rr+Oe.y,at.x,at.y,c,wt,nt.x,nt.y,mt,pt),wf(q,S.x,S.y,We.x,Rr+We.y,at.x+at.w,at.y,c,wt,xt.x,nt.y,mt,pt),wf(q,S.x,S.y,ut.x,Rr+ut.y,at.x,at.y+at.h,c,wt,nt.x,xt.y,mt,pt),wf(q,S.x,S.y,At.x,Rr+At.y,at.x+at.w,at.y+at.h,c,wt,xt.x,xt.y,mt,pt),e_(n.dynamicLayoutVertexArray,S,Pe),j.emplaceBack($t,$t+1,$t+2),j.emplaceBack($t+1,$t+2,$t+3),Y.vertexLength+=4,Y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ne[0]),Ce!==s.length-1&&vt===s[Ce+1].sectionIndex||n.programConfigurations.populatePaintArrays(q.length,x,x.index,{},F,_e&&_e[vt])}n.placedSymbolArray.emplaceBack(S.x,S.y,se,this.glyphOffsetArray.length-se,ue,I,P,S.segment,c?c[0]:0,c?c[1]:0,f[0],f[1],b,0,!1,0,z)}_addCollisionDebugVertex(n,s,c,f,v,x){return s.emplaceBack(0,0),n.emplaceBack(c.x,c.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,c,f,v,x,b){const S=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),I=S.vertexLength,P=v.layoutVertexArray,z=v.collisionVertexArray,F=b.anchorX,j=b.anchorY;this._addCollisionDebugVertex(P,z,x,F,j,new D(n,s)),this._addCollisionDebugVertex(P,z,x,F,j,new D(c,s)),this._addCollisionDebugVertex(P,z,x,F,j,new D(c,f)),this._addCollisionDebugVertex(P,z,x,F,j,new D(n,f)),S.vertexLength+=4;const q=v.indexArray;q.emplaceBack(I,I+1),q.emplaceBack(I+1,I+2),q.emplaceBack(I+2,I+3),q.emplaceBack(I+3,I),S.primitiveLength+=4}addDebugCollisionBoxes(n,s,c,f){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new r_(Ui,Bb.members,zn),this.iconCollisionBox=new r_(Ui,Bb.members,zn);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,c,f,v,x,b,S,I){const P={};for(let z=s;z<c;z++){const F=n.get(z);P.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},P.textFeatureIndex=F.featureIndex;break}for(let z=f;z<v;z++){const F=n.get(z);P.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},P.verticalTextFeatureIndex=F.featureIndex;break}for(let z=x;z<b;z++){const F=n.get(z);P.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},P.iconFeatureIndex=F.featureIndex;break}for(let z=S;z<I;z++){const F=n.get(z);P.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},P.verticalIconFeatureIndex=F.featureIndex;break}return P}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const c=n.placedSymbolArray.get(s),f=c.vertexStartIndex+4*c.numGlyphs;for(let v=c.vertexStartIndex;v<f;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),c=Math.cos(n),f=[],v=[],x=[];for(let b=0;b<this.symbolInstances.length;++b){x.push(b);const S=this.symbolInstances.get(b);f.push(0|Math.round(s*S.anchorX+c*S.anchorY)),v.push(S.featureIndex)}return x.sort((b,S)=>f[b]-f[S]||v[S]-v[b]),x}addToSortKeyRanges(n,s){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===s?c.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const c=this.symbolInstances.get(s);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let e1,t1;ft("SymbolBucket",qc,{omit:["layers","collisionBoxArray","features","compareText"]}),qc.MAX_GLYPHS=65535,qc.addDynamicAttributes=e_;var n_={get paint(){return t1=t1||new _({"icon-opacity":new Dt(Ie.paint_symbol["icon-opacity"]),"icon-color":new Dt(Ie.paint_symbol["icon-color"]),"icon-halo-color":new Dt(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new Dt(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Dt(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new gt(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new gt(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new Dt(Ie.paint_symbol["text-opacity"]),"text-color":new Dt(Ie.paint_symbol["text-color"],{runtimeType:Mn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Dt(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new Dt(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new Dt(Ie.paint_symbol["text-halo-blur"]),"text-translate":new gt(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new gt(Ie.paint_symbol["text-translate-anchor"])})},get layout(){return e1=e1||new _({"symbol-placement":new gt(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new gt(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gt(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Dt(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gt(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gt(Ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new gt(Ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new gt(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new gt(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gt(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new Dt(Ie.layout_symbol["icon-size"]),"icon-text-fit":new gt(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gt(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new Dt(Ie.layout_symbol["icon-image"]),"icon-rotate":new Dt(Ie.layout_symbol["icon-rotate"]),"icon-padding":new Dt(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new gt(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new Dt(Ie.layout_symbol["icon-offset"]),"icon-anchor":new Dt(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gt(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gt(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gt(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new Dt(Ie.layout_symbol["text-field"]),"text-font":new Dt(Ie.layout_symbol["text-font"]),"text-size":new Dt(Ie.layout_symbol["text-size"]),"text-max-width":new Dt(Ie.layout_symbol["text-max-width"]),"text-line-height":new gt(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new Dt(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new Dt(Ie.layout_symbol["text-justify"]),"text-radial-offset":new Dt(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gt(Ie.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Dt(Ie.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Dt(Ie.layout_symbol["text-anchor"]),"text-max-angle":new gt(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new gt(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new Dt(Ie.layout_symbol["text-rotate"]),"text-padding":new gt(Ie.layout_symbol["text-padding"]),"text-keep-upright":new gt(Ie.layout_symbol["text-keep-upright"]),"text-transform":new Dt(Ie.layout_symbol["text-transform"]),"text-offset":new Dt(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new gt(Ie.layout_symbol["text-allow-overlap"]),"text-overlap":new gt(Ie.layout_symbol["text-overlap"]),"text-ignore-placement":new gt(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new gt(Ie.layout_symbol["text-optional"])})}};class r1{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Nr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ft("FormatSectionOverride",r1,{omit:["defaultValue"]});class Sf extends a{constructor(n){super(n,n_)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const f=[];for(const v of c)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,c,f){const v=this.layout.get(n).evaluate(s,{},c,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||xc(x.value)||!v?v:function(b,S){return S.replace(/{([^{}]+)}/g,(I,P)=>b&&P in b?String(b[P]):"")}(s.properties,v)}createBucket(n){return new qc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of n_.paint.overridableProperties){if(!Sf.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),c=new r1(s),f=new vc(c,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new pa("source",f):new fa("composite",f,s.value.zoomStops),this.paint._values[n]=new wo(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,c){return!(!this.layout||s.isDataDriven()||c.isDataDriven())&&Sf.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const c=n.get("text-field"),f=n_.paint.properties[s];let v=!1;const x=b=>{for(const S of b)if(f.overrides&&f.overrides.hasOverride(S))return void(v=!0)};if(c.value.kind==="constant"&&c.value.value instanceof wi)x(c.value.value.sections);else if(c.value.kind==="source"){const b=I=>{v||(I instanceof Ji&&pn(I.value)===Bi?x(I.value.sections):I instanceof uc?x(I.sections):I.eachChild(b))},S=c.value;S._styleExpression&&b(S._styleExpression.expression)}return v}}let n1;var fP={get paint(){return n1=n1||new _({"background-color":new gt(Ie.paint_background["background-color"]),"background-pattern":new Rc(Ie.paint_background["background-pattern"]),"background-opacity":new gt(Ie.paint_background["background-opacity"])})}};class mP extends a{constructor(n){super(n,fP)}}let i1;var gP={get paint(){return i1=i1||new _({"raster-opacity":new gt(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new gt(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gt(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gt(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new gt(Ie.paint_raster["raster-saturation"]),"raster-contrast":new gt(Ie.paint_raster["raster-contrast"]),"raster-resampling":new gt(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new gt(Ie.paint_raster["raster-fade-duration"])})}};class yP extends a{constructor(n){super(n,gP)}}class _P extends a{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class vP{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const i_=63710088e-1;class Aa{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Aa(ce(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,c=this.lat*s,f=n.lat*s,v=Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos((n.lng-this.lng)*s);return i_*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Aa)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Aa(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Aa(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const o1=2*Math.PI*i_;function s1(i){return o1*Math.cos(i*Math.PI/180)}function a1(i){return(180+i)/360}function l1(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function c1(i,n){return i/s1(n)}function o_(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class eh{constructor(n,s,c=0){this.x=+n,this.y=+s,this.z=+c}static fromLngLat(n,s=0){const c=Aa.convert(n);return new eh(a1(c.lng),l1(c.lat),c1(s,c.lat))}toLngLat(){return new Aa(360*this.x-180,o_(this.y))}toAltitude(){return this.z*s1(o_(this.y))}meterInMercatorCoordinateUnits(){return 1/o1*(n=o_(this.y),1/Math.cos(n*Math.PI/180));var n}}function u1(i,n,s){var c=2*Math.PI*6378137/256/Math.pow(2,s);return[i*c-2*Math.PI*6378137/2,n*c-2*Math.PI*6378137/2]}class s_{constructor(n,s,c){if(!function(f,v,x){return!(f<0||f>25||x<0||x>=Math.pow(2,f)||v<0||v>=Math.pow(2,f))}(n,s,c))throw new Error(`x=${s}, y=${c}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=c,this.key=th(0,n,n,s,c)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,c){const f=(x=this.y,b=this.z,S=u1(256*(v=this.x),256*(x=Math.pow(2,b)-x-1),b),I=u1(256*(v+1),256*(x+1),b),S[0]+","+S[1]+","+I[0]+","+I[1]);var v,x,b,S,I;const P=function(z,F,j){let q,Y="";for(let se=z;se>0;se--)q=1<<se-1,Y+=(F&q?1:0)+(j&q?2:0);return Y}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,P).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new D((n.x*s-this.x)*fn,(n.y*s-this.y)*fn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class d1{constructor(n,s){this.wrap=n,this.canonical=s,this.key=th(n,s.z,s.z,s.x,s.y)}}class so{constructor(n,s,c,f,v){if(n<c)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${c}`);this.overscaledZ=n,this.wrap=s,this.canonical=new s_(c,+f,+v),this.key=th(s,n,c,f,v)}clone(){return new so(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new so(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new so(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-n;return n>this.canonical.z?th(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):th(this.wrap*+s,n,n,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new so(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,c=2*this.canonical.x,f=2*this.canonical.y;return[new so(s,this.wrap,s,c,f),new so(s,this.wrap,s,c+1,f),new so(s,this.wrap,s,c,f+1),new so(s,this.wrap,s,c+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new so(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new so(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new d1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new eh(n.x-this.wrap,n.y))}}function th(i,n,s,c,f){(i*=2)<0&&(i=-1*i-1);const v=1<<s;return(v*v*i+v*f+c).toString(36)+s.toString(36)+n.toString(36)}ft("CanonicalTileID",s_),ft("OverscaledTileID",so,{omit:["posMatrix"]});class h1{constructor(n,s,c,f=1,v=1,x=1,b=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(c&&!["mapbox","terrarium","custom"].includes(c))return void xe(`"${c}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const S=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),c){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<S;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(S,I)]=this.data[this._idx(S-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,S)]=this.data[this._idx(I,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<S;I++)for(let P=0;P<S;P++){const z=this.get(I,P);z>this.max&&(this.max=z),z<this.min&&(this.min=z)}}get(n,s){const c=new Uint8Array(this.data.buffer),f=4*this._idx(n,s);return this.unpack(c[f],c[f+1],c[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,c){return n*this.redFactor+s*this.greenFactor+c*this.blueFactor-this.baseShift}getPixels(){return new oo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,c){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,v=s*this.dim+this.dim,x=c*this.dim,b=c*this.dim+this.dim;switch(s){case-1:f=v-1;break;case 1:v=f+1}switch(c){case-1:x=b-1;break;case 1:b=x+1}const S=-s*this.dim,I=-c*this.dim;for(let P=x;P<b;P++)for(let z=f;z<v;z++)this.data[this._idx(z,P)]=n.data[this._idx(z+S,P+I)]}}ft("DEMData",h1);class p1{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const c=n[s];this._stringToNumber[c]=s,this._numberToString[s]=c}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class f1{constructor(n,s,c,f,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=c,n._y=f,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class m1{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new ya(fn,16,0),this.grid3D=new ya(fn,16,0),this.featureIndexArray=new Yn,this.promoteId=s}insert(n,s,c,f,v,x){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,f,v);const S=x?this.grid3D:this.grid;for(let I=0;I<s.length;I++){const P=s[I],z=[1/0,1/0,-1/0,-1/0];for(let F=0;F<P.length;F++){const j=P[F];z[0]=Math.min(z[0],j.x),z[1]=Math.min(z[1],j.y),z[2]=Math.max(z[2],j.x),z[3]=Math.max(z[3],j.y)}z[0]<fn&&z[1]<fn&&z[2]>=0&&z[3]>=0&&S.insert(b,z[0],z[1],z[2],z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Pa.VectorTile(new Zy(this.rawTileData)).layers,this.sourceLayerCoder=new p1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,c,f){this.loadVTLayers();const v=n.params||{},x=fn/n.tileSize/n.scale,b=xd(v.filter),S=n.queryGeometry,I=n.queryPadding*x,P=y1(S),z=this.grid.query(P.minX-I,P.minY-I,P.maxX+I,P.maxY+I),F=y1(n.cameraQueryGeometry),j=this.grid3D.query(F.minX-I,F.minY-I,F.maxX+I,F.maxY+I,(se,ue,Pe,_e)=>function(Ce,Oe,We,ut,At){for(const nt of Ce)if(Oe<=nt.x&&We<=nt.y&&ut>=nt.x&&At>=nt.y)return!0;const at=[new D(Oe,We),new D(Oe,At),new D(ut,At),new D(ut,We)];if(Ce.length>2){for(const nt of at)if(Nc(Ce,nt))return!0}for(let nt=0;nt<Ce.length-1;nt++)if(QT(Ce[nt],Ce[nt+1],at))return!0;return!1}(n.cameraQueryGeometry,se-I,ue-I,Pe+I,_e+I));for(const se of j)z.push(se);z.sort(xP);const q={};let Y;for(let se=0;se<z.length;se++){const ue=z[se];if(ue===Y)continue;Y=ue;const Pe=this.featureIndexArray.get(ue);let _e=null;this.loadMatchingFeature(q,Pe.bucketIndex,Pe.sourceLayerIndex,Pe.featureIndex,b,v.layers,v.availableImages,s,c,f,(Ce,Oe,We)=>(_e||(_e=Tl(Ce)),Oe.queryIntersectsFeature(S,Ce,We,_e,this.z,n.transform,x,n.pixelPosMatrix)))}return q}loadMatchingFeature(n,s,c,f,v,x,b,S,I,P,z){const F=this.bucketLayerIDs[s];if(x&&!function(se,ue){for(let Pe=0;Pe<se.length;Pe++)if(ue.indexOf(se[Pe])>=0)return!0;return!1}(x,F))return;const j=this.sourceLayerCoder.decode(c),q=this.vtLayers[j].feature(f);if(v.needGeometry){const se=Il(q,!0);if(!v.filter(new jr(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!v.filter(new jr(this.tileID.overscaledZ),q))return;const Y=this.getId(q,j);for(let se=0;se<F.length;se++){const ue=F[se];if(x&&x.indexOf(ue)<0)continue;const Pe=S[ue];if(!Pe)continue;let _e={};Y&&P&&(_e=P.getState(Pe.sourceLayer||"_geojsonTileLayer",Y));const Ce=fe({},I[ue]);Ce.paint=g1(Ce.paint,Pe.paint,q,_e,b),Ce.layout=g1(Ce.layout,Pe.layout,q,_e,b);const Oe=!z||z(q,Pe,_e);if(!Oe)continue;const We=new f1(q,this.z,this.x,this.y,Y);We.layer=Ce;let ut=n[ue];ut===void 0&&(ut=n[ue]=[]),ut.push({featureIndex:f,feature:We,intersectionZ:Oe})}}lookupSymbolFeatures(n,s,c,f,v,x,b,S){const I={};this.loadVTLayers();const P=xd(v);for(const z of n)this.loadMatchingFeature(I,c,f,z,P,x,b,S,s);return I}hasLayer(n){for(const s of this.bucketLayerIDs)for(const c of s)if(n===c)return!0;return!1}getId(n,s){let c=n.id;return this.promoteId&&(c=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof c=="boolean"&&(c=Number(c))),c}}function g1(i,n,s,c,f){return Te(i,(v,x)=>{const b=n instanceof wl?n.get(x):null;return b&&b.evaluate?b.evaluate(s,c,f):b})}function y1(i){let n=1/0,s=1/0,c=-1/0,f=-1/0;for(const v of i)n=Math.min(n,v.x),s=Math.min(s,v.y),c=Math.max(c,v.x),f=Math.max(f,v.y);return{minX:n,minY:s,maxX:c,maxY:f}}function xP(i,n){return n-i}function _1(i,n,s,c,f){const v=[];for(let x=0;x<i.length;x++){const b=i[x];let S;for(let I=0;I<b.length-1;I++){let P=b[I],z=b[I+1];P.x<n&&z.x<n||(P.x<n?P=new D(n,P.y+(n-P.x)/(z.x-P.x)*(z.y-P.y))._round():z.x<n&&(z=new D(n,P.y+(n-P.x)/(z.x-P.x)*(z.y-P.y))._round()),P.y<s&&z.y<s||(P.y<s?P=new D(P.x+(s-P.y)/(z.y-P.y)*(z.x-P.x),s)._round():z.y<s&&(z=new D(P.x+(s-P.y)/(z.y-P.y)*(z.x-P.x),s)._round()),P.x>=c&&z.x>=c||(P.x>=c?P=new D(c,P.y+(c-P.x)/(z.x-P.x)*(z.y-P.y))._round():z.x>=c&&(z=new D(c,P.y+(c-P.x)/(z.x-P.x)*(z.y-P.y))._round()),P.y>=f&&z.y>=f||(P.y>=f?P=new D(P.x+(f-P.y)/(z.y-P.y)*(z.x-P.x),f)._round():z.y>=f&&(z=new D(P.x+(f-P.y)/(z.y-P.y)*(z.x-P.x),f)._round()),S&&P.equals(S[S.length-1])||(S=[P],v.push(S)),S.push(z)))))}}return v}ft("FeatureIndex",m1,{omit:["rawTileData","sourceLayerCoder"]});class za extends D{constructor(n,s,c,f){super(n,s),this.angle=c,f!==void 0&&(this.segment=f)}clone(){return new za(this.x,this.y,this.angle,this.segment)}}function v1(i,n,s,c,f){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,b=0;for(;b>-s/2;){if(x--,x<0)return!1;b-=i[x].dist(v),v=i[x]}b+=i[x].dist(i[x+1]),x++;const S=[];let I=0;for(;b<s/2;){const P=i[x],z=i[x+1];if(!z)return!1;let F=i[x-1].angleTo(P)-P.angleTo(z);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:b,angleDelta:F}),I+=F;b-S[0].distance>c;)I-=S.shift().angleDelta;if(I>f)return!1;x++,b+=P.dist(z)}return!0}function x1(i){let n=0;for(let s=0;s<i.length-1;s++)n+=i[s].dist(i[s+1]);return n}function b1(i,n,s){return i?.6*n*s:0}function w1(i,n){return Math.max(i?i.right-i.left:0,n?n.right-n.left:0)}function bP(i,n,s,c,f,v){const x=b1(s,f,v),b=w1(s,c)*v;let S=0;const I=x1(i)/2;for(let P=0;P<i.length-1;P++){const z=i[P],F=i[P+1],j=z.dist(F);if(S+j>I){const q=(I-S)/j,Y=ai.number(z.x,F.x,q),se=ai.number(z.y,F.y,q),ue=new za(Y,se,F.angleTo(z),P);return ue._round(),!x||v1(i,ue,b,x,n)?ue:void 0}S+=j}}function wP(i,n,s,c,f,v,x,b,S){const I=b1(c,v,x),P=w1(c,f),z=P*x,F=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return n-z<n/4&&(n=z+n/4),S1(i,F?n/2*b%n:(P/2+2*v)*x*b%n,n,I,s,z,F,!1,S)}function S1(i,n,s,c,f,v,x,b,S){const I=v/2,P=x1(i);let z=0,F=n-s,j=[];for(let q=0;q<i.length-1;q++){const Y=i[q],se=i[q+1],ue=Y.dist(se),Pe=se.angleTo(Y);for(;F+s<z+ue;){F+=s;const _e=(F-z)/ue,Ce=ai.number(Y.x,se.x,_e),Oe=ai.number(Y.y,se.y,_e);if(Ce>=0&&Ce<S&&Oe>=0&&Oe<S&&F-I>=0&&F+I<=P){const We=new za(Ce,Oe,Pe,q);We._round(),c&&!v1(i,We,v,c,f)||j.push(We)}}z+=ue}return b||j.length||x||(j=S1(i,z/2,s,c,f,v,x,!0,S)),j}ft("Anchor",za);const Zc=Pi;function C1(i,n,s,c){const f=[],v=i.image,x=v.pixelRatio,b=v.paddedRect.w-2*Zc,S=v.paddedRect.h-2*Zc;let I={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const P=v.stretchX||[[0,b]],z=v.stretchY||[[0,S]],F=(Ne,wt)=>Ne+wt[1]-wt[0],j=P.reduce(F,0),q=z.reduce(F,0),Y=b-j,se=S-q;let ue=0,Pe=j,_e=0,Ce=q,Oe=0,We=Y,ut=0,At=se;if(v.content&&c){const Ne=v.content,wt=Ne[2]-Ne[0],vt=Ne[3]-Ne[1];(v.textFitWidth||v.textFitHeight)&&(I=Yb(i)),ue=Cf(P,0,Ne[0]),_e=Cf(z,0,Ne[1]),Pe=Cf(P,Ne[0],Ne[2]),Ce=Cf(z,Ne[1],Ne[3]),Oe=Ne[0]-ue,ut=Ne[1]-_e,We=wt-Pe,At=vt-Ce}const at=I.x1,nt=I.y1,xt=I.x2-at,mt=I.y2-nt,pt=(Ne,wt,vt,$t)=>{const Rr=kf(Ne.stretch-ue,Pe,xt,at),Mr=Tf(Ne.fixed-Oe,We,Ne.stretch,j),Cn=kf(wt.stretch-_e,Ce,mt,nt),Co=Tf(wt.fixed-ut,At,wt.stretch,q),Un=kf(vt.stretch-ue,Pe,xt,at),kn=Tf(vt.fixed-Oe,We,vt.stretch,j),di=kf($t.stretch-_e,Ce,mt,nt),hi=Tf($t.fixed-ut,At,$t.stretch,q),pi=new D(Rr,Cn),tn=new D(Un,Cn),Tn=new D(Un,di),Qn=new D(Rr,di),Wn=new D(Mr/x,Co/x),fi=new D(kn/x,hi/x),Hn=n*Math.PI/180;if(Hn){const xr=Math.sin(Hn),Dr=Math.cos(Hn),Hr=[Dr,-xr,xr,Dr];pi._matMult(Hr),tn._matMult(Hr),Qn._matMult(Hr),Tn._matMult(Hr)}const ao=Ne.stretch+Ne.fixed,Ei=wt.stretch+wt.fixed;return{tl:pi,tr:tn,bl:Qn,br:Tn,tex:{x:v.paddedRect.x+Zc+ao,y:v.paddedRect.y+Zc+Ei,w:vt.stretch+vt.fixed-ao,h:$t.stretch+$t.fixed-Ei},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wn,pixelOffsetBR:fi,minFontScaleX:We/x/xt,minFontScaleY:At/x/mt,isSDF:s}};if(c&&(v.stretchX||v.stretchY)){const Ne=k1(P,Y,j),wt=k1(z,se,q);for(let vt=0;vt<Ne.length-1;vt++){const $t=Ne[vt],Rr=Ne[vt+1];for(let Mr=0;Mr<wt.length-1;Mr++)f.push(pt($t,wt[Mr],Rr,wt[Mr+1]))}}else f.push(pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:S+1}));return f}function Cf(i,n,s){let c=0;for(const f of i)c+=Math.max(n,Math.min(s,f[1]))-Math.max(n,Math.min(s,f[0]));return c}function k1(i,n,s){const c=[{fixed:-Zc,stretch:0}];for(const[f,v]of i){const x=c[c.length-1];c.push({fixed:f-x.stretch,stretch:x.stretch}),c.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return c.push({fixed:n+Zc,stretch:s}),c}function kf(i,n,s,c){return i/n*s+c}function Tf(i,n,s,c){return i-n*s/c}class If{constructor(n,s,c,f,v,x,b,S,I,P){var z;if(this.boxStartIndex=n.length,I){let F=x.top,j=x.bottom;const q=x.collisionPadding;q&&(F-=q[1],j+=q[3]);let Y=j-F;Y>0&&(Y=Math.max(10,Y),this.circleDiameter=Y)}else{const F=!((z=x.image)===null||z===void 0)&&z.content&&(x.image.textFitWidth||x.image.textFitHeight)?Yb(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};F.y1=F.y1*b-S[0],F.y2=F.y2*b+S[2],F.x1=F.x1*b-S[3],F.x2=F.x2*b+S[1];const j=x.collisionPadding;if(j&&(F.x1-=j[0]*b,F.y1-=j[1]*b,F.x2+=j[2]*b,F.y2+=j[3]*b),P){const q=new D(F.x1,F.y1),Y=new D(F.x2,F.y1),se=new D(F.x1,F.y2),ue=new D(F.x2,F.y2),Pe=P*Math.PI/180;q._rotate(Pe),Y._rotate(Pe),se._rotate(Pe),ue._rotate(Pe),F.x1=Math.min(q.x,Y.x,se.x,ue.x),F.x2=Math.max(q.x,Y.x,se.x,ue.x),F.y1=Math.min(q.y,Y.y,se.y,ue.y),F.y2=Math.max(q.y,Y.y,se.y,ue.y)}n.emplaceBack(s.x,s.y,F.x1,F.y1,F.x2,F.y2,c,f,v)}this.boxEndIndex=n.length}}class SP{constructor(n=[],s=(c,f)=>c<f?-1:c>f?1:0){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:c}=this,f=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(c(f,x)>=0)break;s[n]=x,n=v}s[n]=f}_down(n){const{data:s,compare:c}=this,f=this.length>>1,v=s[n];for(;n<f;){let x=1+(n<<1);const b=x+1;if(b<this.length&&c(s[b],s[x])<0&&(x=b),c(s[x],v)>=0)break;s[n]=s[x],n=x}s[n]=v}}function CP(i,n=1,s=!1){let c=1/0,f=1/0,v=-1/0,x=-1/0;const b=i[0];for(let j=0;j<b.length;j++){const q=b[j];(!j||q.x<c)&&(c=q.x),(!j||q.y<f)&&(f=q.y),(!j||q.x>v)&&(v=q.x),(!j||q.y>x)&&(x=q.y)}const S=Math.min(v-c,x-f);let I=S/2;const P=new SP([],kP);if(S===0)return new D(c,f);for(let j=c;j<v;j+=S)for(let q=f;q<x;q+=S)P.push(new Xc(j+I,q+I,I,i));let z=function(j){let q=0,Y=0,se=0;const ue=j[0];for(let Pe=0,_e=ue.length,Ce=_e-1;Pe<_e;Ce=Pe++){const Oe=ue[Pe],We=ue[Ce],ut=Oe.x*We.y-We.x*Oe.y;Y+=(Oe.x+We.x)*ut,se+=(Oe.y+We.y)*ut,q+=3*ut}return new Xc(Y/q,se/q,0,j)}(i),F=P.length;for(;P.length;){const j=P.pop();(j.d>z.d||!z.d)&&(z=j,s&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,F)),j.max-z.d<=n||(I=j.h/2,P.push(new Xc(j.p.x-I,j.p.y-I,I,i)),P.push(new Xc(j.p.x+I,j.p.y-I,I,i)),P.push(new Xc(j.p.x-I,j.p.y+I,I,i)),P.push(new Xc(j.p.x+I,j.p.y+I,I,i)),F+=4)}return s&&(console.log(`num probes: ${F}`),console.log(`best distance: ${z.d}`)),z.p}function kP(i,n){return n.max-i.max}function Xc(i,n,s,c){this.p=new D(i,n),this.h=s,this.d=function(f,v){let x=!1,b=1/0;for(let S=0;S<v.length;S++){const I=v[S];for(let P=0,z=I.length,F=z-1;P<z;F=P++){const j=I[P],q=I[F];j.y>f.y!=q.y>f.y&&f.x<(q.x-j.x)*(f.y-j.y)/(q.y-j.y)+j.x&&(x=!x),b=Math.min(b,lb(f,j,q))}}return(x?1:-1)*Math.sqrt(b)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}var Vn;g.aq=void 0,(Vn=g.aq||(g.aq={}))[Vn.center=1]="center",Vn[Vn.left=2]="left",Vn[Vn.right=3]="right",Vn[Vn.top=4]="top",Vn[Vn.bottom=5]="bottom",Vn[Vn["top-left"]=6]="top-left",Vn[Vn["top-right"]=7]="top-right",Vn[Vn["bottom-left"]=8]="bottom-left",Vn[Vn["bottom-right"]=9]="bottom-right";const Ra=7,a_=Number.POSITIVE_INFINITY;function T1(i,n){return n[1]!==a_?function(s,c,f){let v=0,x=0;switch(c=Math.abs(c),f=Math.abs(f),s){case"top-right":case"top-left":case"top":x=f-Ra;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+Ra}switch(s){case"top-right":case"bottom-right":case"right":v=-c;break;case"top-left":case"bottom-left":case"left":v=c}return[v,x]}(i,n[0],n[1]):function(s,c){let f=0,v=0;c<0&&(c=0);const x=c/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Ra;break;case"bottom-right":case"bottom-left":v=-x+Ra;break;case"bottom":v=-c+Ra;break;case"top":v=c-Ra}switch(s){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=c;break;case"right":f=-c}return[f,v]}(i,n[0])}function I1(i,n,s){var c;const f=i.layout,v=(c=f.get("text-variable-anchor-offset"))===null||c===void 0?void 0:c.evaluate(n,{},s);if(v){const b=v.values,S=[];for(let I=0;I<b.length;I+=2){const P=S[I]=b[I],z=b[I+1].map(F=>F*vn);P.startsWith("top")?z[1]-=Ra:P.startsWith("bottom")&&(z[1]+=Ra),S[I+1]=z}return new Fi(S)}const x=f.get("text-variable-anchor");if(x){let b;b=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},s)*vn,a_]:f.get("text-offset").evaluate(n,{},s).map(I=>I*vn);const S=[];for(const I of x)S.push(I,T1(I,b));return new Fi(S)}return null}function l_(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function TP(i,n,s,c,f,v,x,b,S,I,P){let z=v.textMaxSize.evaluate(n,{});z===void 0&&(z=x);const F=i.layers[0].layout,j=F.get("icon-offset").evaluate(n,{},P),q=E1(s.horizontal),Y=x/24,se=i.tilePixelRatio*Y,ue=i.tilePixelRatio*z/24,Pe=i.tilePixelRatio*b,_e=i.tilePixelRatio*F.get("symbol-spacing"),Ce=F.get("text-padding")*i.tilePixelRatio,Oe=function(Ne,wt,vt,$t=1){const Rr=Ne.get("icon-padding").evaluate(wt,{},vt),Mr=Rr&&Rr.values;return[Mr[0]*$t,Mr[1]*$t,Mr[2]*$t,Mr[3]*$t]}(F,n,P,i.tilePixelRatio),We=F.get("text-max-angle")/180*Math.PI,ut=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",At=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",at=F.get("symbol-placement"),nt=_e/2,xt=F.get("icon-text-fit");let mt;c&&xt!=="none"&&(i.allowVerticalPlacement&&s.vertical&&(mt=Jb(c,s.vertical,xt,F.get("icon-text-fit-padding"),j,Y)),q&&(c=Jb(c,q,xt,F.get("icon-text-fit-padding"),j,Y)));const pt=(Ne,wt)=>{wt.x<0||wt.x>=fn||wt.y<0||wt.y>=fn||function(vt,$t,Rr,Mr,Cn,Co,Un,kn,di,hi,pi,tn,Tn,Qn,Wn,fi,Hn,ao,Ei,xr,Dr,Hr,Wi,Kr,Kc){const ss=vt.addToLineVertexArray($t,Rr);let as,ko,lo,Rn,Os=0,ih=0,R1=0,L1=0,g_=-1,y_=-1;const $s={};let D1=Bc("");if(vt.allowVerticalPlacement&&Mr.vertical){const ei=kn.layout.get("text-rotate").evaluate(Dr,{},Kr)+90;lo=new If(di,$t,hi,pi,tn,Mr.vertical,Tn,Qn,Wn,ei),Un&&(Rn=new If(di,$t,hi,pi,tn,Un,Hn,ao,Wn,ei))}if(Cn){const ei=kn.layout.get("icon-rotate").evaluate(Dr,{}),co=kn.layout.get("icon-text-fit")!=="none",El=C1(Cn,ei,Wi,co),Vo=Un?C1(Un,ei,Wi,co):void 0;ko=new If(di,$t,hi,pi,tn,Cn,Hn,ao,!1,ei),Os=4*El.length;const Ml=vt.iconSizeData;let ls=null;Ml.kind==="source"?(ls=[os*kn.layout.get("icon-size").evaluate(Dr,{})],ls[0]>Ma&&xe(`${vt.layerIds[0]}: Value for "icon-size" is >= ${Qd}. Reduce your "icon-size".`)):Ml.kind==="composite"&&(ls=[os*Hr.compositeIconSizes[0].evaluate(Dr,{},Kr),os*Hr.compositeIconSizes[1].evaluate(Dr,{},Kr)],(ls[0]>Ma||ls[1]>Ma)&&xe(`${vt.layerIds[0]}: Value for "icon-size" is >= ${Qd}. Reduce your "icon-size".`)),vt.addSymbols(vt.icon,El,ls,xr,Ei,Dr,g.ah.none,$t,ss.lineStartIndex,ss.lineLength,-1,Kr),g_=vt.icon.placedSymbolArray.length-1,Vo&&(ih=4*Vo.length,vt.addSymbols(vt.icon,Vo,ls,xr,Ei,Dr,g.ah.vertical,$t,ss.lineStartIndex,ss.lineLength,-1,Kr),y_=vt.icon.placedSymbolArray.length-1)}const B1=Object.keys(Mr.horizontal);for(const ei of B1){const co=Mr.horizontal[ei];if(!as){D1=Bc(co.text);const Vo=kn.layout.get("text-rotate").evaluate(Dr,{},Kr);as=new If(di,$t,hi,pi,tn,co,Tn,Qn,Wn,Vo)}const El=co.positionedLines.length===1;if(R1+=P1(vt,$t,co,Co,kn,Wn,Dr,fi,ss,Mr.vertical?g.ah.horizontal:g.ah.horizontalOnly,El?B1:[ei],$s,g_,Hr,Kr),El)break}Mr.vertical&&(L1+=P1(vt,$t,Mr.vertical,Co,kn,Wn,Dr,fi,ss,g.ah.vertical,["vertical"],$s,y_,Hr,Kr));const EP=as?as.boxStartIndex:vt.collisionBoxArray.length,MP=as?as.boxEndIndex:vt.collisionBoxArray.length,AP=lo?lo.boxStartIndex:vt.collisionBoxArray.length,zP=lo?lo.boxEndIndex:vt.collisionBoxArray.length,RP=ko?ko.boxStartIndex:vt.collisionBoxArray.length,LP=ko?ko.boxEndIndex:vt.collisionBoxArray.length,DP=Rn?Rn.boxStartIndex:vt.collisionBoxArray.length,BP=Rn?Rn.boxEndIndex:vt.collisionBoxArray.length;let jo=-1;const Ef=(ei,co)=>ei&&ei.circleDiameter?Math.max(ei.circleDiameter,co):co;jo=Ef(as,jo),jo=Ef(lo,jo),jo=Ef(ko,jo),jo=Ef(Rn,jo);const F1=jo>-1?1:0;F1&&(jo*=Kc/vn),vt.glyphOffsetArray.length>=qc.MAX_GLYPHS&&xe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dr.sortKey!==void 0&&vt.addToSortKeyRanges(vt.symbolInstances.length,Dr.sortKey);const FP=I1(kn,Dr,Kr),[OP,$P]=function(ei,co){const El=ei.length,Vo=co==null?void 0:co.values;if((Vo==null?void 0:Vo.length)>0)for(let Ml=0;Ml<Vo.length;Ml+=2){const ls=Vo[Ml+1];ei.emplaceBack(g.aq[Vo[Ml]],ls[0],ls[1])}return[El,ei.length]}(vt.textAnchorOffsets,FP);vt.symbolInstances.emplaceBack($t.x,$t.y,$s.right>=0?$s.right:-1,$s.center>=0?$s.center:-1,$s.left>=0?$s.left:-1,$s.vertical||-1,g_,y_,D1,EP,MP,AP,zP,RP,LP,DP,BP,hi,R1,L1,Os,ih,F1,0,Tn,jo,OP,$P)}(i,wt,Ne,s,c,f,mt,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,se,[Ce,Ce,Ce,Ce],ut,S,Pe,Oe,At,j,n,v,I,P,x)};if(at==="line")for(const Ne of _1(n.geometry,0,0,fn,fn)){const wt=wP(Ne,_e,We,s.vertical||q,c,24,ue,i.overscaling,fn);for(const vt of wt)q&&IP(i,q.text,nt,vt)||pt(Ne,vt)}else if(at==="line-center"){for(const Ne of n.geometry)if(Ne.length>1){const wt=bP(Ne,We,s.vertical||q,c,24,ue);wt&&pt(Ne,wt)}}else if(n.type==="Polygon")for(const Ne of hc(n.geometry,0)){const wt=CP(Ne,16);pt(Ne[0],new za(wt.x,wt.y,0))}else if(n.type==="LineString")for(const Ne of n.geometry)pt(Ne,new za(Ne[0].x,Ne[0].y,0));else if(n.type==="Point")for(const Ne of n.geometry)for(const wt of Ne)pt([wt],new za(wt.x,wt.y,0))}function P1(i,n,s,c,f,v,x,b,S,I,P,z,F,j,q){const Y=function(Pe,_e,Ce,Oe,We,ut,At,at){const nt=Oe.layout.get("text-rotate").evaluate(ut,{})*Math.PI/180,xt=[];for(const mt of _e.positionedLines)for(const pt of mt.positionedGlyphs){if(!pt.rect)continue;const Ne=pt.rect||{};let wt=Wb+1,vt=!0,$t=1,Rr=0;const Mr=(We||at)&&pt.vertical,Cn=pt.metrics.advance*pt.scale/2;if(at&&_e.verticalizable&&(Rr=mt.lineOffset/2-(pt.imageName?-(vn-pt.metrics.width*pt.scale)/2:(pt.scale-1)*vn)),pt.imageName){const xr=At[pt.imageName];vt=xr.sdf,$t=xr.pixelRatio,wt=Pi/$t}const Co=We?[pt.x+Cn,pt.y]:[0,0];let Un=We?[0,0]:[pt.x+Cn+Ce[0],pt.y+Ce[1]-Rr],kn=[0,0];Mr&&(kn=Un,Un=[0,0]);const di=pt.metrics.isDoubleResolution?2:1,hi=(pt.metrics.left-wt)*pt.scale-Cn+Un[0],pi=(-pt.metrics.top-wt)*pt.scale+Un[1],tn=hi+Ne.w/di*pt.scale/$t,Tn=pi+Ne.h/di*pt.scale/$t,Qn=new D(hi,pi),Wn=new D(tn,pi),fi=new D(hi,Tn),Hn=new D(tn,Tn);if(Mr){const xr=new D(-Cn,Cn-Yd),Dr=-Math.PI/2,Hr=vn/2-Cn,Wi=new D(5-Yd-Hr,-(pt.imageName?Hr:0)),Kr=new D(...kn);Qn._rotateAround(Dr,xr)._add(Wi)._add(Kr),Wn._rotateAround(Dr,xr)._add(Wi)._add(Kr),fi._rotateAround(Dr,xr)._add(Wi)._add(Kr),Hn._rotateAround(Dr,xr)._add(Wi)._add(Kr)}if(nt){const xr=Math.sin(nt),Dr=Math.cos(nt),Hr=[Dr,-xr,xr,Dr];Qn._matMult(Hr),Wn._matMult(Hr),fi._matMult(Hr),Hn._matMult(Hr)}const ao=new D(0,0),Ei=new D(0,0);xt.push({tl:Qn,tr:Wn,bl:fi,br:Hn,tex:Ne,writingMode:_e.writingMode,glyphOffset:Co,sectionIndex:pt.sectionIndex,isSDF:vt,pixelOffsetTL:ao,pixelOffsetBR:Ei,minFontScaleX:0,minFontScaleY:0})}return xt}(0,s,b,f,v,x,c,i.allowVerticalPlacement),se=i.textSizeData;let ue=null;se.kind==="source"?(ue=[os*f.layout.get("text-size").evaluate(x,{})],ue[0]>Ma&&xe(`${i.layerIds[0]}: Value for "text-size" is >= ${Qd}. Reduce your "text-size".`)):se.kind==="composite"&&(ue=[os*j.compositeTextSizes[0].evaluate(x,{},q),os*j.compositeTextSizes[1].evaluate(x,{},q)],(ue[0]>Ma||ue[1]>Ma)&&xe(`${i.layerIds[0]}: Value for "text-size" is >= ${Qd}. Reduce your "text-size".`)),i.addSymbols(i.text,Y,ue,b,v,x,I,n,S.lineStartIndex,S.lineLength,F,q);for(const Pe of P)z[Pe]=i.text.placedSymbolArray.length-1;return 4*Y.length}function E1(i){for(const n in i)return i[n];return null}function IP(i,n,s,c){const f=i.compareText;if(n in f){const v=f[n];for(let x=v.length-1;x>=0;x--)if(c.dist(v[x])<s)return!0}else f[n]=[];return f[n].push(c),!1}const M1=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class c_{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,c]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=c>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=M1[15&c];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new c_(b,x,v,n)}constructor(n,s=64,c=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=c,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=M1.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-b%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${c}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+b+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=n,this.coords[this._pos++]=s,c}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return u_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,c,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:b}=this,S=[0,v.length-1,0],I=[];for(;S.length;){const P=S.pop()||0,z=S.pop()||0,F=S.pop()||0;if(z-F<=b){for(let se=F;se<=z;se++){const ue=x[2*se],Pe=x[2*se+1];ue>=n&&ue<=c&&Pe>=s&&Pe<=f&&I.push(v[se])}continue}const j=F+z>>1,q=x[2*j],Y=x[2*j+1];q>=n&&q<=c&&Y>=s&&Y<=f&&I.push(v[j]),(P===0?n<=q:s<=Y)&&(S.push(F),S.push(j-1),S.push(1-P)),(P===0?c>=q:f>=Y)&&(S.push(j+1),S.push(z),S.push(1-P))}return I}within(n,s,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,b=[0,f.length-1,0],S=[],I=c*c;for(;b.length;){const P=b.pop()||0,z=b.pop()||0,F=b.pop()||0;if(z-F<=x){for(let se=F;se<=z;se++)z1(v[2*se],v[2*se+1],n,s)<=I&&S.push(f[se]);continue}const j=F+z>>1,q=v[2*j],Y=v[2*j+1];z1(q,Y,n,s)<=I&&S.push(f[j]),(P===0?n-c<=q:s-c<=Y)&&(b.push(F),b.push(j-1),b.push(1-P)),(P===0?n+c>=q:s+c>=Y)&&(b.push(j+1),b.push(z),b.push(1-P))}return S}}function u_(i,n,s,c,f,v){if(f-c<=s)return;const x=c+f>>1;A1(i,n,x,c,f,v),u_(i,n,s,c,x-1,1-v),u_(i,n,s,x+1,f,1-v)}function A1(i,n,s,c,f,v){for(;f>c;){if(f-c>600){const I=f-c+1,P=s-c+1,z=Math.log(I),F=.5*Math.exp(2*z/3),j=.5*Math.sqrt(z*F*(I-F)/I)*(P-I/2<0?-1:1);A1(i,n,s,Math.max(c,Math.floor(s-P*F/I+j)),Math.min(f,Math.floor(s+(I-P)*F/I+j)),v)}const x=n[2*s+v];let b=c,S=f;for(rh(i,n,c,s),n[2*f+v]>x&&rh(i,n,c,f);b<S;){for(rh(i,n,b,S),b++,S--;n[2*b+v]<x;)b++;for(;n[2*S+v]>x;)S--}n[2*c+v]===x?rh(i,n,c,S):(S++,rh(i,n,S,f)),S<=s&&(c=S+1),s<=S&&(f=S-1)}}function rh(i,n,s,c){d_(i,s,c),d_(n,2*s,2*c),d_(n,2*s+1,2*c+1)}function d_(i,n,s){const c=i[n];i[n]=i[s],i[s]=c}function z1(i,n,s,c){const f=i-s,v=n-c;return f*f+v*v}var h_;g.bg=void 0,(h_=g.bg||(g.bg={})).create="create",h_.load="load",h_.fullLoad="fullLoad";let Pf=null,nh=[];const p_=1e3/60,f_="loadTime",m_="fullLoadTime",PP={mark(i){performance.mark(i)},frame(i){const n=i;Pf!=null&&nh.push(n-Pf),Pf=n},clearMetrics(){Pf=null,nh=[],performance.clearMeasures(f_),performance.clearMeasures(m_);for(const i in g.bg)performance.clearMarks(g.bg[i])},getPerformanceMetrics(){performance.measure(f_,g.bg.create,g.bg.load),performance.measure(m_,g.bg.create,g.bg.fullLoad);const i=performance.getEntriesByName(f_)[0].duration,n=performance.getEntriesByName(m_)[0].duration,s=nh.length,c=1/(nh.reduce((v,x)=>v+x,0)/s/1e3),f=nh.filter(v=>v>p_).reduce((v,x)=>v+(x-p_)/p_,0);return{loadTime:i,fullLoadTime:n,fps:c,percentDroppedFrames:f/(s+f)*100,totalFrames:s}}};g.$=class extends R{},g.A=jc,g.B=Sy,g.C=function(i){if(Be==null){const n=i.navigator?i.navigator.userAgent:null;Be=!!i.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Be},g.D=gt,g.E=Zt,g.F=class{constructor(i,n){this.target=i,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new vP(()=>this.process()),this.subscription=function(s,c,f,v){return s.addEventListener(c,f,!1),{unsubscribe:()=>{s.removeEventListener(c,f,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=Le(self)?i:window}registerMessageHandler(i,n){this.messageHandlers[i]=n}sendAsync(i,n){return new Promise((s,c)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:s,reject:c},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[f];const b={id:f,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const v=[],x=Object.assign(Object.assign({},i),{id:f,sourceMapId:this.mapId,origin:location.origin,data:_a(i.data,v)});this.target.postMessage(x,{transfer:v})})}receive(i){const n=i.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const c=this.abortControllers[s];return delete this.abortControllers[s],void(c&&c.abort())}if(Le(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),n=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(i,n)}processTask(i,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const f=this.resolveRejects[i];return delete this.resolveRejects[i],f?void(n.error?f.reject(va(n.error)):f.resolve(va(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=va(n.data),c=new AbortController;this.abortControllers[i]=c;try{const f=yield this.messageHandlers[n.type](n.sourceMapId,s,c);this.completeTask(i,null,f)}catch(f){this.completeTask(i,f)}})}completeTask(i,n,s){const c=[];delete this.abortControllers[i];const f={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?_a(n):null,data:_a(s,c)};this.target.postMessage(f,{transfer:c})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},g.G=rr,g.H=function(){var i=new jc(16);return jc!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},g.I=Ky,g.J=function(i,n,s){var c,f,v,x,b,S,I,P,z,F,j,q,Y=s[0],se=s[1],ue=s[2];return n===i?(i[12]=n[0]*Y+n[4]*se+n[8]*ue+n[12],i[13]=n[1]*Y+n[5]*se+n[9]*ue+n[13],i[14]=n[2]*Y+n[6]*se+n[10]*ue+n[14],i[15]=n[3]*Y+n[7]*se+n[11]*ue+n[15]):(f=n[1],v=n[2],x=n[3],b=n[4],S=n[5],I=n[6],P=n[7],z=n[8],F=n[9],j=n[10],q=n[11],i[0]=c=n[0],i[1]=f,i[2]=v,i[3]=x,i[4]=b,i[5]=S,i[6]=I,i[7]=P,i[8]=z,i[9]=F,i[10]=j,i[11]=q,i[12]=c*Y+b*se+z*ue+n[12],i[13]=f*Y+S*se+F*ue+n[13],i[14]=v*Y+I*se+j*ue+n[14],i[15]=x*Y+P*se+q*ue+n[15]),i},g.K=function(i,n,s){var c=s[0],f=s[1],v=s[2];return i[0]=n[0]*c,i[1]=n[1]*c,i[2]=n[2]*c,i[3]=n[3]*c,i[4]=n[4]*f,i[5]=n[5]*f,i[6]=n[6]*f,i[7]=n[7]*f,i[8]=n[8]*v,i[9]=n[9]*v,i[10]=n[10]*v,i[11]=n[11]*v,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i},g.L=hb,g.M=function(i,n){const s={};for(let c=0;c<n.length;c++){const f=n[c];f in i&&(s[f]=i[f])}return s},g.N=Aa,g.O=a1,g.P=D,g.Q=l1,g.R=oo,g.S=so,g.T=Ac,g.U=W,g.V=O,g.W=Fe,g.X=fn,g.Y=w,g.Z=eh,g._=u,g.a=Ht,g.a$=function(i,n){var s=i[0],c=i[1],f=i[2],v=i[3],x=i[4],b=i[5],S=i[6],I=i[7],P=i[8],z=i[9],F=i[10],j=i[11],q=i[12],Y=i[13],se=i[14],ue=i[15],Pe=n[0],_e=n[1],Ce=n[2],Oe=n[3],We=n[4],ut=n[5],At=n[6],at=n[7],nt=n[8],xt=n[9],mt=n[10],pt=n[11],Ne=n[12],wt=n[13],vt=n[14],$t=n[15];return Math.abs(s-Pe)<=ui*Math.max(1,Math.abs(s),Math.abs(Pe))&&Math.abs(c-_e)<=ui*Math.max(1,Math.abs(c),Math.abs(_e))&&Math.abs(f-Ce)<=ui*Math.max(1,Math.abs(f),Math.abs(Ce))&&Math.abs(v-Oe)<=ui*Math.max(1,Math.abs(v),Math.abs(Oe))&&Math.abs(x-We)<=ui*Math.max(1,Math.abs(x),Math.abs(We))&&Math.abs(b-ut)<=ui*Math.max(1,Math.abs(b),Math.abs(ut))&&Math.abs(S-At)<=ui*Math.max(1,Math.abs(S),Math.abs(At))&&Math.abs(I-at)<=ui*Math.max(1,Math.abs(I),Math.abs(at))&&Math.abs(P-nt)<=ui*Math.max(1,Math.abs(P),Math.abs(nt))&&Math.abs(z-xt)<=ui*Math.max(1,Math.abs(z),Math.abs(xt))&&Math.abs(F-mt)<=ui*Math.max(1,Math.abs(F),Math.abs(mt))&&Math.abs(j-pt)<=ui*Math.max(1,Math.abs(j),Math.abs(pt))&&Math.abs(q-Ne)<=ui*Math.max(1,Math.abs(q),Math.abs(Ne))&&Math.abs(Y-wt)<=ui*Math.max(1,Math.abs(Y),Math.abs(wt))&&Math.abs(se-vt)<=ui*Math.max(1,Math.abs(se),Math.abs(vt))&&Math.abs(ue-$t)<=ui*Math.max(1,Math.abs(ue),Math.abs($t))},g.a0=ur,g.a1=s_,g.a2=qe,g.a3=i=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const c of i){const f=window.document.createElement("source");ht(c)||(n.crossOrigin="Anonymous"),f.src=c,n.appendChild(f)}})},g.a4=function(){return ge++},g.a5=lt,g.a6=qc,g.a7=xd,g.a8=Il,g.a9=f1,g.aA=function(i){if(i.type==="custom")return new _P(i);switch(i.type){case"background":return new mP(i);case"circle":return new rI(i);case"fill":return new vI(i);case"fill-extrusion":return new LI(i);case"heatmap":return new iI(i);case"hillshade":return new sI(i);case"line":return new VI(i);case"raster":return new yP(i);case"symbol":return new Sf(i)}},g.aB=Re,g.aC=function(i,n){if(!i)return[{command:"setStyle",args:[n]}];let s=[];try{if(!Bt(i.version,n.version))return[{command:"setStyle",args:[n]}];Bt(i.center,n.center)||s.push({command:"setCenter",args:[n.center]}),Bt(i.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),Bt(i.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),Bt(i.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),Bt(i.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),Bt(i.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),Bt(i.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),Bt(i.light,n.light)||s.push({command:"setLight",args:[n.light]}),Bt(i.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),Bt(i.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),Bt(i.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const c={},f=[];(function(x,b,S,I){let P;for(P in b=b||{},x=x||{})Object.prototype.hasOwnProperty.call(x,P)&&(Object.prototype.hasOwnProperty.call(b,P)||bt(P,S,I));for(P in b)Object.prototype.hasOwnProperty.call(b,P)&&(Object.prototype.hasOwnProperty.call(x,P)?Bt(x[P],b[P])||(x[P].type==="geojson"&&b[P].type==="geojson"&&Ir(x,b,P)?or(S,{command:"setGeoJSONSourceData",args:[P,b[P].data]}):_n(P,b,S,I)):Sr(P,b,S))})(i.sources,n.sources,f,c);const v=[];i.layers&&i.layers.forEach(x=>{"source"in x&&c[x.source]?s.push({command:"removeLayer",args:[x.id]}):v.push(x)}),s=s.concat(f),function(x,b,S){b=b||[];const I=(x=x||[]).map(En),P=b.map(En),z=x.reduce(Fn,{}),F=b.reduce(Fn,{}),j=I.slice(),q=Object.create(null);let Y,se,ue,Pe,_e;for(let Ce=0,Oe=0;Ce<I.length;Ce++)Y=I[Ce],Object.prototype.hasOwnProperty.call(F,Y)?Oe++:(or(S,{command:"removeLayer",args:[Y]}),j.splice(j.indexOf(Y,Oe),1));for(let Ce=0,Oe=0;Ce<P.length;Ce++)Y=P[P.length-1-Ce],j[j.length-1-Ce]!==Y&&(Object.prototype.hasOwnProperty.call(z,Y)?(or(S,{command:"removeLayer",args:[Y]}),j.splice(j.lastIndexOf(Y,j.length-Oe),1)):Oe++,Pe=j[j.length-Ce],or(S,{command:"addLayer",args:[F[Y],Pe]}),j.splice(j.length-Ce,0,Y),q[Y]=!0);for(let Ce=0;Ce<P.length;Ce++)if(Y=P[Ce],se=z[Y],ue=F[Y],!q[Y]&&!Bt(se,ue))if(Bt(se.source,ue.source)&&Bt(se["source-layer"],ue["source-layer"])&&Bt(se.type,ue.type)){for(_e in un(se.layout,ue.layout,S,Y,null,"setLayoutProperty"),un(se.paint,ue.paint,S,Y,null,"setPaintProperty"),Bt(se.filter,ue.filter)||or(S,{command:"setFilter",args:[Y,ue.filter]}),Bt(se.minzoom,ue.minzoom)&&Bt(se.maxzoom,ue.maxzoom)||or(S,{command:"setLayerZoomRange",args:[Y,ue.minzoom,ue.maxzoom]}),se)Object.prototype.hasOwnProperty.call(se,_e)&&_e!=="layout"&&_e!=="paint"&&_e!=="filter"&&_e!=="metadata"&&_e!=="minzoom"&&_e!=="maxzoom"&&(_e.indexOf("paint.")===0?un(se[_e],ue[_e],S,Y,_e.slice(6),"setPaintProperty"):Bt(se[_e],ue[_e])||or(S,{command:"setLayerProperty",args:[Y,_e,ue[_e]]}));for(_e in ue)Object.prototype.hasOwnProperty.call(ue,_e)&&!Object.prototype.hasOwnProperty.call(se,_e)&&_e!=="layout"&&_e!=="paint"&&_e!=="filter"&&_e!=="metadata"&&_e!=="minzoom"&&_e!=="maxzoom"&&(_e.indexOf("paint.")===0?un(se[_e],ue[_e],S,Y,_e.slice(6),"setPaintProperty"):Bt(se[_e],ue[_e])||or(S,{command:"setLayerProperty",args:[Y,_e,ue[_e]]}))}else or(S,{command:"removeLayer",args:[Y]}),Pe=j[j.lastIndexOf(Y)+1],or(S,{command:"addLayer",args:[ue,Pe]})}(v,n.layers,s)}catch(c){console.warn("Unable to compute style diff:",c),s=[{command:"setStyle",args:[n]}]}return s},g.aD=function(i){const n=[],s=i.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),i.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},g.aE=function i(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let c=0;c<n.length;c++)if(!i(n[c],s[c]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const c in n)if(!i(n[c],s[c]))return!1;return!0}return n===s},g.aF=Te,g.aG=Ae,g.aH=class extends Cl{constructor(i,n){super(i,n),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},g.aI=uf,g.aJ=class extends Cl{constructor(i,n){super(i,n),this.current=ZT}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let n=1;n<16;n++)if(i[n]!==this.current[n]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},g.aK=tb,g.aL=rb,g.aM=Tr,g.aN=class extends Cl{constructor(i,n){super(i,n),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},g.aO=class extends Cl{constructor(i,n){super(i,n),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},g.aP=function(i,n,s,c,f,v,x){var b=1/(n-s),S=1/(c-f),I=1/(v-x);return i[0]=-2*b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*I,i[11]=0,i[12]=(n+s)*b,i[13]=(f+c)*S,i[14]=(x+v)*I,i[15]=1,i},g.aQ=tI,g.aR=class extends be{},g.aS=GI,g.aT=class extends Me{},g.aU=Oy,g.aV=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},g.aW=yb,g.aX=Nn,g.aY=io,g.aZ=class extends yt{},g.a_=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]&&i[8]===n[8]&&i[9]===n[9]&&i[10]===n[10]&&i[11]===n[11]&&i[12]===n[12]&&i[13]===n[13]&&i[14]===n[14]&&i[15]===n[15]},g.aa=function(i){const n={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,c,f,v)=>{const x=f||v;return n[c]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},g.ab=function(i,n){const s=[];for(const c in i)c in n||s.push(c);return s},g.ac=he,g.ad=function(i,n,s){var c=Math.sin(s),f=Math.cos(s),v=n[0],x=n[1],b=n[2],S=n[3],I=n[4],P=n[5],z=n[6],F=n[7];return n!==i&&(i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=v*f+I*c,i[1]=x*f+P*c,i[2]=b*f+z*c,i[3]=S*f+F*c,i[4]=I*f-v*c,i[5]=P*f-x*c,i[6]=z*f-b*c,i[7]=F*f-S*c,i},g.ae=function(i){var n=new jc(16);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n},g.af=ff,g.ag=function(i,n){let s=0,c=0;if(i.kind==="constant")c=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=i,b=f?he(li.interpolationFactor(f,n,v,x),0,1):0;i.kind==="camera"?c=ai.number(i.minSize,i.maxSize,b):s=b}return{uSizeT:s,uSize:c}},g.ai=function(i,{uSize:n,uSizeT:s},{lowerSize:c,upperSize:f}){return i.kind==="source"?c/os:i.kind==="composite"?ai.number(c/os,f/os,s):n},g.aj=e_,g.ak=function(i,n,s,c){const f=n.y-i.y,v=n.x-i.x,x=c.y-s.y,b=c.x-s.x,S=x*v-b*f;if(S===0)return null;const I=(b*(i.y-s.y)-x*(i.x-s.x))/S;return new D(i.x+I*v,i.y+I*f)},g.al=_1,g.am=sb,g.an=Dy,g.ao=function(i){let n=1/0,s=1/0,c=-1/0,f=-1/0;for(const v of i)n=Math.min(n,v.x),s=Math.min(s,v.y),c=Math.max(c,v.x),f=Math.max(f,v.y);return[n,s,c,f]},g.ap=vn,g.ar=Qy,g.as=function(i,n){var s=n[0],c=n[1],f=n[2],v=n[3],x=n[4],b=n[5],S=n[6],I=n[7],P=n[8],z=n[9],F=n[10],j=n[11],q=n[12],Y=n[13],se=n[14],ue=n[15],Pe=s*b-c*x,_e=s*S-f*x,Ce=s*I-v*x,Oe=c*S-f*b,We=c*I-v*b,ut=f*I-v*S,At=P*Y-z*q,at=P*se-F*q,nt=P*ue-j*q,xt=z*se-F*Y,mt=z*ue-j*Y,pt=F*ue-j*se,Ne=Pe*pt-_e*mt+Ce*xt+Oe*nt-We*at+ut*At;return Ne?(i[0]=(b*pt-S*mt+I*xt)*(Ne=1/Ne),i[1]=(f*mt-c*pt-v*xt)*Ne,i[2]=(Y*ut-se*We+ue*Oe)*Ne,i[3]=(F*We-z*ut-j*Oe)*Ne,i[4]=(S*nt-x*pt-I*at)*Ne,i[5]=(s*pt-f*nt+v*at)*Ne,i[6]=(se*Ce-q*ut-ue*_e)*Ne,i[7]=(P*ut-F*Ce+j*_e)*Ne,i[8]=(x*mt-b*nt+I*At)*Ne,i[9]=(c*nt-s*mt-v*At)*Ne,i[10]=(q*We-Y*Ce+ue*Pe)*Ne,i[11]=(z*Ce-P*We-j*Pe)*Ne,i[12]=(b*at-x*xt-S*At)*Ne,i[13]=(s*xt-c*at+f*At)*Ne,i[14]=(Y*_e-q*Oe-se*Pe)*Ne,i[15]=(P*Oe-z*_e+F*Pe)*Ne,i):null},g.at=l_,g.au=Jy,g.av=c_,g.aw=function(){const i={},n=Ie.$version;for(const s in Ie.$root){const c=Ie.$root[s];if(c.required){let f=null;f=s==="version"?n:c.type==="array"?[]:{},f!=null&&(i[s]=f)}}return i},g.ax=Ld,g.ay=Jt,g.az=function(i){i=i.slice();const n=Object.create(null);for(let s=0;s<i.length;s++)n[i[s].id]=i[s];for(let s=0;s<i.length;s++)"ref"in i[s]&&(i[s]=_r(i[s],n[i[s].ref]));return i},g.b=Ze,g.b0=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i},g.b1=function(i,n,s){return i[0]=n[0]*s[0],i[1]=n[1]*s[1],i[2]=n[2]*s[2],i[3]=n[3]*s[3],i},g.b2=function(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]+i[3]*n[3]},g.b3=ce,g.b4=d1,g.b5=c1,g.b6=function(i,n,s,c,f){var v,x=1/Math.tan(n/2);return i[0]=x/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=x,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,f!=null&&f!==1/0?(i[10]=(f+c)*(v=1/(c-f)),i[14]=2*f*c*v):(i[10]=-1,i[14]=-2*c),i},g.b7=function(i,n,s){var c=Math.sin(s),f=Math.cos(s),v=n[4],x=n[5],b=n[6],S=n[7],I=n[8],P=n[9],z=n[10],F=n[11];return n!==i&&(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[4]=v*f+I*c,i[5]=x*f+P*c,i[6]=b*f+z*c,i[7]=S*f+F*c,i[8]=I*f-v*c,i[9]=P*f-x*c,i[10]=z*f-b*c,i[11]=F*f-S*c,i},g.b8=U,g.b9=K,g.bA=Fb,g.bB=function(i){return i.message===ct},g.bC=ha,g.bD=Ti,g.ba=function(i){return i*Math.PI/180},g.bb=function(i,n){const{x:s,y:c}=eh.fromLngLat(n);return!(i<0||i>25||c<0||c>=1||s<0||s>=1)},g.bc=function(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=n[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},g.bd=class extends E{},g.be=i_,g.bf=PP,g.bh=Ye,g.bi=function(i,n){Ht.REGISTERED_PROTOCOLS[i]=n},g.bj=function(i){delete Ht.REGISTERED_PROTOCOLS[i]},g.bk=function(i,n){const s={};for(let f=0;f<i.length;f++){const v=n&&n[i[f].id]||Yp(i[f]);n&&(n[i[f].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(i[f])}const c=[];for(const f in s)c.push(s[f]);return c},g.bl=ft,g.bm=p1,g.bn=m1,g.bo=Gb,g.bp=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=fn/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const n=i.bucket.layers[0],s=n.layout,c=n._unevaluatedLayout._values,f={layoutIconSize:c["icon-size"].possiblyEvaluate(new jr(i.bucket.zoom+1),i.canonical),layoutTextSize:c["text-size"].possiblyEvaluate(new jr(i.bucket.zoom+1),i.canonical),textMaxSize:c["text-size"].possiblyEvaluate(new jr(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:P}=i.bucket.textSizeData;f.compositeTextSizes=[c["text-size"].possiblyEvaluate(new jr(I),i.canonical),c["text-size"].possiblyEvaluate(new jr(P),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:P}=i.bucket.iconSizeData;f.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new jr(I),i.canonical),c["icon-size"].possiblyEvaluate(new jr(P),i.canonical)]}const v=s.get("text-line-height")*vn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",b=s.get("text-keep-upright"),S=s.get("text-size");for(const I of i.bucket.features){const P=s.get("text-font").evaluate(I,{},i.canonical).join(","),z=S.evaluate(I,{},i.canonical),F=f.layoutTextSize.evaluate(I,{},i.canonical),j=f.layoutIconSize.evaluate(I,{},i.canonical),q={horizontal:{},vertical:void 0},Y=I.text;let se,ue=[0,0];if(Y){const Ce=Y.toString(),Oe=s.get("text-letter-spacing").evaluate(I,{},i.canonical)*vn,We=Cy(Ce)?Oe:0,ut=s.get("text-anchor").evaluate(I,{},i.canonical),At=I1(n,I,i.canonical);if(!At){const mt=s.get("text-radial-offset").evaluate(I,{},i.canonical);ue=mt?T1(ut,[mt*vn,a_]):s.get("text-offset").evaluate(I,{},i.canonical).map(pt=>pt*vn)}let at=x?"center":s.get("text-justify").evaluate(I,{},i.canonical);const nt=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(I,{},i.canonical)*vn:1/0,xt=()=>{i.bucket.allowVerticalPlacement&&Dd(Ce)&&(q.vertical=xf(Y,i.glyphMap,i.glyphPositions,i.imagePositions,P,nt,v,ut,"left",We,ue,g.ah.vertical,!0,F,z))};if(!x&&At){const mt=new Set;if(at==="auto")for(let Ne=0;Ne<At.values.length;Ne+=2)mt.add(l_(At.values[Ne]));else mt.add(at);let pt=!1;for(const Ne of mt)if(!q.horizontal[Ne])if(pt)q.horizontal[Ne]=q.horizontal[0];else{const wt=xf(Y,i.glyphMap,i.glyphPositions,i.imagePositions,P,nt,v,"center",Ne,We,ue,g.ah.horizontal,!1,F,z);wt&&(q.horizontal[Ne]=wt,pt=wt.positionedLines.length===1)}xt()}else{at==="auto"&&(at=l_(ut));const mt=xf(Y,i.glyphMap,i.glyphPositions,i.imagePositions,P,nt,v,ut,at,We,ue,g.ah.horizontal,!1,F,z);mt&&(q.horizontal[at]=mt),xt(),Dd(Ce)&&x&&b&&(q.vertical=xf(Y,i.glyphMap,i.glyphPositions,i.imagePositions,P,nt,v,ut,at,We,ue,g.ah.vertical,!1,F,z))}}let Pe=!1;if(I.icon&&I.icon.name){const Ce=i.imageMap[I.icon.name];Ce&&(se=uP(i.imagePositions[I.icon.name],s.get("icon-offset").evaluate(I,{},i.canonical),s.get("icon-anchor").evaluate(I,{},i.canonical)),Pe=!!Ce.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=Pe:i.bucket.sdfIcons!==Pe&&xe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ce.pixelRatio!==i.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const _e=E1(q.horizontal)||q.vertical;i.bucket.iconsInText=!!_e&&_e.iconsInText,(_e||se)&&TP(i.bucket,I,q,se,i.imageMap,f,F,j,ue,Pe,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},g.bq=Gy,g.br=Uy,g.bs=Hy,g.bt=Pa,g.bu=Zy,g.bv=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},g.bw=function(i,n,s,c,f){return u(this,void 0,void 0,function*(){if(O())try{return yield Fe(i,n,s,c,f)}catch{}return function(v,x,b,S,I){const P=v.width,z=v.height;Ge&&Xe||(Ge=new OffscreenCanvas(P,z),Xe=Ge.getContext("2d",{willReadFrequently:!0})),Ge.width=P,Ge.height=z,Xe.drawImage(v,0,0,P,z);const F=Xe.getImageData(x,b,S,I);return Xe.clearRect(0,0,P,z),F.data}(i,n,s,c,f)})},g.bx=h1,g.by=k,g.bz=M,g.c=Tt,g.d=i=>u(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),g.e=fe,g.f=i=>new Promise((n,s)=>{const c=new Image;c.onload=()=>{n(c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=ze})},c.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(i)],{type:"image/png"});c.src=i.byteLength?URL.createObjectURL(f):ze}),g.g=er,g.h=(i,n)=>zt(fe(i,{type:"json"}),n),g.i=Le,g.j=kt,g.k=Qt,g.l=(i,n)=>zt(fe(i,{type:"arrayBuffer"}),n),g.m=zt,g.n=function(i){return new Zy(i).readFields(nP,[])},g.o=Wd,g.p=Hb,g.q=_,g.r=wy,g.s=ht,g.t=zd,g.u=Ls,g.v=Ie,g.w=xe,g.x=function([i,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:i*Math.cos(n)*Math.sin(s),y:i*Math.sin(n)*Math.sin(s),z:i*Math.cos(s)}},g.y=ai,g.z=jr}),h("worker",["./shared"],function(g){class u{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,N){for(const ae of $){this._layerConfigs[ae.id]=ae;const ve=this._layers[ae.id]=g.aA(ae);ve._featureFilter=g.a7(ve.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(const ae of N)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};const Q=g.bk(Object.values(this._layerConfigs),this.keyCache);for(const ae of Q){const ve=ae.map(De=>this._layers[De.id]),we=ve[0];if(we.visibility==="none")continue;const ke=we.source||"";let me=this.familiesBySource[ke];me||(me=this.familiesBySource[ke]={});const $e=we.sourceLayer||"_geojsonTileLayer";let Ue=me[$e];Ue||(Ue=me[$e]=[]),Ue.push(ve)}}}class k{constructor($){const N={},Q=[];for(const ke in $){const me=$[ke],$e=N[ke]={};for(const Ue in me){const De=me[+Ue];if(!De||De.bitmap.width===0||De.bitmap.height===0)continue;const Qe={x:0,y:0,w:De.bitmap.width+2,h:De.bitmap.height+2};Q.push(Qe),$e[Ue]={rect:Qe,metrics:De.metrics}}}const{w:ae,h:ve}=g.p(Q),we=new g.o({width:ae||1,height:ve||1});for(const ke in $){const me=$[ke];for(const $e in me){const Ue=me[+$e];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const De=N[ke][$e].rect;g.o.copy(Ue.bitmap,we,{x:0,y:0},{x:De.x+1,y:De.y+1},Ue.bitmap)}}this.image=we,this.positions=N}}g.bl("GlyphAtlas",k);class M{constructor($){this.tileID=new g.S($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId,this.inFlightDependencies=[]}parse($,N,Q,ae){return g._(this,void 0,void 0,function*(){this.status="parsing",this.data=$,this.collisionBoxArray=new g.a5;const ve=new g.bm(Object.keys($.layers).sort()),we=new g.bn(this.tileID,this.promoteId);we.bucketLayerIDs=[];const ke={},me={featureIndex:we,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q},$e=N.familiesBySource[this.source];for(const tr in $e){const kr=$.layers[tr];if(!kr)continue;kr.version===1&&g.w(`Vector tile source "${this.source}" layer "${tr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gr=ve.encode(tr),Sn=[];for(let An=0;An<kr.length;An++){const Kn=kr.feature(An),ta=we.getId(Kn,tr);Sn.push({feature:Kn,id:ta,index:An,sourceLayerIndex:Gr})}for(const An of $e[tr]){const Kn=An[0];Kn.source!==this.source&&g.w(`layer.source = ${Kn.source} does not equal this.source = ${this.source}`),Kn.minzoom&&this.zoom<Math.floor(Kn.minzoom)||Kn.maxzoom&&this.zoom>=Kn.maxzoom||Kn.visibility!=="none"&&(B(An,this.zoom,Q),(ke[Kn.id]=Kn.createBucket({index:we.bucketLayerIDs.length,layers:An,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gr,sourceID:this.source})).populate(Sn,me,this.tileID.canonical),we.bucketLayerIDs.push(An.map(ta=>ta.id)))}}const Ue=g.aF(me.glyphDependencies,tr=>Object.keys(tr).map(Number));this.inFlightDependencies.forEach(tr=>tr==null?void 0:tr.abort()),this.inFlightDependencies=[];let De=Promise.resolve({});if(Object.keys(Ue).length){const tr=new AbortController;this.inFlightDependencies.push(tr),De=ae.sendAsync({type:"GG",data:{stacks:Ue,source:this.source,tileID:this.tileID,type:"glyphs"}},tr)}const Qe=Object.keys(me.iconDependencies);let St=Promise.resolve({});if(Qe.length){const tr=new AbortController;this.inFlightDependencies.push(tr),St=ae.sendAsync({type:"GI",data:{icons:Qe,source:this.source,tileID:this.tileID,type:"icons"}},tr)}const Et=Object.keys(me.patternDependencies);let mr=Promise.resolve({});if(Et.length){const tr=new AbortController;this.inFlightDependencies.push(tr),mr=ae.sendAsync({type:"GI",data:{icons:Et,source:this.source,tileID:this.tileID,type:"patterns"}},tr)}const[Vt,gr,sr]=yield Promise.all([De,St,mr]),hn=new k(Vt),Xr=new g.bo(gr,sr);for(const tr in ke){const kr=ke[tr];kr instanceof g.a6?(B(kr.layers,this.zoom,Q),g.bp({bucket:kr,glyphMap:Vt,glyphPositions:hn.positions,imageMap:gr,imagePositions:Xr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):kr.hasPattern&&(kr instanceof g.bq||kr instanceof g.br||kr instanceof g.bs)&&(B(kr.layers,this.zoom,Q),kr.addFeatures(me,this.tileID.canonical,Xr.patternPositions))}return this.status="done",{buckets:Object.values(ke).filter(tr=>!tr.isEmpty()),featureIndex:we,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:hn.image,imageAtlas:Xr,glyphMap:this.returnDependencies?Vt:null,iconMap:this.returnDependencies?gr:null,glyphPositions:this.returnDependencies?hn.positions:null}})}}function B(ie,$,N){const Q=new g.z($);for(const ae of ie)ae.recalculate(Q,N)}class D{constructor($,N,Q){this.actor=$,this.layerIndex=N,this.availableImages=Q,this.fetching={},this.loading={},this.loaded={}}loadVectorTile($,N){return g._(this,void 0,void 0,function*(){const Q=yield g.l($.request,N);try{return{vectorTile:new g.bt.VectorTile(new g.bu(Q.data)),rawData:Q.data,cacheControl:Q.cacheControl,expires:Q.expires}}catch(ae){const ve=new Uint8Array(Q.data);let we=`Unable to parse the tile at ${$.request.url}, `;throw we+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ae.message}`,new Error(we)}})}loadTile($){return g._(this,void 0,void 0,function*(){const N=$.uid,Q=!!($&&$.request&&$.request.collectResourceTiming)&&new g.bv($.request),ae=new M($);this.loading[N]=ae;const ve=new AbortController;ae.abort=ve;try{const we=yield this.loadVectorTile($,ve);if(delete this.loading[N],!we)return null;const ke=we.rawData,me={};we.expires&&(me.expires=we.expires),we.cacheControl&&(me.cacheControl=we.cacheControl);const $e={};if(Q){const De=Q.finish();De&&($e.resourceTiming=JSON.parse(JSON.stringify(De)))}ae.vectorTile=we.vectorTile;const Ue=ae.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[N]=ae,this.fetching[N]={rawTileData:ke,cacheControl:me,resourceTiming:$e};try{const De=yield Ue;return g.e({rawTileData:ke.slice(0)},De,me,$e)}finally{delete this.fetching[N]}}catch(we){throw delete this.loading[N],ae.status="done",this.loaded[N]=ae,we}})}reloadTile($){return g._(this,void 0,void 0,function*(){const N=$.uid;if(!this.loaded||!this.loaded[N])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Q=this.loaded[N];if(Q.showCollisionBoxes=$.showCollisionBoxes,Q.status==="parsing"){const ae=yield Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor);let ve;if(this.fetching[N]){const{rawTileData:we,cacheControl:ke,resourceTiming:me}=this.fetching[N];delete this.fetching[N],ve=g.e({rawTileData:we.slice(0)},ae,ke,me)}else ve=ae;return ve}if(Q.status==="done"&&Q.vectorTile)return Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile($){return g._(this,void 0,void 0,function*(){const N=this.loading,Q=$.uid;N&&N[Q]&&N[Q].abort&&(N[Q].abort.abort(),delete N[Q])})}removeTile($){return g._(this,void 0,void 0,function*(){this.loaded&&this.loaded[$.uid]&&delete this.loaded[$.uid]})}}class A{constructor(){this.loaded={}}loadTile($){return g._(this,void 0,void 0,function*(){const{uid:N,encoding:Q,rawImageData:ae,redFactor:ve,greenFactor:we,blueFactor:ke,baseShift:me}=$,$e=ae.width+2,Ue=ae.height+2,De=g.b(ae)?new g.R({width:$e,height:Ue},yield g.bw(ae,-1,-1,$e,Ue)):ae,Qe=new g.bx(N,De,Q,ve,we,ke,me);return this.loaded=this.loaded||{},this.loaded[N]=Qe,Qe})}removeTile($){const N=this.loaded,Q=$.uid;N&&N[Q]&&delete N[Q]}}function Z(ie,$){if(ie.length!==0){G(ie[0],$);for(var N=1;N<ie.length;N++)G(ie[N],!$)}}function G(ie,$){for(var N=0,Q=0,ae=0,ve=ie.length,we=ve-1;ae<ve;we=ae++){var ke=(ie[ae][0]-ie[we][0])*(ie[we][1]+ie[ae][1]),me=N+ke;Q+=Math.abs(N)>=Math.abs(ke)?N-me+ke:ke-me+N,N=me}N+Q>=0!=!!$&&ie.reverse()}var te=g.by(function ie($,N){var Q,ae=$&&$.type;if(ae==="FeatureCollection")for(Q=0;Q<$.features.length;Q++)ie($.features[Q],N);else if(ae==="GeometryCollection")for(Q=0;Q<$.geometries.length;Q++)ie($.geometries[Q],N);else if(ae==="Feature")ie($.geometry,N);else if(ae==="Polygon")Z($.coordinates,N);else if(ae==="MultiPolygon")for(Q=0;Q<$.coordinates.length;Q++)Z($.coordinates[Q],N);return $});const ne=g.bt.VectorTileFeature.prototype.toGeoJSON;var W={exports:{}},O=g.bz,U=g.bt.VectorTileFeature,K=he;function he(ie,$){this.options=$||{},this.features=ie,this.length=ie.length}function ce(ie,$){this.id=typeof ie.id=="number"?ie.id:void 0,this.type=ie.type,this.rawGeometry=ie.type===1?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=$||4096}he.prototype.feature=function(ie){return new ce(this.features[ie],this.options.extent)},ce.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var $=0;$<ie.length;$++){for(var N=ie[$],Q=[],ae=0;ae<N.length;ae++)Q.push(new O(N[ae][0],N[ae][1]));this.geometry.push(Q)}return this.geometry},ce.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,$=1/0,N=-1/0,Q=1/0,ae=-1/0,ve=0;ve<ie.length;ve++)for(var we=ie[ve],ke=0;ke<we.length;ke++){var me=we[ke];$=Math.min($,me.x),N=Math.max(N,me.x),Q=Math.min(Q,me.y),ae=Math.max(ae,me.y)}return[$,Q,N,ae]},ce.prototype.toGeoJSON=U.prototype.toGeoJSON;var fe=g.bA,ge=K;function Te(ie){var $=new fe;return function(N,Q){for(var ae in N.layers)Q.writeMessage(3,Ae,N.layers[ae])}(ie,$),$.finish()}function Ae(ie,$){var N;$.writeVarintField(15,ie.version||1),$.writeStringField(1,ie.name||""),$.writeVarintField(5,ie.extent||4096);var Q={keys:[],values:[],keycache:{},valuecache:{}};for(N=0;N<ie.length;N++)Q.feature=ie.feature(N),$.writeMessage(2,Re,Q);var ae=Q.keys;for(N=0;N<ae.length;N++)$.writeStringField(3,ae[N]);var ve=Q.values;for(N=0;N<ve.length;N++)$.writeMessage(4,Be,ve[N])}function Re(ie,$){var N=ie.feature;N.id!==void 0&&$.writeVarintField(1,N.id),$.writeMessage(2,X,ie),$.writeVarintField(3,N.type),$.writeMessage(4,Le,N)}function X(ie,$){var N=ie.feature,Q=ie.keys,ae=ie.values,ve=ie.keycache,we=ie.valuecache;for(var ke in N.properties){var me=N.properties[ke],$e=ve[ke];if(me!==null){$e===void 0&&(Q.push(ke),ve[ke]=$e=Q.length-1),$.writeVarint($e);var Ue=typeof me;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(me=JSON.stringify(me));var De=Ue+":"+me,Qe=we[De];Qe===void 0&&(ae.push(me),we[De]=Qe=ae.length-1),$.writeVarint(Qe)}}}function xe(ie,$){return($<<3)+(7&ie)}function Ee(ie){return ie<<1^ie>>31}function Le(ie,$){for(var N=ie.loadGeometry(),Q=ie.type,ae=0,ve=0,we=N.length,ke=0;ke<we;ke++){var me=N[ke],$e=1;Q===1&&($e=me.length),$.writeVarint(xe(1,$e));for(var Ue=Q===3?me.length-1:me.length,De=0;De<Ue;De++){De===1&&Q!==1&&$.writeVarint(xe(2,Ue-1));var Qe=me[De].x-ae,St=me[De].y-ve;$.writeVarint(Ee(Qe)),$.writeVarint(Ee(St)),ae+=Qe,ve+=St}Q===3&&$.writeVarint(xe(7,1))}}function Be(ie,$){var N=typeof ie;N==="string"?$.writeStringField(1,ie):N==="boolean"?$.writeBooleanField(7,ie):N==="number"&&(ie%1!=0?$.writeDoubleField(3,ie):ie<0?$.writeSVarintField(6,ie):$.writeVarintField(5,ie))}W.exports=Te,W.exports.fromVectorTileJs=Te,W.exports.fromGeojsonVt=function(ie,$){$=$||{};var N={};for(var Q in ie)N[Q]=new ge(ie[Q].features,$),N[Q].name=Q,N[Q].version=$.version,N[Q].extent=$.extent;return Te({layers:N})},W.exports.GeoJSONWrapper=ge;var Ze=g.by(W.exports);const ze={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},Fe=Math.fround||(Ge=new Float32Array(1),ie=>(Ge[0]=+ie,Ge[0]));var Ge;const Xe=3,ct=5,Tt=6;class Ht{constructor($){this.options=Object.assign(Object.create(ze),$),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load($){const{log:N,minZoom:Q,maxZoom:ae}=this.options;N&&console.time("total time");const ve=`prepare ${$.length} points`;N&&console.time(ve),this.points=$;const we=[];for(let me=0;me<$.length;me++){const $e=$[me];if(!$e.geometry)continue;const[Ue,De]=$e.geometry.coordinates,Qe=Fe(Ye(Ue)),St=Fe(Jt(De));we.push(Qe,St,1/0,me,-1,1),this.options.reduce&&we.push(0)}let ke=this.trees[ae+1]=this._createTree(we);N&&console.timeEnd(ve);for(let me=ae;me>=Q;me--){const $e=+Date.now();ke=this.trees[me]=this._createTree(this._cluster(ke,me)),N&&console.log("z%d: %d clusters in %dms",me,ke.numItems,+Date.now()-$e)}return N&&console.timeEnd("total time"),this}getClusters($,N){let Q=(($[0]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,$[1]));let ve=$[2]===180?180:(($[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)Q=-180,ve=180;else if(Q>ve){const De=this.getClusters([Q,ae,180,we],N),Qe=this.getClusters([-180,ae,ve,we],N);return De.concat(Qe)}const ke=this.trees[this._limitZoom(N)],me=ke.range(Ye(Q),Jt(we),Ye(ve),Jt(ae)),$e=ke.data,Ue=[];for(const De of me){const Qe=this.stride*De;Ue.push($e[Qe+ct]>1?er($e,Qe,this.clusterProps):this.points[$e[Qe+Xe]])}return Ue}getChildren($){const N=this._getOriginId($),Q=this._getOriginZoom($),ae="No cluster with the specified id.",ve=this.trees[Q];if(!ve)throw new Error(ae);const we=ve.data;if(N*this.stride>=we.length)throw new Error(ae);const ke=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),me=ve.within(we[N*this.stride],we[N*this.stride+1],ke),$e=[];for(const Ue of me){const De=Ue*this.stride;we[De+4]===$&&$e.push(we[De+ct]>1?er(we,De,this.clusterProps):this.points[we[De+Xe]])}if($e.length===0)throw new Error(ae);return $e}getLeaves($,N,Q){const ae=[];return this._appendLeaves(ae,$,N=N||10,Q=Q||0,0),ae}getTile($,N,Q){const ae=this.trees[this._limitZoom($)],ve=Math.pow(2,$),{extent:we,radius:ke}=this.options,me=ke/we,$e=(Q-me)/ve,Ue=(Q+1+me)/ve,De={features:[]};return this._addTileFeatures(ae.range((N-me)/ve,$e,(N+1+me)/ve,Ue),ae.data,N,Q,ve,De),N===0&&this._addTileFeatures(ae.range(1-me/ve,$e,1,Ue),ae.data,ve,Q,ve,De),N===ve-1&&this._addTileFeatures(ae.range(0,$e,me/ve,Ue),ae.data,-1,Q,ve,De),De.features.length?De:null}getClusterExpansionZoom($){let N=this._getOriginZoom($)-1;for(;N<=this.options.maxZoom;){const Q=this.getChildren($);if(N++,Q.length!==1)break;$=Q[0].properties.cluster_id}return N}_appendLeaves($,N,Q,ae,ve){const we=this.getChildren(N);for(const ke of we){const me=ke.properties;if(me&&me.cluster?ve+me.point_count<=ae?ve+=me.point_count:ve=this._appendLeaves($,me.cluster_id,Q,ae,ve):ve<ae?ve++:$.push(ke),$.length===Q)break}return ve}_createTree($){const N=new g.av($.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<$.length;Q+=this.stride)N.add($[Q],$[Q+1]);return N.finish(),N.data=$,N}_addTileFeatures($,N,Q,ae,ve,we){for(const ke of $){const me=ke*this.stride,$e=N[me+ct]>1;let Ue,De,Qe;if($e)Ue=rr(N,me,this.clusterProps),De=N[me],Qe=N[me+1];else{const mr=this.points[N[me+Xe]];Ue=mr.properties;const[Vt,gr]=mr.geometry.coordinates;De=Ye(Vt),Qe=Jt(gr)}const St={type:1,geometry:[[Math.round(this.options.extent*(De*ve-Q)),Math.round(this.options.extent*(Qe*ve-ae))]],tags:Ue};let Et;Et=$e||this.options.generateId?N[me+Xe]:this.points[N[me+Xe]].id,Et!==void 0&&(St.id=Et),we.features.push(St)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,N){const{radius:Q,extent:ae,reduce:ve,minPoints:we}=this.options,ke=Q/(ae*Math.pow(2,N)),me=$.data,$e=[],Ue=this.stride;for(let De=0;De<me.length;De+=Ue){if(me[De+2]<=N)continue;me[De+2]=N;const Qe=me[De],St=me[De+1],Et=$.within(me[De],me[De+1],ke),mr=me[De+ct];let Vt=mr;for(const gr of Et){const sr=gr*Ue;me[sr+2]>N&&(Vt+=me[sr+ct])}if(Vt>mr&&Vt>=we){let gr,sr=Qe*mr,hn=St*mr,Xr=-1;const tr=((De/Ue|0)<<5)+(N+1)+this.points.length;for(const kr of Et){const Gr=kr*Ue;if(me[Gr+2]<=N)continue;me[Gr+2]=N;const Sn=me[Gr+ct];sr+=me[Gr]*Sn,hn+=me[Gr+1]*Sn,me[Gr+4]=tr,ve&&(gr||(gr=this._map(me,De,!0),Xr=this.clusterProps.length,this.clusterProps.push(gr)),ve(gr,this._map(me,Gr)))}me[De+4]=tr,$e.push(sr/Vt,hn/Vt,1/0,tr,-1,Vt),ve&&$e.push(Xr)}else{for(let gr=0;gr<Ue;gr++)$e.push(me[De+gr]);if(Vt>1)for(const gr of Et){const sr=gr*Ue;if(!(me[sr+2]<=N)){me[sr+2]=N;for(let hn=0;hn<Ue;hn++)$e.push(me[sr+hn])}}}}return $e}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,N,Q){if($[N+ct]>1){const we=this.clusterProps[$[N+Tt]];return Q?Object.assign({},we):we}const ae=this.points[$[N+Xe]].properties,ve=this.options.map(ae);return Q&&ve===ae?Object.assign({},ve):ve}}function er(ie,$,N){return{type:"Feature",id:ie[$+Xe],properties:rr(ie,$,N),geometry:{type:"Point",coordinates:[(Q=ie[$],360*(Q-.5)),zt(ie[$+1])]}};var Q}function rr(ie,$,N){const Q=ie[$+ct],ae=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,ve=ie[$+Tt],we=ve===-1?{}:Object.assign({},N[ve]);return Object.assign(we,{cluster:!0,cluster_id:ie[$+Xe],point_count:Q,point_count_abbreviated:ae})}function Ye(ie){return ie/360+.5}function Jt(ie){const $=Math.sin(ie*Math.PI/180),N=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return N<0?0:N>1?1:N}function zt(ie){const $=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function ht(ie,$,N,Q){let ae=Q;const ve=$+(N-$>>1);let we,ke=N-$;const me=ie[$],$e=ie[$+1],Ue=ie[N],De=ie[N+1];for(let Qe=$+3;Qe<N;Qe+=3){const St=Rt(ie[Qe],ie[Qe+1],me,$e,Ue,De);if(St>ae)we=Qe,ae=St;else if(St===ae){const Et=Math.abs(Qe-ve);Et<ke&&(we=Qe,ke=Et)}}ae>Q&&(we-$>3&&ht(ie,$,we,Q),ie[we+2]=ae,N-we>3&&ht(ie,we,N,Q))}function Rt(ie,$,N,Q,ae,ve){let we=ae-N,ke=ve-Q;if(we!==0||ke!==0){const me=((ie-N)*we+($-Q)*ke)/(we*we+ke*ke);me>1?(N=ae,Q=ve):me>0&&(N+=we*me,Q+=ke*me)}return we=ie-N,ke=$-Q,we*we+ke*ke}function Mt(ie,$,N,Q){const ae={id:ie??null,type:$,geometry:N,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if($==="Point"||$==="MultiPoint"||$==="LineString")Qt(ae,N);else if($==="Polygon")Qt(ae,N[0]);else if($==="MultiLineString")for(const ve of N)Qt(ae,ve);else if($==="MultiPolygon")for(const ve of N)Qt(ae,ve[0]);return ae}function Qt(ie,$){for(let N=0;N<$.length;N+=3)ie.minX=Math.min(ie.minX,$[N]),ie.minY=Math.min(ie.minY,$[N+1]),ie.maxX=Math.max(ie.maxX,$[N]),ie.maxY=Math.max(ie.maxY,$[N+1])}function kt(ie,$,N,Q){if(!$.geometry)return;const ae=$.geometry.coordinates;if(ae&&ae.length===0)return;const ve=$.geometry.type,we=Math.pow(N.tolerance/((1<<N.maxZoom)*N.extent),2);let ke=[],me=$.id;if(N.promoteId?me=$.properties[N.promoteId]:N.generateId&&(me=Q||0),ve==="Point")Zt(ae,ke);else if(ve==="MultiPoint")for(const $e of ae)Zt($e,ke);else if(ve==="LineString")Ie(ae,ke,we,!1);else if(ve==="MultiLineString"){if(N.lineMetrics){for(const $e of ae)ke=[],Ie($e,ke,we,!1),ie.push(Mt(me,"LineString",ke,$.properties));return}hr(ae,ke,we,!1)}else if(ve==="Polygon")hr(ae,ke,we,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const $e of $.geometry.geometries)kt(ie,{id:me,geometry:$e,properties:$.properties},N,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const $e of ae){const Ue=[];hr($e,Ue,we,!0),ke.push(Ue)}}ie.push(Mt(me,ve,ke,$.properties))}function Zt(ie,$){$.push(_r(ie[0]),Bt(ie[1]),0)}function Ie(ie,$,N,Q){let ae,ve,we=0;for(let me=0;me<ie.length;me++){const $e=_r(ie[me][0]),Ue=Bt(ie[me][1]);$.push($e,Ue,0),me>0&&(we+=Q?(ae*Ue-$e*ve)/2:Math.sqrt(Math.pow($e-ae,2)+Math.pow(Ue-ve,2))),ae=$e,ve=Ue}const ke=$.length-3;$[2]=1,ht($,0,ke,N),$[ke+2]=1,$.size=Math.abs(we),$.start=0,$.end=$.size}function hr(ie,$,N,Q){for(let ae=0;ae<ie.length;ae++){const ve=[];Ie(ie[ae],ve,N,Q),$.push(ve)}}function _r(ie){return ie/360+.5}function Bt(ie){const $=Math.sin(ie*Math.PI/180),N=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return N<0?0:N>1?1:N}function or(ie,$,N,Q,ae,ve,we,ke){if(Q/=$,ve>=(N/=$)&&we<Q)return ie;if(we<N||ve>=Q)return null;const me=[];for(const $e of ie){const Ue=$e.geometry;let De=$e.type;const Qe=ae===0?$e.minX:$e.minY,St=ae===0?$e.maxX:$e.maxY;if(Qe>=N&&St<Q){me.push($e);continue}if(St<N||Qe>=Q)continue;let Et=[];if(De==="Point"||De==="MultiPoint")Sr(Ue,Et,N,Q,ae);else if(De==="LineString")bt(Ue,Et,N,Q,ae,!1,ke.lineMetrics);else if(De==="MultiLineString")Ir(Ue,Et,N,Q,ae,!1);else if(De==="Polygon")Ir(Ue,Et,N,Q,ae,!0);else if(De==="MultiPolygon")for(const mr of Ue){const Vt=[];Ir(mr,Vt,N,Q,ae,!0),Vt.length&&Et.push(Vt)}if(Et.length){if(ke.lineMetrics&&De==="LineString"){for(const mr of Et)me.push(Mt($e.id,De,mr,$e.tags));continue}De!=="LineString"&&De!=="MultiLineString"||(Et.length===1?(De="LineString",Et=Et[0]):De="MultiLineString"),De!=="Point"&&De!=="MultiPoint"||(De=Et.length===3?"Point":"MultiPoint"),me.push(Mt($e.id,De,Et,$e.tags))}}return me.length?me:null}function Sr(ie,$,N,Q,ae){for(let ve=0;ve<ie.length;ve+=3){const we=ie[ve+ae];we>=N&&we<=Q&&un($,ie[ve],ie[ve+1],ie[ve+2])}}function bt(ie,$,N,Q,ae,ve,we){let ke=_n(ie);const me=ae===0?En:Fn;let $e,Ue,De=ie.start;for(let Vt=0;Vt<ie.length-3;Vt+=3){const gr=ie[Vt],sr=ie[Vt+1],hn=ie[Vt+2],Xr=ie[Vt+3],tr=ie[Vt+4],kr=ae===0?gr:sr,Gr=ae===0?Xr:tr;let Sn=!1;we&&($e=Math.sqrt(Math.pow(gr-Xr,2)+Math.pow(sr-tr,2))),kr<N?Gr>N&&(Ue=me(ke,gr,sr,Xr,tr,N),we&&(ke.start=De+$e*Ue)):kr>Q?Gr<Q&&(Ue=me(ke,gr,sr,Xr,tr,Q),we&&(ke.start=De+$e*Ue)):un(ke,gr,sr,hn),Gr<N&&kr>=N&&(Ue=me(ke,gr,sr,Xr,tr,N),Sn=!0),Gr>Q&&kr<=Q&&(Ue=me(ke,gr,sr,Xr,tr,Q),Sn=!0),!ve&&Sn&&(we&&(ke.end=De+$e*Ue),$.push(ke),ke=_n(ie)),we&&(De+=$e)}let Qe=ie.length-3;const St=ie[Qe],Et=ie[Qe+1],mr=ae===0?St:Et;mr>=N&&mr<=Q&&un(ke,St,Et,ie[Qe+2]),Qe=ke.length-3,ve&&Qe>=3&&(ke[Qe]!==ke[0]||ke[Qe+1]!==ke[1])&&un(ke,ke[0],ke[1],ke[2]),ke.length&&$.push(ke)}function _n(ie){const $=[];return $.size=ie.size,$.start=ie.start,$.end=ie.end,$}function Ir(ie,$,N,Q,ae,ve){for(const we of ie)bt(we,$,N,Q,ae,ve,!1)}function un(ie,$,N,Q){ie.push($,N,Q)}function En(ie,$,N,Q,ae,ve){const we=(ve-$)/(Q-$);return un(ie,ve,N+(ae-N)*we,1),we}function Fn(ie,$,N,Q,ae,ve){const we=(ve-N)/(ae-N);return un(ie,$+(Q-$)*we,ve,1),we}function qe(ie,$){const N=[];for(let Q=0;Q<ie.length;Q++){const ae=ie[Q],ve=ae.type;let we;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")we=dn(ae.geometry,$);else if(ve==="MultiLineString"||ve==="Polygon"){we=[];for(const ke of ae.geometry)we.push(dn(ke,$))}else if(ve==="MultiPolygon"){we=[];for(const ke of ae.geometry){const me=[];for(const $e of ke)me.push(dn($e,$));we.push(me)}}N.push(Mt(ae.id,ve,we,ae.tags))}return N}function dn(ie,$){const N=[];N.size=ie.size,ie.start!==void 0&&(N.start=ie.start,N.end=ie.end);for(let Q=0;Q<ie.length;Q+=3)N.push(ie[Q]+$,ie[Q+1],ie[Q+2]);return N}function dr(ie,$){if(ie.transformed)return ie;const N=1<<ie.z,Q=ie.x,ae=ie.y;for(const ve of ie.features){const we=ve.geometry,ke=ve.type;if(ve.geometry=[],ke===1)for(let me=0;me<we.length;me+=2)ve.geometry.push(Ft(we[me],we[me+1],$,N,Q,ae));else for(let me=0;me<we.length;me++){const $e=[];for(let Ue=0;Ue<we[me].length;Ue+=2)$e.push(Ft(we[me][Ue],we[me][Ue+1],$,N,Q,ae));ve.geometry.push($e)}}return ie.transformed=!0,ie}function Ft(ie,$,N,Q,ae,ve){return[Math.round(N*(ie*Q-ae)),Math.round(N*($*Q-ve))]}function Nr(ie,$,N,Q,ae){const ve=$===ae.maxZoom?0:ae.tolerance/((1<<$)*ae.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:ie.length,source:null,x:N,y:Q,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ke of ie)He(we,ke,ve,ae);return we}function He(ie,$,N,Q){const ae=$.geometry,ve=$.type,we=[];if(ie.minX=Math.min(ie.minX,$.minX),ie.minY=Math.min(ie.minY,$.minY),ie.maxX=Math.max(ie.maxX,$.maxX),ie.maxY=Math.max(ie.maxY,$.maxY),ve==="Point"||ve==="MultiPoint")for(let ke=0;ke<ae.length;ke+=3)we.push(ae[ke],ae[ke+1]),ie.numPoints++,ie.numSimplified++;else if(ve==="LineString")It(we,ae,ie,N,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let ke=0;ke<ae.length;ke++)It(we,ae[ke],ie,N,ve==="Polygon",ke===0);else if(ve==="MultiPolygon")for(let ke=0;ke<ae.length;ke++){const me=ae[ke];for(let $e=0;$e<me.length;$e++)It(we,me[$e],ie,N,!0,$e===0)}if(we.length){let ke=$.tags||null;if(ve==="LineString"&&Q.lineMetrics){ke={};for(const $e in $.tags)ke[$e]=$.tags[$e];ke.mapbox_clip_start=ae.start/ae.size,ke.mapbox_clip_end=ae.end/ae.size}const me={geometry:we,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:ke};$.id!==null&&(me.id=$.id),ie.features.push(me)}}function It(ie,$,N,Q,ae,ve){const we=Q*Q;if(Q>0&&$.size<(ae?we:Q))return void(N.numPoints+=$.length/3);const ke=[];for(let me=0;me<$.length;me+=3)(Q===0||$[me+2]>we)&&(N.numSimplified++,ke.push($[me],$[me+1])),N.numPoints++;ae&&function(me,$e){let Ue=0;for(let De=0,Qe=me.length,St=Qe-2;De<Qe;St=De,De+=2)Ue+=(me[De]-me[St])*(me[De+1]+me[St+1]);if(Ue>0===$e)for(let De=0,Qe=me.length;De<Qe/2;De+=2){const St=me[De],Et=me[De+1];me[De]=me[Qe-2-De],me[De+1]=me[Qe-1-De],me[Qe-2-De]=St,me[Qe-1-De]=Et}}(ke,ve),ie.push(ke)}const Lt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Mn{constructor($,N){const Q=(N=this.options=function(ve,we){for(const ke in we)ve[ke]=we[ke];return ve}(Object.create(Lt),N)).debug;if(Q&&console.time("preprocess data"),N.maxZoom<0||N.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(N.promoteId&&N.generateId)throw new Error("promoteId and generateId cannot be used together.");let ae=function(ve,we){const ke=[];if(ve.type==="FeatureCollection")for(let me=0;me<ve.features.length;me++)kt(ke,ve.features[me],we,me);else kt(ke,ve.type==="Feature"?ve:{geometry:ve},we);return ke}($,N);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",N.indexMaxZoom,N.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ae=function(ve,we){const ke=we.buffer/we.extent;let me=ve;const $e=or(ve,1,-1-ke,ke,0,-1,2,we),Ue=or(ve,1,1-ke,2+ke,0,-1,2,we);return($e||Ue)&&(me=or(ve,1,-ke,1+ke,0,-1,2,we)||[],$e&&(me=qe($e,1).concat(me)),Ue&&(me=me.concat(qe(Ue,-1)))),me}(ae,N),ae.length&&this.splitTile(ae,0,0,0),Q&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile($,N,Q,ae,ve,we,ke){const me=[$,N,Q,ae],$e=this.options,Ue=$e.debug;for(;me.length;){ae=me.pop(),Q=me.pop(),N=me.pop(),$=me.pop();const De=1<<N,Qe=si(N,Q,ae);let St=this.tiles[Qe];if(!St&&(Ue>1&&console.time("creation"),St=this.tiles[Qe]=Nr($,N,Q,ae,$e),this.tileCoords.push({z:N,x:Q,y:ae}),Ue)){Ue>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",N,Q,ae,St.numFeatures,St.numPoints,St.numSimplified),console.timeEnd("creation"));const Sn=`z${N}`;this.stats[Sn]=(this.stats[Sn]||0)+1,this.total++}if(St.source=$,ve==null){if(N===$e.indexMaxZoom||St.numPoints<=$e.indexMaxPoints)continue}else{if(N===$e.maxZoom||N===ve)continue;if(ve!=null){const Sn=ve-N;if(Q!==we>>Sn||ae!==ke>>Sn)continue}}if(St.source=null,$.length===0)continue;Ue>1&&console.time("clipping");const Et=.5*$e.buffer/$e.extent,mr=.5-Et,Vt=.5+Et,gr=1+Et;let sr=null,hn=null,Xr=null,tr=null,kr=or($,De,Q-Et,Q+Vt,0,St.minX,St.maxX,$e),Gr=or($,De,Q+mr,Q+gr,0,St.minX,St.maxX,$e);$=null,kr&&(sr=or(kr,De,ae-Et,ae+Vt,1,St.minY,St.maxY,$e),hn=or(kr,De,ae+mr,ae+gr,1,St.minY,St.maxY,$e),kr=null),Gr&&(Xr=or(Gr,De,ae-Et,ae+Vt,1,St.minY,St.maxY,$e),tr=or(Gr,De,ae+mr,ae+gr,1,St.minY,St.maxY,$e),Gr=null),Ue>1&&console.timeEnd("clipping"),me.push(sr||[],N+1,2*Q,2*ae),me.push(hn||[],N+1,2*Q,2*ae+1),me.push(Xr||[],N+1,2*Q+1,2*ae),me.push(tr||[],N+1,2*Q+1,2*ae+1)}}getTile($,N,Q){$=+$,N=+N,Q=+Q;const ae=this.options,{extent:ve,debug:we}=ae;if($<0||$>24)return null;const ke=1<<$,me=si($,N=N+ke&ke-1,Q);if(this.tiles[me])return dr(this.tiles[me],ve);we>1&&console.log("drilling down to z%d-%d-%d",$,N,Q);let $e,Ue=$,De=N,Qe=Q;for(;!$e&&Ue>0;)Ue--,De>>=1,Qe>>=1,$e=this.tiles[si(Ue,De,Qe)];return $e&&$e.source?(we>1&&(console.log("found parent tile z%d-%d-%d",Ue,De,Qe),console.time("drilling down")),this.splitTile($e.source,Ue,De,Qe,$,N,Q),we>1&&console.timeEnd("drilling down"),this.tiles[me]?dr(this.tiles[me],ve):null):null}}function si(ie,$,N){return 32*((1<<ie)*N+$)+ie}function Nt(ie,$){return $?ie.properties[$]:ie.id}function bi(ie,$){if(ie==null)return!0;if(ie.type==="Feature")return Nt(ie,$)!=null;if(ie.type==="FeatureCollection"){const N=new Set;for(const Q of ie.features){const ae=Nt(Q,$);if(ae==null||N.has(ae))return!1;N.add(ae)}return!0}return!1}function Bi(ie,$){const N=new Map;if(ie!=null)if(ie.type==="Feature")N.set(Nt(ie,$),ie);else for(const Q of ie.features)N.set(Nt(Q,$),Q);return N}class Pt extends D{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile($,N){return g._(this,void 0,void 0,function*(){const Q=$.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ae=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!ae)return null;const ve=new class{constructor(ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.X,this.length=ke.length,this._features=ke}feature(ke){return new class{constructor(me){this._feature=me,this.extent=g.X,this.type=me.type,this.properties=me.tags,"id"in me&&!isNaN(me.id)&&(this.id=parseInt(me.id,10))}loadGeometry(){if(this._feature.type===1){const me=[];for(const $e of this._feature.geometry)me.push([new g.P($e[0],$e[1])]);return me}{const me=[];for(const $e of this._feature.geometry){const Ue=[];for(const De of $e)Ue.push(new g.P(De[0],De[1]));me.push(Ue)}return me}}toGeoJSON(me,$e,Ue){return ne.call(this,me,$e,Ue)}}(this._features[ke])}}(ae.features);let we=Ze(ve);return we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),{vectorTile:ve,rawData:we.buffer}})}loadData($){return g._(this,void 0,void 0,function*(){var N;(N=this._pendingRequest)===null||N===void 0||N.abort();const Q=!!($&&$.request&&$.request.collectResourceTiming)&&new g.bv($.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON($,this._pendingRequest),this._geoJSONIndex=$.cluster?new Ht(function({superclusterOptions:we,clusterProperties:ke}){if(!ke||!we)return we;const me={},$e={},Ue={accumulated:null,zoom:0},De={properties:null},Qe=Object.keys(ke);for(const St of Qe){const[Et,mr]=ke[St],Vt=g.bC(mr),gr=g.bC(typeof Et=="string"?[Et,["accumulated"],["get",St]]:Et);me[St]=Vt.value,$e[St]=gr.value}return we.map=St=>{De.properties=St;const Et={};for(const mr of Qe)Et[mr]=me[mr].evaluate(Ue,De);return Et},we.reduce=(St,Et)=>{De.properties=Et;for(const mr of Qe)Ue.accumulated=St[mr],St[mr]=$e[mr].evaluate(Ue,De)},we}($)).load((yield this._pendingData).features):(ae=yield this._pendingData,new Mn(ae,$.geojsonVtOptions)),this.loaded={};const ve={};if(Q){const we=Q.finish();we&&(ve.resourceTiming={},ve.resourceTiming[$.source]=JSON.parse(JSON.stringify(we)))}return ve}catch(ve){if(delete this._pendingRequest,g.bB(ve))return{abandoned:!0};throw ve}var ae})}getData(){return g._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile($){const N=this.loaded;return N&&N[$.uid]?super.reloadTile($):this.loadTile($)}loadAndProcessGeoJSON($,N){return g._(this,void 0,void 0,function*(){let Q=yield this.loadGeoJSON($,N);if(delete this._pendingRequest,typeof Q!="object")throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(te(Q,!0),$.filter){const ae=g.bC($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map(we=>`${we.key}: ${we.message}`).join(", "));Q={type:"FeatureCollection",features:Q.features.filter(we=>ae.value.evaluate({zoom:0},we))}}return Q})}loadGeoJSON($,N){return g._(this,void 0,void 0,function*(){const{promoteId:Q}=$;if($.request){const ae=yield g.h($.request,N);return this._dataUpdateable=bi(ae.data,Q)?Bi(ae.data,Q):void 0,ae.data}if(typeof $.data=="string")try{const ae=JSON.parse($.data);return this._dataUpdateable=bi(ae,Q)?Bi(ae,Q):void 0,ae}catch{throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`)}if(!$.dataDiff)throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${$.source}`);return function(ae,ve,we){var ke,me,$e,Ue;if(ve.removeAll&&ae.clear(),ve.remove)for(const De of ve.remove)ae.delete(De);if(ve.add)for(const De of ve.add){const Qe=Nt(De,we);Qe!=null&&ae.set(Qe,De)}if(ve.update)for(const De of ve.update){let Qe=ae.get(De.id);if(Qe==null)continue;const St=!De.removeAllProperties&&(((ke=De.removeProperties)===null||ke===void 0?void 0:ke.length)>0||((me=De.addOrUpdateProperties)===null||me===void 0?void 0:me.length)>0);if((De.newGeometry||De.removeAllProperties||St)&&(Qe=Object.assign({},Qe),ae.set(De.id,Qe),St&&(Qe.properties=Object.assign({},Qe.properties))),De.newGeometry&&(Qe.geometry=De.newGeometry),De.removeAllProperties)Qe.properties={};else if((($e=De.removeProperties)===null||$e===void 0?void 0:$e.length)>0)for(const Et of De.removeProperties)Object.prototype.hasOwnProperty.call(Qe.properties,Et)&&delete Qe.properties[Et];if(((Ue=De.addOrUpdateProperties)===null||Ue===void 0?void 0:Ue.length)>0)for(const{key:Et,value:mr}of De.addOrUpdateProperties)Qe.properties[Et]=mr}}(this._dataUpdateable,$.dataDiff,Q),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource($){return g._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom($){return this._geoJSONIndex.getClusterExpansionZoom($.clusterId)}getClusterChildren($){return this._geoJSONIndex.getChildren($.clusterId)}getClusterLeaves($){return this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset)}}class pr{constructor($){this.self=$,this.actor=new g.F($),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(N,Q)=>{if(this.externalWorkerSourceTypes[N])throw new Error(`Worker source with name "${N}" already registered.`);this.externalWorkerSourceTypes[N]=Q},this.self.addProtocol=g.bi,this.self.removeProtocol=g.bj,this.self.registerRTLTextPlugin=N=>{if(g.bD.isParsed())throw new Error("RTL text plugin already registered.");g.bD.setMethods(N)},this.actor.registerMessageHandler("LDT",(N,Q)=>this._getDEMWorkerSource(N,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RDT",(N,Q)=>g._(this,void 0,void 0,function*(){this._getDEMWorkerSource(N,Q.source).removeTile(Q)})),this.actor.registerMessageHandler("GCEZ",(N,Q)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(N,Q.type,Q.source).getClusterExpansionZoom(Q)})),this.actor.registerMessageHandler("GCC",(N,Q)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(N,Q.type,Q.source).getClusterChildren(Q)})),this.actor.registerMessageHandler("GCL",(N,Q)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(N,Q.type,Q.source).getClusterLeaves(Q)})),this.actor.registerMessageHandler("LD",(N,Q)=>this._getWorkerSource(N,Q.type,Q.source).loadData(Q)),this.actor.registerMessageHandler("GD",(N,Q)=>this._getWorkerSource(N,Q.type,Q.source).getData()),this.actor.registerMessageHandler("LT",(N,Q)=>this._getWorkerSource(N,Q.type,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RT",(N,Q)=>this._getWorkerSource(N,Q.type,Q.source).reloadTile(Q)),this.actor.registerMessageHandler("AT",(N,Q)=>this._getWorkerSource(N,Q.type,Q.source).abortTile(Q)),this.actor.registerMessageHandler("RMT",(N,Q)=>this._getWorkerSource(N,Q.type,Q.source).removeTile(Q)),this.actor.registerMessageHandler("RS",(N,Q)=>g._(this,void 0,void 0,function*(){if(!this.workerSources[N]||!this.workerSources[N][Q.type]||!this.workerSources[N][Q.type][Q.source])return;const ae=this.workerSources[N][Q.type][Q.source];delete this.workerSources[N][Q.type][Q.source],ae.removeSource!==void 0&&ae.removeSource(Q)})),this.actor.registerMessageHandler("RM",N=>g._(this,void 0,void 0,function*(){delete this.layerIndexes[N],delete this.availableImages[N],delete this.workerSources[N],delete this.demWorkerSources[N]})),this.actor.registerMessageHandler("SR",(N,Q)=>g._(this,void 0,void 0,function*(){this.referrer=Q})),this.actor.registerMessageHandler("SRPS",(N,Q)=>this._syncRTLPluginState(N,Q)),this.actor.registerMessageHandler("IS",(N,Q)=>g._(this,void 0,void 0,function*(){this.self.importScripts(Q)})),this.actor.registerMessageHandler("SI",(N,Q)=>this._setImages(N,Q)),this.actor.registerMessageHandler("UL",(N,Q)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(N).update(Q.layers,Q.removedIds)})),this.actor.registerMessageHandler("SL",(N,Q)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(N).replace(Q)}))}_setImages($,N){return g._(this,void 0,void 0,function*(){this.availableImages[$]=N;for(const Q in this.workerSources[$]){const ae=this.workerSources[$][Q];for(const ve in ae)ae[ve].availableImages=N}})}_syncRTLPluginState($,N){return g._(this,void 0,void 0,function*(){if(g.bD.isParsed())return g.bD.getState();if(N.pluginStatus!=="loading")return g.bD.setState(N),N;const Q=N.pluginURL;if(this.self.importScripts(Q),g.bD.isParsed()){const ae={pluginStatus:"loaded",pluginURL:Q};return g.bD.setState(ae),ae}throw g.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Q}`)})}_getAvailableImages($){let N=this.availableImages[$];return N||(N=[]),N}_getLayerIndex($){let N=this.layerIndexes[$];return N||(N=this.layerIndexes[$]=new u),N}_getWorkerSource($,N,Q){if(this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][N]||(this.workerSources[$][N]={}),!this.workerSources[$][N][Q]){const ae={sendAsync:(ve,we)=>(ve.targetMapId=$,this.actor.sendAsync(ve,we))};switch(N){case"vector":this.workerSources[$][N][Q]=new D(ae,this._getLayerIndex($),this._getAvailableImages($));break;case"geojson":this.workerSources[$][N][Q]=new Pt(ae,this._getLayerIndex($),this._getAvailableImages($));break;default:this.workerSources[$][N][Q]=new this.externalWorkerSourceTypes[N](ae,this._getLayerIndex($),this._getAvailableImages($))}}return this.workerSources[$][N][Q]}_getDEMWorkerSource($,N){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][N]||(this.demWorkerSources[$][N]=new A),this.demWorkerSources[$][N]}}return g.i(self)&&(self.worker=new pr(self)),pr}),h("index",["exports","./shared"],function(g,u){var k="4.7.1";let M,B;const D={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((r,a)=>{const d=requestAnimationFrame(r);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),a(u.c())})}),getImageData(_,r=0){return this.getImageCanvasContext(_).getImageData(-r,-r,_.width+2*r,_.height+2*r)},getImageCanvasContext(_){const r=window.document.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return r.width=_.width,r.height=_.height,a.drawImage(_,0,0,_.width,_.height),a},resolveURL:_=>(M||(M=document.createElement("a")),M.href=_,M.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class A{static testProp(r){if(!A.docStyle)return r[0];for(let a=0;a<r.length;a++)if(r[a]in A.docStyle)return r[a];return r[0]}static create(r,a,d){const p=window.document.createElement(r);return a!==void 0&&(p.className=a),d&&d.appendChild(p),p}static createNS(r,a){return window.document.createElementNS(r,a)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(r,a){r.style[A.transformProp]=a}static addEventListener(r,a,d,p={}){r.addEventListener(a,d,"passive"in p?p:p.capture)}static removeEventListener(r,a,d,p={}){r.removeEventListener(a,d,"passive"in p?p:p.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(r){const a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}static getPoint(r,a,d){const p=a.boundingClientRect;return new u.P((d.clientX-p.left)/a.x-r.clientLeft,(d.clientY-p.top)/a.y-r.clientTop)}static mousePos(r,a){const d=A.getScale(r);return A.getPoint(r,d,a)}static touchPos(r,a){const d=[],p=A.getScale(r);for(let y=0;y<a.length;y++)d.push(A.getPoint(r,p,a[y]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const Z={supported:!1,testSupport:function(_){!ne&&te&&(W?O(_):G=_)}};let G,te,ne=!1,W=!1;function O(_){const r=_.createTexture();_.bindTexture(_.TEXTURE_2D,r);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,te),_.isContextLost())return;Z.supported=!0}catch{}_.deleteTexture(r),ne=!0}var U;typeof document<"u"&&(te=document.createElement("img"),te.onload=()=>{G&&O(G),G=null,W=!0},te.onerror=()=>{ne=!0,G=null},te.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let r,a,d,p;_.resetRequestQueue=()=>{r=[],a=0,d=0,p={}},_.addThrottleControl=T=>{const E=d++;return p[E]=T,E},_.removeThrottleControl=T=>{delete p[T],w()},_.getImage=(T,E,R=!0)=>new Promise((L,H)=>{Z.supported&&(T.headers||(T.headers={}),T.headers.accept="image/webp,*/*"),u.e(T,{type:"image"}),r.push({abortController:E,requestParameters:T,supportImageRefresh:R,state:"queued",onError:ee=>{H(ee)},onSuccess:ee=>{L(ee)}}),w()});const y=T=>u._(this,void 0,void 0,function*(){T.state="running";const{requestParameters:E,supportImageRefresh:R,onError:L,onSuccess:H,abortController:ee}=T,re=R===!1&&!u.i(self)&&!u.g(E.url)&&(!E.headers||Object.keys(E.headers).reduce((pe,ye)=>pe&&ye==="accept",!0));a++;const le=re?C(E,ee):u.m(E,ee);try{const pe=yield le;delete T.abortController,T.state="completed",pe.data instanceof HTMLImageElement||u.b(pe.data)?H(pe):pe.data&&H({data:yield(de=pe.data,typeof createImageBitmap=="function"?u.d(de):u.f(de)),cacheControl:pe.cacheControl,expires:pe.expires})}catch(pe){delete T.abortController,L(pe)}finally{a--,w()}var de}),w=()=>{const T=(()=>{for(const E of Object.keys(p))if(p[E]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let E=a;E<T&&r.length>0;E++){const R=r.shift();R.abortController.signal.aborted?E--:y(R)}},C=(T,E)=>new Promise((R,L)=>{const H=new Image,ee=T.url,re=T.credentials;re&&re==="include"?H.crossOrigin="use-credentials":(re&&re==="same-origin"||!u.s(ee))&&(H.crossOrigin="anonymous"),E.signal.addEventListener("abort",()=>{H.src="",L(u.c())}),H.fetchPriority="high",H.onload=()=>{H.onerror=H.onload=null,R({data:H})},H.onerror=()=>{H.onerror=H.onload=null,E.signal.aborted||L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},H.src=ee})}(U||(U={})),U.resetRequestQueue();class K{constructor(r){this._transformRequestFn=r}transformRequest(r,a){return this._transformRequestFn&&this._transformRequestFn(r,a)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function he(_){var r=new u.A(3);return r[0]=_[0],r[1]=_[1],r[2]=_[2],r}var ce,fe=function(_,r,a){return _[0]=r[0]-a[0],_[1]=r[1]-a[1],_[2]=r[2]-a[2],_};ce=new u.A(3),u.A!=Float32Array&&(ce[0]=0,ce[1]=0,ce[2]=0);var ge=function(_){var r=_[0],a=_[1];return r*r+a*a};function Te(_){const r=[];if(typeof _=="string")r.push({id:"default",url:_});else if(_&&_.length>0){const a=[];for(const{id:d,url:p}of _){const y=`${d}${p}`;a.indexOf(y)===-1&&(a.push(y),r.push({id:d,url:p}))}}return r}function Ae(_,r,a){const d=_.split("?");return d[0]+=`${r}${a}`,d.join("?")}(function(){var _=new u.A(2);u.A!=Float32Array&&(_[0]=0,_[1]=0)})();class Re{constructor(r,a,d,p){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(a,p)}update(r,a,d){const{width:p,height:y}=r,w=!(this.size&&this.size[0]===p&&this.size[1]===y||d),{context:C}=this,{gl:T}=C;if(this.useMipmap=!!(a&&a.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!a||a.premultiply!==!1)),w)this.size=[p,y],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,r):T.texImage2D(T.TEXTURE_2D,0,this.format,p,y,0,this.format,T.UNSIGNED_BYTE,r.data);else{const{x:E,y:R}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?T.texSubImage2D(T.TEXTURE_2D,0,E,R,T.RGBA,T.UNSIGNED_BYTE,r):T.texSubImage2D(T.TEXTURE_2D,0,E,R,p,y,T.RGBA,T.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)}bind(r,a,d){const{context:p}=this,{gl:y}=p;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),r!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||r),this.filter=r),a!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function X(_){const{userImage:r}=_;return!!(r&&r.render&&r.render())&&(_.data.replace(new Uint8Array(r.data.buffer)),!0)}class xe extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:a,promiseResolve:d}of this.requestors)d(this._getImagesForIds(a));this.requestors=[]}}getImage(r){const a=this.images[r];if(a&&!a.data&&a.spriteData){const d=a.spriteData;a.data=new u.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),a.spriteData=null}return a}addImage(r,a){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,a)&&(this.images[r]=a)}_validate(r,a){let d=!0;const p=a.data||a.spriteData;return this._validateStretch(a.stretchX,p&&p.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(a.stretchY,p&&p.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(a.content,a)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,a){if(!r)return!0;let d=0;for(const p of r){if(p[0]<d||p[1]<p[0]||a<p[1])return!1;d=p[1]}return!0}_validateContent(r,a){if(!r)return!0;if(r.length!==4)return!1;const d=a.spriteData,p=d&&d.width||a.data.width,y=d&&d.height||a.data.height;return!(r[0]<0||p<r[0]||r[1]<0||y<r[1]||r[2]<0||p<r[2]||r[3]<0||y<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,a,d=!0){const p=this.getImage(r);if(d&&(p.data.width!==a.data.width||p.data.height!==a.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=p.version+1,this.images[r]=a,this.updatedImages[r]=!0}removeImage(r){const a=this.images[r];delete this.images[r],delete this.patterns[r],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((a,d)=>{let p=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(p=!1);this.isLoaded()||p?a(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:a})})}_getImagesForIds(r){const a={};for(const d of r){let p=this.getImage(d);p||(this.fire(new u.k("styleimagemissing",{id:d})),p=this.getImage(d)),p?a[d]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:u.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:r,height:a}=this.atlasImage;return{width:r,height:a}}getPattern(r){const a=this.patterns[r],d=this.getImage(r);if(!d)return null;if(a&&a.position.version===d.version)return a.position;if(a)a.position.version=d.version;else{const p={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new u.I(p,d);this.patterns[r]={bin:p,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const a=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Re(r,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const y in this.patterns)r.push(this.patterns[y].bin);const{w:a,h:d}=u.p(r),p=this.atlasImage;p.resize({width:a||1,height:d||1});for(const y in this.patterns){const{bin:w}=this.patterns[y],C=w.x+1,T=w.y+1,E=this.getImage(y).data,R=E.width,L=E.height;u.R.copy(E,p,{x:0,y:0},{x:C,y:T},{width:R,height:L}),u.R.copy(E,p,{x:0,y:L-1},{x:C,y:T-1},{width:R,height:1}),u.R.copy(E,p,{x:0,y:0},{x:C,y:T+L},{width:R,height:1}),u.R.copy(E,p,{x:R-1,y:0},{x:C-1,y:T},{width:1,height:L}),u.R.copy(E,p,{x:0,y:0},{x:C+R,y:T},{width:1,height:L})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const a of r){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const d=this.getImage(a);d||u.w(`Image with ID: "${a}" was not found`),X(d)&&this.updateImage(a,d)}}}const Ee=1e20;function Le(_,r,a,d,p,y,w,C,T){for(let E=r;E<r+d;E++)Be(_,a*y+E,y,p,w,C,T);for(let E=a;E<a+p;E++)Be(_,E*y+r,1,d,w,C,T)}function Be(_,r,a,d,p,y,w){y[0]=0,w[0]=-Ee,w[1]=Ee,p[0]=_[r];for(let C=1,T=0,E=0;C<d;C++){p[C]=_[r+C*a];const R=C*C;do{const L=y[T];E=(p[C]-p[L]+R-L*L)/(C-L)/2}while(E<=w[T]&&--T>-1);T++,y[T]=C,w[T]=E,w[T+1]=Ee}for(let C=0,T=0;C<d;C++){for(;w[T+1]<C;)T++;const E=y[T],R=C-E;_[r+C*a]=p[E]+R*R}}class Ze{constructor(r,a){this.requestManager=r,this.localIdeographFontFamily=a,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const a=[];for(const y in r)for(const w of r[y])a.push(this._getAndCacheGlyphsPromise(y,w));const d=yield Promise.all(a),p={};for(const{stack:y,id:w,glyph:C}of d)p[y]||(p[y]={}),p[y][w]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return p})}_getAndCacheGlyphsPromise(r,a){return u._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let p=d.glyphs[a];if(p!==void 0)return{stack:r,id:a,glyph:p};if(p=this._tinySDF(d,r,a),p)return d.glyphs[a]=p,{stack:r,id:a,glyph:p};const y=Math.floor(a/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:r,id:a,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){const C=Ze.loadGlyphRange(r,y,this.url,this.requestManager);d.requests[y]=C}const w=yield d.requests[y];for(const C in w)this._doesCharSupportLocalGlyph(+C)||(d.glyphs[+C]=w[+C]);return d.ranges[y]=!0,{stack:r,id:a,glyph:w[a]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,a,d){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(d))return;let y=r.tinySDF;if(!y){let C="400";/bold/i.test(a)?C="900":/medium/i.test(a)?C="500":/light/i.test(a)&&(C="200"),y=r.tinySDF=new Ze.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:C})}const w=y.draw(String.fromCharCode(d));return{id:d,bitmap:new u.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ze.loadGlyphRange=function(_,r,a,d){return u._(this,void 0,void 0,function*(){const p=256*r,y=p+255,w=d.transformRequest(a.replace("{fontstack}",_).replace("{range}",`${p}-${y}`),"Glyphs"),C=yield u.l(w,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${r}, ${p}-${y}`);const T={};for(const E of u.n(C.data))T[E.id]=E;return T})},Ze.TinySDF=class{constructor({fontSize:_=24,buffer:r=3,radius:a=8,cutoff:d=.25,fontFamily:p="sans-serif",fontWeight:y="normal",fontStyle:w="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=a;const C=this.size=_+4*r,T=this._createCanvas(C),E=this.ctx=T.getContext("2d",{willReadFrequently:!0});E.font=`${w} ${y} ${_}px ${p}`,E.textBaseline="alphabetic",E.textAlign="left",E.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(_){const r=document.createElement("canvas");return r.width=r.height=_,r}draw(_){const{width:r,actualBoundingBoxAscent:a,actualBoundingBoxDescent:d,actualBoundingBoxLeft:p,actualBoundingBoxRight:y}=this.ctx.measureText(_),w=Math.ceil(a),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-p))),T=Math.min(this.size-this.buffer,w+Math.ceil(d)),E=C+2*this.buffer,R=T+2*this.buffer,L=Math.max(E*R,0),H=new Uint8ClampedArray(L),ee={data:H,width:E,height:R,glyphWidth:C,glyphHeight:T,glyphTop:w,glyphLeft:0,glyphAdvance:r};if(C===0||T===0)return ee;const{ctx:re,buffer:le,gridInner:de,gridOuter:pe}=this;re.clearRect(le,le,C,T),re.fillText(_,le,le+w);const ye=re.getImageData(le,le,C,T);pe.fill(Ee,0,L),de.fill(0,0,L);for(let oe=0;oe<T;oe++)for(let be=0;be<C;be++){const Se=ye.data[4*(oe*C+be)+3]/255;if(Se===0)continue;const Me=(oe+le)*E+be+le;if(Se===1)pe[Me]=0,de[Me]=Ee;else{const Ve=.5-Se;pe[Me]=Ve>0?Ve*Ve:0,de[Me]=Ve<0?Ve*Ve:0}}Le(pe,0,0,E,R,E,this.f,this.v,this.z),Le(de,le,le,C,T,E,this.f,this.v,this.z);for(let oe=0;oe<L;oe++){const be=Math.sqrt(pe[oe])-Math.sqrt(de[oe]);H[oe]=Math.round(255-255*(be/this.radius+this.cutoff))}return ee}};class ze{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,a){return u.x(r.expression.evaluate(a))}interpolate(r,a,d){return{x:u.y.number(r.x,a.x,d),y:u.y.number(r.y,a.y,d),z:u.y.number(r.z,a.z,d)}}}let Fe;class Ge extends u.E{constructor(r){super(),Fe=Fe||new u.q({anchor:new u.D(u.v.light.anchor),position:new ze,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Fe),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,a={}){if(!this._validate(u.r,r,a))for(const d in r){const p=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,a,d){return(!d||d.validate!==!1)&&u.t(this,r.call(u.u,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Xe=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class ct extends u.E{constructor(r){super(),this._transitionable=new u.T(Xe),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(r,a={}){if(!this._validate(u.B,r,a)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in r){const p=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,a,d={}){return(d==null?void 0:d.validate)!==!1&&u.t(this,r.call(u.u,u.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Tt{constructor(r,a){this.width=r,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,a){const d=r.join(",")+String(a);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,a)),this.dashEntry[d]}getDashRanges(r,a,d){const p=[];let y=r.length%2==1?-r[r.length-1]*d:0,w=r[0]*d,C=!0;p.push({left:y,right:w,isDash:C,zeroLength:r[0]===0});let T=r[0];for(let E=1;E<r.length;E++){C=!C;const R=r[E];y=T*d,T+=R,w=T*d,p.push({left:y,right:w,isDash:C,zeroLength:R===0})}return p}addRoundDash(r,a,d){const p=a/2;for(let y=-d;y<=d;y++){const w=this.width*(this.nextRow+d+y);let C=0,T=r[C];for(let E=0;E<this.width;E++){E/T.right>1&&(T=r[++C]);const R=Math.abs(E-T.left),L=Math.abs(E-T.right),H=Math.min(R,L);let ee;const re=y/d*(p+1);if(T.isDash){const le=p-Math.abs(re);ee=Math.sqrt(H*H+le*le)}else ee=p-Math.sqrt(H*H+re*re);this.data[w+E]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(r){for(let C=r.length-1;C>=0;--C){const T=r[C],E=r[C+1];T.zeroLength?r.splice(C,1):E&&E.isDash===T.isDash&&(E.left=T.left,r.splice(C,1))}const a=r[0],d=r[r.length-1];a.isDash===d.isDash&&(a.left=d.left-this.width,d.right=a.right+this.width);const p=this.width*this.nextRow;let y=0,w=r[y];for(let C=0;C<this.width;C++){C/w.right>1&&(w=r[++y]);const T=Math.abs(C-w.left),E=Math.abs(C-w.right),R=Math.min(T,E);this.data[p+C]=Math.max(0,Math.min(255,(w.isDash?R:-R)+128))}}addDash(r,a){const d=a?7:0,p=2*d+1;if(this.nextRow+p>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let C=0;C<r.length;C++)y+=r[C];if(y!==0){const C=this.width/y,T=this.getDashRanges(r,this.width,C);a?this.addRoundDash(T,C,d):this.addRegularDash(T)}const w={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=p,this.dirty=!0,w}bind(r){const a=r.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const Ht="maplibre_preloaded_worker_pool";class er{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<er.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ht]}numActive(){return Object.keys(this.active).length}}const rr=Math.floor(D.hardwareConcurrency/2);let Ye,Jt;function zt(){return Ye||(Ye=new er),Ye}er.workerCount=u.C(globalThis)?Math.max(Math.min(rr,3),1):1;class ht{constructor(r,a){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=a;const d=this.workerPool.acquire(a);for(let p=0;p<d.length;p++){const y=new u.F(d[p],a);y.name=`Worker ${p}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,a){const d=[];for(const p of this.actors)d.push(p.sendAsync({type:r,data:a}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,a){for(const d of this.actors)d.registerMessageHandler(r,a)}}function Rt(){return Jt||(Jt=new ht(zt(),u.G),Jt.registerMessageHandler("GR",(_,r,a)=>u.m(r,a))),Jt}function Mt(_,r){const a=u.H();return u.J(a,a,[1,1,0]),u.K(a,a,[.5*_.width,.5*_.height,1]),u.L(a,a,_.calculatePosMatrix(r.toUnwrapped()))}function Qt(_,r,a,d,p,y){const w=function(L,H,ee){if(L)for(const re of L){const le=H[re];if(le&&le.source===ee&&le.type==="fill-extrusion")return!0}else for(const re in H){const le=H[re];if(le.source===ee&&le.type==="fill-extrusion")return!0}return!1}(p&&p.layers,r,_.id),C=y.maxPitchScaleFactor(),T=_.tilesIn(d,C,w);T.sort(kt);const E=[];for(const L of T)E.push({wrappedTileID:L.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(r,a,_._state,L.queryGeometry,L.cameraQueryGeometry,L.scale,p,y,C,Mt(_.transform,L.tileID))});const R=function(L){const H={},ee={};for(const re of L){const le=re.queryResults,de=re.wrappedTileID,pe=ee[de]=ee[de]||{};for(const ye in le){const oe=le[ye],be=pe[ye]=pe[ye]||{},Se=H[ye]=H[ye]||[];for(const Me of oe)be[Me.featureIndex]||(be[Me.featureIndex]=!0,Se.push(Me))}}return H}(E);for(const L in R)R[L].forEach(H=>{const ee=H.feature,re=_.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=re});return R}function kt(_,r){const a=_.tileID,d=r.tileID;return a.overscaledZ-d.overscaledZ||a.canonical.y-d.canonical.y||a.wrap-d.wrap||a.canonical.x-d.canonical.x}function Zt(_,r,a){return u._(this,void 0,void 0,function*(){let d=_;if(_.url?d=(yield u.h(r.transformRequest(_.url,"Source"),a)).data:yield D.frameAsync(a),!d)return null;const p=u.M(u.e(d,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(p.vectorLayerIds=d.vector_layers.map(y=>y.id)),p})}class Ie{constructor(r,a){r&&(a?this.setSouthWest(r).setNorthEast(a):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}extend(r){const a=this._sw,d=this._ne;let p,y;if(r instanceof u.N)p=r,y=r;else{if(!(r instanceof Ie))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Ie.convert(r)):this.extend(u.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.N.convert(r)):this;if(p=r._sw,y=r._ne,!p||!y)return this}return a||d?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new u.N(p.lng,p.lat),this._ne=new u.N(y.lng,y.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:a,lat:d}=u.N.convert(r);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&p}static convert(r){return r instanceof Ie?r:r&&new Ie(r)}static fromLngLat(r,a=0){const d=360*a/40075017,p=d/Math.cos(Math.PI/180*r.lat);return new Ie(new u.N(r.lng-p,r.lat-d),new u.N(r.lng+p,r.lat+d))}adjustAntiMeridian(){const r=new u.N(this._sw.lng,this._sw.lat),a=new u.N(this._ne.lng,this._ne.lat);return new Ie(r,r.lng>a.lng?new u.N(a.lng+360,a.lat):a)}}class hr{constructor(r,a,d){this.bounds=Ie.convert(this.validateBounds(r)),this.minzoom=a||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const a=Math.pow(2,r.z),d=Math.floor(u.O(this.bounds.getWest())*a),p=Math.floor(u.Q(this.bounds.getNorth())*a),y=Math.ceil(u.O(this.bounds.getEast())*a),w=Math.ceil(u.Q(this.bounds.getSouth())*a);return r.x>=d&&r.x<y&&r.y>=p&&r.y<w}}class _r extends u.E{constructor(r,a,d,p){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(a,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Zt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new hr(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(a,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((y,w)=>{r.reloadPromise={resolve:y,reject:w}})}else r.actor=this.dispatcher.getActor(),p="LT";r.abortController=new AbortController;try{const y=yield r.actor.sendAsync({type:p,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,y)}catch(y){if(delete r.abortController,r.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,a){if(a&&a.resourceTiming&&(r.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&r.setExpiryData(a),r.loadVectorData(a,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Bt extends u.E{constructor(r,a,d,p){super(),this.id=r,this.dispatcher=d,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},a),u.e(this,u.M(a,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Zt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new hr(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield U.getImage(this.map._requestManager.transformRequest(a,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const p=this.map.painter.context,y=p.gl,w=d.data;r.texture=this.map.painter.getTileTexture(w.width),r.texture?r.texture.update(w,{useMipmap:!0}):(r.texture=new Re(p,w,y.RGBA,{useMipmap:!0}),r.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class or extends Bt{constructor(r,a,d,p){super(r,a,d,p),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(a,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const p=yield U.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){const y=p.data;this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const w=u.b(y)&&u.U()?y:yield this.readImageNow(y),C={type:this.type,uid:r.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const T=yield r.actor.sendAsync({type:"LDT",data:C});r.dem=T,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const a=r.width+2,d=r.height+2;try{return new u.R({width:a,height:d},yield u.W(r,-1,-1,a,d))}catch{}}return D.getImageData(r,1)})}_getNeighboringTiles(r){const a=r.canonical,d=Math.pow(2,a.z),p=(a.x-1+d)%d,y=a.x===0?r.wrap-1:r.wrap,w=(a.x+1+d)%d,C=a.x+1===d?r.wrap+1:r.wrap,T={};return T[new u.S(r.overscaledZ,y,a.z,p,a.y).key]={backfilled:!1},T[new u.S(r.overscaledZ,C,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(T[new u.S(r.overscaledZ,y,a.z,p,a.y-1).key]={backfilled:!1},T[new u.S(r.overscaledZ,r.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},T[new u.S(r.overscaledZ,C,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<d&&(T[new u.S(r.overscaledZ,y,a.z,p,a.y+1).key]={backfilled:!1},T[new u.S(r.overscaledZ,r.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},T[new u.S(r.overscaledZ,C,a.z,w,a.y+1).key]={backfilled:!1}),T}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Sr extends u.E{constructor(r,a,d,p){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(p),this._data=a.data,this._options=u.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const y=u.X/this.tileSize;a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*y,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*y,extent:u.X,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:u.X,radius:(a.clusterRadius||50)*y,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,a,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:a,offset:d}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const a=u.e({type:this.type},this.workerOptions);r?a.dataDiff=r:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(D.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let p=null;d.resourceTiming&&d.resourceTiming[this.id]&&(p=d.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&u.e(y,{resourceTiming:p}),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const p=yield this.actor.sendAsync({type:a,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(p,this.map.painter,a==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var bt=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _n extends u.E{constructor(r,a,d,p){super(),this.id=r,this.dispatcher=d,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=a}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield U.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,r&&(this.coordinates=r),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new u.j(a))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const a=r.map(u.Z.fromLngLat);this.tileID=function(p){let y=1/0,w=1/0,C=-1/0,T=-1/0;for(const H of p)y=Math.min(y,H.x),w=Math.min(w,H.y),C=Math.max(C,H.x),T=Math.max(T,H.y);const E=Math.max(C-y,T-w),R=Math.max(0,Math.floor(-Math.log(E)/Math.LN2)),L=Math.pow(2,R);return new u.a1(R,Math.floor((y+C)/2*L),Math.floor((w+T)/2*L))}(a),this.minzoom=this.maxzoom=this.tileID.z;const d=a.map(p=>this.tileID.getTilePoint(p)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,u.X,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,u.X),this._boundsArray.emplaceBack(d[2].x,d[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bt.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Re(r,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ir extends _n{constructor(r,a,d,p){super(r,a,d,p),this.roundZoom=!0,this.type="video",this.options=a}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const a of r.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield u.a3(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new u.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const a=this.video.seekable;r<a.start(0)||r>a.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bt.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new Re(r,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class un extends _n{constructor(r,a,d,p){super(r,a,d,p),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(w=>typeof w!="number"))||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,bt.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Re(a,this.canvas,d.RGBA,{premultiply:!0});let p=!1;for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const En={},Fn=_=>{switch(_){case"geojson":return Sr;case"image":return _n;case"raster":return Bt;case"raster-dem":return or;case"vector":return _r;case"video":return Ir;case"canvas":return un}return En[_]},qe="RTLPluginLoaded";class dn extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Rt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(a,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=D.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(qe))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let dr=null;function Ft(){return dr||(dr=new dn),dr}class Nr{constructor(r,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const a=r+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,a,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(p,y){const w={};if(!y)return w;for(const C of p){const T=C.layerIds.map(E=>y.getLayer(E)).filter(Boolean);if(T.length!==0){C.layers=T,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(E=>T.filter(R=>R.id===E)[0]));for(const E of T)w[E.id]=C}}return w}(r.buckets,a.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const y=this.buckets[p];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const y=this.buckets[p];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,Ft().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const y=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(p).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const p=this.buckets[d];p.uploadPending()&&p.upload(r)}const a=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Re(r,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Re(r,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,a,d,p,y,w,C,T,E,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:y,scale:w,tileSize:this.tileSize,pixelPosMatrix:R,transform:T,params:C,queryPadding:this.queryPadding*E},r,a,d):{}}querySourceFeatures(r,a){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const p=d.loadVTLayers(),y=a&&a.sourceLayer?a.sourceLayer:"",w=p._geojsonTileLayer||p[y];if(!w)return;const C=u.a7(a&&a.filter),{z:T,x:E,y:R}=this.tileID.canonical,L={z:T,x:E,y:R};for(let H=0;H<w.length;H++){const ee=w.feature(H);if(C.needGeometry){const de=u.a8(ee,!0);if(!C.filter(new u.z(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!C.filter(new u.z(this.tileID.overscaledZ),ee))continue;const re=d.getId(ee,y),le=new u.a9(ee,T,E,R,re);le.tile=L,r.push(le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const a=this.expirationTime;if(r.cacheControl){const d=u.aa(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let p=!1;if(this.expirationTime>d)p=!1;else if(a)if(this.expirationTime<a)p=!0;else{const y=this.expirationTime-a;y?this.expirationTime=d+Math.max(y,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!a.style.hasLayer(p))continue;const y=this.buckets[p],w=y.layers[0].sourceLayer||"_geojsonTileLayer",C=d[w],T=r[w];if(!C||!T||Object.keys(T).length===0)continue;y.update(T,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const E=a&&a.style&&a.style.getLayer(p);E&&(this.queryPadding=Math.max(this.queryPadding,E.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=D.now()+r}setDependencies(r,a){const d={};for(const p of a)d[p]=!0;this.dependencies[r]=d}hasDependency(r,a){for(const d of r){const p=this.dependencies[d];if(p){for(const y of a)if(p[y])return!0}}return!1}}class He{constructor(r,a){this.max=r,this.onRemove=a,this.reset()}reset(){for(const r in this.data)for(const a of this.data[r])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(r,a,d){const p=r.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const y={value:a,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},d)),this.data[p].push(y),this.order.push(p),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const a=this.data[r].shift();return a.timeout&&clearTimeout(a.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),a.value}getByKey(r){const a=this.data[r];return a?a[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,a){if(!this.has(r))return this;const d=r.wrapped().key,p=a===void 0?0:this.data[d].indexOf(a),y=this.data[d][p];return this.data[d].splice(p,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(r){const a=[];for(const d in this.data)for(const p of this.data[d])r(p.value)||a.push(p);for(const d of a)this.remove(d.value.tileID,d)}}class It{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,a,d){const p=String(a);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][p]=this.stateChanges[r][p]||{},u.e(this.stateChanges[r][p],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const y in this.state[r])y!==p&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][p]===null){this.deletedStates[r][p]={};for(const y in this.state[r][p])d[y]||(this.deletedStates[r][p][y]=null)}else for(const y in d)this.deletedStates[r]&&this.deletedStates[r][p]&&this.deletedStates[r][p][y]===null&&delete this.deletedStates[r][p][y]}removeFeatureState(r,a,d){if(this.deletedStates[r]===null)return;const p=String(a);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&a!==void 0)this.deletedStates[r][p]!==null&&(this.deletedStates[r][p]=this.deletedStates[r][p]||{},this.deletedStates[r][p][d]=null);else if(a!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][p])for(d in this.deletedStates[r][p]={},this.stateChanges[r][p])this.deletedStates[r][p][d]=null;else this.deletedStates[r][p]=null;else this.deletedStates[r]=null}getState(r,a){const d=String(a),p=u.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const y=this.deletedStates[r][a];if(y===null)return{};for(const w in y)delete p[w]}return p}initializeTileState(r,a){r.setFeatureState(this.state,a)}coalesceChanges(r,a){const d={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const y={};for(const w in this.stateChanges[p])this.state[p][w]||(this.state[p][w]={}),u.e(this.state[p][w],this.stateChanges[p][w]),y[w]=this.state[p][w];d[p]=y}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const y={};if(this.deletedStates[p]===null)for(const w in this.state[p])y[w]={},this.state[p][w]={};else for(const w in this.deletedStates[p]){if(this.deletedStates[p][w]===null)this.state[p][w]={};else for(const C of Object.keys(this.deletedStates[p][w]))delete this.state[p][w][C];y[w]=this.state[p][w]}d[p]=d[p]||{},u.e(d[p],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const p in r)r[p].setFeatureState(d,a)}}class Lt extends u.E{constructor(r,a,d){super(),this.id=r,this.dispatcher=d,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,y,w,C)=>{const T=new(Fn(y.type))(p,y,w,C);if(T.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${T.id}`);return T})(r,a,d,this),this._tiles={},this._cache=new He(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new It,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const a=this._tiles[r];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,a,d){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,a,d)}catch(p){r.state="errored",p.status!==404?this._source.fire(new u.j(p,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const d=this._tiles[a];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Mn).map(r=>r.key)}getRenderableIds(r){const a=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&a.push(this._tiles[d]);return r?a.sort((d,p)=>{const y=d.tileID,w=p.tileID,C=new u.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),T=new u.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-w.overscaledZ||T.y-C.y||T.x-C.x}).map(d=>d.tileID.key):a.map(d=>d.tileID).sort(Mn).map(d=>d.key)}hasRenderableParent(r){const a=this.findLoadedParent(r,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(r,a){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(a||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,a){return u._(this,void 0,void 0,function*(){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=a),yield this._loadTile(d,r,a))})}_tileLoaded(r,a,d){r.timeAdded=D.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(a,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const a=this.getRenderableIds();for(let p=0;p<a.length;p++){const y=a[p];if(r.neighboringTiles&&r.neighboringTiles[y]){const w=this.getTileByID(y);d(r,w),d(w,r)}}function d(p,y){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let w=y.tileID.canonical.x-p.tileID.canonical.x;const C=y.tileID.canonical.y-p.tileID.canonical.y,T=Math.pow(2,p.tileID.canonical.z),E=y.tileID.key;w===0&&C===0||Math.abs(C)>1||(Math.abs(w)>1&&(Math.abs(w+T)===1?w+=T:Math.abs(w-T)===1&&(w-=T)),y.dem&&p.dem&&(p.dem.backfillBorder(y.dem,w,C),p.neighboringTiles&&p.neighboringTiles[E]&&(p.neighboringTiles[E].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,a,d,p){for(const y in this._tiles){let w=this._tiles[y];if(p[y]||!w.hasData()||w.tileID.overscaledZ<=a||w.tileID.overscaledZ>d)continue;let C=w.tileID;for(;w&&w.tileID.overscaledZ>a+1;){const E=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[E.key],w&&w.hasData()&&(C=E)}let T=C;for(;T.overscaledZ>a;)if(T=T.scaledTo(T.overscaledZ-1),r[T.key]){p[C.key]=C;break}}}findLoadedParent(r,a){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=a?d:null}for(let d=r.overscaledZ-1;d>=a;d--){const p=r.scaledTo(d),y=this._getLoadedTile(p);if(y)return y}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const a=this._tiles[r.key];return a&&a.hasData()?a:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const a=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,p=Math.floor(a*d*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(y)}handleWrapJump(r){const a=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,a){const d={};for(const p in this._tiles){const y=this._tiles[p];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+a),d[y.tileID.key]=y}this._tiles=d;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(r,a,d,p,y,w){const C={},T={},E=Object.keys(r),R=D.now();for(const L of E){const H=r[L],ee=this._tiles[L];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=R)continue;const re=this.findLoadedParent(H,a),le=this.findLoadedSibling(H),de=re||le||null;de&&(this._addTile(de.tileID),C[de.tileID.key]=de.tileID),T[L]=H}this._retainLoadedChildren(T,p,d,r);for(const L in C)r[L]||(this._coveredTiles[L]=!0,r[L]=C[L]);if(w){const L={},H={};for(const ee of y)this._tiles[ee.key].hasData()?L[ee.key]=ee:H[ee.key]=ee;for(const ee in H){const re=H[ee].children(this._source.maxzoom);this._tiles[re[0].key]&&this._tiles[re[1].key]&&this._tiles[re[2].key]&&this._tiles[re[3].key]&&(L[re[0].key]=r[re[0].key]=re[0],L[re[1].key]=r[re[1].key]=re[1],L[re[2].key]=r[re[2].key]=re[2],L[re[3].key]=r[re[3].key]=re[3],delete H[ee])}for(const ee in H){const re=H[ee],le=this.findLoadedParent(re,this._source.minzoom),de=this.findLoadedSibling(re),pe=le||de||null;if(pe){L[pe.tileID.key]=r[pe.tileID.key]=pe.tileID;for(const ye in L)L[ye].isChildOf(pe.tileID)&&delete L[ye]}}for(const ee in this._tiles)L[ee]||(this._coveredTiles[ee]=!0)}}update(r,a){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=a,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new u.S(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(d=d.filter(R=>this._source.hasTile(R)))):d=[];const p=r.coveringZoomLevel(this._source),y=Math.max(p-Lt.maxOverzooming,this._source.minzoom),w=Math.max(p+Lt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const L of d)if(L.canonical.z>this._source.minzoom){const H=L.scaledTo(L.canonical.z-1);R[H.key]=H;const ee=L.scaledTo(Math.max(this._source.minzoom,Math.min(L.canonical.z,5)));R[ee.key]=ee}d=d.concat(Object.values(R))}const C=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=this._updateRetainedTiles(d,p);si(this._source.type)&&this._updateCoveredAndRetainedTiles(T,y,w,p,d,a);for(const R in T)this._tiles[R].clearFadeHold();const E=u.ab(this._tiles,T);for(const R of E){const L=this._tiles[R];L.hasSymbolBuckets&&!L.holdingForFade()?L.setHoldDuration(this.map._fadeDuration):L.hasSymbolBuckets&&!L.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,a){var d;const p={},y={},w=Math.max(a-Lt.maxOverzooming,this._source.minzoom),C=Math.max(a+Lt.maxUnderzooming,this._source.minzoom),T={};for(const E of r){const R=this._addTile(E);p[E.key]=E,R.hasData()||a<this._source.maxzoom&&(T[E.key]=E)}this._retainLoadedChildren(T,a,C,p);for(const E of r){let R=this._tiles[E.key];if(R.hasData())continue;if(a+1>this._source.maxzoom){const H=E.children(this._source.maxzoom)[0],ee=this.getTile(H);if(ee&&ee.hasData()){p[H.key]=H;continue}}else{const H=E.children(this._source.maxzoom);if(p[H[0].key]&&p[H[1].key]&&p[H[2].key]&&p[H[3].key])continue}let L=R.wasRequested();for(let H=E.overscaledZ-1;H>=w;--H){const ee=E.scaledTo(H);if(y[ee.key])break;if(y[ee.key]=!0,R=this.getTile(ee),!R&&L&&(R=this._addTile(ee)),R){const re=R.hasData();if((re||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||L)&&(p[ee.key]=ee),L=R.wasRequested(),re)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const a=[];let d,p=this._tiles[r].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){d=this._loadedParentTiles[p.key];break}a.push(p.key);const y=p.scaledTo(p.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;p=y}for(const y of a)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const a=this._tiles[r].tileID,d=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=d}}_addTile(r){let a=this._tiles[r.key];if(a)return a;a=this._cache.getAndRemove(r),a&&(this._setTileReloadTimer(r.key,a),a.tileID=r,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,a)));const d=a;return a||(a=new Nr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(a,r.key,a.state)),a.uses++,this._tiles[r.key]=a,d||this._source.fire(new u.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(r,a){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=a.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const a=this._tiles[r];a&&(a.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(r){const a=r.sourceDataType;r.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&a==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,a,d){const p=[],y=this.transform;if(!y)return p;const w=d?y.getCameraQueryGeometry(r):r,C=r.map(re=>y.pointCoordinate(re,this.terrain)),T=w.map(re=>y.pointCoordinate(re,this.terrain)),E=this.getIds();let R=1/0,L=1/0,H=-1/0,ee=-1/0;for(const re of T)R=Math.min(R,re.x),L=Math.min(L,re.y),H=Math.max(H,re.x),ee=Math.max(ee,re.y);for(let re=0;re<E.length;re++){const le=this._tiles[E[re]];if(le.holdingForFade())continue;const de=le.tileID,pe=Math.pow(2,y.zoom-le.tileID.overscaledZ),ye=a*le.queryPadding*u.X/le.tileSize/pe,oe=[de.getTilePoint(new u.Z(R,L)),de.getTilePoint(new u.Z(H,ee))];if(oe[0].x-ye<u.X&&oe[0].y-ye<u.X&&oe[1].x+ye>=0&&oe[1].y+ye>=0){const be=C.map(Me=>de.getTilePoint(Me)),Se=T.map(Me=>de.getTilePoint(Me));p.push({tile:le,tileID:de,queryGeometry:be,cameraQueryGeometry:Se,scale:pe})}}return p}getVisibleCoordinates(r){const a=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of a)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(si(this._source.type)){const r=D.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=r)return!0}return!1}setFeatureState(r,a,d){this._state.updateState(r=r||"_geojsonTileLayer",a,d)}removeFeatureState(r,a,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",a,d)}getFeatureState(r,a){return this._state.getState(r=r||"_geojsonTileLayer",a)}setDependencies(r,a,d){const p=this._tiles[r];p&&p.setDependencies(a,d)}reloadTilesForDependencies(r,a){for(const d in this._tiles)this._tiles[d].hasDependency(r,a)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,a))}}function Mn(_,r){const a=Math.abs(2*_.wrap)-+(_.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return _.overscaledZ-r.overscaledZ||d-a||r.canonical.y-_.canonical.y||r.canonical.x-_.canonical.x}function si(_){return _==="raster"||_==="image"||_==="video"}Lt.maxOverzooming=10,Lt.maxUnderzooming=3;class Nt{constructor(r,a){this.reset(r,a)}reset(r,a){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let a=1,d=this._distances[a];const p=r*this.paddedLength+this.padding;for(;d<p&&a<this._distances.length;)d=this._distances[++a];const y=a-1,w=this._distances[y],C=d-w,T=C>0?(p-w)/C:0;return this.points[y].mult(1-T).add(this.points[a].mult(T))}}function bi(_,r){let a=!0;return _==="always"||_!=="never"&&r!=="never"||(a=!1),a}class Bi{constructor(r,a,d){const p=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(a/d);for(let w=0;w<this.xCellCount*this.yCellCount;w++)p.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=a,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,a,d,p,y){this._forEachCell(a,d,p,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(y)}insertCircle(r,a,d,p){this._forEachCell(a-p,d-p,a+p,d+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(a),this.circles.push(d),this.circles.push(p)}_insertBoxCell(r,a,d,p,y,w){this.boxCells[y].push(w)}_insertCircleCell(r,a,d,p,y,w){this.circleCells[y].push(w)}_query(r,a,d,p,y,w,C){if(d<0||r>this.width||p<0||a>this.height)return[];const T=[];if(r<=0&&a<=0&&this.width<=d&&this.height<=p){if(y)return[{key:null,x1:r,y1:a,x2:d,y2:p}];for(let E=0;E<this.boxKeys.length;E++)T.push({key:this.boxKeys[E],x1:this.bboxes[4*E],y1:this.bboxes[4*E+1],x2:this.bboxes[4*E+2],y2:this.bboxes[4*E+3]});for(let E=0;E<this.circleKeys.length;E++){const R=this.circles[3*E],L=this.circles[3*E+1],H=this.circles[3*E+2];T.push({key:this.circleKeys[E],x1:R-H,y1:L-H,x2:R+H,y2:L+H})}}else this._forEachCell(r,a,d,p,this._queryCell,T,{hitTest:y,overlapMode:w,seenUids:{box:{},circle:{}}},C);return T}query(r,a,d,p){return this._query(r,a,d,p,!1,null)}hitTest(r,a,d,p,y,w){return this._query(r,a,d,p,!0,y,w).length>0}hitTestCircle(r,a,d,p,y){const w=r-d,C=r+d,T=a-d,E=a+d;if(C<0||w>this.width||E<0||T>this.height)return!1;const R=[];return this._forEachCell(w,T,C,E,this._queryCellCircle,R,{hitTest:!0,overlapMode:p,circle:{x:r,y:a,radius:d},seenUids:{box:{},circle:{}}},y),R.length>0}_queryCell(r,a,d,p,y,w,C,T){const{seenUids:E,hitTest:R,overlapMode:L}=C,H=this.boxCells[y];if(H!==null){const re=this.bboxes;for(const le of H)if(!E.box[le]){E.box[le]=!0;const de=4*le,pe=this.boxKeys[le];if(r<=re[de+2]&&a<=re[de+3]&&d>=re[de+0]&&p>=re[de+1]&&(!T||T(pe))&&(!R||!bi(L,pe.overlapMode))&&(w.push({key:pe,x1:re[de],y1:re[de+1],x2:re[de+2],y2:re[de+3]}),R))return!0}}const ee=this.circleCells[y];if(ee!==null){const re=this.circles;for(const le of ee)if(!E.circle[le]){E.circle[le]=!0;const de=3*le,pe=this.circleKeys[le];if(this._circleAndRectCollide(re[de],re[de+1],re[de+2],r,a,d,p)&&(!T||T(pe))&&(!R||!bi(L,pe.overlapMode))){const ye=re[de],oe=re[de+1],be=re[de+2];if(w.push({key:pe,x1:ye-be,y1:oe-be,x2:ye+be,y2:oe+be}),R)return!0}}}return!1}_queryCellCircle(r,a,d,p,y,w,C,T){const{circle:E,seenUids:R,overlapMode:L}=C,H=this.boxCells[y];if(H!==null){const re=this.bboxes;for(const le of H)if(!R.box[le]){R.box[le]=!0;const de=4*le,pe=this.boxKeys[le];if(this._circleAndRectCollide(E.x,E.y,E.radius,re[de+0],re[de+1],re[de+2],re[de+3])&&(!T||T(pe))&&!bi(L,pe.overlapMode))return w.push(!0),!0}}const ee=this.circleCells[y];if(ee!==null){const re=this.circles;for(const le of ee)if(!R.circle[le]){R.circle[le]=!0;const de=3*le,pe=this.circleKeys[le];if(this._circlesCollide(re[de],re[de+1],re[de+2],E.x,E.y,E.radius)&&(!T||T(pe))&&!bi(L,pe.overlapMode))return w.push(!0),!0}}}_forEachCell(r,a,d,p,y,w,C,T){const E=this._convertToXCellCoord(r),R=this._convertToYCellCoord(a),L=this._convertToXCellCoord(d),H=this._convertToYCellCoord(p);for(let ee=E;ee<=L;ee++)for(let re=R;re<=H;re++)if(y.call(this,r,a,d,p,this.xCellCount*re+ee,w,C,T))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,a,d,p,y,w){const C=p-r,T=y-a,E=d+w;return E*E>C*C+T*T}_circleAndRectCollide(r,a,d,p,y,w,C){const T=(w-p)/2,E=Math.abs(r-(p+T));if(E>T+d)return!1;const R=(C-y)/2,L=Math.abs(a-(y+R));if(L>R+d)return!1;if(E<=T||L<=R)return!0;const H=E-T,ee=L-R;return H*H+ee*ee<=d*d}}function Pt(_,r,a,d,p){const y=u.H();return r?(u.K(y,y,[1/p,1/p,1]),a||u.ad(y,y,d.angle)):u.L(y,d.labelPlaneMatrix,_),y}function pr(_,r,a,d,p){if(r){const y=u.ae(_);return u.K(y,y,[p,p,1]),a||u.ad(y,y,-d.angle),y}return d.glCoordMatrix}function ie(_,r,a,d){let p;d?(p=[_,r,d(_,r),1],u.af(p,p,a)):(p=[_,r,0,1],mr(p,p,a));const y=p[3];return{point:new u.P(p[0]/y,p[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function $(_,r){return .5+_/r*.5}function N(_,r){return _.x>=-r[0]&&_.x<=r[0]&&_.y>=-r[1]&&_.y<=r[1]}function Q(_,r,a,d,p,y,w,C,T,E,R,L,H,ee,re){const le=d?_.textSizeData:_.iconSizeData,de=u.ag(le,a.transform.zoom),pe=[256/a.width*2+1,256/a.height*2+1],ye=d?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;ye.clear();const oe=_.lineVertexArray,be=d?_.text.placedSymbolArray:_.icon.placedSymbolArray,Se=a.transform.width/a.transform.height;let Me=!1;for(let Ve=0;Ve<be.length;Ve++){const Ke=be.get(Ve);if(Ke.hidden||Ke.writingMode===u.ah.vertical&&!Me){Et(Ke.numGlyphs,ye);continue}Me=!1;const ot=ie(Ke.anchorX,Ke.anchorY,r,re);if(!N(ot.point,pe)){Et(Ke.numGlyphs,ye);continue}const dt=$(a.transform.cameraToCenterDistance,ot.signedDistanceFromCamera),tt=u.ai(le,de,Ke),et=w?tt/dt:tt*dt,yt={getElevation:re,labelPlaneMatrix:p,lineVertexArray:oe,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:E,tileAnchorPoint:new u.P(Ke.anchorX,Ke.anchorY),unwrappedTileID:R,width:L,height:H,translation:ee},jt=we(yt,Ke,et,!1,C,r,y,_.glyphOffsetArray,ye,Se,T);Me=jt.useVertical,(jt.notEnoughRoom||Me||jt.needsFlipping&&we(yt,Ke,et,!0,C,r,y,_.glyphOffsetArray,ye,Se,T).notEnoughRoom)&&Et(Ke.numGlyphs,ye)}d?_.text.dynamicLayoutVertexBuffer.updateData(ye):_.icon.dynamicLayoutVertexBuffer.updateData(ye)}function ae(_,r,a,d,p,y,w,C){const T=y.glyphStartIndex+y.numGlyphs,E=y.lineStartIndex,R=y.lineStartIndex+y.lineLength,L=r.getoffsetX(y.glyphStartIndex),H=r.getoffsetX(T-1),ee=Qe(_*L,a,d,p,y.segment,E,R,C,w);if(!ee)return null;const re=Qe(_*H,a,d,p,y.segment,E,R,C,w);return re?C.projectionCache.anyProjectionOccluded?null:{first:ee,last:re}:null}function ve(_,r,a,d){return _===u.ah.horizontal&&Math.abs(a.y-r.y)>Math.abs(a.x-r.x)*d?{useVertical:!0}:(_===u.ah.vertical?r.y<a.y:r.x>a.x)?{needsFlipping:!0}:null}function we(_,r,a,d,p,y,w,C,T,E,R){const L=a/24,H=r.lineOffsetX*L,ee=r.lineOffsetY*L;let re;if(r.numGlyphs>1){const le=r.glyphStartIndex+r.numGlyphs,de=r.lineStartIndex,pe=r.lineStartIndex+r.lineLength,ye=ae(L,C,H,ee,d,r,R,_);if(!ye)return{notEnoughRoom:!0};const oe=ie(ye.first.point.x,ye.first.point.y,w,_.getElevation).point,be=ie(ye.last.point.x,ye.last.point.y,w,_.getElevation).point;if(p&&!d){const Se=ve(r.writingMode,oe,be,E);if(Se)return Se}re=[ye.first];for(let Se=r.glyphStartIndex+1;Se<le-1;Se++)re.push(Qe(L*C.getoffsetX(Se),H,ee,d,r.segment,de,pe,_,R));re.push(ye.last)}else{if(p&&!d){const de=ie(_.tileAnchorPoint.x,_.tileAnchorPoint.y,y,_.getElevation).point,pe=r.lineStartIndex+r.segment+1,ye=new u.P(_.lineVertexArray.getx(pe),_.lineVertexArray.gety(pe)),oe=ie(ye.x,ye.y,y,_.getElevation),be=oe.signedDistanceFromCamera>0?oe.point:function(Me,Ve,Ke,ot,dt,tt){return ke(Me,Ve,Ke,1,dt,tt)}(_.tileAnchorPoint,ye,de,0,y,_),Se=ve(r.writingMode,de,be,E);if(Se)return Se}const le=Qe(L*C.getoffsetX(r.glyphStartIndex),H,ee,d,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,_,R);if(!le||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[le]}for(const le of re)u.aj(T,le.point,le.angle);return{}}function ke(_,r,a,d,p,y){const w=_.add(_.sub(r)._unit()),C=p!==void 0?ie(w.x,w.y,p,y.getElevation).point:$e(w.x,w.y,y).point,T=a.sub(C);return a.add(T._mult(d/T.mag()))}function me(_,r,a){const d=r.projectionCache;if(d.projections[_])return d.projections[_];const p=new u.P(r.lineVertexArray.getx(_),r.lineVertexArray.gety(_)),y=$e(p.x,p.y,r);if(y.signedDistanceFromCamera>0)return d.projections[_]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;const w=_-a.direction;return function(C,T,E,R,L){return ke(C,T,E,R,void 0,L)}(a.distanceFromAnchor===0?r.tileAnchorPoint:new u.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),p,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,r)}function $e(_,r,a){const d=_+a.translation[0],p=r+a.translation[1];let y;return!a.pitchWithMap&&a.projection.useSpecialProjectionForSymbols?(y=a.projection.projectTileCoordinates(d,p,a.unwrappedTileID,a.getElevation),y.point.x=(.5*y.point.x+.5)*a.width,y.point.y=(.5*-y.point.y+.5)*a.height):(y=ie(d,p,a.labelPlaneMatrix,a.getElevation),y.isOccluded=!1),y}function Ue(_,r,a){return _._unit()._perp()._mult(r*a)}function De(_,r,a,d,p,y,w,C,T){if(C.projectionCache.offsets[_])return C.projectionCache.offsets[_];const E=a.add(r);if(_+T.direction<d||_+T.direction>=p)return C.projectionCache.offsets[_]=E,E;const R=me(_+T.direction,C,T),L=Ue(R.sub(a),w,T.direction),H=a.add(L),ee=R.add(L);return C.projectionCache.offsets[_]=u.ak(y,E,H,ee)||E,C.projectionCache.offsets[_]}function Qe(_,r,a,d,p,y,w,C,T){const E=d?_-r:_+r;let R=E>0?1:-1,L=0;d&&(R*=-1,L=Math.PI),R<0&&(L+=Math.PI);let H,ee=R>0?y+p:y+p+1;C.projectionCache.cachedAnchorPoint?H=C.projectionCache.cachedAnchorPoint:(H=$e(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=H);let re,le,de=H,pe=H,ye=0,oe=0;const be=Math.abs(E),Se=[];let Me;for(;ye+oe<=be;){if(ee+=R,ee<y||ee>=w)return null;ye+=oe,pe=de,le=re;const ot={absOffsetX:be,direction:R,distanceFromAnchor:ye,previousVertex:pe};if(de=me(ee,C,ot),a===0)Se.push(pe),Me=de.sub(pe);else{let dt;const tt=de.sub(pe);dt=tt.mag()===0?Ue(me(ee+R,C,ot).sub(de),a,R):Ue(tt,a,R),le||(le=pe.add(dt)),re=De(ee,dt,de,y,w,le,a,C,ot),Se.push(le),Me=re.sub(le)}oe=Me.mag()}const Ve=Me._mult((be-ye)/oe)._add(le||pe),Ke=L+Math.atan2(de.y-pe.y,de.x-pe.x);return Se.push(Ve),{point:Ve,angle:T?Ke:0,path:Se}}const St=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Et(_,r){for(let a=0;a<_;a++){const d=r.length;r.resize(d+4),r.float32.set(St,3*d)}}function mr(_,r,a){const d=r[0],p=r[1];return _[0]=a[0]*d+a[4]*p+a[12],_[1]=a[1]*d+a[5]*p+a[13],_[3]=a[3]*d+a[7]*p+a[15],_}const Vt=100;class gr{constructor(r,a,d=new Bi(r.width+200,r.height+200,25),p=new Bi(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=a,this.grid=d,this.ignoredGrid=p,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Vt,this.screenBottomBoundary=r.height+Vt,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,a,d,p,y,w,C,T,E,R,L){const H=r.anchorPointX+T[0],ee=r.anchorPointY+T[1],re=this.projectAndGetPerspectiveRatio(p,H,ee,y,R),le=d*re.perspectiveRatio;let de;if(w||C)de=this._projectCollisionBox(r,le,p,y,w,C,T,re,R,L);else{const Se=re.point.x+(L?L.x*le:0),Me=re.point.y+(L?L.y*le:0);de={allPointsOccluded:!1,box:[Se+r.x1*le,Me+r.y1*le,Se+r.x2*le,Me+r.y2*le]}}const[pe,ye,oe,be]=de.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?de.allPointsOccluded:this.mapProjection.isOccluded(H,ee,y))||re.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(pe,ye,oe,be)||a!=="always"&&this.grid.hitTest(pe,ye,oe,be,a,E)?{box:[pe,ye,oe,be],placeable:!1,offscreen:!1}:{box:[pe,ye,oe,be],placeable:!0,offscreen:this.isOffscreen(pe,ye,oe,be)}}placeCollisionCircles(r,a,d,p,y,w,C,T,E,R,L,H,ee,re,le,de){const pe=[],ye=new u.P(a.anchorX,a.anchorY),oe=this.getPerspectiveRatio(w,ye.x,ye.y,C,de),be=(L?y/oe:y*oe)/u.ap,Se={getElevation:de,labelPlaneMatrix:T,lineVertexArray:d,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ye,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:le},Me=ae(be,p,a.lineOffsetX*be,a.lineOffsetY*be,!1,a,!1,Se);let Ve=!1,Ke=!1,ot=!0;if(Me){const dt=.5*ee*oe+re,tt=new u.P(-100,-100),et=new u.P(this.screenRightBoundary,this.screenBottomBoundary),yt=new Nt,jt=Me.first,rt=Me.last;let lt=[];for(let Xt=jt.path.length-1;Xt>=1;Xt--)lt.push(jt.path[Xt]);for(let Xt=1;Xt<rt.path.length;Xt++)lt.push(rt.path[Xt]);const Ot=2.5*dt;if(E){const Xt=this.projectPathToScreenSpace(lt,Se,E);lt=Xt.some(ar=>ar.signedDistanceFromCamera<=0)?[]:Xt.map(ar=>ar.point)}let Vr=[];if(lt.length>0){const Xt=lt[0].clone(),ar=lt[0].clone();for(let Ur=1;Ur<lt.length;Ur++)Xt.x=Math.min(Xt.x,lt[Ur].x),Xt.y=Math.min(Xt.y,lt[Ur].y),ar.x=Math.max(ar.x,lt[Ur].x),ar.y=Math.max(ar.y,lt[Ur].y);Vr=Xt.x>=tt.x&&ar.x<=et.x&&Xt.y>=tt.y&&ar.y<=et.y?[lt]:ar.x<tt.x||Xt.x>et.x||ar.y<tt.y||Xt.y>et.y?[]:u.al([lt],tt.x,tt.y,et.x,et.y)}for(const Xt of Vr){yt.reset(Xt,.25*dt);let ar=0;ar=yt.length<=.5*dt?1:Math.ceil(yt.paddedLength/Ot)+1;for(let Ur=0;Ur<ar;Ur++){const $n=Ur/Math.max(ar-1,1),no=yt.lerp($n),Wr=no.x+Vt,ci=no.y+Vt;pe.push(Wr,ci,dt,0);const Yn=Wr-dt,Nn=ci-dt,Jn=Wr+dt,So=ci+dt;if(ot=ot&&this.isOffscreen(Yn,Nn,Jn,So),Ke=Ke||this.isInsideGrid(Yn,Nn,Jn,So),r!=="always"&&this.grid.hitTestCircle(Wr,ci,dt,r,H)&&(Ve=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ve}}}}return{circles:!R&&Ve||!Ke||oe<this.perspectiveRatioCutoff?[]:pe,offscreen:ot,collisionDetected:Ve}}projectPathToScreenSpace(r,a,d){return r.map(p=>ie(p.x,p.y,d,a.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let d=1/0,p=1/0,y=-1/0,w=-1/0;for(const R of r){const L=new u.P(R.x+Vt,R.y+Vt);d=Math.min(d,L.x),p=Math.min(p,L.y),y=Math.max(y,L.x),w=Math.max(w,L.y),a.push(L)}const C=this.grid.query(d,p,y,w).concat(this.ignoredGrid.query(d,p,y,w)),T={},E={};for(const R of C){const L=R.key;if(T[L.bucketInstanceId]===void 0&&(T[L.bucketInstanceId]={}),T[L.bucketInstanceId][L.featureIndex])continue;const H=[new u.P(R.x1,R.y1),new u.P(R.x2,R.y1),new u.P(R.x2,R.y2),new u.P(R.x1,R.y2)];u.am(a,H)&&(T[L.bucketInstanceId][L.featureIndex]=!0,E[L.bucketInstanceId]===void 0&&(E[L.bucketInstanceId]=[]),E[L.bucketInstanceId].push(L.featureIndex))}return E}insertCollisionBox(r,a,d,p,y,w){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:y,collisionGroupID:w,overlapMode:a},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,a,d,p,y,w){const C=d?this.ignoredGrid:this.grid,T={bucketInstanceId:p,featureIndex:y,collisionGroupID:w,overlapMode:a};for(let E=0;E<r.length;E+=4)C.insertCircle(T,r[E],r[E+1],r[E+2])}projectAndGetPerspectiveRatio(r,a,d,p,y){let w;y?(w=[a,d,y(a,d),1],u.af(w,w,r)):(w=[a,d,0,1],mr(w,w,r));const C=w[3];return{point:new u.P((w[0]/C+1)/2*this.transform.width+Vt,(-w[1]/C+1)/2*this.transform.height+Vt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C*.5,isOccluded:!1,signedDistanceFromCamera:C}}getPerspectiveRatio(r,a,d,p,y){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,d,p,y):ie(a,d,r,y);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(r,a,d,p){return d<Vt||r>=this.screenRightBoundary||p<Vt||a>this.screenBottomBoundary}isInsideGrid(r,a,d,p){return d>=0&&r<this.gridRightBoundary&&p>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,a,d,p,y,w,C,T,E,R){let L=new u.P(1,0),H=new u.P(0,1);const ee=new u.P(r.anchorPointX+C[0],r.anchorPointY+C[1]);if(w&&!y){const ot=this.projectAndGetPerspectiveRatio(d,ee.x+1,ee.y,p,E).point.sub(T.point).unit(),dt=Math.atan(ot.y/ot.x)+(ot.x<0?Math.PI:0),tt=Math.sin(dt),et=Math.cos(dt);L=new u.P(et,tt),H=new u.P(-tt,et)}else if(!w&&y){const ot=-this.transform.angle,dt=Math.sin(ot),tt=Math.cos(ot);L=new u.P(tt,dt),H=new u.P(-dt,tt)}let re=T.point,le=a;if(y){re=ee;const ot=this.transform.zoom-Math.floor(this.transform.zoom);le=Math.pow(2,-ot),le*=this.mapProjection.getPitchedTextCorrection(this.transform,ee,p),R||(le*=u.ac(.5+T.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}R&&(re=re.add(L.mult(R.x*le)).add(H.mult(R.y*le)));const de=r.x1*le,pe=r.x2*le,ye=(de+pe)/2,oe=r.y1*le,be=r.y2*le,Se=(oe+be)/2,Me=[{offsetX:de,offsetY:oe},{offsetX:ye,offsetY:oe},{offsetX:pe,offsetY:oe},{offsetX:pe,offsetY:Se},{offsetX:pe,offsetY:be},{offsetX:ye,offsetY:be},{offsetX:de,offsetY:be},{offsetX:de,offsetY:Se}];let Ve=[];for(const{offsetX:ot,offsetY:dt}of Me)Ve.push(new u.P(re.x+L.x*ot+H.x*dt,re.y+L.y*ot+H.y*dt));let Ke=!1;if(y){const ot=Ve.map(dt=>this.projectAndGetPerspectiveRatio(d,dt.x,dt.y,p,E));Ke=ot.some(dt=>!dt.isOccluded),Ve=ot.map(dt=>dt.point)}else Ke=!0;return{box:u.ao(Ve),allPointsOccluded:!Ke}}}function sr(_,r,a){return r*(u.X/(_.tileSize*Math.pow(2,a-_.tileID.overscaledZ)))}class hn{constructor(r,a,d,p){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?a:-a))):p&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Xr{constructor(r,a,d,p,y){this.text=new hn(r?r.text:null,a,d,y),this.icon=new hn(r?r.icon:null,a,p,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class tr{constructor(r,a,d){this.text=r,this.icon=a,this.skipFade=d}}class kr{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class Gr{constructor(r,a,d,p,y){this.bucketInstanceId=r,this.featureIndex=a,this.sourceLayerIndex=d,this.bucketIndex=p,this.tileID=y}}class Sn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const a=++this.maxGroupID;this.collisionGroups[r]={ID:a,predicate:d=>d.collisionGroupID===a}}return this.collisionGroups[r]}}function An(_,r,a,d,p){const{horizontalAlign:y,verticalAlign:w}=u.au(_);return new u.P(-(y-.5)*r+d[0]*p,-(w-.5)*a+d[1]*p)}class Kn{constructor(r,a,d,p,y,w){this.transform=r.clone(),this.terrain=d,this.collisionIndex=new gr(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Sn(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const a=this.terrain;return a?(d,p)=>a.getElevation(r,d,p):null}getBucketParts(r,a,d,p){const y=d.getBucket(a),w=d.latestFeatureIndex;if(!y||!w||a.id!==y.layerIds[0])return;const C=d.collisionBoxArray,T=y.layers[0].layout,E=y.layers[0].paint,R=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),L=d.tileSize/u.X,H=d.tileID.toUnwrapped(),ee=this.transform.calculatePosMatrix(H),re=T.get("text-pitch-alignment")==="map",le=T.get("text-rotation-alignment")==="map",de=sr(d,1,this.transform.zoom),pe=this.collisionIndex.mapProjection.translatePosition(this.transform,d,E.get("text-translate"),E.get("text-translate-anchor")),ye=this.collisionIndex.mapProjection.translatePosition(this.transform,d,E.get("icon-translate"),E.get("icon-translate-anchor")),oe=Pt(ee,re,le,this.transform,de);let be=null;if(re){const Me=pr(ee,re,le,this.transform,de);be=u.L([],this.transform.labelPlaneMatrix,Me)}this.retainedQueryData[y.bucketInstanceId]=new Gr(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,d.tileID);const Se={bucket:y,layout:T,translationText:pe,translationIcon:ye,posMatrix:ee,unwrappedTileID:H,textLabelPlaneMatrix:oe,labelToScreenMatrix:be,scale:R,textPixelRatio:L,holdingForFade:d.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:u.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(p)for(const Me of y.sortKeyRanges){const{sortKey:Ve,symbolInstanceStart:Ke,symbolInstanceEnd:ot}=Me;r.push({sortKey:Ve,symbolInstanceStart:Ke,symbolInstanceEnd:ot,parameters:Se})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(r,a,d,p,y,w,C,T,E,R,L,H,ee,re,le,de,pe,ye,oe){const be=u.aq[r.textAnchor],Se=[r.textOffset0,r.textOffset1],Me=An(be,d,p,Se,y),Ve=this.collisionIndex.placeCollisionBox(a,H,T,E,R,C,w,de,L.predicate,oe,Me);if((!ye||this.collisionIndex.placeCollisionBox(ye,H,T,E,R,C,w,pe,L.predicate,oe,Me).placeable)&&Ve.placeable){let Ke;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Ke=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:Se,width:d,height:p,anchor:be,textBoxScale:y,prevAnchor:Ke},this.markUsedJustification(re,be,ee,le),re.allowVerticalPlacement&&(this.markUsedOrientation(re,le,ee),this.placedOrientations[ee.crossTileID]=le),{shift:Me,placedGlyphBoxes:Ve}}}placeLayerBucketPart(r,a,d){const{bucket:p,layout:y,translationText:w,translationIcon:C,posMatrix:T,unwrappedTileID:E,textLabelPlaneMatrix:R,labelToScreenMatrix:L,textPixelRatio:H,holdingForFade:ee,collisionBoxArray:re,partiallyEvaluatedTextSize:le,collisionGroup:de}=r.parameters,pe=y.get("text-optional"),ye=y.get("icon-optional"),oe=u.ar(y,"text-overlap","text-allow-overlap"),be=oe==="always",Se=u.ar(y,"icon-overlap","icon-allow-overlap"),Me=Se==="always",Ve=y.get("text-rotation-alignment")==="map",Ke=y.get("text-pitch-alignment")==="map",ot=y.get("icon-text-fit")!=="none",dt=y.get("symbol-z-order")==="viewport-y",tt=be&&(Me||!p.hasIconData()||ye),et=Me&&(be||!p.hasTextData()||pe);!p.collisionArrays&&re&&p.deserializeCollisionBoxes(re);const yt=this._getTerrainElevationFunc(this.retainedQueryData[p.bucketInstanceId].tileID),jt=(rt,lt,Ot)=>{var Vr,Xt;if(a[rt.crossTileID])return;if(ee)return void(this.placements[rt.crossTileID]=new tr(!1,!1,!1));let ar=!1,Ur=!1,$n=!0,no=null,Wr={box:null,placeable:!1,offscreen:null},ci={placeable:!1},Yn=null,Nn=null,Jn=null,So=0,wa=0,Lc=0;lt.textFeatureIndex?So=lt.textFeatureIndex:rt.useRuntimeCollisionCircles&&(So=rt.featureIndex),lt.verticalTextFeatureIndex&&(wa=lt.verticalTextFeatureIndex);const Sa=lt.textBox;if(Sa){const Vi=zn=>{let jn=u.ah.horizontal;if(p.allowVerticalPlacement&&!zn&&this.prevPlacement){const Ii=this.prevPlacement.placedOrientations[rt.crossTileID];Ii&&(this.placedOrientations[rt.crossTileID]=Ii,jn=Ii,this.markUsedOrientation(p,jn,rt))}return jn},Ui=(zn,jn)=>{if(p.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&lt.verticalTextBox){for(const Ii of p.writingModes)if(Ii===u.ah.vertical?(Wr=jn(),ci=Wr):Wr=zn(),Wr&&Wr.placeable)break}else Wr=zn()},ns=rt.textAnchorOffsetStartIndex,io=rt.textAnchorOffsetEndIndex;if(io===ns){const zn=(jn,Ii)=>{const ur=this.collisionIndex.placeCollisionBox(jn,oe,H,T,E,Ke,Ve,w,de.predicate,yt);return ur&&ur.placeable&&(this.markUsedOrientation(p,Ii,rt),this.placedOrientations[rt.crossTileID]=Ii),ur};Ui(()=>zn(Sa,u.ah.horizontal),()=>{const jn=lt.verticalTextBox;return p.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&jn?zn(jn,u.ah.vertical):{box:null,offscreen:null}}),Vi(Wr&&Wr.placeable)}else{let zn=u.aq[(Xt=(Vr=this.prevPlacement)===null||Vr===void 0?void 0:Vr.variableOffsets[rt.crossTileID])===null||Xt===void 0?void 0:Xt.anchor];const jn=(ur,Ds,Ca)=>{const ka=ur.x2-ur.x1,af=ur.y2-ur.y1,Ey=rt.textBoxScale,lf=ot&&Se==="never"?Ds:null;let is=null,cf=oe==="never"?1:2,Bc="never";zn&&cf++;for(let Sl=0;Sl<cf;Sl++){for(let Fc=ns;Fc<io;Fc++){const Oc=p.textAnchorOffsets.get(Fc);if(zn&&Oc.textAnchor!==zn)continue;const Ta=this.attemptAnchorPlacement(Oc,ur,ka,af,Ey,Ve,Ke,H,T,E,de,Bc,rt,p,Ca,w,C,lf,yt);if(Ta&&(is=Ta.placedGlyphBoxes,is&&is.placeable))return ar=!0,no=Ta.shift,is}zn?zn=null:Bc=oe}return d&&!is&&(is={box:this.collisionIndex.placeCollisionBox(Sa,"always",H,T,E,Ke,Ve,w,de.predicate,yt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),is};Ui(()=>jn(Sa,lt.iconBox,u.ah.horizontal),()=>{const ur=lt.verticalTextBox;return p.allowVerticalPlacement&&(!Wr||!Wr.placeable)&&rt.numVerticalGlyphVertices>0&&ur?jn(ur,lt.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Wr&&(ar=Wr.placeable,$n=Wr.offscreen);const Ii=Vi(Wr&&Wr.placeable);if(!ar&&this.prevPlacement){const ur=this.prevPlacement.variableOffsets[rt.crossTileID];ur&&(this.variableOffsets[rt.crossTileID]=ur,this.markUsedJustification(p,ur.anchor,rt,Ii))}}}if(Yn=Wr,ar=Yn&&Yn.placeable,$n=Yn&&Yn.offscreen,rt.useRuntimeCollisionCircles){const Vi=p.text.placedSymbolArray.get(rt.centerJustifiedTextSymbolIndex),Ui=u.ai(p.textSizeData,le,Vi),ns=y.get("text-padding");Nn=this.collisionIndex.placeCollisionCircles(oe,Vi,p.lineVertexArray,p.glyphOffsetArray,Ui,T,E,R,L,d,Ke,de.predicate,rt.collisionCircleDiameter,ns,w,yt),Nn.circles.length&&Nn.collisionDetected&&!d&&u.w("Collisions detected, but collision boxes are not shown"),ar=be||Nn.circles.length>0&&!Nn.collisionDetected,$n=$n&&Nn.offscreen}if(lt.iconFeatureIndex&&(Lc=lt.iconFeatureIndex),lt.iconBox){const Vi=Ui=>this.collisionIndex.placeCollisionBox(Ui,Se,H,T,E,Ke,Ve,C,de.predicate,yt,ot&&no?no:void 0);ci&&ci.placeable&&lt.verticalIconBox?(Jn=Vi(lt.verticalIconBox),Ur=Jn.placeable):(Jn=Vi(lt.iconBox),Ur=Jn.placeable),$n=$n&&Jn.offscreen}const ji=pe||rt.numHorizontalGlyphVertices===0&&rt.numVerticalGlyphVertices===0,Dc=ye||rt.numIconVertices===0;ji||Dc?Dc?ji||(Ur=Ur&&ar):ar=Ur&&ar:Ur=ar=Ur&&ar;const Nd=Ur&&Jn.placeable;if(ar&&Yn.placeable&&this.collisionIndex.insertCollisionBox(Yn.box,oe,y.get("text-ignore-placement"),p.bucketInstanceId,ci&&ci.placeable&&wa?wa:So,de.ID),Nd&&this.collisionIndex.insertCollisionBox(Jn.box,Se,y.get("icon-ignore-placement"),p.bucketInstanceId,Lc,de.ID),Nn&&ar&&this.collisionIndex.insertCollisionCircles(Nn.circles,oe,y.get("text-ignore-placement"),p.bucketInstanceId,So,de.ID),d&&this.storeCollisionData(p.bucketInstanceId,Ot,lt,Yn,Jn,Nn),rt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rt.crossTileID]=new tr(ar||tt,Ur||et,$n||p.justReloaded),a[rt.crossTileID]=!0};if(dt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rt=p.getSortedSymbolIndexes(this.transform.angle);for(let lt=rt.length-1;lt>=0;--lt){const Ot=rt[lt];jt(p.symbolInstances.get(Ot),p.collisionArrays[Ot],Ot)}}else for(let rt=r.symbolInstanceStart;rt<r.symbolInstanceEnd;rt++)jt(p.symbolInstances.get(rt),p.collisionArrays[rt],rt);if(d&&p.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[p.bucketInstanceId];u.as(rt.invProjMatrix,T),rt.viewportMatrix=this.collisionIndex.getViewportMatrix()}p.justReloaded=!1}storeCollisionData(r,a,d,p,y,w){if(d.textBox||d.iconBox){let C,T;this.collisionBoxArrays.has(r)?C=this.collisionBoxArrays.get(r):(C=new Map,this.collisionBoxArrays.set(r,C)),C.has(a)?T=C.get(a):(T={text:null,icon:null},C.set(a,T)),d.textBox&&(T.text=p.box),d.iconBox&&(T.icon=y.box)}if(w){let C=this.collisionCircleArrays[r];C===void 0&&(C=this.collisionCircleArrays[r]=new kr);for(let T=0;T<w.circles.length;T+=4)C.circles.push(w.circles[T+0]),C.circles.push(w.circles[T+1]),C.circles.push(w.circles[T+2]),C.circles.push(w.collisionDetected?1:0)}}markUsedJustification(r,a,d,p){let y;y=p===u.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[u.at(a)];const w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const C of w)C>=0&&(r.text.placedSymbolArray.get(C).crossTileID=y>=0&&C!==y?0:d.crossTileID)}markUsedOrientation(r,a,d){const p=a===u.ah.horizontal||a===u.ah.horizontalOnly?a:0,y=a===u.ah.vertical?a:0,w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const C of w)r.text.placedSymbolArray.get(C).placedOrientation=p;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let d=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const p=a?a.symbolFadeChange(r):1,y=a?a.opacities:{},w=a?a.variableOffsets:{},C=a?a.placedOrientations:{};for(const T in this.placements){const E=this.placements[T],R=y[T];R?(this.opacities[T]=new Xr(R,p,E.text,E.icon),d=d||E.text!==R.text.placed||E.icon!==R.icon.placed):(this.opacities[T]=new Xr(null,p,E.text,E.icon,E.skipFade),d=d||E.text||E.icon)}for(const T in y){const E=y[T];if(!this.opacities[T]){const R=new Xr(E,p,!1,!1);R.isHidden()||(this.opacities[T]=R,d=d||E.text.placed||E.icon.placed)}}for(const T in w)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=w[T]);for(const T in C)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=C[T]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:r)}updateLayerOpacities(r,a){const d={};for(const p of a){const y=p.getBucket(r);y&&p.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,p.tileID,d,p.collisionBoxArray)}}updateBucketOpacities(r,a,d,p){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],w=y.layout,C=new Xr(null,0,!1,!1,!0),T=w.get("text-allow-overlap"),E=w.get("icon-allow-overlap"),R=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),L=w.get("text-rotation-alignment")==="map",H=w.get("text-pitch-alignment")==="map",ee=w.get("icon-text-fit")!=="none",re=new Xr(null,0,T&&(E||!r.hasIconData()||w.get("icon-optional")),E&&(T||!r.hasTextData()||w.get("text-optional")),!0);!r.collisionArrays&&p&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(p);const le=(pe,ye,oe)=>{for(let be=0;be<ye/4;be++)pe.opacityVertexArray.emplaceBack(oe);pe.hasVisibleVertices=pe.hasVisibleVertices||oe!==ra},de=this.collisionBoxArrays.get(r.bucketInstanceId);for(let pe=0;pe<r.symbolInstances.length;pe++){const ye=r.symbolInstances.get(pe),{numHorizontalGlyphVertices:oe,numVerticalGlyphVertices:be,crossTileID:Se}=ye;let Me=this.opacities[Se];d[Se]?Me=C:Me||(Me=re,this.opacities[Se]=Me),d[Se]=!0;const Ve=ye.numIconVertices>0,Ke=this.placedOrientations[ye.crossTileID],ot=Ke===u.ah.vertical,dt=Ke===u.ah.horizontal||Ke===u.ah.horizontalOnly;if(oe>0||be>0){const et=Ci(Me.text);le(r.text,oe,ot?ra:et),le(r.text,be,dt?ra:et);const yt=Me.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(lt=>{lt>=0&&(r.text.placedSymbolArray.get(lt).hidden=yt||ot?1:0)}),ye.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=yt||dt?1:0);const jt=this.variableOffsets[ye.crossTileID];jt&&this.markUsedJustification(r,jt.anchor,ye,Ke);const rt=this.placedOrientations[ye.crossTileID];rt&&(this.markUsedJustification(r,"left",ye,rt),this.markUsedOrientation(r,rt,ye))}if(Ve){const et=Ci(Me.icon),yt=!(ee&&ye.verticalPlacedIconSymbolIndex&&ot);ye.placedIconSymbolIndex>=0&&(le(r.icon,ye.numIconVertices,yt?et:ra),r.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=Me.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(le(r.icon,ye.numVerticalIconVertices,yt?ra:et),r.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=Me.icon.isHidden())}const tt=de&&de.has(pe)?de.get(pe):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const et=r.collisionArrays[pe];if(et){let yt=new u.P(0,0);if(et.textBox||et.verticalTextBox){let jt=!0;if(R){const rt=this.variableOffsets[Se];rt?(yt=An(rt.anchor,rt.width,rt.height,rt.textOffset,rt.textBoxScale),L&&yt._rotate(H?this.transform.angle:-this.transform.angle)):jt=!1}if(et.textBox||et.verticalTextBox){let rt;et.textBox&&(rt=ot),et.verticalTextBox&&(rt=dt),ta(r.textCollisionBox.collisionVertexArray,Me.text.placed,!jt||rt,tt.text,yt.x,yt.y)}}if(et.iconBox||et.verticalIconBox){const jt=!!(!dt&&et.verticalIconBox);let rt;et.iconBox&&(rt=jt),et.verticalIconBox&&(rt=!jt),ta(r.iconCollisionBox.collisionVertexArray,Me.icon.placed,rt,tt.icon,ee?yt.x:0,ee?yt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=pe.invProjMatrix,r.placementViewportMatrix=pe.viewportMatrix,r.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,a){const d=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function ta(_,r,a,d,p,y){d&&d.length!==0||(d=[0,0,0,0]);const w=d[0]-Vt,C=d[1]-Vt,T=d[2]-Vt,E=d[3]-Vt;_.emplaceBack(r?1:0,a?1:0,p||0,y||0,w,C),_.emplaceBack(r?1:0,a?1:0,p||0,y||0,T,C),_.emplaceBack(r?1:0,a?1:0,p||0,y||0,T,E),_.emplaceBack(r?1:0,a?1:0,p||0,y||0,w,E)}const Tr=Math.pow(2,25),Yu=Math.pow(2,24),Ju=Math.pow(2,17),wi=Math.pow(2,16),Si=Math.pow(2,9),ny=Math.pow(2,8),Fi=Math.pow(2,1);function Ci(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const r=_.placed?1:0,a=Math.floor(127*_.opacity);return a*Tr+r*Yu+a*Ju+r*wi+a*Si+r*ny+a*Fi+r}const ra=0;function Ss(){return{isOccluded:(_,r,a)=>!1,getPitchedTextCorrection:(_,r,a)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,r,a,d){throw new Error("Not implemented.")},translatePosition:(_,r,a,d)=>function(p,y,w,C,T=!1){if(!w[0]&&!w[1])return[0,0];const E=T?C==="map"?p.angle:0:C==="viewport"?-p.angle:0;if(E){const R=Math.sin(E),L=Math.cos(E);w=[w[0]*L-w[1]*R,w[0]*R+w[1]*L]}return[T?w[0]:sr(y,w[0],p.zoom),T?w[1]:sr(y,w[1],p.zoom)]}(_,r,a,d),getCircleRadiusCorrection:_=>1}}class pn{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,a,d,p,y){const w=this._bucketParts;for(;this._currentTileIndex<r.length;)if(a.getBucketParts(w,p,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((C,T)=>C.sortKey-T.sortKey));this._currentPartIndex<w.length;)if(a.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class il{constructor(r,a,d,p,y,w,C,T){this.placement=new Kn(r,Ss(),a,w,C,T),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(r,a,d){const p=D.now(),y=()=>!this._forceFullPlacement&&D.now()-p>2;for(;this._currentPlacementIndex>=0;){const w=a[r[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=C)&&(!w.maxzoom||w.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new pn(w)),this._inProgressLayer.continuePlacement(d[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Ji=512/u.X/2;class on{constructor(r,a,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const p=new Map;for(let y=0;y<a.length;y++){const w=a.get(y),C=w.key,T=p.get(C);T?T.push(w):p.set(C,[w])}for(const[y,w]of p){const C={positions:w.map(T=>({x:Math.floor(T.anchorX*Ji),y:Math.floor(T.anchorY*Ji)})),crossTileIDs:w.map(T=>T.crossTileID)};if(C.positions.length>128){const T=new u.av(C.positions.length,16,Uint16Array);for(const{x:E,y:R}of C.positions)T.add(E,R);T.finish(),delete C.positions,C.index=T}this._symbolsByKey[y]=C}}getScaledCoordinates(r,a){const{x:d,y:p,z:y}=this.tileID.canonical,{x:w,y:C,z:T}=a.canonical,E=Ji/Math.pow(2,T-y),R=(C*u.X+r.anchorY)*E,L=p*u.X*Ji;return{x:Math.floor((w*u.X+r.anchorX)*E-d*u.X*Ji),y:Math.floor(R-L)}}findMatches(r,a,d){const p=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let y=0;y<r.length;y++){const w=r.get(y);if(w.crossTileID)continue;const C=this._symbolsByKey[w.key];if(!C)continue;const T=this.getScaledCoordinates(w,a);if(C.index){const E=C.index.range(T.x-p,T.y-p,T.x+p,T.y+p).sort();for(const R of E){const L=C.crossTileIDs[R];if(!d[L]){d[L]=!0,w.crossTileID=L;break}}}else if(C.positions)for(let E=0;E<C.positions.length;E++){const R=C.positions[E],L=C.crossTileIDs[E];if(Math.abs(R.x-T.x)<=p&&Math.abs(R.y-T.y)<=p&&!d[L]){d[L]=!0,w.crossTileID=L;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class nc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Qi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const a=Math.round((r-this.lng)/360);if(a!==0)for(const d in this.indexes){const p=this.indexes[d],y={};for(const w in p){const C=p[w];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+a),y[C.tileID.key]=C}this.indexes[d]=y}this.lng=r}addBucket(r,a,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<a.symbolInstances.length;y++)a.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const p=this.usedCrossTileIDs[r.overscaledZ];for(const y in this.indexes){const w=this.indexes[y];if(Number(y)>r.overscaledZ)for(const C in w){const T=w[C];T.tileID.isChildOf(r)&&T.findMatches(a.symbolInstances,r,p)}else{const C=w[r.scaledTo(Number(y)).key];C&&C.findMatches(a.symbolInstances,r,p)}}for(let y=0;y<a.symbolInstances.length;y++){const w=a.symbolInstances.get(y);w.crossTileID||(w.crossTileID=d.generate(),p[w.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new on(r,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(r,a){for(const d of a.getCrossTileIDsLists())for(const p of d)delete this.usedCrossTileIDs[r][p]}removeStaleBuckets(r){let a=!1;for(const d in this.indexes){const p=this.indexes[d];for(const y in p)r[p[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,p[y]),delete p[y],a=!0)}return a}}class Qu{constructor(){this.layerIndexes={},this.crossTileIDs=new nc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,a,d){let p=this.layerIndexes[r.id];p===void 0&&(p=this.layerIndexes[r.id]=new Qi);let y=!1;const w={};p.handleWrapJump(d);for(const C of a){const T=C.getBucket(r);T&&r.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(C.tileID,T,this.crossTileIDs)&&(y=!0),w[T.bucketInstanceId]=!0)}return p.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(r){const a={};r.forEach(d=>{a[d]=!0});for(const d in this.layerIndexes)a[d]||delete this.layerIndexes[d]}}const eo=(_,r)=>u.t(_,r&&r.filter(a=>a.identifier!=="source.canvas")),iy=u.aw();class ic extends u.E{constructor(r,a={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const p=this.sourceCaches[d].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new ht(zt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,p)=>this.getGlyphs(d,p)),this.dispatcher.registerMessageHandler("GI",(d,p)=>this.getImages(d,p)),this.imageManager=new xe,this.imageManager.setEventedParent(this),this.glyphManager=new Ze(r._requestManager,a.localIdeographFontFamily),this.lineAtlas=new Tt(256,512),this.crossTileSymbolIndex=new Qu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),Ft().on(qe,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const p=this.sourceCaches[d.sourceId];if(!p)return;const y=p.getSource();if(y&&y.vectorLayerIds)for(const w in this._layers){const C=this._layers[w];C.source===y.id&&this._validateLayer(C)}})}loadURL(r,a={},d){this.fire(new u.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const p=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.h(p,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,a,d)}).catch(w=>{this._loadStyleRequest=null,w&&!y.signal.aborted&&this.fire(new u.j(w))})}loadJSON(r,a={},d){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(r,a,d)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(iy,{validate:!1})}_load(r,a,d){var p;const y=a.transformStyle?a.transformStyle(d,r):r;if(!a.validate||!eo(this,u.u(y))){this._loaded=!0,this.stylesheet=y;for(const w in y.sources)this.addSource(w,y.sources[w],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new Ge(this.stylesheet.light),this.sky=new ct(this.stylesheet.sky),this.map.setTerrain((p=this.stylesheet.terrain)!==null&&p!==void 0?p:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of r){const d=u.aA(a);d.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=d}}_loadSprite(r,a=!1,d=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,w,C,T){return u._(this,void 0,void 0,function*(){const E=Te(y),R=C>1?"@2x":"",L={},H={};for(const{id:ee,url:re}of E){const le=w.transformRequest(Ae(re,R,".json"),"SpriteJSON");L[ee]=u.h(le,T);const de=w.transformRequest(Ae(re,R,".png"),"SpriteImage");H[ee]=U.getImage(de,T)}return yield Promise.all([...Object.values(L),...Object.values(H)]),function(ee,re){return u._(this,void 0,void 0,function*(){const le={};for(const de in ee){le[de]={};const pe=D.getImageCanvasContext((yield re[de]).data),ye=(yield ee[de]).data;for(const oe in ye){const{width:be,height:Se,x:Me,y:Ve,sdf:Ke,pixelRatio:ot,stretchX:dt,stretchY:tt,content:et,textFitWidth:yt,textFitHeight:jt}=ye[oe];le[de][oe]={data:null,pixelRatio:ot,sdf:Ke,stretchX:dt,stretchY:tt,content:et,textFitWidth:yt,textFitHeight:jt,spriteData:{width:be,height:Se,x:Me,y:Ve,context:pe}}}}return le})}(L,H)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const w in y){this._spritesImagesIds[w]=[];const C=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(T=>!(T in y)):[];for(const T of C)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(const T in y[w]){const E=w==="default"?T:`${w}:${T}`;this._spritesImagesIds[w].push(E),E in this.imageManager.images?this.imageManager.updateImage(E,y[w][T],!1):this.imageManager.addImage(E,y[w][T]),a&&(this._changedImages[E]=!0)}}}).catch(y=>{this._spriteRequest=null,p=y,this.fire(new u.j(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),d&&d(p)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const a=this.sourceCaches[r.source];if(!a)return;const d=r.sourceLayer;if(!d)return;const p=a.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(d)===-1)&&this.fire(new u.j(new Error(`Source layer "${d}" does not exist on source "${p.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,a=!1){const d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(a?u.aB(d):d);const p=[];for(const y of r)if(d[y]){const w=a?u.aB(d[y]):d[y];p.push(w)}return p}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const a=Object.keys(this._layers);for(const d of a){const p=this._layers[d];p.type!=="custom"&&(r[d]=p.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const a=this._changed;if(a){const p=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(p.length||y.length)&&this._updateWorkerLayers(p,y);for(const w in this._updatedSources){const C=this._updatedSources[w];if(C==="reload")this._reloadSource(w);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const d={};for(const p in this.sourceCaches){const y=this.sourceCaches[p];d[p]=y.used,y.used=!1}for(const p of this._order){const y=this._layers[p];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const p in d){const y=this.sourceCaches[p];!!d[p]!=!!y.used&&y.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,a&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,a={}){var d;this._checkLoaded();const p=this.serialize();if(r=a.transformStyle?a.transformStyle(p,r):r,((d=a.validate)===null||d===void 0||d)&&eo(this,u.u(r)))return!1;(r=u.aB(r)).layers=u.az(r.layers);const y=u.aC(p,r),w=this._getOperationsToPerform(y);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const C of w.operations)C();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const a=[],d=[];for(const p of r)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":a.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":a.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,p.args));break;case"setSky":a.push(()=>this.setSky.apply(this,p.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setTransition":a.push(()=>{});break;default:d.push(p.command)}return{operations:a,unimplemented:d}}addImage(r,a){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,a),this._afterImageUpdated(r)}updateImage(r,a){this.imageManager.updateImage(r,a)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,a,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(u.u.source,`sources.${r}`,a,null,d))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const p=this.sourceCaches[r]=new Lt(r,a,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:r})),p.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const a=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],a.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,a){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(a),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,a,d={}){this._checkLoaded();const p=r.id;if(this.getLayer(p))return void this.fire(new u.j(new Error(`Layer "${p}" already exists on this map.`)));let y;if(r.type==="custom"){if(eo(this,u.aD(r)))return;y=u.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(p,r.source),r=u.aB(r),r=u.e(r,{source:p})),this._validate(u.u.layer,`layers.${p}`,r,{arrayIndex:-1},d))return;y=u.aA(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:p}})}const w=a?this._order.indexOf(a):this._order.length;if(a&&w===-1)this.fire(new u.j(new Error(`Cannot add layer "${p}" before non-existing layer "${a}".`)));else{if(this._order.splice(w,0,p),this._layerOrderChanged=!0,this._layers[p]=y,this._removedLayers[p]&&y.source&&y.type!=="custom"){const C=this._removedLayers[p];delete this._removedLayers[p],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,a){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===a)return;const d=this._order.indexOf(r);this._order.splice(d,1);const p=a?this._order.indexOf(a):this._order.length;a&&p===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${a}".`))):(this._order.splice(p,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const a=this._layers[r];if(!a)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));a.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=a,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],a.onRemove&&a.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,a,d){this._checkLoaded();const p=this.getLayer(r);p?p.minzoom===a&&p.maxzoom===d||(a!=null&&(p.minzoom=a),d!=null&&(p.maxzoom=d),this._updateLayer(p)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,a,d={}){this._checkLoaded();const p=this.getLayer(r);if(p){if(!u.aE(p.filter,a))return a==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(u.u.filter,`layers.${p.id}.filter`,a,null,d)||(p.filter=u.aB(a),this._updateLayer(p)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aB(this.getLayer(r).filter)}setLayoutProperty(r,a,d,p={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getLayoutProperty(a),d)||(y.setLayoutProperty(a,d,p),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,a){const d=this.getLayer(r);if(d)return d.getLayoutProperty(a);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,a,d,p={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getPaintProperty(a),d)||(y.setPaintProperty(a,d,p)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,a){return this.getLayer(r).getPaintProperty(a)}setFeatureState(r,a){this._checkLoaded();const d=r.source,p=r.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const w=y.getSource().type;w==="geojson"&&p?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||p?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(p,r.id,a)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,a){this._checkLoaded();const d=r.source,p=this.sourceCaches[d];if(p===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const y=p.getSource().type,w=y==="vector"?r.sourceLayer:void 0;y!=="vector"||w?a&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(w,r.id,a):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const a=r.source,d=r.sourceLayer,p=this.sourceCaches[a];if(p!==void 0)return p.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),p.getFeatureState(d,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aF(this.sourceCaches,y=>y.serialize()),a=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,p=this.stylesheet;return u.aG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,sources:r,layers:a,terrain:d},y=>y!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const a=w=>this._layers[w].type==="fill-extrusion",d={},p=[];for(let w=this._order.length-1;w>=0;w--){const C=this._order[w];if(a(C)){d[C]=w;for(const T of r){const E=T[C];if(E)for(const R of E)p.push(R)}}}p.sort((w,C)=>C.intersectionZ-w.intersectionZ);const y=[];for(let w=this._order.length-1;w>=0;w--){const C=this._order[w];if(a(C))for(let T=p.length-1;T>=0;T--){const E=p[T].feature;if(d[E.layer.id]<w)break;y.push(E),p.pop()}else for(const T of r){const E=T[C];if(E)for(const R of E)y.push(R.feature)}}return y}queryRenderedFeatures(r,a,d){a&&a.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",a.filter,null,a);const p={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const C of a.layers){const T=this._layers[C];if(!T)return this.fire(new u.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];p[T.source]=!0}}const y=[];a.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const C in this.sourceCaches)a.layers&&!p[C]||y.push(Qt(this.sourceCaches[C],this._layers,w,r,a,d));return this.placement&&y.push(function(C,T,E,R,L,H,ee){const re={},le=H.queryRenderedSymbols(R),de=[];for(const pe of Object.keys(le).map(Number))de.push(ee[pe]);de.sort(kt);for(const pe of de){const ye=pe.featureIndex.lookupSymbolFeatures(le[pe.bucketInstanceId],T,pe.bucketIndex,pe.sourceLayerIndex,L.filter,L.layers,L.availableImages,C);for(const oe in ye){const be=re[oe]=re[oe]||[],Se=ye[oe];Se.sort((Me,Ve)=>{const Ke=pe.featureSortOrder;if(Ke){const ot=Ke.indexOf(Me.featureIndex);return Ke.indexOf(Ve.featureIndex)-ot}return Ve.featureIndex-Me.featureIndex});for(const Me of Se)be.push(Me)}}for(const pe in re)re[pe].forEach(ye=>{const oe=ye.feature,be=E[C[pe].source].getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=be});return re}(this._layers,w,this.sourceCaches,r,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,a){a&&a.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",a.filter,null,a);const d=this.sourceCaches[r];return d?function(p,y){const w=p.getRenderableIds().map(E=>p.getTileByID(E)),C=[],T={};for(let E=0;E<w.length;E++){const R=w[E],L=R.tileID.canonical.key;T[L]||(T[L]=!0,R.querySourceFeatures(C,y))}return C}(d,a):[]}getLight(){return this.light.getLight()}setLight(r,a={}){this._checkLoaded();const d=this.light.getLight();let p=!1;for(const w in r)if(!u.aE(r[w],d[w])){p=!0;break}if(!p)return;const y={now:D.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,a),this.light.updateTransitions(y)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,a={}){const d=this.getSky();let p=!1;if(!r&&!d)return;if(r&&!d)p=!0;else if(!r&&d)p=!0;else for(const w in r)if(!u.aE(r[w],d[w])){p=!0;break}if(!p)return;const y={now:D.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,a),this.sky.updateTransitions(y)}_validate(r,a,d,p,y={}){return(!y||y.validate!==!1)&&eo(this,r.call(u.u,u.e({key:a,style:this.serialize(),value:d,styleSpec:u.v},p)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ft().off(qe,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const d=this.sourceCaches[a];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const a in this.sourceCaches)this.sourceCaches[a].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,a,d,p,y=!1){let w=!1,C=!1;const T={};for(const E of this._order){const R=this._layers[E];if(R.type!=="symbol")continue;if(!T[R.source]){const H=this.sourceCaches[R.source];T[R.source]=H.getRenderableIds(!0).map(ee=>H.getTileByID(ee)).sort((ee,re)=>re.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(re.tileID)?-1:1))}const L=this.crossTileSymbolIndex.addLayer(R,T[R.source],r.center.lng);w=w||L}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.now(),r.zoom))&&(this.pauseablePlacement=new il(r,this.map.terrain,this._order,y,a,d,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.now()),C=!0),w&&this.pauseablePlacement.placement.setStale()),C||w)for(const E of this._order){const R=this._layers[E];R.type==="symbol"&&this.placement.updateLayerOpacities(R,T[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,a){return u._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,a.icons),d})}getGlyphs(r,a){return u._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(a.stacks),p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,a={}){this._checkLoaded(),r&&this._validate(u.u.glyphs,"glyphs",r,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,a,d={},p){this._checkLoaded();const y=[{id:r,url:a}],w=[...Te(this.stylesheet.sprite),...y];this._validate(u.u.sprite,"sprite",w,null,d)||(this.stylesheet.sprite=w,this._loadSprite(y,!0,p))}removeSprite(r){this._checkLoaded();const a=Te(this.stylesheet.sprite);if(a.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;a.splice(a.findIndex(d=>d.id===r),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Te(this.stylesheet.sprite)}setSprite(r,a={},d){this._checkLoaded(),r&&this._validate(u.u.sprite,"sprite",r,null,a)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var Cs=u.Y([{name:"a_pos",type:"Int16",components:2}]);const ts={prelude:br(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:br(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:br(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:br(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:br("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:br(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:br(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:br("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:br("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:br("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:br(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:br(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:br(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:br(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:br(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:br(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:br(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:br(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:br(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:br(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:br(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:br(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:br(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:br(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:br(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:br(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:br("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:br("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:br("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:br("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function br(_,r){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),p=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=y?y.concat(p):p,C={};return{fragmentSource:_=_.replace(a,(T,E,R,L,H)=>(C[H]=!0,E==="define"?`
#ifndef HAS_UNIFORM_u_${H}
varying ${R} ${L} ${H};
#else
uniform ${R} ${L} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${R} ${L} ${H} = u_${H};
#endif
`)),vertexSource:r=r.replace(a,(T,E,R,L,H)=>{const ee=L==="float"?"vec2":"vec4",re=H.match(/color/)?"color":ee;return C[H]?E==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${R} ${ee} a_${H};
varying ${R} ${L} ${H};
#else
uniform ${R} ${L} u_${H};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${R} ${L} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${re}(a_${H}, u_${H}_t);
#else
    ${R} ${L} ${H} = u_${H};
#endif
`:E==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${R} ${ee} a_${H};
#else
uniform ${R} ${L} u_${H};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${R} ${L} ${H} = a_${H};
#else
    ${R} ${L} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${R} ${L} ${H} = unpack_mix_${re}(a_${H}, u_${H}_t);
#else
    ${R} ${L} ${H} = u_${H};
#endif
`}),staticAttributes:d,staticUniforms:w}}class ed{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,a,d,p,y,w,C,T,E){this.context=r;let R=this.boundPaintVertexBuffers.length!==p.length;for(let L=0;!R&&L<p.length;L++)this.boundPaintVertexBuffers[L]!==p[L]&&(R=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==d||R||this.boundIndexBuffer!==y||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==E?this.freshBind(a,d,p,y,w,C,T,E):(r.bindVertexArray.set(this.vao),C&&C.bind(),y&&y.dynamicDraw&&y.bind(),T&&T.bind(),E&&E.bind())}freshBind(r,a,d,p,y,w,C,T){const E=r.numAttributes,R=this.context,L=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=p,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=T,a.enableAttributes(L,r);for(const H of d)H.enableAttributes(L,r);w&&w.enableAttributes(L,r),C&&C.enableAttributes(L,r),T&&T.enableAttributes(L,r),a.bind(),a.setVertexAttribPointers(L,r,y);for(const H of d)H.bind(),H.setVertexAttribPointers(L,r,y);w&&(w.bind(),w.setVertexAttribPointers(L,r,y)),p&&p.bind(),C&&(C.bind(),C.setVertexAttribPointers(L,r,y)),T&&(T.bind(),T.setVertexAttribPointers(L,r,y)),R.currentNumAttributes=E}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const td=(_,r,a,d,p)=>({u_matrix:_,u_texture:0,u_ele_delta:r,u_fog_matrix:a,u_fog_color:d?d.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?d.calculateFogBlendOpacity(p):0,u_horizon_color:d?d.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1});function na(_){const r=[];for(let a=0;a<_.length;a++){if(_[a]===null)continue;const d=_[a].split(" ");r.push(d.pop())}return r}class rd{constructor(r,a,d,p,y,w){const C=r.gl;this.program=C.createProgram();const T=na(a.staticAttributes),E=d?d.getBinderAttributes():[],R=T.concat(E),L=ts.prelude.staticUniforms?na(ts.prelude.staticUniforms):[],H=a.staticUniforms?na(a.staticUniforms):[],ee=d?d.getBinderUniforms():[],re=L.concat(H).concat(ee),le=[];for(const Me of re)le.indexOf(Me)<0&&le.push(Me);const de=d?d.defines():[];y&&de.push("#define OVERDRAW_INSPECTOR;"),w&&de.push("#define TERRAIN3D;");const pe=de.concat(ts.prelude.fragmentSource,a.fragmentSource).join(`
`),ye=de.concat(ts.prelude.vertexSource,a.vertexSource).join(`
`),oe=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(oe,pe),C.compileShader(oe),!C.getShaderParameter(oe,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(oe)}`);C.attachShader(this.program,oe);const be=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(be,ye),C.compileShader(be),!C.getShaderParameter(be,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(be)}`);C.attachShader(this.program,be),this.attributes={};const Se={};this.numAttributes=R.length;for(let Me=0;Me<this.numAttributes;Me++)R[Me]&&(C.bindAttribLocation(this.program,Me,R[Me]),this.attributes[R[Me]]=Me);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(be),C.deleteShader(oe);for(let Me=0;Me<le.length;Me++){const Ve=le[Me];if(Ve&&!Se[Ve]){const Ke=C.getUniformLocation(this.program,Ve);Ke&&(Se[Ve]=Ke)}}this.fixedUniforms=p(r,Se),this.terrainUniforms=((Me,Ve)=>({u_depth:new u.aH(Me,Ve.u_depth),u_terrain:new u.aH(Me,Ve.u_terrain),u_terrain_dim:new u.aI(Me,Ve.u_terrain_dim),u_terrain_matrix:new u.aJ(Me,Ve.u_terrain_matrix),u_terrain_unpack:new u.aK(Me,Ve.u_terrain_unpack),u_terrain_exaggeration:new u.aI(Me,Ve.u_terrain_exaggeration)}))(r,Se),this.binderUniforms=d?d.getUniforms(r,Se):[]}draw(r,a,d,p,y,w,C,T,E,R,L,H,ee,re,le,de,pe,ye){const oe=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(p),r.setColorMode(y),r.setCullFace(w),T){r.activeTexture.set(oe.TEXTURE2),oe.bindTexture(oe.TEXTURE_2D,T.depthTexture),r.activeTexture.set(oe.TEXTURE3),oe.bindTexture(oe.TEXTURE_2D,T.texture);for(const Se in this.terrainUniforms)this.terrainUniforms[Se].set(T[Se])}for(const Se in this.fixedUniforms)this.fixedUniforms[Se].set(C[Se]);le&&le.setUniforms(r,this.binderUniforms,ee,{zoom:re});let be=0;switch(a){case oe.LINES:be=2;break;case oe.TRIANGLES:be=3;break;case oe.LINE_STRIP:be=1}for(const Se of H.get()){const Me=Se.vaos||(Se.vaos={});(Me[E]||(Me[E]=new ed)).bind(r,this,R,le?le.getPaintVertexBuffers():[],L,Se.vertexOffset,de,pe,ye),oe.drawElements(a,Se.primitiveLength*be,oe.UNSIGNED_SHORT,Se.primitiveOffset*be*2)}}}function oc(_,r,a){const d=1/sr(a,1,r.transform.tileZoom),p=Math.pow(2,a.tileID.overscaledZ),y=a.tileSize*Math.pow(2,r.transform.tileZoom)/p,w=y*(a.tileID.canonical.x+a.tileID.wrap*p),C=y*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[d,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[w>>16,C>>16],u_pixel_coord_lower:[65535&w,65535&C]}}const ol=(_,r,a,d)=>{const p=r.style.light,y=p.properties.get("position"),w=[y.x,y.y,y.z],C=function(){var E=new u.A(9);return u.A!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E}();p.properties.get("anchor")==="viewport"&&function(E,R){var L=Math.sin(R),H=Math.cos(R);E[0]=H,E[1]=L,E[2]=0,E[3]=-L,E[4]=H,E[5]=0,E[6]=0,E[7]=0,E[8]=1}(C,-r.transform.angle),function(E,R,L){var H=R[0],ee=R[1],re=R[2];E[0]=H*L[0]+ee*L[3]+re*L[6],E[1]=H*L[1]+ee*L[4]+re*L[7],E[2]=H*L[2]+ee*L[5]+re*L[8]}(w,w,C);const T=p.properties.get("color");return{u_matrix:_,u_lightpos:w,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[T.r,T.g,T.b],u_vertical_gradient:+a,u_opacity:d}},sc=(_,r,a,d,p,y,w)=>u.e(ol(_,r,a,d),oc(y,r,w),{u_height_factor:-Math.pow(2,p.overscaledZ)/w.tileSize/8}),ia=_=>({u_matrix:_}),Ip=(_,r,a,d)=>u.e(ia(_),oc(a,r,d)),oy=(_,r)=>({u_matrix:_,u_world:r}),Pp=(_,r,a,d,p)=>u.e(Ip(_,r,a,d),{u_world:p}),sy=(_,r,a,d)=>{const p=_.transform;let y,w;if(d.paint.get("circle-pitch-alignment")==="map"){const C=sr(a,1,p.zoom);y=!0,w=[C,C]}else y=!1,w=p.pixelsToGLUnits;return{u_camera_to_center_distance:p.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(r.posMatrix,a,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:w}},ks=(_,r,a)=>({u_matrix:_,u_inv_matrix:r,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}),sl=(_,r,a=1)=>({u_matrix:_,u_color:r,u_overlay:0,u_overlay_scale:a}),ai=_=>({u_matrix:_}),li=(_,r,a,d)=>({u_matrix:_,u_extrude_scale:sr(r,1,a),u_intensity:d}),ac=(_,r,a,d)=>{const p=u.H();u.aP(p,0,_.width,_.height,0,0,1);const y=_.context.gl;return{u_matrix:p,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:a,u_color_ramp:d,u_opacity:r.paint.get("heatmap-opacity")}};function lc(_,r){const a=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new u.Z(0,d/a).toLngLat().lat,new u.Z(0,(d+1)/a).toLngLat().lat]}const cc=(_,r,a,d)=>{const p=_.transform;return{u_matrix:Ap(_,r,a,d),u_ratio:1/sr(r,1,p.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Ep=(_,r,a,d,p)=>u.e(cc(_,r,a,p),{u_image:0,u_image_height:d}),oa=(_,r,a,d,p)=>{const y=_.transform,w=Mp(r,y);return{u_matrix:Ap(_,r,a,p),u_texsize:r.imageAtlasTexture.size,u_ratio:1/sr(r,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},ay=(_,r,a,d,p,y)=>{const w=_.lineAtlas,C=Mp(r,_.transform),T=a.layout.get("line-cap")==="round",E=w.getDash(d.from,T),R=w.getDash(d.to,T),L=E.width*p.fromScale,H=R.width*p.toScale;return u.e(cc(_,r,a,y),{u_patternscale_a:[C/L,-E.height/2],u_patternscale_b:[C/H,-R.height/2],u_sdfgamma:w.width/(256*Math.min(L,H)*_.pixelRatio)/2,u_image:0,u_tex_y_a:E.y,u_tex_y_b:R.y,u_mix:p.t})};function Mp(_,r){return 1/sr(_,1,r.tileZoom)}function Ap(_,r,a,d){return _.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const ly=(_,r,a,d,p)=>{return{u_matrix:_,u_tl_parent:r,u_scale_parent:a,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(w=p.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(y=p.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:cy(p.paint.get("raster-hue-rotate"))};var y,w};function cy(_){_*=Math.PI/180;const r=Math.sin(_),a=Math.cos(_);return[(2*a+1)/3,(-Math.sqrt(3)*r-a+1)/3,(Math.sqrt(3)*r-a+1)/3]}const zp=(_,r,a,d,p,y,w,C,T,E,R,L,H,ee)=>{const re=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:re.width/re.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:T,u_coord_matrix:E,u_is_text:+L,u_pitch_with_map:+d,u_is_along_line:p,u_is_variable_anchor:y,u_texsize:H,u_texture:0,u_translation:R,u_pitched_scale:ee}},al=(_,r,a,d,p,y,w,C,T,E,R,L,H,ee,re)=>{const le=w.transform;return u.e(zp(_,r,a,d,p,y,w,C,T,E,R,L,H,re),{u_gamma_scale:d?Math.cos(le._pitch)*le.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},nd=(_,r,a,d,p,y,w,C,T,E,R,L,H,ee)=>u.e(al(_,r,a,d,p,y,w,C,T,E,R,!0,L,!0,ee),{u_texsize_icon:H,u_texture_icon:1}),uc=(_,r,a)=>({u_matrix:_,u_opacity:r,u_color:a}),id=(_,r,a,d,p,y)=>u.e(function(w,C,T,E){const R=T.imageManager.getPattern(w.from.toString()),L=T.imageManager.getPattern(w.to.toString()),{width:H,height:ee}=T.imageManager.getPixelSize(),re=Math.pow(2,E.tileID.overscaledZ),le=E.tileSize*Math.pow(2,T.transform.tileZoom)/re,de=le*(E.tileID.canonical.x+E.tileID.wrap*re),pe=le*E.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[H,ee],u_mix:C.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/sr(E,1,T.transform.tileZoom),u_pixel_coord_upper:[de>>16,pe>>16],u_pixel_coord_lower:[65535&de,65535&pe]}}(d,y,a,p),{u_matrix:_,u_opacity:r}),od={fillExtrusion:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_lightpos:new u.aN(_,r.u_lightpos),u_lightintensity:new u.aI(_,r.u_lightintensity),u_lightcolor:new u.aN(_,r.u_lightcolor),u_vertical_gradient:new u.aI(_,r.u_vertical_gradient),u_opacity:new u.aI(_,r.u_opacity)}),fillExtrusionPattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_lightpos:new u.aN(_,r.u_lightpos),u_lightintensity:new u.aI(_,r.u_lightintensity),u_lightcolor:new u.aN(_,r.u_lightcolor),u_vertical_gradient:new u.aI(_,r.u_vertical_gradient),u_height_factor:new u.aI(_,r.u_height_factor),u_image:new u.aH(_,r.u_image),u_texsize:new u.aO(_,r.u_texsize),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade),u_opacity:new u.aI(_,r.u_opacity)}),fill:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix)}),fillPattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_image:new u.aH(_,r.u_image),u_texsize:new u.aO(_,r.u_texsize),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade)}),fillOutline:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_world:new u.aO(_,r.u_world)}),fillOutlinePattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_world:new u.aO(_,r.u_world),u_image:new u.aH(_,r.u_image),u_texsize:new u.aO(_,r.u_texsize),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade)}),circle:(_,r)=>({u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_scale_with_map:new u.aH(_,r.u_scale_with_map),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_extrude_scale:new u.aO(_,r.u_extrude_scale),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_matrix:new u.aJ(_,r.u_matrix)}),collisionBox:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_pixel_extrude_scale:new u.aO(_,r.u_pixel_extrude_scale)}),collisionCircle:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_inv_matrix:new u.aJ(_,r.u_inv_matrix),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_viewport_size:new u.aO(_,r.u_viewport_size)}),debug:(_,r)=>({u_color:new u.aL(_,r.u_color),u_matrix:new u.aJ(_,r.u_matrix),u_overlay:new u.aH(_,r.u_overlay),u_overlay_scale:new u.aI(_,r.u_overlay_scale)}),clippingMask:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix)}),heatmap:(_,r)=>({u_extrude_scale:new u.aI(_,r.u_extrude_scale),u_intensity:new u.aI(_,r.u_intensity),u_matrix:new u.aJ(_,r.u_matrix)}),heatmapTexture:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_world:new u.aO(_,r.u_world),u_image:new u.aH(_,r.u_image),u_color_ramp:new u.aH(_,r.u_color_ramp),u_opacity:new u.aI(_,r.u_opacity)}),hillshade:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_image:new u.aH(_,r.u_image),u_latrange:new u.aO(_,r.u_latrange),u_light:new u.aO(_,r.u_light),u_shadow:new u.aL(_,r.u_shadow),u_highlight:new u.aL(_,r.u_highlight),u_accent:new u.aL(_,r.u_accent)}),hillshadePrepare:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_image:new u.aH(_,r.u_image),u_dimension:new u.aO(_,r.u_dimension),u_zoom:new u.aI(_,r.u_zoom),u_unpack:new u.aK(_,r.u_unpack)}),line:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels)}),lineGradient:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels),u_image:new u.aH(_,r.u_image),u_image_height:new u.aI(_,r.u_image_height)}),linePattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_texsize:new u.aO(_,r.u_texsize),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_image:new u.aH(_,r.u_image),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade)}),lineSDF:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels),u_patternscale_a:new u.aO(_,r.u_patternscale_a),u_patternscale_b:new u.aO(_,r.u_patternscale_b),u_sdfgamma:new u.aI(_,r.u_sdfgamma),u_image:new u.aH(_,r.u_image),u_tex_y_a:new u.aI(_,r.u_tex_y_a),u_tex_y_b:new u.aI(_,r.u_tex_y_b),u_mix:new u.aI(_,r.u_mix)}),raster:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_tl_parent:new u.aO(_,r.u_tl_parent),u_scale_parent:new u.aI(_,r.u_scale_parent),u_buffer_scale:new u.aI(_,r.u_buffer_scale),u_fade_t:new u.aI(_,r.u_fade_t),u_opacity:new u.aI(_,r.u_opacity),u_image0:new u.aH(_,r.u_image0),u_image1:new u.aH(_,r.u_image1),u_brightness_low:new u.aI(_,r.u_brightness_low),u_brightness_high:new u.aI(_,r.u_brightness_high),u_saturation_factor:new u.aI(_,r.u_saturation_factor),u_contrast_factor:new u.aI(_,r.u_contrast_factor),u_spin_weights:new u.aN(_,r.u_spin_weights)}),symbolIcon:(_,r)=>({u_is_size_zoom_constant:new u.aH(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,r.u_is_size_feature_constant),u_size_t:new u.aI(_,r.u_size_t),u_size:new u.aI(_,r.u_size),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_pitch:new u.aI(_,r.u_pitch),u_rotate_symbol:new u.aH(_,r.u_rotate_symbol),u_aspect_ratio:new u.aI(_,r.u_aspect_ratio),u_fade_change:new u.aI(_,r.u_fade_change),u_matrix:new u.aJ(_,r.u_matrix),u_label_plane_matrix:new u.aJ(_,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,r.u_coord_matrix),u_is_text:new u.aH(_,r.u_is_text),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_is_along_line:new u.aH(_,r.u_is_along_line),u_is_variable_anchor:new u.aH(_,r.u_is_variable_anchor),u_texsize:new u.aO(_,r.u_texsize),u_texture:new u.aH(_,r.u_texture),u_translation:new u.aO(_,r.u_translation),u_pitched_scale:new u.aI(_,r.u_pitched_scale)}),symbolSDF:(_,r)=>({u_is_size_zoom_constant:new u.aH(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,r.u_is_size_feature_constant),u_size_t:new u.aI(_,r.u_size_t),u_size:new u.aI(_,r.u_size),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_pitch:new u.aI(_,r.u_pitch),u_rotate_symbol:new u.aH(_,r.u_rotate_symbol),u_aspect_ratio:new u.aI(_,r.u_aspect_ratio),u_fade_change:new u.aI(_,r.u_fade_change),u_matrix:new u.aJ(_,r.u_matrix),u_label_plane_matrix:new u.aJ(_,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,r.u_coord_matrix),u_is_text:new u.aH(_,r.u_is_text),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_is_along_line:new u.aH(_,r.u_is_along_line),u_is_variable_anchor:new u.aH(_,r.u_is_variable_anchor),u_texsize:new u.aO(_,r.u_texsize),u_texture:new u.aH(_,r.u_texture),u_gamma_scale:new u.aI(_,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_is_halo:new u.aH(_,r.u_is_halo),u_translation:new u.aO(_,r.u_translation),u_pitched_scale:new u.aI(_,r.u_pitched_scale)}),symbolTextAndIcon:(_,r)=>({u_is_size_zoom_constant:new u.aH(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,r.u_is_size_feature_constant),u_size_t:new u.aI(_,r.u_size_t),u_size:new u.aI(_,r.u_size),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_pitch:new u.aI(_,r.u_pitch),u_rotate_symbol:new u.aH(_,r.u_rotate_symbol),u_aspect_ratio:new u.aI(_,r.u_aspect_ratio),u_fade_change:new u.aI(_,r.u_fade_change),u_matrix:new u.aJ(_,r.u_matrix),u_label_plane_matrix:new u.aJ(_,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,r.u_coord_matrix),u_is_text:new u.aH(_,r.u_is_text),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_is_along_line:new u.aH(_,r.u_is_along_line),u_is_variable_anchor:new u.aH(_,r.u_is_variable_anchor),u_texsize:new u.aO(_,r.u_texsize),u_texsize_icon:new u.aO(_,r.u_texsize_icon),u_texture:new u.aH(_,r.u_texture),u_texture_icon:new u.aH(_,r.u_texture_icon),u_gamma_scale:new u.aI(_,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_is_halo:new u.aH(_,r.u_is_halo),u_translation:new u.aO(_,r.u_translation),u_pitched_scale:new u.aI(_,r.u_pitched_scale)}),background:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_opacity:new u.aI(_,r.u_opacity),u_color:new u.aL(_,r.u_color)}),backgroundPattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_opacity:new u.aI(_,r.u_opacity),u_image:new u.aH(_,r.u_image),u_pattern_tl_a:new u.aO(_,r.u_pattern_tl_a),u_pattern_br_a:new u.aO(_,r.u_pattern_br_a),u_pattern_tl_b:new u.aO(_,r.u_pattern_tl_b),u_pattern_br_b:new u.aO(_,r.u_pattern_br_b),u_texsize:new u.aO(_,r.u_texsize),u_mix:new u.aI(_,r.u_mix),u_pattern_size_a:new u.aO(_,r.u_pattern_size_a),u_pattern_size_b:new u.aO(_,r.u_pattern_size_b),u_scale_a:new u.aI(_,r.u_scale_a),u_scale_b:new u.aI(_,r.u_scale_b),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(_,r.u_tile_units_to_pixels)}),terrain:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_texture:new u.aH(_,r.u_texture),u_ele_delta:new u.aI(_,r.u_ele_delta),u_fog_matrix:new u.aJ(_,r.u_fog_matrix),u_fog_color:new u.aL(_,r.u_fog_color),u_fog_ground_blend:new u.aI(_,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(_,r.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(_,r.u_horizon_color),u_horizon_fog_blend:new u.aI(_,r.u_horizon_fog_blend)}),terrainDepth:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ele_delta:new u.aI(_,r.u_ele_delta)}),terrainCoords:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_texture:new u.aH(_,r.u_texture),u_terrain_coords_id:new u.aI(_,r.u_terrain_coords_id),u_ele_delta:new u.aI(_,r.u_ele_delta)}),sky:(_,r)=>({u_sky_color:new u.aL(_,r.u_sky_color),u_horizon_color:new u.aL(_,r.u_horizon_color),u_horizon:new u.aI(_,r.u_horizon),u_sky_horizon_blend:new u.aI(_,r.u_sky_horizon_blend)})};class xo{constructor(r,a,d){this.context=r;const p=r.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const uy={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sd{constructor(r,a,d,p){this.length=a.length,this.attributes=d,this.itemSize=a.bytesPerElement,this.dynamicDraw=p,this.context=r;const y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,a){for(let d=0;d<this.attributes.length;d++){const p=a.attributes[this.attributes[d].name];p!==void 0&&r.enableVertexAttribArray(p)}}setVertexAttribPointers(r,a,d){for(let p=0;p<this.attributes.length;p++){const y=this.attributes[p],w=a.attributes[y.name];w!==void 0&&r.vertexAttribPointer(w,y.components,r[uy[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ts=new WeakMap;function rs(_){var r;if(Ts.has(_))return Ts.get(_);{const a=(r=_.getParameter(_.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Ts.set(_,a),a}}class wr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class dc extends wr{getDefault(){return u.aM.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class dy extends wr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class sa extends wr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class hy extends wr{getDefault(){return[!0,!0,!0,!0]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Rp extends wr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class py extends wr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Lp extends wr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const a=this.current;(r.func!==a.func||r.ref!==a.ref||r.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class ad extends wr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Dp extends wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=r,this.dirty=!1}}class Bp extends wr{getDefault(){return[0,1]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Fp extends wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=r,this.dirty=!1}}class Op extends wr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Is extends wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.BLEND):a.disable(a.BLEND),this.current=r,this.dirty=!1}}class $p extends wr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class fy extends wr{getDefault(){return u.aM.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Np extends wr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ll extends wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=r,this.dirty=!1}}class my extends wr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class hc extends wr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class gy extends wr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class yy extends wr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class jp extends wr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Vp extends wr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Up extends wr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ld extends wr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Wp extends wr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class pc extends wr{getDefault(){return null}set(r){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Oo extends wr{getDefault(){return null}set(r){var a;if(r===this.current&&!this.dirty)return;const d=this.gl;rs(d)?d.bindVertexArray(r):(a=d.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class cd extends wr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ud extends wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class dd extends wr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class fc extends wr{constructor(r,a){super(r),this.context=r,this.parent=a}getDefault(){return null}}class hd extends fc{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Ps extends fc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class pd extends fc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class _y{constructor(r,a,d,p,y){this.context=r,this.width=a,this.height=d;const w=r.gl,C=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new hd(r,C),p)this.depthAttachment=y?new pd(r,C):new Ps(r,C);else if(y)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,a=this.colorAttachment.get();if(a&&r.deleteTexture(a),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class Qr{constructor(r,a,d){this.blendFunction=r,this.blendColor=a,this.mask=d}}Qr.Replace=[1,0],Qr.disabled=new Qr(Qr.Replace,u.aM.transparent,[!1,!1,!1,!1]),Qr.unblended=new Qr(Qr.Replace,u.aM.transparent,[!0,!0,!0,!0]),Qr.alphaBlended=new Qr([1,771],u.aM.transparent,[!0,!0,!0,!0]);class vy{constructor(r){var a,d;if(this.gl=r,this.clearColor=new dc(this),this.clearDepth=new dy(this),this.clearStencil=new sa(this),this.colorMask=new hy(this),this.depthMask=new Rp(this),this.stencilMask=new py(this),this.stencilFunc=new Lp(this),this.stencilOp=new ad(this),this.stencilTest=new Dp(this),this.depthRange=new Bp(this),this.depthTest=new Fp(this),this.depthFunc=new Op(this),this.blend=new Is(this),this.blendFunc=new $p(this),this.blendColor=new fy(this),this.blendEquation=new Np(this),this.cullFace=new ll(this),this.cullFaceSide=new my(this),this.frontFace=new hc(this),this.program=new gy(this),this.activeTexture=new yy(this),this.viewport=new jp(this),this.bindFramebuffer=new Vp(this),this.bindRenderbuffer=new Up(this),this.bindTexture=new ld(this),this.bindVertexBuffer=new Wp(this),this.bindElementBuffer=new pc(this),this.bindVertexArray=new Oo(this),this.pixelStoreUnpack=new cd(this),this.pixelStoreUnpackPremultiplyAlpha=new ud(this),this.pixelStoreUnpackFlipY=new dd(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),rs(r)){this.HALF_FLOAT=r.HALF_FLOAT;const p=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=r.RGBA16F)!==null&&a!==void 0?a:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:p==null?void 0:p.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const p=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,a){return new xo(this,r,a)}createVertexBuffer(r,a,d){return new sd(this,r,a,d)}createRenderbuffer(r,a,d){const p=this.gl,y=p.createRenderbuffer();return this.bindRenderbuffer.set(y),p.renderbufferStorage(p.RENDERBUFFER,r,a,d),this.bindRenderbuffer.set(null),y}createFramebuffer(r,a,d,p){return new _y(this,r,a,d,p)}clear({color:r,depth:a,stencil:d}){const p=this.gl;let y=0;r&&(y|=p.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(y|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),d!==void 0&&(y|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),p.clear(y)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aE(r.blendFunction,Qr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return rs(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var a;return rs(this.gl)?this.gl.deleteVertexArray(r):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class nr{constructor(r,a,d){this.func=r,this.mask=a,this.range=d}}nr.ReadOnly=!1,nr.ReadWrite=!0,nr.disabled=new nr(519,nr.ReadOnly,[0,1]);const mc=7680;class Lr{constructor(r,a,d,p,y,w){this.test=r,this.ref=a,this.mask=d,this.fail=p,this.depthFail=y,this.pass=w}}Lr.disabled=new Lr({func:519,mask:0},0,0,mc,mc,mc);class Pr{constructor(r,a,d){this.enable=r,this.mode=a,this.frontFace=d}}let Es;function cl(_,r,a,d,p){const y=_.context,w=y.gl,C=_.useProgram("collisionBox"),T=[];let E=0,R=0;for(let pe=0;pe<d.length;pe++){const ye=d[pe],oe=r.getTile(ye).getBucket(a);if(!oe)continue;const be=p?oe.textCollisionBox:oe.iconCollisionBox,Se=oe.collisionCircleArray;if(Se.length>0){const Me=u.H();u.aQ(Me,oe.placementInvProjMatrix,_.transform.glCoordMatrix),u.aQ(Me,Me,oe.placementViewportMatrix),T.push({circleArray:Se,circleOffset:R,transform:ye.posMatrix,invTransform:Me,coord:ye}),E+=Se.length/4,R=E}be&&C.draw(y,w.LINES,nr.disabled,Lr.disabled,_.colorModeForRenderPass(),Pr.disabled,{u_matrix:ye.posMatrix,u_pixel_extrude_scale:[1/(L=_.transform).width,1/L.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(ye),a.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,_.transform.zoom,null,null,be.collisionVertexBuffer)}var L;if(!p||!T.length)return;const H=_.useProgram("collisionCircle"),ee=new u.aR;ee.resize(4*E),ee._trim();let re=0;for(const pe of T)for(let ye=0;ye<pe.circleArray.length/4;ye++){const oe=4*ye,be=pe.circleArray[oe+0],Se=pe.circleArray[oe+1],Me=pe.circleArray[oe+2],Ve=pe.circleArray[oe+3];ee.emplace(re++,be,Se,Me,Ve,0),ee.emplace(re++,be,Se,Me,Ve,1),ee.emplace(re++,be,Se,Me,Ve,2),ee.emplace(re++,be,Se,Me,Ve,3)}(!Es||Es.length<2*E)&&(Es=function(pe){const ye=2*pe,oe=new u.aT;oe.resize(ye),oe._trim();for(let be=0;be<ye;be++){const Se=6*be;oe.uint16[Se+0]=4*be+0,oe.uint16[Se+1]=4*be+1,oe.uint16[Se+2]=4*be+2,oe.uint16[Se+3]=4*be+2,oe.uint16[Se+4]=4*be+3,oe.uint16[Se+5]=4*be+0}return oe}(E));const le=y.createIndexBuffer(Es,!0),de=y.createVertexBuffer(ee,u.aS.members,!0);for(const pe of T){const ye=ks(pe.transform,pe.invTransform,_.transform);H.draw(y,w.TRIANGLES,nr.disabled,Lr.disabled,_.colorModeForRenderPass(),Pr.disabled,ye,_.style.map.terrain&&_.style.map.terrain.getTerrainData(pe.coord),a.id,de,le,u.a0.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,_.transform.zoom,null,null,null)}de.destroy(),le.destroy()}Pr.disabled=new Pr(!1,1029,2305),Pr.backCCW=new Pr(!0,1029,2305);const ul=u.an(new Float32Array(16));function fd(_,r,a,d,p,y){const{horizontalAlign:w,verticalAlign:C}=u.au(_);return new u.P((-(w-.5)*r/p+d[0])*y,(-(C-.5)*a/p+d[1])*y)}function Ms(_,r,a,d,p,y){const w=r.tileAnchorPoint.add(new u.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let C=d.mult(y);a||(C=C.rotate(-p));const T=w.add(C);return ie(T.x,T.y,r.labelPlaneMatrix,r.getElevation).point}if(a){const C=$e(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(_),T=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return _.add(d.rotate(T))}return _.add(d)}function aa(_,r,a,d,p,y,w,C,T,E,R,L,H,ee){const re=_.text.placedSymbolArray,le=_.text.dynamicLayoutVertexArray,de=_.icon.dynamicLayoutVertexArray,pe={};le.clear();for(let ye=0;ye<re.length;ye++){const oe=re.get(ye),be=oe.hidden||!oe.crossTileID||_.allowVerticalPlacement&&!oe.placedOrientation?null:d[oe.crossTileID];if(be){const Se=new u.P(oe.anchorX,oe.anchorY),Me={getElevation:ee,width:p.width,height:p.height,labelPlaneMatrix:y,pitchWithMap:a,projection:R,tileAnchorPoint:Se,translation:L,unwrappedTileID:H},Ve=a?ie(Se.x,Se.y,w,ee):$e(Se.x,Se.y,Me),Ke=$(p.cameraToCenterDistance,Ve.signedDistanceFromCamera);let ot=u.ai(_.textSizeData,T,oe)*Ke/u.ap;a&&(ot*=_.tilePixelRatio/C);const{width:dt,height:tt,anchor:et,textOffset:yt,textBoxScale:jt}=be,rt=fd(et,dt,tt,yt,jt,ot),lt=R.getPitchedTextCorrection(p,Se.add(new u.P(L[0],L[1])),H),Ot=Ms(Ve.point,Me,r,rt,p.angle,lt),Vr=_.allowVerticalPlacement&&oe.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let Xt=0;Xt<oe.numGlyphs;Xt++)u.aj(le,Ot,Vr);E&&oe.associatedIconIndex>=0&&(pe[oe.associatedIconIndex]={shiftedAnchor:Ot,angle:Vr})}else Et(oe.numGlyphs,le)}if(E){de.clear();const ye=_.icon.placedSymbolArray;for(let oe=0;oe<ye.length;oe++){const be=ye.get(oe);if(be.hidden)Et(be.numGlyphs,de);else{const Se=pe[oe];if(Se)for(let Me=0;Me<be.numGlyphs;Me++)u.aj(de,Se.shiftedAnchor,Se.angle);else Et(be.numGlyphs,de)}}_.icon.dynamicLayoutVertexBuffer.updateData(de)}_.text.dynamicLayoutVertexBuffer.updateData(le)}function Oi(_,r,a){return a.iconsInText&&r?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function md(_,r,a,d,p,y,w,C,T,E,R,L){const H=_.context,ee=H.gl,re=_.transform,le=Ss(),de=C==="map",pe=T==="map",ye=C!=="viewport"&&a.layout.get("symbol-placement")!=="point",oe=de&&!pe&&!ye,be=!pe&&ye,Se=!a.layout.get("symbol-sort-key").isConstant();let Me=!1;const Ve=_.depthModeForSublayer(0,nr.ReadOnly),Ke=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ot=[],dt=le.getCircleRadiusCorrection(re);for(const tt of d){const et=r.getTile(tt),yt=et.getBucket(a);if(!yt)continue;const jt=p?yt.text:yt.icon;if(!jt||!jt.segments.get().length||!jt.hasVisibleVertices)continue;const rt=jt.programConfigurations.get(a.id),lt=p||yt.sdfIcons,Ot=p?yt.textSizeData:yt.iconSizeData,Vr=pe||re.pitch!==0,Xt=_.useProgram(Oi(lt,p,yt),rt),ar=u.ag(Ot,re.zoom),Ur=_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt);let $n,no,Wr,ci,Yn=[0,0],Nn=null;if(p)no=et.glyphAtlasTexture,Wr=ee.LINEAR,$n=et.glyphAtlasTexture.size,yt.iconsInText&&(Yn=et.imageAtlasTexture.size,Nn=et.imageAtlasTexture,ci=Vr||_.options.rotating||_.options.zooming||Ot.kind==="composite"||Ot.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const ur=a.layout.get("icon-size").constantOr(0)!==1||yt.iconsNeedLinear;no=et.imageAtlasTexture,Wr=lt||_.options.rotating||_.options.zooming||ur||Vr?ee.LINEAR:ee.NEAREST,$n=et.imageAtlasTexture.size}const Jn=sr(et,1,_.transform.zoom),So=be?tt.posMatrix:ul,wa=Pt(So,pe,de,_.transform,Jn),Lc=pr(So,pe,de,_.transform,Jn),Sa=pr(tt.posMatrix,pe,de,_.transform,Jn),ji=le.translatePosition(_.transform,et,y,w),Dc=Ke&&yt.hasTextData(),Nd=a.layout.get("icon-text-fit")!=="none"&&Dc&&yt.hasIconData();if(ye){const ur=_.style.map.terrain?(Ca,ka)=>_.style.map.terrain.getElevation(tt,Ca,ka):null,Ds=a.layout.get("text-rotation-alignment")==="map";Q(yt,tt.posMatrix,_,p,wa,Sa,pe,E,Ds,le,tt.toUnwrapped(),re.width,re.height,ji,ur)}const Vi=tt.posMatrix,Ui=p&&Ke||Nd,ns=ye||Ui?ul:wa,io=Lc,zn=lt&&a.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let jn;jn=lt?yt.iconsInText?nd(Ot.kind,ar,oe,pe,ye,Ui,_,Vi,ns,io,ji,$n,Yn,dt):al(Ot.kind,ar,oe,pe,ye,Ui,_,Vi,ns,io,ji,p,$n,!0,dt):zp(Ot.kind,ar,oe,pe,ye,Ui,_,Vi,ns,io,ji,p,$n,dt);const Ii={program:Xt,buffers:jt,uniformValues:jn,atlasTexture:no,atlasTextureIcon:Nn,atlasInterpolation:Wr,atlasInterpolationIcon:ci,isSDF:lt,hasHalo:zn};if(Se&&yt.canOverlap){Me=!0;const ur=jt.segments.get();for(const Ds of ur)ot.push({segments:new u.a0([Ds]),sortKey:Ds.sortKey,state:Ii,terrainData:Ur})}else ot.push({segments:jt.segments,sortKey:0,state:Ii,terrainData:Ur})}Me&&ot.sort((tt,et)=>tt.sortKey-et.sortKey);for(const tt of ot){const et=tt.state;if(H.activeTexture.set(ee.TEXTURE0),et.atlasTexture.bind(et.atlasInterpolation,ee.CLAMP_TO_EDGE),et.atlasTextureIcon&&(H.activeTexture.set(ee.TEXTURE1),et.atlasTextureIcon&&et.atlasTextureIcon.bind(et.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),et.isSDF){const yt=et.uniformValues;et.hasHalo&&(yt.u_is_halo=1,gd(et.buffers,tt.segments,a,_,et.program,Ve,R,L,yt,tt.terrainData)),yt.u_is_halo=0}gd(et.buffers,tt.segments,a,_,et.program,Ve,R,L,et.uniformValues,tt.terrainData)}}function gd(_,r,a,d,p,y,w,C,T,E){const R=d.context;p.draw(R,R.gl.TRIANGLES,y,w,C,Pr.disabled,T,E,a.id,_.layoutVertexBuffer,_.indexBuffer,r,a.paint,d.transform.zoom,_.programConfigurations.get(a.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function yd(_,r,a,d){const p=_.context,y=p.gl,w=Lr.disabled,C=new Qr([y.ONE,y.ONE],u.aM.transparent,[!0,!0,!0,!0]),T=r.getBucket(a);if(!T)return;const E=d.key;let R=a.heatmapFbos.get(E);R||(R=dl(p,r.tileSize,r.tileSize),a.heatmapFbos.set(E,R)),p.bindFramebuffer.set(R.framebuffer),p.viewport.set([0,0,r.tileSize,r.tileSize]),p.clear({color:u.aM.transparent});const L=T.programConfigurations.get(a.id),H=_.useProgram("heatmap",L),ee=_.style.map.terrain.getTerrainData(d);H.draw(p,y.TRIANGLES,nr.disabled,w,C,Pr.disabled,li(d.posMatrix,r,_.transform.zoom,a.paint.get("heatmap-intensity")),ee,a.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,a.paint,_.transform.zoom,L)}function As(_,r,a){const d=_.context,p=d.gl;d.setColorMode(_.colorModeForRenderPass());const y=hl(d,r),w=a.key,C=r.heatmapFbos.get(w);C&&(d.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,C.colorAttachment.get()),d.activeTexture.set(p.TEXTURE1),y.bind(p.LINEAR,p.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(d,p.TRIANGLES,nr.disabled,Lr.disabled,_.colorModeForRenderPass(),Pr.disabled,ac(_,r,0,1),null,r.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,r.paint,_.transform.zoom),C.destroy(),r.heatmapFbos.delete(w))}function dl(_,r,a){var d,p;const y=_.gl,w=y.createTexture();y.bindTexture(y.TEXTURE_2D,w),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const C=(d=_.HALF_FLOAT)!==null&&d!==void 0?d:y.UNSIGNED_BYTE,T=(p=_.RGBA16F)!==null&&p!==void 0?p:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,T,r,a,0,y.RGBA,C,null);const E=_.createFramebuffer(r,a,!1,!1);return E.colorAttachment.set(w),E}function hl(_,r){return r.colorRampTexture||(r.colorRampTexture=new Re(_,r.colorRamp,_.gl.RGBA)),r.colorRampTexture}function la(_,r,a,d,p){if(!a||!d||!d.imageAtlas)return;const y=d.imageAtlas.patternPositions;let w=y[a.to.toString()],C=y[a.from.toString()];if(!w&&C&&(w=C),!C&&w&&(C=w),!w||!C){const T=p.getPaintProperty(r);w=y[T],C=y[T]}w&&C&&_.setConstantPatternPositions(w,C)}function pl(_,r,a,d,p,y,w){const C=_.context.gl,T="fill-pattern",E=a.paint.get(T),R=E&&E.constantOr(1),L=a.getCrossfadeParameters();let H,ee,re,le,de;w?(ee=R&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",H=C.LINES):(ee=R?"fillPattern":"fill",H=C.TRIANGLES);const pe=E.constantOr(null);for(const ye of d){const oe=r.getTile(ye);if(R&&!oe.patternsLoaded())continue;const be=oe.getBucket(a);if(!be)continue;const Se=be.programConfigurations.get(a.id),Me=_.useProgram(ee,Se),Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ye);R&&(_.context.activeTexture.set(C.TEXTURE0),oe.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Se.updatePaintBuffers(L)),la(Se,T,pe,oe,a);const Ke=Ve?ye:null,ot=_.translatePosMatrix(Ke?Ke.posMatrix:ye.posMatrix,oe,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(w){le=be.indexBuffer2,de=be.segments2;const dt=[C.drawingBufferWidth,C.drawingBufferHeight];re=ee==="fillOutlinePattern"&&R?Pp(ot,_,L,oe,dt):oy(ot,dt)}else le=be.indexBuffer,de=be.segments,re=R?Ip(ot,_,L,oe):ia(ot);Me.draw(_.context,H,p,_.stencilModeForClipping(ye),y,Pr.disabled,re,Ve,a.id,be.layoutVertexBuffer,le,de,a.paint,_.transform.zoom,Se)}}function gc(_,r,a,d,p,y,w){const C=_.context,T=C.gl,E="fill-extrusion-pattern",R=a.paint.get(E),L=R.constantOr(1),H=a.getCrossfadeParameters(),ee=a.paint.get("fill-extrusion-opacity"),re=R.constantOr(null);for(const le of d){const de=r.getTile(le),pe=de.getBucket(a);if(!pe)continue;const ye=_.style.map.terrain&&_.style.map.terrain.getTerrainData(le),oe=pe.programConfigurations.get(a.id),be=_.useProgram(L?"fillExtrusionPattern":"fillExtrusion",oe);L&&(_.context.activeTexture.set(T.TEXTURE0),de.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),oe.updatePaintBuffers(H)),la(oe,E,re,de,a);const Se=_.translatePosMatrix(le.posMatrix,de,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Me=a.paint.get("fill-extrusion-vertical-gradient"),Ve=L?sc(Se,_,Me,ee,le,H,de):ol(Se,_,Me,ee);be.draw(C,C.gl.TRIANGLES,p,y,w,Pr.backCCW,Ve,ye,a.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,a.paint,_.transform.zoom,oe,_.style.map.terrain&&pe.centroidVertexBuffer)}}function ca(_,r,a,d,p,y,w){const C=_.context,T=C.gl,E=a.fbo;if(!E)return;const R=_.useProgram("hillshade"),L=_.style.map.terrain&&_.style.map.terrain.getTerrainData(r);C.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,E.colorAttachment.get()),R.draw(C,T.TRIANGLES,p,y,w,Pr.disabled,((H,ee,re,le)=>{const de=re.paint.get("hillshade-shadow-color"),pe=re.paint.get("hillshade-highlight-color"),ye=re.paint.get("hillshade-accent-color");let oe=re.paint.get("hillshade-illumination-direction")*(Math.PI/180);re.paint.get("hillshade-illumination-anchor")==="viewport"&&(oe-=H.transform.angle);const be=!H.options.moving;return{u_matrix:le?le.posMatrix:H.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),be),u_image:0,u_latrange:lc(0,ee.tileID),u_light:[re.paint.get("hillshade-exaggeration"),oe],u_shadow:de,u_highlight:pe,u_accent:ye}})(_,a,d,L?r:null),L,d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function ua(_,r,a,d,p,y){const w=_.context,C=w.gl,T=r.dem;if(T&&T.data){const E=T.dim,R=T.stride,L=T.getPixels();if(w.activeTexture.set(C.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||_.getTileTexture(R),r.demTexture){const ee=r.demTexture;ee.update(L,{premultiply:!1}),ee.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else r.demTexture=new Re(w,L,C.RGBA,{premultiply:!1}),r.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);w.activeTexture.set(C.TEXTURE0);let H=r.fbo;if(!H){const ee=new Re(w,{width:E,height:E,data:null},C.RGBA);ee.bind(C.LINEAR,C.CLAMP_TO_EDGE),H=r.fbo=w.createFramebuffer(E,E,!0,!1),H.colorAttachment.set(ee.texture)}w.bindFramebuffer.set(H.framebuffer),w.viewport.set([0,0,E,E]),_.useProgram("hillshadePrepare").draw(w,C.TRIANGLES,d,p,y,Pr.disabled,((ee,re)=>{const le=re.stride,de=u.H();return u.aP(de,0,u.X,-u.X,0,0,1),u.J(de,de,[0,-u.X,0]),{u_matrix:de,u_image:1,u_dimension:[le,le],u_zoom:ee.overscaledZ,u_unpack:re.getUnpackVector()}})(r.tileID,T),null,a.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Hp(_,r,a,d,p,y){const w=d.paint.get("raster-fade-duration");if(!y&&w>0){const C=D.now(),T=(C-_.timeAdded)/w,E=r?(C-r.timeAdded)/w:-1,R=a.getSource(),L=p.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),H=!r||Math.abs(r.tileID.overscaledZ-L)>Math.abs(_.tileID.overscaledZ-L),ee=H&&_.refreshedUponExpiration?1:u.ac(H?T:1-E,0,1);return _.refreshedUponExpiration&&T>=1&&(_.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const _d=new u.aM(1,0,0,1),vr=new u.aM(0,1,0,1),yc=new u.aM(0,0,1,1),xy=new u.aM(1,0,1,1),Gp=new u.aM(0,1,1,1);function da(_,r,a,d){_c(_,0,r+a/2,_.transform.width,a,d)}function qp(_,r,a,d){_c(_,r-a/2,0,a,_.transform.height,d)}function _c(_,r,a,d,p,y){const w=_.context,C=w.gl;C.enable(C.SCISSOR_TEST),C.scissor(r*_.pixelRatio,a*_.pixelRatio,d*_.pixelRatio,p*_.pixelRatio),w.clear({color:y}),C.disable(C.SCISSOR_TEST)}function Zp(_,r,a){const d=_.context,p=d.gl,y=a.posMatrix,w=_.useProgram("debug"),C=nr.disabled,T=Lr.disabled,E=_.colorModeForRenderPass(),R="$debug",L=_.style.map.terrain&&_.style.map.terrain.getTerrainData(a);d.activeTexture.set(p.TEXTURE0);const H=r.getTileByID(a.key).latestRawTileData,ee=Math.floor((H&&H.byteLength||0)/1024),re=r.getTile(a).tileSize,le=512/Math.min(re,512)*(a.overscaledZ/_.transform.zoom)*.5;let de=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(de+=` => ${a.overscaledZ}`),function(pe,ye){pe.initDebugOverlayCanvas();const oe=pe.debugOverlayCanvas,be=pe.context.gl,Se=pe.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,oe.width,oe.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(ye,5,5),Se.strokeText(ye,5,5),pe.debugOverlayTexture.update(oe),pe.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(_,`${de} ${ee}kB`),w.draw(d,p.TRIANGLES,C,T,Qr.alphaBlended,Pr.disabled,sl(y,u.aM.transparent,le),null,R,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),w.draw(d,p.LINE_STRIP,C,T,E,Pr.disabled,sl(y,u.aM.red),L,R,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Xp(_,r,a){const d=_.context,p=d.gl,y=_.colorModeForRenderPass(),w=new nr(p.LEQUAL,nr.ReadWrite,_.depthRangeFor3D),C=_.useProgram("terrain"),T=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,_.width,_.height]);for(const E of a){const R=_.renderToTexture.getTexture(E),L=r.getTerrainData(E.tileID);d.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,R.texture);const H=_.transform.calculatePosMatrix(E.tileID.toUnwrapped()),ee=r.getMeshFrameDelta(_.transform.zoom),re=_.transform.calculateFogMatrix(E.tileID.toUnwrapped()),le=td(H,ee,re,_.style.sky,_.transform.pitch);C.draw(d,p.TRIANGLES,w,Lr.disabled,y,Pr.backCCW,le,L,"terrain",T.vertexBuffer,T.indexBuffer,T.segments)}}class vc{constructor(r,a,d){this.vertexBuffer=r,this.indexBuffer=a,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class xc{constructor(r,a){this.context=new vy(r),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Lt.maxUnderzooming+Lt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qu}resize(r,a,d){if(this.width=Math.floor(r*d),this.height=Math.floor(a*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const r=this.context,a=new u.aX;a.emplaceBack(0,0),a.emplaceBack(u.X,0),a.emplaceBack(0,u.X),a.emplaceBack(u.X,u.X),this.tileExtentBuffer=r.createVertexBuffer(a,Cs.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const d=new u.aX;d.emplaceBack(0,0),d.emplaceBack(u.X,0),d.emplaceBack(0,u.X),d.emplaceBack(u.X,u.X),this.debugBuffer=r.createVertexBuffer(d,Cs.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const p=new u.$;p.emplaceBack(0,0,0,0),p.emplaceBack(u.X,0,u.X,0),p.emplaceBack(0,u.X,0,u.X),p.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=r.createVertexBuffer(p,bt.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const y=new u.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(y,Cs.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const w=new u.aZ;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(w);const C=new u.aY;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(C);const T=this.context.gl;this.stencilClearMode=new Lr({func:T.ALWAYS,mask:0},0,255,T.ZERO,T.ZERO,T.ZERO)}clearStencil(){const r=this.context,a=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=u.H();u.aP(d,0,this.width,this.height,0,0,1),u.K(d,d,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,a.TRIANGLES,nr.disabled,this.stencilClearMode,Qr.disabled,Pr.disabled,ai(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,a){if(this.currentStencilSource===r.source||!r.isTileClipped()||!a||!a.length)return;this.currentStencilSource=r.source;const d=this.context,p=d.gl;this.nextStencilID+a.length>256&&this.clearStencil(),d.setColorMode(Qr.disabled),d.setDepthMode(nr.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of a){const C=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,T=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);y.draw(d,p.TRIANGLES,nr.disabled,new Lr({func:p.ALWAYS,mask:0},C,255,p.KEEP,p.KEEP,p.REPLACE),Qr.disabled,Pr.disabled,ai(w.posMatrix),T,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,a=this.context.gl;return new Lr({func:a.NOTEQUAL,mask:255},r,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(r){const a=this.context.gl;return new Lr({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(r){const a=this.context.gl,d=r.sort((w,C)=>C.overscaledZ-w.overscaledZ),p=d[d.length-1].overscaledZ,y=d[0].overscaledZ-p+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const w={};for(let C=0;C<y;C++)w[C+p]=new Lr({func:a.GEQUAL,mask:255},C+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=y,[w,d]}return[{[p]:Lr.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Qr([r.CONSTANT_COLOR,r.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Qr.unblended:Qr.alphaBlended}depthModeForSublayer(r,a,d){if(!this.opaquePassEnabledForLayer())return nr.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new nr(d||this.context.gl.LEQUAL,a,[p,p])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,a){this.style=r,this.options=a,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(D.now()),this.imageManager.beginFrame();const d=this.style._order,p=this.style.sourceCaches,y={},w={},C={};for(const T in p){const E=p[T];E.used&&E.prepare(this.context),y[T]=E.getVisibleCoordinates(),w[T]=y[T].slice().reverse(),C[T]=E.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let T=0;T<d.length;T++)if(this.style._layers[d[T]].is3D()){this.opaquePassCutoff=T;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const T of d){const E=this.style._layers[T];if(!E.hasOffscreenPass()||E.isHidden(this.transform.zoom))continue;const R=w[E.source];(E.type==="custom"||R.length)&&this.renderLayer(this,p[E.source],E,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(T,E){const R=T.context,L=R.gl,H=((pe,ye,oe)=>({u_sky_color:pe.properties.get("sky-color"),u_horizon_color:pe.properties.get("horizon-color"),u_horizon:(ye.height/2+ye.getHorizon())*oe,u_sky_horizon_blend:pe.properties.get("sky-horizon-blend")*ye.height/2*oe}))(E,T.style.map.transform,T.pixelRatio),ee=new nr(L.LEQUAL,nr.ReadWrite,[0,1]),re=Lr.disabled,le=T.colorModeForRenderPass(),de=T.useProgram("sky");if(!E.mesh){const pe=new u.aX;pe.emplaceBack(-1,-1),pe.emplaceBack(1,-1),pe.emplaceBack(1,1),pe.emplaceBack(-1,1);const ye=new u.aY;ye.emplaceBack(0,1,2),ye.emplaceBack(0,2,3),E.mesh=new vc(R.createVertexBuffer(pe,Cs.members),R.createIndexBuffer(ye),u.a0.simpleSegment(0,0,pe.length,ye.length))}de.draw(R,L.TRIANGLES,ee,re,le,Pr.disabled,H,void 0,"sky",E.mesh.vertexBuffer,E.mesh.indexBuffer,E.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const T=this.style._layers[d[this.currentLayer]],E=p[T.source],R=y[T.source];this._renderTileClippingMasks(T,R),this.renderLayer(this,E,T,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const T=this.style._layers[d[this.currentLayer]],E=p[T.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(T))continue;const R=(T.type==="symbol"?C:w)[T.source];this._renderTileClippingMasks(T,y[T.source]),this.renderLayer(this,E,T,R)}if(this.options.showTileBoundaries){const T=function(E,R){let L=null;const H=Object.values(E._layers).flatMap(de=>de.source&&!de.isHidden(R)?[E.sourceCaches[de.source]]:[]),ee=H.filter(de=>de.getSource().type==="vector"),re=H.filter(de=>de.getSource().type!=="vector"),le=de=>{(!L||L.getSource().maxzoom<de.getSource().maxzoom)&&(L=de)};return ee.forEach(de=>le(de)),L||re.forEach(de=>le(de)),L}(this.style,this.transform.zoom);T&&function(E,R,L){for(let H=0;H<L.length;H++)Zp(E,R,L[H])}(this,T,T.getVisibleCoordinates())}this.options.showPadding&&function(T){const E=T.transform.padding;da(T,T.transform.height-(E.top||0),3,_d),da(T,E.bottom||0,3,vr),qp(T,E.left||0,3,yc),qp(T,T.transform.width-(E.right||0),3,xy);const R=T.transform.centerPoint;(function(L,H,ee,re){_c(L,H-1,ee-10,2,20,re),_c(L,H-10,ee-1,20,2,re)})(T,R.x,T.transform.height-R.y,Gp)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=r?!u.a_(a,d):!u.a$(a,d)),p||(p=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),p&&(u.b0(a,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,w){const C=y.context,T=C.gl,E=Qr.unblended,R=new nr(T.LEQUAL,nr.ReadWrite,[0,1]),L=w.getTerrainMesh(),H=w.sourceCache.getRenderableTiles(),ee=y.useProgram("terrainDepth");C.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1});for(const re of H){const le=w.getTerrainData(re.tileID),de={u_matrix:y.transform.calculatePosMatrix(re.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(y.transform.zoom)};ee.draw(C,T.TRIANGLES,R,Lr.disabled,E,Pr.backCCW,de,le,"terrain",L.vertexBuffer,L.indexBuffer,L.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,w){const C=y.context,T=C.gl,E=Qr.unblended,R=new nr(T.LEQUAL,nr.ReadWrite,[0,1]),L=w.getTerrainMesh(),H=w.getCoordsTexture(),ee=w.sourceCache.getRenderableTiles(),re=y.useProgram("terrainCoords");C.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1}),w.coordsIndex=[];for(const le of ee){const de=w.getTerrainData(le.tileID);C.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,H.texture);const pe={u_matrix:y.transform.calculatePosMatrix(le.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(y.transform.zoom)};re.draw(C,T.TRIANGLES,R,Lr.disabled,E,Pr.backCCW,pe,de,"terrain",L.vertexBuffer,L.indexBuffer,L.segments),w.coordsIndex.push(le.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(r,a,d,p){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(p||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(y,w,C,T,E){if(y.renderPass!=="translucent")return;const R=Lr.disabled,L=y.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(H,ee,re,le,de,pe,ye,oe,be){const Se=ee.transform,Me=Ss(),Ve=de==="map",Ke=pe==="map";for(const ot of H){const dt=le.getTile(ot),tt=dt.getBucket(re);if(!tt||!tt.text||!tt.text.segments.get().length)continue;const et=u.ag(tt.textSizeData,Se.zoom),yt=sr(dt,1,ee.transform.zoom),jt=Pt(ot.posMatrix,Ke,Ve,ee.transform,yt),rt=re.layout.get("icon-text-fit")!=="none"&&tt.hasIconData();if(et){const lt=Math.pow(2,Se.zoom-dt.tileID.overscaledZ),Ot=ee.style.map.terrain?(Xt,ar)=>ee.style.map.terrain.getElevation(ot,Xt,ar):null,Vr=Me.translatePosition(Se,dt,ye,oe);aa(tt,Ve,Ke,be,Se,jt,ot.posMatrix,lt,et,rt,Me,Vr,ot.toUnwrapped(),Ot)}}}(T,y,C,w,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),E),C.paint.get("icon-opacity").constantOr(1)!==0&&md(y,w,C,T,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),R,L),C.paint.get("text-opacity").constantOr(1)!==0&&md(y,w,C,T,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),R,L),w.map.showCollisionBoxes&&(cl(y,w,C,T,!0),cl(y,w,C,T,!1))})(r,a,d,p,this.style.placement.variableOffsets);break;case"circle":(function(y,w,C,T){if(y.renderPass!=="translucent")return;const E=C.paint.get("circle-opacity"),R=C.paint.get("circle-stroke-width"),L=C.paint.get("circle-stroke-opacity"),H=!C.layout.get("circle-sort-key").isConstant();if(E.constantOr(1)===0&&(R.constantOr(1)===0||L.constantOr(1)===0))return;const ee=y.context,re=ee.gl,le=y.depthModeForSublayer(0,nr.ReadOnly),de=Lr.disabled,pe=y.colorModeForRenderPass(),ye=[];for(let oe=0;oe<T.length;oe++){const be=T[oe],Se=w.getTile(be),Me=Se.getBucket(C);if(!Me)continue;const Ve=Me.programConfigurations.get(C.id),Ke=y.useProgram("circle",Ve),ot=Me.layoutVertexBuffer,dt=Me.indexBuffer,tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(be),et={programConfiguration:Ve,program:Ke,layoutVertexBuffer:ot,indexBuffer:dt,uniformValues:sy(y,be,Se,C),terrainData:tt};if(H){const yt=Me.segments.get();for(const jt of yt)ye.push({segments:new u.a0([jt]),sortKey:jt.sortKey,state:et})}else ye.push({segments:Me.segments,sortKey:0,state:et})}H&&ye.sort((oe,be)=>oe.sortKey-be.sortKey);for(const oe of ye){const{programConfiguration:be,program:Se,layoutVertexBuffer:Me,indexBuffer:Ve,uniformValues:Ke,terrainData:ot}=oe.state;Se.draw(ee,re.TRIANGLES,le,de,pe,Pr.disabled,Ke,ot,C.id,Me,Ve,oe.segments,C.paint,y.transform.zoom,be)}})(r,a,d,p);break;case"heatmap":(function(y,w,C,T){if(C.paint.get("heatmap-opacity")===0)return;const E=y.context;if(y.style.map.terrain){for(const R of T){const L=w.getTile(R);w.hasRenderableParent(R)||(y.renderPass==="offscreen"?yd(y,L,C,R):y.renderPass==="translucent"&&As(y,C,R))}E.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(R,L,H,ee){const re=R.context,le=re.gl,de=Lr.disabled,pe=new Qr([le.ONE,le.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(ye,oe,be){const Se=ye.gl;ye.activeTexture.set(Se.TEXTURE1),ye.viewport.set([0,0,oe.width/4,oe.height/4]);let Me=be.heatmapFbos.get(u.aU);Me?(Se.bindTexture(Se.TEXTURE_2D,Me.colorAttachment.get()),ye.bindFramebuffer.set(Me.framebuffer)):(Me=dl(ye,oe.width/4,oe.height/4),be.heatmapFbos.set(u.aU,Me))})(re,R,H),re.clear({color:u.aM.transparent});for(let ye=0;ye<ee.length;ye++){const oe=ee[ye];if(L.hasRenderableParent(oe))continue;const be=L.getTile(oe),Se=be.getBucket(H);if(!Se)continue;const Me=Se.programConfigurations.get(H.id),Ve=R.useProgram("heatmap",Me),{zoom:Ke}=R.transform;Ve.draw(re,le.TRIANGLES,nr.disabled,de,pe,Pr.disabled,li(oe.posMatrix,be,Ke,H.paint.get("heatmap-intensity")),null,H.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,H.paint,R.transform.zoom,Me)}re.viewport.set([0,0,R.width,R.height])}(y,w,C,T):y.renderPass==="translucent"&&function(R,L){const H=R.context,ee=H.gl;H.setColorMode(R.colorModeForRenderPass());const re=L.heatmapFbos.get(u.aU);re&&(H.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,re.colorAttachment.get()),H.activeTexture.set(ee.TEXTURE1),hl(H,L).bind(ee.LINEAR,ee.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(H,ee.TRIANGLES,nr.disabled,Lr.disabled,R.colorModeForRenderPass(),Pr.disabled,ac(R,L,0,1),null,L.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,L.paint,R.transform.zoom))}(y,C)})(r,a,d,p);break;case"line":(function(y,w,C,T){if(y.renderPass!=="translucent")return;const E=C.paint.get("line-opacity"),R=C.paint.get("line-width");if(E.constantOr(1)===0||R.constantOr(1)===0)return;const L=y.depthModeForSublayer(0,nr.ReadOnly),H=y.colorModeForRenderPass(),ee=C.paint.get("line-dasharray"),re=C.paint.get("line-pattern"),le=re.constantOr(1),de=C.paint.get("line-gradient"),pe=C.getCrossfadeParameters(),ye=le?"linePattern":ee?"lineSDF":de?"lineGradient":"line",oe=y.context,be=oe.gl;let Se=!0;for(const Me of T){const Ve=w.getTile(Me);if(le&&!Ve.patternsLoaded())continue;const Ke=Ve.getBucket(C);if(!Ke)continue;const ot=Ke.programConfigurations.get(C.id),dt=y.context.program.get(),tt=y.useProgram(ye,ot),et=Se||tt.program!==dt,yt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Me),jt=re.constantOr(null);if(jt&&Ve.imageAtlas){const Ot=Ve.imageAtlas,Vr=Ot.patternPositions[jt.to.toString()],Xt=Ot.patternPositions[jt.from.toString()];Vr&&Xt&&ot.setConstantPatternPositions(Vr,Xt)}const rt=yt?Me:null,lt=le?oa(y,Ve,C,pe,rt):ee?ay(y,Ve,C,ee,pe,rt):de?Ep(y,Ve,C,Ke.lineClipsArray.length,rt):cc(y,Ve,C,rt);if(le)oe.activeTexture.set(be.TEXTURE0),Ve.imageAtlasTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE),ot.updatePaintBuffers(pe);else if(ee&&(et||y.lineAtlas.dirty))oe.activeTexture.set(be.TEXTURE0),y.lineAtlas.bind(oe);else if(de){const Ot=Ke.gradients[C.id];let Vr=Ot.texture;if(C.gradientVersion!==Ot.version){let Xt=256;if(C.stepInterpolant){const ar=w.getSource().maxzoom,Ur=Me.canonical.z===ar?Math.ceil(1<<y.transform.maxZoom-Me.canonical.z):1;Xt=u.ac(u.aV(Ke.maxLineLength/u.X*1024*Ur),256,oe.maxTextureSize)}Ot.gradient=u.aW({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:Xt,image:Ot.gradient||void 0,clips:Ke.lineClipsArray}),Ot.texture?Ot.texture.update(Ot.gradient):Ot.texture=new Re(oe,Ot.gradient,be.RGBA),Ot.version=C.gradientVersion,Vr=Ot.texture}oe.activeTexture.set(be.TEXTURE0),Vr.bind(C.stepInterpolant?be.NEAREST:be.LINEAR,be.CLAMP_TO_EDGE)}tt.draw(oe,be.TRIANGLES,L,y.stencilModeForClipping(Me),H,Pr.disabled,lt,yt,C.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,C.paint,y.transform.zoom,ot,Ke.layoutVertexBuffer2),Se=!1}})(r,a,d,p);break;case"fill":(function(y,w,C,T){const E=C.paint.get("fill-color"),R=C.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const L=y.colorModeForRenderPass(),H=C.paint.get("fill-pattern"),ee=y.opaquePassEnabledForLayer()&&!H.constantOr(1)&&E.constantOr(u.aM.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===ee){const re=y.depthModeForSublayer(1,y.renderPass==="opaque"?nr.ReadWrite:nr.ReadOnly);pl(y,w,C,T,re,L,!1)}if(y.renderPass==="translucent"&&C.paint.get("fill-antialias")){const re=y.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,nr.ReadOnly);pl(y,w,C,T,re,L,!0)}})(r,a,d,p);break;case"fill-extrusion":(function(y,w,C,T){const E=C.paint.get("fill-extrusion-opacity");if(E!==0&&y.renderPass==="translucent"){const R=new nr(y.context.gl.LEQUAL,nr.ReadWrite,y.depthRangeFor3D);if(E!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))gc(y,w,C,T,R,Lr.disabled,Qr.disabled),gc(y,w,C,T,R,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const L=y.colorModeForRenderPass();gc(y,w,C,T,R,Lr.disabled,L)}}})(r,a,d,p);break;case"hillshade":(function(y,w,C,T){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const E=y.context,R=y.depthModeForSublayer(0,nr.ReadOnly),L=y.colorModeForRenderPass(),[H,ee]=y.renderPass==="translucent"?y.stencilConfigForOverlap(T):[{},T];for(const re of ee){const le=w.getTile(re);le.needsHillshadePrepare!==void 0&&le.needsHillshadePrepare&&y.renderPass==="offscreen"?ua(y,le,C,R,Lr.disabled,L):y.renderPass==="translucent"&&ca(y,re,le,C,R,H[re.overscaledZ],L)}E.viewport.set([0,0,y.width,y.height])})(r,a,d,p);break;case"raster":(function(y,w,C,T){if(y.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!T.length)return;const E=y.context,R=E.gl,L=w.getSource(),H=y.useProgram("raster"),ee=y.colorModeForRenderPass(),[re,le]=L instanceof _n?[{},T]:y.stencilConfigForOverlap(T),de=le[le.length-1].overscaledZ,pe=!y.options.moving;for(const ye of le){const oe=y.depthModeForSublayer(ye.overscaledZ-de,C.paint.get("raster-opacity")===1?nr.ReadWrite:nr.ReadOnly,R.LESS),be=w.getTile(ye);be.registerFadeDuration(C.paint.get("raster-fade-duration"));const Se=w.findLoadedParent(ye,0),Me=w.findLoadedSibling(ye),Ve=Hp(be,Se||Me||null,w,C,y.transform,y.style.map.terrain);let Ke,ot;const dt=C.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;E.activeTexture.set(R.TEXTURE0),be.texture.bind(dt,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),E.activeTexture.set(R.TEXTURE1),Se?(Se.texture.bind(dt,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Ke=Math.pow(2,Se.tileID.overscaledZ-be.tileID.overscaledZ),ot=[be.tileID.canonical.x*Ke%1,be.tileID.canonical.y*Ke%1]):be.texture.bind(dt,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),be.texture.useMipmap&&E.extTextureFilterAnisotropic&&y.transform.pitch>20&&R.texParameterf(R.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax);const tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ye),et=tt?ye:null,yt=et?et.posMatrix:y.transform.calculatePosMatrix(ye.toUnwrapped(),pe),jt=ly(yt,ot||[0,0],Ke||1,Ve,C);L instanceof _n?H.draw(E,R.TRIANGLES,oe,Lr.disabled,ee,Pr.disabled,jt,tt,C.id,L.boundsBuffer,y.quadTriangleIndexBuffer,L.boundsSegments):H.draw(E,R.TRIANGLES,oe,re[ye.overscaledZ],ee,Pr.disabled,jt,tt,C.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(r,a,d,p);break;case"background":(function(y,w,C,T){const E=C.paint.get("background-color"),R=C.paint.get("background-opacity");if(R===0)return;const L=y.context,H=L.gl,ee=y.transform,re=ee.tileSize,le=C.paint.get("background-pattern");if(y.isPatternMissing(le))return;const de=!le&&E.a===1&&R===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==de)return;const pe=Lr.disabled,ye=y.depthModeForSublayer(0,de==="opaque"?nr.ReadWrite:nr.ReadOnly),oe=y.colorModeForRenderPass(),be=y.useProgram(le?"backgroundPattern":"background"),Se=T||ee.coveringTiles({tileSize:re,terrain:y.style.map.terrain});le&&(L.activeTexture.set(H.TEXTURE0),y.imageManager.bind(y.context));const Me=C.getCrossfadeParameters();for(const Ve of Se){const Ke=T?Ve.posMatrix:y.transform.calculatePosMatrix(Ve.toUnwrapped()),ot=le?id(Ke,R,y,le,{tileID:Ve,tileSize:re},Me):uc(Ke,R,E),dt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ve);be.draw(L,H.TRIANGLES,ye,pe,oe,Pr.disabled,ot,dt,C.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(r,0,d,p);break;case"custom":(function(y,w,C){const T=y.context,E=C.implementation;if(y.renderPass==="offscreen"){const R=E.prerender;R&&(y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),R.call(E,T.gl,y.transform.customLayerMatrix()),T.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),T.setStencilMode(Lr.disabled);const R=E.renderingMode==="3d"?new nr(y.context.gl.LEQUAL,nr.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,nr.ReadOnly);T.setDepthMode(R),E.render(T.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),T.setDirty(),y.setBaseState(),T.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,a,d,p,y){if(!d[0]&&!d[1])return r;const w=y?p==="map"?this.transform.angle:0:p==="viewport"?-this.transform.angle:0;if(w){const E=Math.sin(w),R=Math.cos(w);d=[d[0]*R-d[1]*E,d[0]*E+d[1]*R]}const C=[y?d[0]:sr(a,d[0],this.transform.zoom),y?d[1]:sr(a,d[1],this.transform.zoom),0],T=new Float32Array(16);return u.J(T,r,C),T}saveTileTexture(r){const a=this._tileTextures[r.size[0]];a?a.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const a=this._tileTextures[r];return a&&a.length>0?a.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const a=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!a||!d}useProgram(r,a){this.cache=this.cache||{};const d=r+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new rd(this.context,ts[r],a,od[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Re(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:a}=this.context.gl;return this.width!==r||this.height!==a}}class ha{constructor(r,a){this.points=r,this.planes=a}static fromInvProjectionMatrix(r,a,d){const p=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const T=1/(C=u.af([],C,r))[3]/a*p;return u.b1(C,C,[T,T,1/C[3],T])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const T=function(H,ee){var re=ee[0],le=ee[1],de=ee[2],pe=re*re+le*le+de*de;return pe>0&&(pe=1/Math.sqrt(pe)),H[0]=ee[0]*pe,H[1]=ee[1]*pe,H[2]=ee[2]*pe,H}([],function(H,ee,re){var le=ee[0],de=ee[1],pe=ee[2],ye=re[0],oe=re[1],be=re[2];return H[0]=de*be-pe*oe,H[1]=pe*ye-le*be,H[2]=le*oe-de*ye,H}([],fe([],y[C[0]],y[C[1]]),fe([],y[C[2]],y[C[1]]))),E=-((R=T)[0]*(L=y[C[1]])[0]+R[1]*L[1]+R[2]*L[2]);var R,L;return T.concat(E)});return new ha(y,w)}}class pa{constructor(r,a){this.min=r,this.max=a,this.center=function(d,p,y){return d[0]=.5*p[0],d[1]=.5*p[1],d[2]=.5*p[2],d}([],function(d,p,y){return d[0]=p[0]+y[0],d[1]=p[1]+y[1],d[2]=p[2]+y[2],d}([],this.min,this.max))}quadrant(r){const a=[r%2==0,r<2],d=he(this.min),p=he(this.max);for(let y=0;y<a.length;y++)d[y]=a[y]?this.min[y]:this.center[y],p[y]=a[y]?this.center[y]:this.max[y];return p[2]=this.max[2],new pa(d,p)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let p=0;p<r.planes.length;p++){const y=r.planes[p];let w=0;for(let C=0;C<a.length;C++)u.b2(y,a[C])>=0&&w++;if(w===0)return 0;w!==a.length&&(d=!1)}if(d)return 2;for(let p=0;p<3;p++){let y=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let C=0;C<r.points.length;C++){const T=r.points[C][p]-this.min[p];y=Math.min(y,T),w=Math.max(w,T)}if(w<0||y>this.max[p]-this.min[p])return 0}return 1}}class fa{constructor(r=0,a=0,d=0,p=0){if(isNaN(r)||r<0||isNaN(a)||a<0||isNaN(d)||d<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=a,this.left=d,this.right=p}interpolate(r,a,d){return a.top!=null&&r.top!=null&&(this.top=u.y.number(r.top,a.top,d)),a.bottom!=null&&r.bottom!=null&&(this.bottom=u.y.number(r.bottom,a.bottom,d)),a.left!=null&&r.left!=null&&(this.left=u.y.number(r.left,a.left,d)),a.right!=null&&r.right!=null&&(this.right=u.y.number(r.right,a.right,d)),this}getCenter(r,a){const d=u.ac((this.left+r-this.right)/2,0,r),p=u.ac((this.top+a-this.bottom)/2,0,a);return new u.P(d,p)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new fa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const vd=85.051129;class ma{constructor(r,a,d,p,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=r||0,this._maxZoom=a||22,this._minPitch=d??0,this._maxPitch=p??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fa,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new ma(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const a=-u.b3(r,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var d=new u.A(4);return u.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,p,y){var w=p[0],C=p[1],T=p[2],E=p[3],R=Math.sin(y),L=Math.cos(y);d[0]=w*L+T*R,d[1]=C*L+E*R,d[2]=w*-R+T*L,d[3]=C*-R+E*L}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const a=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const a=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,a,d){this._unmodified=!1,this._edgeInsets.interpolate(r,a,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const a=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(r){const a=[new u.b4(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new u.P(0,0)),p=this.pointCoordinate(new u.P(this.width,0)),y=this.pointCoordinate(new u.P(this.width,this.height)),w=this.pointCoordinate(new u.P(0,this.height)),C=Math.floor(Math.min(d.x,p.x,y.x,w.x)),T=Math.floor(Math.max(d.x,p.x,y.x,w.x)),E=1;for(let R=C-E;R<=T+E;R++)R!==0&&a.push(new u.b4(R,r))}return a}coveringTiles(r){var a,d;let p=this.coveringZoomLevel(r);const y=p;if(r.minzoom!==void 0&&p<r.minzoom)return[];r.maxzoom!==void 0&&p>r.maxzoom&&(p=r.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),C=u.Z.fromLngLat(this.center),T=Math.pow(2,p),E=[T*w.x,T*w.y,0],R=[T*C.x,T*C.y,0],L=ha.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,p);let H=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(H=p);const ee=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,re=oe=>({aabb:new pa([oe*T,0,0],[(oe+1)*T,T,0]),zoom:0,x:0,y:0,wrap:oe,fullyVisible:!1}),le=[],de=[],pe=p,ye=r.reparseOverscaled?y:p;if(this._renderWorldCopies)for(let oe=1;oe<=3;oe++)le.push(re(-oe)),le.push(re(oe));for(le.push(re(0));le.length>0;){const oe=le.pop(),be=oe.x,Se=oe.y;let Me=oe.fullyVisible;if(!Me){const tt=oe.aabb.intersects(L);if(tt===0)continue;Me=tt===2}const Ve=r.terrain?E:R,Ke=oe.aabb.distanceX(Ve),ot=oe.aabb.distanceY(Ve),dt=Math.max(Math.abs(Ke),Math.abs(ot));if(oe.zoom===pe||dt>ee+(1<<pe-oe.zoom)-2&&oe.zoom>=H){const tt=pe-oe.zoom,et=E[0]-.5-(be<<tt),yt=E[1]-.5-(Se<<tt);de.push({tileID:new u.S(oe.zoom===pe?ye:oe.zoom,oe.wrap,oe.zoom,be,Se),distanceSq:ge([R[0]-.5-be,R[1]-.5-Se]),tileDistanceToCamera:Math.sqrt(et*et+yt*yt)})}else for(let tt=0;tt<4;tt++){const et=(be<<1)+tt%2,yt=(Se<<1)+(tt>>1),jt=oe.zoom+1;let rt=oe.aabb.quadrant(tt);if(r.terrain){const lt=new u.S(jt,oe.wrap,jt,et,yt),Ot=r.terrain.getMinMaxElevation(lt),Vr=(a=Ot.minElevation)!==null&&a!==void 0?a:this.elevation,Xt=(d=Ot.maxElevation)!==null&&d!==void 0?d:this.elevation;rt=new pa([rt.min[0],rt.min[1],Vr],[rt.max[0],rt.max[1],Xt])}le.push({aabb:rt,zoom:jt,x:et,y:yt,wrap:oe.wrap,fullyVisible:Me})}}return de.sort((oe,be)=>oe.distanceSq-be.distanceSq).map(oe=>oe.tileID)}resize(r,a){this.width=r,this.height=a,this.pixelsToGLUnits=[2/r,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const a=u.ac(r.lat,-85.051129,vd);return new u.P(u.O(r.lng)*this.worldSize,u.Q(a)*this.worldSize)}unproject(r){return new u.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const a=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,p=this.pointLocation(this.centerPoint,r),y=r.getElevationForLngLatZoom(p,this.tileZoom);if(!(this.elevation-y))return;const w=d+a-y,C=Math.cos(this._pitch)*this.cameraToCenterDistance/w/u.b5(1,p.lat),T=this.scaleZoom(C/this.tileSize);this._elevation=y,this._center=p,this.zoom=T}setLocationAtPoint(r,a){const d=this.pointCoordinate(a),p=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(r),w=new u.Z(y.x-(d.x-p.x),y.y-(d.y-p.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,a){return a?this.coordinatePoint(this.locationCoordinate(r),a.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,a){return this.coordinateLocation(this.pointCoordinate(r,a))}locationCoordinate(r){return u.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,a){if(a){const H=a.pointCoordinate(r);if(H!=null)return H}const d=[r.x,r.y,0,1],p=[r.x,r.y,1,1];u.af(d,d,this.pixelMatrixInverse),u.af(p,p,this.pixelMatrixInverse);const y=d[3],w=p[3],C=d[1]/y,T=p[1]/w,E=d[2]/y,R=p[2]/w,L=E===R?0:(0-E)/(R-E);return new u.Z(u.y.number(d[0]/y,p[0]/w,L)/this.worldSize,u.y.number(C,T,L)/this.worldSize)}coordinatePoint(r,a=0,d=this.pixelMatrix){const p=[r.x*this.worldSize,r.y*this.worldSize,a,1];return u.af(p,p,d),new u.P(p[0]/p[3],p[1]/p[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Ie().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ie([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,vd])}calculateTileMatrix(r){const a=r.canonical,d=this.worldSize/this.zoomScale(a.z),p=a.x+Math.pow(2,a.z)*r.wrap,y=u.an(new Float64Array(16));return u.J(y,y,[p*d,a.y*d,0]),u.K(y,y,[d/u.X,d/u.X,1]),y}calculatePosMatrix(r,a=!1){const d=r.key,p=a?this._alignedPosMatrixCache:this._posMatrixCache;if(p[d])return p[d];const y=this.calculateTileMatrix(r);return u.L(y,a?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),p[d]=new Float32Array(y),p[d]}calculateFogMatrix(r){const a=r.key,d=this._fogMatrixCache;if(d[a])return d[a];const p=this.calculateTileMatrix(r);return u.L(p,this.fogMatrix,p),d[a]=new Float32Array(p),d[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,a){a=u.ac(+a,this.minZoom,this.maxZoom);const d={center:new u.N(r.lng,r.lat),zoom:a};let p=this.lngRange;if(!this._renderWorldCopies&&p===null){const oe=179.9999999999;p=[-oe,oe]}const y=this.tileSize*this.zoomScale(d.zoom);let w=0,C=y,T=0,E=y,R=0,L=0;const{x:H,y:ee}=this.size;if(this.latRange){const oe=this.latRange;w=u.Q(oe[1])*y,C=u.Q(oe[0])*y,C-w<ee&&(R=ee/(C-w))}p&&(T=u.b3(u.O(p[0])*y,0,y),E=u.b3(u.O(p[1])*y,0,y),E<T&&(E+=y),E-T<H&&(L=H/(E-T)));const{x:re,y:le}=this.project.call({worldSize:y},r);let de,pe;const ye=Math.max(L||0,R||0);if(ye){const oe=new u.P(L?(E+T)/2:re,R?(C+w)/2:le);return d.center=this.unproject.call({worldSize:y},oe).wrap(),d.zoom+=this.scaleZoom(ye),d}if(this.latRange){const oe=ee/2;le-oe<w&&(pe=w+oe),le+oe>C&&(pe=C-oe)}if(p){const oe=(T+E)/2;let be=re;this._renderWorldCopies&&(be=u.b3(re,oe-y/2,oe+y/2));const Se=H/2;be-Se<T&&(de=T+Se),be+Se>E&&(de=E-Se)}if(de!==void 0||pe!==void 0){const oe=new u.P(de??re,pe??le);d.center=this.unproject.call({worldSize:y},oe).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:a,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=d,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,a=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let p=u.an(new Float64Array(16));u.K(p,p,[this.width/2,-this.height/2,1]),u.J(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=u.an(new Float64Array(16)),u.K(p,p,[1,-1,1]),u.J(p,p,[-1,-1,0]),u.K(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),C=y-w*this._pixelPerMeter/Math.cos(this._pitch),T=w<0?C:y,E=Math.PI/2+this._pitch,R=this._fov*(.5+r.y/this.height),L=Math.sin(R)*T/Math.sin(u.ac(Math.PI-E-R,.01,Math.PI-.01)),H=this.getHorizon(),ee=2*Math.atan(H/this.cameraToCenterDistance)*(.5+r.y/(2*H)),re=Math.sin(ee)*T/Math.sin(u.ac(Math.PI-E-ee,.01,Math.PI-.01)),le=Math.min(L,re);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*le+T),this.nearZ=this.height/50,p=new Float64Array(16),u.b6(p,this._fov,this.width/this.height,this.nearZ,this.farZ),p[8]=2*-r.x/this.width,p[9]=2*r.y/this.height,this.projectionMatrix=u.ae(p),u.K(p,p,[1,-1,1]),u.J(p,p,[0,0,-this.cameraToCenterDistance]),u.b7(p,p,this._pitch),u.ad(p,p,this.angle),u.J(p,p,[-a,-d,0]),this.mercatorMatrix=u.K([],p,[this.worldSize,this.worldSize,this.worldSize]),u.K(p,p,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,p),u.J(p,p,[0,0,-this.elevation]),this.modelViewProjectionMatrix=p,this.invModelViewProjectionMatrix=u.as([],p),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-a,-d,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,p);const de=this.width%2/2,pe=this.height%2/2,ye=Math.cos(this.angle),oe=Math.sin(this.angle),be=a-Math.round(a)+ye*de+oe*pe,Se=d-Math.round(d)+ye*pe+oe*de,Me=new Float64Array(p);if(u.J(Me,Me,[be>.5?be-1:be,Se>.5?Se-1:Se,0]),this.alignedModelViewProjectionMatrix=Me,p=u.as(new Float64Array(16),this.pixelMatrix),!p)throw new Error("failed to invert matrix");this.pixelMatrixInverse=p,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),a=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const a=this.getCameraPoint();if(r.length===1)return[r[0],a];{let d=a.x,p=a.y,y=a.x,w=a.y;for(const C of r)d=Math.min(d,C.x),p=Math.min(p,C.y),y=Math.max(y,C.x),w=Math.max(w,C.y);return[new u.P(d,p),new u.P(y,p),new u.P(y,w),new u.P(d,w),new u.P(d,p)]}}lngLatToCameraDepth(r,a){const d=this.locationCoordinate(r),p=[d.x*this.worldSize,d.y*this.worldSize,a,1];return u.af(p,p,this.modelViewProjectionMatrix),p[2]/p[3]}}function fl(_,r){let a,d=!1,p=null,y=null;const w=()=>{p=null,d&&(_.apply(y,a),p=setTimeout(w,r),d=!1)};return(...C)=>(d=!0,y=this,a=C,p||w(),p)}class bc{constructor(r){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let d;return a.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(d=p)}),(d&&d[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(a.length>=3&&!a.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:d,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const d=a.join("/");let p=d;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${d}`);let y=window.location.hash.replace(p,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let w=window.location.href.replace(/(#.+)?$/,y);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=fl(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const a=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,p=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,p),w=Math.round(a.lng*y)/y,C=Math.round(a.lat*y)/y,T=this._map.getBearing(),E=this._map.getPitch();let R="";if(R+=r?`/${w}/${C}/${d}`:`${d}/${C}/${w}`,(T||E)&&(R+="/"+Math.round(10*T)/10),E&&(R+=`/${Math.round(E)}`),this._hashName){const L=this._hashName;let H=!1;const ee=window.location.hash.slice(1).split("&").map(re=>{const le=re.split("=")[0];return le===L?(H=!0,`${le}=${R}`):re}).filter(re=>re);return H||ee.push(`${L}=${R}`),`#${ee.join("&")}`}return`#${R}`}}const wc={linearity:.3,easing:u.b8(0,0,.3,1)},xd=u.e({deceleration:2500,maxSpeed:1400},wc),by=u.e({deceleration:20,maxSpeed:1400},wc),Kp=u.e({deceleration:1e3,maxSpeed:360},wc),Sc=u.e({deceleration:1e3,maxSpeed:90},wc);class bd{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,a=D.now();for(;r.length>0&&a-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)a.zoom+=y.zoomDelta||0,a.bearing+=y.bearingDelta||0,a.pitch+=y.pitchDelta||0,y.panDelta&&a.pan._add(y.panDelta),y.around&&(a.around=y.around),y.pinchAround&&(a.pinchAround=y.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(a.pan.mag()){const y=gl(a.pan.mag(),d,u.e({},xd,r||{}));p.offset=a.pan.mult(y.amount/a.pan.mag()),p.center=this._map.transform.center,ml(p,y)}if(a.zoom){const y=gl(a.zoom,d,by);p.zoom=this._map.transform.zoom+y.amount,ml(p,y)}if(a.bearing){const y=gl(a.bearing,d,Kp);p.bearing=this._map.transform.bearing+u.ac(y.amount,-179,179),ml(p,y)}if(a.pitch){const y=gl(a.pitch,d,Sc);p.pitch=this._map.transform.pitch+y.amount,ml(p,y)}if(p.zoom||p.bearing){const y=a.pinchAround===void 0?a.around:a.pinchAround;p.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(p,{noMoveStart:!0})}}function ml(_,r){(!_.duration||_.duration<r.duration)&&(_.duration=r.duration,_.easing=r.easing)}function gl(_,r,a){const{maxSpeed:d,linearity:p,deceleration:y}=a,w=u.ac(_*p/(r/1e3),-d,d),C=Math.abs(w)/(y*p);return{easing:a.easing,duration:1e3*C,amount:w*(C/2)}}class On extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,a,d,p={}){const y=A.mousePos(a.getCanvas(),d),w=a.unproject(y);super(r,u.e({point:y,lngLat:w,originalEvent:d},p)),this._defaultPrevented=!1,this.target=a}}class zs extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,a,d){const p=r==="touchend"?d.changedTouches:d.touches,y=A.touchPos(a.getCanvasContainer(),p),w=y.map(T=>a.unproject(T)),C=y.reduce((T,E,R,L)=>T.add(E.div(L.length)),new u.P(0,0));super(r,{points:y,point:C,lngLats:w,lngLat:a.unproject(C),originalEvent:d}),this._defaultPrevented=!1}}class Yp extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,a,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Jp{constructor(r,a){this._map=r,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Yp(r.type,this._map,r))}mousedown(r,a){return this._mousedownPos=a,this._firePreventable(new On(r.type,this._map,r))}mouseup(r){this._map.fire(new On(r.type,this._map,r))}click(r,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new On(r.type,this._map,r))}dblclick(r){return this._firePreventable(new On(r.type,this._map,r))}mouseover(r){this._map.fire(new On(r.type,this._map,r))}mouseout(r){this._map.fire(new On(r.type,this._map,r))}touchstart(r){return this._firePreventable(new zs(r.type,this._map,r))}touchmove(r){this._map.fire(new zs(r.type,this._map,r))}touchend(r){this._map.fire(new zs(r.type,this._map,r))}touchcancel(r){this._map.fire(new zs(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class en{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new On(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new On("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new On(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class to{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class ki{constructor(r,a){this._map=r,this._tr=new to(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,a){this.isEnabled()&&r.shiftKey&&r.button===0&&(A.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(r,a){if(!this._active)return;const d=a;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=d,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const y=Math.min(p.x,d.x),w=Math.max(p.x,d.x),C=Math.min(p.y,d.y),T=Math.max(p.y,d.y);A.setTransform(this._box,`translate(${y}px,${C}px)`),this._box.style.width=w-y+"px",this._box.style.height=T-C+"px"}mouseupWindow(r,a){if(!this._active||r.button!==0)return;const d=this._startPos,p=a;if(this.reset(),A.suppressClick(),d.x!==p.x||d.y!==p.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(d,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,a){return this._map.fire(new u.k(r,{originalEvent:a}))}}function yl(_,r){if(_.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${r.length}`);const a={};for(let d=0;d<_.length;d++)a[_[d].identifier]=r[d];return a}class wd{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,a,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(p){const y=new u.P(0,0);for(const w of p)y._add(w);return y.div(p.length)}(a),this.touches=yl(d,a)))}touchmove(r,a,d){if(this.aborted||!this.centroid)return;const p=yl(d,a);for(const y in this.touches){const w=p[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(r,a,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Cc{constructor(r){this.singleTap=new wd(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,a,d){this.singleTap.touchstart(r,a,d)}touchmove(r,a,d){this.singleTap.touchmove(r,a,d)}touchend(r,a,d){const p=this.singleTap.touchend(r,a,d);if(p){const y=r.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(p)<30;if(y&&w||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class ga{constructor(r){this._tr=new to(r),this._zoomIn=new Cc({numTouches:1,numTaps:2}),this._zoomOut=new Cc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,a,d){this._zoomIn.touchstart(r,a,d),this._zoomOut.touchstart(r,a,d)}touchmove(r,a,d){this._zoomIn.touchmove(r,a,d),this._zoomOut.touchmove(r,a,d)}touchend(r,a,d){const p=this._zoomIn.touchend(r,a,d),y=this._zoomOut.touchend(r,a,d),w=this._tr;return p?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(p)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $o{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const a=this._moveFunction(...r);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(r,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,a){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const p=a.length?a[0]:a;return!this._moved&&p.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(d,p))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&A.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Sd={0:1,2:2};class kc{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const a=A.mouseButton(r);this._eventButton=a}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(a,d){const p=Sd[d];return a.buttons===void 0||(a.buttons&p)!==p}(r,this._eventButton)}isValidEndEvent(r){return A.mouseButton(r)===this._eventButton}}class Cd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Tc=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=r=>{r.preventDefault()}},kd=({enable:_,clickTolerance:r,bearingDegreesPerPixelMoved:a=.8})=>{const d=new kc({checkCorrectEvent:p=>A.mouseButton(p)===0&&p.ctrlKey||A.mouseButton(p)===2});return new $o({clickTolerance:r,move:(p,y)=>({bearingDelta:(y.x-p.x)*a}),moveStateManager:d,enable:_,assignEvents:Tc})},Td=({enable:_,clickTolerance:r,pitchDegreesPerPixelMoved:a=-.5})=>{const d=new kc({checkCorrectEvent:p=>A.mouseButton(p)===0&&p.ctrlKey||A.mouseButton(p)===2});return new $o({clickTolerance:r,move:(p,y)=>({pitchDelta:(y.y-p.y)*a}),moveStateManager:d,enable:_,assignEvents:Tc})};class Rs{constructor(r,a){this._clickTolerance=r.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,a,d){return this._calculateTransform(r,a,d)}touchmove(r,a,d){if(this._active){if(!this._shouldBePrevented(d.length))return r.preventDefault(),this._calculateTransform(r,a,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,a,d){this._calculateTransform(r,a,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,a,d){d.length>0&&(this._active=!0);const p=yl(d,a),y=new u.P(0,0),w=new u.P(0,0);let C=0;for(const E in p){const R=p[E],L=this._touches[E];L&&(y._add(R),w._add(R.sub(L)),C++,p[E]=R)}if(this._touches=p,this._shouldBePrevented(C)||!w.mag())return;const T=w.div(C);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(C),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ic{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,a,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([a[0],a[1]]))}touchmove(r,a,d){if(!this._firstTwoTouches)return;r.preventDefault();const[p,y]=this._firstTwoTouches,w=_l(d,a,p),C=_l(d,a,y);if(!w||!C)return;const T=this._aroundCenter?null:w.add(C).div(2);return this._move([w,C],T,r)}touchend(r,a,d){if(!this._firstTwoTouches)return;const[p,y]=this._firstTwoTouches,w=_l(d,a,p),C=_l(d,a,y);w&&C||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function _l(_,r,a){for(let d=0;d<_.length;d++)if(_[d].identifier===a)return r[d]}function Id(_,r){return Math.log(_/r)/Math.LN2}class Pd extends Ic{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,a){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Id(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Id(this._distance,d),pinchAround:a}}}function Ed(_,r){return 180*_.angleWith(r)/Math.PI}class Md extends Ic{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,a,d){const p=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ed(this._vector,p),pinchAround:a}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const a=25/(Math.PI*this._minDiameter)*360,d=Ed(r,this._startVector);return Math.abs(d)<a}}function Pc(_){return Math.abs(_.y)>Math.abs(_.x)}class vl extends Ic{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,a,d){super.touchstart(r,a,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Pc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,a,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,y,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(p.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(r,a,d){if(this._valid!==void 0)return this._valid;const p=r.mag()>=2,y=a.mag()>=2;if(!p&&!y)return;if(!p||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const w=r.y>0==a.y>0;return Pc(r)&&Pc(a)&&w}}const Qp={panStep:100,bearingStep:15,pitchStep:10};class $i{constructor(r){this._tr=new to(r);const a=Qp;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let a=0,d=0,p=0,y=0,w=0;switch(r.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?p=1:(r.preventDefault(),w=-1);break;case 40:r.shiftKey?p=-1:(r.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(d=0,p=0),{cameraAnimation:C=>{const T=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:bo,zoom:a?Math.round(T.zoom)+a*(r.shiftKey?2:1):T.zoom,bearing:T.bearing+d*this._bearingStep,pitch:T.pitch+p*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:T.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function bo(_){return _*(2-_)}const Ad=4.000244140625;class ro{constructor(r,a){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new to(r),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let a=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=D.now(),p=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,a!==0&&a%Ad==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(p*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),r.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=r,this._delta-=a,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=A.mousePos(this._map.getCanvas(),r),d=this._tr;this._around=a.y>d.transform.height/2-d.transform.getHorizon()?u.N.convert(this._aroundCenter?d.center:d.unproject(a)):u.N.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>Ad?this._wheelZoomRate:this._defaultZoomRate;let E=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&E!==0&&(E=1/E);const R=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(R*E))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,p=this._easing;let y,w=!1;const C=D.now()-this._lastWheelEventTime;if(this._type==="wheel"&&d&&p&&C){const T=Math.min(C/200,1),E=p(T);y=u.y.number(d,a,E),T<1?this._frameId||(this._frameId=!0):w=!0}else y=a,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let a=u.b9;if(this._prevEase){const d=this._prevEase,p=(D.now()-d.start)/d.duration,y=d.easing(p+.01)-d.easing(p),w=.27/Math.sqrt(y*y+1e-4)*.01,C=Math.sqrt(.0729-w*w);a=u.b8(w,C,.25,1)}return this._prevEase={start:D.now(),duration:r,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ls{constructor(r,a){this._clickZoom=r,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class wy{constructor(r){this._tr=new to(r),this.reset()}reset(){this._active=!1}dblclick(r,a){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sy{constructor(){this._tap=new Cc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,a,d){if(!this._swipePoint)if(this._tapTime){const p=a[0],y=r.timeStamp-this._tapTime<500,w=this._tapPoint.dist(p)<30;y&&w?d.length>0&&(this._swipePoint=p,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,a,d)}touchmove(r,a,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const p=a[0],y=p.y-this._swipePoint.y;return this._swipePoint=p,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,a,d)}touchend(r,a,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const p=this._tap.touchend(r,a,d);p&&(this._tapTime=r.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ef{constructor(r,a,d){this._el=r,this._mousePan=a,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class tf{constructor(r,a,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=a,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class zd{constructor(r,a,d,p){this._el=r,this._touchZoom=a,this._touchRotate=d,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ya{constructor(r,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",r);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=a,this._container.appendChild(p);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,a){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:r,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Ni=_=>_.zoom||_.drag||_.pitch||_.rotate;class ft extends u.k{}function Ec(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Rd{constructor(r,a){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,y)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=p.type==="renderFrame"?void 0:p,C={needsRenderFrame:!1},T={},E={},R=p.touches,L=R?this._getMapTouches(R):void 0,H=L?A.touchPos(this._map.getCanvas(),L):A.mousePos(this._map.getCanvas(),p);for(const{handlerName:le,handler:de,allowed:pe}of this._handlers){if(!de.isEnabled())continue;let ye;this._blockedByActive(E,pe,le)?de.reset():de[y||p.type]&&(ye=de[y||p.type](p,H,L),this.mergeHandlerResult(C,T,ye,le,w),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||de.isActive())&&(E[le]=de)}const ee={};for(const le in this._previousActiveHandlers)E[le]||(ee[le]=w);this._previousActiveHandlers=E,(Object.keys(ee).length||Ec(C))&&(this._changes.push([C,T,ee]),this._triggerRenderFrame()),(Object.keys(E).length||Ec(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=C;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new bd(r),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,y,w]of this._listeners)A.addEventListener(p,y,p===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[r,a,d]of this._listeners)A.removeEventListener(r,a,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const a=this._map,d=a.getCanvasContainer();this._add("mapEvent",new Jp(a,r));const p=a.boxZoom=new ki(a,r);this._add("boxZoom",p),r.interactive&&r.boxZoom&&p.enable();const y=a.cooperativeGestures=new ya(a,r.cooperativeGestures);this._add("cooperativeGestures",y),r.cooperativeGestures&&y.enable();const w=new ga(a),C=new wy(a);a.doubleClickZoom=new Ls(C,w),this._add("tapZoom",w),this._add("clickZoom",C),r.interactive&&r.doubleClickZoom&&a.doubleClickZoom.enable();const T=new Sy;this._add("tapDragZoom",T);const E=a.touchPitch=new vl(a);this._add("touchPitch",E),r.interactive&&r.touchPitch&&a.touchPitch.enable(r.touchPitch);const R=kd(r),L=Td(r);a.dragRotate=new tf(r,R,L),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]),r.interactive&&r.dragRotate&&a.dragRotate.enable();const H=(({enable:ye,clickTolerance:oe})=>{const be=new kc({checkCorrectEvent:Se=>A.mouseButton(Se)===0&&!Se.ctrlKey});return new $o({clickTolerance:oe,move:(Se,Me)=>({around:Me,panDelta:Me.sub(Se)}),activateOnStart:!0,moveStateManager:be,enable:ye,assignEvents:Tc})})(r),ee=new Rs(r,a);a.dragPan=new ef(d,H,ee),this._add("mousePan",H),this._add("touchPan",ee,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&a.dragPan.enable(r.dragPan);const re=new Md,le=new Pd;a.touchZoomRotate=new zd(d,le,re,T),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&a.touchZoomRotate.enable(r.touchZoomRotate);const de=a.scrollZoom=new ro(a,()=>this._triggerRenderFrame());this._add("scrollZoom",de,["mousePan"]),r.interactive&&r.scrollZoom&&a.scrollZoom.enable(r.scrollZoom);const pe=a.keyboard=new $i(a);this._add("keyboard",pe),r.interactive&&r.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new en(a))}_add(r,a,d){this._handlers.push({handlerName:r,handler:a,allowed:d}),this._handlersById[r]=a}stop(r){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ni(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,a,d){for(const p in r)if(p!==d&&(!a||a.indexOf(p)<0))return!0;return!1}_getMapTouches(r){const a=[];for(const d of r)this._el.contains(d.target)&&a.push(d);return a}mergeHandlerResult(r,a,d,p,y){if(!d)return;u.e(r,d);const w={handlerName:p,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(a.zoom=w),d.panDelta!==void 0&&(a.drag=w),d.pitchDelta!==void 0&&(a.pitch=w),d.bearingDelta!==void 0&&(a.rotate=w)}_applyChanges(){const r={},a={},d={};for(const[p,y,w]of this._changes)p.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(p.panDelta)),p.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+p.pitchDelta),p.around!==void 0&&(r.around=p.around),p.pinchAround!==void 0&&(r.pinchAround=p.pinchAround),p.noInertia&&(r.noInertia=p.noInertia),u.e(a,y),u.e(d,w);this._updateMapTransform(r,a,d),this._changes=[]}_updateMapTransform(r,a,d){const p=this._map,y=p._getTransformForUpdate(),w=p.terrain;if(!(Ec(r)||w&&this._terrainMovement))return this._fireEvents(a,d,!0);let{panDelta:C,zoomDelta:T,bearingDelta:E,pitchDelta:R,around:L,pinchAround:H}=r;H!==void 0&&(L=H),p._stop(!0),L=L||p.transform.centerPoint;const ee=y.pointLocation(C?L.sub(C):L);E&&(y.bearing+=E),R&&(y.pitch+=R),T&&(y.zoom+=T),w?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(C)):y.setLocationAtPoint(ee,L):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(ee,L)):y.setLocationAtPoint(ee,L),p._applyUpdatedTransform(y),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(a,d,!0)}_fireEvents(r,a,d){const p=Ni(this._eventsInProgress),y=Ni(r),w={};for(const L in r){const{originalEvent:H}=r[L];this._eventsInProgress[L]||(w[`${L}start`]=H),this._eventsInProgress[L]=r[L]}!p&&y&&this._fireEvent("movestart",y.originalEvent);for(const L in w)this._fireEvent(L,w[L]);y&&this._fireEvent("move",y.originalEvent);for(const L in r){const{originalEvent:H}=r[L];this._fireEvent(L,H)}const C={};let T;for(const L in this._eventsInProgress){const{handlerName:H,originalEvent:ee}=this._eventsInProgress[L];this._handlersById[H].isActive()||(delete this._eventsInProgress[L],T=a[H]||ee,C[`${L}end`]=T)}for(const L in C)this._fireEvent(L,C[L]);const E=Ni(this._eventsInProgress),R=(p||y)&&!E;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const L=this._map._getTransformForUpdate();L.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(L)}if(d&&R){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!L||!L.essential&&D.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:T})),H(this._map.getBearing())&&this._map.resetNorth()):(H(L.bearing||this._map.getBearing())&&(L.bearing=0),L.freezeElevation=!0,this._map.easeTo(L,{originalEvent:T})),this._updatingCamera=!1}}_fireEvent(r,a){this._map.fire(new u.k(r,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new ft("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class rf extends u.E{constructor(r,a){super(),this._renderFrameCallback=()=>{const d=Math.min((D.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,a){return this.jumpTo({center:r},a)}panBy(r,a,d){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},a),d)}panTo(r,a,d){return this.easeTo(u.e({center:r},a),d)}getZoom(){return this.transform.zoom}setZoom(r,a){return this.jumpTo({zoom:r},a),this}zoomTo(r,a,d){return this.easeTo(u.e({zoom:r},a),d)}zoomIn(r,a){return this.zoomTo(this.getZoom()+1,r,a),this}zoomOut(r,a){return this.zoomTo(this.getZoom()-1,r,a),this}getBearing(){return this.transform.bearing}setBearing(r,a){return this.jumpTo({bearing:r},a),this}getPadding(){return this.transform.padding}setPadding(r,a){return this.jumpTo({padding:r},a),this}rotateTo(r,a,d){return this.easeTo(u.e({bearing:r},a),d)}resetNorth(r,a){return this.rotateTo(0,u.e({duration:1e3},r),a),this}resetNorthPitch(r,a){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),a),this}snapToNorth(r,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,a):this}getPitch(){return this.transform.pitch}setPitch(r,a){return this.jumpTo({pitch:r},a),this}cameraForBounds(r,a){r=Ie.convert(r).adjustAntiMeridian();const d=a&&a.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,a)}_cameraForBoxAndBearing(r,a,d,p){const y={top:0,bottom:0,right:0,left:0};if(typeof(p=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const tt=p.padding;p.padding={top:tt,bottom:tt,right:tt,left:tt}}p.padding=u.e(y,p.padding);const w=this.transform,C=w.padding,T=new Ie(r,a),E=w.project(T.getNorthWest()),R=w.project(T.getNorthEast()),L=w.project(T.getSouthEast()),H=w.project(T.getSouthWest()),ee=u.ba(-d),re=E.rotate(ee),le=R.rotate(ee),de=L.rotate(ee),pe=H.rotate(ee),ye=new u.P(Math.max(re.x,le.x,pe.x,de.x),Math.max(re.y,le.y,pe.y,de.y)),oe=new u.P(Math.min(re.x,le.x,pe.x,de.x),Math.min(re.y,le.y,pe.y,de.y)),be=ye.sub(oe),Se=(w.width-(C.left+C.right+p.padding.left+p.padding.right))/be.x,Me=(w.height-(C.top+C.bottom+p.padding.top+p.padding.bottom))/be.y;if(Me<0||Se<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ve=Math.min(w.scaleZoom(w.scale*Math.min(Se,Me)),p.maxZoom),Ke=u.P.convert(p.offset),ot=new u.P((p.padding.left-p.padding.right)/2,(p.padding.top-p.padding.bottom)/2).rotate(u.ba(d)),dt=Ke.add(ot).mult(w.scale/w.zoomScale(Ve));return{center:w.unproject(E.add(L).div(2).sub(dt)),zoom:Ve,bearing:d}}fitBounds(r,a,d){return this._fitInternal(this.cameraForBounds(r,a),a,d)}fitScreenCoordinates(r,a,d,p,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(a)),d,p),p,y)}_fitInternal(r,a,d){return r?(delete(a=u.e(r,a)).padding,a.linear?this.easeTo(a,d):this.flyTo(a,d)):this}jumpTo(r,a){this.stop();const d=this._getTransformForUpdate();let p=!1,y=!1,w=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(p=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=u.N.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(y=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(w=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new u.k("movestart",a)).fire(new u.k("move",a)),p&&this.fire(new u.k("zoomstart",a)).fire(new u.k("zoom",a)).fire(new u.k("zoomend",a)),y&&this.fire(new u.k("rotatestart",a)).fire(new u.k("rotate",a)).fire(new u.k("rotateend",a)),w&&this.fire(new u.k("pitchstart",a)).fire(new u.k("pitch",a)).fire(new u.k("pitchend",a)),this.fire(new u.k("moveend",a))}calculateCameraOptionsFromTo(r,a,d,p=0){const y=u.Z.fromLngLat(r,a),w=u.Z.fromLngLat(d,p),C=w.x-y.x,T=w.y-y.y,E=w.z-y.z,R=Math.hypot(C,T,E);if(R===0)throw new Error("Can't calculate camera options with same From and To");const L=Math.hypot(C,T),H=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),ee=180*Math.atan2(C,-T)/Math.PI;let re=180*Math.acos(L/R)/Math.PI;return re=E<0?90-re:90+re,{center:w.toLngLat(),zoom:H,pitch:re,bearing:ee}}easeTo(r,a){var d;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b9},r)).animate===!1||!r.essential&&D.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),y=p.zoom,w=p.bearing,C=p.pitch,T=p.padding,E="bearing"in r?this._normalizeBearing(r.bearing,w):w,R="pitch"in r?+r.pitch:C,L="padding"in r?r.padding:p.padding,H=u.P.convert(r.offset);let ee=p.centerPoint.add(H);const re=p.pointLocation(ee),{center:le,zoom:de}=p.getConstrained(u.N.convert(r.center||re),(d=r.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(le,p);const pe=p.project(re),ye=p.project(le).sub(pe),oe=p.zoomScale(de-y);let be,Se;r.around&&(be=u.N.convert(r.around),Se=p.locationPoint(be));const Me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||de!==y,this._rotating=this._rotating||w!==E,this._pitching=this._pitching||R!==C,this._padding=!p.isPaddingEqual(L),this._easeId=r.easeId,this._prepareEase(a,r.noMoveStart,Me),this.terrain&&this._prepareElevation(le),this._ease(Ve=>{if(this._zooming&&(p.zoom=u.y.number(y,de,Ve)),this._rotating&&(p.bearing=u.y.number(w,E,Ve)),this._pitching&&(p.pitch=u.y.number(C,R,Ve)),this._padding&&(p.interpolatePadding(T,L,Ve),ee=p.centerPoint.add(H)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ve),be)p.setLocationAtPoint(be,Se);else{const Ke=p.zoomScale(p.zoom-y),ot=de>y?Math.min(2,oe):Math.max(.5,oe),dt=Math.pow(ot,1-Ve),tt=p.unproject(pe.add(ye.mult(Ve*dt)).mult(Ke));p.setLocationAtPoint(p.renderWorldCopies?tt.wrap():tt,ee)}this._applyUpdatedTransform(p),this._fireMoveEvents(a)},Ve=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(a,Ve)},r),this}_prepareEase(r,a,d={}){this._moving=!0,a||d.moving||this.fire(new u.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&a!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(a-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=a}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){const a=r.getCameraPosition(),d=this.terrain.getElevationForLngLatZoom(a.lngLat,r.zoom);if(a.altitude<d){const p=this.calculateCameraOptionsFromTo(a.lngLat,d,r.center,r.elevation);return{pitch:p.pitch,zoom:p.zoom}}return{}}_applyUpdatedTransform(r){const a=[];if(this.terrain&&a.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&a.push(p=>this.transformCameraUpdate(p)),!a.length)return;const d=r.clone();for(const p of a){const y=d.clone(),{center:w,zoom:C,pitch:T,bearing:E,elevation:R}=p(y);w&&(y.center=w),C!==void 0&&(y.zoom=C),T!==void 0&&(y.pitch=T),E!==void 0&&(y.bearing=E),R!==void 0&&(y.elevation=R),d.apply(y)}this.transform.apply(d)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const d=this._zooming,p=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new u.k("zoomend",r)),p&&this.fire(new u.k("rotateend",r)),y&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,a){var d;if(!r.essential&&D.prefersReducedMotion){const lt=u.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(lt,a)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},r);const p=this._getTransformForUpdate(),y=p.zoom,w=p.bearing,C=p.pitch,T=p.padding,E="bearing"in r?this._normalizeBearing(r.bearing,w):w,R="pitch"in r?+r.pitch:C,L="padding"in r?r.padding:p.padding,H=u.P.convert(r.offset);let ee=p.centerPoint.add(H);const re=p.pointLocation(ee),{center:le,zoom:de}=p.getConstrained(u.N.convert(r.center||re),(d=r.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(le,p);const pe=p.zoomScale(de-y),ye=p.project(re),oe=p.project(le).sub(ye);let be=r.curve;const Se=Math.max(p.width,p.height),Me=Se/pe,Ve=oe.mag();if("minZoom"in r){const lt=u.ac(Math.min(r.minZoom,y,de),p.minZoom,p.maxZoom),Ot=Se/p.zoomScale(lt-y);be=Math.sqrt(Ot/Ve*2)}const Ke=be*be;function ot(lt){const Ot=(Me*Me-Se*Se+(lt?-1:1)*Ke*Ke*Ve*Ve)/(2*(lt?Me:Se)*Ke*Ve);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function dt(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function tt(lt){return(Math.exp(lt)+Math.exp(-lt))/2}const et=ot(!1);let yt=function(lt){return tt(et)/tt(et+be*lt)},jt=function(lt){return Se*((tt(et)*(dt(Ot=et+be*lt)/tt(Ot))-dt(et))/Ke)/Ve;var Ot},rt=(ot(!0)-et)/be;if(Math.abs(Ve)<1e-6||!isFinite(rt)){if(Math.abs(Se-Me)<1e-6)return this.easeTo(r,a);const lt=Me<Se?-1:1;rt=Math.abs(Math.log(Me/Se))/be,jt=()=>0,yt=Ot=>Math.exp(lt*be*Ot)}return r.duration="duration"in r?+r.duration:1e3*rt/("screenSpeed"in r?+r.screenSpeed/be:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=w!==E,this._pitching=R!==C,this._padding=!p.isPaddingEqual(L),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(le),this._ease(lt=>{const Ot=lt*rt,Vr=1/yt(Ot);p.zoom=lt===1?de:y+p.scaleZoom(Vr),this._rotating&&(p.bearing=u.y.number(w,E,lt)),this._pitching&&(p.pitch=u.y.number(C,R,lt)),this._padding&&(p.interpolatePadding(T,L,lt),ee=p.centerPoint.add(H)),this.terrain&&!r.freezeElevation&&this._updateElevation(lt);const Xt=lt===1?le:p.unproject(ye.add(oe.mult(jt(Ot))).mult(Vr));p.setLocationAtPoint(p.renderWorldCopies?Xt.wrap():Xt,ee),this._applyUpdatedTransform(p),this._fireMoveEvents(a)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,a){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,a)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,a,d){d.animate===!1||d.duration===0?(r(1),a()):(this._easeStart=D.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,a){r=u.b3(r,-180,180);const d=Math.abs(r-a);return Math.abs(r-360-a)<d&&(r-=360),Math.abs(r+360-a)<d&&(r+=360),r}_normalizeCenter(r,a){if(!a.renderWorldCopies||a.lngRange)return;const d=r.lng-a.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const _a={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class va{constructor(r=_a){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,a){const d=this._map._getUIString(`AttributionControl.${a}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const a=this._map.style.sourceCaches;for(const p in a){const y=a[p];if(y.used||y.usedForTerrain){const w=y.getSource();w.attribution&&r.indexOf(w.attribution)<0&&r.push(w.attribution)}}r=r.filter(p=>String(p).trim()),r.sort((p,y)=>p.length-y.length),r=r.filter((p,y)=>{for(let w=y+1;w<r.length;w++)if(r[w].indexOf(p)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ld{constructor(r={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const d=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const a=A.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class cr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const a=++this._id;return this._queue.push({callback:r,id:a,cancelled:!1}),a}remove(r){const a=this._currentlyRunning,d=a?this._queue.concat(a):this._queue;for(const p of d)if(p.id===r)return void(p.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const d of a)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Dd=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Cy extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,a){this.sourceCache.update(r,a),this._renderableTilesKeys=[];const d={};for(const p of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))d[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.posMatrix=new Float64Array(16),u.aP(p.posMatrix,0,u.X,0,u.X,0,1),this._tiles[p.key]=new Nr(p,this.tileSize));for(const p in this._tiles)d[p]||delete this._tiles[p]}freeRtt(r){for(const a in this._tiles){const d=this._tiles[a];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const a={};for(const d of this._renderableTilesKeys){const p=this._tiles[d].tileID;if(p.canonical.equals(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16),u.aP(y.posMatrix,0,u.X,0,u.X,0,1),a[d]=y}else if(p.canonical.isChildOf(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const w=p.canonical.z-r.canonical.z,C=p.canonical.x-(p.canonical.x>>w<<w),T=p.canonical.y-(p.canonical.y>>w<<w),E=u.X>>w;u.aP(y.posMatrix,0,E,0,E,0,1),u.J(y.posMatrix,y.posMatrix,[-C*E,-T*E,0]),a[d]=y}else if(r.canonical.isChildOf(p.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const w=r.canonical.z-p.canonical.z,C=r.canonical.x-(r.canonical.x>>w<<w),T=r.canonical.y-(r.canonical.y>>w<<w),E=u.X>>w;u.aP(y.posMatrix,0,u.X,0,u.X,0,1),u.J(y.posMatrix,y.posMatrix,[C*E,T*E,0]),u.K(y.posMatrix,y.posMatrix,[1/2**w,1/2**w,0]),a[d]=y}}return a}getSourceTile(r,a){const d=this.sourceCache._source;let p=r.overscaledZ-this.deltaZoom;if(p>d.maxzoom&&(p=d.maxzoom),p<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(p).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!y||!y.dem)&&a)for(;p>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(r.scaledTo(p--).key);return y}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=r)}}class Bd{constructor(r,a,d){this.painter=r,this.sourceCache=new Cy(a),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,a,d,p=u.X){var y;if(!(a>=0&&a<p&&d>=0&&d<p))return 0;const w=this.getTerrainData(r),C=(y=w.tile)===null||y===void 0?void 0:y.dem;if(!C)return 0;const T=function(re,le,de){var pe=le[0],ye=le[1];return re[0]=de[0]*pe+de[4]*ye+de[12],re[1]=de[1]*pe+de[5]*ye+de[13],re}([],[a/p*u.X,d/p*u.X],w.u_terrain_matrix),E=[T[0]*C.dim,T[1]*C.dim],R=Math.floor(E[0]),L=Math.floor(E[1]),H=E[0]-R,ee=E[1]-L;return C.get(R,L)*(1-H)*(1-ee)+C.get(R+1,L)*H*(1-ee)+C.get(R,L+1)*(1-H)*ee+C.get(R+1,L+1)*H*ee}getElevationForLngLatZoom(r,a){if(!u.bb(a,r.wrap()))return 0;const{tileID:d,mercatorX:p,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(r,a);return this.getElevation(d,p%u.X,y%u.X,u.X)}getElevation(r,a,d,p=u.X){return this.getDEMElevation(r,a,d,p)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const p=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Re(p,y,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Re(p,new u.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const a=this.sourceCache.getSourceTile(r,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const p=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new Re(p,a.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),a.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const d=a&&a+a.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const p=this.sourceCache.sourceCache._source.maxzoom;let y=r.canonical.z-a.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=p?y=r.canonical.z-p:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=r.canonical.x-(r.canonical.x>>y<<y),C=r.canonical.y-(r.canonical.y>>y<<y),T=u.bc(new Float64Array(16),[1/(u.X<<y),1/(u.X<<y),0]);u.J(T,T,[w*u.X,C*u.X,0]),this._demMatrixCache[r.key]={matrix:T,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(r){const a=this.painter,d=a.width/devicePixelRatio,p=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Re(a.context,{width:d,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Re(a.context,{width:d,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(d,p,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,d,p))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,w=0;y<this._coordsTextureSize;y++)for(let C=0;C<this._coordsTextureSize;C++,w+=4)a[w+0]=255&C,a[w+1]=255&y,a[w+2]=C>>8<<4|y>>8,a[w+3]=0;const d=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),p=new Re(r,d,r.gl.RGBA,{premultiply:!1});return p.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),d=this.painter.context,p=d.gl,y=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(y,C-w-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null);const T=a[0]+(a[2]>>4<<8),E=a[1]+((15&a[2])<<8),R=this.coordsIndex[255-a[3]],L=R&&this.sourceCache.getTileByID(R);if(!L)return null;const H=this._coordsTextureSize,ee=(1<<L.tileID.canonical.z)*H;return new u.Z((L.tileID.canonical.x*H+T)/ee+L.tileID.wrap,(L.tileID.canonical.y*H+E)/ee,this.getElevation(L.tileID,T,E,H))}depthAtPoint(r){const a=new Uint8Array(4),d=this.painter.context,p=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,a=new u.bd,d=new u.aY,p=this.meshSize,y=u.X/p,w=p*p;for(let L=0;L<=p;L++)for(let H=0;H<=p;H++)a.emplaceBack(H*y,L*y,0);for(let L=0;L<w;L+=p+1)for(let H=0;H<p;H++)d.emplaceBack(H+L,p+H+L+1,p+H+L+2),d.emplaceBack(H+L,p+H+L+2,H+L+1);const C=a.length,T=C+2*(p+1);for(const L of[0,1])for(let H=0;H<=p;H++)for(const ee of[0,1])a.emplaceBack(H*y,L*u.X,ee);for(let L=0;L<2*p;L+=2)d.emplaceBack(T+L,T+L+1,T+L+3),d.emplaceBack(T+L,T+L+3,T+L+2),d.emplaceBack(C+L,C+L+3,C+L+1),d.emplaceBack(C+L,C+L+2,C+L+3);const E=a.length,R=E+2*(p+1);for(const L of[0,1])for(let H=0;H<=p;H++)for(const ee of[0,1])a.emplaceBack(L*u.X,H*y,ee);for(let L=0;L<2*p;L+=2)d.emplaceBack(E+L,E+L+1,E+L+3),d.emplaceBack(E+L,E+L+3,E+L+2),d.emplaceBack(R+L,R+L+3,R+L+1),d.emplaceBack(R+L,R+L+2,R+L+3);return this._mesh=new vc(r.createVertexBuffer(a,Dd.members),r.createIndexBuffer(d),u.a0.simpleSegment(0,0,a.length,d.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,a){var d;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(r,a);return(d=this.getMinMaxElevation(p).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const a=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return a&&a.dem&&(d.minElevation=a.dem.min*this.exaggeration,d.maxElevation=a.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,a){const d=u.Z.fromLngLat(r.wrap()),p=(1<<a)*u.X,y=d.x*p,w=d.y*p,C=Math.floor(y/u.X),T=Math.floor(w/u.X);return{tileID:new u.S(a,0,a,C,T),mercatorX:y,mercatorY:w}}}class ky{constructor(r,a,d){this._context=r,this._size=a,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Re(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(d.texture),{id:r,fbo:a,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>r.id!==a),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const xa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class nf{constructor(r,a){this.painter=r,this.terrain=a,this.pool=new ky(r.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(a)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const p=r.sourceCaches[d].getVisibleCoordinates();for(const y of p){const w=this.terrain.sourceCache.getTerrainCoords(y);for(const C in w)this._coordsDescendingInv[d][C]||(this._coordsDescendingInv[d][C]=[]),this._coordsDescendingInv[d][C].push(w[C])}}this._coordsDescendingInvStr={};for(const d of r._order){const p=r._layers[d],y=p.source;if(xa[p.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const w in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][w]=this._coordsDescendingInv[y][w].map(C=>C.key).sort().join()}}for(const d of this._renderableTiles)for(const p in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[p][d.tileID.key];y&&y!==d.rttCoords[p]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const a=r.type,d=this.painter,p=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(xa[a]&&(this._prevType&&xa[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(r.id),!p))return!0;if(xa[this._prevType]||xa[a]&&p){this._prevType=a;const y=this._stacks.length-1,w=this._stacks[y]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(Xp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[y]){const E=this.pool.getObjectForId(C.rtt[y].id);if(E.stamp===C.rtt[y].stamp){this.pool.useObject(E);continue}}const T=this.pool.getOrCreateFreeObject();this.pool.useObject(T),this.pool.stampObject(T),C.rtt[y]={id:T.id,stamp:T.stamp},d.context.bindFramebuffer.set(T.fbo.framebuffer),d.context.clear({color:u.aM.transparent,stencil:0}),d.currentStencilSource=void 0;for(let E=0;E<w.length;E++){const R=d.style._layers[w[E]],L=R.source?this._coordsDescendingInv[R.source][C.tileID.key]:[C.tileID];d.context.viewport.set([0,0,T.fbo.width,T.fbo.height]),d._renderTileClippingMasks(R,L),d.renderLayer(d,d.style.sourceCaches[R.source],R,L),R.source&&(C.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][C.tileID.key])}}return Xp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xa[a]}return!1}}const Fd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},of=k,Ty={hash:!1,interactive:!0,bearingSnap:7,attributionControl:_a,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Od=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},Iy={showCompass:!0,showZoom:!0,visualizePitch:!1};class Py{constructor(r,a,d=!1){this.mousedown=w=>{this.startMouse(u.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),A.mousePos(this.element,w)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,A.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const p=r.dragRotate._mouseRotate.getClickTolerance(),y=r.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=kd({clickTolerance:p,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:C,bearingDegreesPerPixelMoved:T=.8})=>{const E=new Cd;return new $o({clickTolerance:C,move:(R,L)=>({bearingDelta:(L.x-R.x)*T}),moveStateManager:E,enable:w,assignEvents:Od})})({clickTolerance:p,enable:!0}),this.map=r,d&&(this.mousePitch=Td({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:C,pitchDegreesPerPixelMoved:T=-.5})=>{const E=new Cd;return new $o({clickTolerance:C,move:(R,L)=>({pitchDelta:(L.y-R.y)*T}),moveStateManager:E,enable:w,assignEvents:Od})})({clickTolerance:y,enable:!0})),A.addEventListener(a,"mousedown",this.mousedown),A.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(a,"touchcancel",this.reset)}startMouse(r,a){this.mouseRotate.dragStart(r,a),this.mousePitch&&this.mousePitch.dragStart(r,a),A.disableDrag()}startTouch(r,a){this.touchRotate.dragStart(r,a),this.touchPitch&&this.touchPitch.dragStart(r,a),A.disableDrag()}moveMouse(r,a){const d=this.map,{bearingDelta:p}=this.mouseRotate.dragMove(r,a)||{};if(p&&d.setBearing(d.getBearing()+p),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(r,a)||{};y&&d.setPitch(d.getPitch()+y)}}moveTouch(r,a){const d=this.map,{bearingDelta:p}=this.touchRotate.dragMove(r,a)||{};if(p&&d.setBearing(d.getBearing()+p),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(r,a)||{};y&&d.setPitch(d.getPitch()+y)}}off(){const r=this.element;A.removeEventListener(r,"mousedown",this.mousedown),A.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let Ti;function jr(_,r,a){const d=new u.N(_.lng,_.lat);if(_=new u.N(_.lng,_.lat),r){const p=new u.N(_.lng-360,_.lat),y=new u.N(_.lng+360,_.lat),w=a.locationPoint(_).distSqr(r);a.locationPoint(p).distSqr(r)<w?_=p:a.locationPoint(y).distSqr(r)<w&&(_=y)}for(;Math.abs(_.lng-a.center.lng)>180;){const p=a.locationPoint(_);if(p.x>=0&&p.y>=0&&p.x<=a.width&&p.y<=a.height)break;_.lng>a.center.lng?_.lng-=360:_.lng+=360}return _.lng!==d.lng&&a.locationPoint(_).y>a.height/2-a.getHorizon()?_:d}const ba={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Mc(_,r,a){const d=_.classList;for(const p in ba)d.remove(`maplibregl-${a}-anchor-${p}`);d.add(`maplibregl-${a}-anchor-${r}`)}class Ac extends u.E{constructor(r){if(super(),this._onKeyPress=a=>{const d=a.code,p=a.charCode||a.keyCode;d!=="Space"&&d!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=a=>{const d=a.originalEvent.target,p=this._element;this._popup&&(d===p||p.contains(d))&&this.togglePopup()},this._update=a=>{var d;if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?jr(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${ba[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${y}`),D.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div");const a=A.createNS("http://www.w3.org/2000/svg","svg"),d=41,p=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${d}px`),a.setAttributeNS(null,"width",`${p}px`),a.setAttributeNS(null,"viewBox",`0 0 ${p} ${d}`);const y=A.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const w=A.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const C=A.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const T=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of T){const ye=A.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",pe.rx),ye.setAttributeNS(null,"ry",pe.ry),C.appendChild(ye)}const E=A.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill",this._color);const R=A.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),E.appendChild(R);const L=A.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"opacity","0.25"),L.setAttributeNS(null,"fill","#000000");const H=A.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),L.appendChild(H);const ee=A.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const re=A.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const le=A.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");const de=A.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#FFFFFF"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962"),re.appendChild(le),re.appendChild(de),w.appendChild(C),w.appendChild(E),w.appendChild(L),w.appendChild(ee),w.appendChild(re),a.appendChild(w),a.setAttributeNS(null,"height",d*this._scale+"px"),a.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(a),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),Mc(this._element,this._anchor,"marker"),r&&r.className)for(const a of r.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const p=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var a,d;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const p=this._map,y=p.terrain.depthAtPoint(this._pos),w=p.terrain.getElevationForLngLatZoom(this._lngLat,p.transform.tileZoom);if(p.transform.lngLatToCameraDepth(this._lngLat,w)-y<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/p.transform._pixelPerMeter,T=Math.sin(p.getPitch()*Math.PI/180)*C,E=p.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),R=p.transform.lngLatToCameraDepth(this._lngLat,w+T)-E>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,a){return r===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const sf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let xl=0,bl=!1;const wo={maxWidth:100,unit:"metric"};function wl(_,r,a){const d=a&&a.maxWidth||100,p=_._container.clientHeight/2,y=_.unproject([0,p]),w=_.unproject([d,p]),C=y.distanceTo(w);if(a&&a.unit==="imperial"){const T=3.2808*C;T>5280?gt(r,d,T/5280,_._getUIString("ScaleControl.Miles")):gt(r,d,T,_._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?gt(r,d,C/1852,_._getUIString("ScaleControl.NauticalMiles")):C>=1e3?gt(r,d,C/1e3,_._getUIString("ScaleControl.Kilometers")):gt(r,d,C,_._getUIString("ScaleControl.Meters"))}function gt(_,r,a,d){const p=function(y){const w=Math.pow(10,`${Math.floor(y)}`.length-1);let C=y/w;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(T){const E=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*E)/E}(C),w*C}(a);_.style.width=r*(p/a)+"px",_.innerHTML=`${p}&nbsp;${d}`}const Dt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},zc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Rc(_){if(_){if(typeof _=="number"){const r=Math.round(Math.abs(_)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,_),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-_),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(_,0),right:new u.P(-_,0)}}if(_ instanceof u.P||Array.isArray(_)){const r=u.P.convert(_);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(_.center||[0,0]),top:u.P.convert(_.top||[0,0]),"top-left":u.P.convert(_["top-left"]||[0,0]),"top-right":u.P.convert(_["top-right"]||[0,0]),bottom:u.P.convert(_.bottom||[0,0]),"bottom-left":u.P.convert(_["bottom-left"]||[0,0]),"bottom-right":u.P.convert(_["bottom-right"]||[0,0]),left:u.P.convert(_.left||[0,0]),right:u.P.convert(_.right||[0,0])}}return Rc(new u.P(0,0))}const $d=k;g.AJAXError=u.bh,g.Evented=u.E,g.LngLat=u.N,g.MercatorCoordinate=u.Z,g.Point=u.P,g.addProtocol=u.bi,g.config=u.a,g.removeProtocol=u.bj,g.AttributionControl=va,g.BoxZoomHandler=ki,g.CanvasSource=un,g.CooperativeGesturesHandler=ya,g.DoubleClickZoomHandler=Ls,g.DragPanHandler=ef,g.DragRotateHandler=tf,g.EdgeInsets=fa,g.FullscreenControl=class extends u.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var r;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=a==null?void 0:a.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},g.GeoJSONSource=Sr,g.GeolocateControl=class extends u.E{constructor(_){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const a=new u.N(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,p=this._map.getBearing(),y=u.e({bearing:p},this.options.fitBoundsOptions),w=Ie.fromLngLat(a,d);this._map.fitBounds(w,y,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const a=new u.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&bl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ac({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ac({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},sf,_)}onAdd(_){return this._map=_,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(r=!1){if(Ti!==void 0&&!r)return Ti;if(window.navigator.permissions===void 0)return Ti=!!window.navigator.geolocation,Ti;try{Ti=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ti=!!window.navigator.geolocation}return Ti})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,xl=0,bl=!1}_isOutOfMapMaxBounds(_){const r=this._map.getMaxBounds(),a=_.coords;return r&&(a.longitude<r.getWest()||a.longitude>r.getEast()||a.latitude<r.getSouth()||a.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),r=_.getSouthEast(),a=_.getNorthEast(),d=r.distanceTo(a),p=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":xl--,bl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),xl++,xl>1?(_={maximumAge:6e5,timeout:0},bl=!0):(_=this.options.positionOptions,bl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},g.Hash=bc,g.ImageSource=_n,g.KeyboardHandler=$i,g.LngLatBounds=Ie,g.LogoControl=Ld,g.Map=class extends rf{constructor(_){u.bf.mark(u.bg.create);const r=Object.assign(Object.assign({},Ty),_);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ma(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new cr,this._controls=[],this._mapId=u.a4(),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Fd),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=U.addThrottleControl(()=>this.isMoving()),this._requestManager=new K(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const d=fl(p=>{this._trackResize&&!this._removed&&(this.resize(p),this.redraw())},50);this._resizeObserver=new ResizeObserver(p=>{a?d(p):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Rd(this,r),this._hash=r.hash&&new bc(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,u.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new va(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Ld,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new u.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new u.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new u.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(_,r){if(r===void 0&&(r=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=_.onAdd(this);this._controls.push(_);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(_);return r>-1&&this._controls.splice(r,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,r,a,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,r,a,d)}resize(_){var r;const a=this._containerDimensions(),d=a[0],p=a[1],y=this._getClampedPixelRatio(d,p);if(this._resizeCanvas(d,p,y),this.painter.resize(d,p,y),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const T=this._getClampedPixelRatio(d,p);this._resizeCanvas(d,p,T),this.painter.resize(d,p,T)}this.transform.resize(d,p),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,p);const w=!this._moving;return w&&(this.stop(),this.fire(new u.k("movestart",_)).fire(new u.k("move",_))),this.fire(new u.k("resize",_)),w&&this.fire(new u.k("moveend",_)),this}_getClampedPixelRatio(_,r){const{0:a,1:d}=this._maxCanvasSize,p=this.getPixelRatio(),y=_*p,w=r*p;return Math.min(y>a?a/y:1,w>d?d/w:1)*p}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Ie.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(u.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(u.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,r,a){if(_==="mouseenter"||_==="mouseover"){let d=!1;return{layers:r,listener:a,delegates:{mousemove:y=>{const w=r.filter(T=>this.getLayer(T)),C=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];C.length?d||(d=!0,a.call(this,new On(_,this,y.originalEvent,{features:C}))):d=!1},mouseout:()=>{d=!1}}}}if(_==="mouseleave"||_==="mouseout"){let d=!1;return{layers:r,listener:a,delegates:{mousemove:w=>{const C=r.filter(T=>this.getLayer(T));(C.length!==0?this.queryRenderedFeatures(w.point,{layers:C}):[]).length?d=!0:d&&(d=!1,a.call(this,new On(_,this,w.originalEvent)))},mouseout:w=>{d&&(d=!1,a.call(this,new On(_,this,w.originalEvent)))}}}}{const d=p=>{const y=r.filter(C=>this.getLayer(C)),w=y.length!==0?this.queryRenderedFeatures(p.point,{layers:y}):[];w.length&&(p.features=w,a.call(this,p),delete p.features)};return{layers:r,listener:a,delegates:{[_]:d}}}}_saveDelegatedListener(_,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(r)}_removeDelegatedListener(_,r,a){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const d=this._delegatedListeners[_];for(let p=0;p<d.length;p++){const y=d[p];if(y.listener===a&&y.layers.length===r.length&&y.layers.every(w=>r.includes(w))){for(const w in y.delegates)this.off(w,y.delegates[w]);return void d.splice(p,1)}}}on(_,r,a){if(a===void 0)return super.on(_,r);const d=this._createDelegatedListener(_,typeof r=="string"?[r]:r,a);this._saveDelegatedListener(_,d);for(const p in d.delegates)this.on(p,d.delegates[p]);return this}once(_,r,a){if(a===void 0)return super.once(_,r);const d=typeof r=="string"?[r]:r,p=this._createDelegatedListener(_,d,a);for(const y in p.delegates){const w=p.delegates[y];p.delegates[y]=(...C)=>{this._removeDelegatedListener(_,d,a),w(...C)}}this._saveDelegatedListener(_,p);for(const y in p.delegates)this.once(y,p.delegates[y]);return this}off(_,r,a){return a===void 0?super.off(_,r):(this._removeDelegatedListener(_,typeof r=="string"?[r]:r,a),this)}queryRenderedFeatures(_,r){if(!this.style)return[];let a;const d=_ instanceof u.P||Array.isArray(_),p=d?_:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:_)||{},p instanceof u.P||typeof p[0]=="number")a=[u.P.convert(p)];else{const y=u.P.convert(p[0]),w=u.P.convert(p[1]);a=[y,new u.P(w.x,y.y),w,new u.P(y.x,w.y),y]}return this.style.queryRenderedFeatures(a,r,this.transform)}querySourceFeatures(_,r){return this.style.querySourceFeatures(_,r)}setStyle(_,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(_,r))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const r=this._locale[_];if(r==null)throw new Error(`Missing UI string '${_}'`);return r}_updateStyle(_,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,r));const a=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new ic(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,r,a):this.style.loadJSON(_,r,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ic(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,r){if(typeof _=="string"){const a=this._requestManager.transformRequest(_,"Style");u.h(a,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new u.j(d))})}else typeof _=="object"&&this._updateDiff(_,r)}_updateDiff(_,r){try{this.style.setState(_,r)&&this._update(!0)}catch(a){u.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(_,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(_,r){return this._lazyInitEmptyStyle(),this.style.addSource(_,r),this._update(!0)}isSourceLoaded(_){const r=this.style&&this.style.sourceCaches[_];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const r=this.style.sourceCaches[_.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&r.reload();for(const a in this.style._layers){const d=this.style._layers[a];d.type==="hillshade"&&d.source===_.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Bd(this.painter,r,_),this.painter.renderToTexture=new nf(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:_})),this}getTerrain(){var _,r;return(r=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const r in _){const a=_[r]._tiles;for(const d in a){const p=a[d];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,r,a={}){const{pixelRatio:d=1,sdf:p=!1,stretchX:y,stretchY:w,content:C,textFitWidth:T,textFitHeight:E}=a;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:L,data:H}=r,ee=r;return this.style.addImage(_,{data:new u.R({width:R,height:L},new Uint8Array(H)),pixelRatio:d,stretchX:y,stretchY:w,content:C,textFitWidth:T,textFitHeight:E,sdf:p,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,_),this}}{const{width:R,height:L,data:H}=D.getImageData(r);this.style.addImage(_,{data:new u.R({width:R,height:L},H),pixelRatio:d,stretchX:y,stretchY:w,content:C,textFitWidth:T,textFitHeight:E,sdf:p,version:0})}}updateImage(_,r){const a=this.style.getImage(_);if(!a)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||u.b(r)?D.getImageData(r):r,{width:p,height:y,data:w}=d;if(p===void 0||y===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==a.data.width||y!==a.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(r instanceof HTMLImageElement||u.b(r));return a.data.replace(w,C),this.style.updateImage(_,a),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return U.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,r){return this._lazyInitEmptyStyle(),this.style.addLayer(_,r),this._update(!0)}moveLayer(_,r){return this.style.moveLayer(_,r),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,r,a){return this.style.setLayerZoomRange(_,r,a),this._update(!0)}setFilter(_,r,a={}){return this.style.setFilter(_,r,a),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,r,a,d={}){return this.style.setPaintProperty(_,r,a,d),this._update(!0)}getPaintProperty(_,r){return this.style.getPaintProperty(_,r)}setLayoutProperty(_,r,a,d={}){return this.style.setLayoutProperty(_,r,a,d),this._update(!0)}getLayoutProperty(_,r){return this.style.getLayoutProperty(_,r)}setGlyphs(_,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,r,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,r,a,d=>{d||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,r,a=>{a||this._update(!0)}),this}setLight(_,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,r){return this.style.setFeatureState(_,r),this._update()}removeFeatureState(_,r){return this.style.removeFeatureState(_,r),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,r=0;return this._container&&(_=this._container.clientWidth||400,r=this._container.clientHeight||300),[_,r]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const r=this._canvasContainer=A.create("div","maplibregl-canvas-container",_);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),d=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],d);const p=this._controlContainer=A.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{y[w]=A.create("div",`maplibregl-ctrl-${w} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,r,a){this._canvas.width=Math.floor(a*_),this._canvas.height=Math.floor(a*r),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:_},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const a=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!a){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new xc(a,this.transform),Z.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const p=this.transform.zoom,y=D.now();this.style.zoomHistory.update(p,y);const w=new u.z(p,{now:y,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=w.crossFadingFactor();C===1&&C===this._crossFadingFactor||(a=!0,this._crossFadingFactor=C),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bf.mark(u.bg.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,u.bf.mark(u.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),U.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bf.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then(_=>{u.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return of}getCameraTargetElevation(){return this.transform.elevation}},g.MapMouseEvent=On,g.MapTouchEvent=zs,g.MapWheelEvent=Yp,g.Marker=Ac,g.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const r=this._map.getZoom(),a=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,a)=>{const d=this._map._getUIString(`NavigationControl.${a}`);r.title=d,r.setAttribute("aria-label",d)},this.options=u.e({},Iy,_),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Py(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,r){const a=A.create("button",_,this._container);return a.type="button",a.addEventListener("click",r),a}},g.Popup=class extends u.E{constructor(_){super(),this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?jr(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!r)return;const d=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let p=this.options.anchor;const y=Rc(this.options.offset);if(!p){const C=this._container.offsetWidth,T=this._container.offsetHeight;let E;E=d.y+y.bottom.y<T?["top"]:d.y>this._map.transform.height-T?["bottom"]:[],d.x<C/2?E.push("left"):d.x>this._map.transform.width-C/2&&E.push("right"),p=E.length===0?"bottom":E.join("-")}let w=d.add(y[p]);this.options.subpixelPositioning||(w=w.round()),A.setTransform(this._container,`${ba[p]} translate(${w.x}px,${w.y}px)`),Mc(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Dt),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=u.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const r=document.createDocumentFragment(),a=document.createElement("body");let d;for(a.innerHTML=_;d=a.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(zc);_&&_.focus()}},g.RasterDEMTileSource=or,g.RasterTileSource=Bt,g.ScaleControl=class{constructor(_){this._onMove=()=>{wl(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,wl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},wo),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},g.ScrollZoomHandler=ro,g.Style=ic,g.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},g.TwoFingersTouchPitchHandler=vl,g.TwoFingersTouchRotateHandler=Md,g.TwoFingersTouchZoomHandler=Pd,g.TwoFingersTouchZoomRotateHandler=zd,g.VectorTileSource=_r,g.VideoSource=Ir,g.addSourceType=(_,r)=>u._(void 0,void 0,void 0,function*(){if(Fn(_))throw new Error(`A source type called "${_}" already exists.`);((a,d)=>{En[a]=d})(_,r)}),g.clearPrewarmedResources=function(){const _=Ye;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Ht),Ye=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},g.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},g.getRTLTextPluginStatus=function(){return Ft().getRTLTextPluginStatus()},g.getVersion=function(){return $d},g.getWorkerCount=function(){return er.workerCount},g.getWorkerUrl=function(){return u.a.WORKER_URL},g.importScriptInWorkers=function(_){return Rt().broadcast("IS",_)},g.prewarm=function(){zt().acquire(Ht)},g.setMaxParallelImageRequests=function(_){u.a.MAX_PARALLEL_IMAGE_REQUESTS=_},g.setRTLTextPlugin=function(_,r){return Ft().setRTLTextPlugin(_,r)},g.setWorkerCount=function(_){er.workerCount=_},g.setWorkerUrl=function(_){u.a.WORKER_URL=_}});var m=o;return m})})(GT);var $F=GT.exports;const av=xx($F),NF=({treeData:e,boundary:t,currentStyle:o,onStyleChange:l,onTreeSelect:h,mapRef:m})=>{const g=J.useRef(null),u=J.useRef(null),k=J.useRef([]),M=J.useRef(null),B=(A,Z)=>{let G=[];if(A&&A.features&&A.features.length>0&&A.features.forEach(fe=>{fe.geometry.type==="Polygon"?G.push(...fe.geometry.coordinates[0]):fe.geometry.type==="MultiPolygon"&&fe.geometry.coordinates.forEach(ge=>{G.push(...ge[0])})}),G.length===0&&Z.length>0&&(G=Z.map(fe=>[fe.lon,fe.lat])),G.length===0)return{center:[0,0],bounds:null};const te=G.map(fe=>fe[0]),ne=G.map(fe=>fe[1]),W=Math.min(...te),O=Math.max(...te),U=Math.min(...ne),K=Math.max(...ne),he=(W+O)/2,ce=(U+K)/2;return{center:[he,ce],bounds:[[W,U],[O,K]]}};J.useEffect(()=>{if(u.current||e.length===0)return;const{center:A,bounds:Z}=B(t,e);M.current=Z,u.current=new av.Map({container:g.current,style:{version:8,sources:{cartodb:{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" CartoDB"}},layers:[{id:"cartodb-layer",type:"raster",source:"cartodb",minzoom:0,maxzoom:22}]},center:A,zoom:15}),u.current.on("load",()=>{Z&&u.current.fitBounds(Z,{padding:50,maxZoom:18}),t&&(u.current.addSource("boundary",{type:"geojson",data:t}),u.current.addLayer({id:"boundary-line",type:"line",source:"boundary",paint:{"line-color":"#000000","line-width":1}})),e.forEach(G=>{const te=document.createElement("div");if(te.className="tree-marker-container",te.setAttribute("data-tree-code",G.treeCode),G.crownRadius){const O=document.createElement("div");O.className="tree-canopy",O.style.width=`${G.crownRadius*2}px`,O.style.height=`${G.crownRadius*2}px`,te.appendChild(O)}const ne=document.createElement("div");ne.className="tree-marker",ne.style.backgroundColor=G.color,ne.innerHTML=`
          <svg width="14" height="14" viewBox="0 0 14 14">
            ${D(G.shape)}
          </svg>
        `,te.appendChild(ne),te.addEventListener("click",()=>{document.querySelectorAll(".tree-marker-container").forEach(O=>O.classList.remove("active")),te.classList.add("active"),h(G),u.current&&u.current.flyTo({center:[G.lon,G.lat],zoom:19,duration:1e3})});const W=new av.Marker({element:te,anchor:"center"}).setLngLat([G.lon,G.lat]).addTo(u.current);k.current.push(W)})}),u.current.addControl(new av.NavigationControl,"top-right"),m&&(m.current=u.current)},[e,t,h,m]),J.useEffect(()=>{if(!u.current)return;let A={version:8,sources:{},layers:[]};switch(o){case"osm":A.sources.osm={type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"},A.layers.push({id:"osm-layer",type:"raster",source:"osm"});break;case"cartodb":A.sources.cartodb={type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" CartoDB"},A.layers.push({id:"cartodb-layer",type:"raster",source:"cartodb"});break;case"satellite":A.sources.satellite={type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"Esri World Imagery"},A.layers.push({id:"satellite-layer",type:"raster",source:"satellite"});break}u.current.setStyle(A),u.current.once("styledata",()=>{t&&!u.current.getSource("boundary")&&(u.current.addSource("boundary",{type:"geojson",data:t}),u.current.addLayer({id:"boundary-line",type:"line",source:"boundary",paint:{"line-color":"#000000","line-width":1}}))})},[o,t]);const D=A=>{const{sides:Z,rotation:G}=A,te=6,ne=2*Math.PI/Z,W=G*Math.PI/180;let O="M ";for(let U=0;U<=Z;U++){const K=W+U*ne,he=7+te*Math.cos(K),ce=7+te*Math.sin(K);O+=`${he},${ce} `}return`<path d="${O}Z" fill="currentColor" />`};return V.jsxs(V.Fragment,{children:[V.jsx(Kt,{sx:{position:"absolute",top:10,left:10,zIndex:1,background:"white",borderRadius:1,boxShadow:2},children:V.jsxs(v4,{variant:"outlined",size:"small",children:[V.jsx(Ro,{variant:o==="osm"?"contained":"outlined",onClick:()=>l("osm"),children:"OSM"}),V.jsx(Ro,{variant:o==="cartodb"?"contained":"outlined",onClick:()=>l("cartodb"),children:"CartoDB"}),V.jsx(Ro,{variant:o==="satellite"?"contained":"outlined",onClick:()=>l("satellite"),children:"Satellite"})]})}),V.jsx("div",{ref:g,style:{flex:1,width:"100%",height:"100%"}})]})},cS=400,jF=({schoolConfig:e,selectedTree:t,onClose:o,children:l})=>V.jsxs(DT,{variant:"permanent",anchor:"right",sx:{width:cS,flexShrink:0,"& .MuiDrawer-paper":{width:cS,boxSizing:"border-box",position:"absolute"}},children:[V.jsx(UF,{schoolConfig:e}),V.jsx(WF,{selectedTree:t,onClose:o}),V.jsx(Kt,{sx:{flex:1,overflow:"auto",p:2},children:l})]}),VF=({schoolConfig:e,selectedTree:t,onClose:o,children:l,open:h,onOpen:m})=>V.jsxs(mF,{anchor:"bottom",open:h,onClose:o,onOpen:m,swipeAreaWidth:80,disableSwipeToOpen:!1,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{height:"calc(85% - 80px)",overflow:"visible",borderTopLeftRadius:16,borderTopRightRadius:16}},children:[V.jsxs(Kt,{sx:{position:"absolute",top:-80,borderTopLeftRadius:16,borderTopRightRadius:16,visibility:"visible",right:0,left:0,backgroundColor:"white",boxShadow:"0 -4px 20px rgba(0,0,0,0.15)"},children:[V.jsx(Kt,{sx:{width:40,height:5,backgroundColor:"#ddd",borderRadius:3,position:"absolute",top:8,left:"calc(50% - 20px)"}}),V.jsxs(Kt,{sx:{p:2,pt:3,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[V.jsxs(Kt,{children:[V.jsxs(Ut,{variant:"subtitle1",sx:{fontWeight:600,color:"#2d5016"},children:[" ",t?t.treeCode:(e==null?void 0:e.schoolName)||"Tree Map"]}),V.jsx(Ut,{variant:"caption",sx:{color:"text.secondary"},children:t?t.species:"Swipe up for details"})]}),V.jsx(Jg,{size:"small",onClick:m,children:V.jsx(EF,{})})]})]}),V.jsx(Kt,{sx:{overflow:"auto",height:"100%",p:2},children:l})]}),UF=({schoolConfig:e})=>V.jsxs(Kt,{sx:{background:"linear-gradient(135deg, #2d5016 0%, #4a7c2c 100%)",color:"white",p:2.5,boxShadow:2},children:[V.jsxs(Ut,{variant:"h6",sx:{fontWeight:700,mb:.5},children:[" ",(e==null?void 0:e.schoolName)||"Loading..."]}),V.jsx(Ut,{variant:"body2",sx:{opacity:.9},children:"Tree Inventory Map"})]}),WF=({selectedTree:e,onClose:t})=>V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider",bgcolor:"#f8f8f8"},children:[V.jsx(Ut,{variant:"h6",children:e?"Tree Details":"Overview"}),e&&V.jsx(Jg,{onClick:t,size:"small",children:V.jsx(HT,{})})]}),HF=({schoolConfig:e,selectedTree:t,onClose:o,children:l,mobileOpen:h,onMobileOpen:m,onMobileClose:g})=>{const u=Qo();return WT(u.breakpoints.down("md"))?V.jsx(VF,{schoolConfig:e,selectedTree:t,onClose:g||o,onOpen:m||(()=>{}),open:h,children:l}):V.jsx(jF,{schoolConfig:e,selectedTree:t,onClose:o,children:l})},GF=({tree:e,treeCount:t,currentIndex:o,onNext:l,onPrev:h})=>{const[m,g]=J.useState(!!e.photoUrl);return V.jsxs(Kt,{children:[V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,p:1.5,bgcolor:"#f8f9fa",borderRadius:1},children:[V.jsx(Ro,{size:"small",startIcon:V.jsx(DF,{}),onClick:h,variant:"outlined",children:"Previous"}),V.jsxs(Ut,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:[o+1," of ",t]}),V.jsx(Ro,{size:"small",endIcon:V.jsx(BF,{}),onClick:l,variant:"outlined",children:"Next"})]}),V.jsx(Kt,{sx:{mb:2},children:e.photoUrl?V.jsxs(V.Fragment,{children:[m&&V.jsx(Kt,{sx:{width:"100%",height:250,bgcolor:"#f0f0f0",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:V.jsx(Tp,{size:40})}),V.jsx("img",{src:e.photoUrl,alt:`Tree ${e.treeCode}`,style:{width:"100%",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:m?"none":"block"},onLoad:()=>g(!1),onError:()=>g(!1)})]}):V.jsx(ql,{sx:{bgcolor:"#f9f9f9"},children:V.jsx($u,{children:V.jsx(Ut,{variant:"body2",color:"text.secondary",fontStyle:"italic",textAlign:"center",children:"No photo available"})})})},e.treeCode),V.jsx(ql,{sx:{mb:2},children:V.jsxs($u,{children:[V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[V.jsx(Ut,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Tree Code:"}),V.jsx(Ut,{variant:"body2",children:e.treeCode})]}),V.jsx(Hs,{sx:{my:1}}),V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[V.jsx(Ut,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Genus:"}),V.jsx(Ut,{variant:"body2",children:e.genus})]}),V.jsx(Hs,{sx:{my:1}}),V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[V.jsx(Ut,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Species:"}),V.jsx(Ut,{variant:"body2",children:e.species})]}),V.jsx(Hs,{sx:{my:1}}),V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[V.jsx(Ut,{variant:"body2",color:"text.secondary",fontWeight:600,children:"DBH (cm):"}),V.jsx(Ut,{variant:"body2",children:e.dbh||"N/A"})]}),V.jsx(Hs,{sx:{my:1}}),V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[V.jsx(Ut,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Height (m):"}),V.jsx(Ut,{variant:"body2",children:e.height||"N/A"})]}),(e.crownNS||e.crownEW)&&V.jsxs(V.Fragment,{children:[V.jsx(Hs,{sx:{my:1}}),V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[V.jsx(Ut,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Crown Size:"}),V.jsxs(Ut,{variant:"body2",children:[e.crownNS&&`NS: ${e.crownNS}m`,e.crownNS&&e.crownEW&&" / ",e.crownEW&&`EW: ${e.crownEW}m`]})]})]}),V.jsx(Hs,{sx:{my:1}}),V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between"},children:[V.jsx(Ut,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Coordinates:"}),V.jsxs(Ut,{variant:"body2",sx:{textAlign:"right"},children:[e.lat.toFixed(6),", ",e.lon.toFixed(6)]})]})]})})]})},qF=({treeData:e,onTreeSelect:t})=>{const[o,l]=J.useState(""),[h,m]=J.useState(20),g=e.filter(k=>k.treeCode.toLowerCase().includes(o.toLowerCase())||k.genus.toLowerCase().includes(o.toLowerCase())||k.species.toLowerCase().includes(o.toLowerCase()));J.useEffect(()=>{m(20)},[o]);const u=()=>{m(k=>k+20)};return V.jsxs(Kt,{children:[V.jsx(ql,{sx:{mb:2,borderRadius:1},children:V.jsxs($u,{children:[V.jsx(Ut,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:" Inventory Overview"}),V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[V.jsx(Ut,{variant:"body2",color:"text.secondary",children:"Total Trees:"}),V.jsx(Ut,{variant:"h6",color:"text.primary",children:e.length})]}),V.jsx(Hs,{sx:{my:1}}),V.jsxs(Kt,{sx:{display:"flex",justifyContent:"space-between"},children:[V.jsx(Ut,{variant:"body2",color:"text.secondary",children:"Unique Genera:"}),V.jsx(Ut,{variant:"h6",color:"text.primary",children:new Set(e.map(k=>k.genus)).size})]})]})}),V.jsx(Ut,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,mt:3},children:" Browse Trees"}),V.jsx(CF,{fullWidth:!0,size:"small",placeholder:"Search by code, genus, or species...",value:o,onChange:k=>l(k.target.value),sx:{mb:2}}),V.jsx(Kt,{sx:{maxHeight:300,overflow:"auto",border:1,borderColor:"divider",borderRadius:1},children:V.jsxs(K0,{dense:!0,children:[g.slice(0,h).map(k=>V.jsxs(pB,{onClick:()=>t(k),children:[V.jsx(Kt,{sx:{width:12,height:12,borderRadius:.5,bgcolor:k.color,mr:1.5,flexShrink:0}}),V.jsx(Q2,{primary:k.treeCode,secondary:`${k.genus} ${k.species}`,primaryTypographyProps:{fontWeight:600,fontSize:"0.875rem"},secondaryTypographyProps:{fontSize:"0.75rem",fontStyle:"italic"}})]},k.treeCode)),g.length>h&&V.jsx($l,{children:V.jsxs(Ro,{fullWidth:!0,size:"small",onClick:u,sx:{color:"text.secondary"},children:["+",g.length-h," more trees... (click to load)"]})}),g.length===0&&o&&V.jsx($l,{children:V.jsx(Q2,{primary:"No trees found",primaryTypographyProps:{color:"text.secondary",textAlign:"center"}})})]})})]})},ZF=({open:e,onClose:t})=>V.jsxs(r3,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[V.jsxs(m3,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[" How to Use This Map",V.jsx(Jg,{onClick:t,size:"small",children:V.jsx(HT,{})})]}),V.jsx(h3,{children:V.jsxs(K0,{children:[V.jsx($l,{children:" Click on any tree marker on the map to view details"}),V.jsx($l,{children:" View detailed information and photos in the sidebar"}),V.jsx($l,{children:" Use the navigation arrows to browse through trees"}),V.jsx($l,{children:" Search for specific trees by code, genus, or species"}),V.jsx($l,{children:" Switch base maps using the buttons on the left"})]})}),V.jsx(s3,{children:V.jsx(Ro,{variant:"contained",onClick:t,children:"Got it!"})})]}),XF=()=>{const[e,t]=J.useState("cartodb"),[o,l]=J.useState([]),[h,m]=J.useState(!0),[g,u]=J.useState(null),[k,M]=J.useState(null),[B,D]=J.useState(!0),[A,Z]=J.useState(null),[G,te]=J.useState(null),[ne,W]=J.useState(!1),O=Mo.useRef(null),U=Qo(),K=WT(U.breakpoints.down("md"));J.useEffect(()=>{(async()=>{try{m(!0);const Te=EL(),Ae=await ML(Te);Z(Ae);const Re=await AL(Ae.boundaryUrl);te(Re);const{trees:X}=await IL(Ae.dataUrl,{photosUrl:Ae.photosUrl});l(X),m(!1)}catch(Te){console.error("Failed to load tree data:",Te),u(Te.message),m(!1)}})()},[]);const he=ge=>{M(ge),document.querySelectorAll(".tree-marker-container").forEach(Ae=>Ae.classList.remove("active"));const Te=document.querySelector(`[data-tree-code="${ge.treeCode}"]`);Te&&Te.classList.add("active"),O.current&&O.current.flyTo({center:[ge.lon,ge.lat],zoom:19,duration:1e3}),K&&W(!0)},ce=()=>{if(!k||o.length===0)return;const Te=(o.findIndex(Ae=>Ae.treeCode===k.treeCode)+1)%o.length;he(o[Te])},fe=()=>{if(!k||o.length===0)return;const Te=(o.findIndex(Ae=>Ae.treeCode===k.treeCode)-1+o.length)%o.length;he(o[Te])};return V.jsxs(Kt,{sx:{display:"flex",width:"100%",height:"100%",position:"relative"},children:[V.jsx(ZF,{open:B,onClose:()=>D(!1)}),h&&V.jsx(Kt,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:V.jsx(ql,{children:V.jsxs($u,{sx:{display:"flex",alignItems:"center",gap:2},children:[V.jsx(Tp,{}),V.jsx(Kt,{children:"Loading tree data..."})]})})}),g&&V.jsx(Kt,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:V.jsxs(RD,{severity:"error",sx:{maxWidth:400},children:["Error loading data: ",g]})}),V.jsx(ev,{size:"medium",sx:{position:"absolute",bottom:90,left:20,zIndex:5},color:"default",onClick:()=>window.location.href=window.location.pathname,title:"Back to home",children:V.jsx(AF,{fontSize:"small"})}),V.jsx(ev,{size:"medium",sx:{position:"absolute",bottom:20,left:20,zIndex:5},color:"default",onClick:()=>D(!0),title:"How to use this map",children:V.jsx(MF,{fontSize:"small"})}),K&&V.jsx(ev,{size:"medium",sx:{position:"absolute",bottom:20,right:20,zIndex:5,bgcolor:"#2d5016",color:"white","&:hover":{bgcolor:"#1e3610"}},onClick:()=>W(!0),title:"View tree list",children:V.jsx(zF,{fontSize:"small"})}),V.jsx(NF,{treeData:o,boundary:G,currentStyle:e,onStyleChange:t,onTreeSelect:he,mapRef:O}),V.jsx(HF,{schoolConfig:A,selectedTree:k,onClose:()=>M(null),mobileOpen:ne,onMobileOpen:()=>W(!0),onMobileClose:()=>W(!1),children:k?V.jsx(GF,{tree:k,treeCount:o.length,currentIndex:o.findIndex(ge=>ge.treeCode===k.treeCode),onNext:ce,onPrev:fe}):V.jsx(qF,{treeData:o,onTreeSelect:he})})]})},KF=()=>{const[e,t]=J.useState([]),[o,l]=J.useState(!0),[h,m]=J.useState(0);J.useEffect(()=>{(async()=>{try{const U=await _T();t(U),l(!1)}catch(U){console.error("Error loading schools:",U),l(!1)}})()},[]);const g=O=>{O&&(window.location.href=`?school=${O}`)},u=()=>{window.location.href="/"},k=[{icon:RF,title:"Interactive Maps",description:"Explore tree locations on detailed campus maps"},{icon:FF,title:"Tree Photos",description:"View high-quality photos of each tree"},{icon:kF,title:"Tree Data",description:"Access detailed information about species, size, and health"},{icon:OF,title:"Search & Filter",description:"Find trees by code, genus, or species"}],M=[...k,...k,...k],B=3,D=()=>{m(O=>{const U=O-1;return U<0?M.length-k.length-1:U})},A=()=>{m(O=>{const U=O+1;return U>=M.length-k.length?0:U})},Z=()=>V.jsx(VD,{position:"static",sx:{bgcolor:"#2d5016"},children:V.jsxs(vF,{sx:{cursor:"pointer"},onClick:u,children:[V.jsx(LF,{sx:{mr:2,fontSize:32}}),V.jsx(Ut,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600},children:"School Tree Inventory Maps"})]})}),G=()=>V.jsxs(Kt,{textAlign:"center",mb:6,children:[V.jsx(Ut,{variant:"h3",sx:{color:"#2d5016",mb:2,fontWeight:700},children:" Interactive Tree Mapping"}),V.jsx(Ut,{variant:"h6",sx:{color:"#4a7c2c",mb:4,fontWeight:400},children:"Explore and manage tree inventories for educational institutions"}),V.jsx(ql,{sx:{maxWidth:500,mx:"auto",mb:5,boxShadow:3,borderRadius:2},children:V.jsx($u,{sx:{p:3},children:V.jsxs(BT,{fullWidth:!0,children:[V.jsx(FT,{id:"school-select-label",children:"Select a School"}),V.jsxs(eb,{labelId:"school-select-label",id:"school-select",onChange:O=>g(O.target.value),defaultValue:"",label:"Select a School",children:[V.jsx(iS,{value:"",disabled:!0,children:"Choose a school..."}),e.map(O=>V.jsx(iS,{value:O.id,children:O.schoolName},O.id))]})]})})})]}),te=()=>V.jsxs(Kt,{mb:8,children:[V.jsx(Ut,{variant:"h4",sx:{color:"#2d5016",mb:3,fontWeight:600,textAlign:"center"},children:"Platform Features"}),V.jsxs(Kt,{sx:{position:"relative",maxWidth:1100,mx:"auto"},children:[V.jsx(Kt,{sx:{display:"flex",justifyContent:"center",overflow:"hidden",px:6},children:V.jsx(Kt,{sx:{display:"flex",transition:"transform 0.4s ease-in-out",transform:`translateX(calc(-${h*(100/B)}%))`,gap:2},children:M.map((O,U)=>{const K=O.icon;return V.jsx(Kt,{sx:{minWidth:`calc(${100/B}% - 16px)`,maxWidth:224,display:"flex",justifyContent:"center"},children:V.jsx(ql,{sx:{width:"100%",transition:"transform 0.2s, box-shadow 0.2s",boxShadow:2,"&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:V.jsxs($u,{sx:{textAlign:"center",p:3,display:"flex",flexDirection:"column",alignItems:"center",minHeight:240},children:[V.jsx(Kt,{sx:{bgcolor:"#e8f5e9",borderRadius:"50%",width:80,height:80,display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:V.jsx(K,{sx:{fontSize:40,color:"primary.main"}})}),V.jsx(Ut,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:O.title}),V.jsx(Ut,{variant:"body2",color:"text.secondary",children:O.description})]})})},U)})})}),V.jsx(Ro,{onClick:D,sx:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",minWidth:"auto",width:48,height:48,borderRadius:"50%",bgcolor:"white",boxShadow:2,zIndex:1,"&:hover":{bgcolor:"white",boxShadow:4}},children:V.jsx(TF,{sx:{fontSize:32,color:"#2d5016"}})}),V.jsx(Ro,{onClick:A,sx:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",minWidth:"auto",width:48,height:48,borderRadius:"50%",bgcolor:"white",boxShadow:2,zIndex:1,"&:hover":{bgcolor:"white",boxShadow:4}},children:V.jsx(IF,{sx:{fontSize:32,color:"#2d5016"}})}),V.jsx(Kt,{sx:{display:"flex",justifyContent:"center",gap:1,mt:3},children:k.map((O,U)=>V.jsx(Kt,{onClick:()=>m(U),sx:{width:10,height:10,borderRadius:"50%",bgcolor:h%k.length===U?"#2d5016":"#ccc",cursor:"pointer",transition:"background-color 0.3s"}},U))})]})]}),ne=()=>V.jsxs(Kt,{children:[V.jsx(Ut,{variant:"h4",sx:{color:"#2d5016",mb:3,fontWeight:600,textAlign:"center"},children:"Our Schools"}),o?V.jsx(Kt,{sx:{display:"flex",justifyContent:"center",py:4},children:V.jsx(Tp,{sx:{color:"primary.main"}})}):V.jsx(yh,{container:!0,spacing:3,children:e.map(O=>V.jsx(yh,{item:!0,xs:12,sm:6,md:4,children:V.jsx(ql,{sx:{height:"100%",transition:"all 0.3s",boxShadow:2,"&:hover":{transform:"translateY(-8px)",boxShadow:6}},children:V.jsxs(I4,{onClick:()=>g(O.id),sx:{height:"100%",p:3,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between",minHeight:180},children:[V.jsxs(Kt,{children:[V.jsx(Ut,{variant:"h6",color:"primary",gutterBottom:!0,sx:{fontWeight:600},children:O.schoolName}),O.address&&V.jsx(Ut,{variant:"body2",color:"text.secondary",sx:{mb:2},children:O.address})]}),V.jsx(Ro,{variant:"contained",fullWidth:!0,sx:{mt:2},children:"View Map "})]})})},O.id))})]}),W=()=>V.jsx(Kt,{component:"footer",sx:{bgcolor:"#2d5016",color:"white",py:3,mt:"auto"},children:V.jsx(U2,{maxWidth:"lg",children:V.jsxs(yh,{container:!0,spacing:3,alignItems:"center",children:[V.jsxs(yh,{item:!0,xs:12,md:6,children:[V.jsx(Ut,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"School Tree Inventory Maps"}),V.jsx(Ut,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)"},children:"Interactive mapping platform for educational tree inventories"})]}),V.jsx(yh,{item:!0,xs:12,md:6,children:V.jsxs(Kt,{sx:{textAlign:{xs:"left",md:"right"}},children:[V.jsxs(Ut,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)"},children:[" ",new Date().getFullYear()," School Tree Inventory Maps"]}),V.jsx(Ut,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)"},children:"Preserving and documenting our natural heritage"})]})})]})})});return V.jsxs(V.Fragment,{children:[Z(),V.jsx(Kt,{sx:{minHeight:"calc(100vh - 64px - 120px)",background:"linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%)",py:6},children:V.jsxs(U2,{maxWidth:"lg",children:[G(),te(),ne()]})}),W()]})},YF=({onAccept:e,onDecline:t})=>{const[o,l]=J.useState(!1);J.useEffect(()=>{const g=localStorage.getItem("cookieConsent");g?g==="accepted"&&e&&!window.gtag&&e():setTimeout(()=>l(!0),1e3)},[e]);const h=()=>{localStorage.setItem("cookieConsent","accepted"),l(!1),e&&e()},m=()=>{localStorage.setItem("cookieConsent","declined"),l(!1),t&&t()};return o?V.jsx(Kt,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:9999,p:2},children:V.jsx(nl,{elevation:6,sx:{maxWidth:"900px",margin:"0 auto",p:3,backgroundColor:"background.paper",borderRadius:2},children:V.jsxs(nv,{spacing:2,children:[V.jsxs(nv,{direction:"row",spacing:2,alignItems:"flex-start",children:[V.jsx(PF,{sx:{color:"primary.main",mt:.5}}),V.jsxs(Kt,{sx:{flex:1},children:[V.jsx(Ut,{variant:"h6",gutterBottom:!0,children:"Cookie Notice"}),V.jsxs(Ut,{variant:"body2",color:"text.secondary",children:['We use cookies and similar technologies to help personalize content and provide a better experience. We use Google Analytics to understand how you use our site and improve your experience. By clicking "Accept", you consent to our use of cookies.'," ",V.jsx(iB,{href:"#",onClick:g=>{g.preventDefault()},sx:{color:"primary.main"},children:"Learn more"})]})]})]}),V.jsxs(nv,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"flex-end",children:[V.jsx(Ro,{variant:"outlined",onClick:m,sx:{minWidth:"120px"},children:"Decline"}),V.jsx(Ro,{variant:"contained",onClick:h,sx:{minWidth:"120px"},children:"Accept"})]})]})})}):null},JF=Yg({palette:{primary:{main:"#2d5016",light:"#4a7c2c",dark:"#1a3009",contrastText:"#ffffff"},secondary:{main:"#6b8e23",light:"#8ba84e",dark:"#4a6316",contrastText:"#ffffff"},success:{main:"#52a447",light:"#7bc96f",dark:"#3d7a33"},info:{main:"#5c8a5f",light:"#87b28a",dark:"#3d5f40"},background:{default:"#f4f7f4",paper:"#ffffff"},text:{primary:"#1a3009",secondary:"#4a6316"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),h1:{fontWeight:700},h2:{fontWeight:600},h3:{fontWeight:600}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8}}},MuiCard:{styleOverrides:{root:{borderRadius:12}}}}});function QF(){const t=new URLSearchParams(window.location.search).get("school"),o=()=>{const h=document.createElement("script");h.async=!0,h.src="https://www.googletagmanager.com/gtag/js?id=G-QQ52P9CTV8",document.head.appendChild(h),h.onload=()=>{window.dataLayer=window.dataLayer||[];function m(){window.dataLayer.push(arguments)}window.gtag=m,m("js",new Date),m("config","G-QQ52P9CTV8",{anonymize_ip:!0,cookie_flags:"SameSite=None;Secure"})}},l=()=>{console.log("User declined cookies")};return V.jsxs(yL,{theme:JF,children:[V.jsx(CL,{}),V.jsx("div",{style:{width:"100%",height:"100vh"},children:t?V.jsx(XF,{}):V.jsx(KF,{})}),V.jsx(YF,{onAccept:o,onDecline:l})]})}lv.createRoot(document.getElementById("root")).render(V.jsx(Mo.StrictMode,{children:V.jsx(QF,{})}));

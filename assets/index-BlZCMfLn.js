var kE=Object.defineProperty;var TE=(e,t,o)=>t in e?kE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var nh=(e,t,o)=>TE(e,typeof t!="symbol"?t+"":t,o);function IE(e,t){for(var o=0;o<t.length;o++){const l=t[o];if(typeof l!="string"&&!Array.isArray(l)){for(const h in l)if(h!=="default"&&!(h in e)){const m=Object.getOwnPropertyDescriptor(l,h);m&&Object.defineProperty(e,h,m.get?m:{enumerable:!0,get:()=>l[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function o(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(h){if(h.ep)return;h.ep=!0;const m=o(h);fetch(h.href,m)}})();var EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eS={exports:{}},Hm={},tS={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up=Symbol.for("react.element"),PE=Symbol.for("react.portal"),ME=Symbol.for("react.fragment"),AE=Symbol.for("react.strict_mode"),zE=Symbol.for("react.profiler"),RE=Symbol.for("react.provider"),DE=Symbol.for("react.context"),LE=Symbol.for("react.forward_ref"),BE=Symbol.for("react.suspense"),FE=Symbol.for("react.memo"),OE=Symbol.for("react.lazy"),E1=Symbol.iterator;function $E(e){return e===null||typeof e!="object"?null:(e=E1&&e[E1]||e["@@iterator"],typeof e=="function"?e:null)}var rS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nS=Object.assign,iS={};function Ou(e,t,o){this.props=e,this.context=t,this.refs=iS,this.updater=o||rS}Ou.prototype.isReactComponent={};Ou.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ou.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oS(){}oS.prototype=Ou.prototype;function ux(e,t,o){this.props=e,this.context=t,this.refs=iS,this.updater=o||rS}var dx=ux.prototype=new oS;dx.constructor=ux;nS(dx,Ou.prototype);dx.isPureReactComponent=!0;var P1=Array.isArray,sS=Object.prototype.hasOwnProperty,hx={current:null},aS={key:!0,ref:!0,__self:!0,__source:!0};function lS(e,t,o){var l,h={},m=null,g=null;if(t!=null)for(l in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(m=""+t.key),t)sS.call(t,l)&&!aS.hasOwnProperty(l)&&(h[l]=t[l]);var u=arguments.length-2;if(u===1)h.children=o;else if(1<u){for(var I=Array(u),M=0;M<u;M++)I[M]=arguments[M+2];h.children=I}if(e&&e.defaultProps)for(l in u=e.defaultProps,u)h[l]===void 0&&(h[l]=u[l]);return{$$typeof:up,type:e,key:m,ref:g,props:h,_owner:hx.current}}function NE(e,t){return{$$typeof:up,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function px(e){return typeof e=="object"&&e!==null&&e.$$typeof===up}function jE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return t[o]})}var M1=/\/+/g;function c_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jE(""+e.key):t.toString(36)}function Yf(e,t,o,l,h){var m=typeof e;(m==="undefined"||m==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(m){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case up:case PE:g=!0}}if(g)return g=e,h=h(g),e=l===""?"."+c_(g,0):l,P1(h)?(o="",e!=null&&(o=e.replace(M1,"$&/")+"/"),Yf(h,t,o,"",function(M){return M})):h!=null&&(px(h)&&(h=NE(h,o+(!h.key||g&&g.key===h.key?"":(""+h.key).replace(M1,"$&/")+"/")+e)),t.push(h)),1;if(g=0,l=l===""?".":l+":",P1(e))for(var u=0;u<e.length;u++){m=e[u];var I=l+c_(m,u);g+=Yf(m,t,o,I,h)}else if(I=$E(e),typeof I=="function")for(e=I.call(e),u=0;!(m=e.next()).done;)m=m.value,I=l+c_(m,u++),g+=Yf(m,t,o,I,h);else if(m==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function kf(e,t,o){if(e==null)return e;var l=[],h=0;return Yf(e,l,"","",function(m){return t.call(o,m,h++)}),l}function VE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ai={current:null},Jf={transition:null},UE={ReactCurrentDispatcher:Ai,ReactCurrentBatchConfig:Jf,ReactCurrentOwner:hx};function cS(){throw Error("act(...) is not supported in production builds of React.")}fr.Children={map:kf,forEach:function(e,t,o){kf(e,function(){t.apply(this,arguments)},o)},count:function(e){var t=0;return kf(e,function(){t++}),t},toArray:function(e){return kf(e,function(t){return t})||[]},only:function(e){if(!px(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fr.Component=Ou;fr.Fragment=ME;fr.Profiler=zE;fr.PureComponent=ux;fr.StrictMode=AE;fr.Suspense=BE;fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;fr.act=cS;fr.cloneElement=function(e,t,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=nS({},e.props),h=e.key,m=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(m=t.ref,g=hx.current),t.key!==void 0&&(h=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(I in t)sS.call(t,I)&&!aS.hasOwnProperty(I)&&(l[I]=t[I]===void 0&&u!==void 0?u[I]:t[I])}var I=arguments.length-2;if(I===1)l.children=o;else if(1<I){u=Array(I);for(var M=0;M<I;M++)u[M]=arguments[M+2];l.children=u}return{$$typeof:up,type:e.type,key:h,ref:m,props:l,_owner:g}};fr.createContext=function(e){return e={$$typeof:DE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:RE,_context:e},e.Consumer=e};fr.createElement=lS;fr.createFactory=function(e){var t=lS.bind(null,e);return t.type=e,t};fr.createRef=function(){return{current:null}};fr.forwardRef=function(e){return{$$typeof:LE,render:e}};fr.isValidElement=px;fr.lazy=function(e){return{$$typeof:OE,_payload:{_status:-1,_result:e},_init:VE}};fr.memo=function(e,t){return{$$typeof:FE,type:e,compare:t===void 0?null:t}};fr.startTransition=function(e){var t=Jf.transition;Jf.transition={};try{e()}finally{Jf.transition=t}};fr.unstable_act=cS;fr.useCallback=function(e,t){return Ai.current.useCallback(e,t)};fr.useContext=function(e){return Ai.current.useContext(e)};fr.useDebugValue=function(){};fr.useDeferredValue=function(e){return Ai.current.useDeferredValue(e)};fr.useEffect=function(e,t){return Ai.current.useEffect(e,t)};fr.useId=function(){return Ai.current.useId()};fr.useImperativeHandle=function(e,t,o){return Ai.current.useImperativeHandle(e,t,o)};fr.useInsertionEffect=function(e,t){return Ai.current.useInsertionEffect(e,t)};fr.useLayoutEffect=function(e,t){return Ai.current.useLayoutEffect(e,t)};fr.useMemo=function(e,t){return Ai.current.useMemo(e,t)};fr.useReducer=function(e,t,o){return Ai.current.useReducer(e,t,o)};fr.useRef=function(e){return Ai.current.useRef(e)};fr.useState=function(e){return Ai.current.useState(e)};fr.useSyncExternalStore=function(e,t,o){return Ai.current.useSyncExternalStore(e,t,o)};fr.useTransition=function(){return Ai.current.useTransition()};fr.version="18.3.1";tS.exports=fr;var ee=tS.exports;const Eo=cx(ee),Z_=IE({__proto__:null,default:Eo},[ee]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE=ee,GE=Symbol.for("react.element"),HE=Symbol.for("react.fragment"),qE=Object.prototype.hasOwnProperty,ZE=WE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XE={key:!0,ref:!0,__self:!0,__source:!0};function uS(e,t,o){var l,h={},m=null,g=null;o!==void 0&&(m=""+o),t.key!==void 0&&(m=""+t.key),t.ref!==void 0&&(g=t.ref);for(l in t)qE.call(t,l)&&!XE.hasOwnProperty(l)&&(h[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)h[l]===void 0&&(h[l]=t[l]);return{$$typeof:GE,type:e,key:m,ref:g,props:h,_owner:ZE.current}}Hm.Fragment=HE;Hm.jsx=uS;Hm.jsxs=uS;eS.exports=Hm;var G=eS.exports,X_={},dS={exports:{}},fo={},hS={exports:{}},pS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(be,Ee){var We=be.length;be.push(Ee);e:for(;0<We;){var Ze=We-1>>>1,Ge=be[Ze];if(0<h(Ge,Ee))be[Ze]=Ee,be[We]=Ge,We=Ze;else break e}}function o(be){return be.length===0?null:be[0]}function l(be){if(be.length===0)return null;var Ee=be[0],We=be.pop();if(We!==Ee){be[0]=We;e:for(var Ze=0,Ge=be.length,Ct=Ge>>>1;Ze<Ct;){var Dt=2*(Ze+1)-1,$t=be[Dt],Ut=Dt+1,Rt=be[Ut];if(0>h($t,We))Ut<Ge&&0>h(Rt,$t)?(be[Ze]=Rt,be[Ut]=We,Ze=Ut):(be[Ze]=$t,be[Dt]=We,Ze=Dt);else if(Ut<Ge&&0>h(Rt,We))be[Ze]=Rt,be[Ut]=We,Ze=Ut;else break e}}return Ee}function h(be,Ee){var We=be.sortIndex-Ee.sortIndex;return We!==0?We:be.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var g=Date,u=g.now();e.unstable_now=function(){return g.now()-u}}var I=[],M=[],B=1,L=null,A=3,Z=!1,q=!1,re=!1,le=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(be){for(var Ee=o(M);Ee!==null;){if(Ee.callback===null)l(M);else if(Ee.startTime<=be)l(M),Ee.sortIndex=Ee.expirationTime,t(I,Ee);else break;Ee=o(M)}}function Q(be){if(re=!1,V(be),!q)if(o(I)!==null)q=!0,$e(pe);else{var Ee=o(M);Ee!==null&&Ke(Q,Ee.startTime-be)}}function pe(be,Ee){q=!1,re&&(re=!1,W(ge),ge=-1),Z=!0;var We=A;try{for(V(Ee),L=o(I);L!==null&&(!(L.expirationTime>Ee)||be&&!De());){var Ze=L.callback;if(typeof Ze=="function"){L.callback=null,A=L.priorityLevel;var Ge=Ze(L.expirationTime<=Ee);Ee=e.unstable_now(),typeof Ge=="function"?L.callback=Ge:L===o(I)&&l(I),V(Ee)}else l(I);L=o(I)}if(L!==null)var Ct=!0;else{var Dt=o(M);Dt!==null&&Ke(Q,Dt.startTime-Ee),Ct=!1}return Ct}finally{L=null,A=We,Z=!1}}var de=!1,_e=null,ge=-1,Ae=5,Re=-1;function De(){return!(e.unstable_now()-Re<Ae)}function X(){if(_e!==null){var be=e.unstable_now();Re=be;var Ee=!0;try{Ee=_e(!0,be)}finally{Ee?Me():(de=!1,_e=null)}}else de=!1}var Me;if(typeof j=="function")Me=function(){j(X)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Le=Ie.port2;Ie.port1.onmessage=X,Me=function(){Le.postMessage(null)}}else Me=function(){le(X,0)};function $e(be){_e=be,de||(de=!0,Me())}function Ke(be,Ee){ge=le(function(){be(e.unstable_now())},Ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(be){be.callback=null},e.unstable_continueExecution=function(){q||Z||(q=!0,$e(pe))},e.unstable_forceFrameRate=function(be){0>be||125<be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<be?Math.floor(1e3/be):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return o(I)},e.unstable_next=function(be){switch(A){case 1:case 2:case 3:var Ee=3;break;default:Ee=A}var We=A;A=Ee;try{return be()}finally{A=We}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(be,Ee){switch(be){case 1:case 2:case 3:case 4:case 5:break;default:be=3}var We=A;A=be;try{return Ee()}finally{A=We}},e.unstable_scheduleCallback=function(be,Ee,We){var Ze=e.unstable_now();switch(typeof We=="object"&&We!==null?(We=We.delay,We=typeof We=="number"&&0<We?Ze+We:Ze):We=Ze,be){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=We+Ge,be={id:B++,callback:Ee,priorityLevel:be,startTime:We,expirationTime:Ge,sortIndex:-1},We>Ze?(be.sortIndex=We,t(M,be),o(I)===null&&be===o(M)&&(re?(W(ge),ge=-1):re=!0,Ke(Q,We-Ze))):(be.sortIndex=Ge,t(I,be),q||Z||(q=!0,$e(pe))),be},e.unstable_shouldYield=De,e.unstable_wrapCallback=function(be){var Ee=A;return function(){var We=A;A=Ee;try{return be.apply(this,arguments)}finally{A=We}}}})(pS);hS.exports=pS;var KE=hS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE=ee,po=KE;function Je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fS=new Set,Nh={};function Ql(e,t){Iu(e,t),Iu(e+"Capture",t)}function Iu(e,t){for(Nh[e]=t,e=0;e<t.length;e++)fS.add(t[e])}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),K_=Object.prototype.hasOwnProperty,JE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A1={},z1={};function QE(e){return K_.call(z1,e)?!0:K_.call(A1,e)?!1:JE.test(e)?z1[e]=!0:(A1[e]=!0,!1)}function eP(e,t,o,l){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tP(e,t,o,l){if(t===null||typeof t>"u"||eP(e,t,o,l))return!0;if(l)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function zi(e,t,o,l,h,m,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=g}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){oi[e]=new zi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];oi[t]=new zi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){oi[e]=new zi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){oi[e]=new zi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){oi[e]=new zi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){oi[e]=new zi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){oi[e]=new zi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){oi[e]=new zi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){oi[e]=new zi(e,5,!1,e.toLowerCase(),null,!1,!1)});var fx=/[\-:]([a-z])/g;function mx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fx,mx);oi[t]=new zi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fx,mx);oi[t]=new zi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fx,mx);oi[t]=new zi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){oi[e]=new zi(e,1,!1,e.toLowerCase(),null,!1,!1)});oi.xlinkHref=new zi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){oi[e]=new zi(e,1,!1,e.toLowerCase(),null,!0,!0)});function gx(e,t,o,l){var h=oi.hasOwnProperty(t)?oi[t]:null;(h!==null?h.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tP(t,o,h,l)&&(o=null),l||h===null?QE(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):h.mustUseProperty?e[h.propertyName]=o===null?h.type===3?!1:"":o:(t=h.attributeName,l=h.attributeNamespace,o===null?e.removeAttribute(t):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,l?e.setAttributeNS(l,t,o):e.setAttribute(t,o))))}var Ys=YE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tf=Symbol.for("react.element"),ou=Symbol.for("react.portal"),su=Symbol.for("react.fragment"),yx=Symbol.for("react.strict_mode"),Y_=Symbol.for("react.profiler"),mS=Symbol.for("react.provider"),gS=Symbol.for("react.context"),_x=Symbol.for("react.forward_ref"),J_=Symbol.for("react.suspense"),Q_=Symbol.for("react.suspense_list"),vx=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),yS=Symbol.for("react.offscreen"),R1=Symbol.iterator;function ih(e){return e===null||typeof e!="object"?null:(e=R1&&e[R1]||e["@@iterator"],typeof e=="function"?e:null)}var cn=Object.assign,u_;function vh(e){if(u_===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);u_=t&&t[1]||""}return`
`+u_+e}var d_=!1;function h_(e,t){if(!e||d_)return"";d_=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var l=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){l=M}e.call(t.prototype)}else{try{throw Error()}catch(M){l=M}e()}}catch(M){if(M&&l&&typeof M.stack=="string"){for(var h=M.stack.split(`
`),m=l.stack.split(`
`),g=h.length-1,u=m.length-1;1<=g&&0<=u&&h[g]!==m[u];)u--;for(;1<=g&&0<=u;g--,u--)if(h[g]!==m[u]){if(g!==1||u!==1)do if(g--,u--,0>u||h[g]!==m[u]){var I=`
`+h[g].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=g&&0<=u);break}}}finally{d_=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?vh(e):""}function rP(e){switch(e.tag){case 5:return vh(e.type);case 16:return vh("Lazy");case 13:return vh("Suspense");case 19:return vh("SuspenseList");case 0:case 2:case 15:return e=h_(e.type,!1),e;case 11:return e=h_(e.type.render,!1),e;case 1:return e=h_(e.type,!0),e;default:return""}}function ev(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case su:return"Fragment";case ou:return"Portal";case Y_:return"Profiler";case yx:return"StrictMode";case J_:return"Suspense";case Q_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gS:return(e.displayName||"Context")+".Consumer";case mS:return(e._context.displayName||"Context")+".Provider";case _x:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vx:return t=e.displayName||null,t!==null?t:ev(e.type)||"Memo";case za:t=e._payload,e=e._init;try{return ev(e(t))}catch{}}return null}function nP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ev(t);case 8:return t===yx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Za(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _S(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iP(e){var t=_S(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(g){l=""+g,m.call(this,g)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function If(e){e._valueTracker||(e._valueTracker=iP(e))}function vS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),l="";return e&&(l=_S(e)?e.checked?"true":"false":e.value),e=l,e!==o?(t.setValue(e),!0):!1}function fm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function tv(e,t){var o=t.checked;return cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function D1(e,t){var o=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;o=Za(t.value!=null?t.value:o),e._wrapperState={initialChecked:l,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xS(e,t){t=t.checked,t!=null&&gx(e,"checked",t,!1)}function rv(e,t){xS(e,t);var o=Za(t.value),l=t.type;if(o!=null)l==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nv(e,t.type,o):t.hasOwnProperty("defaultValue")&&nv(e,t.type,Za(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function L1(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function nv(e,t,o){(t!=="number"||fm(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var xh=Array.isArray;function _u(e,t,o,l){if(e=e.options,t){t={};for(var h=0;h<o.length;h++)t["$"+o[h]]=!0;for(o=0;o<e.length;o++)h=t.hasOwnProperty("$"+e[o].value),e[o].selected!==h&&(e[o].selected=h),h&&l&&(e[o].defaultSelected=!0)}else{for(o=""+Za(o),t=null,h=0;h<e.length;h++){if(e[h].value===o){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function iv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function B1(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(Je(92));if(xh(o)){if(1<o.length)throw Error(Je(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:Za(o)}}function bS(e,t){var o=Za(t.value),l=Za(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),l!=null&&(e.defaultValue=""+l)}function F1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ov(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ef,SS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,l,h){MSApp.execUnsafeLocalFunction(function(){return e(t,o,l,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ef=Ef||document.createElement("div"),Ef.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ef.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jh(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Ih={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oP=["Webkit","ms","Moz","O"];Object.keys(Ih).forEach(function(e){oP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ih[t]=Ih[e]})});function CS(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Ih.hasOwnProperty(e)&&Ih[e]?(""+t).trim():t+"px"}function kS(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var l=o.indexOf("--")===0,h=CS(o,t[o],l);o==="float"&&(o="cssFloat"),l?e.setProperty(o,h):e[o]=h}}var sP=cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sv(e,t){if(t){if(sP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function av(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lv=null;function xx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cv=null,vu=null,xu=null;function O1(e){if(e=pp(e)){if(typeof cv!="function")throw Error(Je(280));var t=e.stateNode;t&&(t=Ym(t),cv(e.stateNode,e.type,t))}}function TS(e){vu?xu?xu.push(e):xu=[e]:vu=e}function IS(){if(vu){var e=vu,t=xu;if(xu=vu=null,O1(e),t)for(e=0;e<t.length;e++)O1(t[e])}}function ES(e,t){return e(t)}function PS(){}var p_=!1;function MS(e,t,o){if(p_)return e(t,o);p_=!0;try{return ES(e,t,o)}finally{p_=!1,(vu!==null||xu!==null)&&(PS(),IS())}}function Vh(e,t){var o=e.stateNode;if(o===null)return null;var l=Ym(o);if(l===null)return null;o=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(Je(231,t,typeof o));return o}var uv=!1;if(Hs)try{var oh={};Object.defineProperty(oh,"passive",{get:function(){uv=!0}}),window.addEventListener("test",oh,oh),window.removeEventListener("test",oh,oh)}catch{uv=!1}function aP(e,t,o,l,h,m,g,u,I){var M=Array.prototype.slice.call(arguments,3);try{t.apply(o,M)}catch(B){this.onError(B)}}var Eh=!1,mm=null,gm=!1,dv=null,lP={onError:function(e){Eh=!0,mm=e}};function cP(e,t,o,l,h,m,g,u,I){Eh=!1,mm=null,aP.apply(lP,arguments)}function uP(e,t,o,l,h,m,g,u,I){if(cP.apply(this,arguments),Eh){if(Eh){var M=mm;Eh=!1,mm=null}else throw Error(Je(198));gm||(gm=!0,dv=M)}}function ec(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function AS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $1(e){if(ec(e)!==e)throw Error(Je(188))}function dP(e){var t=e.alternate;if(!t){if(t=ec(e),t===null)throw Error(Je(188));return t!==e?null:e}for(var o=e,l=t;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){o=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return $1(h),e;if(m===l)return $1(h),t;m=m.sibling}throw Error(Je(188))}if(o.return!==l.return)o=h,l=m;else{for(var g=!1,u=h.child;u;){if(u===o){g=!0,o=h,l=m;break}if(u===l){g=!0,l=h,o=m;break}u=u.sibling}if(!g){for(u=m.child;u;){if(u===o){g=!0,o=m,l=h;break}if(u===l){g=!0,l=m,o=h;break}u=u.sibling}if(!g)throw Error(Je(189))}}if(o.alternate!==l)throw Error(Je(190))}if(o.tag!==3)throw Error(Je(188));return o.stateNode.current===o?e:t}function zS(e){return e=dP(e),e!==null?RS(e):null}function RS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=RS(e);if(t!==null)return t;e=e.sibling}return null}var DS=po.unstable_scheduleCallback,N1=po.unstable_cancelCallback,hP=po.unstable_shouldYield,pP=po.unstable_requestPaint,xn=po.unstable_now,fP=po.unstable_getCurrentPriorityLevel,bx=po.unstable_ImmediatePriority,LS=po.unstable_UserBlockingPriority,ym=po.unstable_NormalPriority,mP=po.unstable_LowPriority,BS=po.unstable_IdlePriority,qm=null,gs=null;function gP(e){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(qm,e,void 0,(e.current.flags&128)===128)}catch{}}var Go=Math.clz32?Math.clz32:vP,yP=Math.log,_P=Math.LN2;function vP(e){return e>>>=0,e===0?32:31-(yP(e)/_P|0)|0}var Pf=64,Mf=4194304;function bh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _m(e,t){var o=e.pendingLanes;if(o===0)return 0;var l=0,h=e.suspendedLanes,m=e.pingedLanes,g=o&268435455;if(g!==0){var u=g&~h;u!==0?l=bh(u):(m&=g,m!==0&&(l=bh(m)))}else g=o&~h,g!==0?l=bh(g):m!==0&&(l=bh(m));if(l===0)return 0;if(t!==0&&t!==l&&!(t&h)&&(h=l&-l,m=t&-t,h>=m||h===16&&(m&4194240)!==0))return t;if(l&4&&(l|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)o=31-Go(t),h=1<<o,l|=e[o],t&=~h;return l}function xP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bP(e,t){for(var o=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,m=e.pendingLanes;0<m;){var g=31-Go(m),u=1<<g,I=h[g];I===-1?(!(u&o)||u&l)&&(h[g]=xP(u,t)):I<=t&&(e.expiredLanes|=u),m&=~u}}function hv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function FS(){var e=Pf;return Pf<<=1,!(Pf&4194240)&&(Pf=64),e}function f_(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function dp(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Go(t),e[t]=o}function wP(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<o;){var h=31-Go(o),m=1<<h;t[h]=0,l[h]=-1,e[h]=-1,o&=~m}}function wx(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var l=31-Go(o),h=1<<l;h&t|e[l]&t&&(e[l]|=t),o&=~h}}var Fr=0;function OS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $S,Sx,NS,jS,VS,pv=!1,Af=[],$a=null,Na=null,ja=null,Uh=new Map,Wh=new Map,Da=[],SP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j1(e,t){switch(e){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":Uh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wh.delete(t.pointerId)}}function sh(e,t,o,l,h,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:o,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},t!==null&&(t=pp(t),t!==null&&Sx(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function CP(e,t,o,l,h){switch(t){case"focusin":return $a=sh($a,e,t,o,l,h),!0;case"dragenter":return Na=sh(Na,e,t,o,l,h),!0;case"mouseover":return ja=sh(ja,e,t,o,l,h),!0;case"pointerover":var m=h.pointerId;return Uh.set(m,sh(Uh.get(m)||null,e,t,o,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Wh.set(m,sh(Wh.get(m)||null,e,t,o,l,h)),!0}return!1}function US(e){var t=$l(e.target);if(t!==null){var o=ec(t);if(o!==null){if(t=o.tag,t===13){if(t=AS(o),t!==null){e.blockedOn=t,VS(e.priority,function(){NS(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=fv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var l=new o.constructor(o.type,o);lv=l,o.target.dispatchEvent(l),lv=null}else return t=pp(o),t!==null&&Sx(t),e.blockedOn=o,!1;t.shift()}return!0}function V1(e,t,o){Qf(e)&&o.delete(t)}function kP(){pv=!1,$a!==null&&Qf($a)&&($a=null),Na!==null&&Qf(Na)&&(Na=null),ja!==null&&Qf(ja)&&(ja=null),Uh.forEach(V1),Wh.forEach(V1)}function ah(e,t){e.blockedOn===t&&(e.blockedOn=null,pv||(pv=!0,po.unstable_scheduleCallback(po.unstable_NormalPriority,kP)))}function Gh(e){function t(h){return ah(h,e)}if(0<Af.length){ah(Af[0],e);for(var o=1;o<Af.length;o++){var l=Af[o];l.blockedOn===e&&(l.blockedOn=null)}}for($a!==null&&ah($a,e),Na!==null&&ah(Na,e),ja!==null&&ah(ja,e),Uh.forEach(t),Wh.forEach(t),o=0;o<Da.length;o++)l=Da[o],l.blockedOn===e&&(l.blockedOn=null);for(;0<Da.length&&(o=Da[0],o.blockedOn===null);)US(o),o.blockedOn===null&&Da.shift()}var bu=Ys.ReactCurrentBatchConfig,vm=!0;function TP(e,t,o,l){var h=Fr,m=bu.transition;bu.transition=null;try{Fr=1,Cx(e,t,o,l)}finally{Fr=h,bu.transition=m}}function IP(e,t,o,l){var h=Fr,m=bu.transition;bu.transition=null;try{Fr=4,Cx(e,t,o,l)}finally{Fr=h,bu.transition=m}}function Cx(e,t,o,l){if(vm){var h=fv(e,t,o,l);if(h===null)C_(e,t,l,xm,o),j1(e,l);else if(CP(h,e,t,o,l))l.stopPropagation();else if(j1(e,l),t&4&&-1<SP.indexOf(e)){for(;h!==null;){var m=pp(h);if(m!==null&&$S(m),m=fv(e,t,o,l),m===null&&C_(e,t,l,xm,o),m===h)break;h=m}h!==null&&l.stopPropagation()}else C_(e,t,l,null,o)}}var xm=null;function fv(e,t,o,l){if(xm=null,e=xx(l),e=$l(e),e!==null)if(t=ec(e),t===null)e=null;else if(o=t.tag,o===13){if(e=AS(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xm=e,null}function WS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fP()){case bx:return 1;case LS:return 4;case ym:case mP:return 16;case BS:return 536870912;default:return 16}default:return 16}}var Fa=null,kx=null,em=null;function GS(){if(em)return em;var e,t=kx,o=t.length,l,h="value"in Fa?Fa.value:Fa.textContent,m=h.length;for(e=0;e<o&&t[e]===h[e];e++);var g=o-e;for(l=1;l<=g&&t[o-l]===h[m-l];l++);return em=h.slice(e,1<l?1-l:void 0)}function tm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zf(){return!0}function U1(){return!1}function mo(e){function t(o,l,h,m,g){this._reactName=o,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=g,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(o=e[u],this[u]=o?o(m):m[u]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?zf:U1,this.isPropagationStopped=U1,this}return cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zf)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zf)},persist:function(){},isPersistent:zf}),t}var $u={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tx=mo($u),hp=cn({},$u,{view:0,detail:0}),EP=mo(hp),m_,g_,lh,Zm=cn({},hp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ix,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lh&&(lh&&e.type==="mousemove"?(m_=e.screenX-lh.screenX,g_=e.screenY-lh.screenY):g_=m_=0,lh=e),m_)},movementY:function(e){return"movementY"in e?e.movementY:g_}}),W1=mo(Zm),PP=cn({},Zm,{dataTransfer:0}),MP=mo(PP),AP=cn({},hp,{relatedTarget:0}),y_=mo(AP),zP=cn({},$u,{animationName:0,elapsedTime:0,pseudoElement:0}),RP=mo(zP),DP=cn({},$u,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),LP=mo(DP),BP=cn({},$u,{data:0}),G1=mo(BP),FP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$P={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$P[e])?!!t[e]:!1}function Ix(){return NP}var jP=cn({},hp,{key:function(e){if(e.key){var t=FP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?OP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ix,charCode:function(e){return e.type==="keypress"?tm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),VP=mo(jP),UP=cn({},Zm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H1=mo(UP),WP=cn({},hp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ix}),GP=mo(WP),HP=cn({},$u,{propertyName:0,elapsedTime:0,pseudoElement:0}),qP=mo(HP),ZP=cn({},Zm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),XP=mo(ZP),KP=[9,13,27,32],Ex=Hs&&"CompositionEvent"in window,Ph=null;Hs&&"documentMode"in document&&(Ph=document.documentMode);var YP=Hs&&"TextEvent"in window&&!Ph,HS=Hs&&(!Ex||Ph&&8<Ph&&11>=Ph),q1=" ",Z1=!1;function qS(e,t){switch(e){case"keyup":return KP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var au=!1;function JP(e,t){switch(e){case"compositionend":return ZS(t);case"keypress":return t.which!==32?null:(Z1=!0,q1);case"textInput":return e=t.data,e===q1&&Z1?null:e;default:return null}}function QP(e,t){if(au)return e==="compositionend"||!Ex&&qS(e,t)?(e=GS(),em=kx=Fa=null,au=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return HS&&t.locale!=="ko"?null:t.data;default:return null}}var eM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eM[e.type]:t==="textarea"}function XS(e,t,o,l){TS(l),t=bm(t,"onChange"),0<t.length&&(o=new Tx("onChange","change",null,o,l),e.push({event:o,listeners:t}))}var Mh=null,Hh=null;function tM(e){sC(e,0)}function Xm(e){var t=uu(e);if(vS(t))return e}function rM(e,t){if(e==="change")return t}var KS=!1;if(Hs){var __;if(Hs){var v_="oninput"in document;if(!v_){var K1=document.createElement("div");K1.setAttribute("oninput","return;"),v_=typeof K1.oninput=="function"}__=v_}else __=!1;KS=__&&(!document.documentMode||9<document.documentMode)}function Y1(){Mh&&(Mh.detachEvent("onpropertychange",YS),Hh=Mh=null)}function YS(e){if(e.propertyName==="value"&&Xm(Hh)){var t=[];XS(t,Hh,e,xx(e)),MS(tM,t)}}function nM(e,t,o){e==="focusin"?(Y1(),Mh=t,Hh=o,Mh.attachEvent("onpropertychange",YS)):e==="focusout"&&Y1()}function iM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xm(Hh)}function oM(e,t){if(e==="click")return Xm(t)}function sM(e,t){if(e==="input"||e==="change")return Xm(t)}function aM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qo=typeof Object.is=="function"?Object.is:aM;function qh(e,t){if(qo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var h=o[l];if(!K_.call(t,h)||!qo(e[h],t[h]))return!1}return!0}function J1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Q1(e,t){var o=J1(e);e=0;for(var l;o;){if(o.nodeType===3){if(l=e+o.textContent.length,e<=t&&l>=t)return{node:o,offset:t-e};e=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=J1(o)}}function JS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?JS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function QS(){for(var e=window,t=fm();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=fm(e.document)}return t}function Px(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lM(e){var t=QS(),o=e.focusedElem,l=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&JS(o.ownerDocument.documentElement,o)){if(l!==null&&Px(o)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=o.textContent.length,m=Math.min(l.start,h);l=l.end===void 0?m:Math.min(l.end,h),!e.extend&&m>l&&(h=l,l=m,m=h),h=Q1(o,m);var g=Q1(o,l);h&&g&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),m>l?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cM=Hs&&"documentMode"in document&&11>=document.documentMode,lu=null,mv=null,Ah=null,gv=!1;function ew(e,t,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gv||lu==null||lu!==fm(l)||(l=lu,"selectionStart"in l&&Px(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ah&&qh(Ah,l)||(Ah=l,l=bm(mv,"onSelect"),0<l.length&&(t=new Tx("onSelect","select",null,t,o),e.push({event:t,listeners:l}),t.target=lu)))}function Rf(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var cu={animationend:Rf("Animation","AnimationEnd"),animationiteration:Rf("Animation","AnimationIteration"),animationstart:Rf("Animation","AnimationStart"),transitionend:Rf("Transition","TransitionEnd")},x_={},eC={};Hs&&(eC=document.createElement("div").style,"AnimationEvent"in window||(delete cu.animationend.animation,delete cu.animationiteration.animation,delete cu.animationstart.animation),"TransitionEvent"in window||delete cu.transitionend.transition);function Km(e){if(x_[e])return x_[e];if(!cu[e])return e;var t=cu[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in eC)return x_[e]=t[o];return e}var tC=Km("animationend"),rC=Km("animationiteration"),nC=Km("animationstart"),iC=Km("transitionend"),oC=new Map,tw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(e,t){oC.set(e,t),Ql(t,[e])}for(var b_=0;b_<tw.length;b_++){var w_=tw[b_],uM=w_.toLowerCase(),dM=w_[0].toUpperCase()+w_.slice(1);Ja(uM,"on"+dM)}Ja(tC,"onAnimationEnd");Ja(rC,"onAnimationIteration");Ja(nC,"onAnimationStart");Ja("dblclick","onDoubleClick");Ja("focusin","onFocus");Ja("focusout","onBlur");Ja(iC,"onTransitionEnd");Iu("onMouseEnter",["mouseout","mouseover"]);Iu("onMouseLeave",["mouseout","mouseover"]);Iu("onPointerEnter",["pointerout","pointerover"]);Iu("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hM=new Set("cancel close invalid load scroll toggle".split(" ").concat(wh));function rw(e,t,o){var l=e.type||"unknown-event";e.currentTarget=o,uP(l,t,void 0,e),e.currentTarget=null}function sC(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var l=e[o],h=l.event;l=l.listeners;e:{var m=void 0;if(t)for(var g=l.length-1;0<=g;g--){var u=l[g],I=u.instance,M=u.currentTarget;if(u=u.listener,I!==m&&h.isPropagationStopped())break e;rw(h,u,M),m=I}else for(g=0;g<l.length;g++){if(u=l[g],I=u.instance,M=u.currentTarget,u=u.listener,I!==m&&h.isPropagationStopped())break e;rw(h,u,M),m=I}}}if(gm)throw e=dv,gm=!1,dv=null,e}function Yr(e,t){var o=t[bv];o===void 0&&(o=t[bv]=new Set);var l=e+"__bubble";o.has(l)||(aC(t,e,2,!1),o.add(l))}function S_(e,t,o){var l=0;t&&(l|=4),aC(o,e,l,t)}var Df="_reactListening"+Math.random().toString(36).slice(2);function Zh(e){if(!e[Df]){e[Df]=!0,fS.forEach(function(o){o!=="selectionchange"&&(hM.has(o)||S_(o,!1,e),S_(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Df]||(t[Df]=!0,S_("selectionchange",!1,t))}}function aC(e,t,o,l){switch(WS(t)){case 1:var h=TP;break;case 4:h=IP;break;default:h=Cx}o=h.bind(null,t,o,e),h=void 0,!uv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(t,o,{capture:!0,passive:h}):e.addEventListener(t,o,!0):h!==void 0?e.addEventListener(t,o,{passive:h}):e.addEventListener(t,o,!1)}function C_(e,t,o,l,h){var m=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var u=l.stateNode.containerInfo;if(u===h||u.nodeType===8&&u.parentNode===h)break;if(g===4)for(g=l.return;g!==null;){var I=g.tag;if((I===3||I===4)&&(I=g.stateNode.containerInfo,I===h||I.nodeType===8&&I.parentNode===h))return;g=g.return}for(;u!==null;){if(g=$l(u),g===null)return;if(I=g.tag,I===5||I===6){l=m=g;continue e}u=u.parentNode}}l=l.return}MS(function(){var M=m,B=xx(o),L=[];e:{var A=oC.get(e);if(A!==void 0){var Z=Tx,q=e;switch(e){case"keypress":if(tm(o)===0)break e;case"keydown":case"keyup":Z=VP;break;case"focusin":q="focus",Z=y_;break;case"focusout":q="blur",Z=y_;break;case"beforeblur":case"afterblur":Z=y_;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=W1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=MP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=GP;break;case tC:case rC:case nC:Z=RP;break;case iC:Z=qP;break;case"scroll":Z=EP;break;case"wheel":Z=XP;break;case"copy":case"cut":case"paste":Z=LP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=H1}var re=(t&4)!==0,le=!re&&e==="scroll",W=re?A!==null?A+"Capture":null:A;re=[];for(var j=M,V;j!==null;){V=j;var Q=V.stateNode;if(V.tag===5&&Q!==null&&(V=Q,W!==null&&(Q=Vh(j,W),Q!=null&&re.push(Xh(j,Q,V)))),le)break;j=j.return}0<re.length&&(A=new Z(A,q,null,o,B),L.push({event:A,listeners:re}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",A&&o!==lv&&(q=o.relatedTarget||o.fromElement)&&($l(q)||q[qs]))break e;if((Z||A)&&(A=B.window===B?B:(A=B.ownerDocument)?A.defaultView||A.parentWindow:window,Z?(q=o.relatedTarget||o.toElement,Z=M,q=q?$l(q):null,q!==null&&(le=ec(q),q!==le||q.tag!==5&&q.tag!==6)&&(q=null)):(Z=null,q=M),Z!==q)){if(re=W1,Q="onMouseLeave",W="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(re=H1,Q="onPointerLeave",W="onPointerEnter",j="pointer"),le=Z==null?A:uu(Z),V=q==null?A:uu(q),A=new re(Q,j+"leave",Z,o,B),A.target=le,A.relatedTarget=V,Q=null,$l(B)===M&&(re=new re(W,j+"enter",q,o,B),re.target=V,re.relatedTarget=le,Q=re),le=Q,Z&&q)t:{for(re=Z,W=q,j=0,V=re;V;V=Xc(V))j++;for(V=0,Q=W;Q;Q=Xc(Q))V++;for(;0<j-V;)re=Xc(re),j--;for(;0<V-j;)W=Xc(W),V--;for(;j--;){if(re===W||W!==null&&re===W.alternate)break t;re=Xc(re),W=Xc(W)}re=null}else re=null;Z!==null&&nw(L,A,Z,re,!1),q!==null&&le!==null&&nw(L,le,q,re,!0)}}e:{if(A=M?uu(M):window,Z=A.nodeName&&A.nodeName.toLowerCase(),Z==="select"||Z==="input"&&A.type==="file")var pe=rM;else if(X1(A))if(KS)pe=sM;else{pe=iM;var de=nM}else(Z=A.nodeName)&&Z.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(pe=oM);if(pe&&(pe=pe(e,M))){XS(L,pe,o,B);break e}de&&de(e,A,M),e==="focusout"&&(de=A._wrapperState)&&de.controlled&&A.type==="number"&&nv(A,"number",A.value)}switch(de=M?uu(M):window,e){case"focusin":(X1(de)||de.contentEditable==="true")&&(lu=de,mv=M,Ah=null);break;case"focusout":Ah=mv=lu=null;break;case"mousedown":gv=!0;break;case"contextmenu":case"mouseup":case"dragend":gv=!1,ew(L,o,B);break;case"selectionchange":if(cM)break;case"keydown":case"keyup":ew(L,o,B)}var _e;if(Ex)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else au?qS(e,o)&&(ge="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(ge="onCompositionStart");ge&&(HS&&o.locale!=="ko"&&(au||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&au&&(_e=GS()):(Fa=B,kx="value"in Fa?Fa.value:Fa.textContent,au=!0)),de=bm(M,ge),0<de.length&&(ge=new G1(ge,e,null,o,B),L.push({event:ge,listeners:de}),_e?ge.data=_e:(_e=ZS(o),_e!==null&&(ge.data=_e)))),(_e=YP?JP(e,o):QP(e,o))&&(M=bm(M,"onBeforeInput"),0<M.length&&(B=new G1("onBeforeInput","beforeinput",null,o,B),L.push({event:B,listeners:M}),B.data=_e))}sC(L,t)})}function Xh(e,t,o){return{instance:e,listener:t,currentTarget:o}}function bm(e,t){for(var o=t+"Capture",l=[];e!==null;){var h=e,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=Vh(e,o),m!=null&&l.unshift(Xh(e,m,h)),m=Vh(e,t),m!=null&&l.push(Xh(e,m,h))),e=e.return}return l}function Xc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nw(e,t,o,l,h){for(var m=t._reactName,g=[];o!==null&&o!==l;){var u=o,I=u.alternate,M=u.stateNode;if(I!==null&&I===l)break;u.tag===5&&M!==null&&(u=M,h?(I=Vh(o,m),I!=null&&g.unshift(Xh(o,I,u))):h||(I=Vh(o,m),I!=null&&g.push(Xh(o,I,u)))),o=o.return}g.length!==0&&e.push({event:t,listeners:g})}var pM=/\r\n?/g,fM=/\u0000|\uFFFD/g;function iw(e){return(typeof e=="string"?e:""+e).replace(pM,`
`).replace(fM,"")}function Lf(e,t,o){if(t=iw(t),iw(e)!==t&&o)throw Error(Je(425))}function wm(){}var yv=null,_v=null;function vv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xv=typeof setTimeout=="function"?setTimeout:void 0,mM=typeof clearTimeout=="function"?clearTimeout:void 0,ow=typeof Promise=="function"?Promise:void 0,gM=typeof queueMicrotask=="function"?queueMicrotask:typeof ow<"u"?function(e){return ow.resolve(null).then(e).catch(yM)}:xv;function yM(e){setTimeout(function(){throw e})}function k_(e,t){var o=t,l=0;do{var h=o.nextSibling;if(e.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(l===0){e.removeChild(h),Gh(t);return}l--}else o!=="$"&&o!=="$?"&&o!=="$!"||l++;o=h}while(o);Gh(t)}function Va(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var Nu=Math.random().toString(36).slice(2),fs="__reactFiber$"+Nu,Kh="__reactProps$"+Nu,qs="__reactContainer$"+Nu,bv="__reactEvents$"+Nu,_M="__reactListeners$"+Nu,vM="__reactHandles$"+Nu;function $l(e){var t=e[fs];if(t)return t;for(var o=e.parentNode;o;){if(t=o[qs]||o[fs]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=sw(e);e!==null;){if(o=e[fs])return o;e=sw(e)}return t}e=o,o=e.parentNode}return null}function pp(e){return e=e[fs]||e[qs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function uu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Je(33))}function Ym(e){return e[Kh]||null}var wv=[],du=-1;function Qa(e){return{current:e}}function Jr(e){0>du||(e.current=wv[du],wv[du]=null,du--)}function Zr(e,t){du++,wv[du]=e.current,e.current=t}var Xa={},vi=Qa(Xa),Gi=Qa(!1),ql=Xa;function Eu(e,t){var o=e.type.contextTypes;if(!o)return Xa;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in o)h[m]=t[m];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function Hi(e){return e=e.childContextTypes,e!=null}function Sm(){Jr(Gi),Jr(vi)}function aw(e,t,o){if(vi.current!==Xa)throw Error(Je(168));Zr(vi,t),Zr(Gi,o)}function lC(e,t,o){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return o;l=l.getChildContext();for(var h in l)if(!(h in t))throw Error(Je(108,nP(e)||"Unknown",h));return cn({},o,l)}function Cm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xa,ql=vi.current,Zr(vi,e),Zr(Gi,Gi.current),!0}function lw(e,t,o){var l=e.stateNode;if(!l)throw Error(Je(169));o?(e=lC(e,t,ql),l.__reactInternalMemoizedMergedChildContext=e,Jr(Gi),Jr(vi),Zr(vi,e)):Jr(Gi),Zr(Gi,o)}var Vs=null,Jm=!1,T_=!1;function cC(e){Vs===null?Vs=[e]:Vs.push(e)}function xM(e){Jm=!0,cC(e)}function el(){if(!T_&&Vs!==null){T_=!0;var e=0,t=Fr;try{var o=Vs;for(Fr=1;e<o.length;e++){var l=o[e];do l=l(!0);while(l!==null)}Vs=null,Jm=!1}catch(h){throw Vs!==null&&(Vs=Vs.slice(e+1)),DS(bx,el),h}finally{Fr=t,T_=!1}}return null}var hu=[],pu=0,km=null,Tm=0,ko=[],To=0,Zl=null,Us=1,Ws="";function Dl(e,t){hu[pu++]=Tm,hu[pu++]=km,km=e,Tm=t}function uC(e,t,o){ko[To++]=Us,ko[To++]=Ws,ko[To++]=Zl,Zl=e;var l=Us;e=Ws;var h=32-Go(l)-1;l&=~(1<<h),o+=1;var m=32-Go(t)+h;if(30<m){var g=h-h%5;m=(l&(1<<g)-1).toString(32),l>>=g,h-=g,Us=1<<32-Go(t)+h|o<<h|l,Ws=m+e}else Us=1<<m|o<<h|l,Ws=e}function Mx(e){e.return!==null&&(Dl(e,1),uC(e,1,0))}function Ax(e){for(;e===km;)km=hu[--pu],hu[pu]=null,Tm=hu[--pu],hu[pu]=null;for(;e===Zl;)Zl=ko[--To],ko[To]=null,Ws=ko[--To],ko[To]=null,Us=ko[--To],ko[To]=null}var uo=null,co=null,nn=!1,Wo=null;function dC(e,t){var o=Po(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function cw(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,uo=e,co=Va(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,uo=e,co=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=Zl!==null?{id:Us,overflow:Ws}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=Po(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,uo=e,co=null,!0):!1;default:return!1}}function Sv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cv(e){if(nn){var t=co;if(t){var o=t;if(!cw(e,t)){if(Sv(e))throw Error(Je(418));t=Va(o.nextSibling);var l=uo;t&&cw(e,t)?dC(l,o):(e.flags=e.flags&-4097|2,nn=!1,uo=e)}}else{if(Sv(e))throw Error(Je(418));e.flags=e.flags&-4097|2,nn=!1,uo=e}}}function uw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;uo=e}function Bf(e){if(e!==uo)return!1;if(!nn)return uw(e),nn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vv(e.type,e.memoizedProps)),t&&(t=co)){if(Sv(e))throw hC(),Error(Je(418));for(;t;)dC(e,t),t=Va(t.nextSibling)}if(uw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){co=Va(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}co=null}}else co=uo?Va(e.stateNode.nextSibling):null;return!0}function hC(){for(var e=co;e;)e=Va(e.nextSibling)}function Pu(){co=uo=null,nn=!1}function zx(e){Wo===null?Wo=[e]:Wo.push(e)}var bM=Ys.ReactCurrentBatchConfig;function ch(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Je(309));var l=o.stateNode}if(!l)throw Error(Je(147,e));var h=l,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(g){var u=h.refs;g===null?delete u[m]:u[m]=g},t._stringRef=m,t)}if(typeof e!="string")throw Error(Je(284));if(!o._owner)throw Error(Je(290,e))}return e}function Ff(e,t){throw e=Object.prototype.toString.call(t),Error(Je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dw(e){var t=e._init;return t(e._payload)}function pC(e){function t(W,j){if(e){var V=W.deletions;V===null?(W.deletions=[j],W.flags|=16):V.push(j)}}function o(W,j){if(!e)return null;for(;j!==null;)t(W,j),j=j.sibling;return null}function l(W,j){for(W=new Map;j!==null;)j.key!==null?W.set(j.key,j):W.set(j.index,j),j=j.sibling;return W}function h(W,j){return W=Ha(W,j),W.index=0,W.sibling=null,W}function m(W,j,V){return W.index=V,e?(V=W.alternate,V!==null?(V=V.index,V<j?(W.flags|=2,j):V):(W.flags|=2,j)):(W.flags|=1048576,j)}function g(W){return e&&W.alternate===null&&(W.flags|=2),W}function u(W,j,V,Q){return j===null||j.tag!==6?(j=R_(V,W.mode,Q),j.return=W,j):(j=h(j,V),j.return=W,j)}function I(W,j,V,Q){var pe=V.type;return pe===su?B(W,j,V.props.children,Q,V.key):j!==null&&(j.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===za&&dw(pe)===j.type)?(Q=h(j,V.props),Q.ref=ch(W,j,V),Q.return=W,Q):(Q=lm(V.type,V.key,V.props,null,W.mode,Q),Q.ref=ch(W,j,V),Q.return=W,Q)}function M(W,j,V,Q){return j===null||j.tag!==4||j.stateNode.containerInfo!==V.containerInfo||j.stateNode.implementation!==V.implementation?(j=D_(V,W.mode,Q),j.return=W,j):(j=h(j,V.children||[]),j.return=W,j)}function B(W,j,V,Q,pe){return j===null||j.tag!==7?(j=Gl(V,W.mode,Q,pe),j.return=W,j):(j=h(j,V),j.return=W,j)}function L(W,j,V){if(typeof j=="string"&&j!==""||typeof j=="number")return j=R_(""+j,W.mode,V),j.return=W,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Tf:return V=lm(j.type,j.key,j.props,null,W.mode,V),V.ref=ch(W,null,j),V.return=W,V;case ou:return j=D_(j,W.mode,V),j.return=W,j;case za:var Q=j._init;return L(W,Q(j._payload),V)}if(xh(j)||ih(j))return j=Gl(j,W.mode,V,null),j.return=W,j;Ff(W,j)}return null}function A(W,j,V,Q){var pe=j!==null?j.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return pe!==null?null:u(W,j,""+V,Q);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Tf:return V.key===pe?I(W,j,V,Q):null;case ou:return V.key===pe?M(W,j,V,Q):null;case za:return pe=V._init,A(W,j,pe(V._payload),Q)}if(xh(V)||ih(V))return pe!==null?null:B(W,j,V,Q,null);Ff(W,V)}return null}function Z(W,j,V,Q,pe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return W=W.get(V)||null,u(j,W,""+Q,pe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Tf:return W=W.get(Q.key===null?V:Q.key)||null,I(j,W,Q,pe);case ou:return W=W.get(Q.key===null?V:Q.key)||null,M(j,W,Q,pe);case za:var de=Q._init;return Z(W,j,V,de(Q._payload),pe)}if(xh(Q)||ih(Q))return W=W.get(V)||null,B(j,W,Q,pe,null);Ff(j,Q)}return null}function q(W,j,V,Q){for(var pe=null,de=null,_e=j,ge=j=0,Ae=null;_e!==null&&ge<V.length;ge++){_e.index>ge?(Ae=_e,_e=null):Ae=_e.sibling;var Re=A(W,_e,V[ge],Q);if(Re===null){_e===null&&(_e=Ae);break}e&&_e&&Re.alternate===null&&t(W,_e),j=m(Re,j,ge),de===null?pe=Re:de.sibling=Re,de=Re,_e=Ae}if(ge===V.length)return o(W,_e),nn&&Dl(W,ge),pe;if(_e===null){for(;ge<V.length;ge++)_e=L(W,V[ge],Q),_e!==null&&(j=m(_e,j,ge),de===null?pe=_e:de.sibling=_e,de=_e);return nn&&Dl(W,ge),pe}for(_e=l(W,_e);ge<V.length;ge++)Ae=Z(_e,W,ge,V[ge],Q),Ae!==null&&(e&&Ae.alternate!==null&&_e.delete(Ae.key===null?ge:Ae.key),j=m(Ae,j,ge),de===null?pe=Ae:de.sibling=Ae,de=Ae);return e&&_e.forEach(function(De){return t(W,De)}),nn&&Dl(W,ge),pe}function re(W,j,V,Q){var pe=ih(V);if(typeof pe!="function")throw Error(Je(150));if(V=pe.call(V),V==null)throw Error(Je(151));for(var de=pe=null,_e=j,ge=j=0,Ae=null,Re=V.next();_e!==null&&!Re.done;ge++,Re=V.next()){_e.index>ge?(Ae=_e,_e=null):Ae=_e.sibling;var De=A(W,_e,Re.value,Q);if(De===null){_e===null&&(_e=Ae);break}e&&_e&&De.alternate===null&&t(W,_e),j=m(De,j,ge),de===null?pe=De:de.sibling=De,de=De,_e=Ae}if(Re.done)return o(W,_e),nn&&Dl(W,ge),pe;if(_e===null){for(;!Re.done;ge++,Re=V.next())Re=L(W,Re.value,Q),Re!==null&&(j=m(Re,j,ge),de===null?pe=Re:de.sibling=Re,de=Re);return nn&&Dl(W,ge),pe}for(_e=l(W,_e);!Re.done;ge++,Re=V.next())Re=Z(_e,W,ge,Re.value,Q),Re!==null&&(e&&Re.alternate!==null&&_e.delete(Re.key===null?ge:Re.key),j=m(Re,j,ge),de===null?pe=Re:de.sibling=Re,de=Re);return e&&_e.forEach(function(X){return t(W,X)}),nn&&Dl(W,ge),pe}function le(W,j,V,Q){if(typeof V=="object"&&V!==null&&V.type===su&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case Tf:e:{for(var pe=V.key,de=j;de!==null;){if(de.key===pe){if(pe=V.type,pe===su){if(de.tag===7){o(W,de.sibling),j=h(de,V.props.children),j.return=W,W=j;break e}}else if(de.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===za&&dw(pe)===de.type){o(W,de.sibling),j=h(de,V.props),j.ref=ch(W,de,V),j.return=W,W=j;break e}o(W,de);break}else t(W,de);de=de.sibling}V.type===su?(j=Gl(V.props.children,W.mode,Q,V.key),j.return=W,W=j):(Q=lm(V.type,V.key,V.props,null,W.mode,Q),Q.ref=ch(W,j,V),Q.return=W,W=Q)}return g(W);case ou:e:{for(de=V.key;j!==null;){if(j.key===de)if(j.tag===4&&j.stateNode.containerInfo===V.containerInfo&&j.stateNode.implementation===V.implementation){o(W,j.sibling),j=h(j,V.children||[]),j.return=W,W=j;break e}else{o(W,j);break}else t(W,j);j=j.sibling}j=D_(V,W.mode,Q),j.return=W,W=j}return g(W);case za:return de=V._init,le(W,j,de(V._payload),Q)}if(xh(V))return q(W,j,V,Q);if(ih(V))return re(W,j,V,Q);Ff(W,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,j!==null&&j.tag===6?(o(W,j.sibling),j=h(j,V),j.return=W,W=j):(o(W,j),j=R_(V,W.mode,Q),j.return=W,W=j),g(W)):o(W,j)}return le}var Mu=pC(!0),fC=pC(!1),Im=Qa(null),Em=null,fu=null,Rx=null;function Dx(){Rx=fu=Em=null}function Lx(e){var t=Im.current;Jr(Im),e._currentValue=t}function kv(e,t,o){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===o)break;e=e.return}}function wu(e,t){Em=e,Rx=fu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wi=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(Rx!==e)if(e={context:e,memoizedValue:t,next:null},fu===null){if(Em===null)throw Error(Je(308));fu=e,Em.dependencies={lanes:0,firstContext:e}}else fu=fu.next=e;return t}var Nl=null;function Bx(e){Nl===null?Nl=[e]:Nl.push(e)}function mC(e,t,o,l){var h=t.interleaved;return h===null?(o.next=o,Bx(t)):(o.next=h.next,h.next=o),t.interleaved=o,Zs(e,l)}function Zs(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var Ra=!1;function Fx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,o){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,wr&2){var h=l.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),l.pending=t,Zs(e,o)}return h=l.interleaved,h===null?(t.next=t,Bx(l)):(t.next=h.next,h.next=t),l.interleaved=t,Zs(e,o)}function rm(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,wx(e,o)}}function hw(e,t){var o=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var g={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};m===null?h=m=g:m=m.next=g,o=o.next}while(o!==null);m===null?h=m=t:m=m.next=t}else h=m=t;o={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,effects:l.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function Pm(e,t,o,l){var h=e.updateQueue;Ra=!1;var m=h.firstBaseUpdate,g=h.lastBaseUpdate,u=h.shared.pending;if(u!==null){h.shared.pending=null;var I=u,M=I.next;I.next=null,g===null?m=M:g.next=M,g=I;var B=e.alternate;B!==null&&(B=B.updateQueue,u=B.lastBaseUpdate,u!==g&&(u===null?B.firstBaseUpdate=M:u.next=M,B.lastBaseUpdate=I))}if(m!==null){var L=h.baseState;g=0,B=M=I=null,u=m;do{var A=u.lane,Z=u.eventTime;if((l&A)===A){B!==null&&(B=B.next={eventTime:Z,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var q=e,re=u;switch(A=t,Z=o,re.tag){case 1:if(q=re.payload,typeof q=="function"){L=q.call(Z,L,A);break e}L=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=re.payload,A=typeof q=="function"?q.call(Z,L,A):q,A==null)break e;L=cn({},L,A);break e;case 2:Ra=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,A=h.effects,A===null?h.effects=[u]:A.push(u))}else Z={eventTime:Z,lane:A,tag:u.tag,payload:u.payload,callback:u.callback,next:null},B===null?(M=B=Z,I=L):B=B.next=Z,g|=A;if(u=u.next,u===null){if(u=h.shared.pending,u===null)break;A=u,u=A.next,A.next=null,h.lastBaseUpdate=A,h.shared.pending=null}}while(!0);if(B===null&&(I=L),h.baseState=I,h.firstBaseUpdate=M,h.lastBaseUpdate=B,t=h.shared.interleaved,t!==null){h=t;do g|=h.lane,h=h.next;while(h!==t)}else m===null&&(h.shared.lanes=0);Kl|=g,e.lanes=g,e.memoizedState=L}}function pw(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],h=l.callback;if(h!==null){if(l.callback=null,l=o,typeof h!="function")throw Error(Je(191,h));h.call(l)}}}var fp={},ys=Qa(fp),Yh=Qa(fp),Jh=Qa(fp);function jl(e){if(e===fp)throw Error(Je(174));return e}function Ox(e,t){switch(Zr(Jh,t),Zr(Yh,e),Zr(ys,fp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ov(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ov(t,e)}Jr(ys),Zr(ys,t)}function Au(){Jr(ys),Jr(Yh),Jr(Jh)}function yC(e){jl(Jh.current);var t=jl(ys.current),o=ov(t,e.type);t!==o&&(Zr(Yh,e),Zr(ys,o))}function $x(e){Yh.current===e&&(Jr(ys),Jr(Yh))}var an=Qa(0);function Mm(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var I_=[];function Nx(){for(var e=0;e<I_.length;e++)I_[e]._workInProgressVersionPrimary=null;I_.length=0}var nm=Ys.ReactCurrentDispatcher,E_=Ys.ReactCurrentBatchConfig,Xl=0,ln=null,Rn=null,Gn=null,Am=!1,zh=!1,Qh=0,wM=0;function mi(){throw Error(Je(321))}function jx(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!qo(e[o],t[o]))return!1;return!0}function Vx(e,t,o,l,h,m){if(Xl=m,ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nm.current=e===null||e.memoizedState===null?TM:IM,e=o(l,h),zh){m=0;do{if(zh=!1,Qh=0,25<=m)throw Error(Je(301));m+=1,Gn=Rn=null,t.updateQueue=null,nm.current=EM,e=o(l,h)}while(zh)}if(nm.current=zm,t=Rn!==null&&Rn.next!==null,Xl=0,Gn=Rn=ln=null,Am=!1,t)throw Error(Je(300));return e}function Ux(){var e=Qh!==0;return Qh=0,e}function us(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?ln.memoizedState=Gn=e:Gn=Gn.next=e,Gn}function zo(){if(Rn===null){var e=ln.alternate;e=e!==null?e.memoizedState:null}else e=Rn.next;var t=Gn===null?ln.memoizedState:Gn.next;if(t!==null)Gn=t,Rn=e;else{if(e===null)throw Error(Je(310));Rn=e,e={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Gn===null?ln.memoizedState=Gn=e:Gn=Gn.next=e}return Gn}function ep(e,t){return typeof t=="function"?t(e):t}function P_(e){var t=zo(),o=t.queue;if(o===null)throw Error(Je(311));o.lastRenderedReducer=e;var l=Rn,h=l.baseQueue,m=o.pending;if(m!==null){if(h!==null){var g=h.next;h.next=m.next,m.next=g}l.baseQueue=h=m,o.pending=null}if(h!==null){m=h.next,l=l.baseState;var u=g=null,I=null,M=m;do{var B=M.lane;if((Xl&B)===B)I!==null&&(I=I.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),l=M.hasEagerState?M.eagerState:e(l,M.action);else{var L={lane:B,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};I===null?(u=I=L,g=l):I=I.next=L,ln.lanes|=B,Kl|=B}M=M.next}while(M!==null&&M!==m);I===null?g=l:I.next=u,qo(l,t.memoizedState)||(Wi=!0),t.memoizedState=l,t.baseState=g,t.baseQueue=I,o.lastRenderedState=l}if(e=o.interleaved,e!==null){h=e;do m=h.lane,ln.lanes|=m,Kl|=m,h=h.next;while(h!==e)}else h===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function M_(e){var t=zo(),o=t.queue;if(o===null)throw Error(Je(311));o.lastRenderedReducer=e;var l=o.dispatch,h=o.pending,m=t.memoizedState;if(h!==null){o.pending=null;var g=h=h.next;do m=e(m,g.action),g=g.next;while(g!==h);qo(m,t.memoizedState)||(Wi=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),o.lastRenderedState=m}return[m,l]}function _C(){}function vC(e,t){var o=ln,l=zo(),h=t(),m=!qo(l.memoizedState,h);if(m&&(l.memoizedState=h,Wi=!0),l=l.queue,Wx(wC.bind(null,o,l,e),[e]),l.getSnapshot!==t||m||Gn!==null&&Gn.memoizedState.tag&1){if(o.flags|=2048,tp(9,bC.bind(null,o,l,h,t),void 0,null),Hn===null)throw Error(Je(349));Xl&30||xC(o,t,h)}return h}function xC(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function bC(e,t,o,l){t.value=o,t.getSnapshot=l,SC(t)&&CC(e)}function wC(e,t,o){return o(function(){SC(t)&&CC(e)})}function SC(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!qo(e,o)}catch{return!0}}function CC(e){var t=Zs(e,1);t!==null&&Ho(t,e,1,-1)}function fw(e){var t=us();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ep,lastRenderedState:e},t.queue=e,e=e.dispatch=kM.bind(null,ln,e),[t.memoizedState,e]}function tp(e,t,o,l){return e={tag:e,create:t,destroy:o,deps:l,next:null},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(l=o.next,o.next=e,e.next=l,t.lastEffect=e)),e}function kC(){return zo().memoizedState}function im(e,t,o,l){var h=us();ln.flags|=e,h.memoizedState=tp(1|t,o,void 0,l===void 0?null:l)}function Qm(e,t,o,l){var h=zo();l=l===void 0?null:l;var m=void 0;if(Rn!==null){var g=Rn.memoizedState;if(m=g.destroy,l!==null&&jx(l,g.deps)){h.memoizedState=tp(t,o,m,l);return}}ln.flags|=e,h.memoizedState=tp(1|t,o,m,l)}function mw(e,t){return im(8390656,8,e,t)}function Wx(e,t){return Qm(2048,8,e,t)}function TC(e,t){return Qm(4,2,e,t)}function IC(e,t){return Qm(4,4,e,t)}function EC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function PC(e,t,o){return o=o!=null?o.concat([e]):null,Qm(4,4,EC.bind(null,t,e),o)}function Gx(){}function MC(e,t){var o=zo();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&jx(t,l[1])?l[0]:(o.memoizedState=[e,t],e)}function AC(e,t){var o=zo();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&jx(t,l[1])?l[0]:(e=e(),o.memoizedState=[e,t],e)}function zC(e,t,o){return Xl&21?(qo(o,t)||(o=FS(),ln.lanes|=o,Kl|=o,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wi=!0),e.memoizedState=o)}function SM(e,t){var o=Fr;Fr=o!==0&&4>o?o:4,e(!0);var l=E_.transition;E_.transition={};try{e(!1),t()}finally{Fr=o,E_.transition=l}}function RC(){return zo().memoizedState}function CM(e,t,o){var l=Ga(e);if(o={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null},DC(e))LC(t,o);else if(o=mC(e,t,o,l),o!==null){var h=Mi();Ho(o,e,l,h),BC(o,t,l)}}function kM(e,t,o){var l=Ga(e),h={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null};if(DC(e))LC(t,h);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var g=t.lastRenderedState,u=m(g,o);if(h.hasEagerState=!0,h.eagerState=u,qo(u,g)){var I=t.interleaved;I===null?(h.next=h,Bx(t)):(h.next=I.next,I.next=h),t.interleaved=h;return}}catch{}finally{}o=mC(e,t,h,l),o!==null&&(h=Mi(),Ho(o,e,l,h),BC(o,t,l))}}function DC(e){var t=e.alternate;return e===ln||t!==null&&t===ln}function LC(e,t){zh=Am=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function BC(e,t,o){if(o&4194240){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,wx(e,o)}}var zm={readContext:Ao,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},TM={readContext:Ao,useCallback:function(e,t){return us().memoizedState=[e,t===void 0?null:t],e},useContext:Ao,useEffect:mw,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,im(4194308,4,EC.bind(null,t,e),o)},useLayoutEffect:function(e,t){return im(4194308,4,e,t)},useInsertionEffect:function(e,t){return im(4,2,e,t)},useMemo:function(e,t){var o=us();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var l=us();return t=o!==void 0?o(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=CM.bind(null,ln,e),[l.memoizedState,e]},useRef:function(e){var t=us();return e={current:e},t.memoizedState=e},useState:fw,useDebugValue:Gx,useDeferredValue:function(e){return us().memoizedState=e},useTransition:function(){var e=fw(!1),t=e[0];return e=SM.bind(null,e[1]),us().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var l=ln,h=us();if(nn){if(o===void 0)throw Error(Je(407));o=o()}else{if(o=t(),Hn===null)throw Error(Je(349));Xl&30||xC(l,t,o)}h.memoizedState=o;var m={value:o,getSnapshot:t};return h.queue=m,mw(wC.bind(null,l,m,e),[e]),l.flags|=2048,tp(9,bC.bind(null,l,m,o,t),void 0,null),o},useId:function(){var e=us(),t=Hn.identifierPrefix;if(nn){var o=Ws,l=Us;o=(l&~(1<<32-Go(l)-1)).toString(32)+o,t=":"+t+"R"+o,o=Qh++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=wM++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},IM={readContext:Ao,useCallback:MC,useContext:Ao,useEffect:Wx,useImperativeHandle:PC,useInsertionEffect:TC,useLayoutEffect:IC,useMemo:AC,useReducer:P_,useRef:kC,useState:function(){return P_(ep)},useDebugValue:Gx,useDeferredValue:function(e){var t=zo();return zC(t,Rn.memoizedState,e)},useTransition:function(){var e=P_(ep)[0],t=zo().memoizedState;return[e,t]},useMutableSource:_C,useSyncExternalStore:vC,useId:RC,unstable_isNewReconciler:!1},EM={readContext:Ao,useCallback:MC,useContext:Ao,useEffect:Wx,useImperativeHandle:PC,useInsertionEffect:TC,useLayoutEffect:IC,useMemo:AC,useReducer:M_,useRef:kC,useState:function(){return M_(ep)},useDebugValue:Gx,useDeferredValue:function(e){var t=zo();return Rn===null?t.memoizedState=e:zC(t,Rn.memoizedState,e)},useTransition:function(){var e=M_(ep)[0],t=zo().memoizedState;return[e,t]},useMutableSource:_C,useSyncExternalStore:vC,useId:RC,unstable_isNewReconciler:!1};function Vo(e,t){if(e&&e.defaultProps){t=cn({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}function Tv(e,t,o,l){t=e.memoizedState,o=o(l,t),o=o==null?t:cn({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var eg={isMounted:function(e){return(e=e._reactInternals)?ec(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var l=Mi(),h=Ga(e),m=Gs(l,h);m.payload=t,o!=null&&(m.callback=o),t=Ua(e,m,h),t!==null&&(Ho(t,e,h,l),rm(t,e,h))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var l=Mi(),h=Ga(e),m=Gs(l,h);m.tag=1,m.payload=t,o!=null&&(m.callback=o),t=Ua(e,m,h),t!==null&&(Ho(t,e,h,l),rm(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=Mi(),l=Ga(e),h=Gs(o,l);h.tag=2,t!=null&&(h.callback=t),t=Ua(e,h,l),t!==null&&(Ho(t,e,l,o),rm(t,e,l))}};function gw(e,t,o,l,h,m,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,g):t.prototype&&t.prototype.isPureReactComponent?!qh(o,l)||!qh(h,m):!0}function FC(e,t,o){var l=!1,h=Xa,m=t.contextType;return typeof m=="object"&&m!==null?m=Ao(m):(h=Hi(t)?ql:vi.current,l=t.contextTypes,m=(l=l!=null)?Eu(e,h):Xa),t=new t(o,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eg,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=m),t}function yw(e,t,o,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,l),t.state!==e&&eg.enqueueReplaceState(t,t.state,null)}function Iv(e,t,o,l){var h=e.stateNode;h.props=o,h.state=e.memoizedState,h.refs={},Fx(e);var m=t.contextType;typeof m=="object"&&m!==null?h.context=Ao(m):(m=Hi(t)?ql:vi.current,h.context=Eu(e,m)),h.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(Tv(e,t,m,o),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&eg.enqueueReplaceState(h,h.state,null),Pm(e,o,h,l),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function zu(e,t){try{var o="",l=t;do o+=rP(l),l=l.return;while(l);var h=o}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:h,digest:null}}function A_(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function Ev(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var PM=typeof WeakMap=="function"?WeakMap:Map;function OC(e,t,o){o=Gs(-1,o),o.tag=3,o.payload={element:null};var l=t.value;return o.callback=function(){Dm||(Dm=!0,Ov=l),Ev(e,t)},o}function $C(e,t,o){o=Gs(-1,o),o.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var h=t.value;o.payload=function(){return l(h)},o.callback=function(){Ev(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(o.callback=function(){Ev(e,t),typeof l!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),o}function _w(e,t,o){var l=e.pingCache;if(l===null){l=e.pingCache=new PM;var h=new Set;l.set(t,h)}else h=l.get(t),h===void 0&&(h=new Set,l.set(t,h));h.has(o)||(h.add(o),e=UM.bind(null,e,t,o),t.then(e,e))}function vw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xw(e,t,o,l,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=Gs(-1,1),t.tag=2,Ua(o,t,1))),o.lanes|=1),e)}var MM=Ys.ReactCurrentOwner,Wi=!1;function Pi(e,t,o,l){t.child=e===null?fC(t,null,o,l):Mu(t,e.child,o,l)}function bw(e,t,o,l,h){o=o.render;var m=t.ref;return wu(t,h),l=Vx(e,t,o,l,m,h),o=Ux(),e!==null&&!Wi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Xs(e,t,h)):(nn&&o&&Mx(t),t.flags|=1,Pi(e,t,l,h),t.child)}function ww(e,t,o,l,h){if(e===null){var m=o.type;return typeof m=="function"&&!Qx(m)&&m.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=m,NC(e,t,m,l,h)):(e=lm(o.type,null,l,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!(e.lanes&h)){var g=m.memoizedProps;if(o=o.compare,o=o!==null?o:qh,o(g,l)&&e.ref===t.ref)return Xs(e,t,h)}return t.flags|=1,e=Ha(m,l),e.ref=t.ref,e.return=t,t.child=e}function NC(e,t,o,l,h){if(e!==null){var m=e.memoizedProps;if(qh(m,l)&&e.ref===t.ref)if(Wi=!1,t.pendingProps=l=m,(e.lanes&h)!==0)e.flags&131072&&(Wi=!0);else return t.lanes=e.lanes,Xs(e,t,h)}return Pv(e,t,o,l,h)}function jC(e,t,o){var l=t.pendingProps,h=l.children,m=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zr(gu,ao),ao|=o;else{if(!(o&1073741824))return e=m!==null?m.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Zr(gu,ao),ao|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=m!==null?m.baseLanes:o,Zr(gu,ao),ao|=l}else m!==null?(l=m.baseLanes|o,t.memoizedState=null):l=o,Zr(gu,ao),ao|=l;return Pi(e,t,h,o),t.child}function VC(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function Pv(e,t,o,l,h){var m=Hi(o)?ql:vi.current;return m=Eu(t,m),wu(t,h),o=Vx(e,t,o,l,m,h),l=Ux(),e!==null&&!Wi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Xs(e,t,h)):(nn&&l&&Mx(t),t.flags|=1,Pi(e,t,o,h),t.child)}function Sw(e,t,o,l,h){if(Hi(o)){var m=!0;Cm(t)}else m=!1;if(wu(t,h),t.stateNode===null)om(e,t),FC(t,o,l),Iv(t,o,l,h),l=!0;else if(e===null){var g=t.stateNode,u=t.memoizedProps;g.props=u;var I=g.context,M=o.contextType;typeof M=="object"&&M!==null?M=Ao(M):(M=Hi(o)?ql:vi.current,M=Eu(t,M));var B=o.getDerivedStateFromProps,L=typeof B=="function"||typeof g.getSnapshotBeforeUpdate=="function";L||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==l||I!==M)&&yw(t,g,l,M),Ra=!1;var A=t.memoizedState;g.state=A,Pm(t,l,g,h),I=t.memoizedState,u!==l||A!==I||Gi.current||Ra?(typeof B=="function"&&(Tv(t,o,B,l),I=t.memoizedState),(u=Ra||gw(t,o,u,l,A,I,M))?(L||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=I),g.props=l,g.state=I,g.context=M,l=u):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{g=t.stateNode,gC(e,t),u=t.memoizedProps,M=t.type===t.elementType?u:Vo(t.type,u),g.props=M,L=t.pendingProps,A=g.context,I=o.contextType,typeof I=="object"&&I!==null?I=Ao(I):(I=Hi(o)?ql:vi.current,I=Eu(t,I));var Z=o.getDerivedStateFromProps;(B=typeof Z=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==L||A!==I)&&yw(t,g,l,I),Ra=!1,A=t.memoizedState,g.state=A,Pm(t,l,g,h);var q=t.memoizedState;u!==L||A!==q||Gi.current||Ra?(typeof Z=="function"&&(Tv(t,o,Z,l),q=t.memoizedState),(M=Ra||gw(t,o,M,l,A,q,I)||!1)?(B||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,q,I),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,q,I)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=q),g.props=l,g.state=q,g.context=I,l=M):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),l=!1)}return Mv(e,t,o,l,m,h)}function Mv(e,t,o,l,h,m){VC(e,t);var g=(t.flags&128)!==0;if(!l&&!g)return h&&lw(t,o,!1),Xs(e,t,m);l=t.stateNode,MM.current=t;var u=g&&typeof o.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&g?(t.child=Mu(t,e.child,null,m),t.child=Mu(t,null,u,m)):Pi(e,t,u,m),t.memoizedState=l.state,h&&lw(t,o,!0),t.child}function UC(e){var t=e.stateNode;t.pendingContext?aw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&aw(e,t.context,!1),Ox(e,t.containerInfo)}function Cw(e,t,o,l,h){return Pu(),zx(h),t.flags|=256,Pi(e,t,o,l),t.child}var Av={dehydrated:null,treeContext:null,retryLane:0};function zv(e){return{baseLanes:e,cachePool:null,transitions:null}}function WC(e,t,o){var l=t.pendingProps,h=an.current,m=!1,g=(t.flags&128)!==0,u;if((u=g)||(u=e!==null&&e.memoizedState===null?!1:(h&2)!==0),u?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Zr(an,h&1),e===null)return Cv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=l.children,e=l.fallback,m?(l=t.mode,m=t.child,g={mode:"hidden",children:g},!(l&1)&&m!==null?(m.childLanes=0,m.pendingProps=g):m=ng(g,l,0,null),e=Gl(e,l,o,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=zv(o),t.memoizedState=Av,e):Hx(t,g));if(h=e.memoizedState,h!==null&&(u=h.dehydrated,u!==null))return AM(e,t,g,l,u,h,o);if(m){m=l.fallback,g=t.mode,h=e.child,u=h.sibling;var I={mode:"hidden",children:l.children};return!(g&1)&&t.child!==h?(l=t.child,l.childLanes=0,l.pendingProps=I,t.deletions=null):(l=Ha(h,I),l.subtreeFlags=h.subtreeFlags&14680064),u!==null?m=Ha(u,m):(m=Gl(m,g,o,null),m.flags|=2),m.return=t,l.return=t,l.sibling=m,t.child=l,l=m,m=t.child,g=e.child.memoizedState,g=g===null?zv(o):{baseLanes:g.baseLanes|o,cachePool:null,transitions:g.transitions},m.memoizedState=g,m.childLanes=e.childLanes&~o,t.memoizedState=Av,l}return m=e.child,e=m.sibling,l=Ha(m,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=o),l.return=t,l.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=l,t.memoizedState=null,l}function Hx(e,t){return t=ng({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Of(e,t,o,l){return l!==null&&zx(l),Mu(t,e.child,null,o),e=Hx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function AM(e,t,o,l,h,m,g){if(o)return t.flags&256?(t.flags&=-257,l=A_(Error(Je(422))),Of(e,t,g,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=l.fallback,h=t.mode,l=ng({mode:"visible",children:l.children},h,0,null),m=Gl(m,h,g,null),m.flags|=2,l.return=t,m.return=t,l.sibling=m,t.child=l,t.mode&1&&Mu(t,e.child,null,g),t.child.memoizedState=zv(g),t.memoizedState=Av,m);if(!(t.mode&1))return Of(e,t,g,null);if(h.data==="$!"){if(l=h.nextSibling&&h.nextSibling.dataset,l)var u=l.dgst;return l=u,m=Error(Je(419)),l=A_(m,l,void 0),Of(e,t,g,l)}if(u=(g&e.childLanes)!==0,Wi||u){if(l=Hn,l!==null){switch(g&-g){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(l.suspendedLanes|g)?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,Zs(e,h),Ho(l,e,h,-1))}return Jx(),l=A_(Error(Je(421))),Of(e,t,g,l)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=WM.bind(null,e),h._reactRetry=t,null):(e=m.treeContext,co=Va(h.nextSibling),uo=t,nn=!0,Wo=null,e!==null&&(ko[To++]=Us,ko[To++]=Ws,ko[To++]=Zl,Us=e.id,Ws=e.overflow,Zl=t),t=Hx(t,l.children),t.flags|=4096,t)}function kw(e,t,o){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),kv(e.return,t,o)}function z_(e,t,o,l,h){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:h}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=o,m.tailMode=h)}function GC(e,t,o){var l=t.pendingProps,h=l.revealOrder,m=l.tail;if(Pi(e,t,l.children,o),l=an.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kw(e,o,t);else if(e.tag===19)kw(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Zr(an,l),!(t.mode&1))t.memoizedState=null;else switch(h){case"forwards":for(o=t.child,h=null;o!==null;)e=o.alternate,e!==null&&Mm(e)===null&&(h=o),o=o.sibling;o=h,o===null?(h=t.child,t.child=null):(h=o.sibling,o.sibling=null),z_(t,!1,h,o,m);break;case"backwards":for(o=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&Mm(e)===null){t.child=h;break}e=h.sibling,h.sibling=o,o=h,h=e}z_(t,!0,o,null,m);break;case"together":z_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function om(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xs(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Kl|=t.lanes,!(o&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Je(153));if(t.child!==null){for(e=t.child,o=Ha(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Ha(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function zM(e,t,o){switch(t.tag){case 3:UC(t),Pu();break;case 5:yC(t);break;case 1:Hi(t.type)&&Cm(t);break;case 4:Ox(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,h=t.memoizedProps.value;Zr(Im,l._currentValue),l._currentValue=h;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Zr(an,an.current&1),t.flags|=128,null):o&t.child.childLanes?WC(e,t,o):(Zr(an,an.current&1),e=Xs(e,t,o),e!==null?e.sibling:null);Zr(an,an.current&1);break;case 19:if(l=(o&t.childLanes)!==0,e.flags&128){if(l)return GC(e,t,o);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Zr(an,an.current),l)break;return null;case 22:case 23:return t.lanes=0,jC(e,t,o)}return Xs(e,t,o)}var HC,Rv,qC,ZC;HC=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Rv=function(){};qC=function(e,t,o,l){var h=e.memoizedProps;if(h!==l){e=t.stateNode,jl(ys.current);var m=null;switch(o){case"input":h=tv(e,h),l=tv(e,l),m=[];break;case"select":h=cn({},h,{value:void 0}),l=cn({},l,{value:void 0}),m=[];break;case"textarea":h=iv(e,h),l=iv(e,l),m=[];break;default:typeof h.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=wm)}sv(o,l);var g;o=null;for(M in h)if(!l.hasOwnProperty(M)&&h.hasOwnProperty(M)&&h[M]!=null)if(M==="style"){var u=h[M];for(g in u)u.hasOwnProperty(g)&&(o||(o={}),o[g]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(Nh.hasOwnProperty(M)?m||(m=[]):(m=m||[]).push(M,null));for(M in l){var I=l[M];if(u=h!=null?h[M]:void 0,l.hasOwnProperty(M)&&I!==u&&(I!=null||u!=null))if(M==="style")if(u){for(g in u)!u.hasOwnProperty(g)||I&&I.hasOwnProperty(g)||(o||(o={}),o[g]="");for(g in I)I.hasOwnProperty(g)&&u[g]!==I[g]&&(o||(o={}),o[g]=I[g])}else o||(m||(m=[]),m.push(M,o)),o=I;else M==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,u=u?u.__html:void 0,I!=null&&u!==I&&(m=m||[]).push(M,I)):M==="children"?typeof I!="string"&&typeof I!="number"||(m=m||[]).push(M,""+I):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(Nh.hasOwnProperty(M)?(I!=null&&M==="onScroll"&&Yr("scroll",e),m||u===I||(m=[])):(m=m||[]).push(M,I))}o&&(m=m||[]).push("style",o);var M=m;(t.updateQueue=M)&&(t.flags|=4)}};ZC=function(e,t,o,l){o!==l&&(t.flags|=4)};function uh(e,t){if(!nn)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function gi(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,l=0;if(t)for(var h=e.child;h!==null;)o|=h.lanes|h.childLanes,l|=h.subtreeFlags&14680064,l|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)o|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=o,t}function RM(e,t,o){var l=t.pendingProps;switch(Ax(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(t),null;case 1:return Hi(t.type)&&Sm(),gi(t),null;case 3:return l=t.stateNode,Au(),Jr(Gi),Jr(vi),Nx(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Bf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wo!==null&&(jv(Wo),Wo=null))),Rv(e,t),gi(t),null;case 5:$x(t);var h=jl(Jh.current);if(o=t.type,e!==null&&t.stateNode!=null)qC(e,t,o,l,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(Je(166));return gi(t),null}if(e=jl(ys.current),Bf(t)){l=t.stateNode,o=t.type;var m=t.memoizedProps;switch(l[fs]=t,l[Kh]=m,e=(t.mode&1)!==0,o){case"dialog":Yr("cancel",l),Yr("close",l);break;case"iframe":case"object":case"embed":Yr("load",l);break;case"video":case"audio":for(h=0;h<wh.length;h++)Yr(wh[h],l);break;case"source":Yr("error",l);break;case"img":case"image":case"link":Yr("error",l),Yr("load",l);break;case"details":Yr("toggle",l);break;case"input":D1(l,m),Yr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!m.multiple},Yr("invalid",l);break;case"textarea":B1(l,m),Yr("invalid",l)}sv(o,m),h=null;for(var g in m)if(m.hasOwnProperty(g)){var u=m[g];g==="children"?typeof u=="string"?l.textContent!==u&&(m.suppressHydrationWarning!==!0&&Lf(l.textContent,u,e),h=["children",u]):typeof u=="number"&&l.textContent!==""+u&&(m.suppressHydrationWarning!==!0&&Lf(l.textContent,u,e),h=["children",""+u]):Nh.hasOwnProperty(g)&&u!=null&&g==="onScroll"&&Yr("scroll",l)}switch(o){case"input":If(l),L1(l,m,!0);break;case"textarea":If(l),F1(l);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(l.onclick=wm)}l=h,t.updateQueue=l,l!==null&&(t.flags|=4)}else{g=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wS(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(o,{is:l.is}):(e=g.createElement(o),o==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,o),e[fs]=t,e[Kh]=l,HC(e,t,!1,!1),t.stateNode=e;e:{switch(g=av(o,l),o){case"dialog":Yr("cancel",e),Yr("close",e),h=l;break;case"iframe":case"object":case"embed":Yr("load",e),h=l;break;case"video":case"audio":for(h=0;h<wh.length;h++)Yr(wh[h],e);h=l;break;case"source":Yr("error",e),h=l;break;case"img":case"image":case"link":Yr("error",e),Yr("load",e),h=l;break;case"details":Yr("toggle",e),h=l;break;case"input":D1(e,l),h=tv(e,l),Yr("invalid",e);break;case"option":h=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},h=cn({},l,{value:void 0}),Yr("invalid",e);break;case"textarea":B1(e,l),h=iv(e,l),Yr("invalid",e);break;default:h=l}sv(o,h),u=h;for(m in u)if(u.hasOwnProperty(m)){var I=u[m];m==="style"?kS(e,I):m==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&SS(e,I)):m==="children"?typeof I=="string"?(o!=="textarea"||I!=="")&&jh(e,I):typeof I=="number"&&jh(e,""+I):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Nh.hasOwnProperty(m)?I!=null&&m==="onScroll"&&Yr("scroll",e):I!=null&&gx(e,m,I,g))}switch(o){case"input":If(e),L1(e,l,!1);break;case"textarea":If(e),F1(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Za(l.value));break;case"select":e.multiple=!!l.multiple,m=l.value,m!=null?_u(e,!!l.multiple,m,!1):l.defaultValue!=null&&_u(e,!!l.multiple,l.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=wm)}switch(o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gi(t),null;case 6:if(e&&t.stateNode!=null)ZC(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(Je(166));if(o=jl(Jh.current),jl(ys.current),Bf(t)){if(l=t.stateNode,o=t.memoizedProps,l[fs]=t,(m=l.nodeValue!==o)&&(e=uo,e!==null))switch(e.tag){case 3:Lf(l.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lf(l.nodeValue,o,(e.mode&1)!==0)}m&&(t.flags|=4)}else l=(o.nodeType===9?o:o.ownerDocument).createTextNode(l),l[fs]=t,t.stateNode=l}return gi(t),null;case 13:if(Jr(an),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nn&&co!==null&&t.mode&1&&!(t.flags&128))hC(),Pu(),t.flags|=98560,m=!1;else if(m=Bf(t),l!==null&&l.dehydrated!==null){if(e===null){if(!m)throw Error(Je(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(Je(317));m[fs]=t}else Pu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gi(t),m=!1}else Wo!==null&&(jv(Wo),Wo=null),m=!0;if(!m)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||an.current&1?Dn===0&&(Dn=3):Jx())),t.updateQueue!==null&&(t.flags|=4),gi(t),null);case 4:return Au(),Rv(e,t),e===null&&Zh(t.stateNode.containerInfo),gi(t),null;case 10:return Lx(t.type._context),gi(t),null;case 17:return Hi(t.type)&&Sm(),gi(t),null;case 19:if(Jr(an),m=t.memoizedState,m===null)return gi(t),null;if(l=(t.flags&128)!==0,g=m.rendering,g===null)if(l)uh(m,!1);else{if(Dn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=Mm(e),g!==null){for(t.flags|=128,uh(m,!1),l=g.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=o,o=t.child;o!==null;)m=o,e=l,m.flags&=14680066,g=m.alternate,g===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=g.childLanes,m.lanes=g.lanes,m.child=g.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=g.memoizedProps,m.memoizedState=g.memoizedState,m.updateQueue=g.updateQueue,m.type=g.type,e=g.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Zr(an,an.current&1|2),t.child}e=e.sibling}m.tail!==null&&xn()>Ru&&(t.flags|=128,l=!0,uh(m,!1),t.lanes=4194304)}else{if(!l)if(e=Mm(g),e!==null){if(t.flags|=128,l=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),uh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!nn)return gi(t),null}else 2*xn()-m.renderingStartTime>Ru&&o!==1073741824&&(t.flags|=128,l=!0,uh(m,!1),t.lanes=4194304);m.isBackwards?(g.sibling=t.child,t.child=g):(o=m.last,o!==null?o.sibling=g:t.child=g,m.last=g)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=xn(),t.sibling=null,o=an.current,Zr(an,l?o&1|2:o&1),t):(gi(t),null);case 22:case 23:return Yx(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?ao&1073741824&&(gi(t),t.subtreeFlags&6&&(t.flags|=8192)):gi(t),null;case 24:return null;case 25:return null}throw Error(Je(156,t.tag))}function DM(e,t){switch(Ax(t),t.tag){case 1:return Hi(t.type)&&Sm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Au(),Jr(Gi),Jr(vi),Nx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $x(t),null;case 13:if(Jr(an),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Je(340));Pu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jr(an),null;case 4:return Au(),null;case 10:return Lx(t.type._context),null;case 22:case 23:return Yx(),null;case 24:return null;default:return null}}var $f=!1,_i=!1,LM=typeof WeakSet=="function"?WeakSet:Set,St=null;function mu(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(l){yn(e,t,l)}else o.current=null}function Dv(e,t,o){try{o()}catch(l){yn(e,t,l)}}var Tw=!1;function BM(e,t){if(yv=vm,e=QS(),Px(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var g=0,u=-1,I=-1,M=0,B=0,L=e,A=null;t:for(;;){for(var Z;L!==o||h!==0&&L.nodeType!==3||(u=g+h),L!==m||l!==0&&L.nodeType!==3||(I=g+l),L.nodeType===3&&(g+=L.nodeValue.length),(Z=L.firstChild)!==null;)A=L,L=Z;for(;;){if(L===e)break t;if(A===o&&++M===h&&(u=g),A===m&&++B===l&&(I=g),(Z=L.nextSibling)!==null)break;L=A,A=L.parentNode}L=Z}o=u===-1||I===-1?null:{start:u,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(_v={focusedElem:e,selectionRange:o},vm=!1,St=t;St!==null;)if(t=St,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,St=e;else for(;St!==null;){t=St;try{var q=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(q!==null){var re=q.memoizedProps,le=q.memoizedState,W=t.stateNode,j=W.getSnapshotBeforeUpdate(t.elementType===t.type?re:Vo(t.type,re),le);W.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(Q){yn(t,t.return,Q)}if(e=t.sibling,e!==null){e.return=t.return,St=e;break}St=t.return}return q=Tw,Tw=!1,q}function Rh(e,t,o){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&e)===e){var m=h.destroy;h.destroy=void 0,m!==void 0&&Dv(t,o,m)}h=h.next}while(h!==l)}}function tg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var l=o.create;o.destroy=l()}o=o.next}while(o!==t)}}function Lv(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function XC(e){var t=e.alternate;t!==null&&(e.alternate=null,XC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fs],delete t[Kh],delete t[bv],delete t[_M],delete t[vM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function KC(e){return e.tag===5||e.tag===3||e.tag===4}function Iw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||KC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bv(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=wm));else if(l!==4&&(e=e.child,e!==null))for(Bv(e,t,o),e=e.sibling;e!==null;)Bv(e,t,o),e=e.sibling}function Fv(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Fv(e,t,o),e=e.sibling;e!==null;)Fv(e,t,o),e=e.sibling}var ti=null,Uo=!1;function Aa(e,t,o){for(o=o.child;o!==null;)YC(e,t,o),o=o.sibling}function YC(e,t,o){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(qm,o)}catch{}switch(o.tag){case 5:_i||mu(o,t);case 6:var l=ti,h=Uo;ti=null,Aa(e,t,o),ti=l,Uo=h,ti!==null&&(Uo?(e=ti,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):ti.removeChild(o.stateNode));break;case 18:ti!==null&&(Uo?(e=ti,o=o.stateNode,e.nodeType===8?k_(e.parentNode,o):e.nodeType===1&&k_(e,o),Gh(e)):k_(ti,o.stateNode));break;case 4:l=ti,h=Uo,ti=o.stateNode.containerInfo,Uo=!0,Aa(e,t,o),ti=l,Uo=h;break;case 0:case 11:case 14:case 15:if(!_i&&(l=o.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){h=l=l.next;do{var m=h,g=m.destroy;m=m.tag,g!==void 0&&(m&2||m&4)&&Dv(o,t,g),h=h.next}while(h!==l)}Aa(e,t,o);break;case 1:if(!_i&&(mu(o,t),l=o.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=o.memoizedProps,l.state=o.memoizedState,l.componentWillUnmount()}catch(u){yn(o,t,u)}Aa(e,t,o);break;case 21:Aa(e,t,o);break;case 22:o.mode&1?(_i=(l=_i)||o.memoizedState!==null,Aa(e,t,o),_i=l):Aa(e,t,o);break;default:Aa(e,t,o)}}function Ew(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new LM),t.forEach(function(l){var h=GM.bind(null,e,l);o.has(l)||(o.add(l),l.then(h,h))})}}function No(e,t){var o=t.deletions;if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];try{var m=e,g=t,u=g;e:for(;u!==null;){switch(u.tag){case 5:ti=u.stateNode,Uo=!1;break e;case 3:ti=u.stateNode.containerInfo,Uo=!0;break e;case 4:ti=u.stateNode.containerInfo,Uo=!0;break e}u=u.return}if(ti===null)throw Error(Je(160));YC(m,g,h),ti=null,Uo=!1;var I=h.alternate;I!==null&&(I.return=null),h.return=null}catch(M){yn(h,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)JC(t,e),t=t.sibling}function JC(e,t){var o=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(No(t,e),as(e),l&4){try{Rh(3,e,e.return),tg(3,e)}catch(re){yn(e,e.return,re)}try{Rh(5,e,e.return)}catch(re){yn(e,e.return,re)}}break;case 1:No(t,e),as(e),l&512&&o!==null&&mu(o,o.return);break;case 5:if(No(t,e),as(e),l&512&&o!==null&&mu(o,o.return),e.flags&32){var h=e.stateNode;try{jh(h,"")}catch(re){yn(e,e.return,re)}}if(l&4&&(h=e.stateNode,h!=null)){var m=e.memoizedProps,g=o!==null?o.memoizedProps:m,u=e.type,I=e.updateQueue;if(e.updateQueue=null,I!==null)try{u==="input"&&m.type==="radio"&&m.name!=null&&xS(h,m),av(u,g);var M=av(u,m);for(g=0;g<I.length;g+=2){var B=I[g],L=I[g+1];B==="style"?kS(h,L):B==="dangerouslySetInnerHTML"?SS(h,L):B==="children"?jh(h,L):gx(h,B,L,M)}switch(u){case"input":rv(h,m);break;case"textarea":bS(h,m);break;case"select":var A=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var Z=m.value;Z!=null?_u(h,!!m.multiple,Z,!1):A!==!!m.multiple&&(m.defaultValue!=null?_u(h,!!m.multiple,m.defaultValue,!0):_u(h,!!m.multiple,m.multiple?[]:"",!1))}h[Kh]=m}catch(re){yn(e,e.return,re)}}break;case 6:if(No(t,e),as(e),l&4){if(e.stateNode===null)throw Error(Je(162));h=e.stateNode,m=e.memoizedProps;try{h.nodeValue=m}catch(re){yn(e,e.return,re)}}break;case 3:if(No(t,e),as(e),l&4&&o!==null&&o.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(re){yn(e,e.return,re)}break;case 4:No(t,e),as(e);break;case 13:No(t,e),as(e),h=e.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||(Xx=xn())),l&4&&Ew(e);break;case 22:if(B=o!==null&&o.memoizedState!==null,e.mode&1?(_i=(M=_i)||B,No(t,e),_i=M):No(t,e),as(e),l&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!B&&e.mode&1)for(St=e,B=e.child;B!==null;){for(L=St=B;St!==null;){switch(A=St,Z=A.child,A.tag){case 0:case 11:case 14:case 15:Rh(4,A,A.return);break;case 1:mu(A,A.return);var q=A.stateNode;if(typeof q.componentWillUnmount=="function"){l=A,o=A.return;try{t=l,q.props=t.memoizedProps,q.state=t.memoizedState,q.componentWillUnmount()}catch(re){yn(l,o,re)}}break;case 5:mu(A,A.return);break;case 22:if(A.memoizedState!==null){Mw(L);continue}}Z!==null?(Z.return=A,St=Z):Mw(L)}B=B.sibling}e:for(B=null,L=e;;){if(L.tag===5){if(B===null){B=L;try{h=L.stateNode,M?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(u=L.stateNode,I=L.memoizedProps.style,g=I!=null&&I.hasOwnProperty("display")?I.display:null,u.style.display=CS("display",g))}catch(re){yn(e,e.return,re)}}}else if(L.tag===6){if(B===null)try{L.stateNode.nodeValue=M?"":L.memoizedProps}catch(re){yn(e,e.return,re)}}else if((L.tag!==22&&L.tag!==23||L.memoizedState===null||L===e)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===e)break e;for(;L.sibling===null;){if(L.return===null||L.return===e)break e;B===L&&(B=null),L=L.return}B===L&&(B=null),L.sibling.return=L.return,L=L.sibling}}break;case 19:No(t,e),as(e),l&4&&Ew(e);break;case 21:break;default:No(t,e),as(e)}}function as(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(KC(o)){var l=o;break e}o=o.return}throw Error(Je(160))}switch(l.tag){case 5:var h=l.stateNode;l.flags&32&&(jh(h,""),l.flags&=-33);var m=Iw(e);Fv(e,m,h);break;case 3:case 4:var g=l.stateNode.containerInfo,u=Iw(e);Bv(e,u,g);break;default:throw Error(Je(161))}}catch(I){yn(e,e.return,I)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function FM(e,t,o){St=e,QC(e)}function QC(e,t,o){for(var l=(e.mode&1)!==0;St!==null;){var h=St,m=h.child;if(h.tag===22&&l){var g=h.memoizedState!==null||$f;if(!g){var u=h.alternate,I=u!==null&&u.memoizedState!==null||_i;u=$f;var M=_i;if($f=g,(_i=I)&&!M)for(St=h;St!==null;)g=St,I=g.child,g.tag===22&&g.memoizedState!==null?Aw(h):I!==null?(I.return=g,St=I):Aw(h);for(;m!==null;)St=m,QC(m),m=m.sibling;St=h,$f=u,_i=M}Pw(e)}else h.subtreeFlags&8772&&m!==null?(m.return=h,St=m):Pw(e)}}function Pw(e){for(;St!==null;){var t=St;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_i||tg(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!_i)if(o===null)l.componentDidMount();else{var h=t.elementType===t.type?o.memoizedProps:Vo(t.type,o.memoizedProps);l.componentDidUpdate(h,o.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&pw(t,m,l);break;case 3:var g=t.updateQueue;if(g!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}pw(t,g,o)}break;case 5:var u=t.stateNode;if(o===null&&t.flags&4){o=u;var I=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&o.focus();break;case"img":I.src&&(o.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var B=M.memoizedState;if(B!==null){var L=B.dehydrated;L!==null&&Gh(L)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}_i||t.flags&512&&Lv(t)}catch(A){yn(t,t.return,A)}}if(t===e){St=null;break}if(o=t.sibling,o!==null){o.return=t.return,St=o;break}St=t.return}}function Mw(e){for(;St!==null;){var t=St;if(t===e){St=null;break}var o=t.sibling;if(o!==null){o.return=t.return,St=o;break}St=t.return}}function Aw(e){for(;St!==null;){var t=St;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{tg(4,t)}catch(I){yn(t,o,I)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var h=t.return;try{l.componentDidMount()}catch(I){yn(t,h,I)}}var m=t.return;try{Lv(t)}catch(I){yn(t,m,I)}break;case 5:var g=t.return;try{Lv(t)}catch(I){yn(t,g,I)}}}catch(I){yn(t,t.return,I)}if(t===e){St=null;break}var u=t.sibling;if(u!==null){u.return=t.return,St=u;break}St=t.return}}var OM=Math.ceil,Rm=Ys.ReactCurrentDispatcher,qx=Ys.ReactCurrentOwner,Mo=Ys.ReactCurrentBatchConfig,wr=0,Hn=null,In=null,ni=0,ao=0,gu=Qa(0),Dn=0,rp=null,Kl=0,rg=0,Zx=0,Dh=null,Ui=null,Xx=0,Ru=1/0,Ns=null,Dm=!1,Ov=null,Wa=null,Nf=!1,Oa=null,Lm=0,Lh=0,$v=null,sm=-1,am=0;function Mi(){return wr&6?xn():sm!==-1?sm:sm=xn()}function Ga(e){return e.mode&1?wr&2&&ni!==0?ni&-ni:bM.transition!==null?(am===0&&(am=FS()),am):(e=Fr,e!==0||(e=window.event,e=e===void 0?16:WS(e.type)),e):1}function Ho(e,t,o,l){if(50<Lh)throw Lh=0,$v=null,Error(Je(185));dp(e,o,l),(!(wr&2)||e!==Hn)&&(e===Hn&&(!(wr&2)&&(rg|=o),Dn===4&&La(e,ni)),qi(e,l),o===1&&wr===0&&!(t.mode&1)&&(Ru=xn()+500,Jm&&el()))}function qi(e,t){var o=e.callbackNode;bP(e,t);var l=_m(e,e===Hn?ni:0);if(l===0)o!==null&&N1(o),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(o!=null&&N1(o),t===1)e.tag===0?xM(zw.bind(null,e)):cC(zw.bind(null,e)),gM(function(){!(wr&6)&&el()}),o=null;else{switch(OS(l)){case 1:o=bx;break;case 4:o=LS;break;case 16:o=ym;break;case 536870912:o=BS;break;default:o=ym}o=ak(o,ek.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function ek(e,t){if(sm=-1,am=0,wr&6)throw Error(Je(327));var o=e.callbackNode;if(Su()&&e.callbackNode!==o)return null;var l=_m(e,e===Hn?ni:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=Bm(e,l);else{t=l;var h=wr;wr|=2;var m=rk();(Hn!==e||ni!==t)&&(Ns=null,Ru=xn()+500,Wl(e,t));do try{jM();break}catch(u){tk(e,u)}while(!0);Dx(),Rm.current=m,wr=h,In!==null?t=0:(Hn=null,ni=0,t=Dn)}if(t!==0){if(t===2&&(h=hv(e),h!==0&&(l=h,t=Nv(e,h))),t===1)throw o=rp,Wl(e,0),La(e,l),qi(e,xn()),o;if(t===6)La(e,l);else{if(h=e.current.alternate,!(l&30)&&!$M(h)&&(t=Bm(e,l),t===2&&(m=hv(e),m!==0&&(l=m,t=Nv(e,m))),t===1))throw o=rp,Wl(e,0),La(e,l),qi(e,xn()),o;switch(e.finishedWork=h,e.finishedLanes=l,t){case 0:case 1:throw Error(Je(345));case 2:Ll(e,Ui,Ns);break;case 3:if(La(e,l),(l&130023424)===l&&(t=Xx+500-xn(),10<t)){if(_m(e,0)!==0)break;if(h=e.suspendedLanes,(h&l)!==l){Mi(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=xv(Ll.bind(null,e,Ui,Ns),t);break}Ll(e,Ui,Ns);break;case 4:if(La(e,l),(l&4194240)===l)break;for(t=e.eventTimes,h=-1;0<l;){var g=31-Go(l);m=1<<g,g=t[g],g>h&&(h=g),l&=~m}if(l=h,l=xn()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*OM(l/1960))-l,10<l){e.timeoutHandle=xv(Ll.bind(null,e,Ui,Ns),l);break}Ll(e,Ui,Ns);break;case 5:Ll(e,Ui,Ns);break;default:throw Error(Je(329))}}}return qi(e,xn()),e.callbackNode===o?ek.bind(null,e):null}function Nv(e,t){var o=Dh;return e.current.memoizedState.isDehydrated&&(Wl(e,t).flags|=256),e=Bm(e,t),e!==2&&(t=Ui,Ui=o,t!==null&&jv(t)),e}function jv(e){Ui===null?Ui=e:Ui.push.apply(Ui,e)}function $M(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var l=0;l<o.length;l++){var h=o[l],m=h.getSnapshot;h=h.value;try{if(!qo(m(),h))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t){for(t&=~Zx,t&=~rg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-Go(t),l=1<<o;e[o]=-1,t&=~l}}function zw(e){if(wr&6)throw Error(Je(327));Su();var t=_m(e,0);if(!(t&1))return qi(e,xn()),null;var o=Bm(e,t);if(e.tag!==0&&o===2){var l=hv(e);l!==0&&(t=l,o=Nv(e,l))}if(o===1)throw o=rp,Wl(e,0),La(e,t),qi(e,xn()),o;if(o===6)throw Error(Je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ll(e,Ui,Ns),qi(e,xn()),null}function Kx(e,t){var o=wr;wr|=1;try{return e(t)}finally{wr=o,wr===0&&(Ru=xn()+500,Jm&&el())}}function Yl(e){Oa!==null&&Oa.tag===0&&!(wr&6)&&Su();var t=wr;wr|=1;var o=Mo.transition,l=Fr;try{if(Mo.transition=null,Fr=1,e)return e()}finally{Fr=l,Mo.transition=o,wr=t,!(wr&6)&&el()}}function Yx(){ao=gu.current,Jr(gu)}function Wl(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,mM(o)),In!==null)for(o=In.return;o!==null;){var l=o;switch(Ax(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Sm();break;case 3:Au(),Jr(Gi),Jr(vi),Nx();break;case 5:$x(l);break;case 4:Au();break;case 13:Jr(an);break;case 19:Jr(an);break;case 10:Lx(l.type._context);break;case 22:case 23:Yx()}o=o.return}if(Hn=e,In=e=Ha(e.current,null),ni=ao=t,Dn=0,rp=null,Zx=rg=Kl=0,Ui=Dh=null,Nl!==null){for(t=0;t<Nl.length;t++)if(o=Nl[t],l=o.interleaved,l!==null){o.interleaved=null;var h=l.next,m=o.pending;if(m!==null){var g=m.next;m.next=h,l.next=g}o.pending=l}Nl=null}return e}function tk(e,t){do{var o=In;try{if(Dx(),nm.current=zm,Am){for(var l=ln.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}Am=!1}if(Xl=0,Gn=Rn=ln=null,zh=!1,Qh=0,qx.current=null,o===null||o.return===null){Dn=1,rp=t,In=null;break}e:{var m=e,g=o.return,u=o,I=t;if(t=ni,u.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var M=I,B=u,L=B.tag;if(!(B.mode&1)&&(L===0||L===11||L===15)){var A=B.alternate;A?(B.updateQueue=A.updateQueue,B.memoizedState=A.memoizedState,B.lanes=A.lanes):(B.updateQueue=null,B.memoizedState=null)}var Z=vw(g);if(Z!==null){Z.flags&=-257,xw(Z,g,u,m,t),Z.mode&1&&_w(m,M,t),t=Z,I=M;var q=t.updateQueue;if(q===null){var re=new Set;re.add(I),t.updateQueue=re}else q.add(I);break e}else{if(!(t&1)){_w(m,M,t),Jx();break e}I=Error(Je(426))}}else if(nn&&u.mode&1){var le=vw(g);if(le!==null){!(le.flags&65536)&&(le.flags|=256),xw(le,g,u,m,t),zx(zu(I,u));break e}}m=I=zu(I,u),Dn!==4&&(Dn=2),Dh===null?Dh=[m]:Dh.push(m),m=g;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var W=OC(m,I,t);hw(m,W);break e;case 1:u=I;var j=m.type,V=m.stateNode;if(!(m.flags&128)&&(typeof j.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Wa===null||!Wa.has(V)))){m.flags|=65536,t&=-t,m.lanes|=t;var Q=$C(m,u,t);hw(m,Q);break e}}m=m.return}while(m!==null)}ik(o)}catch(pe){t=pe,In===o&&o!==null&&(In=o=o.return);continue}break}while(!0)}function rk(){var e=Rm.current;return Rm.current=zm,e===null?zm:e}function Jx(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),Hn===null||!(Kl&268435455)&&!(rg&268435455)||La(Hn,ni)}function Bm(e,t){var o=wr;wr|=2;var l=rk();(Hn!==e||ni!==t)&&(Ns=null,Wl(e,t));do try{NM();break}catch(h){tk(e,h)}while(!0);if(Dx(),wr=o,Rm.current=l,In!==null)throw Error(Je(261));return Hn=null,ni=0,Dn}function NM(){for(;In!==null;)nk(In)}function jM(){for(;In!==null&&!hP();)nk(In)}function nk(e){var t=sk(e.alternate,e,ao);e.memoizedProps=e.pendingProps,t===null?ik(e):In=t,qx.current=null}function ik(e){var t=e;do{var o=t.alternate;if(e=t.return,t.flags&32768){if(o=DM(o,t),o!==null){o.flags&=32767,In=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dn=6,In=null;return}}else if(o=RM(o,t,ao),o!==null){In=o;return}if(t=t.sibling,t!==null){In=t;return}In=t=e}while(t!==null);Dn===0&&(Dn=5)}function Ll(e,t,o){var l=Fr,h=Mo.transition;try{Mo.transition=null,Fr=1,VM(e,t,o,l)}finally{Mo.transition=h,Fr=l}return null}function VM(e,t,o,l){do Su();while(Oa!==null);if(wr&6)throw Error(Je(327));o=e.finishedWork;var h=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(Je(177));e.callbackNode=null,e.callbackPriority=0;var m=o.lanes|o.childLanes;if(wP(e,m),e===Hn&&(In=Hn=null,ni=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Nf||(Nf=!0,ak(ym,function(){return Su(),null})),m=(o.flags&15990)!==0,o.subtreeFlags&15990||m){m=Mo.transition,Mo.transition=null;var g=Fr;Fr=1;var u=wr;wr|=4,qx.current=null,BM(e,o),JC(o,e),lM(_v),vm=!!yv,_v=yv=null,e.current=o,FM(o),pP(),wr=u,Fr=g,Mo.transition=m}else e.current=o;if(Nf&&(Nf=!1,Oa=e,Lm=h),m=e.pendingLanes,m===0&&(Wa=null),gP(o.stateNode),qi(e,xn()),t!==null)for(l=e.onRecoverableError,o=0;o<t.length;o++)h=t[o],l(h.value,{componentStack:h.stack,digest:h.digest});if(Dm)throw Dm=!1,e=Ov,Ov=null,e;return Lm&1&&e.tag!==0&&Su(),m=e.pendingLanes,m&1?e===$v?Lh++:(Lh=0,$v=e):Lh=0,el(),null}function Su(){if(Oa!==null){var e=OS(Lm),t=Mo.transition,o=Fr;try{if(Mo.transition=null,Fr=16>e?16:e,Oa===null)var l=!1;else{if(e=Oa,Oa=null,Lm=0,wr&6)throw Error(Je(331));var h=wr;for(wr|=4,St=e.current;St!==null;){var m=St,g=m.child;if(St.flags&16){var u=m.deletions;if(u!==null){for(var I=0;I<u.length;I++){var M=u[I];for(St=M;St!==null;){var B=St;switch(B.tag){case 0:case 11:case 15:Rh(8,B,m)}var L=B.child;if(L!==null)L.return=B,St=L;else for(;St!==null;){B=St;var A=B.sibling,Z=B.return;if(XC(B),B===M){St=null;break}if(A!==null){A.return=Z,St=A;break}St=Z}}}var q=m.alternate;if(q!==null){var re=q.child;if(re!==null){q.child=null;do{var le=re.sibling;re.sibling=null,re=le}while(re!==null)}}St=m}}if(m.subtreeFlags&2064&&g!==null)g.return=m,St=g;else e:for(;St!==null;){if(m=St,m.flags&2048)switch(m.tag){case 0:case 11:case 15:Rh(9,m,m.return)}var W=m.sibling;if(W!==null){W.return=m.return,St=W;break e}St=m.return}}var j=e.current;for(St=j;St!==null;){g=St;var V=g.child;if(g.subtreeFlags&2064&&V!==null)V.return=g,St=V;else e:for(g=j;St!==null;){if(u=St,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:tg(9,u)}}catch(pe){yn(u,u.return,pe)}if(u===g){St=null;break e}var Q=u.sibling;if(Q!==null){Q.return=u.return,St=Q;break e}St=u.return}}if(wr=h,el(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(qm,e)}catch{}l=!0}return l}finally{Fr=o,Mo.transition=t}}return!1}function Rw(e,t,o){t=zu(o,t),t=OC(e,t,1),e=Ua(e,t,1),t=Mi(),e!==null&&(dp(e,1,t),qi(e,t))}function yn(e,t,o){if(e.tag===3)Rw(e,e,o);else for(;t!==null;){if(t.tag===3){Rw(t,e,o);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wa===null||!Wa.has(l))){e=zu(o,e),e=$C(t,e,1),t=Ua(t,e,1),e=Mi(),t!==null&&(dp(t,1,e),qi(t,e));break}}t=t.return}}function UM(e,t,o){var l=e.pingCache;l!==null&&l.delete(t),t=Mi(),e.pingedLanes|=e.suspendedLanes&o,Hn===e&&(ni&o)===o&&(Dn===4||Dn===3&&(ni&130023424)===ni&&500>xn()-Xx?Wl(e,0):Zx|=o),qi(e,t)}function ok(e,t){t===0&&(e.mode&1?(t=Mf,Mf<<=1,!(Mf&130023424)&&(Mf=4194304)):t=1);var o=Mi();e=Zs(e,t),e!==null&&(dp(e,t,o),qi(e,o))}function WM(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),ok(e,o)}function GM(e,t){var o=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(o=h.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(Je(314))}l!==null&&l.delete(t),ok(e,o)}var sk;sk=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gi.current)Wi=!0;else{if(!(e.lanes&o)&&!(t.flags&128))return Wi=!1,zM(e,t,o);Wi=!!(e.flags&131072)}else Wi=!1,nn&&t.flags&1048576&&uC(t,Tm,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;om(e,t),e=t.pendingProps;var h=Eu(t,vi.current);wu(t,o),h=Vx(null,t,l,e,h,o);var m=Ux();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hi(l)?(m=!0,Cm(t)):m=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Fx(t),h.updater=eg,t.stateNode=h,h._reactInternals=t,Iv(t,l,e,o),t=Mv(null,t,l,!0,m,o)):(t.tag=0,nn&&m&&Mx(t),Pi(null,t,h,o),t=t.child),t;case 16:l=t.elementType;e:{switch(om(e,t),e=t.pendingProps,h=l._init,l=h(l._payload),t.type=l,h=t.tag=qM(l),e=Vo(l,e),h){case 0:t=Pv(null,t,l,e,o);break e;case 1:t=Sw(null,t,l,e,o);break e;case 11:t=bw(null,t,l,e,o);break e;case 14:t=ww(null,t,l,Vo(l.type,e),o);break e}throw Error(Je(306,l,""))}return t;case 0:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Vo(l,h),Pv(e,t,l,h,o);case 1:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Vo(l,h),Sw(e,t,l,h,o);case 3:e:{if(UC(t),e===null)throw Error(Je(387));l=t.pendingProps,m=t.memoizedState,h=m.element,gC(e,t),Pm(t,l,null,o);var g=t.memoizedState;if(l=g.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){h=zu(Error(Je(423)),t),t=Cw(e,t,l,o,h);break e}else if(l!==h){h=zu(Error(Je(424)),t),t=Cw(e,t,l,o,h);break e}else for(co=Va(t.stateNode.containerInfo.firstChild),uo=t,nn=!0,Wo=null,o=fC(t,null,l,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Pu(),l===h){t=Xs(e,t,o);break e}Pi(e,t,l,o)}t=t.child}return t;case 5:return yC(t),e===null&&Cv(t),l=t.type,h=t.pendingProps,m=e!==null?e.memoizedProps:null,g=h.children,vv(l,h)?g=null:m!==null&&vv(l,m)&&(t.flags|=32),VC(e,t),Pi(e,t,g,o),t.child;case 6:return e===null&&Cv(t),null;case 13:return WC(e,t,o);case 4:return Ox(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Mu(t,null,l,o):Pi(e,t,l,o),t.child;case 11:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Vo(l,h),bw(e,t,l,h,o);case 7:return Pi(e,t,t.pendingProps,o),t.child;case 8:return Pi(e,t,t.pendingProps.children,o),t.child;case 12:return Pi(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(l=t.type._context,h=t.pendingProps,m=t.memoizedProps,g=h.value,Zr(Im,l._currentValue),l._currentValue=g,m!==null)if(qo(m.value,g)){if(m.children===h.children&&!Gi.current){t=Xs(e,t,o);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var u=m.dependencies;if(u!==null){g=m.child;for(var I=u.firstContext;I!==null;){if(I.context===l){if(m.tag===1){I=Gs(-1,o&-o),I.tag=2;var M=m.updateQueue;if(M!==null){M=M.shared;var B=M.pending;B===null?I.next=I:(I.next=B.next,B.next=I),M.pending=I}}m.lanes|=o,I=m.alternate,I!==null&&(I.lanes|=o),kv(m.return,o,t),u.lanes|=o;break}I=I.next}}else if(m.tag===10)g=m.type===t.type?null:m.child;else if(m.tag===18){if(g=m.return,g===null)throw Error(Je(341));g.lanes|=o,u=g.alternate,u!==null&&(u.lanes|=o),kv(g,o,t),g=m.sibling}else g=m.child;if(g!==null)g.return=m;else for(g=m;g!==null;){if(g===t){g=null;break}if(m=g.sibling,m!==null){m.return=g.return,g=m;break}g=g.return}m=g}Pi(e,t,h.children,o),t=t.child}return t;case 9:return h=t.type,l=t.pendingProps.children,wu(t,o),h=Ao(h),l=l(h),t.flags|=1,Pi(e,t,l,o),t.child;case 14:return l=t.type,h=Vo(l,t.pendingProps),h=Vo(l.type,h),ww(e,t,l,h,o);case 15:return NC(e,t,t.type,t.pendingProps,o);case 17:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Vo(l,h),om(e,t),t.tag=1,Hi(l)?(e=!0,Cm(t)):e=!1,wu(t,o),FC(t,l,h),Iv(t,l,h,o),Mv(null,t,l,!0,e,o);case 19:return GC(e,t,o);case 22:return jC(e,t,o)}throw Error(Je(156,t.tag))};function ak(e,t){return DS(e,t)}function HM(e,t,o,l){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(e,t,o,l){return new HM(e,t,o,l)}function Qx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qM(e){if(typeof e=="function")return Qx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_x)return 11;if(e===vx)return 14}return 2}function Ha(e,t){var o=e.alternate;return o===null?(o=Po(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function lm(e,t,o,l,h,m){var g=2;if(l=e,typeof e=="function")Qx(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case su:return Gl(o.children,h,m,t);case yx:g=8,h|=8;break;case Y_:return e=Po(12,o,t,h|2),e.elementType=Y_,e.lanes=m,e;case J_:return e=Po(13,o,t,h),e.elementType=J_,e.lanes=m,e;case Q_:return e=Po(19,o,t,h),e.elementType=Q_,e.lanes=m,e;case yS:return ng(o,h,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mS:g=10;break e;case gS:g=9;break e;case _x:g=11;break e;case vx:g=14;break e;case za:g=16,l=null;break e}throw Error(Je(130,e==null?e:typeof e,""))}return t=Po(g,o,t,h),t.elementType=e,t.type=l,t.lanes=m,t}function Gl(e,t,o,l){return e=Po(7,e,l,t),e.lanes=o,e}function ng(e,t,o,l){return e=Po(22,e,l,t),e.elementType=yS,e.lanes=o,e.stateNode={isHidden:!1},e}function R_(e,t,o){return e=Po(6,e,null,t),e.lanes=o,e}function D_(e,t,o){return t=Po(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZM(e,t,o,l,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=f_(0),this.expirationTimes=f_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=f_(0),this.identifierPrefix=l,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function e0(e,t,o,l,h,m,g,u,I){return e=new ZM(e,t,o,u,I),t===1?(t=1,m===!0&&(t|=8)):t=0,m=Po(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:l,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fx(m),e}function XM(e,t,o){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ou,key:l==null?null:""+l,children:e,containerInfo:t,implementation:o}}function lk(e){if(!e)return Xa;e=e._reactInternals;e:{if(ec(e)!==e||e.tag!==1)throw Error(Je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Je(171))}if(e.tag===1){var o=e.type;if(Hi(o))return lC(e,o,t)}return t}function ck(e,t,o,l,h,m,g,u,I){return e=e0(o,l,!0,e,h,m,g,u,I),e.context=lk(null),o=e.current,l=Mi(),h=Ga(o),m=Gs(l,h),m.callback=t??null,Ua(o,m,h),e.current.lanes=h,dp(e,h,l),qi(e,l),e}function ig(e,t,o,l){var h=t.current,m=Mi(),g=Ga(h);return o=lk(o),t.context===null?t.context=o:t.pendingContext=o,t=Gs(m,g),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=Ua(h,t,g),e!==null&&(Ho(e,h,g,m),rm(e,h,g)),g}function Fm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Dw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function t0(e,t){Dw(e,t),(e=e.alternate)&&Dw(e,t)}function KM(){return null}var uk=typeof reportError=="function"?reportError:function(e){console.error(e)};function r0(e){this._internalRoot=e}og.prototype.render=r0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Je(409));ig(e,t,null,null)};og.prototype.unmount=r0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yl(function(){ig(null,e,null,null)}),t[qs]=null}};function og(e){this._internalRoot=e}og.prototype.unstable_scheduleHydration=function(e){if(e){var t=jS();e={blockedOn:null,target:e,priority:t};for(var o=0;o<Da.length&&t!==0&&t<Da[o].priority;o++);Da.splice(o,0,e),o===0&&US(e)}};function n0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lw(){}function YM(e,t,o,l,h){if(h){if(typeof l=="function"){var m=l;l=function(){var M=Fm(g);m.call(M)}}var g=ck(t,l,e,0,null,!1,!1,"",Lw);return e._reactRootContainer=g,e[qs]=g.current,Zh(e.nodeType===8?e.parentNode:e),Yl(),g}for(;h=e.lastChild;)e.removeChild(h);if(typeof l=="function"){var u=l;l=function(){var M=Fm(I);u.call(M)}}var I=e0(e,0,!1,null,null,!1,!1,"",Lw);return e._reactRootContainer=I,e[qs]=I.current,Zh(e.nodeType===8?e.parentNode:e),Yl(function(){ig(t,I,o,l)}),I}function ag(e,t,o,l,h){var m=o._reactRootContainer;if(m){var g=m;if(typeof h=="function"){var u=h;h=function(){var I=Fm(g);u.call(I)}}ig(t,g,e,h)}else g=YM(o,t,e,h,l);return Fm(g)}$S=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=bh(t.pendingLanes);o!==0&&(wx(t,o|1),qi(t,xn()),!(wr&6)&&(Ru=xn()+500,el()))}break;case 13:Yl(function(){var l=Zs(e,1);if(l!==null){var h=Mi();Ho(l,e,1,h)}}),t0(e,1)}};Sx=function(e){if(e.tag===13){var t=Zs(e,134217728);if(t!==null){var o=Mi();Ho(t,e,134217728,o)}t0(e,134217728)}};NS=function(e){if(e.tag===13){var t=Ga(e),o=Zs(e,t);if(o!==null){var l=Mi();Ho(o,e,t,l)}t0(e,t)}};jS=function(){return Fr};VS=function(e,t){var o=Fr;try{return Fr=e,t()}finally{Fr=o}};cv=function(e,t,o){switch(t){case"input":if(rv(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var l=o[t];if(l!==e&&l.form===e.form){var h=Ym(l);if(!h)throw Error(Je(90));vS(l),rv(l,h)}}}break;case"textarea":bS(e,o);break;case"select":t=o.value,t!=null&&_u(e,!!o.multiple,t,!1)}};ES=Kx;PS=Yl;var JM={usingClientEntryPoint:!1,Events:[pp,uu,Ym,TS,IS,Kx]},dh={findFiberByHostInstance:$l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QM={bundleType:dh.bundleType,version:dh.version,rendererPackageName:dh.rendererPackageName,rendererConfig:dh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zS(e),e===null?null:e.stateNode},findFiberByHostInstance:dh.findFiberByHostInstance||KM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jf.isDisabled&&jf.supportsFiber)try{qm=jf.inject(QM),gs=jf}catch{}}fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JM;fo.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n0(t))throw Error(Je(200));return XM(e,t,null,o)};fo.createRoot=function(e,t){if(!n0(e))throw Error(Je(299));var o=!1,l="",h=uk;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=e0(e,1,!1,null,null,o,!1,l,h),e[qs]=t.current,Zh(e.nodeType===8?e.parentNode:e),new r0(t)};fo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Je(188)):(e=Object.keys(e).join(","),Error(Je(268,e)));return e=zS(t),e=e===null?null:e.stateNode,e};fo.flushSync=function(e){return Yl(e)};fo.hydrate=function(e,t,o){if(!sg(t))throw Error(Je(200));return ag(null,e,t,!0,o)};fo.hydrateRoot=function(e,t,o){if(!n0(e))throw Error(Je(405));var l=o!=null&&o.hydratedSources||null,h=!1,m="",g=uk;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),t=ck(t,null,e,1,o??null,h,!1,m,g),e[qs]=t.current,Zh(e),l)for(e=0;e<l.length;e++)o=l[e],h=o._getVersion,h=h(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,h]:t.mutableSourceEagerHydrationData.push(o,h);return new og(t)};fo.render=function(e,t,o){if(!sg(t))throw Error(Je(200));return ag(null,e,t,!1,o)};fo.unmountComponentAtNode=function(e){if(!sg(e))throw Error(Je(40));return e._reactRootContainer?(Yl(function(){ag(null,null,e,!1,function(){e._reactRootContainer=null,e[qs]=null})}),!0):!1};fo.unstable_batchedUpdates=Kx;fo.unstable_renderSubtreeIntoContainer=function(e,t,o,l){if(!sg(o))throw Error(Je(200));if(e==null||e._reactInternals===void 0)throw Error(Je(38));return ag(e,t,o,!1,l)};fo.version="18.3.1-next-f1338f8080-20240426";function dk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dk)}catch(e){console.error(e)}}dk(),dS.exports=fo;var i0=dS.exports;const Vf=cx(i0);var Bw=i0;X_.createRoot=Bw.createRoot,X_.hydrateRoot=Bw.hydrateRoot;function Ks(e,...t){const o=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(l=>o.searchParams.append("args[]",l)),`Minified MUI error #${e}; visit ${o} for the full message.`}const _s="$$material";function Om(){return Om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},Om.apply(null,arguments)}function eA(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function tA(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var rA=function(){function e(o){var l=this;this._insertTag=function(h){var m;l.tags.length===0?l.insertionPoint?m=l.insertionPoint.nextSibling:l.prepend?m=l.container.firstChild:m=l.before:m=l.tags[l.tags.length-1].nextSibling,l.container.insertBefore(h,m),l.tags.push(h)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(l){l.forEach(this._insertTag)},t.insert=function(l){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(tA(this));var h=this.tags[this.tags.length-1];if(this.isSpeedy){var m=eA(h);try{m.insertRule(l,m.cssRules.length)}catch{}}else h.appendChild(document.createTextNode(l));this.ctr++},t.flush=function(){this.tags.forEach(function(l){var h;return(h=l.parentNode)==null?void 0:h.removeChild(l)}),this.tags=[],this.ctr=0},e}(),yi="-ms-",$m="-moz-",Mr="-webkit-",hk="comm",o0="rule",s0="decl",nA="@import",pk="@keyframes",iA="@layer",oA=Math.abs,lg=String.fromCharCode,sA=Object.assign;function aA(e,t){return ri(e,0)^45?(((t<<2^ri(e,0))<<2^ri(e,1))<<2^ri(e,2))<<2^ri(e,3):0}function fk(e){return e.trim()}function lA(e,t){return(e=t.exec(e))?e[0]:e}function Ar(e,t,o){return e.replace(t,o)}function Vv(e,t){return e.indexOf(t)}function ri(e,t){return e.charCodeAt(t)|0}function np(e,t,o){return e.slice(t,o)}function ds(e){return e.length}function a0(e){return e.length}function Uf(e,t){return t.push(e),e}function cA(e,t){return e.map(t).join("")}var cg=1,Du=1,mk=0,Zi=0,Tn=0,ju="";function ug(e,t,o,l,h,m,g){return{value:e,root:t,parent:o,type:l,props:h,children:m,line:cg,column:Du,length:g,return:""}}function hh(e,t){return sA(ug("",null,null,"",null,null,0),e,{length:-e.length},t)}function uA(){return Tn}function dA(){return Tn=Zi>0?ri(ju,--Zi):0,Du--,Tn===10&&(Du=1,cg--),Tn}function ho(){return Tn=Zi<mk?ri(ju,Zi++):0,Du++,Tn===10&&(Du=1,cg++),Tn}function vs(){return ri(ju,Zi)}function cm(){return Zi}function mp(e,t){return np(ju,e,t)}function ip(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gk(e){return cg=Du=1,mk=ds(ju=e),Zi=0,[]}function yk(e){return ju="",e}function um(e){return fk(mp(Zi-1,Uv(e===91?e+2:e===40?e+1:e)))}function hA(e){for(;(Tn=vs())&&Tn<33;)ho();return ip(e)>2||ip(Tn)>3?"":" "}function pA(e,t){for(;--t&&ho()&&!(Tn<48||Tn>102||Tn>57&&Tn<65||Tn>70&&Tn<97););return mp(e,cm()+(t<6&&vs()==32&&ho()==32))}function Uv(e){for(;ho();)switch(Tn){case e:return Zi;case 34:case 39:e!==34&&e!==39&&Uv(Tn);break;case 40:e===41&&Uv(e);break;case 92:ho();break}return Zi}function fA(e,t){for(;ho()&&e+Tn!==57;)if(e+Tn===84&&vs()===47)break;return"/*"+mp(t,Zi-1)+"*"+lg(e===47?e:ho())}function mA(e){for(;!ip(vs());)ho();return mp(e,Zi)}function gA(e){return yk(dm("",null,null,null,[""],e=gk(e),0,[0],e))}function dm(e,t,o,l,h,m,g,u,I){for(var M=0,B=0,L=g,A=0,Z=0,q=0,re=1,le=1,W=1,j=0,V="",Q=h,pe=m,de=l,_e=V;le;)switch(q=j,j=ho()){case 40:if(q!=108&&ri(_e,L-1)==58){Vv(_e+=Ar(um(j),"&","&\f"),"&\f")!=-1&&(W=-1);break}case 34:case 39:case 91:_e+=um(j);break;case 9:case 10:case 13:case 32:_e+=hA(q);break;case 92:_e+=pA(cm()-1,7);continue;case 47:switch(vs()){case 42:case 47:Uf(yA(fA(ho(),cm()),t,o),I);break;default:_e+="/"}break;case 123*re:u[M++]=ds(_e)*W;case 125*re:case 59:case 0:switch(j){case 0:case 125:le=0;case 59+B:W==-1&&(_e=Ar(_e,/\f/g,"")),Z>0&&ds(_e)-L&&Uf(Z>32?Ow(_e+";",l,o,L-1):Ow(Ar(_e," ","")+";",l,o,L-2),I);break;case 59:_e+=";";default:if(Uf(de=Fw(_e,t,o,M,B,h,u,V,Q=[],pe=[],L),m),j===123)if(B===0)dm(_e,t,de,de,Q,m,L,u,pe);else switch(A===99&&ri(_e,3)===110?100:A){case 100:case 108:case 109:case 115:dm(e,de,de,l&&Uf(Fw(e,de,de,0,0,h,u,V,h,Q=[],L),pe),h,pe,L,u,l?Q:pe);break;default:dm(_e,de,de,de,[""],pe,0,u,pe)}}M=B=Z=0,re=W=1,V=_e="",L=g;break;case 58:L=1+ds(_e),Z=q;default:if(re<1){if(j==123)--re;else if(j==125&&re++==0&&dA()==125)continue}switch(_e+=lg(j),j*re){case 38:W=B>0?1:(_e+="\f",-1);break;case 44:u[M++]=(ds(_e)-1)*W,W=1;break;case 64:vs()===45&&(_e+=um(ho())),A=vs(),B=L=ds(V=_e+=mA(cm())),j++;break;case 45:q===45&&ds(_e)==2&&(re=0)}}return m}function Fw(e,t,o,l,h,m,g,u,I,M,B){for(var L=h-1,A=h===0?m:[""],Z=a0(A),q=0,re=0,le=0;q<l;++q)for(var W=0,j=np(e,L+1,L=oA(re=g[q])),V=e;W<Z;++W)(V=fk(re>0?A[W]+" "+j:Ar(j,/&\f/g,A[W])))&&(I[le++]=V);return ug(e,t,o,h===0?o0:u,I,M,B)}function yA(e,t,o){return ug(e,t,o,hk,lg(uA()),np(e,2,-2),0)}function Ow(e,t,o,l){return ug(e,t,o,s0,np(e,0,l),np(e,l+1,-1),l)}function Cu(e,t){for(var o="",l=a0(e),h=0;h<l;h++)o+=t(e[h],h,e,t)||"";return o}function _A(e,t,o,l){switch(e.type){case iA:if(e.children.length)break;case nA:case s0:return e.return=e.return||e.value;case hk:return"";case pk:return e.return=e.value+"{"+Cu(e.children,l)+"}";case o0:e.value=e.props.join(",")}return ds(o=Cu(e.children,l))?e.return=e.value+"{"+o+"}":""}function vA(e){var t=a0(e);return function(o,l,h,m){for(var g="",u=0;u<t;u++)g+=e[u](o,l,h,m)||"";return g}}function xA(e){return function(t){t.root||(t=t.return)&&e(t)}}function _k(e){var t=Object.create(null);return function(o){return t[o]===void 0&&(t[o]=e(o)),t[o]}}var bA=function(t,o,l){for(var h=0,m=0;h=m,m=vs(),h===38&&m===12&&(o[l]=1),!ip(m);)ho();return mp(t,Zi)},wA=function(t,o){var l=-1,h=44;do switch(ip(h)){case 0:h===38&&vs()===12&&(o[l]=1),t[l]+=bA(Zi-1,o,l);break;case 2:t[l]+=um(h);break;case 4:if(h===44){t[++l]=vs()===58?"&\f":"",o[l]=t[l].length;break}default:t[l]+=lg(h)}while(h=ho());return t},SA=function(t,o){return yk(wA(gk(t),o))},$w=new WeakMap,CA=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var o=t.value,l=t.parent,h=t.column===l.column&&t.line===l.line;l.type!=="rule";)if(l=l.parent,!l)return;if(!(t.props.length===1&&o.charCodeAt(0)!==58&&!$w.get(l))&&!h){$w.set(t,!0);for(var m=[],g=SA(o,m),u=l.props,I=0,M=0;I<g.length;I++)for(var B=0;B<u.length;B++,M++)t.props[M]=m[I]?g[I].replace(/&\f/g,u[B]):u[B]+" "+g[I]}}},kA=function(t){if(t.type==="decl"){var o=t.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(t.return="",t.value="")}};function vk(e,t){switch(aA(e,t)){case 5103:return Mr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Mr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Mr+e+$m+e+yi+e+e;case 6828:case 4268:return Mr+e+yi+e+e;case 6165:return Mr+e+yi+"flex-"+e+e;case 5187:return Mr+e+Ar(e,/(\w+).+(:[^]+)/,Mr+"box-$1$2"+yi+"flex-$1$2")+e;case 5443:return Mr+e+yi+"flex-item-"+Ar(e,/flex-|-self/,"")+e;case 4675:return Mr+e+yi+"flex-line-pack"+Ar(e,/align-content|flex-|-self/,"")+e;case 5548:return Mr+e+yi+Ar(e,"shrink","negative")+e;case 5292:return Mr+e+yi+Ar(e,"basis","preferred-size")+e;case 6060:return Mr+"box-"+Ar(e,"-grow","")+Mr+e+yi+Ar(e,"grow","positive")+e;case 4554:return Mr+Ar(e,/([^-])(transform)/g,"$1"+Mr+"$2")+e;case 6187:return Ar(Ar(Ar(e,/(zoom-|grab)/,Mr+"$1"),/(image-set)/,Mr+"$1"),e,"")+e;case 5495:case 3959:return Ar(e,/(image-set\([^]*)/,Mr+"$1$`$1");case 4968:return Ar(Ar(e,/(.+:)(flex-)?(.*)/,Mr+"box-pack:$3"+yi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Mr+e+e;case 4095:case 3583:case 4068:case 2532:return Ar(e,/(.+)-inline(.+)/,Mr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ds(e)-1-t>6)switch(ri(e,t+1)){case 109:if(ri(e,t+4)!==45)break;case 102:return Ar(e,/(.+:)(.+)-([^]+)/,"$1"+Mr+"$2-$3$1"+$m+(ri(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Vv(e,"stretch")?vk(Ar(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ri(e,t+1)!==115)break;case 6444:switch(ri(e,ds(e)-3-(~Vv(e,"!important")&&10))){case 107:return Ar(e,":",":"+Mr)+e;case 101:return Ar(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Mr+(ri(e,14)===45?"inline-":"")+"box$3$1"+Mr+"$2$3$1"+yi+"$2box$3")+e}break;case 5936:switch(ri(e,t+11)){case 114:return Mr+e+yi+Ar(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Mr+e+yi+Ar(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Mr+e+yi+Ar(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Mr+e+yi+e+e}return e}var TA=function(t,o,l,h){if(t.length>-1&&!t.return)switch(t.type){case s0:t.return=vk(t.value,t.length);break;case pk:return Cu([hh(t,{value:Ar(t.value,"@","@"+Mr)})],h);case o0:if(t.length)return cA(t.props,function(m){switch(lA(m,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Cu([hh(t,{props:[Ar(m,/:(read-\w+)/,":"+$m+"$1")]})],h);case"::placeholder":return Cu([hh(t,{props:[Ar(m,/:(plac\w+)/,":"+Mr+"input-$1")]}),hh(t,{props:[Ar(m,/:(plac\w+)/,":"+$m+"$1")]}),hh(t,{props:[Ar(m,/:(plac\w+)/,yi+"input-$1")]})],h)}return""})}},IA=[TA],EA=function(t){var o=t.key;if(o==="css"){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,function(re){var le=re.getAttribute("data-emotion");le.indexOf(" ")!==-1&&(document.head.appendChild(re),re.setAttribute("data-s",""))})}var h=t.stylisPlugins||IA,m={},g,u=[];g=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(re){for(var le=re.getAttribute("data-emotion").split(" "),W=1;W<le.length;W++)m[le[W]]=!0;u.push(re)});var I,M=[CA,kA];{var B,L=[_A,xA(function(re){B.insert(re)})],A=vA(M.concat(h,L)),Z=function(le){return Cu(gA(le),A)};I=function(le,W,j,V){B=j,Z(le?le+"{"+W.styles+"}":W.styles),V&&(q.inserted[W.name]=!0)}}var q={key:o,sheet:new rA({key:o,container:g,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:m,registered:{},insert:I};return q.sheet.hydrate(u),q},xk={exports:{}},Or={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=typeof Symbol=="function"&&Symbol.for,l0=Xn?Symbol.for("react.element"):60103,c0=Xn?Symbol.for("react.portal"):60106,dg=Xn?Symbol.for("react.fragment"):60107,hg=Xn?Symbol.for("react.strict_mode"):60108,pg=Xn?Symbol.for("react.profiler"):60114,fg=Xn?Symbol.for("react.provider"):60109,mg=Xn?Symbol.for("react.context"):60110,u0=Xn?Symbol.for("react.async_mode"):60111,gg=Xn?Symbol.for("react.concurrent_mode"):60111,yg=Xn?Symbol.for("react.forward_ref"):60112,_g=Xn?Symbol.for("react.suspense"):60113,PA=Xn?Symbol.for("react.suspense_list"):60120,vg=Xn?Symbol.for("react.memo"):60115,xg=Xn?Symbol.for("react.lazy"):60116,MA=Xn?Symbol.for("react.block"):60121,AA=Xn?Symbol.for("react.fundamental"):60117,zA=Xn?Symbol.for("react.responder"):60118,RA=Xn?Symbol.for("react.scope"):60119;function go(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case l0:switch(e=e.type,e){case u0:case gg:case dg:case pg:case hg:case _g:return e;default:switch(e=e&&e.$$typeof,e){case mg:case yg:case xg:case vg:case fg:return e;default:return t}}case c0:return t}}}function bk(e){return go(e)===gg}Or.AsyncMode=u0;Or.ConcurrentMode=gg;Or.ContextConsumer=mg;Or.ContextProvider=fg;Or.Element=l0;Or.ForwardRef=yg;Or.Fragment=dg;Or.Lazy=xg;Or.Memo=vg;Or.Portal=c0;Or.Profiler=pg;Or.StrictMode=hg;Or.Suspense=_g;Or.isAsyncMode=function(e){return bk(e)||go(e)===u0};Or.isConcurrentMode=bk;Or.isContextConsumer=function(e){return go(e)===mg};Or.isContextProvider=function(e){return go(e)===fg};Or.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===l0};Or.isForwardRef=function(e){return go(e)===yg};Or.isFragment=function(e){return go(e)===dg};Or.isLazy=function(e){return go(e)===xg};Or.isMemo=function(e){return go(e)===vg};Or.isPortal=function(e){return go(e)===c0};Or.isProfiler=function(e){return go(e)===pg};Or.isStrictMode=function(e){return go(e)===hg};Or.isSuspense=function(e){return go(e)===_g};Or.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dg||e===gg||e===pg||e===hg||e===_g||e===PA||typeof e=="object"&&e!==null&&(e.$$typeof===xg||e.$$typeof===vg||e.$$typeof===fg||e.$$typeof===mg||e.$$typeof===yg||e.$$typeof===AA||e.$$typeof===zA||e.$$typeof===RA||e.$$typeof===MA)};Or.typeOf=go;xk.exports=Or;var DA=xk.exports,wk=DA,LA={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},BA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Sk={};Sk[wk.ForwardRef]=LA;Sk[wk.Memo]=BA;var FA=!0;function Ck(e,t,o){var l="";return o.split(" ").forEach(function(h){e[h]!==void 0?t.push(e[h]+";"):h&&(l+=h+" ")}),l}var d0=function(t,o,l){var h=t.key+"-"+o.name;(l===!1||FA===!1)&&t.registered[h]===void 0&&(t.registered[h]=o.styles)},h0=function(t,o,l){d0(t,o,l);var h=t.key+"-"+o.name;if(t.inserted[o.name]===void 0){var m=o;do t.insert(o===m?"."+h:"",m,t.sheet,!0),m=m.next;while(m!==void 0)}};function OA(e){for(var t=0,o,l=0,h=e.length;h>=4;++l,h-=4)o=e.charCodeAt(l)&255|(e.charCodeAt(++l)&255)<<8|(e.charCodeAt(++l)&255)<<16|(e.charCodeAt(++l)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(h){case 3:t^=(e.charCodeAt(l+2)&255)<<16;case 2:t^=(e.charCodeAt(l+1)&255)<<8;case 1:t^=e.charCodeAt(l)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var $A={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},NA=/[A-Z]|^ms/g,jA=/_EMO_([^_]+?)_([^]*?)_EMO_/g,kk=function(t){return t.charCodeAt(1)===45},Nw=function(t){return t!=null&&typeof t!="boolean"},L_=_k(function(e){return kk(e)?e:e.replace(NA,"-$&").toLowerCase()}),jw=function(t,o){switch(t){case"animation":case"animationName":if(typeof o=="string")return o.replace(jA,function(l,h,m){return hs={name:h,styles:m,next:hs},h})}return $A[t]!==1&&!kk(t)&&typeof o=="number"&&o!==0?o+"px":o};function op(e,t,o){if(o==null)return"";var l=o;if(l.__emotion_styles!==void 0)return l;switch(typeof o){case"boolean":return"";case"object":{var h=o;if(h.anim===1)return hs={name:h.name,styles:h.styles,next:hs},h.name;var m=o;if(m.styles!==void 0){var g=m.next;if(g!==void 0)for(;g!==void 0;)hs={name:g.name,styles:g.styles,next:hs},g=g.next;var u=m.styles+";";return u}return VA(e,t,o)}case"function":{if(e!==void 0){var I=hs,M=o(e);return hs=I,op(e,t,M)}break}}var B=o;if(t==null)return B;var L=t[B];return L!==void 0?L:B}function VA(e,t,o){var l="";if(Array.isArray(o))for(var h=0;h<o.length;h++)l+=op(e,t,o[h])+";";else for(var m in o){var g=o[m];if(typeof g!="object"){var u=g;t!=null&&t[u]!==void 0?l+=m+"{"+t[u]+"}":Nw(u)&&(l+=L_(m)+":"+jw(m,u)+";")}else if(Array.isArray(g)&&typeof g[0]=="string"&&(t==null||t[g[0]]===void 0))for(var I=0;I<g.length;I++)Nw(g[I])&&(l+=L_(m)+":"+jw(m,g[I])+";");else{var M=op(e,t,g);switch(m){case"animation":case"animationName":{l+=L_(m)+":"+M+";";break}default:l+=m+"{"+M+"}"}}}return l}var Vw=/label:\s*([^\s;{]+)\s*(;|$)/g,hs;function gp(e,t,o){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var l=!0,h="";hs=void 0;var m=e[0];if(m==null||m.raw===void 0)l=!1,h+=op(o,t,m);else{var g=m;h+=g[0]}for(var u=1;u<e.length;u++)if(h+=op(o,t,e[u]),l){var I=m;h+=I[u]}Vw.lastIndex=0;for(var M="",B;(B=Vw.exec(h))!==null;)M+="-"+B[1];var L=OA(h)+M;return{name:L,styles:h,next:hs}}var UA=function(t){return t()},Tk=Z_.useInsertionEffect?Z_.useInsertionEffect:!1,Ik=Tk||UA,Uw=Tk||ee.useLayoutEffect,Ek=ee.createContext(typeof HTMLElement<"u"?EA({key:"css"}):null);Ek.Provider;var p0=function(t){return ee.forwardRef(function(o,l){var h=ee.useContext(Ek);return t(o,h,l)})},yp=ee.createContext({}),f0={}.hasOwnProperty,Wv="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",WA=function(t,o){var l={};for(var h in o)f0.call(o,h)&&(l[h]=o[h]);return l[Wv]=t,l},GA=function(t){var o=t.cache,l=t.serialized,h=t.isStringTag;return d0(o,l,h),Ik(function(){return h0(o,l,h)}),null},HA=p0(function(e,t,o){var l=e.css;typeof l=="string"&&t.registered[l]!==void 0&&(l=t.registered[l]);var h=e[Wv],m=[l],g="";typeof e.className=="string"?g=Ck(t.registered,m,e.className):e.className!=null&&(g=e.className+" ");var u=gp(m,void 0,ee.useContext(yp));g+=t.key+"-"+u.name;var I={};for(var M in e)f0.call(e,M)&&M!=="css"&&M!==Wv&&(I[M]=e[M]);return I.className=g,o&&(I.ref=o),ee.createElement(ee.Fragment,null,ee.createElement(GA,{cache:t,serialized:u,isStringTag:typeof h=="string"}),ee.createElement(h,I))}),qA=HA,Ww=function(t,o){var l=arguments;if(o==null||!f0.call(o,"css"))return ee.createElement.apply(void 0,l);var h=l.length,m=new Array(h);m[0]=qA,m[1]=WA(t,o);for(var g=2;g<h;g++)m[g]=l[g];return ee.createElement.apply(null,m)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Ww||(Ww={}));var ZA=p0(function(e,t){var o=e.styles,l=gp([o],void 0,ee.useContext(yp)),h=ee.useRef();return Uw(function(){var m=t.key+"-global",g=new t.sheet.constructor({key:m,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,I=document.querySelector('style[data-emotion="'+m+" "+l.name+'"]');return t.sheet.tags.length&&(g.before=t.sheet.tags[0]),I!==null&&(u=!0,I.setAttribute("data-emotion",m),g.hydrate([I])),h.current=[g,u],function(){g.flush()}},[t]),Uw(function(){var m=h.current,g=m[0],u=m[1];if(u){m[1]=!1;return}if(l.next!==void 0&&h0(t,l.next,!0),g.tags.length){var I=g.tags[g.tags.length-1].nextElementSibling;g.before=I,g.flush()}t.insert("",l,g,!1)},[t,l.name]),null});function m0(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return gp(t)}function _p(){var e=m0.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var XA=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,KA=_k(function(e){return XA.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),YA=KA,JA=function(t){return t!=="theme"},Gw=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?YA:JA},Hw=function(t,o,l){var h;if(o){var m=o.shouldForwardProp;h=t.__emotion_forwardProp&&m?function(g){return t.__emotion_forwardProp(g)&&m(g)}:m}return typeof h!="function"&&l&&(h=t.__emotion_forwardProp),h},QA=function(t){var o=t.cache,l=t.serialized,h=t.isStringTag;return d0(o,l,h),Ik(function(){return h0(o,l,h)}),null},ez=function e(t,o){var l=t.__emotion_real===t,h=l&&t.__emotion_base||t,m,g;o!==void 0&&(m=o.label,g=o.target);var u=Hw(t,o,l),I=u||Gw(h),M=!I("as");return function(){var B=arguments,L=l&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(m!==void 0&&L.push("label:"+m+";"),B[0]==null||B[0].raw===void 0)L.push.apply(L,B);else{var A=B[0];L.push(A[0]);for(var Z=B.length,q=1;q<Z;q++)L.push(B[q],A[q])}var re=p0(function(le,W,j){var V=M&&le.as||h,Q="",pe=[],de=le;if(le.theme==null){de={};for(var _e in le)de[_e]=le[_e];de.theme=ee.useContext(yp)}typeof le.className=="string"?Q=Ck(W.registered,pe,le.className):le.className!=null&&(Q=le.className+" ");var ge=gp(L.concat(pe),W.registered,de);Q+=W.key+"-"+ge.name,g!==void 0&&(Q+=" "+g);var Ae=M&&u===void 0?Gw(V):I,Re={};for(var De in le)M&&De==="as"||Ae(De)&&(Re[De]=le[De]);return Re.className=Q,j&&(Re.ref=j),ee.createElement(ee.Fragment,null,ee.createElement(QA,{cache:W,serialized:ge,isStringTag:typeof V=="string"}),ee.createElement(V,Re))});return re.displayName=m!==void 0?m:"Styled("+(typeof h=="string"?h:h.displayName||h.name||"Component")+")",re.defaultProps=t.defaultProps,re.__emotion_real=re,re.__emotion_base=h,re.__emotion_styles=L,re.__emotion_forwardProp=u,Object.defineProperty(re,"toString",{value:function(){return"."+g}}),re.withComponent=function(le,W){var j=e(le,Om({},o,W,{shouldForwardProp:Hw(re,W,!0)}));return j.apply(void 0,L)},re}},tz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Gv=ez.bind(null);tz.forEach(function(e){Gv[e]=Gv(e)});function rz(e){return e==null||Object.keys(e).length===0}function Pk(e){const{styles:t,defaultTheme:o={}}=e,l=typeof t=="function"?h=>t(rz(h)?o:h):t;return G.jsx(ZA,{styles:l})}function Mk(e,t){return Gv(e,t)}function nz(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const qw=[];function qa(e){return qw[0]=e,gp(qw)}var Ak={exports:{}},qr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0=Symbol.for("react.transitional.element"),y0=Symbol.for("react.portal"),bg=Symbol.for("react.fragment"),wg=Symbol.for("react.strict_mode"),Sg=Symbol.for("react.profiler"),Cg=Symbol.for("react.consumer"),kg=Symbol.for("react.context"),Tg=Symbol.for("react.forward_ref"),Ig=Symbol.for("react.suspense"),Eg=Symbol.for("react.suspense_list"),Pg=Symbol.for("react.memo"),Mg=Symbol.for("react.lazy"),iz=Symbol.for("react.view_transition"),oz=Symbol.for("react.client.reference");function Ro(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case g0:switch(e=e.type,e){case bg:case Sg:case wg:case Ig:case Eg:case iz:return e;default:switch(e=e&&e.$$typeof,e){case kg:case Tg:case Mg:case Pg:return e;case Cg:return e;default:return t}}case y0:return t}}}qr.ContextConsumer=Cg;qr.ContextProvider=kg;qr.Element=g0;qr.ForwardRef=Tg;qr.Fragment=bg;qr.Lazy=Mg;qr.Memo=Pg;qr.Portal=y0;qr.Profiler=Sg;qr.StrictMode=wg;qr.Suspense=Ig;qr.SuspenseList=Eg;qr.isContextConsumer=function(e){return Ro(e)===Cg};qr.isContextProvider=function(e){return Ro(e)===kg};qr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===g0};qr.isForwardRef=function(e){return Ro(e)===Tg};qr.isFragment=function(e){return Ro(e)===bg};qr.isLazy=function(e){return Ro(e)===Mg};qr.isMemo=function(e){return Ro(e)===Pg};qr.isPortal=function(e){return Ro(e)===y0};qr.isProfiler=function(e){return Ro(e)===Sg};qr.isStrictMode=function(e){return Ro(e)===wg};qr.isSuspense=function(e){return Ro(e)===Ig};qr.isSuspenseList=function(e){return Ro(e)===Eg};qr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===bg||e===Sg||e===wg||e===Ig||e===Eg||typeof e=="object"&&e!==null&&(e.$$typeof===Mg||e.$$typeof===Pg||e.$$typeof===kg||e.$$typeof===Cg||e.$$typeof===Tg||e.$$typeof===oz||e.getModuleId!==void 0)};qr.typeOf=Ro;Ak.exports=qr;var zk=Ak.exports;function ms(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Rk(e){if(ee.isValidElement(e)||zk.isValidElementType(e)||!ms(e))return e;const t={};return Object.keys(e).forEach(o=>{t[o]=Rk(e[o])}),t}function qn(e,t,o={clone:!0}){const l=o.clone?{...e}:e;return ms(e)&&ms(t)&&Object.keys(t).forEach(h=>{ee.isValidElement(t[h])||zk.isValidElementType(t[h])?l[h]=t[h]:ms(t[h])&&Object.prototype.hasOwnProperty.call(e,h)&&ms(e[h])?l[h]=qn(e[h],t[h],o):o.clone?l[h]=ms(t[h])?Rk(t[h]):t[h]:l[h]=t[h]}),l}const sz=e=>{const t=Object.keys(e).map(o=>({key:o,val:e[o]}))||[];return t.sort((o,l)=>o.val-l.val),t.reduce((o,l)=>({...o,[l.key]:l.val}),{})};function az(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:o="px",step:l=5,...h}=e,m=sz(t),g=Object.keys(m);function u(A){return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${o})`}function I(A){return`@media (max-width:${(typeof t[A]=="number"?t[A]:A)-l/100}${o})`}function M(A,Z){const q=g.indexOf(Z);return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${o}) and (max-width:${(q!==-1&&typeof t[g[q]]=="number"?t[g[q]]:Z)-l/100}${o})`}function B(A){return g.indexOf(A)+1<g.length?M(A,g[g.indexOf(A)+1]):u(A)}function L(A){const Z=g.indexOf(A);return Z===0?u(g[1]):Z===g.length-1?I(g[Z]):M(A,g[g.indexOf(A)+1]).replace("@media","@media not all and")}return{keys:g,values:m,up:u,down:I,between:M,only:B,not:L,unit:o,...h}}function Zw(e,t){if(!e.containerQueries)return t;const o=Object.keys(t).filter(l=>l.startsWith("@container")).sort((l,h)=>{var g,u;const m=/min-width:\s*([0-9.]+)/;return+(((g=l.match(m))==null?void 0:g[1])||0)-+(((u=h.match(m))==null?void 0:u[1])||0)});return o.length?o.reduce((l,h)=>{const m=t[h];return delete l[h],l[h]=m,l},{...t}):t}function lz(e,t){return t==="@"||t.startsWith("@")&&(e.some(o=>t.startsWith(`@${o}`))||!!t.match(/^@\d/))}function cz(e,t){const o=t.match(/^@([^/]+)?\/?(.+)?$/);if(!o)return null;const[,l,h]=o,m=Number.isNaN(+l)?l||0:+l;return e.containerQueries(h).up(m)}function uz(e){const t=(m,g)=>m.replace("@media",g?`@container ${g}`:"@container");function o(m,g){m.up=(...u)=>t(e.breakpoints.up(...u),g),m.down=(...u)=>t(e.breakpoints.down(...u),g),m.between=(...u)=>t(e.breakpoints.between(...u),g),m.only=(...u)=>t(e.breakpoints.only(...u),g),m.not=(...u)=>{const I=t(e.breakpoints.not(...u),g);return I.includes("not all and")?I.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):I}}const l={},h=m=>(o(l,m),l);return o(h),{...e,containerQueries:h}}const dz={borderRadius:4};function Bh(e,t){return t?qn(e,t,{clone:!1}):e}const Ag={xs:0,sm:600,md:900,lg:1200,xl:1536},Xw={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Ag[e]}px)`},hz={containerQueries:e=>({up:t=>{let o=typeof t=="number"?t:Ag[t]||t;return typeof o=="number"&&(o=`${o}px`),e?`@container ${e} (min-width:${o})`:`@container (min-width:${o})`}})};function Zo(e,t,o){const l=e.theme||{};if(Array.isArray(t)){const m=l.breakpoints||Xw;return t.reduce((g,u,I)=>(g[m.up(m.keys[I])]=o(t[I]),g),{})}if(typeof t=="object"){const m=l.breakpoints||Xw;return Object.keys(t).reduce((g,u)=>{if(lz(m.keys,u)){const I=cz(l.containerQueries?l:hz,u);I&&(g[I]=o(t[u],u))}else if(Object.keys(m.values||Ag).includes(u)){const I=m.up(u);g[I]=o(t[u],u)}else{const I=u;g[I]=t[I]}return g},{})}return o(t)}function Dk(e={}){var o;return((o=e.keys)==null?void 0:o.reduce((l,h)=>{const m=e.up(h);return l[m]={},l},{}))||{}}function Hv(e,t){return e.reduce((o,l)=>{const h=o[l];return(!h||Object.keys(h).length===0)&&delete o[l],o},t)}function pz(e,...t){const o=Dk(e),l=[o,...t].reduce((h,m)=>qn(h,m),{});return Hv(Object.keys(o),l)}function fz(e,t){if(typeof e!="object")return{};const o={},l=Object.keys(t);return Array.isArray(e)?l.forEach((h,m)=>{m<e.length&&(o[h]=!0)}):l.forEach(h=>{e[h]!=null&&(o[h]=!0)}),o}function B_({values:e,breakpoints:t,base:o}){const l=o||fz(e,t),h=Object.keys(l);if(h.length===0)return e;let m;return h.reduce((g,u,I)=>(Array.isArray(e)?(g[u]=e[I]!=null?e[I]:e[m],m=I):typeof e=="object"?(g[u]=e[u]!=null?e[u]:e[m],m=u):g[u]=e,g),{})}function at(e){if(typeof e!="string")throw new Error(Ks(7));return e.charAt(0).toUpperCase()+e.slice(1)}function ps(e,t,o=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&o){const l=`vars.${t}`.split(".").reduce((h,m)=>h&&h[m]?h[m]:null,e);if(l!=null)return l}return t.split(".").reduce((l,h)=>l&&l[h]!=null?l[h]:null,e)}function Nm(e,t,o,l=o){let h;return typeof e=="function"?h=e(o):Array.isArray(e)?h=e[o]||l:h=ps(e,o)||l,t&&(h=t(h,l,e)),h}function bn(e){const{prop:t,cssProperty:o=e.prop,themeKey:l,transform:h}=e,m=g=>{if(g[t]==null)return null;const u=g[t],I=g.theme,M=ps(I,l)||{};return Zo(g,u,L=>{let A=Nm(M,h,L);return L===A&&typeof L=="string"&&(A=Nm(M,h,`${t}${L==="default"?"":at(L)}`,L)),o===!1?A:{[o]:A}})};return m.propTypes={},m.filterProps=[t],m}function mz(e){const t={};return o=>(t[o]===void 0&&(t[o]=e(o)),t[o])}const gz={m:"margin",p:"padding"},yz={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Kw={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},_z=mz(e=>{if(e.length>2)if(Kw[e])e=Kw[e];else return[e];const[t,o]=e.split(""),l=gz[t],h=yz[o]||"";return Array.isArray(h)?h.map(m=>l+m):[l+h]}),_0=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],v0=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[..._0,...v0];function vp(e,t,o,l){const h=ps(e,t,!0)??o;return typeof h=="number"||typeof h=="string"?m=>typeof m=="string"?m:typeof h=="string"?h.startsWith("var(")&&m===0?0:h.startsWith("var(")&&m===1?h:`calc(${m} * ${h})`:h*m:Array.isArray(h)?m=>{if(typeof m=="string")return m;const g=Math.abs(m),u=h[g];return m>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof h=="function"?h:()=>{}}function zg(e){return vp(e,"spacing",8)}function Jl(e,t){return typeof t=="string"||t==null?t:e(t)}function vz(e,t){return o=>e.reduce((l,h)=>(l[h]=Jl(t,o),l),{})}function xz(e,t,o,l){if(!t.includes(o))return null;const h=_z(o),m=vz(h,l),g=e[o];return Zo(e,g,m)}function Lk(e,t){const o=zg(e.theme);return Object.keys(e).map(l=>xz(e,t,l,o)).reduce(Bh,{})}function mn(e){return Lk(e,_0)}mn.propTypes={};mn.filterProps=_0;function gn(e){return Lk(e,v0)}gn.propTypes={};gn.filterProps=v0;function Bk(e=8,t=zg({spacing:e})){if(e.mui)return e;const o=(...l)=>(l.length===0?[1]:l).map(m=>{const g=t(m);return typeof g=="number"?`${g}px`:g}).join(" ");return o.mui=!0,o}function Rg(...e){const t=e.reduce((l,h)=>(h.filterProps.forEach(m=>{l[m]=h}),l),{}),o=l=>Object.keys(l).reduce((h,m)=>t[m]?Bh(h,t[m](l)):h,{});return o.propTypes={},o.filterProps=e.reduce((l,h)=>l.concat(h.filterProps),[]),o}function Io(e){return typeof e!="number"?e:`${e}px solid`}function Do(e,t){return bn({prop:e,themeKey:"borders",transform:t})}const bz=Do("border",Io),wz=Do("borderTop",Io),Sz=Do("borderRight",Io),Cz=Do("borderBottom",Io),kz=Do("borderLeft",Io),Tz=Do("borderColor"),Iz=Do("borderTopColor"),Ez=Do("borderRightColor"),Pz=Do("borderBottomColor"),Mz=Do("borderLeftColor"),Az=Do("outline",Io),zz=Do("outlineColor"),Dg=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=vp(e.theme,"shape.borderRadius",4),o=l=>({borderRadius:Jl(t,l)});return Zo(e,e.borderRadius,o)}return null};Dg.propTypes={};Dg.filterProps=["borderRadius"];Rg(bz,wz,Sz,Cz,kz,Tz,Iz,Ez,Pz,Mz,Dg,Az,zz);const Lg=e=>{if(e.gap!==void 0&&e.gap!==null){const t=vp(e.theme,"spacing",8),o=l=>({gap:Jl(t,l)});return Zo(e,e.gap,o)}return null};Lg.propTypes={};Lg.filterProps=["gap"];const Bg=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=vp(e.theme,"spacing",8),o=l=>({columnGap:Jl(t,l)});return Zo(e,e.columnGap,o)}return null};Bg.propTypes={};Bg.filterProps=["columnGap"];const Fg=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=vp(e.theme,"spacing",8),o=l=>({rowGap:Jl(t,l)});return Zo(e,e.rowGap,o)}return null};Fg.propTypes={};Fg.filterProps=["rowGap"];const Rz=bn({prop:"gridColumn"}),Dz=bn({prop:"gridRow"}),Lz=bn({prop:"gridAutoFlow"}),Bz=bn({prop:"gridAutoColumns"}),Fz=bn({prop:"gridAutoRows"}),Oz=bn({prop:"gridTemplateColumns"}),$z=bn({prop:"gridTemplateRows"}),Nz=bn({prop:"gridTemplateAreas"}),jz=bn({prop:"gridArea"});Rg(Lg,Bg,Fg,Rz,Dz,Lz,Bz,Fz,Oz,$z,Nz,jz);function ku(e,t){return t==="grey"?t:e}const Vz=bn({prop:"color",themeKey:"palette",transform:ku}),Uz=bn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ku}),Wz=bn({prop:"backgroundColor",themeKey:"palette",transform:ku});Rg(Vz,Uz,Wz);function lo(e){return e<=1&&e!==0?`${e*100}%`:e}const Gz=bn({prop:"width",transform:lo}),x0=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=o=>{var h,m,g,u,I;const l=((g=(m=(h=e.theme)==null?void 0:h.breakpoints)==null?void 0:m.values)==null?void 0:g[o])||Ag[o];return l?((I=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:I.unit)!=="px"?{maxWidth:`${l}${e.theme.breakpoints.unit}`}:{maxWidth:l}:{maxWidth:lo(o)}};return Zo(e,e.maxWidth,t)}return null};x0.filterProps=["maxWidth"];const Hz=bn({prop:"minWidth",transform:lo}),qz=bn({prop:"height",transform:lo}),Zz=bn({prop:"maxHeight",transform:lo}),Xz=bn({prop:"minHeight",transform:lo});bn({prop:"size",cssProperty:"width",transform:lo});bn({prop:"size",cssProperty:"height",transform:lo});const Kz=bn({prop:"boxSizing"});Rg(Gz,x0,Hz,qz,Zz,Xz,Kz);const xp={border:{themeKey:"borders",transform:Io},borderTop:{themeKey:"borders",transform:Io},borderRight:{themeKey:"borders",transform:Io},borderBottom:{themeKey:"borders",transform:Io},borderLeft:{themeKey:"borders",transform:Io},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Io},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Dg},color:{themeKey:"palette",transform:ku},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ku},backgroundColor:{themeKey:"palette",transform:ku},p:{style:gn},pt:{style:gn},pr:{style:gn},pb:{style:gn},pl:{style:gn},px:{style:gn},py:{style:gn},padding:{style:gn},paddingTop:{style:gn},paddingRight:{style:gn},paddingBottom:{style:gn},paddingLeft:{style:gn},paddingX:{style:gn},paddingY:{style:gn},paddingInline:{style:gn},paddingInlineStart:{style:gn},paddingInlineEnd:{style:gn},paddingBlock:{style:gn},paddingBlockStart:{style:gn},paddingBlockEnd:{style:gn},m:{style:mn},mt:{style:mn},mr:{style:mn},mb:{style:mn},ml:{style:mn},mx:{style:mn},my:{style:mn},margin:{style:mn},marginTop:{style:mn},marginRight:{style:mn},marginBottom:{style:mn},marginLeft:{style:mn},marginX:{style:mn},marginY:{style:mn},marginInline:{style:mn},marginInlineStart:{style:mn},marginInlineEnd:{style:mn},marginBlock:{style:mn},marginBlockStart:{style:mn},marginBlockEnd:{style:mn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Lg},rowGap:{style:Fg},columnGap:{style:Bg},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:lo},maxWidth:{style:x0},minWidth:{transform:lo},height:{transform:lo},maxHeight:{transform:lo},minHeight:{transform:lo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Yz(...e){const t=e.reduce((l,h)=>l.concat(Object.keys(h)),[]),o=new Set(t);return e.every(l=>o.size===Object.keys(l).length)}function Jz(e,t){return typeof e=="function"?e(t):e}function Qz(){function e(o,l,h,m){const g={[o]:l,theme:h},u=m[o];if(!u)return{[o]:l};const{cssProperty:I=o,themeKey:M,transform:B,style:L}=u;if(l==null)return null;if(M==="typography"&&l==="inherit")return{[o]:l};const A=ps(h,M)||{};return L?L(g):Zo(g,l,q=>{let re=Nm(A,B,q);return q===re&&typeof q=="string"&&(re=Nm(A,B,`${o}${q==="default"?"":at(q)}`,q)),I===!1?re:{[I]:re}})}function t(o){const{sx:l,theme:h={},nested:m}=o||{};if(!l)return null;const g=h.unstable_sxConfig??xp;function u(I){let M=I;if(typeof I=="function")M=I(h);else if(typeof I!="object")return I;if(!M)return null;const B=Dk(h.breakpoints),L=Object.keys(B);let A=B;return Object.keys(M).forEach(Z=>{const q=Jz(M[Z],h);if(q!=null)if(typeof q=="object")if(g[Z])A=Bh(A,e(Z,q,h,g));else{const re=Zo({theme:h},q,le=>({[Z]:le}));Yz(re,q)?A[Z]=t({sx:q,theme:h,nested:!0}):A=Bh(A,re)}else A=Bh(A,e(Z,q,h,g))}),!m&&h.modularCssLayers?{"@layer sx":Zw(h,Hv(L,A))}:Zw(h,Hv(L,A))}return Array.isArray(l)?l.map(u):u(l)}return t}const Ka=Qz();Ka.filterProps=["sx"];function eR(e,t){var l;const o=this;if(o.vars){if(!((l=o.colorSchemes)!=null&&l[e])||typeof o.getColorSchemeSelector!="function")return{};let h=o.getColorSchemeSelector(e);return h==="&"?t:((h.includes("data-")||h.includes("."))&&(h=`*:where(${h.replace(/\s*&$/,"")}) &`),{[h]:t})}return o.palette.mode===e?t:{}}function Vu(e={},...t){const{breakpoints:o={},palette:l={},spacing:h,shape:m={},...g}=e,u=az(o),I=Bk(h);let M=qn({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...l},spacing:I,shape:{...dz,...m}},g);return M=uz(M),M.applyStyles=eR,M=t.reduce((B,L)=>qn(B,L),M),M.unstable_sxConfig={...xp,...g==null?void 0:g.unstable_sxConfig},M.unstable_sx=function(L){return Ka({sx:L,theme:this})},M}function tR(e){return Object.keys(e).length===0}function b0(e=null){const t=ee.useContext(yp);return!t||tR(t)?e:t}const rR=Vu();function bp(e=rR){return b0(e)}function F_(e){const t=qa(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function Fk({styles:e,themeId:t,defaultTheme:o={}}){const l=bp(o),h=t&&l[t]||l;let m=typeof e=="function"?e(h):e;return h.modularCssLayers&&(Array.isArray(m)?m=m.map(g=>F_(typeof g=="function"?g(h):g)):m=F_(m)),G.jsx(Pk,{styles:m})}const nR=e=>{var l;const t={systemProps:{},otherProps:{}},o=((l=e==null?void 0:e.theme)==null?void 0:l.unstable_sxConfig)??xp;return Object.keys(e).forEach(h=>{o[h]?t.systemProps[h]=e[h]:t.otherProps[h]=e[h]}),t};function Og(e){const{sx:t,...o}=e,{systemProps:l,otherProps:h}=nR(o);let m;return Array.isArray(t)?m=[l,...t]:typeof t=="function"?m=(...g)=>{const u=t(...g);return ms(u)?{...l,...u}:l}:m={...l,...t},{...h,sx:m}}const Yw=e=>e,iR=()=>{let e=Yw;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Yw}}},Ok=iR();function $k(e){var t,o,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(o=$k(e[t]))&&(l&&(l+=" "),l+=o)}else for(o in e)e[o]&&(l&&(l+=" "),l+=o);return l}function yt(){for(var e,t,o=0,l="",h=arguments.length;o<h;o++)(e=arguments[o])&&(t=$k(e))&&(l&&(l+=" "),l+=t);return l}function oR(e={}){const{themeId:t,defaultTheme:o,defaultClassName:l="MuiBox-root",generateClassName:h}=e,m=Mk("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(Ka);return ee.forwardRef(function(I,M){const B=bp(o),{className:L,component:A="div",...Z}=Og(I);return G.jsx(m,{as:A,ref:M,className:yt(L,h?h(l):l),theme:t&&B[t]||B,...Z})})}const sR={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Wt(e,t,o="Mui"){const l=sR[t];return l?`${o}-${l}`:`${Ok.generate(e)}-${t}`}function Zt(e,t,o="Mui"){const l={};return t.forEach(h=>{l[h]=Wt(e,h,o)}),l}function Nk(e){const{variants:t,...o}=e,l={variants:t,style:qa(o),isProcessed:!0};return l.style===o||t&&t.forEach(h=>{typeof h.style!="function"&&(h.style=qa(h.style))}),l}const aR=Vu();function O_(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Vl(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function lR(e){return e?(t,o)=>o[e]:null}function cR(e,t,o){e.theme=dR(e.theme)?o:e.theme[t]||e.theme}function hm(e,t,o){const l=typeof t=="function"?t(e):t;if(Array.isArray(l))return l.flatMap(h=>hm(e,h,o));if(Array.isArray(l==null?void 0:l.variants)){let h;if(l.isProcessed)h=o?Vl(l.style,o):l.style;else{const{variants:m,...g}=l;h=o?Vl(qa(g),o):g}return jk(e,l.variants,[h],o)}return l!=null&&l.isProcessed?o?Vl(qa(l.style),o):l.style:o?Vl(qa(l),o):l}function jk(e,t,o=[],l=void 0){var m;let h;e:for(let g=0;g<t.length;g+=1){const u=t[g];if(typeof u.props=="function"){if(h??(h={...e,...e.ownerState,ownerState:e.ownerState}),!u.props(h))continue}else for(const I in u.props)if(e[I]!==u.props[I]&&((m=e.ownerState)==null?void 0:m[I])!==u.props[I])continue e;typeof u.style=="function"?(h??(h={...e,...e.ownerState,ownerState:e.ownerState}),o.push(l?Vl(qa(u.style(h)),l):u.style(h))):o.push(l?Vl(qa(u.style),l):u.style)}return o}function Vk(e={}){const{themeId:t,defaultTheme:o=aR,rootShouldForwardProp:l=O_,slotShouldForwardProp:h=O_}=e;function m(u){cR(u,t,o)}return(u,I={})=>{nz(u,de=>de.filter(_e=>_e!==Ka));const{name:M,slot:B,skipVariantsResolver:L,skipSx:A,overridesResolver:Z=lR(pR(B)),...q}=I,re=M&&M.startsWith("Mui")||B?"components":"custom",le=L!==void 0?L:B&&B!=="Root"&&B!=="root"||!1,W=A||!1;let j=O_;B==="Root"||B==="root"?j=l:B?j=h:hR(u)&&(j=void 0);const V=Mk(u,{shouldForwardProp:j,label:uR(),...q}),Q=de=>{if(de.__emotion_real===de)return de;if(typeof de=="function")return function(ge){return hm(ge,de,ge.theme.modularCssLayers?re:void 0)};if(ms(de)){const _e=Nk(de);return function(Ae){return _e.variants?hm(Ae,_e,Ae.theme.modularCssLayers?re:void 0):Ae.theme.modularCssLayers?Vl(_e.style,re):_e.style}}return de},pe=(...de)=>{const _e=[],ge=de.map(Q),Ae=[];if(_e.push(m),M&&Z&&Ae.push(function(Me){var Ke,be;const Le=(be=(Ke=Me.theme.components)==null?void 0:Ke[M])==null?void 0:be.styleOverrides;if(!Le)return null;const $e={};for(const Ee in Le)$e[Ee]=hm(Me,Le[Ee],Me.theme.modularCssLayers?"theme":void 0);return Z(Me,$e)}),M&&!le&&Ae.push(function(Me){var $e,Ke;const Ie=Me.theme,Le=(Ke=($e=Ie==null?void 0:Ie.components)==null?void 0:$e[M])==null?void 0:Ke.variants;return Le?jk(Me,Le,[],Me.theme.modularCssLayers?"theme":void 0):null}),W||Ae.push(Ka),Array.isArray(ge[0])){const X=ge.shift(),Me=new Array(_e.length).fill(""),Ie=new Array(Ae.length).fill("");let Le;Le=[...Me,...X,...Ie],Le.raw=[...Me,...X.raw,...Ie],_e.unshift(Le)}const Re=[..._e,...ge,...Ae],De=V(...Re);return u.muiName&&(De.muiName=u.muiName),De};return V.withConfig&&(pe.withConfig=V.withConfig),pe}}function uR(e,t){return void 0}function dR(e){for(const t in e)return!1;return!0}function hR(e){return typeof e=="string"&&e.charCodeAt(0)>96}function pR(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const w0=Vk();function sp(e,t,o=!1){const l={...t};for(const h in e)if(Object.prototype.hasOwnProperty.call(e,h)){const m=h;if(m==="components"||m==="slots")l[m]={...e[m],...l[m]};else if(m==="componentsProps"||m==="slotProps"){const g=e[m],u=t[m];if(!u)l[m]=g||{};else if(!g)l[m]=u;else{l[m]={...u};for(const I in g)if(Object.prototype.hasOwnProperty.call(g,I)){const M=I;l[m][M]=sp(g[M],u[M],o)}}}else m==="className"&&o&&t.className?l.className=yt(e==null?void 0:e.className,t==null?void 0:t.className):m==="style"&&o&&t.style?l.style={...e==null?void 0:e.style,...t==null?void 0:t.style}:l[m]===void 0&&(l[m]=e[m])}return l}function fR(e){const{theme:t,name:o,props:l}=e;return!t||!t.components||!t.components[o]||!t.components[o].defaultProps?l:sp(t.components[o].defaultProps,l)}function S0({props:e,name:t,defaultTheme:o,themeId:l}){let h=bp(o);return l&&(h=h[l]||h),fR({theme:h,name:t,props:e})}const Xo=typeof window<"u"?ee.useLayoutEffect:ee.useEffect;function mR(e,t=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,o))}function C0(e,t=0,o=1){return mR(e,t,o)}function gR(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let o=e.match(t);return o&&o[0].length===1&&(o=o.map(l=>l+l)),o?`rgb${o.length===4?"a":""}(${o.map((l,h)=>h<3?parseInt(l,16):Math.round(parseInt(l,16)/255*1e3)/1e3).join(", ")})`:""}function Ya(e){if(e.type)return e;if(e.charAt(0)==="#")return Ya(gR(e));const t=e.indexOf("("),o=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(o))throw new Error(Ks(9,e));let l=e.substring(t+1,e.length-1),h;if(o==="color"){if(l=l.split(" "),h=l.shift(),l.length===4&&l[3].charAt(0)==="/"&&(l[3]=l[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(h))throw new Error(Ks(10,h))}else l=l.split(",");return l=l.map(m=>parseFloat(m)),{type:o,values:l,colorSpace:h}}const yR=e=>{const t=Ya(e);return t.values.slice(0,3).map((o,l)=>t.type.includes("hsl")&&l!==0?`${o}%`:o).join(" ")},Sh=(e,t)=>{try{return yR(e)}catch{return e}};function $g(e){const{type:t,colorSpace:o}=e;let{values:l}=e;return t.includes("rgb")?l=l.map((h,m)=>m<3?parseInt(h,10):h):t.includes("hsl")&&(l[1]=`${l[1]}%`,l[2]=`${l[2]}%`),t.includes("color")?l=`${o} ${l.join(" ")}`:l=`${l.join(", ")}`,`${t}(${l})`}function Uk(e){e=Ya(e);const{values:t}=e,o=t[0],l=t[1]/100,h=t[2]/100,m=l*Math.min(h,1-h),g=(M,B=(M+o/30)%12)=>h-m*Math.max(Math.min(B-3,9-B,1),-1);let u="rgb";const I=[Math.round(g(0)*255),Math.round(g(8)*255),Math.round(g(4)*255)];return e.type==="hsla"&&(u+="a",I.push(t[3])),$g({type:u,values:I})}function qv(e){e=Ya(e);let t=e.type==="hsl"||e.type==="hsla"?Ya(Uk(e)).values:e.values;return t=t.map(o=>(e.type!=="color"&&(o/=255),o<=.03928?o/12.92:((o+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function _R(e,t){const o=qv(e),l=qv(t);return(Math.max(o,l)+.05)/(Math.min(o,l)+.05)}function ap(e,t){return e=Ya(e),t=C0(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,$g(e)}function Ml(e,t,o){try{return ap(e,t)}catch{return e}}function Ng(e,t){if(e=Ya(e),t=C0(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let o=0;o<3;o+=1)e.values[o]*=1-t;return $g(e)}function Lr(e,t,o){try{return Ng(e,t)}catch{return e}}function jg(e,t){if(e=Ya(e),t=C0(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let o=0;o<3;o+=1)e.values[o]+=(255-e.values[o])*t;else if(e.type.includes("color"))for(let o=0;o<3;o+=1)e.values[o]+=(1-e.values[o])*t;return $g(e)}function Br(e,t,o){try{return jg(e,t)}catch{return e}}function vR(e,t=.15){return qv(e)>.5?Ng(e,t):jg(e,t)}function Wf(e,t,o){try{return vR(e,t)}catch{return e}}const Wk=ee.createContext(null);function k0(){return ee.useContext(Wk)}const xR=typeof Symbol=="function"&&Symbol.for,bR=xR?Symbol.for("mui.nested"):"__THEME_NESTED__";function wR(e,t){return typeof t=="function"?t(e):{...e,...t}}function SR(e){const{children:t,theme:o}=e,l=k0(),h=ee.useMemo(()=>{const m=l===null?{...o}:wR(l,o);return m!=null&&(m[bR]=l!==null),m},[o,l]);return G.jsx(Wk.Provider,{value:h,children:t})}const Gk=ee.createContext();function CR({value:e,...t}){return G.jsx(Gk.Provider,{value:e??!0,...t})}const Hk=()=>ee.useContext(Gk)??!1,qk=ee.createContext(void 0);function kR({value:e,children:t}){return G.jsx(qk.Provider,{value:e,children:t})}function TR(e){const{theme:t,name:o,props:l}=e;if(!t||!t.components||!t.components[o])return l;const h=t.components[o];return h.defaultProps?sp(h.defaultProps,l,t.components.mergeClassNameAndStyle):!h.styleOverrides&&!h.variants?sp(h,l,t.components.mergeClassNameAndStyle):l}function IR({props:e,name:t}){const o=ee.useContext(qk);return TR({props:e,name:t,theme:{components:o}})}let Jw=0;function ER(e){const[t,o]=ee.useState(e),l=e||t;return ee.useEffect(()=>{t==null&&(Jw+=1,o(`mui-${Jw}`))},[t]),l}const PR={...Z_},Qw=PR.useId;function Uu(e){if(Qw!==void 0){const t=Qw();return e??t}return ER(e)}function MR(e){const t=b0(),o=Uu()||"",{modularCssLayers:l}=e;let h="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!l||t!==null?h="":typeof l=="string"?h=l.replace(/mui(?!\.)/g,h):h=`@layer ${h};`,Xo(()=>{var u,I;const m=document.querySelector("head");if(!m)return;const g=m.firstChild;if(h){if(g&&((u=g.hasAttribute)!=null&&u.call(g,"data-mui-layer-order"))&&g.getAttribute("data-mui-layer-order")===o)return;const M=document.createElement("style");M.setAttribute("data-mui-layer-order",o),M.textContent=h,m.prepend(M)}else(I=m.querySelector(`style[data-mui-layer-order="${o}"]`))==null||I.remove()},[h,o]),h?G.jsx(Fk,{styles:h}):null}const e2={};function t2(e,t,o,l=!1){return ee.useMemo(()=>{const h=e&&t[e]||t;if(typeof o=="function"){const m=o(h),g=e?{...t,[e]:m}:m;return l?()=>g:g}return e?{...t,[e]:o}:{...t,...o}},[e,t,o,l])}function Zk(e){const{children:t,theme:o,themeId:l}=e,h=b0(e2),m=k0()||e2,g=t2(l,h,o),u=t2(l,m,o,!0),I=(l?g[l]:g).direction==="rtl",M=MR(g);return G.jsx(SR,{theme:u,children:G.jsx(yp.Provider,{value:g,children:G.jsx(CR,{value:I,children:G.jsxs(kR,{value:l?g[l].components:g.components,children:[M,t]})})})})}const r2={theme:void 0};function AR(e){let t,o;return function(h){let m=t;return(m===void 0||h.theme!==o)&&(r2.theme=h.theme,m=Nk(e(r2)),t=m,o=h.theme),m}}const T0="mode",I0="color-scheme",zR="data-color-scheme";function RR(e){const{defaultMode:t="system",defaultLightColorScheme:o="light",defaultDarkColorScheme:l="dark",modeStorageKey:h=T0,colorSchemeStorageKey:m=I0,attribute:g=zR,colorSchemeNode:u="document.documentElement",nonce:I}=e||{};let M="",B=g;if(g==="class"&&(B=".%s"),g==="data"&&(B="[data-%s]"),B.startsWith(".")){const A=B.substring(1);M+=`${u}.classList.remove('${A}'.replace('%s', light), '${A}'.replace('%s', dark));
      ${u}.classList.add('${A}'.replace('%s', colorScheme));`}const L=B.match(/\[([^[\]]+)\]/);if(L){const[A,Z]=L[1].split("=");Z||(M+=`${u}.removeAttribute('${A}'.replace('%s', light));
      ${u}.removeAttribute('${A}'.replace('%s', dark));`),M+=`
      ${u}.setAttribute('${A}'.replace('%s', colorScheme), ${Z?`${Z}.replace('%s', colorScheme)`:'""'});`}else B!==".%s"&&(M+=`${u}.setAttribute('${B}', colorScheme);`);return G.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?I:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${h}') || '${t}';
  const dark = localStorage.getItem('${m}-dark') || '${l}';
  const light = localStorage.getItem('${m}-light') || '${o}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${M}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function DR(){}const LR=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(o){if(typeof window>"u")return;if(!t)return o;let l;try{l=t.localStorage.getItem(e)}catch{}return l||o},set:o=>{if(t)try{t.localStorage.setItem(e,o)}catch{}},subscribe:o=>{if(!t)return DR;const l=h=>{const m=h.newValue;h.key===e&&o(m)};return t.addEventListener("storage",l),()=>{t.removeEventListener("storage",l)}}});function $_(){}function n2(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Xk(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function BR(e){return Xk(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function FR(e){const{defaultMode:t="light",defaultLightColorScheme:o,defaultDarkColorScheme:l,supportedColorSchemes:h=[],modeStorageKey:m=T0,colorSchemeStorageKey:g=I0,storageWindow:u=typeof window>"u"?void 0:window,storageManager:I=LR,noSsr:M=!1}=e,B=h.join(","),L=h.length>1,A=ee.useMemo(()=>I==null?void 0:I({key:m,storageWindow:u}),[I,m,u]),Z=ee.useMemo(()=>I==null?void 0:I({key:`${g}-light`,storageWindow:u}),[I,g,u]),q=ee.useMemo(()=>I==null?void 0:I({key:`${g}-dark`,storageWindow:u}),[I,g,u]),[re,le]=ee.useState(()=>{const ge=(A==null?void 0:A.get(t))||t,Ae=(Z==null?void 0:Z.get(o))||o,Re=(q==null?void 0:q.get(l))||l;return{mode:ge,systemMode:n2(ge),lightColorScheme:Ae,darkColorScheme:Re}}),[W,j]=ee.useState(M||!L);ee.useEffect(()=>{j(!0)},[]);const V=BR(re),Q=ee.useCallback(ge=>{le(Ae=>{if(ge===Ae.mode)return Ae;const Re=ge??t;return A==null||A.set(Re),{...Ae,mode:Re,systemMode:n2(Re)}})},[A,t]),pe=ee.useCallback(ge=>{ge?typeof ge=="string"?ge&&!B.includes(ge)?console.error(`\`${ge}\` does not exist in \`theme.colorSchemes\`.`):le(Ae=>{const Re={...Ae};return Xk(Ae,De=>{De==="light"&&(Z==null||Z.set(ge),Re.lightColorScheme=ge),De==="dark"&&(q==null||q.set(ge),Re.darkColorScheme=ge)}),Re}):le(Ae=>{const Re={...Ae},De=ge.light===null?o:ge.light,X=ge.dark===null?l:ge.dark;return De&&(B.includes(De)?(Re.lightColorScheme=De,Z==null||Z.set(De)):console.error(`\`${De}\` does not exist in \`theme.colorSchemes\`.`)),X&&(B.includes(X)?(Re.darkColorScheme=X,q==null||q.set(X)):console.error(`\`${X}\` does not exist in \`theme.colorSchemes\`.`)),Re}):le(Ae=>(Z==null||Z.set(o),q==null||q.set(l),{...Ae,lightColorScheme:o,darkColorScheme:l}))},[B,Z,q,o,l]),de=ee.useCallback(ge=>{re.mode==="system"&&le(Ae=>{const Re=ge!=null&&ge.matches?"dark":"light";return Ae.systemMode===Re?Ae:{...Ae,systemMode:Re}})},[re.mode]),_e=ee.useRef(de);return _e.current=de,ee.useEffect(()=>{if(typeof window.matchMedia!="function"||!L)return;const ge=(...Re)=>_e.current(...Re),Ae=window.matchMedia("(prefers-color-scheme: dark)");return Ae.addListener(ge),ge(Ae),()=>{Ae.removeListener(ge)}},[L]),ee.useEffect(()=>{if(L){const ge=(A==null?void 0:A.subscribe(De=>{(!De||["light","dark","system"].includes(De))&&Q(De||t)}))||$_,Ae=(Z==null?void 0:Z.subscribe(De=>{(!De||B.match(De))&&pe({light:De})}))||$_,Re=(q==null?void 0:q.subscribe(De=>{(!De||B.match(De))&&pe({dark:De})}))||$_;return()=>{ge(),Ae(),Re()}}},[pe,Q,B,t,u,L,A,Z,q]),{...re,mode:W?re.mode:void 0,systemMode:W?re.systemMode:void 0,colorScheme:W?V:void 0,setMode:Q,setColorScheme:pe}}const OR="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function $R(e){const{themeId:t,theme:o={},modeStorageKey:l=T0,colorSchemeStorageKey:h=I0,disableTransitionOnChange:m=!1,defaultColorScheme:g,resolveTheme:u}=e,I={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},M=ee.createContext(void 0),B=()=>ee.useContext(M)||I,L={},A={};function Z(W){var En,Bn,Xe,dn;const{children:j,theme:V,modeStorageKey:Q=l,colorSchemeStorageKey:pe=h,disableTransitionOnChange:de=m,storageManager:_e,storageWindow:ge=typeof window>"u"?void 0:window,documentNode:Ae=typeof document>"u"?void 0:document,colorSchemeNode:Re=typeof document>"u"?void 0:document.documentElement,disableNestedContext:De=!1,disableStyleSheetGeneration:X=!1,defaultMode:Me="system",forceThemeRerender:Ie=!1,noSsr:Le}=W,$e=ee.useRef(!1),Ke=k0(),be=ee.useContext(M),Ee=!!be&&!De,We=ee.useMemo(()=>V||(typeof o=="function"?o():o),[V]),Ze=We[t],Ge=Ze||We,{colorSchemes:Ct=L,components:Dt=A,cssVarPrefix:$t}=Ge,Ut=Object.keys(Ct).filter(cr=>!!Ct[cr]).join(","),Rt=ee.useMemo(()=>Ut.split(","),[Ut]),mr=typeof g=="string"?g:g.light,Jt=typeof g=="string"?g:g.dark,vt=Ct[mr]&&Ct[Jt]?Me:((Bn=(En=Ct[Ge.defaultColorScheme])==null?void 0:En.palette)==null?void 0:Bn.mode)||((Xe=Ge.palette)==null?void 0:Xe.mode),{mode:Kt,setMode:Xt,systemMode:_r,lightColorScheme:Nt,darkColorScheme:lr,colorScheme:ze,setColorScheme:$r}=FR({supportedColorSchemes:Rt,defaultLightColorScheme:mr,defaultDarkColorScheme:Jt,modeStorageKey:Q,colorSchemeStorageKey:pe,defaultMode:vt,storageManager:_e,storageWindow:ge,noSsr:Le});let kr=Kt,At=ze;Ee&&(kr=be.mode,At=be.colorScheme);let er=At||Ge.defaultColorScheme;Ge.vars&&!Ie&&(er=Ge.defaultColorScheme);const br=ee.useMemo(()=>{var Nr;const cr=((Nr=Ge.generateThemeVars)==null?void 0:Nr.call(Ge))||Ge.vars,zt={...Ge,components:Dt,colorSchemes:Ct,cssVarPrefix:$t,vars:cr};if(typeof zt.generateSpacing=="function"&&(zt.spacing=zt.generateSpacing()),er){const qe=Ct[er];qe&&typeof qe=="object"&&Object.keys(qe).forEach(kt=>{qe[kt]&&typeof qe[kt]=="object"?zt[kt]={...zt[kt],...qe[kt]}:zt[kt]=qe[kt]})}return u?u(zt):zt},[Ge,er,Dt,Ct,$t]),xt=Ge.colorSchemeSelector;Xo(()=>{if(At&&Re&&xt&&xt!=="media"){const cr=xt;let zt=xt;if(cr==="class"&&(zt=".%s"),cr==="data"&&(zt="[data-%s]"),cr!=null&&cr.startsWith("data-")&&!cr.includes("%s")&&(zt=`[${cr}="%s"]`),zt.startsWith("."))Re.classList.remove(...Rt.map(Nr=>zt.substring(1).replace("%s",Nr))),Re.classList.add(zt.substring(1).replace("%s",At));else{const Nr=zt.replace("%s",At).match(/\[([^\]]+)\]/);if(Nr){const[qe,kt]=Nr[1].split("=");kt||Rt.forEach(Pt=>{Re.removeAttribute(qe.replace(At,Pt))}),Re.setAttribute(qe,kt?kt.replace(/"|'/g,""):"")}else Re.setAttribute(zt,At)}}},[At,xt,Re,Rt]),ee.useEffect(()=>{let cr;if(de&&$e.current&&Ae){const zt=Ae.createElement("style");zt.appendChild(Ae.createTextNode(OR)),Ae.head.appendChild(zt),window.getComputedStyle(Ae.body),cr=setTimeout(()=>{Ae.head.removeChild(zt)},1)}return()=>{clearTimeout(cr)}},[At,de,Ae]),ee.useEffect(()=>($e.current=!0,()=>{$e.current=!1}),[]);const _n=ee.useMemo(()=>({allColorSchemes:Rt,colorScheme:At,darkColorScheme:lr,lightColorScheme:Nt,mode:kr,setColorScheme:$r,setMode:Xt,systemMode:_r}),[Rt,At,lr,Nt,kr,$r,Xt,_r,br.colorSchemeSelector]);let Tr=!0;(X||Ge.cssVariables===!1||Ee&&(Ke==null?void 0:Ke.cssVarPrefix)===$t)&&(Tr=!1);const un=G.jsxs(ee.Fragment,{children:[G.jsx(Zk,{themeId:Ze?t:void 0,theme:br,children:j}),Tr&&G.jsx(Pk,{styles:((dn=br.generateStyleSheets)==null?void 0:dn.call(br))||[]})]});return Ee?un:G.jsx(M.Provider,{value:_n,children:un})}const q=typeof g=="string"?g:g.light,re=typeof g=="string"?g:g.dark;return{CssVarsProvider:Z,useColorScheme:B,getInitColorSchemeScript:W=>RR({colorSchemeStorageKey:h,defaultLightColorScheme:q,defaultDarkColorScheme:re,modeStorageKey:l,...W})}}function NR(e=""){function t(...l){if(!l.length)return"";const h=l[0];return typeof h=="string"&&!h.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${h}${t(...l.slice(1))})`:`, ${h}`}return(l,...h)=>`var(--${e?`${e}-`:""}${l}${t(...h)})`}const i2=(e,t,o,l=[])=>{let h=e;t.forEach((m,g)=>{g===t.length-1?Array.isArray(h)?h[Number(m)]=o:h&&typeof h=="object"&&(h[m]=o):h&&typeof h=="object"&&(h[m]||(h[m]=l.includes(m)?[]:{}),h=h[m])})},jR=(e,t,o)=>{function l(h,m=[],g=[]){Object.entries(h).forEach(([u,I])=>{(!o||o&&!o([...m,u]))&&I!=null&&(typeof I=="object"&&Object.keys(I).length>0?l(I,[...m,u],Array.isArray(I)?[...g,u]:g):t([...m,u],I,g))})}l(e)},VR=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(l=>e.includes(l))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function N_(e,t){const{prefix:o,shouldSkipGeneratingVar:l}=t||{},h={},m={},g={};return jR(e,(u,I,M)=>{if((typeof I=="string"||typeof I=="number")&&(!l||!l(u,I))){const B=`--${o?`${o}-`:""}${u.join("-")}`,L=VR(u,I);Object.assign(h,{[B]:L}),i2(m,u,`var(${B})`,M),i2(g,u,`var(${B}, ${L})`,M)}},u=>u[0]==="vars"),{css:h,vars:m,varsWithDefaults:g}}function UR(e,t={}){const{getSelector:o=W,disableCssColorScheme:l,colorSchemeSelector:h,enableContrastVars:m}=t,{colorSchemes:g={},components:u,defaultColorScheme:I="light",...M}=e,{vars:B,css:L,varsWithDefaults:A}=N_(M,t);let Z=A;const q={},{[I]:re,...le}=g;if(Object.entries(le||{}).forEach(([Q,pe])=>{const{vars:de,css:_e,varsWithDefaults:ge}=N_(pe,t);Z=qn(Z,ge),q[Q]={css:_e,vars:de}}),re){const{css:Q,vars:pe,varsWithDefaults:de}=N_(re,t);Z=qn(Z,de),q[I]={css:Q,vars:pe}}function W(Q,pe){var _e,ge;let de=h;if(h==="class"&&(de=".%s"),h==="data"&&(de="[data-%s]"),h!=null&&h.startsWith("data-")&&!h.includes("%s")&&(de=`[${h}="%s"]`),Q){if(de==="media")return e.defaultColorScheme===Q?":root":{[`@media (prefers-color-scheme: ${((ge=(_e=g[Q])==null?void 0:_e.palette)==null?void 0:ge.mode)||Q})`]:{":root":pe}};if(de)return e.defaultColorScheme===Q?`:root, ${de.replace("%s",String(Q))}`:de.replace("%s",String(Q))}return":root"}return{vars:Z,generateThemeVars:()=>{let Q={...B};return Object.entries(q).forEach(([,{vars:pe}])=>{Q=qn(Q,pe)}),Q},generateStyleSheets:()=>{var Ae,Re;const Q=[],pe=e.defaultColorScheme||"light";function de(De,X){Object.keys(X).length&&Q.push(typeof De=="string"?{[De]:{...X}}:De)}de(o(void 0,{...L}),L);const{[pe]:_e,...ge}=q;if(_e){const{css:De}=_e,X=(Re=(Ae=g[pe])==null?void 0:Ae.palette)==null?void 0:Re.mode,Me=!l&&X?{colorScheme:X,...De}:{...De};de(o(pe,{...Me}),Me)}return Object.entries(ge).forEach(([De,{css:X}])=>{var Le,$e;const Me=($e=(Le=g[De])==null?void 0:Le.palette)==null?void 0:$e.mode,Ie=!l&&Me?{colorScheme:Me,...X}:{...X};de(o(De,{...Ie}),Ie)}),m&&Q.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),Q}}}function WR(e){return function(o){return e==="media"?`@media (prefers-color-scheme: ${o})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${o}"] &`:e==="class"?`.${o} &`:e==="data"?`[data-${o}] &`:`${e.replace("%s",o)} &`:"&"}}function Gt(e,t,o=void 0){const l={};for(const h in e){const m=e[h];let g="",u=!0;for(let I=0;I<m.length;I+=1){const M=m[I];M&&(g+=(u===!0?"":" ")+t(M),u=!1,o&&o[M]&&(g+=" "+o[M]))}l[h]=g}return l}const GR=Vu(),HR=w0("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${at(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),qR=e=>S0({props:e,name:"MuiContainer",defaultTheme:GR}),ZR=(e,t)=>{const o=I=>Wt(t,I),{classes:l,fixed:h,disableGutters:m,maxWidth:g}=e,u={root:["root",g&&`maxWidth${at(String(g))}`,h&&"fixed",m&&"disableGutters"]};return Gt(u,o,l)};function XR(e={}){const{createStyledComponent:t=HR,useThemeProps:o=qR,componentName:l="MuiContainer"}=e,h=t(({theme:g,ownerState:u})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!u.disableGutters&&{paddingLeft:g.spacing(2),paddingRight:g.spacing(2),[g.breakpoints.up("sm")]:{paddingLeft:g.spacing(3),paddingRight:g.spacing(3)}}}),({theme:g,ownerState:u})=>u.fixed&&Object.keys(g.breakpoints.values).reduce((I,M)=>{const B=M,L=g.breakpoints.values[B];return L!==0&&(I[g.breakpoints.up(B)]={maxWidth:`${L}${g.breakpoints.unit}`}),I},{}),({theme:g,ownerState:u})=>({...u.maxWidth==="xs"&&{[g.breakpoints.up("xs")]:{maxWidth:Math.max(g.breakpoints.values.xs,444)}},...u.maxWidth&&u.maxWidth!=="xs"&&{[g.breakpoints.up(u.maxWidth)]:{maxWidth:`${g.breakpoints.values[u.maxWidth]}${g.breakpoints.unit}`}}}));return ee.forwardRef(function(u,I){const M=o(u),{className:B,component:L="div",disableGutters:A=!1,fixed:Z=!1,maxWidth:q="lg",classes:re,...le}=M,W={...M,component:L,disableGutters:A,fixed:Z,maxWidth:q},j=ZR(W,l);return G.jsx(h,{as:L,ownerState:W,className:yt(j.root,B),ref:I,...le})})}function Fh(e,t){var o,l,h;return ee.isValidElement(e)&&t.indexOf(e.type.muiName??((h=(l=(o=e.type)==null?void 0:o._payload)==null?void 0:l.value)==null?void 0:h.muiName))!==-1}const KR=(e,t)=>e.filter(o=>t.includes(o)),Wu=(e,t,o)=>{const l=e.keys[0];Array.isArray(t)?t.forEach((h,m)=>{o((g,u)=>{m<=e.keys.length-1&&(m===0?Object.assign(g,u):g[e.up(e.keys[m])]=u)},h)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:KR(e.keys,Object.keys(t))).forEach(m=>{if(e.keys.includes(m)){const g=t[m];g!==void 0&&o((u,I)=>{l===m?Object.assign(u,I):u[e.up(m)]=I},g)}}):(typeof t=="number"||typeof t=="string")&&o((h,m)=>{Object.assign(h,m)},t)};function jm(e){return`--Grid-${e}Spacing`}function Vg(e){return`--Grid-parent-${e}Spacing`}const o2="--Grid-columns",Tu="--Grid-parent-columns",YR=({theme:e,ownerState:t})=>{const o={};return Wu(e.breakpoints,t.size,(l,h)=>{let m={};h==="grow"&&(m={flexBasis:0,flexGrow:1,maxWidth:"100%"}),h==="auto"&&(m={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof h=="number"&&(m={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${h} / var(${Tu}) - (var(${Tu}) - ${h}) * (var(${Vg("column")}) / var(${Tu})))`}),l(o,m)}),o},JR=({theme:e,ownerState:t})=>{const o={};return Wu(e.breakpoints,t.offset,(l,h)=>{let m={};h==="auto"&&(m={marginLeft:"auto"}),typeof h=="number"&&(m={marginLeft:h===0?"0px":`calc(100% * ${h} / var(${Tu}) + var(${Vg("column")}) * ${h} / var(${Tu}))`}),l(o,m)}),o},QR=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={[o2]:12};return Wu(e.breakpoints,t.columns,(l,h)=>{const m=h??12;l(o,{[o2]:m,"> *":{[Tu]:m}})}),o},e5=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={};return Wu(e.breakpoints,t.rowSpacing,(l,h)=>{var g;const m=typeof h=="string"?h:(g=e.spacing)==null?void 0:g.call(e,h);l(o,{[jm("row")]:m,"> *":{[Vg("row")]:m}})}),o},t5=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={};return Wu(e.breakpoints,t.columnSpacing,(l,h)=>{var g;const m=typeof h=="string"?h:(g=e.spacing)==null?void 0:g.call(e,h);l(o,{[jm("column")]:m,"> *":{[Vg("column")]:m}})}),o},r5=({theme:e,ownerState:t})=>{if(!t.container)return{};const o={};return Wu(e.breakpoints,t.direction,(l,h)=>{l(o,{flexDirection:h})}),o},n5=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${jm("row")}) var(${jm("column")})`}}),i5=e=>{const t=[];return Object.entries(e).forEach(([o,l])=>{l!==!1&&l!==void 0&&t.push(`grid-${o}-${String(l)}`)}),t},o5=(e,t="xs")=>{function o(l){return l===void 0?!1:typeof l=="string"&&!Number.isNaN(Number(l))||typeof l=="number"&&l>0}if(o(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const l=[];return Object.entries(e).forEach(([h,m])=>{o(m)&&l.push(`spacing-${h}-${String(m)}`)}),l}return[]},s5=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,o])=>`direction-${t}-${o}`):[`direction-xs-${String(e)}`];function a5(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(o=>{e[o]!==void 0&&delete e[o]})}const l5=Vu(),c5=w0("div",{name:"MuiGrid",slot:"Root"});function u5(e){return S0({props:e,name:"MuiGrid",defaultTheme:l5})}function d5(e={}){const{createStyledComponent:t=c5,useThemeProps:o=u5,useTheme:l=bp,componentName:h="MuiGrid"}=e,m=(M,B)=>{const{container:L,direction:A,spacing:Z,wrap:q,size:re}=M,le={root:["root",L&&"container",q!=="wrap"&&`wrap-xs-${String(q)}`,...s5(A),...i5(re),...L?o5(Z,B.breakpoints.keys[0]):[]]};return Gt(le,W=>Wt(h,W),{})};function g(M,B,L=()=>!0){const A={};return M===null||(Array.isArray(M)?M.forEach((Z,q)=>{Z!==null&&L(Z)&&B.keys[q]&&(A[B.keys[q]]=Z)}):typeof M=="object"?Object.keys(M).forEach(Z=>{const q=M[Z];q!=null&&L(q)&&(A[Z]=q)}):A[B.keys[0]]=M),A}const u=t(QR,t5,e5,YR,r5,n5,JR),I=ee.forwardRef(function(B,L){const A=l(),Z=o(B),q=Og(Z);a5(q,A.breakpoints);const{className:re,children:le,columns:W=12,container:j=!1,component:V="div",direction:Q="row",wrap:pe="wrap",size:de={},offset:_e={},spacing:ge=0,rowSpacing:Ae=ge,columnSpacing:Re=ge,unstable_level:De=0,...X}=q,Me=g(de,A.breakpoints,Ze=>Ze!==!1),Ie=g(_e,A.breakpoints),Le=B.columns??(De?void 0:W),$e=B.spacing??(De?void 0:ge),Ke=B.rowSpacing??B.spacing??(De?void 0:Ae),be=B.columnSpacing??B.spacing??(De?void 0:Re),Ee={...q,level:De,columns:Le,container:j,direction:Q,wrap:pe,spacing:$e,rowSpacing:Ke,columnSpacing:be,size:Me,offset:Ie},We=m(Ee,A);return G.jsx(u,{ref:L,as:V,ownerState:Ee,className:yt(We.root,re),...X,children:ee.Children.map(le,Ze=>{var Ge;return ee.isValidElement(Ze)&&Fh(Ze,["Grid"])&&j&&Ze.props.container?ee.cloneElement(Ze,{unstable_level:((Ge=Ze.props)==null?void 0:Ge.unstable_level)??De+1}):Ze})})});return I.muiName="Grid",I}const h5=Vu(),p5=w0("div",{name:"MuiStack",slot:"Root"});function f5(e){return S0({props:e,name:"MuiStack",defaultTheme:h5})}function m5(e,t){const o=ee.Children.toArray(e).filter(Boolean);return o.reduce((l,h,m)=>(l.push(h),m<o.length-1&&l.push(ee.cloneElement(t,{key:`separator-${m}`})),l),[])}const g5=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],y5=({ownerState:e,theme:t})=>{let o={display:"flex",flexDirection:"column",...Zo({theme:t},B_({values:e.direction,breakpoints:t.breakpoints.values}),l=>({flexDirection:l}))};if(e.spacing){const l=zg(t),h=Object.keys(t.breakpoints.values).reduce((I,M)=>((typeof e.spacing=="object"&&e.spacing[M]!=null||typeof e.direction=="object"&&e.direction[M]!=null)&&(I[M]=!0),I),{}),m=B_({values:e.direction,base:h}),g=B_({values:e.spacing,base:h});typeof m=="object"&&Object.keys(m).forEach((I,M,B)=>{if(!m[I]){const A=M>0?m[B[M-1]]:"column";m[I]=A}}),o=qn(o,Zo({theme:t},g,(I,M)=>e.useFlexGap?{gap:Jl(l,I)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${g5(M?m[M]:e.direction)}`]:Jl(l,I)}}))}return o=pz(t.breakpoints,o),o};function _5(e={}){const{createStyledComponent:t=p5,useThemeProps:o=f5,componentName:l="MuiStack"}=e,h=()=>Gt({root:["root"]},I=>Wt(l,I),{}),m=t(y5);return ee.forwardRef(function(I,M){const B=o(I),L=Og(B),{component:A="div",direction:Z="column",spacing:q=0,divider:re,children:le,className:W,useFlexGap:j=!1,...V}=L,Q={direction:Z,spacing:q,useFlexGap:j},pe=h();return G.jsx(m,{as:A,ownerState:Q,ref:M,className:yt(pe.root,W),...V,children:re?m5(le,re):le})})}const lp={black:"#000",white:"#fff"},v5={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Kc={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Yc={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},ph={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Jc={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Qc={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},eu={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function Kk(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:lp.white,default:lp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Yk=Kk();function Jk(){return{text:{primary:lp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:lp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Zv=Jk();function s2(e,t,o,l){const h=l.light||l,m=l.dark||l*1.5;e[t]||(e.hasOwnProperty(o)?e[t]=e[o]:t==="light"?e.light=jg(e.main,h):t==="dark"&&(e.dark=Ng(e.main,m)))}function a2(e,t,o,l,h){const m=h.light||h,g=h.dark||h*1.5;t[o]||(t.hasOwnProperty(l)?t[o]=t[l]:o==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(m*100).toFixed(0)}%)`:o==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(g*100).toFixed(0)}%)`))}function x5(e="light"){return e==="dark"?{main:Jc[200],light:Jc[50],dark:Jc[400]}:{main:Jc[700],light:Jc[400],dark:Jc[800]}}function b5(e="light"){return e==="dark"?{main:Kc[200],light:Kc[50],dark:Kc[400]}:{main:Kc[500],light:Kc[300],dark:Kc[700]}}function w5(e="light"){return e==="dark"?{main:Yc[500],light:Yc[300],dark:Yc[700]}:{main:Yc[700],light:Yc[400],dark:Yc[800]}}function S5(e="light"){return e==="dark"?{main:Qc[400],light:Qc[300],dark:Qc[700]}:{main:Qc[700],light:Qc[500],dark:Qc[900]}}function C5(e="light"){return e==="dark"?{main:eu[400],light:eu[300],dark:eu[700]}:{main:eu[800],light:eu[500],dark:eu[900]}}function k5(e="light"){return e==="dark"?{main:ph[400],light:ph[300],dark:ph[700]}:{main:"#ed6c02",light:ph[500],dark:ph[900]}}function T5(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function E0(e){const{mode:t="light",contrastThreshold:o=3,tonalOffset:l=.2,colorSpace:h,...m}=e,g=e.primary||x5(t),u=e.secondary||b5(t),I=e.error||w5(t),M=e.info||S5(t),B=e.success||C5(t),L=e.warning||k5(t);function A(le){return h?T5(le):_R(le,Zv.text.primary)>=o?Zv.text.primary:Yk.text.primary}const Z=({color:le,name:W,mainShade:j=500,lightShade:V=300,darkShade:Q=700})=>{if(le={...le},!le.main&&le[j]&&(le.main=le[j]),!le.hasOwnProperty("main"))throw new Error(Ks(11,W?` (${W})`:"",j));if(typeof le.main!="string")throw new Error(Ks(12,W?` (${W})`:"",JSON.stringify(le.main)));return h?(a2(h,le,"light",V,l),a2(h,le,"dark",Q,l)):(s2(le,"light",V,l),s2(le,"dark",Q,l)),le.contrastText||(le.contrastText=A(le.main)),le};let q;return t==="light"?q=Kk():t==="dark"&&(q=Jk()),qn({common:{...lp},mode:t,primary:Z({color:g,name:"primary"}),secondary:Z({color:u,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:Z({color:I,name:"error"}),warning:Z({color:L,name:"warning"}),info:Z({color:M,name:"info"}),success:Z({color:B,name:"success"}),grey:v5,contrastThreshold:o,getContrastText:A,augmentColor:Z,tonalOffset:l,...q},m)}function I5(e){const t={};return Object.entries(e).forEach(l=>{const[h,m]=l;typeof m=="object"&&(t[h]=`${m.fontStyle?`${m.fontStyle} `:""}${m.fontVariant?`${m.fontVariant} `:""}${m.fontWeight?`${m.fontWeight} `:""}${m.fontStretch?`${m.fontStretch} `:""}${m.fontSize||""}${m.lineHeight?`/${m.lineHeight} `:""}${m.fontFamily||""}`)}),t}function E5(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function P5(e){return Math.round(e*1e5)/1e5}const l2={textTransform:"uppercase"},c2='"Roboto", "Helvetica", "Arial", sans-serif';function Qk(e,t){const{fontFamily:o=c2,fontSize:l=14,fontWeightLight:h=300,fontWeightRegular:m=400,fontWeightMedium:g=500,fontWeightBold:u=700,htmlFontSize:I=16,allVariants:M,pxToRem:B,...L}=typeof t=="function"?t(e):t,A=l/14,Z=B||(le=>`${le/I*A}rem`),q=(le,W,j,V,Q)=>({fontFamily:o,fontWeight:le,fontSize:Z(W),lineHeight:j,...o===c2?{letterSpacing:`${P5(V/W)}em`}:{},...Q,...M}),re={h1:q(h,96,1.167,-1.5),h2:q(h,60,1.2,-.5),h3:q(m,48,1.167,0),h4:q(m,34,1.235,.25),h5:q(m,24,1.334,0),h6:q(g,20,1.6,.15),subtitle1:q(m,16,1.75,.15),subtitle2:q(g,14,1.57,.1),body1:q(m,16,1.5,.15),body2:q(m,14,1.43,.15),button:q(g,14,1.75,.4,l2),caption:q(m,12,1.66,.4),overline:q(m,12,2.66,1,l2),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return qn({htmlFontSize:I,pxToRem:Z,fontFamily:o,fontSize:l,fontWeightLight:h,fontWeightRegular:m,fontWeightMedium:g,fontWeightBold:u,...re},L,{clone:!1})}const M5=.2,A5=.14,z5=.12;function rn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${M5})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${A5})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${z5})`].join(",")}const R5=["none",rn(0,2,1,-1,0,1,1,0,0,1,3,0),rn(0,3,1,-2,0,2,2,0,0,1,5,0),rn(0,3,3,-2,0,3,4,0,0,1,8,0),rn(0,2,4,-1,0,4,5,0,0,1,10,0),rn(0,3,5,-1,0,5,8,0,0,1,14,0),rn(0,3,5,-1,0,6,10,0,0,1,18,0),rn(0,4,5,-2,0,7,10,1,0,2,16,1),rn(0,5,5,-3,0,8,10,1,0,3,14,2),rn(0,5,6,-3,0,9,12,1,0,3,16,2),rn(0,6,6,-3,0,10,14,1,0,4,18,3),rn(0,6,7,-4,0,11,15,1,0,4,20,3),rn(0,7,8,-4,0,12,17,2,0,5,22,4),rn(0,7,8,-4,0,13,19,2,0,5,24,4),rn(0,7,9,-4,0,14,21,2,0,5,26,4),rn(0,8,9,-5,0,15,22,2,0,6,28,5),rn(0,8,10,-5,0,16,24,2,0,6,30,5),rn(0,8,11,-5,0,17,26,2,0,6,32,5),rn(0,9,11,-5,0,18,28,2,0,7,34,6),rn(0,9,12,-6,0,19,29,2,0,7,36,6),rn(0,10,13,-6,0,20,31,3,0,8,38,7),rn(0,10,13,-6,0,21,33,3,0,8,40,7),rn(0,10,14,-6,0,22,35,3,0,8,42,7),rn(0,11,14,-7,0,23,36,3,0,9,44,8),rn(0,11,15,-7,0,24,38,3,0,9,46,8)],D5={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},L5={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function u2(e){return`${Math.round(e)}ms`}function B5(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function F5(e){const t={...D5,...e.easing},o={...L5,...e.duration};return{getAutoHeightDuration:B5,create:(h=["all"],m={})=>{const{duration:g=o.standard,easing:u=t.easeInOut,delay:I=0,...M}=m;return(Array.isArray(h)?h:[h]).map(B=>`${B} ${typeof g=="string"?g:u2(g)} ${u} ${typeof I=="string"?I:u2(I)}`).join(",")},...e,easing:t,duration:o}}const O5={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function $5(e){return ms(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function eT(e={}){const t={...e};function o(l){const h=Object.entries(l);for(let m=0;m<h.length;m++){const[g,u]=h[m];!$5(u)||g.startsWith("unstable_")?delete l[g]:ms(u)&&(l[g]={...u},o(l[g]))}}return o(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function d2(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const N5=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let o=0;for(let l=0;l<t.length;l+=1)o+=+t[l];return o};function j5(e){Object.assign(e,{alpha(t,o){const l=this||e;return l.colorSpace?`oklch(from ${t} l c h / ${typeof o=="string"?`calc(${o})`:o})`:l.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof o=="string"?`calc(${o})`:o})`:ap(t,N5(o))},lighten(t,o){const l=this||e;return l.colorSpace?`color-mix(in ${l.colorSpace}, ${t}, #fff ${d2(o)})`:jg(t,o)},darken(t,o){const l=this||e;return l.colorSpace?`color-mix(in ${l.colorSpace}, ${t}, #000 ${d2(o)})`:Ng(t,o)}})}function Xv(e={},...t){const{breakpoints:o,mixins:l={},spacing:h,palette:m={},transitions:g={},typography:u={},shape:I,colorSpace:M,...B}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Ks(20));const L=E0({...m,colorSpace:M}),A=Vu(e);let Z=qn(A,{mixins:E5(A.breakpoints,l),palette:L,shadows:R5.slice(),typography:Qk(L,u),transitions:F5(g),zIndex:{...O5}});return Z=qn(Z,B),Z=t.reduce((q,re)=>qn(q,re),Z),Z.unstable_sxConfig={...xp,...B==null?void 0:B.unstable_sxConfig},Z.unstable_sx=function(re){return Ka({sx:re,theme:this})},Z.toRuntimeSource=eT,j5(Z),Z}function Kv(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const V5=[...Array(25)].map((e,t)=>{if(t===0)return"none";const o=Kv(t);return`linear-gradient(rgba(255 255 255 / ${o}), rgba(255 255 255 / ${o}))`});function tT(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function rT(e){return e==="dark"?V5:[]}function U5(e){const{palette:t={mode:"light"},opacity:o,overlays:l,colorSpace:h,...m}=e,g=E0({...t,colorSpace:h});return{palette:g,opacity:{...tT(g.mode),...o},overlays:l||rT(g.mode),...m}}function W5(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const G5=e=>[...[...Array(25)].map((t,o)=>`--${e?`${e}-`:""}overlays-${o}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],H5=e=>(t,o)=>{const l=e.rootSelector||":root",h=e.colorSchemeSelector;let m=h;if(h==="class"&&(m=".%s"),h==="data"&&(m="[data-%s]"),h!=null&&h.startsWith("data-")&&!h.includes("%s")&&(m=`[${h}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const g={};return G5(e.cssVarPrefix).forEach(u=>{g[u]=o[u],delete o[u]}),m==="media"?{[l]:o,"@media (prefers-color-scheme: dark)":{[l]:g}}:m?{[m.replace("%s",t)]:g,[`${l}, ${m.replace("%s",t)}`]:o}:{[l]:{...o,...g}}}if(m&&m!=="media")return`${l}, ${m.replace("%s",String(t))}`}else if(t){if(m==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[l]:o}};if(m)return m.replace("%s",String(t))}return l};function q5(e,t){t.forEach(o=>{e[o]||(e[o]={})})}function je(e,t,o){!e[t]&&o&&(e[t]=o)}function Ch(e){return typeof e!="string"||!e.startsWith("hsl")?e:Uk(e)}function Os(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Sh(Ch(e[t])))}function Z5(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const ls=e=>{try{return e()}catch{}},X5=(e="mui")=>NR(e);function j_(e,t,o,l,h){if(!o)return;o=o===!0?{}:o;const m=h==="dark"?"dark":"light";if(!l){t[h]=U5({...o,palette:{mode:m,...o==null?void 0:o.palette},colorSpace:e});return}const{palette:g,...u}=Xv({...l,palette:{mode:m,...o==null?void 0:o.palette},colorSpace:e});return t[h]={...o,palette:g,opacity:{...tT(m),...o==null?void 0:o.opacity},overlays:(o==null?void 0:o.overlays)||rT(m)},u}function K5(e={},...t){const{colorSchemes:o={light:!0},defaultColorScheme:l,disableCssColorScheme:h=!1,cssVarPrefix:m="mui",nativeColor:g=!1,shouldSkipGeneratingVar:u=W5,colorSchemeSelector:I=o.light&&o.dark?"media":void 0,rootSelector:M=":root",...B}=e,L=Object.keys(o)[0],A=l||(o.light&&L!=="light"?"light":L),Z=X5(m),{[A]:q,light:re,dark:le,...W}=o,j={...W};let V=q;if((A==="dark"&&!("dark"in o)||A==="light"&&!("light"in o))&&(V=!0),!V)throw new Error(Ks(21,A));let Q;g&&(Q="oklch");const pe=j_(Q,j,V,B,A);re&&!j.light&&j_(Q,j,re,void 0,"light"),le&&!j.dark&&j_(Q,j,le,void 0,"dark");let de={defaultColorScheme:A,...pe,cssVarPrefix:m,colorSchemeSelector:I,rootSelector:M,getCssVar:Z,colorSchemes:j,font:{...I5(pe.typography),...pe.font},spacing:Z5(B.spacing)};Object.keys(de.colorSchemes).forEach(De=>{const X=de.colorSchemes[De].palette,Me=Le=>{const $e=Le.split("-"),Ke=$e[1],be=$e[2];return Z(Le,X[Ke][be])};X.mode==="light"&&(je(X.common,"background","#fff"),je(X.common,"onBackground","#000")),X.mode==="dark"&&(je(X.common,"background","#000"),je(X.common,"onBackground","#fff"));function Ie(Le,$e,Ke){if(Q){let be;return Le===Ml&&(be=`transparent ${((1-Ke)*100).toFixed(0)}%`),Le===Lr&&(be=`#000 ${(Ke*100).toFixed(0)}%`),Le===Br&&(be=`#fff ${(Ke*100).toFixed(0)}%`),`color-mix(in ${Q}, ${$e}, ${be})`}return Le($e,Ke)}if(q5(X,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),X.mode==="light"){je(X.Alert,"errorColor",Ie(Lr,X.error.light,.6)),je(X.Alert,"infoColor",Ie(Lr,X.info.light,.6)),je(X.Alert,"successColor",Ie(Lr,X.success.light,.6)),je(X.Alert,"warningColor",Ie(Lr,X.warning.light,.6)),je(X.Alert,"errorFilledBg",Me("palette-error-main")),je(X.Alert,"infoFilledBg",Me("palette-info-main")),je(X.Alert,"successFilledBg",Me("palette-success-main")),je(X.Alert,"warningFilledBg",Me("palette-warning-main")),je(X.Alert,"errorFilledColor",ls(()=>X.getContrastText(X.error.main))),je(X.Alert,"infoFilledColor",ls(()=>X.getContrastText(X.info.main))),je(X.Alert,"successFilledColor",ls(()=>X.getContrastText(X.success.main))),je(X.Alert,"warningFilledColor",ls(()=>X.getContrastText(X.warning.main))),je(X.Alert,"errorStandardBg",Ie(Br,X.error.light,.9)),je(X.Alert,"infoStandardBg",Ie(Br,X.info.light,.9)),je(X.Alert,"successStandardBg",Ie(Br,X.success.light,.9)),je(X.Alert,"warningStandardBg",Ie(Br,X.warning.light,.9)),je(X.Alert,"errorIconColor",Me("palette-error-main")),je(X.Alert,"infoIconColor",Me("palette-info-main")),je(X.Alert,"successIconColor",Me("palette-success-main")),je(X.Alert,"warningIconColor",Me("palette-warning-main")),je(X.AppBar,"defaultBg",Me("palette-grey-100")),je(X.Avatar,"defaultBg",Me("palette-grey-400")),je(X.Button,"inheritContainedBg",Me("palette-grey-300")),je(X.Button,"inheritContainedHoverBg",Me("palette-grey-A100")),je(X.Chip,"defaultBorder",Me("palette-grey-400")),je(X.Chip,"defaultAvatarColor",Me("palette-grey-700")),je(X.Chip,"defaultIconColor",Me("palette-grey-700")),je(X.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),je(X.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),je(X.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),je(X.LinearProgress,"primaryBg",Ie(Br,X.primary.main,.62)),je(X.LinearProgress,"secondaryBg",Ie(Br,X.secondary.main,.62)),je(X.LinearProgress,"errorBg",Ie(Br,X.error.main,.62)),je(X.LinearProgress,"infoBg",Ie(Br,X.info.main,.62)),je(X.LinearProgress,"successBg",Ie(Br,X.success.main,.62)),je(X.LinearProgress,"warningBg",Ie(Br,X.warning.main,.62)),je(X.Skeleton,"bg",Q?Ie(Ml,X.text.primary,.11):`rgba(${Me("palette-text-primaryChannel")} / 0.11)`),je(X.Slider,"primaryTrack",Ie(Br,X.primary.main,.62)),je(X.Slider,"secondaryTrack",Ie(Br,X.secondary.main,.62)),je(X.Slider,"errorTrack",Ie(Br,X.error.main,.62)),je(X.Slider,"infoTrack",Ie(Br,X.info.main,.62)),je(X.Slider,"successTrack",Ie(Br,X.success.main,.62)),je(X.Slider,"warningTrack",Ie(Br,X.warning.main,.62));const Le=Q?Ie(Lr,X.background.default,.6825):Wf(X.background.default,.8);je(X.SnackbarContent,"bg",Le),je(X.SnackbarContent,"color",ls(()=>Q?Zv.text.primary:X.getContrastText(Le))),je(X.SpeedDialAction,"fabHoverBg",Wf(X.background.paper,.15)),je(X.StepConnector,"border",Me("palette-grey-400")),je(X.StepContent,"border",Me("palette-grey-400")),je(X.Switch,"defaultColor",Me("palette-common-white")),je(X.Switch,"defaultDisabledColor",Me("palette-grey-100")),je(X.Switch,"primaryDisabledColor",Ie(Br,X.primary.main,.62)),je(X.Switch,"secondaryDisabledColor",Ie(Br,X.secondary.main,.62)),je(X.Switch,"errorDisabledColor",Ie(Br,X.error.main,.62)),je(X.Switch,"infoDisabledColor",Ie(Br,X.info.main,.62)),je(X.Switch,"successDisabledColor",Ie(Br,X.success.main,.62)),je(X.Switch,"warningDisabledColor",Ie(Br,X.warning.main,.62)),je(X.TableCell,"border",Ie(Br,Ie(Ml,X.divider,1),.88)),je(X.Tooltip,"bg",Ie(Ml,X.grey[700],.92))}if(X.mode==="dark"){je(X.Alert,"errorColor",Ie(Br,X.error.light,.6)),je(X.Alert,"infoColor",Ie(Br,X.info.light,.6)),je(X.Alert,"successColor",Ie(Br,X.success.light,.6)),je(X.Alert,"warningColor",Ie(Br,X.warning.light,.6)),je(X.Alert,"errorFilledBg",Me("palette-error-dark")),je(X.Alert,"infoFilledBg",Me("palette-info-dark")),je(X.Alert,"successFilledBg",Me("palette-success-dark")),je(X.Alert,"warningFilledBg",Me("palette-warning-dark")),je(X.Alert,"errorFilledColor",ls(()=>X.getContrastText(X.error.dark))),je(X.Alert,"infoFilledColor",ls(()=>X.getContrastText(X.info.dark))),je(X.Alert,"successFilledColor",ls(()=>X.getContrastText(X.success.dark))),je(X.Alert,"warningFilledColor",ls(()=>X.getContrastText(X.warning.dark))),je(X.Alert,"errorStandardBg",Ie(Lr,X.error.light,.9)),je(X.Alert,"infoStandardBg",Ie(Lr,X.info.light,.9)),je(X.Alert,"successStandardBg",Ie(Lr,X.success.light,.9)),je(X.Alert,"warningStandardBg",Ie(Lr,X.warning.light,.9)),je(X.Alert,"errorIconColor",Me("palette-error-main")),je(X.Alert,"infoIconColor",Me("palette-info-main")),je(X.Alert,"successIconColor",Me("palette-success-main")),je(X.Alert,"warningIconColor",Me("palette-warning-main")),je(X.AppBar,"defaultBg",Me("palette-grey-900")),je(X.AppBar,"darkBg",Me("palette-background-paper")),je(X.AppBar,"darkColor",Me("palette-text-primary")),je(X.Avatar,"defaultBg",Me("palette-grey-600")),je(X.Button,"inheritContainedBg",Me("palette-grey-800")),je(X.Button,"inheritContainedHoverBg",Me("palette-grey-700")),je(X.Chip,"defaultBorder",Me("palette-grey-700")),je(X.Chip,"defaultAvatarColor",Me("palette-grey-300")),je(X.Chip,"defaultIconColor",Me("palette-grey-300")),je(X.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),je(X.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),je(X.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),je(X.LinearProgress,"primaryBg",Ie(Lr,X.primary.main,.5)),je(X.LinearProgress,"secondaryBg",Ie(Lr,X.secondary.main,.5)),je(X.LinearProgress,"errorBg",Ie(Lr,X.error.main,.5)),je(X.LinearProgress,"infoBg",Ie(Lr,X.info.main,.5)),je(X.LinearProgress,"successBg",Ie(Lr,X.success.main,.5)),je(X.LinearProgress,"warningBg",Ie(Lr,X.warning.main,.5)),je(X.Skeleton,"bg",Q?Ie(Ml,X.text.primary,.13):`rgba(${Me("palette-text-primaryChannel")} / 0.13)`),je(X.Slider,"primaryTrack",Ie(Lr,X.primary.main,.5)),je(X.Slider,"secondaryTrack",Ie(Lr,X.secondary.main,.5)),je(X.Slider,"errorTrack",Ie(Lr,X.error.main,.5)),je(X.Slider,"infoTrack",Ie(Lr,X.info.main,.5)),je(X.Slider,"successTrack",Ie(Lr,X.success.main,.5)),je(X.Slider,"warningTrack",Ie(Lr,X.warning.main,.5));const Le=Q?Ie(Br,X.background.default,.985):Wf(X.background.default,.98);je(X.SnackbarContent,"bg",Le),je(X.SnackbarContent,"color",ls(()=>Q?Yk.text.primary:X.getContrastText(Le))),je(X.SpeedDialAction,"fabHoverBg",Wf(X.background.paper,.15)),je(X.StepConnector,"border",Me("palette-grey-600")),je(X.StepContent,"border",Me("palette-grey-600")),je(X.Switch,"defaultColor",Me("palette-grey-300")),je(X.Switch,"defaultDisabledColor",Me("palette-grey-600")),je(X.Switch,"primaryDisabledColor",Ie(Lr,X.primary.main,.55)),je(X.Switch,"secondaryDisabledColor",Ie(Lr,X.secondary.main,.55)),je(X.Switch,"errorDisabledColor",Ie(Lr,X.error.main,.55)),je(X.Switch,"infoDisabledColor",Ie(Lr,X.info.main,.55)),je(X.Switch,"successDisabledColor",Ie(Lr,X.success.main,.55)),je(X.Switch,"warningDisabledColor",Ie(Lr,X.warning.main,.55)),je(X.TableCell,"border",Ie(Lr,Ie(Ml,X.divider,1),.68)),je(X.Tooltip,"bg",Ie(Ml,X.grey[700],.92))}Os(X.background,"default"),Os(X.background,"paper"),Os(X.common,"background"),Os(X.common,"onBackground"),Os(X,"divider"),Object.keys(X).forEach(Le=>{const $e=X[Le];Le!=="tonalOffset"&&$e&&typeof $e=="object"&&($e.main&&je(X[Le],"mainChannel",Sh(Ch($e.main))),$e.light&&je(X[Le],"lightChannel",Sh(Ch($e.light))),$e.dark&&je(X[Le],"darkChannel",Sh(Ch($e.dark))),$e.contrastText&&je(X[Le],"contrastTextChannel",Sh(Ch($e.contrastText))),Le==="text"&&(Os(X[Le],"primary"),Os(X[Le],"secondary")),Le==="action"&&($e.active&&Os(X[Le],"active"),$e.selected&&Os(X[Le],"selected")))})}),de=t.reduce((De,X)=>qn(De,X),de);const _e={prefix:m,disableCssColorScheme:h,shouldSkipGeneratingVar:u,getSelector:H5(de),enableContrastVars:g},{vars:ge,generateThemeVars:Ae,generateStyleSheets:Re}=UR(de,_e);return de.vars=ge,Object.entries(de.colorSchemes[de.defaultColorScheme]).forEach(([De,X])=>{de[De]=X}),de.generateThemeVars=Ae,de.generateStyleSheets=Re,de.generateSpacing=function(){return Bk(B.spacing,zg(this))},de.getColorSchemeSelector=WR(I),de.spacing=de.generateSpacing(),de.shouldSkipGeneratingVar=u,de.unstable_sxConfig={...xp,...B==null?void 0:B.unstable_sxConfig},de.unstable_sx=function(X){return Ka({sx:X,theme:this})},de.toRuntimeSource=eT,de}function h2(e,t,o){e.colorSchemes&&o&&(e.colorSchemes[t]={...o!==!0&&o,palette:E0({...o===!0?{}:o.palette,mode:t})})}function Ug(e={},...t){const{palette:o,cssVariables:l=!1,colorSchemes:h=o?void 0:{light:!0},defaultColorScheme:m=o==null?void 0:o.mode,...g}=e,u=m||"light",I=h==null?void 0:h[u],M={...h,...o?{[u]:{...typeof I!="boolean"&&I,palette:o}}:void 0};if(l===!1){if(!("colorSchemes"in e))return Xv(e,...t);let B=o;"palette"in e||M[u]&&(M[u]!==!0?B=M[u].palette:u==="dark"&&(B={mode:"dark"}));const L=Xv({...e,palette:B},...t);return L.defaultColorScheme=u,L.colorSchemes=M,L.palette.mode==="light"&&(L.colorSchemes.light={...M.light!==!0&&M.light,palette:L.palette},h2(L,"dark",M.dark)),L.palette.mode==="dark"&&(L.colorSchemes.dark={...M.dark!==!0&&M.dark,palette:L.palette},h2(L,"light",M.light)),L}return!o&&!("light"in M)&&u==="light"&&(M.light=!0),K5({...g,colorSchemes:M,defaultColorScheme:u,...typeof l!="boolean"&&l},...t)}const P0=Ug();function tl(){const e=bp(P0);return e[_s]||e}function nT(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Ri=e=>nT(e)&&e!=="classes",ot=Vk({themeId:_s,defaultTheme:P0,rootShouldForwardProp:Ri});function Y5({theme:e,...t}){const o=_s in e?e[_s]:void 0;return G.jsx(Zk,{...t,themeId:o?_s:void 0,theme:o||e})}const Gf={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:J5}=$R({themeId:_s,theme:()=>Ug({cssVariables:!0}),colorSchemeStorageKey:Gf.colorSchemeStorageKey,modeStorageKey:Gf.modeStorageKey,defaultColorScheme:{light:Gf.defaultLightColorScheme,dark:Gf.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:Qk(e.palette,e.typography)};return t.unstable_sx=function(l){return Ka({sx:l,theme:this})},t}}),Q5=J5;function eD({theme:e,...t}){const o=ee.useMemo(()=>{if(typeof e=="function")return e;const l=_s in e?e[_s]:e;return"colorSchemes"in l?null:"vars"in l?e:{...e,vars:null}},[e]);return o?G.jsx(Y5,{theme:o,...t}):G.jsx(Q5,{theme:e,...t})}function tD(e){return G.jsx(Fk,{...e,defaultTheme:P0,themeId:_s})}function M0(e){return function(o){return G.jsx(tD,{styles:typeof e=="function"?l=>e({theme:l,...o}):e})}}function rD(){return Og}function Ht(e){return IR(e)}const Yv=typeof M0({})=="function",nD=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),iD=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),iT=(e,t=!1)=>{var m,g;const o={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([u,I])=>{var B,L;const M=e.getColorSchemeSelector(u);M.startsWith("@")?o[M]={":root":{colorScheme:(B=I.palette)==null?void 0:B.mode}}:o[M.replace(/\s*&/,"")]={colorScheme:(L=I.palette)==null?void 0:L.mode}});let l={html:nD(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...iD(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...o};const h=(g=(m=e.components)==null?void 0:m.MuiCssBaseline)==null?void 0:g.styleOverrides;return h&&(l=[l,h]),l},pm="mui-ecs",oD=e=>{const t=iT(e,!1),o=Array.isArray(t)?t[0]:t;return!e.vars&&o&&(o.html[`:root:has(${pm})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([l,h])=>{var g,u;const m=e.getColorSchemeSelector(l);m.startsWith("@")?o[m]={[`:root:not(:has(.${pm}))`]:{colorScheme:(g=h.palette)==null?void 0:g.mode}}:o[m.replace(/\s*&/,"")]={[`&:not(:has(.${pm}))`]:{colorScheme:(u=h.palette)==null?void 0:u.mode}}}),t},sD=M0(Yv?({theme:e,enableColorScheme:t})=>iT(e,t):({theme:e})=>oD(e));function aD(e){const t=Ht({props:e,name:"MuiCssBaseline"}),{children:o,enableColorScheme:l=!1}=t;return G.jsxs(ee.Fragment,{children:[Yv&&G.jsx(sD,{enableColorScheme:l}),!Yv&&!l&&G.jsx("span",{className:pm,style:{display:"none"}}),o]})}var oT={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(o,l){e.exports=l()})(EE,function(){var o={},l={};function h(g,u,I){if(l[g]=I,g==="index"){var M="var sharedModule = {}; ("+l.shared+")(sharedModule); ("+l.worker+")(sharedModule);",B={};return l.shared(B),l.index(o,B),typeof window<"u"&&o.setWorkerUrl(window.URL.createObjectURL(new Blob([M],{type:"text/javascript"}))),o}}h("shared",["exports"],function(g){function u(i,n,s,c){return new(s||(s=Promise))(function(f,v){function x(T){try{S(c.next(T))}catch(E){v(E)}}function b(T){try{S(c.throw(T))}catch(E){v(E)}}function S(T){var E;T.done?f(T.value):(E=T.value,E instanceof s?E:new s(function(z){z(E)})).then(x,b)}S((c=c.apply(i,n||[])).next())})}function I(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}typeof SuppressedError=="function"&&SuppressedError;var M=B;function B(i,n){this.x=i,this.y=n}B.prototype={clone:function(){return new B(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,n){return this.clone()._rotateAround(i,n)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var n=i.x-this.x,s=i.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult:function(i){var n=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=n,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var n=Math.cos(i),s=Math.sin(i),c=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=c,this},_rotateAround:function(i,n){var s=Math.cos(i),c=Math.sin(i),f=n.y+c*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-c*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},B.convert=function(i){return i instanceof B?i:Array.isArray(i)?new B(i[0],i[1]):i};var L=I(M),A=Z;function Z(i,n,s,c){this.cx=3*i,this.bx=3*(s-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=s,this.p2y=c}Z.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var s=i,c=0;c<8;c++){var f=this.sampleCurveX(s)-i;if(Math.abs(f)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,b=1;for(s=i,c=0;c<20&&(f=this.sampleCurveX(s),!(Math.abs(f-i)<n));c++)i>f?x=s:b=s,s=.5*(b-x)+x;return s},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var q=I(A);let re,le;function W(){return re==null&&(re=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),re}function j(){if(le==null&&(le=!1,W())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let c=0;c<5*5;c++){const f=4*c;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(c%5,Math.floor(c/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let c=0;c<5*5*4;c++)if(c%4!=3&&s[c]!==c){le=!0;break}}}return le||!1}function V(i,n,s,c){const f=new q(i,n,s,c);return v=>f.solve(v)}const Q=V(.25,.1,.25,1);function pe(i,n,s){return Math.min(s,Math.max(n,i))}function de(i,n,s){const c=s-n,f=((i-n)%c+c)%c+n;return f===n?s:f}function _e(i,...n){for(const s of n)for(const c in s)i[c]=s[c];return i}let ge=1;function Ae(i,n,s){const c={};for(const f in i)c[f]=n.call(this,i[f],f,i);return c}function Re(i,n,s){const c={};for(const f in i)n.call(this,i[f],f,i)&&(c[f]=i[f]);return c}function De(i){return Array.isArray(i)?i.map(De):typeof i=="object"&&i?Ae(i,De):i}const X={};function Me(i){X[i]||(typeof console<"u"&&console.warn(i),X[i]=!0)}function Ie(i,n,s){return(s.y-i.y)*(n.x-i.x)>(n.y-i.y)*(s.x-i.x)}function Le(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let $e=null;function Ke(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ee(i,n,s,c,f){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(i,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const b=x.startsWith("BGR"),S=new Uint8ClampedArray(c*f*4);if(yield v.copyTo(S,function(T,E,z,F,N){const H=4*Math.max(-E,0),K=(Math.max(0,z)-z)*F*4+H,oe=4*F,ce=Math.max(0,E),Te=Math.max(0,z);return{rect:{x:ce,y:Te,width:Math.min(T.width,E+F)-ce,height:Math.min(T.height,z+N)-Te},layout:[{offset:K,stride:oe}]}}(i,n,s,c,f)),b)for(let T=0;T<S.length;T+=4){const E=S[T];S[T]=S[T+2],S[T+2]=E}return S}finally{v.close()}})}let We,Ze;const Ge="AbortError";function Ct(){return new Error(Ge)}const Dt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function $t(i){return Dt.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const Ut="global-dispatcher";class Rt extends Error{constructor(n,s,c,f){super(`AJAXError: ${s} (${n}): ${c}`),this.status=n,this.statusText=s,this.url=c,this.body=f}}const mr=()=>Le(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Jt=function(i,n){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const c=$t(i.url);if(c)return c(i,n);if(Le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:Ut},n)}if(!(/^file:/.test(s=i.url)||/^file:/.test(mr())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(c,f){return u(this,void 0,void 0,function*(){const v=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:mr(),signal:f.signal});c.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const T=yield x.blob();throw new Rt(x.status,x.statusText,c.url,T)}let b;b=c.type==="arrayBuffer"||c.type==="image"?x.arrayBuffer():c.type==="json"?x.json():x.text();const S=yield b;if(f.signal.aborted)throw Ct();return{data:S,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(i,n);if(Le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:Ut},n)}var s;return function(c,f){return new Promise((v,x)=>{var b;const S=new XMLHttpRequest;S.open(c.method||"GET",c.url,!0),c.type!=="arrayBuffer"&&c.type!=="image"||(S.responseType="arraybuffer");for(const T in c.headers)S.setRequestHeader(T,c.headers[T]);c.type==="json"&&(S.responseType="text",!((b=c.headers)===null||b===void 0)&&b.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=c.credentials==="include",S.onerror=()=>{x(new Error(S.statusText))},S.onload=()=>{if(!f.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let T=S.response;if(c.type==="json")try{T=JSON.parse(S.response)}catch(E){return void x(E)}v({data:T,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const T=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});x(new Rt(S.status,S.statusText,c.url,T))}},f.signal.addEventListener("abort",()=>{S.abort(),x(Ct())}),S.send(c.body)})}(i,n)};function vt(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const n=new URL(i),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Kt(i,n,s){s[i]&&s[i].indexOf(n)!==-1||(s[i]=s[i]||[],s[i].push(n))}function Xt(i,n,s){if(s&&s[i]){const c=s[i].indexOf(n);c!==-1&&s[i].splice(c,1)}}class _r{constructor(n,s={}){_e(this,s),this.type=n}}class Nt extends _r{constructor(n,s={}){super("error",_e({error:n},s))}}class lr{on(n,s){return this._listeners=this._listeners||{},Kt(n,s,this._listeners),this}off(n,s){return Xt(n,s,this._listeners),Xt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Kt(n,s,this._oneTimeListeners),this):new Promise(c=>this.once(n,c))}fire(n,s){typeof n=="string"&&(n=new _r(n,s||{}));const c=n.type;if(this.listens(c)){n.target=this;const f=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const b of f)b.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const b of v)Xt(c,b,this._oneTimeListeners),b.call(this,n);const x=this._eventedParent;x&&(_e(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Nt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const $r=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function kr(i,n){const s={};for(const c in i)c!=="ref"&&(s[c]=i[c]);return $r.forEach(c=>{c in n&&(s[c]=n[c])}),s}function At(i,n){if(Array.isArray(i)){if(!Array.isArray(n)||i.length!==n.length)return!1;for(let s=0;s<i.length;s++)if(!At(i[s],n[s]))return!1;return!0}if(typeof i=="object"&&i!==null&&n!==null){if(typeof n!="object"||Object.keys(i).length!==Object.keys(n).length)return!1;for(const s in i)if(!At(i[s],n[s]))return!1;return!0}return i===n}function er(i,n){i.push(n)}function br(i,n,s){er(s,{command:"addSource",args:[i,n[i]]})}function xt(i,n,s){er(n,{command:"removeSource",args:[i]}),s[i]=!0}function _n(i,n,s,c){xt(i,s,c),br(i,n,s)}function Tr(i,n,s){let c;for(c in i[s])if(Object.prototype.hasOwnProperty.call(i[s],c)&&c!=="data"&&!At(i[s][c],n[s][c]))return!1;for(c in n[s])if(Object.prototype.hasOwnProperty.call(n[s],c)&&c!=="data"&&!At(i[s][c],n[s][c]))return!1;return!0}function un(i,n,s,c,f,v){i=i||{},n=n||{};for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&(At(i[x],n[x])||s.push({command:v,args:[c,x,n[x],f]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(i,x)&&(At(i[x],n[x])||s.push({command:v,args:[c,x,n[x],f]}))}function En(i){return i.id}function Bn(i,n){return i[n.id]=n,i}class Xe{constructor(n,s,c,f){this.message=(n?`${n}: `:"")+c,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function dn(i,...n){for(const s of n)for(const c in s)i[c]=s[c];return i}class cr extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class zt{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[c,f]of s)this.bindings[c]=f}concat(n){return new zt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Nr={kind:"null"},qe={kind:"number"},kt={kind:"string"},Pt={kind:"boolean"},Pn={kind:"color"},si={kind:"object"},Ft={kind:"value"},xi={kind:"collator"},Di={kind:"formatted"},Tt={kind:"padding"},ur={kind:"resolvedImage"},ne={kind:"variableAnchorOffsetCollection"};function O(i,n){return{kind:"array",itemType:i,N:n}}function $(i){if(i.kind==="array"){const n=$(i.itemType);return typeof i.N=="number"?`array<${n}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${n}>`}return i.kind}const Y=[Nr,qe,kt,Pt,Pn,Di,si,O(Ft),Tt,ur,ne];function se(i,n){if(n.kind==="error")return null;if(i.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!se(i.itemType,n.itemType))&&(typeof i.N!="number"||i.N===n.N))return null}else{if(i.kind===n.kind)return null;if(i.kind==="value"){for(const s of Y)if(!se(s,n))return null}}return`Expected ${$(i)} but found ${$(n)} instead.`}function ve(i,n){return n.some(s=>s.kind===i.kind)}function we(i,n){return n.some(s=>s==="null"?i===null:s==="array"?Array.isArray(i):s==="object"?i&&!Array.isArray(i)&&typeof i=="object":s===typeof i)}function ke(i,n){return i.kind==="array"&&n.kind==="array"?i.itemType.kind===n.itemType.kind&&typeof i.N=="number":i.kind===n.kind}const fe=.96422,Oe=.82521,Ue=4/29,Be=6/29,Qe=3*Be*Be,wt=Be*Be*Be,It=Math.PI/180,dr=180/Math.PI;function jt(i){return(i%=360)<0&&(i+=360),i}function hr([i,n,s,c]){let f,v;const x=hn((.2225045*(i=rr(i))+.7168786*(n=rr(n))+.0606169*(s=rr(s)))/1);i===n&&n===s?f=v=x:(f=hn((.4360747*i+.3850649*n+.1430804*s)/fe),v=hn((.0139322*i+.0971045*n+.7141733*s)/Oe));const b=116*x-16;return[b<0?0:b,500*(f-x),200*(x-v),c]}function rr(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function hn(i){return i>wt?Math.pow(i,1/3):i/Qe+Ue}function Xr([i,n,s,c]){let f=(i+16)/116,v=isNaN(n)?f:f+n/500,x=isNaN(s)?f:f-s/200;return f=1*Sr(f),v=fe*Sr(v),x=Oe*Sr(x),[Yt(3.1338561*v-1.6168667*f-.4906146*x),Yt(-.9787684*v+1.9161415*f+.033454*x),Yt(.0719453*v-.2289914*f+1.4052427*x),c]}function Yt(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function Sr(i){return i>Be?i*i*i:Qe*(i-Ue)}function Hr(i){return parseInt(i.padEnd(2,i),16)/255}function wn(i,n){return Mn(n?i/100:i,0,1)}function Mn(i,n,s){return Math.min(Math.max(n,i),s)}function Kn(i){return!i.some(Number.isNaN)}const Js={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Cr{constructor(n,s,c,f=1,v=!0){this.r=n,this.g=s,this.b=c,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,s,c,f]))}static parse(n){if(n instanceof Cr)return n;if(typeof n!="string")return;const s=function(c){if((c=c.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Js[c];if(f){const[x,b,S]=f;return[x/255,b/255,S/255,1]}if(c.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(c)){const x=c.length<6?1:2;let b=1;return[Hr(c.slice(b,b+=x)),Hr(c.slice(b,b+=x)),Hr(c.slice(b,b+=x)),Hr(c.slice(b,b+x)||"ff")]}if(c.startsWith("rgb")){const x=c.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,S,T,E,z,F,N,H,K,oe,ce,Te]=x,ye=[E||" ",N||" ",oe].join("");if(ye==="  "||ye==="  /"||ye===",,"||ye===",,,"){const Ce=[T,F,K].join(""),Fe=Ce==="%%%"?100:Ce===""?255:0;if(Fe){const He=[Mn(+S/Fe,0,1),Mn(+z/Fe,0,1),Mn(+H/Fe,0,1),ce?wn(+ce,Te):1];if(Kn(He))return He}}return}}const v=c.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,b,S,T,E,z,F,N,H]=v,K=[S||" ",E||" ",F].join("");if(K==="  "||K==="  /"||K===",,"||K===",,,"){const oe=[+b,Mn(+T,0,100),Mn(+z,0,100),N?wn(+N,H):1];if(Kn(oe))return function([ce,Te,ye,Ce]){function Fe(He){const ct=(He+ce/30)%12,Et=Te*Math.min(ye,1-ye);return ye-Et*Math.max(-1,Math.min(ct-3,9-ct,1))}return ce=jt(ce),Te/=100,ye/=100,[Fe(0),Fe(8),Fe(4),Ce]}(oe)}}}(n);return s?new Cr(...s,!1):void 0}get rgb(){const{r:n,g:s,b:c,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[n/v,s/v,c/v,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,c,f,v]=hr(n),x=Math.sqrt(c*c+f*f);return[Math.round(1e4*x)?jt(Math.atan2(f,c)*dr):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",hr(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,c,f]=this.rgb;return`rgba(${[n,s,c].map(v=>Math.round(255*v)).join(",")},${f})`}}Cr.black=new Cr(0,0,0,1),Cr.white=new Cr(1,1,1,1),Cr.transparent=new Cr(0,0,0,0),Cr.red=new Cr(1,0,0,1);class Xu{constructor(n,s,c){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ku{constructor(n,s,c,f,v){this.text=n,this.image=s,this.scale=c,this.fontStack=f,this.textColor=v}}class bi{constructor(n){this.sections=n}static fromString(n){return new bi([new Ku(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof bi?n:bi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class wi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof wi)return n;if(typeof n=="number")return new wi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new wi(n)}}toString(){return JSON.stringify(this.values)}}const Zg=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Li{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Li)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const c=n[s],f=n[s+1];if(typeof c!="string"||!Zg.has(c)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Li(n)}}toString(){return JSON.stringify(this.values)}}class Si{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Si({name:n,available:!1}):null}}function Qs(i,n,s,c){return typeof i=="number"&&i>=0&&i<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[i,n,s,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[i,n,s,c]:[i,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function bs(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Cr||i instanceof Xu||i instanceof bi||i instanceof wi||i instanceof Li||i instanceof Si)return!0;if(Array.isArray(i)){for(const n of i)if(!bs(n))return!1;return!0}if(typeof i=="object"){for(const n in i)if(!bs(i[n]))return!1;return!0}return!1}function pn(i){if(i===null)return Nr;if(typeof i=="string")return kt;if(typeof i=="boolean")return Pt;if(typeof i=="number")return qe;if(i instanceof Cr)return Pn;if(i instanceof Xu)return xi;if(i instanceof bi)return Di;if(i instanceof wi)return Tt;if(i instanceof Li)return ne;if(i instanceof Si)return ur;if(Array.isArray(i)){const n=i.length;let s;for(const c of i){const f=pn(c);if(s){if(s===f)continue;s=Ft;break}s=f}return O(s||Ft,n)}return si}function nl(i){const n=typeof i;return i===null?"":n==="string"||n==="number"||n==="boolean"?String(i):i instanceof Cr||i instanceof bi||i instanceof wi||i instanceof Li||i instanceof Si?i.toString():JSON.stringify(i)}class Xi{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!bs(n[1]))return s.error("invalid value");const c=n[1];let f=pn(c);const v=s.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new Xi(f,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class on{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const tc={string:kt,number:qe,boolean:Pt,object:si};class Ki{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let c,f=1;const v=n[0];if(v==="array"){let b,S;if(n.length>2){const T=n[1];if(typeof T!="string"||!(T in tc)||T==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=tc[T],f++}else b=Ft;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);S=n[2],f++}c=O(b,S)}else{if(!tc[v])throw new Error(`Types doesn't contain name = ${v}`);c=tc[v]}const x=[];for(;f<n.length;f++){const b=s.parse(n[f],f,Ft);if(!b)return null;x.push(b)}return new Ki(c,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const c=this.args[s].evaluate(n);if(!se(this.type,pn(c)))return c;if(s===this.args.length-1)throw new on(`Expected value to be of type ${$(this.type)}, but found ${$(pn(c))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Yu={"to-boolean":Pt,"to-color":Pn,"to-number":qe,"to-string":kt};class Yi{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const c=n[0];if(!Yu[c])throw new Error(`Can't parse ${c} as it is not part of the known types`);if((c==="to-boolean"||c==="to-string")&&n.length!==2)return s.error("Expected one argument.");const f=Yu[c],v=[];for(let x=1;x<n.length;x++){const b=s.parse(n[x],x,Ft);if(!b)return null;v.push(b)}return new Yi(f,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,c;for(const f of this.args){if(s=f.evaluate(n),c=null,s instanceof Cr)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(c=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Qs(s[0],s[1],s[2],s[3]),!c))return new Cr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new on(c||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const c of this.args){s=c.evaluate(n);const f=wi.parse(s);if(f)return f}throw new on(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const c of this.args){s=c.evaluate(n);const f=Li.parse(s);if(f)return f}throw new on(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const c of this.args){if(s=c.evaluate(n),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new on(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return bi.fromString(nl(this.args[0].evaluate(n)));case"resolvedImage":return Si.fromString(nl(this.args[0].evaluate(n)));default:return nl(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Xg=["Unknown","Point","LineString","Polygon"];class rc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Cr.parse(n)),s}}class ws{constructor(n,s,c=[],f,v=new zt,x=[]){this.registry=n,this.path=c,this.key=c.map(b=>`[${b}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=s}parse(n,s,c,f,v={}){return s?this.concat(s,c,f)._parse(n,v):this._parse(n,v)}_parse(n,s){function c(f,v,x){return x==="assert"?new Ki(v,[f]):x==="coerce"?new Yi(v,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const b=this.expectedType,S=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||S.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(b.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||S.kind!=="value"&&S.kind!=="array"){if(this.checkSubtype(b,S))return null}else x=c(x,b,s.typeAnnotation||"coerce");else x=c(x,b,s.typeAnnotation||"coerce");else x=c(x,b,s.typeAnnotation||"coerce");else x=c(x,b,s.typeAnnotation||"assert")}if(!(x instanceof Xi)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const b=new rc;try{x=new Xi(x.type,x.evaluate(b))}catch(S){return this.error(S.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,c){const f=typeof n=="number"?this.path.concat(n):this.path,v=c?this.scope.concat(c):this.scope;return new ws(this.registry,this._isConstant,f,s||null,v,this.errors)}error(n,...s){const c=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new cr(c,n))}checkSubtype(n,s){const c=se(n,s);return c&&this.error(c),c}}class Qo{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const c=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const b=s.parse(n[v+1],v+1);if(!b)return null;c.push([x,b])}const f=s.parse(n[n.length-1],n.length-1,s.expectedType,c);return f?new Qo(c,f):null}outputDefined(){return this.result.outputDefined()}}class vr{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const c=n[1];return s.scope.has(c)?new vr(c,s.scope.get(c)):s.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Ju{constructor(n,s,c){this.type=n,this.index=s,this.input=c}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,qe),f=s.parse(n[2],2,O(s.expectedType||Ft));return c&&f?new Ju(f.type.itemType,c,f):null}evaluate(n){const s=this.index.evaluate(n),c=this.input.evaluate(n);if(s<0)throw new on(`Array index out of bounds: ${s} < 0.`);if(s>=c.length)throw new on(`Array index out of bounds: ${s} > ${c.length-1}.`);if(s!==Math.floor(s))throw new on(`Array index must be an integer, but found ${s} instead.`);return c[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Qu{constructor(n,s){this.type=Pt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,Ft),f=s.parse(n[2],2,Ft);return c&&f?ve(c.type,[Pt,kt,qe,Nr,Ft])?new Qu(c,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(c.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!c)return!1;if(!we(s,["boolean","string","number","null"]))throw new on(`Expected first argument to be of type boolean, string, number or null, but found ${$(pn(s))} instead.`);if(!we(c,["string","array"]))throw new on(`Expected second argument to be of type array or string, but found ${$(pn(c))} instead.`);return c.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class ea{constructor(n,s,c){this.type=qe,this.needle=n,this.haystack=s,this.fromIndex=c}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,Ft),f=s.parse(n[2],2,Ft);if(!c||!f)return null;if(!ve(c.type,[Pt,kt,qe,Nr,Ft]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(c.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,qe);return v?new ea(c,f,v):null}return new ea(c,f)}evaluate(n){const s=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!we(s,["boolean","string","number","null"]))throw new on(`Expected first argument to be of type boolean, string, number or null, but found ${$(pn(s))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(n)),we(c,["string"])){const v=c.indexOf(s,f);return v===-1?-1:[...c.slice(0,v)].length}if(we(c,["array"]))return c.indexOf(s,f);throw new on(`Expected second argument to be of type array or string, but found ${$(pn(c))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class ed{constructor(n,s,c,f,v,x){this.inputType=n,this.type=s,this.input=c,this.cases=f,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let c,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v={},x=[];for(let T=2;T<n.length-1;T+=2){let E=n[T];const z=n[T+1];Array.isArray(E)||(E=[E]);const F=s.concat(T);if(E.length===0)return F.error("Expected at least one branch label.");for(const H of E){if(typeof H!="number"&&typeof H!="string")return F.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return F.error("Numeric branch labels must be integer values.");if(c){if(F.checkSubtype(c,pn(H)))return null}else c=pn(H);if(v[String(H)]!==void 0)return F.error("Branch labels must be unique.");v[String(H)]=x.length}const N=s.parse(z,T,f);if(!N)return null;f=f||N.type,x.push(N)}const b=s.parse(n[1],1,Ft);if(!b)return null;const S=s.parse(n[n.length-1],n.length-1,f);return S?b.type.kind!=="value"&&s.concat(1).checkSubtype(c,b.type)?null:new ed(c,f,b,v,x,S):null}evaluate(n){const s=this.input.evaluate(n);return(pn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class nc{constructor(n,s,c){this.type=n,this.branches=s,this.otherwise=c}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let c;s.expectedType&&s.expectedType.kind!=="value"&&(c=s.expectedType);const f=[];for(let x=1;x<n.length-1;x+=2){const b=s.parse(n[x],x,Pt);if(!b)return null;const S=s.parse(n[x+1],x+1,c);if(!S)return null;f.push([b,S]),c=c||S.type}const v=s.parse(n[n.length-1],n.length-1,c);if(!v)return null;if(!c)throw new Error("Can't infer output type");return new nc(c,f,v)}evaluate(n){for(const[s,c]of this.branches)if(s.evaluate(n))return c.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,c]of this.branches)n(s),n(c);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class il{constructor(n,s,c,f){this.type=n,this.input=s,this.beginIndex=c,this.endIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=s.parse(n[1],1,Ft),f=s.parse(n[2],2,qe);if(!c||!f)return null;if(!ve(c.type,[O(Ft),kt,Ft]))return s.error(`Expected first argument to be of type array or string, but found ${$(c.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,qe);return v?new il(c.type,c,f,v):null}return new il(c.type,c,f)}evaluate(n){const s=this.input.evaluate(n),c=this.beginIndex.evaluate(n);let f;if(this.endIndex&&(f=this.endIndex.evaluate(n)),we(s,["string"]))return[...s].slice(c,f).join("");if(we(s,["array"]))return s.slice(c,f);throw new on(`Expected first argument to be of type array or string, but found ${$(pn(s))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function ic(i,n){const s=i.length-1;let c,f,v=0,x=s,b=0;for(;v<=x;)if(b=Math.floor((v+x)/2),c=i[b],f=i[b+1],c<=n){if(b===s||n<f)return b;v=b+1}else{if(!(c>n))throw new on("Input is not a number.");x=b-1}return 0}class ta{constructor(n,s,c){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[f,v]of c)this.labels.push(f),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const c=s.parse(n[1],1,qe);if(!c)return null;const f=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const b=x===1?-1/0:n[x],S=n[x+1],T=x,E=x+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(f.length&&f[f.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const z=s.parse(S,E,v);if(!z)return null;v=v||z.type,f.push([b,z])}return new ta(v,c,f)}evaluate(n){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return c[0].evaluate(n);const v=s.length;return f>=s[v-1]?c[v-1].evaluate(n):c[ic(s,f)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function wp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Kg=Sp;function Sp(i,n,s,c){this.cx=3*i,this.bx=3*(s-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=s,this.p2y=c}Sp.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var s=i,c=0;c<8;c++){var f=this.sampleCurveX(s)-i;if(Math.abs(f)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,b=1;for(s=i,c=0;c<20&&(f=this.sampleCurveX(s),!(Math.abs(f-i)<n));c++)i>f?x=s:b=s,s=.5*(b-x)+x;return s},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var Yg=wp(Kg);function Ss(i,n,s){return i+s*(n-i)}function ol(i,n,s){return i.map((c,f)=>Ss(c,n[f],s))}const ai={number:Ss,color:function(i,n,s,c="rgb"){switch(c){case"rgb":{const[f,v,x,b]=ol(i.rgb,n.rgb,s);return new Cr(f,v,x,b,!1)}case"hcl":{const[f,v,x,b]=i.hcl,[S,T,E,z]=n.hcl;let F,N;if(isNaN(f)||isNaN(S))isNaN(f)?isNaN(S)?F=NaN:(F=S,x!==1&&x!==0||(N=T)):(F=f,E!==1&&E!==0||(N=v));else{let Te=S-f;S>f&&Te>180?Te-=360:S<f&&f-S>180&&(Te+=360),F=f+s*Te}const[H,K,oe,ce]=function([Te,ye,Ce,Fe]){return Te=isNaN(Te)?0:Te*It,Xr([Ce,Math.cos(Te)*ye,Math.sin(Te)*ye,Fe])}([F,N??Ss(v,T,s),Ss(x,E,s),Ss(b,z,s)]);return new Cr(H,K,oe,ce,!1)}case"lab":{const[f,v,x,b]=Xr(ol(i.lab,n.lab,s));return new Cr(f,v,x,b,!1)}}},array:ol,padding:function(i,n,s){return new wi(ol(i.values,n.values,s))},variableAnchorOffsetCollection:function(i,n,s){const c=i.values,f=n.values;if(c.length!==f.length)throw new on(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<c.length;x+=2){if(c[x]!==f[x])throw new on(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${c[x]}, to[${x}]: ${f[x]}`);v.push(c[x]);const[b,S]=c[x+1],[T,E]=f[x+1];v.push([Ss(b,T,s),Ss(S,E,s)])}return new Li(v)}};class li{constructor(n,s,c,f,v){this.type=n,this.operator=s,this.interpolation=c,this.input=f,this.labels=[],this.outputs=[];for(const[x,b]of v)this.labels.push(x),this.outputs.push(b)}static interpolationFactor(n,s,c,f){let v=0;if(n.name==="exponential")v=oc(s,n.base,c,f);else if(n.name==="linear")v=oc(s,1,c,f);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new Yg(x[0],x[1],x[2],x[3]).solve(oc(s,1,c,f))}return v}static parse(n,s){let[c,f,v,...x]=n;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const T=f[1];if(typeof T!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:T}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const T=f.slice(1);if(T.length!==4||T.some(E=>typeof E!="number"||E<0||E>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:T}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,qe),!v)return null;const b=[];let S=null;c==="interpolate-hcl"||c==="interpolate-lab"?S=Pn:s.expectedType&&s.expectedType.kind!=="value"&&(S=s.expectedType);for(let T=0;T<x.length;T+=2){const E=x[T],z=x[T+1],F=T+3,N=T+4;if(typeof E!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(b.length&&b[b.length-1][0]>=E)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);const H=s.parse(z,N,S);if(!H)return null;S=S||H.type,b.push([E,H])}return ke(S,qe)||ke(S,Pn)||ke(S,Tt)||ke(S,ne)||ke(S,O(qe))?new li(S,c,f,v,b):s.error(`Type ${$(S)} is not interpolatable.`)}evaluate(n){const s=this.labels,c=this.outputs;if(s.length===1)return c[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return c[0].evaluate(n);const v=s.length;if(f>=s[v-1])return c[v-1].evaluate(n);const x=ic(s,f),b=li.interpolationFactor(this.interpolation,f,s[x],s[x+1]),S=c[x].evaluate(n),T=c[x+1].evaluate(n);switch(this.operator){case"interpolate":return ai[this.type.kind](S,T,b);case"interpolate-hcl":return ai.color(S,T,b,"hcl");case"interpolate-lab":return ai.color(S,T,b,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function oc(i,n,s,c){const f=c-s,v=i-s;return f===0?0:n===1?v/f:(Math.pow(n,v)-1)/(Math.pow(n,f)-1)}class sc{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let c=null;const f=s.expectedType;f&&f.kind!=="value"&&(c=f);const v=[];for(const b of n.slice(1)){const S=s.parse(b,1+v.length,c,void 0,{typeAnnotation:"omit"});if(!S)return null;c=c||S.type,v.push(S)}if(!c)throw new Error("No output type");const x=f&&v.some(b=>se(f,b.type));return new sc(x?Ft:c,v)}evaluate(n){let s,c=null,f=0;for(const v of this.args)if(f++,c=v.evaluate(n),c&&c instanceof Si&&!c.available&&(s||(s=c.name),c=null,f===this.args.length&&(c=s)),c!==null)break;return c}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function ac(i,n){return i==="=="||i==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Cp(i,n,s,c){return c.compare(n,s)===0}function ra(i,n,s){const c=i!=="=="&&i!=="!=";return class sT{constructor(v,x,b){this.type=Pt,this.lhs=v,this.rhs=x,this.collator=b,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const b=v[0];let S=x.parse(v[1],1,Ft);if(!S)return null;if(!ac(b,S.type))return x.concat(1).error(`"${b}" comparisons are not supported for type '${$(S.type)}'.`);let T=x.parse(v[2],2,Ft);if(!T)return null;if(!ac(b,T.type))return x.concat(2).error(`"${b}" comparisons are not supported for type '${$(T.type)}'.`);if(S.type.kind!==T.type.kind&&S.type.kind!=="value"&&T.type.kind!=="value")return x.error(`Cannot compare types '${$(S.type)}' and '${$(T.type)}'.`);c&&(S.type.kind==="value"&&T.type.kind!=="value"?S=new Ki(T.type,[S]):S.type.kind!=="value"&&T.type.kind==="value"&&(T=new Ki(S.type,[T])));let E=null;if(v.length===4){if(S.type.kind!=="string"&&T.type.kind!=="string"&&S.type.kind!=="value"&&T.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(E=x.parse(v[3],3,xi),!E)return null}return new sT(S,T,E)}evaluate(v){const x=this.lhs.evaluate(v),b=this.rhs.evaluate(v);if(c&&this.hasUntypedArgument){const S=pn(x),T=pn(b);if(S.kind!==T.kind||S.kind!=="string"&&S.kind!=="number")throw new on(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${T.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const S=pn(x),T=pn(b);if(S.kind!=="string"||T.kind!=="string")return n(v,x,b)}return this.collator?s(v,x,b,this.collator.evaluate(v)):n(v,x,b)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Jg=ra("==",function(i,n,s){return n===s},Cp),kp=ra("!=",function(i,n,s){return n!==s},function(i,n,s,c){return!Cp(0,n,s,c)}),Tp=ra("<",function(i,n,s){return n<s},function(i,n,s,c){return c.compare(n,s)<0}),Qg=ra(">",function(i,n,s){return n>s},function(i,n,s,c){return c.compare(n,s)>0}),ey=ra("<=",function(i,n,s){return n<=s},function(i,n,s,c){return c.compare(n,s)<=0}),Ip=ra(">=",function(i,n,s){return n>=s},function(i,n,s,c){return c.compare(n,s)>=0});class sl{constructor(n,s,c){this.type=xi,this.locale=c,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const c=n[1];if(typeof c!="object"||Array.isArray(c))return s.error("Collator options argument must be an object.");const f=s.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,Pt);if(!f)return null;const v=s.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,Pt);if(!v)return null;let x=null;return c.locale&&(x=s.parse(c.locale,1,kt),!x)?null:new sl(f,v,x)}evaluate(n){return new Xu(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class td{constructor(n,s,c,f,v){this.type=kt,this.number=n,this.locale=s,this.currency=c,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const c=s.parse(n[1],1,qe);if(!c)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=s.parse(f.locale,1,kt),!v))return null;let x=null;if(f.currency&&(x=s.parse(f.currency,1,kt),!x))return null;let b=null;if(f["min-fraction-digits"]&&(b=s.parse(f["min-fraction-digits"],1,qe),!b))return null;let S=null;return f["max-fraction-digits"]&&(S=s.parse(f["max-fraction-digits"],1,qe),!S)?null:new td(c,v,x,b,S)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class lc{constructor(n){this.type=Di,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const c=n[1];if(!Array.isArray(c)&&typeof c=="object")return s.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=n.length-1;++x){const b=n[x];if(v&&typeof b=="object"&&!Array.isArray(b)){v=!1;let S=null;if(b["font-scale"]&&(S=s.parse(b["font-scale"],1,qe),!S))return null;let T=null;if(b["text-font"]&&(T=s.parse(b["text-font"],1,O(kt)),!T))return null;let E=null;if(b["text-color"]&&(E=s.parse(b["text-color"],1,Pn),!E))return null;const z=f[f.length-1];z.scale=S,z.font=T,z.textColor=E}else{const S=s.parse(n[x],1,Ft);if(!S)return null;const T=S.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:S,scale:null,font:null,textColor:null})}}return new lc(f)}evaluate(n){return new bi(this.sections.map(s=>{const c=s.content.evaluate(n);return pn(c)===ur?new Ku("",c,null,null,null):new Ku(nl(c),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class rd{constructor(n){this.type=ur,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const c=s.parse(n[1],1,kt);return c?new rd(c):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),c=Si.fromString(s);return c&&n.availableImages&&(c.available=n.availableImages.indexOf(s)>-1),c}eachChild(n){n(this.input)}outputDefined(){return!1}}class nd{constructor(n){this.type=qe,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const c=s.parse(n[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${$(c.type)} instead.`):new nd(c):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new on(`Expected value to be of type string or array, but found ${$(pn(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const yo=8192;function ty(i,n){const s=(180+i[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(s*f*yo),Math.round(c*f*yo)]}function id(i,n){const s=Math.pow(2,n.z);return[(f=(i[0]/yo+n.x)/s,360*f-180),(c=(i[1]/yo+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90)];var c,f}function Cs(i,n){i[0]=Math.min(i[0],n[0]),i[1]=Math.min(i[1],n[1]),i[2]=Math.max(i[2],n[0]),i[3]=Math.max(i[3],n[1])}function es(i,n){return!(i[0]<=n[0]||i[2]>=n[2]||i[1]<=n[1]||i[3]>=n[3])}function xr(i,n,s){const c=i[0]-n[0],f=i[1]-n[1],v=i[0]-s[0],x=i[1]-s[1];return c*x-v*f==0&&c*v<=0&&f*x<=0}function cc(i,n,s,c){return(f=[c[0]-s[0],c[1]-s[1]])[0]*(v=[n[0]-i[0],n[1]-i[1]])[1]-f[1]*v[0]!=0&&!(!Pp(i,n,s,c)||!Pp(s,c,i,n));var f,v}function ry(i,n,s){for(const c of s)for(let f=0;f<c.length-1;++f)if(cc(i,n,c[f],c[f+1]))return!0;return!1}function na(i,n,s=!1){let c=!1;for(const b of n)for(let S=0;S<b.length-1;S++){if(xr(i,b[S],b[S+1]))return s;(v=b[S])[1]>(f=i)[1]!=(x=b[S+1])[1]>f[1]&&f[0]<(x[0]-v[0])*(f[1]-v[1])/(x[1]-v[1])+v[0]&&(c=!c)}var f,v,x;return c}function ny(i,n){for(const s of n)if(na(i,s))return!0;return!1}function Ep(i,n){for(const s of i)if(!na(s,n))return!1;for(let s=0;s<i.length-1;++s)if(ry(i[s],i[s+1],n))return!1;return!0}function iy(i,n){for(const s of n)if(Ep(i,s))return!0;return!1}function Pp(i,n,s,c){const f=c[0]-s[0],v=c[1]-s[1],x=(i[0]-s[0])*v-f*(i[1]-s[1]),b=(n[0]-s[0])*v-f*(n[1]-s[1]);return x>0&&b<0||x<0&&b>0}function od(i,n,s){const c=[];for(let f=0;f<i.length;f++){const v=[];for(let x=0;x<i[f].length;x++){const b=ty(i[f][x],s);Cs(n,b),v.push(b)}c.push(v)}return c}function Mp(i,n,s){const c=[];for(let f=0;f<i.length;f++){const v=od(i[f],n,s);c.push(v)}return c}function Ap(i,n,s,c){if(i[0]<s[0]||i[0]>s[2]){const f=.5*c;let v=i[0]-s[0]>f?-c:s[0]-i[0]>f?c:0;v===0&&(v=i[0]-s[2]>f?-c:s[2]-i[0]>f?c:0),i[0]+=v}Cs(n,i)}function zp(i,n,s,c){const f=Math.pow(2,c.z)*yo,v=[c.x*yo,c.y*yo],x=[];for(const b of i)for(const S of b){const T=[S.x+v[0],S.y+v[1]];Ap(T,n,s,f),x.push(T)}return x}function Rp(i,n,s,c){const f=Math.pow(2,c.z)*yo,v=[c.x*yo,c.y*yo],x=[];for(const S of i){const T=[];for(const E of S){const z=[E.x+v[0],E.y+v[1]];Cs(n,z),T.push(z)}x.push(T)}if(n[2]-n[0]<=f/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const S of x)for(const T of S)Ap(T,n,s,f)}var b;return x}class ks{constructor(n,s){this.type=Pt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(bs(n[1])){const c=n[1];if(c.type==="FeatureCollection"){const f=[];for(const v of c.features){const{type:x,coordinates:b}=v.geometry;x==="Polygon"&&f.push(b),x==="MultiPolygon"&&f.push(...b)}if(f.length)return new ks(c,{type:"MultiPolygon",coordinates:f})}else if(c.type==="Feature"){const f=c.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new ks(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new ks(c,c)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,c){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(c.type==="Polygon"){const b=od(c.coordinates,v,x),S=zp(s.geometry(),f,v,x);if(!es(f,v))return!1;for(const T of S)if(!na(T,b))return!1}if(c.type==="MultiPolygon"){const b=Mp(c.coordinates,v,x),S=zp(s.geometry(),f,v,x);if(!es(f,v))return!1;for(const T of S)if(!ny(T,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,c){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(c.type==="Polygon"){const b=od(c.coordinates,v,x),S=Rp(s.geometry(),f,v,x);if(!es(f,v))return!1;for(const T of S)if(!Ep(T,b))return!1}if(c.type==="MultiPolygon"){const b=Mp(c.coordinates,v,x),S=Rp(s.geometry(),f,v,x);if(!es(f,v))return!1;for(const T of S)if(!iy(T,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Dp=class{constructor(i=[],n=(s,c)=>s<c?-1:s>c?1:0){if(this.data=i,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:n,compare:s}=this,c=n[i];for(;i>0;){const f=i-1>>1,v=n[f];if(s(c,v)>=0)break;n[i]=v,i=f}n[i]=c}_down(i){const{data:n,compare:s}=this,c=this.length>>1,f=n[i];for(;i<c;){let v=1+(i<<1);const x=v+1;if(x<this.length&&s(n[x],n[v])<0&&(v=x),s(n[v],f)>=0)break;n[i]=n[v],i=v}n[i]=f}};function oy(i,n,s,c,f){Lp(i,n,s,c||i.length-1,f||sy)}function Lp(i,n,s,c,f){for(;c>s;){if(c-s>600){var v=c-s+1,x=n-s+1,b=Math.log(v),S=.5*Math.exp(2*b/3),T=.5*Math.sqrt(b*S*(v-S)/v)*(x-v/2<0?-1:1);Lp(i,n,Math.max(s,Math.floor(n-x*S/v+T)),Math.min(c,Math.floor(n+(v-x)*S/v+T)),f)}var E=i[n],z=s,F=c;for(al(i,s,n),f(i[c],E)>0&&al(i,s,c);z<F;){for(al(i,z,F),z++,F--;f(i[z],E)<0;)z++;for(;f(i[F],E)>0;)F--}f(i[s],E)===0?al(i,s,F):al(i,++F,c),F<=n&&(s=F+1),n<=F&&(c=F-1)}}function al(i,n,s){var c=i[n];i[n]=i[s],i[s]=c}function sy(i,n){return i<n?-1:i>n?1:0}function uc(i,n){if(i.length<=1)return[i];const s=[];let c,f;for(const v of i){const x=ly(v);x!==0&&(v.area=Math.abs(x),f===void 0&&(f=x<0),f===x<0?(c&&s.push(c),c=[v]):c.push(v))}if(c&&s.push(c),n>1)for(let v=0;v<s.length;v++)s[v].length<=n||(oy(s[v],n,1,s[v].length-1,ay),s[v]=s[v].slice(0,n));return s}function ay(i,n){return n.area-i.area}function ly(i){let n=0;for(let s,c,f=0,v=i.length,x=v-1;f<v;x=f++)s=i[f],c=i[x],n+=(c.x-s.x)*(s.y+c.y);return n}const Bp=1/298.257223563,Fp=Bp*(2-Bp),Op=Math.PI/180;class sd{constructor(n){const s=6378.137*Op*1e3,c=Math.cos(n*Op),f=1/(1-Fp*(1-c*c)),v=Math.sqrt(f);this.kx=s*v*c,this.ky=s*v*f*(1-Fp)}distance(n,s){const c=this.wrap(n[0]-s[0])*this.kx,f=(n[1]-s[1])*this.ky;return Math.sqrt(c*c+f*f)}pointOnLine(n,s){let c,f,v,x,b=1/0;for(let S=0;S<n.length-1;S++){let T=n[S][0],E=n[S][1],z=this.wrap(n[S+1][0]-T)*this.kx,F=(n[S+1][1]-E)*this.ky,N=0;z===0&&F===0||(N=(this.wrap(s[0]-T)*this.kx*z+(s[1]-E)*this.ky*F)/(z*z+F*F),N>1?(T=n[S+1][0],E=n[S+1][1]):N>0&&(T+=z/this.kx*N,E+=F/this.ky*N)),z=this.wrap(s[0]-T)*this.kx,F=(s[1]-E)*this.ky;const H=z*z+F*F;H<b&&(b=H,c=T,f=E,v=S,x=N)}return{point:[c,f],index:v,t:Math.max(0,Math.min(1,x))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function $p(i,n){return n[0]-i[0]}function dc(i){return i[1]-i[0]+1}function Lo(i,n){return i[1]>=i[0]&&i[1]<n}function ad(i,n){if(i[0]>i[1])return[null,null];const s=dc(i);if(n){if(s===2)return[i,null];const f=Math.floor(s/2);return[[i[0],i[0]+f],[i[0]+f,i[1]]]}if(s===1)return[i,null];const c=Math.floor(s/2)-1;return[[i[0],i[0]+c],[i[0]+c+1,i[1]]]}function ld(i,n){if(!Lo(n,i.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let c=n[0];c<=n[1];++c)Cs(s,i[c]);return s}function cd(i){const n=[1/0,1/0,-1/0,-1/0];for(const s of i)for(const c of s)Cs(n,c);return n}function hc(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function ud(i,n,s){if(!hc(i)||!hc(n))return NaN;let c=0,f=0;return i[2]<n[0]&&(c=n[0]-i[2]),i[0]>n[2]&&(c=i[0]-n[2]),i[1]>n[3]&&(f=i[1]-n[3]),i[3]<n[1]&&(f=n[1]-i[3]),s.distance([0,0],[c,f])}function Ts(i,n,s){const c=s.pointOnLine(n,i);return s.distance(i,c.point)}function dd(i,n,s,c,f){const v=Math.min(Ts(i,[s,c],f),Ts(n,[s,c],f)),x=Math.min(Ts(s,[i,n],f),Ts(c,[i,n],f));return Math.min(v,x)}function cy(i,n,s,c,f){if(!Lo(n,i.length)||!Lo(c,s.length))return 1/0;let v=1/0;for(let x=n[0];x<n[1];++x){const b=i[x],S=i[x+1];for(let T=c[0];T<c[1];++T){const E=s[T],z=s[T+1];if(cc(b,S,E,z))return 0;v=Math.min(v,dd(b,S,E,z,f))}}return v}function Qr(i,n,s,c,f){if(!Lo(n,i.length)||!Lo(c,s.length))return NaN;let v=1/0;for(let x=n[0];x<=n[1];++x)for(let b=c[0];b<=c[1];++b)if(v=Math.min(v,f.distance(i[x],s[b])),v===0)return v;return v}function uy(i,n,s){if(na(i,n,!0))return 0;let c=1/0;for(const f of n){const v=f[0],x=f[f.length-1];if(v!==x&&(c=Math.min(c,Ts(i,[x,v],s)),c===0))return c;const b=s.pointOnLine(f,i);if(c=Math.min(c,s.distance(i,b.point)),c===0)return c}return c}function Qt(i,n,s,c){if(!Lo(n,i.length))return NaN;for(let v=n[0];v<=n[1];++v)if(na(i[v],s,!0))return 0;let f=1/0;for(let v=n[0];v<n[1];++v){const x=i[v],b=i[v+1];for(const S of s)for(let T=0,E=S.length,z=E-1;T<E;z=T++){const F=S[z],N=S[T];if(cc(x,b,F,N))return 0;f=Math.min(f,dd(x,b,F,N,c))}}return f}function pc(i,n){for(const s of i)for(const c of s)if(na(c,n,!0))return!0;return!1}function Rr(i,n,s,c=1/0){const f=cd(i),v=cd(n);if(c!==1/0&&ud(f,v,s)>=c)return c;if(es(f,v)){if(pc(i,n))return 0}else if(pc(n,i))return 0;let x=1/0;for(const b of i)for(let S=0,T=b.length,E=T-1;S<T;E=S++){const z=b[E],F=b[S];for(const N of n)for(let H=0,K=N.length,oe=K-1;H<K;oe=H++){const ce=N[oe],Te=N[H];if(cc(z,F,ce,Te))return 0;x=Math.min(x,dd(z,F,ce,Te,s))}}return x}function Ir(i,n,s,c,f,v){if(!v)return;const x=ud(ld(c,v),f,s);x<n&&i.push([x,v,[0,0]])}function Is(i,n,s,c,f,v,x){if(!v||!x)return;const b=ud(ld(c,v),ld(f,x),s);b<n&&i.push([b,v,x])}function ll(i,n,s,c,f=1/0){let v=Math.min(c.distance(i[0],s[0][0]),f);if(v===0)return v;const x=new Dp([[0,[0,i.length-1],[0,0]]],$p),b=cd(s);for(;x.length>0;){const S=x.pop();if(S[0]>=v)continue;const T=S[1],E=n?50:100;if(dc(T)<=E){if(!Lo(T,i.length))return NaN;if(n){const z=Qt(i,T,s,c);if(isNaN(z)||z===0)return z;v=Math.min(v,z)}else for(let z=T[0];z<=T[1];++z){const F=uy(i[z],s,c);if(v=Math.min(v,F),v===0)return 0}}else{const z=ad(T,n);Ir(x,v,c,i,b,z[0]),Ir(x,v,c,i,b,z[1])}}return v}function cl(i,n,s,c,f,v=1/0){let x=Math.min(v,f.distance(i[0],s[0]));if(x===0)return x;const b=new Dp([[0,[0,i.length-1],[0,s.length-1]]],$p);for(;b.length>0;){const S=b.pop();if(S[0]>=x)continue;const T=S[1],E=S[2],z=n?50:100,F=c?50:100;if(dc(T)<=z&&dc(E)<=F){if(!Lo(T,i.length)&&Lo(E,s.length))return NaN;let N;if(n&&c)N=cy(i,T,s,E,f),x=Math.min(x,N);else if(n&&!c){const H=i.slice(T[0],T[1]+1);for(let K=E[0];K<=E[1];++K)if(N=Ts(s[K],H,f),x=Math.min(x,N),x===0)return x}else if(!n&&c){const H=s.slice(E[0],E[1]+1);for(let K=T[0];K<=T[1];++K)if(N=Ts(i[K],H,f),x=Math.min(x,N),x===0)return x}else N=Qr(i,T,s,E,f),x=Math.min(x,N)}else{const N=ad(T,n),H=ad(E,c);Is(b,x,f,i,s,N[0],H[0]),Is(b,x,f,i,s,N[0],H[1]),Is(b,x,f,i,s,N[1],H[0]),Is(b,x,f,i,s,N[1],H[1])}}return x}function hd(i){return i.type==="MultiPolygon"?i.coordinates.map(n=>({type:"Polygon",coordinates:n})):i.type==="MultiLineString"?i.coordinates.map(n=>({type:"LineString",coordinates:n})):i.type==="MultiPoint"?i.coordinates.map(n=>({type:"Point",coordinates:n})):[i]}class Es{constructor(n,s){this.type=qe,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(bs(n[1])){const c=n[1];if(c.type==="FeatureCollection")return new Es(c,c.features.map(f=>hd(f.geometry)).flat());if(c.type==="Feature")return new Es(c,hd(c.geometry));if("type"in c&&"coordinates"in c)return new Es(c,hd(c))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,c){const f=s.geometry(),v=f.flat().map(S=>id([S.x,S.y],s.canonical));if(f.length===0)return NaN;const x=new sd(v[0][1]);let b=1/0;for(const S of c){switch(S.type){case"Point":b=Math.min(b,cl(v,!1,[S.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,cl(v,!1,S.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,ll(v,!1,S.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,c){const f=s.geometry(),v=f.flat().map(S=>id([S.x,S.y],s.canonical));if(f.length===0)return NaN;const x=new sd(v[0][1]);let b=1/0;for(const S of c){switch(S.type){case"Point":b=Math.min(b,cl(v,!0,[S.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,cl(v,!0,S.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,ll(v,!0,S.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,c){const f=s.geometry();if(f.length===0||f[0].length===0)return NaN;const v=uc(f,0).map(S=>S.map(T=>T.map(E=>id([E.x,E.y],s.canonical)))),x=new sd(v[0][0][0][1]);let b=1/0;for(const S of c)for(const T of v){switch(S.type){case"Point":b=Math.min(b,ll([S.coordinates],!1,T,x,b));break;case"LineString":b=Math.min(b,ll(S.coordinates,!0,T,x,b));break;case"Polygon":b=Math.min(b,Rr(T,S.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ia={"==":Jg,"!=":kp,">":Qg,"<":Tp,">=":Ip,"<=":ey,array:Ki,at:Ju,boolean:Ki,case:nc,coalesce:sc,collator:sl,format:lc,image:rd,in:Qu,"index-of":ea,interpolate:li,"interpolate-hcl":li,"interpolate-lab":li,length:nd,let:Qo,literal:Xi,match:ed,number:Ki,"number-format":td,object:Ki,slice:il,step:ta,string:Ki,"to-boolean":Yi,"to-color":Yi,"to-number":Yi,"to-string":Yi,var:vr,within:ks,distance:Es};class Bi{constructor(n,s,c,f){this.name=n,this.type=s,this._evaluate=c,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const c=n[0],f=Bi.definitions[c];if(!f)return s.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,b=x.filter(([T])=>!Array.isArray(T)||T.length===n.length-1);let S=null;for(const[T,E]of b){S=new ws(s.registry,ul,s.path,null,s.scope);const z=[];let F=!1;for(let N=1;N<n.length;N++){const H=n[N],K=Array.isArray(T)?T[N-1]:T.type,oe=S.parse(H,1+z.length,K);if(!oe){F=!0;break}z.push(oe)}if(!F)if(Array.isArray(T)&&T.length!==z.length)S.error(`Expected ${T.length} arguments, but found ${z.length} instead.`);else{for(let N=0;N<z.length;N++){const H=Array.isArray(T)?T[N]:T.type,K=z[N];S.concat(N+1).checkSubtype(H,K.type)}if(S.errors.length===0)return new Bi(c,v,E,z)}}if(b.length===1)s.errors.push(...S.errors);else{const T=(b.length?b:x).map(([z])=>{return F=z,Array.isArray(F)?`(${F.map($).join(", ")})`:`(${$(F.type)}...)`;var F}).join(" | "),E=[];for(let z=1;z<n.length;z++){const F=s.parse(n[z],1+E.length);if(!F)return null;E.push($(F.type))}s.error(`Expected arguments of type ${T}, but found (${E.join(", ")}) instead.`)}return null}static register(n,s){Bi.definitions=s;for(const c in s)n[c]=Bi}}function pd(i,[n,s,c,f]){n=n.evaluate(i),s=s.evaluate(i),c=c.evaluate(i);const v=f?f.evaluate(i):1,x=Qs(n,s,c,v);if(x)throw new on(x);return new Cr(n/255,s/255,c/255,v,!1)}function fd(i,n){return i in n}function md(i,n){const s=n[i];return s===void 0?null:s}function Ps(i){return{type:i}}function ul(i){if(i instanceof vr)return ul(i.boundExpression);if(i instanceof Bi&&i.name==="error"||i instanceof sl||i instanceof ks||i instanceof Es)return!1;const n=i instanceof Yi||i instanceof Ki;let s=!0;return i.eachChild(c=>{s=n?s&&ul(c):s&&c instanceof Xi}),!!s&&dl(i)&&hl(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function dl(i){if(i instanceof Bi&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof ks||i instanceof Es)return!1;let n=!0;return i.eachChild(s=>{n&&!dl(s)&&(n=!1)}),n}function oa(i){if(i instanceof Bi&&i.name==="feature-state")return!1;let n=!0;return i.eachChild(s=>{n&&!oa(s)&&(n=!1)}),n}function hl(i,n){if(i instanceof Bi&&n.indexOf(i.name)>=0)return!1;let s=!0;return i.eachChild(c=>{s&&!hl(c,n)&&(s=!1)}),s}function fc(i){return{result:"success",value:i}}function sa(i){return{result:"error",value:i}}function aa(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Np(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function gd(i){return!!i.expression&&i.expression.interpolated}function gr(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function mc(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function dy(i){return i}function jp(i,n){const s=n.type==="color",c=i.stops&&typeof i.stops[0][0]=="object",f=c||!(c||i.property!==void 0),v=i.type||(gd(n)?"exponential":"interval");if(s||n.type==="padding"){const E=s?Cr.parse:wi.parse;(i=dn({},i)).stops&&(i.stops=i.stops.map(z=>[z[0],E(z[1])])),i.default=E(i.default?i.default:n.default)}if(i.colorSpace&&(x=i.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var x;let b,S,T;if(v==="exponential")b=Up;else if(v==="interval")b=gc;else if(v==="categorical"){b=Vp,S=Object.create(null);for(const E of i.stops)S[E[0]]=E[1];T=typeof i.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);b=Wp}if(c){const E={},z=[];for(let H=0;H<i.stops.length;H++){const K=i.stops[H],oe=K[0].zoom;E[oe]===void 0&&(E[oe]={zoom:oe,type:i.type,property:i.property,default:i.default,stops:[]},z.push(oe)),E[oe].stops.push([K[0].value,K[1]])}const F=[];for(const H of z)F.push([E[H].zoom,jp(E[H],n)]);const N={name:"linear"};return{kind:"composite",interpolationType:N,interpolationFactor:li.interpolationFactor.bind(void 0,N),zoomStops:F.map(H=>H[0]),evaluate:({zoom:H},K)=>Up({stops:F,base:i.base},n,H).evaluate(H,K)}}if(f){const E=v==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:li.interpolationFactor.bind(void 0,E),zoomStops:i.stops.map(z=>z[0]),evaluate:({zoom:z})=>b(i,n,z,S,T)}}return{kind:"source",evaluate(E,z){const F=z&&z.properties?z.properties[i.property]:void 0;return F===void 0?la(i.default,n.default):b(i,n,F,S,T)}}}function la(i,n,s){return i!==void 0?i:n!==void 0?n:s!==void 0?s:void 0}function Vp(i,n,s,c,f){return la(typeof s===f?c[s]:void 0,i.default,n.default)}function gc(i,n,s){if(gr(s)!=="number")return la(i.default,n.default);const c=i.stops.length;if(c===1||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[c-1][0])return i.stops[c-1][1];const f=ic(i.stops.map(v=>v[0]),s);return i.stops[f][1]}function Up(i,n,s){const c=i.base!==void 0?i.base:1;if(gr(s)!=="number")return la(i.default,n.default);const f=i.stops.length;if(f===1||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[f-1][0])return i.stops[f-1][1];const v=ic(i.stops.map(E=>E[0]),s),x=function(E,z,F,N){const H=N-F,K=E-F;return H===0?0:z===1?K/H:(Math.pow(z,K)-1)/(Math.pow(z,H)-1)}(s,c,i.stops[v][0],i.stops[v+1][0]),b=i.stops[v][1],S=i.stops[v+1][1],T=ai[n.type]||dy;return typeof b.evaluate=="function"?{evaluate(...E){const z=b.evaluate.apply(void 0,E),F=S.evaluate.apply(void 0,E);if(z!==void 0&&F!==void 0)return T(z,F,x,i.colorSpace)}}:T(b,S,x,i.colorSpace)}function Wp(i,n,s){switch(n.type){case"color":s=Cr.parse(s);break;case"formatted":s=bi.fromString(s.toString());break;case"resolvedImage":s=Si.fromString(s.toString());break;case"padding":s=wi.parse(s);break;default:gr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return la(s,i.default,n.default)}Bi.register(ia,{error:[{kind:"error"},[kt],(i,[n])=>{throw new on(n.evaluate(i))}],typeof:[kt,[Ft],(i,[n])=>$(pn(n.evaluate(i)))],"to-rgba":[O(qe,4),[Pn],(i,[n])=>{const[s,c,f,v]=n.evaluate(i).rgb;return[255*s,255*c,255*f,v]}],rgb:[Pn,[qe,qe,qe],pd],rgba:[Pn,[qe,qe,qe,qe],pd],has:{type:Pt,overloads:[[[kt],(i,[n])=>fd(n.evaluate(i),i.properties())],[[kt,si],(i,[n,s])=>fd(n.evaluate(i),s.evaluate(i))]]},get:{type:Ft,overloads:[[[kt],(i,[n])=>md(n.evaluate(i),i.properties())],[[kt,si],(i,[n,s])=>md(n.evaluate(i),s.evaluate(i))]]},"feature-state":[Ft,[kt],(i,[n])=>md(n.evaluate(i),i.featureState||{})],properties:[si,[],i=>i.properties()],"geometry-type":[kt,[],i=>i.geometryType()],id:[Ft,[],i=>i.id()],zoom:[qe,[],i=>i.globals.zoom],"heatmap-density":[qe,[],i=>i.globals.heatmapDensity||0],"line-progress":[qe,[],i=>i.globals.lineProgress||0],accumulated:[Ft,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[qe,Ps(qe),(i,n)=>{let s=0;for(const c of n)s+=c.evaluate(i);return s}],"*":[qe,Ps(qe),(i,n)=>{let s=1;for(const c of n)s*=c.evaluate(i);return s}],"-":{type:qe,overloads:[[[qe,qe],(i,[n,s])=>n.evaluate(i)-s.evaluate(i)],[[qe],(i,[n])=>-n.evaluate(i)]]},"/":[qe,[qe,qe],(i,[n,s])=>n.evaluate(i)/s.evaluate(i)],"%":[qe,[qe,qe],(i,[n,s])=>n.evaluate(i)%s.evaluate(i)],ln2:[qe,[],()=>Math.LN2],pi:[qe,[],()=>Math.PI],e:[qe,[],()=>Math.E],"^":[qe,[qe,qe],(i,[n,s])=>Math.pow(n.evaluate(i),s.evaluate(i))],sqrt:[qe,[qe],(i,[n])=>Math.sqrt(n.evaluate(i))],log10:[qe,[qe],(i,[n])=>Math.log(n.evaluate(i))/Math.LN10],ln:[qe,[qe],(i,[n])=>Math.log(n.evaluate(i))],log2:[qe,[qe],(i,[n])=>Math.log(n.evaluate(i))/Math.LN2],sin:[qe,[qe],(i,[n])=>Math.sin(n.evaluate(i))],cos:[qe,[qe],(i,[n])=>Math.cos(n.evaluate(i))],tan:[qe,[qe],(i,[n])=>Math.tan(n.evaluate(i))],asin:[qe,[qe],(i,[n])=>Math.asin(n.evaluate(i))],acos:[qe,[qe],(i,[n])=>Math.acos(n.evaluate(i))],atan:[qe,[qe],(i,[n])=>Math.atan(n.evaluate(i))],min:[qe,Ps(qe),(i,n)=>Math.min(...n.map(s=>s.evaluate(i)))],max:[qe,Ps(qe),(i,n)=>Math.max(...n.map(s=>s.evaluate(i)))],abs:[qe,[qe],(i,[n])=>Math.abs(n.evaluate(i))],round:[qe,[qe],(i,[n])=>{const s=n.evaluate(i);return s<0?-Math.round(-s):Math.round(s)}],floor:[qe,[qe],(i,[n])=>Math.floor(n.evaluate(i))],ceil:[qe,[qe],(i,[n])=>Math.ceil(n.evaluate(i))],"filter-==":[Pt,[kt,Ft],(i,[n,s])=>i.properties()[n.value]===s.value],"filter-id-==":[Pt,[Ft],(i,[n])=>i.id()===n.value],"filter-type-==":[Pt,[kt],(i,[n])=>i.geometryType()===n.value],"filter-<":[Pt,[kt,Ft],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c<f}],"filter-id-<":[Pt,[Ft],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s<c}],"filter->":[Pt,[kt,Ft],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c>f}],"filter-id->":[Pt,[Ft],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s>c}],"filter-<=":[Pt,[kt,Ft],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c<=f}],"filter-id-<=":[Pt,[Ft],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s<=c}],"filter->=":[Pt,[kt,Ft],(i,[n,s])=>{const c=i.properties()[n.value],f=s.value;return typeof c==typeof f&&c>=f}],"filter-id->=":[Pt,[Ft],(i,[n])=>{const s=i.id(),c=n.value;return typeof s==typeof c&&s>=c}],"filter-has":[Pt,[Ft],(i,[n])=>n.value in i.properties()],"filter-has-id":[Pt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Pt,[O(kt)],(i,[n])=>n.value.indexOf(i.geometryType())>=0],"filter-id-in":[Pt,[O(Ft)],(i,[n])=>n.value.indexOf(i.id())>=0],"filter-in-small":[Pt,[kt,O(Ft)],(i,[n,s])=>s.value.indexOf(i.properties()[n.value])>=0],"filter-in-large":[Pt,[kt,O(Ft)],(i,[n,s])=>function(c,f,v,x){for(;v<=x;){const b=v+x>>1;if(f[b]===c)return!0;f[b]>c?x=b-1:v=b+1}return!1}(i.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Pt,overloads:[[[Pt,Pt],(i,[n,s])=>n.evaluate(i)&&s.evaluate(i)],[Ps(Pt),(i,n)=>{for(const s of n)if(!s.evaluate(i))return!1;return!0}]]},any:{type:Pt,overloads:[[[Pt,Pt],(i,[n,s])=>n.evaluate(i)||s.evaluate(i)],[Ps(Pt),(i,n)=>{for(const s of n)if(s.evaluate(i))return!0;return!1}]]},"!":[Pt,[Pt],(i,[n])=>!n.evaluate(i)],"is-supported-script":[Pt,[kt],(i,[n])=>{const s=i.globals&&i.globals.isSupportedScript;return!s||s(n.evaluate(i))}],upcase:[kt,[kt],(i,[n])=>n.evaluate(i).toUpperCase()],downcase:[kt,[kt],(i,[n])=>n.evaluate(i).toLowerCase()],concat:[kt,Ps(Ft),(i,n)=>n.map(s=>nl(s.evaluate(i))).join("")],"resolved-locale":[kt,[xi],(i,[n])=>n.evaluate(i).resolvedLocale()]});class yc{constructor(n,s){var c;this.expression=n,this._warningHistory={},this._evaluator=new rc,this._defaultValue=s?(c=s).type==="color"&&mc(c.default)?new Cr(0,0,0,0):c.type==="color"?Cr.parse(c.default)||null:c.type==="padding"?wi.parse(c.default)||null:c.type==="variableAnchorOffsetCollection"?Li.parse(c.default)||null:c.default===void 0?null:c.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,c,f,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=c,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,c,f,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=c||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new on(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function _c(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in ia}function ca(i,n){const s=new ws(ia,ul,[],n?function(f){const v={color:Pn,string:kt,number:qe,enum:kt,boolean:Pt,formatted:Di,padding:Tt,resolvedImage:ur,variableAnchorOffsetCollection:ne};return f.type==="array"?O(v[f.value]||Ft,f.length):v[f.type]}(n):void 0),c=s.parse(i,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?fc(new yc(c,n)):sa(s.errors)}class ua{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!oa(s.expression)}evaluateWithoutErrorHandling(n,s,c,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,c,f,v,x)}evaluate(n,s,c,f,v,x){return this._styleExpression.evaluate(n,s,c,f,v,x)}}class da{constructor(n,s,c,f){this.kind=n,this.zoomStops=c,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!oa(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,s,c,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,c,f,v,x)}evaluate(n,s,c,f,v,x){return this._styleExpression.evaluate(n,s,c,f,v,x)}interpolationFactor(n,s,c){return this.interpolationType?li.interpolationFactor(this.interpolationType,n,s,c):0}}function yd(i,n){const s=ca(i,n);if(s.result==="error")return s;const c=s.value.expression,f=dl(c);if(!f&&!aa(n))return sa([new cr("","data expressions not supported")]);const v=hl(c,["zoom"]);if(!v&&!Np(n))return sa([new cr("","zoom expressions not supported")]);const x=pl(c);return x||v?x instanceof cr?sa([x]):x instanceof li&&!gd(n)?sa([new cr("",'"interpolate" expressions cannot be used with this property')]):fc(x?new da(f?"camera":"composite",s.value,x.labels,x instanceof li?x.interpolation:void 0):new ua(f?"constant":"source",s.value)):sa([new cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ha{constructor(n,s){this._parameters=n,this._specification=s,dn(this,jp(this._parameters,this._specification))}static deserialize(n){return new ha(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function pl(i){let n=null;if(i instanceof Qo)n=pl(i.result);else if(i instanceof sc){for(const s of i.args)if(n=pl(s),n)break}else(i instanceof ta||i instanceof li)&&i.input instanceof Bi&&i.input.name==="zoom"&&(n=i);return n instanceof cr||i.eachChild(s=>{const c=pl(s);c instanceof cr?n=c:!n&&c?n=new cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&c&&n!==c&&(n=new cr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function vc(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const n of i.slice(1))if(!vc(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const xc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _d(i){if(i==null)return{filter:()=>!0,needGeometry:!1};vc(i)||(i=bc(i));const n=ca(i,xc);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,c,f)=>n.value.evaluate(s,c,{},f),needGeometry:Gp(i)}}function hy(i,n){return i<n?-1:i>n?1:0}function Gp(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let n=1;n<i.length;n++)if(Gp(i[n]))return!0;return!1}function bc(i){if(!i)return!0;const n=i[0];return i.length<=1?n!=="any":n==="=="?vd(i[1],i[2],"=="):n==="!="?Fn(vd(i[1],i[2],"==")):n==="<"||n===">"||n==="<="||n===">="?vd(i[1],i[2],n):n==="any"?(s=i.slice(1),["any"].concat(s.map(bc))):n==="all"?["all"].concat(i.slice(1).map(bc)):n==="none"?["all"].concat(i.slice(1).map(bc).map(Fn)):n==="in"?fl(i[1],i.slice(2)):n==="!in"?Fn(fl(i[1],i.slice(2))):n==="has"?ml(i[1]):n!=="!has"||Fn(ml(i[1]));var s}function vd(i,n,s){switch(i){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,i,n]}}function fl(i,n){if(n.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",i,["literal",n.sort(hy)]]:["filter-in-small",i,["literal",n]]}}function ml(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Fn(i){return["!",i]}function Ms(i){const n=typeof i;if(n==="number"||n==="boolean"||n==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let f="[";for(const v of i)f+=`${Ms(v)},`;return`${f}]`}const s=Object.keys(i).sort();let c="{";for(let f=0;f<s.length;f++)c+=`${JSON.stringify(s[f])}:${Ms(i[s[f]])},`;return`${c}}`}function Hp(i){let n="";for(const s of $r)n+=`/${Ms(i[s])}`;return n}function qp(i){const n=i.value;return n?[new Xe(i.key,n,"constants have been deprecated as of v8")]:[]}function en(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Ji(i){if(Array.isArray(i))return i.map(Ji);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const n={};for(const s in i)n[s]=Ji(i[s]);return n}return en(i)}function Ci(i){const n=i.key,s=i.value,c=i.valueSpec||{},f=i.objectElementValidators||{},v=i.style,x=i.styleSpec,b=i.validateSpec;let S=[];const T=gr(s);if(T!=="object")return[new Xe(n,s,`object expected, ${T} found`)];for(const E in s){const z=E.split(".")[0],F=c[z]||c["*"];let N;if(f[z])N=f[z];else if(c[z])N=b;else if(f["*"])N=f["*"];else{if(!c["*"]){S.push(new Xe(n,s[E],`unknown property "${E}"`));continue}N=b}S=S.concat(N({key:(n&&`${n}.`)+E,value:s[E],valueSpec:F,style:v,styleSpec:x,object:s,objectKey:E,validateSpec:b},s))}for(const E in c)f[E]||c[E].required&&c[E].default===void 0&&s[E]===void 0&&S.push(new Xe(n,s,`missing required property "${E}"`));return S}function gl(i){const n=i.value,s=i.valueSpec,c=i.style,f=i.styleSpec,v=i.key,x=i.arrayElementValidator||i.validateSpec;if(gr(n)!=="array")return[new Xe(v,n,`array expected, ${gr(n)} found`)];if(s.length&&n.length!==s.length)return[new Xe(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Xe(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let b={type:s.value,values:s.values};f.$version<7&&(b.function=s.function),gr(s.value)==="object"&&(b=s.value);let S=[];for(let T=0;T<n.length;T++)S=S.concat(x({array:n,arrayIndex:T,value:n[T],valueSpec:b,validateSpec:i.validateSpec,style:c,styleSpec:f,key:`${v}[${T}]`}));return S}function xd(i){const n=i.key,s=i.value,c=i.valueSpec;let f=gr(s);return f==="number"&&s!=s&&(f="NaN"),f!=="number"?[new Xe(n,s,`number expected, ${f} found`)]:"minimum"in c&&s<c.minimum?[new Xe(n,s,`${s} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&s>c.maximum?[new Xe(n,s,`${s} is greater than the maximum value ${c.maximum}`)]:[]}function wc(i){const n=i.valueSpec,s=en(i.value.type);let c,f,v,x={};const b=s!=="categorical"&&i.value.property===void 0,S=!b,T=gr(i.value.stops)==="array"&&gr(i.value.stops[0])==="array"&&gr(i.value.stops[0][0])==="object",E=Ci({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(N){if(s==="identity")return[new Xe(N.key,N.value,'identity function may not have a "stops" property')];let H=[];const K=N.value;return H=H.concat(gl({key:N.key,value:K,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:z})),gr(K)==="array"&&K.length===0&&H.push(new Xe(N.key,K,"array must have at least one stop")),H},default:function(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:n,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}});return s==="identity"&&b&&E.push(new Xe(i.key,i.value,'missing required property "property"')),s==="identity"||i.value.stops||E.push(new Xe(i.key,i.value,'missing required property "stops"')),s==="exponential"&&i.valueSpec.expression&&!gd(i.valueSpec)&&E.push(new Xe(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!aa(i.valueSpec)?E.push(new Xe(i.key,i.value,"property functions not supported")):b&&!Np(i.valueSpec)&&E.push(new Xe(i.key,i.value,"zoom functions not supported"))),s!=="categorical"&&!T||i.value.property!==void 0||E.push(new Xe(i.key,i.value,'"property" property is required')),E;function z(N){let H=[];const K=N.value,oe=N.key;if(gr(K)!=="array")return[new Xe(oe,K,`array expected, ${gr(K)} found`)];if(K.length!==2)return[new Xe(oe,K,`array length 2 expected, length ${K.length} found`)];if(T){if(gr(K[0])!=="object")return[new Xe(oe,K,`object expected, ${gr(K[0])} found`)];if(K[0].zoom===void 0)return[new Xe(oe,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new Xe(oe,K,"object stop key must have value")];if(v&&v>en(K[0].zoom))return[new Xe(oe,K[0].zoom,"stop zoom values must appear in ascending order")];en(K[0].zoom)!==v&&(v=en(K[0].zoom),f=void 0,x={}),H=H.concat(Ci({key:`${oe}[0]`,value:K[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:xd,value:F}}))}else H=H.concat(F({key:`${oe}[0]`,value:K[0],validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},K));return _c(Ji(K[1]))?H.concat([new Xe(`${oe}[1]`,K[1],"expressions are not allowed in function stops.")]):H.concat(N.validateSpec({key:`${oe}[1]`,value:K[1],valueSpec:n,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function F(N,H){const K=gr(N.value),oe=en(N.value),ce=N.value!==null?N.value:H;if(c){if(K!==c)return[new Xe(N.key,ce,`${K} stop domain type must match previous stop domain type ${c}`)]}else c=K;if(K!=="number"&&K!=="string"&&K!=="boolean")return[new Xe(N.key,ce,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&s!=="categorical"){let Te=`number expected, ${K} found`;return aa(n)&&s===void 0&&(Te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xe(N.key,ce,Te)]}return s!=="categorical"||K!=="number"||isFinite(oe)&&Math.floor(oe)===oe?s!=="categorical"&&K==="number"&&f!==void 0&&oe<f?[new Xe(N.key,ce,"stop domain values must appear in ascending order")]:(f=oe,s==="categorical"&&oe in x?[new Xe(N.key,ce,"stop domain values must be unique")]:(x[oe]=!0,[])):[new Xe(N.key,ce,`integer expected, found ${oe}`)]}}function pa(i){const n=(i.expressionContext==="property"?yd:ca)(Ji(i.value),i.valueSpec);if(n.result==="error")return n.value.map(c=>new Xe(`${i.key}${c.key}`,i.value,c.message));const s=n.value.expression||n.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!s.outputDefined())return[new Xe(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!oa(s))return[new Xe(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!oa(s))return[new Xe(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!hl(s,["zoom","feature-state"]))return[new Xe(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!dl(s))return[new Xe(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bo(i){const n=i.key,s=i.value,c=i.valueSpec,f=[];return Array.isArray(c.values)?c.values.indexOf(en(s))===-1&&f.push(new Xe(n,s,`expected one of [${c.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(c.values).indexOf(en(s))===-1&&f.push(new Xe(n,s,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function bd(i){return vc(Ji(i.value))?pa(dn({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Sc(i)}function Sc(i){const n=i.value,s=i.key;if(gr(n)!=="array")return[new Xe(s,n,`array expected, ${gr(n)} found`)];const c=i.styleSpec;let f,v=[];if(n.length<1)return[new Xe(s,n,"filter array must have at least 1 element")];switch(v=v.concat(Bo({key:`${s}[0]`,value:n[0],valueSpec:c.filter_operator,style:i.style,styleSpec:i.styleSpec})),en(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&en(n[1])==="$type"&&v.push(new Xe(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Xe(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=gr(n[1]),f!=="string"&&v.push(new Xe(`${s}[1]`,n[1],`string expected, ${f} found`)));for(let x=2;x<n.length;x++)f=gr(n[x]),en(n[1])==="$type"?v=v.concat(Bo({key:`${s}[${x}]`,value:n[x],valueSpec:c.geometry_type,style:i.style,styleSpec:i.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new Xe(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(Sc({key:`${s}[${x}]`,value:n[x],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":f=gr(n[1]),n.length!==2?v.push(new Xe(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new Xe(`${s}[1]`,n[1],`string expected, ${f} found`))}return v}function wd(i,n){const s=i.key,c=i.validateSpec,f=i.style,v=i.styleSpec,x=i.value,b=i.objectKey,S=v[`${n}_${i.layerType}`];if(!S)return[];const T=b.match(/^(.*)-transition$/);if(n==="paint"&&T&&S[T[1]]&&S[T[1]].transition)return c({key:s,value:x,valueSpec:v.transition,style:f,styleSpec:v});const E=i.valueSpec||S[b];if(!E)return[new Xe(s,x,`unknown property "${b}"`)];let z;if(gr(x)==="string"&&aa(E)&&!E.tokens&&(z=/^{([^}]+)}$/.exec(x)))return[new Xe(s,x,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const F=[];return i.layerType==="symbol"&&(b==="text-field"&&f&&!f.glyphs&&F.push(new Xe(s,x,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&mc(Ji(x))&&en(x.type)==="identity"&&F.push(new Xe(s,x,'"text-font" does not support identity functions'))),F.concat(c({key:i.key,value:x,valueSpec:E,style:f,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:b}))}function Cc(i){return wd(i,"paint")}function Sd(i){return wd(i,"layout")}function Cd(i){let n=[];const s=i.value,c=i.key,f=i.style,v=i.styleSpec;s.type||s.ref||n.push(new Xe(c,s,'either "type" or "ref" is required'));let x=en(s.type);const b=en(s.ref);if(s.id){const S=en(s.id);for(let T=0;T<i.arrayIndex;T++){const E=f.layers[T];en(E.id)===S&&n.push(new Xe(c,s.id,`duplicate layer id "${s.id}", previously used at line ${E.id.__line__}`))}}if("ref"in s){let S;["type","source","source-layer","filter","layout"].forEach(T=>{T in s&&n.push(new Xe(c,s[T],`"${T}" is prohibited for ref layers`))}),f.layers.forEach(T=>{en(T.id)===b&&(S=T)}),S?S.ref?n.push(new Xe(c,s.ref,"ref cannot reference another ref layer")):x=en(S.type):n.push(new Xe(c,s.ref,`ref layer "${b}" not found`))}else if(x!=="background")if(s.source){const S=f.sources&&f.sources[s.source],T=S&&en(S.type);S?T==="vector"&&x==="raster"?n.push(new Xe(c,s.source,`layer "${s.id}" requires a raster source`)):T!=="raster-dem"&&x==="hillshade"?n.push(new Xe(c,s.source,`layer "${s.id}" requires a raster-dem source`)):T==="raster"&&x!=="raster"?n.push(new Xe(c,s.source,`layer "${s.id}" requires a vector source`)):T!=="vector"||s["source-layer"]?T==="raster-dem"&&x!=="hillshade"?n.push(new Xe(c,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||T==="geojson"&&S.lineMetrics||n.push(new Xe(c,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Xe(c,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Xe(c,s.source,`source "${s.source}" not found`))}else n.push(new Xe(c,s,'missing required property "source"'));return n=n.concat(Ci({key:c,value:s,valueSpec:v.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${c}.type`,value:s.type,valueSpec:v.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:s,objectKey:"type"}),filter:bd,layout:S=>Ci({layer:s,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":T=>Sd(dn({layerType:x},T))}}),paint:S=>Ci({layer:s,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":T=>Cc(dn({layerType:x},T))}})}})),n}function As(i){const n=i.value,s=i.key,c=gr(n);return c!=="string"?[new Xe(s,n,`string expected, ${c} found`)]:[]}const kc={promoteId:function({key:i,value:n}){if(gr(n)==="string")return As({key:i,value:n});{const s=[];for(const c in n)s.push(...As({key:`${i}.${c}`,value:n[c]}));return s}}};function yl(i){const n=i.value,s=i.key,c=i.styleSpec,f=i.style,v=i.validateSpec;if(!n.type)return[new Xe(s,n,'"type" is required')];const x=en(n.type);let b;switch(x){case"vector":case"raster":return b=Ci({key:s,value:n,valueSpec:c[`source_${x.replace("-","_")}`],style:i.style,styleSpec:c,objectElementValidators:kc,validateSpec:v}),b;case"raster-dem":return b=function(S){var T;const E=(T=S.sourceName)!==null&&T!==void 0?T:"",z=S.value,F=S.styleSpec,N=F.source_raster_dem,H=S.style;let K=[];const oe=gr(z);if(z===void 0)return K;if(oe!=="object")return K.push(new Xe("source_raster_dem",z,`object expected, ${oe} found`)),K;const ce=en(z.encoding)==="custom",Te=["redFactor","greenFactor","blueFactor","baseShift"],ye=S.value.encoding?`"${S.value.encoding}"`:"Default";for(const Ce in z)!ce&&Te.includes(Ce)?K.push(new Xe(Ce,z[Ce],`In "${E}": "${Ce}" is only valid when "encoding" is set to "custom". ${ye} encoding found`)):N[Ce]?K=K.concat(S.validateSpec({key:Ce,value:z[Ce],valueSpec:N[Ce],validateSpec:S.validateSpec,style:H,styleSpec:F})):K.push(new Xe(Ce,z[Ce],`unknown property "${Ce}"`));return K}({sourceName:s,value:n,style:i.style,styleSpec:c,validateSpec:v}),b;case"geojson":if(b=Ci({key:s,value:n,valueSpec:c.source_geojson,style:f,styleSpec:c,validateSpec:v,objectElementValidators:kc}),n.cluster)for(const S in n.clusterProperties){const[T,E]=n.clusterProperties[S],z=typeof T=="string"?[T,["accumulated"],["get",S]]:T;b.push(...pa({key:`${s}.${S}.map`,value:E,expressionContext:"cluster-map"})),b.push(...pa({key:`${s}.${S}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return b;case"video":return Ci({key:s,value:n,valueSpec:c.source_video,style:f,validateSpec:v,styleSpec:c});case"image":return Ci({key:s,value:n,valueSpec:c.source_image,style:f,validateSpec:v,styleSpec:c});case"canvas":return[new Xe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bo({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function kd(i){const n=i.value,s=i.styleSpec,c=s.light,f=i.style;let v=[];const x=gr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Xe("light",n,`object expected, ${x} found`)]),v;for(const b in n){const S=b.match(/^(.*)-transition$/);v=v.concat(S&&c[S[1]]&&c[S[1]].transition?i.validateSpec({key:b,value:n[b],valueSpec:s.transition,validateSpec:i.validateSpec,style:f,styleSpec:s}):c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],validateSpec:i.validateSpec,style:f,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)])}return v}function Td(i){const n=i.value,s=i.styleSpec,c=s.sky,f=i.style,v=gr(n);if(n===void 0)return[];if(v!=="object")return[new Xe("sky",n,`object expected, ${v} found`)];let x=[];for(const b in n)x=x.concat(c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],style:f,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)]);return x}function Id(i){const n=i.value,s=i.styleSpec,c=s.terrain,f=i.style;let v=[];const x=gr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Xe("terrain",n,`object expected, ${x} found`)]),v;for(const b in n)v=v.concat(c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],validateSpec:i.validateSpec,style:f,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)]);return v}function Ed(i){let n=[];const s=i.value,c=i.key;if(Array.isArray(s)){const f=[],v=[];for(const x in s)s[x].id&&f.includes(s[x].id)&&n.push(new Xe(c,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),f.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new Xe(c,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(Ci({key:`${c}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return n}return As({key:c,value:s})}const Tc={"*":()=>[],array:gl,boolean:function(i){const n=i.value,s=i.key,c=gr(n);return c!=="boolean"?[new Xe(s,n,`boolean expected, ${c} found`)]:[]},number:xd,color:function(i){const n=i.key,s=i.value,c=gr(s);return c!=="string"?[new Xe(n,s,`color expected, ${c} found`)]:Cr.parse(String(s))?[]:[new Xe(n,s,`color expected, "${s}" found`)]},constants:qp,enum:Bo,filter:bd,function:wc,layer:Cd,object:Ci,source:yl,light:kd,sky:Td,terrain:Id,projection:function(i){const n=i.value,s=i.styleSpec,c=s.projection,f=i.style,v=gr(n);if(n===void 0)return[];if(v!=="object")return[new Xe("projection",n,`object expected, ${v} found`)];let x=[];for(const b in n)x=x.concat(c[b]?i.validateSpec({key:b,value:n[b],valueSpec:c[b],style:f,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)]);return x},string:As,formatted:function(i){return As(i).length===0?[]:pa(i)},resolvedImage:function(i){return As(i).length===0?[]:pa(i)},padding:function(i){const n=i.key,s=i.value;if(gr(s)==="array"){if(s.length<1||s.length>4)return[new Xe(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const c={type:"number"};let f=[];for(let v=0;v<s.length;v++)f=f.concat(i.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:i.validateSpec,valueSpec:c}));return f}return xd({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const n=i.key,s=i.value,c=gr(s),f=i.styleSpec;if(c!=="array"||s.length<1||s.length%2!=0)return[new Xe(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Bo({key:`${n}[${x}]`,value:s[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(gl({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:f}));return v},sprite:Ed};function _l(i){const n=i.value,s=i.valueSpec,c=i.styleSpec;return i.validateSpec=_l,s.expression&&mc(en(n))?wc(i):s.expression&&_c(Ji(n))?pa(i):s.type&&Tc[s.type]?Tc[s.type](i):Ci(dn({},i,{valueSpec:s.type?c[s.type]:s}))}function Zp(i){const n=i.value,s=i.key,c=As(i);return c.length||(n.indexOf("{fontstack}")===-1&&c.push(new Xe(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&c.push(new Xe(s,n,'"glyphs" url must include a "{range}" token'))),c}function Fi(i,n=ze){let s=[];return s=s.concat(_l({key:"",value:i,valueSpec:n.$root,styleSpec:n,style:i,validateSpec:_l,objectElementValidators:{glyphs:Zp,"*":()=>[]}})),i.constants&&(s=s.concat(qp({key:"constants",value:i.constants}))),Pd(s)}function _o(i){return function(n){return i({...n,validateSpec:_l})}}function Pd(i){return[].concat(i).sort((n,s)=>n.line-s.line)}function Qi(i){return function(...n){return Pd(i.apply(this,n))}}Fi.source=Qi(_o(yl)),Fi.sprite=Qi(_o(Ed)),Fi.glyphs=Qi(_o(Zp)),Fi.light=Qi(_o(kd)),Fi.sky=Qi(_o(Td)),Fi.terrain=Qi(_o(Id)),Fi.layer=Qi(_o(Cd)),Fi.filter=Qi(_o(bd)),Fi.paintProperty=Qi(_o(Cc)),Fi.layoutProperty=Qi(_o(Sd));const zs=Fi,py=zs.light,fy=zs.sky,Xp=zs.paintProperty,Kp=zs.layoutProperty;function Md(i,n){let s=!1;if(n&&n.length)for(const c of n)i.fire(new Nt(new Error(c.message))),s=!0;return s}class fa{constructor(n,s,c){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(c=x[2]);for(let S=0;S<this.d*this.d;S++){const T=x[3+S],E=x[3+S+1];f.push(T===E?null:x.subarray(T,E))}const b=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],b),this.bboxes=x.subarray(b),this.insert=this._insertReadonly}else{this.d=s+2*c;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=c,this.scale=s/n,this.uid=0;const v=c/s*n;this.min=-v,this.max=n+v}insert(n,s,c,f,v){this._forEachCell(s,c,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,c,f,v,x){this.cells[v].push(x)}query(n,s,c,f,v){const x=this.min,b=this.max;if(n<=x&&s<=x&&b<=c&&b<=f&&!v)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(n,s,c,f,this._queryCell,S,{},v),S}}_queryCell(n,s,c,f,v,x,b,S){const T=this.cells[v];if(T!==null){const E=this.keys,z=this.bboxes;for(let F=0;F<T.length;F++){const N=T[F];if(b[N]===void 0){const H=4*N;(S?S(z[H+0],z[H+1],z[H+2],z[H+3]):n<=z[H+2]&&s<=z[H+3]&&c>=z[H+0]&&f>=z[H+1])?(b[N]=!0,x.push(E[N])):b[N]=!1}}}}_forEachCell(n,s,c,f,v,x,b,S){const T=this._convertToCellCoord(n),E=this._convertToCellCoord(s),z=this._convertToCellCoord(c),F=this._convertToCellCoord(f);for(let N=T;N<=z;N++)for(let H=E;H<=F;H++){const K=this.d*H+N;if((!S||S(this._convertFromCellCoord(N),this._convertFromCellCoord(H),this._convertFromCellCoord(N+1),this._convertFromCellCoord(H+1)))&&v.call(this,n,s,c,f,K,x,b,S))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let c=0;for(let x=0;x<this.cells.length;x++)c+=this.cells[x].length;const f=new Int32Array(s+c+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const b=n[x];f[3+x]=v,f.set(b,v),v+=b.length}return f[3+n.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+n.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(n,s){const c=n.toArrayBuffer();return s&&s.push(c),{buffer:c}}static deserialize(n){return new fa(n.buffer)}}const Oi={};function ht(i,n,s={}){if(Oi[i])throw new Error(`${i} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:i,writeable:!1}),Oi[i]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}ht("Object",Object),ht("TransferableGridIndex",fa),ht("Color",Cr),ht("Error",Error),ht("AJAXError",Rt),ht("ResolvedImage",Si),ht("StylePropertyFunction",ha),ht("StyleExpression",yc,{omit:["_evaluator"]}),ht("ZoomDependentExpression",da),ht("ZoomConstantExpression",ua),ht("CompoundExpression",Bi,{omit:["_evaluate"]});for(const i in ia)ia[i]._classRegistryKey||ht(`Expression_${i}`,ia[i]);function Ic(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Ad(i){return i.$name||i.constructor._classRegistryKey}function Yp(i){return!function(n){if(n===null||typeof n!="object")return!1;const s=Ad(n);return!(!s||s==="Object")}(i)&&(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||Ic(i)||Ke(i)||ArrayBuffer.isView(i)||i instanceof ImageData)}function ma(i,n){if(Yp(i))return(Ic(i)||Ke(i))&&n&&n.push(i),ArrayBuffer.isView(i)&&n&&n.push(i.buffer),i instanceof ImageData&&n&&n.push(i.data.buffer),i;if(Array.isArray(i)){const v=[];for(const x of i)v.push(ma(x,n));return v}if(typeof i!="object")throw new Error("can't serialize object of type "+typeof i);const s=Ad(i);if(!s)throw new Error(`can't serialize object of unregistered class ${i.constructor.name}`);if(!Oi[s])throw new Error(`${s} is not registered.`);const{klass:c}=Oi[s],f=c.serialize?c.serialize(i,n):{};if(c.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in i){if(!i.hasOwnProperty(v)||Oi[s].omit.indexOf(v)>=0)continue;const x=i[v];f[v]=Oi[s].shallow.indexOf(v)>=0?x:ma(x,n)}i instanceof Error&&(f.message=i.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(f.$name=s),f}function ga(i){if(Yp(i))return i;if(Array.isArray(i))return i.map(ga);if(typeof i!="object")throw new Error("can't deserialize object of type "+typeof i);const n=Ad(i)||"Object";if(!Oi[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Oi[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(i);const c=Object.create(s.prototype);for(const f of Object.keys(i)){if(f==="$name")continue;const v=i[f];c[f]=Oi[n].shallow.indexOf(f)>=0?v:ga(v)}return c}class zd{constructor(){this.first=!0}update(n,s){const c=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=c,!0))}}const or={"Latin-1 Supplement":i=>i>=128&&i<=255,"Hangul Jamo":i=>i>=4352&&i<=4607,Khmer:i=>i>=6016&&i<=6143,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Katakana:i=>i>=12448&&i<=12543,Kanbun:i=>i>=12688&&i<=12703,"CJK Strokes":i=>i>=12736&&i<=12783,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"Private Use Area":i=>i>=57344&&i<=63743,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Rd(i){for(const n of i)if(Ld(n.charCodeAt(0)))return!0;return!1}function my(i){for(const n of i)if(!ya(n.charCodeAt(0)))return!1;return!0}function Dd(i){const n=i.map(s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}}).filter(s=>s);return new RegExp(n.join("|"),"u")}const gy=Dd(["Arab","Dupl","Mong","Ougr","Syrc"]);function ya(i){return!gy.test(String.fromCodePoint(i))}const Jp=Dd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ld(i){return!(i!==746&&i!==747&&(i<4352||!(or["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||or["CJK Compatibility"](i)||or["CJK Strokes"](i)||!(!or["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||or["Enclosed CJK Letters and Months"](i)||or["Ideographic Description Characters"](i)||or.Kanbun(i)||or.Katakana(i)&&i!==12540||!(!or["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!or["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||or["Vertical Forms"](i)||or["Yijing Hexagram Symbols"](i)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(i))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(i))||Jp.test(String.fromCodePoint(i)))))}function Qp(i){return!(Ld(i)||function(n){return!!(or["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||or["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||or["Letterlike Symbols"](n)||or["Number Forms"](n)||or["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||or["Control Pictures"](n)&&n!==9251||or["Optical Character Recognition"](n)||or["Enclosed Alphanumerics"](n)||or["Geometric Shapes"](n)||or["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||or["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||or["CJK Symbols and Punctuation"](n)||or.Katakana(n)||or["Private Use Area"](n)||or["CJK Compatibility Forms"](n)||or["Small Form Variants"](n)||or["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(i))}const yy=Dd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Bd(i){return yy.test(String.fromCodePoint(i))}function _y(i,n){return!(!n&&Bd(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||or.Khmer(i))}function vy(i){for(const n of i)if(Bd(n.charCodeAt(0)))return!0;return!1}const ki=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class jr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zd,this.transition={})}isSupportedScript(n){return function(s,c){for(const f of s)if(!_y(f.charCodeAt(0),c))return!1;return!0}(n,ki.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),c=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*s}}}class _a{constructor(n,s){this.property=n,this.value=s,this.expression=function(c,f){if(mc(c))return new ha(c,f);if(_c(c)){const v=yd(c,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=c;return f.type==="color"&&typeof c=="string"?v=Cr.parse(c):f.type!=="padding"||typeof c!="number"&&!Array.isArray(c)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(c)&&(v=Li.parse(c)):v=wi.parse(c),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,c){return this.property.possiblyEvaluate(this,n,s,c)}}class Ec{constructor(n){this.property=n,this.value=new _a(n,void 0)}transitioned(n,s){return new ef(this.property,this.value,s,_e({},n.transition,this.transition),n.now)}untransitioned(){return new ef(this.property,this.value,null,{},0)}}class Pc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return De(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ec(this._values[n].property)),this._values[n].value=new _a(this._values[n].property,s===null?void 0:De(s))}getTransition(n){return De(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Ec(this._values[n].property)),this._values[n].transition=De(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(n[s]=c);const f=this.getTransition(s);f!==void 0&&(n[`${s}-transition`]=f)}return n}transitioned(n,s){const c=new vl(this._properties);for(const f of Object.keys(this._values))c._values[f]=this._values[f].transitioned(n,s._values[f]);return c}untransitioned(){const n=new vl(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class ef{constructor(n,s,c,f,v){this.property=n,this.value=s,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=c)}possiblyEvaluate(n,s,c){const f=n.now||0,v=this.value.possiblyEvaluate(n,s,c),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(n,s,c);{const b=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,c),v,function(S){if(S<=0)return 0;if(S>=1)return 1;const T=S*S,E=T*S;return 4*(S<.5?E:3*(S-T)+E-.75)}(b))}}return v}}class vl{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,c){const f=new bl(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,c);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class xl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return De(this._values[n].value)}setValue(n,s){this._values[n]=new _a(this._values[n].property,s===null?void 0:De(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const c=this.getValue(s);c!==void 0&&(n[s]=c)}return n}possiblyEvaluate(n,s,c){const f=new bl(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,c);return f}}class vo{constructor(n,s,c){this.property=n,this.value=s,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,c,f){return this.property.evaluate(this.value,this.parameters,n,s,c,f)}}class bl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class ft{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,c){const f=ai[this.specification.type];return f?f(n,s,c):n}}class Mt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,c,f){return new vo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},c,f)}:n.expression,s)}interpolate(n,s,c){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new vo(this,{kind:"constant",value:void 0},n.parameters);const f=ai[this.specification.type];if(f){const v=f(n.value.value,s.value.value,c);return new vo(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,c,f,v,x){return n.kind==="constant"?n.value:n.evaluate(s,c,f,v,x)}}class Mc extends Mt{possiblyEvaluate(n,s,c,f){if(n.value===void 0)return new vo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},c,f),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,b=this._calculate(x,x,x,s);return new vo(this,{kind:"constant",value:b},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new vo(this,{kind:"constant",value:v},s)}return new vo(this,n.expression,s)}evaluate(n,s,c,f,v,x){if(n.kind==="source"){const b=n.evaluate(s,c,f,v,x);return this._calculate(b,b,b,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},c,f),n.evaluate({zoom:Math.floor(s.zoom)},c,f),n.evaluate({zoom:Math.floor(s.zoom)+1},c,f),s):n.value}_calculate(n,s,c,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:c,to:s}}interpolate(n){return n}}class Ac{constructor(n){this.specification=n}possiblyEvaluate(n,s,c,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},c,f);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new jr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new jr(Math.floor(s.zoom),s)),n.expression.evaluate(new jr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,c,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:c,to:s}}interpolate(n){return n}}class Fd{constructor(n){this.specification=n}possiblyEvaluate(n,s,c,f){return!!n.expression.evaluate(s,null,{},c,f)}interpolate(){return!1}}class _{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const c=n[s];c.specification.overridable&&this.overridableProperties.push(s);const f=this.defaultPropertyValues[s]=new _a(c,void 0),v=this.defaultTransitionablePropertyValues[s]=new Ec(c);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=f.possiblyEvaluate({})}}}ht("DataDrivenProperty",Mt),ht("DataConstantProperty",ft),ht("CrossFadedDataDrivenProperty",Mc),ht("CrossFadedProperty",Ac),ht("ColorRampProperty",Fd);const r="-transition";class a extends lr{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new xl(s.layout)),s.paint)){this._transitionablePaint=new Pc(s.paint);for(const c in n.paint)this.setPaintProperty(c,n.paint[c],{validate:!1});for(const c in n.layout)this.setLayoutProperty(c,n.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new bl(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,c={}){s!=null&&this._validate(Kp,`layers.${this.id}.layout.${n}`,n,s,c)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(r)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,c={}){if(s!=null&&this._validate(Xp,`layers.${this.id}.paint.${n}`,n,s,c))return!1;if(n.endsWith(r))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const f=this._transitionablePaint._values[n],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),b=f.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const S=this._transitionablePaint._values[n].value;return S.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,b,S)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,c){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Re(n,(s,c)=>!(s===void 0||c==="layout"&&!Object.keys(s).length||c==="paint"&&!Object.keys(s).length))}_validate(n,s,c,f,v={}){return(!v||v.validate!==!1)&&Md(this,n.call(zs,{key:s,layerType:this.type,objectKey:c,value:f,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof vo&&aa(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class p{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function w(i,n=1){let s=0,c=0;return{members:i.map(f=>{const v=d[f.type].BYTES_PER_ELEMENT,x=s=C(s,Math.max(n,v)),b=f.components||1;return c=Math.max(c,v),s+=v*b,{name:f.name,type:f.type,components:b,offset:x}}),size:C(s,Math.max(c,n)),alignment:n}}function C(i,n){return Math.ceil(i/n)*n}class k extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const c=this.length;return this.resize(c+1),this.emplace(c,n,s)}emplace(n,s,c){const f=2*n;return this.int16[f+0]=s,this.int16[f+1]=c,n}}k.prototype.bytesPerElement=4,ht("StructArrayLayout2i4",k);class P extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=c,this.int16[v+2]=f,n}}P.prototype.bytesPerElement=6,ht("StructArrayLayout3i6",P);class R extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,c,f)}emplace(n,s,c,f,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=c,this.int16[x+2]=f,this.int16[x+3]=v,n}}R.prototype.bytesPerElement=8,ht("StructArrayLayout4i8",R);class D extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=6*n;return this.int16[S+0]=s,this.int16[S+1]=c,this.int16[S+2]=f,this.int16[S+3]=v,this.int16[S+4]=x,this.int16[S+5]=b,n}}D.prototype.bytesPerElement=12,ht("StructArrayLayout2i4i12",D);class U extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=4*n,T=8*n;return this.int16[S+0]=s,this.int16[S+1]=c,this.uint8[T+4]=f,this.uint8[T+5]=v,this.uint8[T+6]=x,this.uint8[T+7]=b,n}}U.prototype.bytesPerElement=8,ht("StructArrayLayout2i4ub8",U);class J extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const c=this.length;return this.resize(c+1),this.emplace(c,n,s)}emplace(n,s,c){const f=2*n;return this.float32[f+0]=s,this.float32[f+1]=c,n}}J.prototype.bytesPerElement=8,ht("StructArrayLayout2f8",J);class te extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,T,E){const z=this.length;return this.resize(z+1),this.emplace(z,n,s,c,f,v,x,b,S,T,E)}emplace(n,s,c,f,v,x,b,S,T,E,z){const F=10*n;return this.uint16[F+0]=s,this.uint16[F+1]=c,this.uint16[F+2]=f,this.uint16[F+3]=v,this.uint16[F+4]=x,this.uint16[F+5]=b,this.uint16[F+6]=S,this.uint16[F+7]=T,this.uint16[F+8]=E,this.uint16[F+9]=z,n}}te.prototype.bytesPerElement=20,ht("StructArrayLayout10ui20",te);class ae extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,T,E,z,F){const N=this.length;return this.resize(N+1),this.emplace(N,n,s,c,f,v,x,b,S,T,E,z,F)}emplace(n,s,c,f,v,x,b,S,T,E,z,F,N){const H=12*n;return this.int16[H+0]=s,this.int16[H+1]=c,this.int16[H+2]=f,this.int16[H+3]=v,this.uint16[H+4]=x,this.uint16[H+5]=b,this.uint16[H+6]=S,this.uint16[H+7]=T,this.int16[H+8]=E,this.int16[H+9]=z,this.int16[H+10]=F,this.int16[H+11]=N,n}}ae.prototype.bytesPerElement=24,ht("StructArrayLayout4i4ui4i24",ae);class ue extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=c,this.float32[v+2]=f,n}}ue.prototype.bytesPerElement=12,ht("StructArrayLayout3f12",ue);class he extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}he.prototype.bytesPerElement=4,ht("StructArrayLayout1ul4",he);class me extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,T){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,c,f,v,x,b,S,T)}emplace(n,s,c,f,v,x,b,S,T,E){const z=10*n,F=5*n;return this.int16[z+0]=s,this.int16[z+1]=c,this.int16[z+2]=f,this.int16[z+3]=v,this.int16[z+4]=x,this.int16[z+5]=b,this.uint32[F+3]=S,this.uint16[z+8]=T,this.uint16[z+9]=E,n}}me.prototype.bytesPerElement=20,ht("StructArrayLayout6i1ul2ui20",me);class ie extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=6*n;return this.int16[S+0]=s,this.int16[S+1]=c,this.int16[S+2]=f,this.int16[S+3]=v,this.int16[S+4]=x,this.int16[S+5]=b,n}}ie.prototype.bytesPerElement=12,ht("StructArrayLayout2i2i2i12",ie);class xe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,c,f,v)}emplace(n,s,c,f,v,x){const b=4*n,S=8*n;return this.float32[b+0]=s,this.float32[b+1]=c,this.float32[b+2]=f,this.int16[S+6]=v,this.int16[S+7]=x,n}}xe.prototype.bytesPerElement=16,ht("StructArrayLayout2f1f2i16",xe);class Se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,c,f,v,x)}emplace(n,s,c,f,v,x,b){const S=16*n,T=4*n,E=8*n;return this.uint8[S+0]=s,this.uint8[S+1]=c,this.float32[T+1]=f,this.float32[T+2]=v,this.int16[E+6]=x,this.int16[E+7]=b,n}}Se.prototype.bytesPerElement=16,ht("StructArrayLayout2ub2f2i16",Se);class Pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=c,this.uint16[v+2]=f,n}}Pe.prototype.bytesPerElement=6,ht("StructArrayLayout3ui6",Pe);class Ve extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,T,E,z,F,N,H,K,oe,ce){const Te=this.length;return this.resize(Te+1),this.emplace(Te,n,s,c,f,v,x,b,S,T,E,z,F,N,H,K,oe,ce)}emplace(n,s,c,f,v,x,b,S,T,E,z,F,N,H,K,oe,ce,Te){const ye=24*n,Ce=12*n,Fe=48*n;return this.int16[ye+0]=s,this.int16[ye+1]=c,this.uint16[ye+2]=f,this.uint16[ye+3]=v,this.uint32[Ce+2]=x,this.uint32[Ce+3]=b,this.uint32[Ce+4]=S,this.uint16[ye+10]=T,this.uint16[ye+11]=E,this.uint16[ye+12]=z,this.float32[Ce+7]=F,this.float32[Ce+8]=N,this.uint8[Fe+36]=H,this.uint8[Fe+37]=K,this.uint8[Fe+38]=oe,this.uint32[Ce+10]=ce,this.int16[ye+22]=Te,n}}Ve.prototype.bytesPerElement=48,ht("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ve);class Ye extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c,f,v,x,b,S,T,E,z,F,N,H,K,oe,ce,Te,ye,Ce,Fe,He,ct,Et,st,nt,_t,pt){const dt=this.length;return this.resize(dt+1),this.emplace(dt,n,s,c,f,v,x,b,S,T,E,z,F,N,H,K,oe,ce,Te,ye,Ce,Fe,He,ct,Et,st,nt,_t,pt)}emplace(n,s,c,f,v,x,b,S,T,E,z,F,N,H,K,oe,ce,Te,ye,Ce,Fe,He,ct,Et,st,nt,_t,pt,dt){const Ne=32*n,bt=16*n;return this.int16[Ne+0]=s,this.int16[Ne+1]=c,this.int16[Ne+2]=f,this.int16[Ne+3]=v,this.int16[Ne+4]=x,this.int16[Ne+5]=b,this.int16[Ne+6]=S,this.int16[Ne+7]=T,this.uint16[Ne+8]=E,this.uint16[Ne+9]=z,this.uint16[Ne+10]=F,this.uint16[Ne+11]=N,this.uint16[Ne+12]=H,this.uint16[Ne+13]=K,this.uint16[Ne+14]=oe,this.uint16[Ne+15]=ce,this.uint16[Ne+16]=Te,this.uint16[Ne+17]=ye,this.uint16[Ne+18]=Ce,this.uint16[Ne+19]=Fe,this.uint16[Ne+20]=He,this.uint16[Ne+21]=ct,this.uint16[Ne+22]=Et,this.uint32[bt+12]=st,this.float32[bt+13]=nt,this.float32[bt+14]=_t,this.uint16[Ne+30]=pt,this.uint16[Ne+31]=dt,n}}Ye.prototype.bytesPerElement=64,ht("StructArrayLayout8i15ui1ul2f2ui64",Ye);class it extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}it.prototype.bytesPerElement=4,ht("StructArrayLayout1f4",it);class ut extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=c,this.float32[v+2]=f,n}}ut.prototype.bytesPerElement=12,ht("StructArrayLayout1ui2f12",ut);class tt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,c){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,c)}emplace(n,s,c,f){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=c,this.uint16[v+3]=f,n}}tt.prototype.bytesPerElement=8,ht("StructArrayLayout1ul2ui8",tt);class et extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const c=this.length;return this.resize(c+1),this.emplace(c,n,s)}emplace(n,s,c){const f=2*n;return this.uint16[f+0]=s,this.uint16[f+1]=c,n}}et.prototype.bytesPerElement=4,ht("StructArrayLayout2ui4",et);class mt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}mt.prototype.bytesPerElement=2,ht("StructArrayLayout1ui2",mt);class Ot extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,c,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,c,f)}emplace(n,s,c,f,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=c,this.float32[x+2]=f,this.float32[x+3]=v,n}}Ot.prototype.bytesPerElement=16,ht("StructArrayLayout4f16",Ot);class rt extends p{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new L(this.anchorPointX,this.anchorPointY)}}rt.prototype.size=20;class lt extends me{get(n){return new rt(this,n)}}ht("CollisionBoxArray",lt);class Lt extends p{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Lt.prototype.size=48;class Vr extends Ve{get(n){return new Lt(this,n)}}ht("PlacedSymbolArray",Vr);class qt extends p{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}qt.prototype.size=64;class nr extends Ye{get(n){return new qt(this,n)}}ht("SymbolInstanceArray",nr);class Ur extends it{getoffsetX(n){return this.float32[1*n+0]}}ht("GlyphOffsetArray",Ur);class On extends P{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}ht("SymbolLineVertexArray",On);class eo extends p{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}eo.prototype.size=12;class Wr extends ut{get(n){return new eo(this,n)}}ht("TextAnchorOffsetArray",Wr);class ci extends p{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ci.prototype.size=8;class Yn extends tt{get(n){return new ci(this,n)}}ht("FeatureIndexArray",Yn);class $n extends k{}class Jn extends k{}class xo extends k{}class va extends D{}class zc extends U{}class xa extends J{}class $i extends te{}class Rc extends ae{}class Od extends ue{}class Ni extends he{}class ji extends ie{}class ts extends Se{}class to extends Pe{}class An extends et{}const Nn=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ti}=Nn;class sr{constructor(n=[]){this.segments=n}prepareSegment(n,s,c,f){let v=this.segments[this.segments.length-1];return n>sr.MAX_VERTEX_ARRAY_LENGTH&&Me(`Max vertices per segment is ${sr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>sr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:s.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,c,f){return new sr([{vertexOffset:n,primitiveOffset:s,vertexLength:c,primitiveLength:f,vaos:{},sortKey:0}])}}function Rs(i,n){return 256*(i=pe(Math.floor(i),0,255))+pe(Math.floor(n),0,255)}sr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ht("SegmentVector",sr);const ba=w([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var wa={exports:{}},tf={exports:{}};tf.exports=function(i,n){var s,c,f,v,x,b,S,T;for(c=i.length-(s=3&i.length),f=n,x=3432918353,b=461845907,T=0;T<c;)S=255&i.charCodeAt(T)|(255&i.charCodeAt(++T))<<8|(255&i.charCodeAt(++T))<<16|(255&i.charCodeAt(++T))<<24,++T,f=27492+(65535&(v=5*(65535&(f=(f^=S=(65535&(S=(S=(65535&S)*x+(((S>>>16)*x&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(S=0,s){case 3:S^=(255&i.charCodeAt(T+2))<<16;case 2:S^=(255&i.charCodeAt(T+1))<<8;case 1:f^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(T)))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295}return f^=i.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var xy=tf.exports,rf={exports:{}};rf.exports=function(i,n){for(var s,c=i.length,f=n^c,v=0;c>=4;)s=1540483477*(65535&(s=255&i.charCodeAt(v)|(255&i.charCodeAt(++v))<<8|(255&i.charCodeAt(++v))<<16|(255&i.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),c-=4,++v;switch(c){case 3:f^=(255&i.charCodeAt(v+2))<<16;case 2:f^=(255&i.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&i.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var rs=xy,nf=rf.exports;wa.exports=rs,wa.exports.murmur3=rs,wa.exports.murmur2=nf;var Dc=I(wa.exports);class wl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,c,f){this.ids.push(Lc(n)),this.positions.push(s,c,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Lc(n);let c=0,f=this.ids.length-1;for(;c<f;){const x=c+f>>1;this.ids[x]>=s?f=x:c=x+1}const v=[];for(;this.ids[c]===s;)v.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return v}static serialize(n,s){const c=new Float64Array(n.ids),f=new Uint32Array(n.positions);return Bc(c,f,0,c.length-1),s&&s.push(c.buffer,f.buffer),{ids:c,positions:f}}static deserialize(n){const s=new wl;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Lc(i){const n=+i;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Dc(String(i))}function Bc(i,n,s,c){for(;s<c;){const f=i[s+c>>1];let v=s-1,x=c+1;for(;;){do v++;while(i[v]<f);do x--;while(i[x]>f);if(v>=x)break;Sa(i,v,x),Sa(n,3*v,3*x),Sa(n,3*v+1,3*x+1),Sa(n,3*v+2,3*x+2)}x-s<c-x?(Bc(i,n,s,x),s=x+1):(Bc(i,n,x+1,c),c=x)}}function Sa(i,n,s){const c=i[n];i[n]=i[s],i[s]=c}ht("FeaturePositionMap",wl);class Sl{constructor(n,s){this.gl=n.gl,this.location=s}}class of extends Sl{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class G0 extends Sl{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class H0 extends Sl{constructor(n,s){super(n,s),this.current=Cr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const RT=new Float32Array(16);function by(i){return[Rs(255*i.r,255*i.g),Rs(255*i.b,255*i.a)]}class $d{constructor(n,s,c){this.value=n,this.uniformNames=s.map(f=>`u_${f}`),this.type=c}setUniform(n,s,c){n.set(c.constantOr(this.value))}getBinding(n,s,c){return this.type==="color"?new H0(n,s):new of(n,s)}}class Fc{constructor(n,s){this.uniformNames=s.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,c,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,c){return c.substr(0,9)==="u_pattern"?new G0(n,s):new of(n,s)}}class Ds{constructor(n,s,c,f){this.expression=n,this.type=c,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,s,c,f,v){const x=this.paintVertexArray.length,b=this.expression.evaluate(new jr(0),s,{},f,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,b)}updatePaintArray(n,s,c,f){const v=this.expression.evaluate({zoom:0},c,f);this._setPaintValue(n,s,v)}_setPaintValue(n,s,c){if(this.type==="color"){const f=by(c);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=n;f<s;f++)this.paintVertexArray.emplace(f,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fo{constructor(n,s,c,f,v,x){this.expression=n,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=c,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,c,f,v){const x=this.expression.evaluate(new jr(this.zoom),s,{},f,[],v),b=this.expression.evaluate(new jr(this.zoom+1),s,{},f,[],v),S=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(S,n,x,b)}updatePaintArray(n,s,c,f){const v=this.expression.evaluate({zoom:this.zoom},c,f),x=this.expression.evaluate({zoom:this.zoom+1},c,f);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,c,f){if(this.type==="color"){const v=by(c),x=by(f);for(let b=n;b<s;b++)this.paintVertexArray.emplace(b,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,c,f);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const c=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,f=pe(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,s,c){return new of(n,s)}}class Ca{constructor(n,s,c,f,v,x){this.expression=n,this.type=s,this.useIntegerZoom=c,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,c){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,s.patterns&&s.patterns[this.layerId],c)}updatePaintArray(n,s,c,f,v){this._setPaintValues(n,s,c.patterns&&c.patterns[this.layerId],v)}_setPaintValues(n,s,c,f){if(!f||!c)return;const{min:v,mid:x,max:b}=c,S=f[v],T=f[x],E=f[b];if(S&&T&&E)for(let z=n;z<s;z++)this.zoomInPaintVertexArray.emplace(z,T.tl[0],T.tl[1],T.br[0],T.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],T.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(z,T.tl[0],T.tl[1],T.br[0],T.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],T.pixelRatio,E.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ba.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ba.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class q0{constructor(n,s,c){this.binders={},this._buffers=[];const f=[];for(const v in n.paint._values){if(!c(v))continue;const x=n.paint.get(v);if(!(x instanceof vo&&aa(x.property.specification)))continue;const b=DT(v,n.type),S=x.value,T=x.property.specification.type,E=x.property.useIntegerZoom,z=x.property.specification["property-type"],F=z==="cross-faded"||z==="cross-faded-data-driven";if(S.kind==="constant")this.binders[v]=F?new Fc(S.value,b):new $d(S.value,b,T),f.push(`/u_${v}`);else if(S.kind==="source"||F){const N=Z0(v,T,"source");this.binders[v]=F?new Ca(S,T,E,s,N,n.id):new Ds(S,b,T,N),f.push(`/a_${v}`)}else{const N=Z0(v,T,"composite");this.binders[v]=new Fo(S,b,T,E,s,N),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Ds||s instanceof Fo?s.maxValue:0}populatePaintArrays(n,s,c,f,v){for(const x in this.binders){const b=this.binders[x];(b instanceof Ds||b instanceof Fo||b instanceof Ca)&&b.populatePaintArray(n,s,c,f,v)}}setConstantPatternPositions(n,s){for(const c in this.binders){const f=this.binders[c];f instanceof Fc&&f.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,c,f,v){let x=!1;for(const b in n){const S=s.getPositions(b);for(const T of S){const E=c.feature(T.index);for(const z in this.binders){const F=this.binders[z];if((F instanceof Ds||F instanceof Fo||F instanceof Ca)&&F.expression.isStateDependent===!0){const N=f.paint.get(z);F.expression=N.value,F.updatePaintArray(T.start,T.end,E,n[b],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const c=this.binders[s];(c instanceof $d||c instanceof Fc)&&n.push(...c.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof Ds||c instanceof Fo)for(let f=0;f<c.paintVertexAttributes.length;f++)n.push(c.paintVertexAttributes[f].name);else if(c instanceof Ca)for(let f=0;f<ba.members.length;f++)n.push(ba.members[f].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const c=this.binders[s];if(c instanceof $d||c instanceof Fc||c instanceof Fo)for(const f of c.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const c=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof $d||v instanceof Fc||v instanceof Fo){for(const x of v.uniformNames)if(s[x]){const b=v.getBinding(n,s[x],x);c.push({name:x,property:f,binding:b})}}}return c}setUniforms(n,s,c,f){for(const{name:v,property:x,binding:b}of s)this.binders[x].setUniform(b,f,c.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const c=this.binders[s];if(n&&c instanceof Ca){const f=n.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(c instanceof Ds||c instanceof Fo)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(n){for(const s in this.binders){const c=this.binders[s];(c instanceof Ds||c instanceof Fo||c instanceof Ca)&&c.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Ds||s instanceof Fo||s instanceof Ca)&&s.destroy()}}}class Cl{constructor(n,s,c=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new q0(f,s,c);this.needsUpload=!1,this._featureMap=new wl,this._bufferOffset=0}populatePaintArrays(n,s,c,f,v,x){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,s,f,v,x);s.id!==void 0&&this._featureMap.add(s.id,c,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,c,f){for(const v of c)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function DT(i,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${n}-`,"").replace(/-/g,"_")]}function Z0(i,n,s){const c={color:{source:J,composite:Ot},number:{source:it,composite:J}},f=function(v){return{"line-pattern":{source:$i,composite:$i},"fill-pattern":{source:$i,composite:$i},"fill-extrusion-pattern":{source:$i,composite:$i}}[v]}(i);return f&&f[s]||c[n][s]}ht("ConstantBinder",$d),ht("CrossFadedConstantBinder",Fc),ht("SourceExpressionBinder",Ds),ht("CrossFadedCompositeBinder",Ca),ht("CompositeExpressionBinder",Fo),ht("ProgramConfiguration",q0,{omit:["_buffers"]}),ht("ProgramConfigurationSet",Cl);const fn=8192,wy=Math.pow(2,14)-1,X0=-wy-1;function kl(i){const n=fn/i.extent,s=i.loadGeometry();for(let c=0;c<s.length;c++){const f=s[c];for(let v=0;v<f.length;v++){const x=f[v],b=Math.round(x.x*n),S=Math.round(x.y*n);x.x=pe(b,X0,wy),x.y=pe(S,X0,wy),(b<x.x||b>x.x+1||S<x.y||S>x.y+1)&&Me("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Tl(i,n){return{type:i.type,id:i.id,properties:i.properties,geometry:n?kl(i):[]}}function sf(i,n,s,c,f){i.emplaceBack(2*n+(c+1)/2,2*s+(f+1)/2)}class Sy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Jn,this.indexArray=new to,this.segments=new sr,this.programConfigurations=new Cl(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){const f=this.layers[0],v=[];let x=null,b=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),b=!x.isConstant());for(const{feature:S,id:T,index:E,sourceLayerIndex:z}of n){const F=this.layers[0]._featureFilter.needGeometry,N=Tl(S,F);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),N,c))continue;const H=b?x.evaluate(N,{},c):void 0,K={id:T,properties:S.properties,type:S.type,sourceLayerIndex:z,index:E,geometry:F?N.geometry:kl(S),patterns:{},sortKey:H};v.push(K)}b&&v.sort((S,T)=>S.sortKey-T.sortKey);for(const S of v){const{geometry:T,index:E,sourceLayerIndex:z}=S,F=n[E].feature;this.addFeature(S,T,E,c),s.featureIndex.insert(F,T,E,z,this.index)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ti),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,c,f){for(const v of s)for(const x of v){const b=x.x,S=x.y;if(b<0||b>=fn||S<0||S>=fn)continue;const T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),E=T.vertexLength;sf(this.layoutVertexArray,b,S,-1,-1),sf(this.layoutVertexArray,b,S,1,-1),sf(this.layoutVertexArray,b,S,1,1),sf(this.layoutVertexArray,b,S,-1,1),this.indexArray.emplaceBack(E,E+1,E+2),this.indexArray.emplaceBack(E,E+3,E+2),T.vertexLength+=4,T.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,{},f)}}function K0(i,n){for(let s=0;s<i.length;s++)if(Oc(n,i[s]))return!0;for(let s=0;s<n.length;s++)if(Oc(i,n[s]))return!0;return!!Cy(i,n)}function LT(i,n,s){return!!Oc(i,n)||!!ky(n,i,s)}function Y0(i,n){if(i.length===1)return Q0(n,i[0]);for(let s=0;s<n.length;s++){const c=n[s];for(let f=0;f<c.length;f++)if(Oc(i,c[f]))return!0}for(let s=0;s<i.length;s++)if(Q0(n,i[s]))return!0;for(let s=0;s<n.length;s++)if(Cy(i,n[s]))return!0;return!1}function BT(i,n,s){if(i.length>1){if(Cy(i,n))return!0;for(let c=0;c<n.length;c++)if(ky(n[c],i,s))return!0}for(let c=0;c<i.length;c++)if(ky(i[c],n,s))return!0;return!1}function Cy(i,n){if(i.length===0||n.length===0)return!1;for(let s=0;s<i.length-1;s++){const c=i[s],f=i[s+1];for(let v=0;v<n.length-1;v++)if(FT(c,f,n[v],n[v+1]))return!0}return!1}function FT(i,n,s,c){return Ie(i,s,c)!==Ie(n,s,c)&&Ie(i,n,s)!==Ie(i,n,c)}function ky(i,n,s){const c=s*s;if(n.length===1)return i.distSqr(n[0])<c;for(let f=1;f<n.length;f++)if(J0(i,n[f-1],n[f])<c)return!0;return!1}function J0(i,n,s){const c=n.distSqr(s);if(c===0)return i.distSqr(n);const f=((i.x-n.x)*(s.x-n.x)+(i.y-n.y)*(s.y-n.y))/c;return i.distSqr(f<0?n:f>1?s:s.sub(n)._mult(f)._add(n))}function Q0(i,n){let s,c,f,v=!1;for(let x=0;x<i.length;x++){s=i[x];for(let b=0,S=s.length-1;b<s.length;S=b++)c=s[b],f=s[S],c.y>n.y!=f.y>n.y&&n.x<(f.x-c.x)*(n.y-c.y)/(f.y-c.y)+c.x&&(v=!v)}return v}function Oc(i,n){let s=!1;for(let c=0,f=i.length-1;c<i.length;f=c++){const v=i[c],x=i[f];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function OT(i,n,s){const c=s[0],f=s[2];if(i.x<c.x&&n.x<c.x||i.x>f.x&&n.x>f.x||i.y<c.y&&n.y<c.y||i.y>f.y&&n.y>f.y)return!1;const v=Ie(i,n,s[0]);return v!==Ie(i,n,s[1])||v!==Ie(i,n,s[2])||v!==Ie(i,n,s[3])}function Nd(i,n,s){const c=n.paint.get(i).value;return c.kind==="constant"?c.value:s.programConfigurations.get(n.id).getMaxValue(i)}function af(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function lf(i,n,s,c,f){if(!n[0]&&!n[1])return i;const v=L.convert(n)._mult(f);s==="viewport"&&v._rotate(-c);const x=[];for(let b=0;b<i.length;b++)x.push(i[b].sub(v));return x}let eb,tb;ht("CircleBucket",Sy,{omit:["layers"]});var $T={get paint(){return tb=tb||new _({"circle-radius":new Mt(ze.paint_circle["circle-radius"]),"circle-color":new Mt(ze.paint_circle["circle-color"]),"circle-blur":new Mt(ze.paint_circle["circle-blur"]),"circle-opacity":new Mt(ze.paint_circle["circle-opacity"]),"circle-translate":new ft(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new ft(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ft(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ft(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mt(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mt(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mt(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return eb=eb||new _({"circle-sort-key":new Mt(ze.layout_circle["circle-sort-key"])})}},ui=1e-6,$c=typeof Float32Array<"u"?Float32Array:Array;function Ty(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function rb(i,n,s){var c=n[0],f=n[1],v=n[2],x=n[3],b=n[4],S=n[5],T=n[6],E=n[7],z=n[8],F=n[9],N=n[10],H=n[11],K=n[12],oe=n[13],ce=n[14],Te=n[15],ye=s[0],Ce=s[1],Fe=s[2],He=s[3];return i[0]=ye*c+Ce*b+Fe*z+He*K,i[1]=ye*f+Ce*S+Fe*F+He*oe,i[2]=ye*v+Ce*T+Fe*N+He*ce,i[3]=ye*x+Ce*E+Fe*H+He*Te,i[4]=(ye=s[4])*c+(Ce=s[5])*b+(Fe=s[6])*z+(He=s[7])*K,i[5]=ye*f+Ce*S+Fe*F+He*oe,i[6]=ye*v+Ce*T+Fe*N+He*ce,i[7]=ye*x+Ce*E+Fe*H+He*Te,i[8]=(ye=s[8])*c+(Ce=s[9])*b+(Fe=s[10])*z+(He=s[11])*K,i[9]=ye*f+Ce*S+Fe*F+He*oe,i[10]=ye*v+Ce*T+Fe*N+He*ce,i[11]=ye*x+Ce*E+Fe*H+He*Te,i[12]=(ye=s[12])*c+(Ce=s[13])*b+(Fe=s[14])*z+(He=s[15])*K,i[13]=ye*f+Ce*S+Fe*F+He*oe,i[14]=ye*v+Ce*T+Fe*N+He*ce,i[15]=ye*x+Ce*E+Fe*H+He*Te,i}Math.hypot||(Math.hypot=function(){for(var i=0,n=arguments.length;n--;)i+=arguments[n]*arguments[n];return Math.sqrt(i)});var jd,NT=rb;function cf(i,n,s){var c=n[0],f=n[1],v=n[2],x=n[3];return i[0]=s[0]*c+s[4]*f+s[8]*v+s[12]*x,i[1]=s[1]*c+s[5]*f+s[9]*v+s[13]*x,i[2]=s[2]*c+s[6]*f+s[10]*v+s[14]*x,i[3]=s[3]*c+s[7]*f+s[11]*v+s[15]*x,i}jd=new $c(4),$c!=Float32Array&&(jd[0]=0,jd[1]=0,jd[2]=0,jd[3]=0);class jT extends a{constructor(n){super(n,$T)}createBucket(n){return new Sy(n)}queryRadius(n){const s=n;return Nd("circle-radius",this,s)+Nd("circle-stroke-width",this,s)+af(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,c,f,v,x,b,S){const T=lf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,b),E=this.paint.get("circle-radius").evaluate(s,c)+this.paint.get("circle-stroke-width").evaluate(s,c),z=this.paint.get("circle-pitch-alignment")==="map",F=z?T:function(H,K){return H.map(oe=>nb(oe,K))}(T,S),N=z?E*b:E;for(const H of f)for(const K of H){const oe=z?K:nb(K,S);let ce=N;const Te=cf([],[K.x,K.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ce*=Te[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ce*=x.cameraToCenterDistance/Te[3]),LT(F,oe,ce))return!0}return!1}}function nb(i,n){const s=cf([],[i.x,i.y,0,1],n);return new L(s[0]/s[3],s[1]/s[3])}class ib extends Sy{}let ob;ht("HeatmapBucket",ib,{omit:["layers"]});var VT={get paint(){return ob=ob||new _({"heatmap-radius":new Mt(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mt(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ft(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Fd(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ft(ze.paint_heatmap["heatmap-opacity"])})}};function Iy(i,{width:n,height:s},c,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*s*c)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*s*c}`)}else f=new Uint8Array(n*s*c);return i.width=n,i.height=s,i.data=f,i}function sb(i,{width:n,height:s},c){if(n===i.width&&s===i.height)return;const f=Iy({},{width:n,height:s},c);Ey(i,f,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,n),height:Math.min(i.height,s)},c),i.width=n,i.height=s,i.data=f.data}function Ey(i,n,s,c,f,v){if(f.width===0||f.height===0)return n;if(f.width>i.width||f.height>i.height||s.x>i.width-f.width||s.y>i.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||c.x>n.width-f.width||c.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=i.data,b=n.data;if(x===b)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<f.height;S++){const T=((s.y+S)*i.width+s.x)*v,E=((c.y+S)*n.width+c.x)*v;for(let z=0;z<f.width*v;z++)b[E+z]=x[T+z]}return n}class Vd{constructor(n,s){Iy(this,n,1,s)}resize(n){sb(this,n,1)}clone(){return new Vd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,c,f,v){Ey(n,s,c,f,v,1)}}class ro{constructor(n,s){Iy(this,n,4,s)}resize(n){sb(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ro({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,c,f,v){Ey(n,s,c,f,v,4)}}function ab(i){const n={},s=i.resolution||256,c=i.clips?i.clips.length:1,f=i.image||new ro({width:s,height:c});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,b,S)=>{n[i.evaluationKey]=S;const T=i.expression.evaluate(n);f.data[x+b+0]=Math.floor(255*T.r/T.a),f.data[x+b+1]=Math.floor(255*T.g/T.a),f.data[x+b+2]=Math.floor(255*T.b/T.a),f.data[x+b+3]=Math.floor(255*T.a)};if(i.clips)for(let x=0,b=0;x<c;++x,b+=4*s)for(let S=0,T=0;S<s;S++,T+=4){const E=S/(s-1),{start:z,end:F}=i.clips[x];v(b,T,z*(1-E)+F*E)}else for(let x=0,b=0;x<s;x++,b+=4)v(0,b,x/(s-1));return f}ht("AlphaImage",Vd),ht("RGBAImage",ro);const Py="big-fb";class UT extends a{createBucket(n){return new ib(n)}constructor(n){super(n,VT),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ab({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Py)&&this.heatmapFbos.delete(Py)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let lb;var WT={get paint(){return lb=lb||new _({"hillshade-illumination-direction":new ft(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ft(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ft(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ft(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ft(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ft(ze.paint_hillshade["hillshade-accent-color"])})}};class GT extends a{constructor(n){super(n,WT)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const HT=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:qT}=HT;function cb(i,n,s=2){const c=n&&n.length,f=c?n[0]*s:i.length;let v=ub(i,0,f,s,!0);const x=[];if(!v||v.next===v.prev)return x;let b,S,T;if(c&&(v=function(E,z,F,N){const H=[];for(let K=0,oe=z.length;K<oe;K++){const ce=ub(E,z[K]*N,K<oe-1?z[K+1]*N:E.length,N,!1);ce===ce.next&&(ce.steiner=!0),H.push(tI(ce))}H.sort(JT);for(let K=0;K<H.length;K++)F=QT(H[K],F);return F}(i,n,v,s)),i.length>80*s){b=1/0,S=1/0;let E=-1/0,z=-1/0;for(let F=s;F<f;F+=s){const N=i[F],H=i[F+1];N<b&&(b=N),H<S&&(S=H),N>E&&(E=N),H>z&&(z=H)}T=Math.max(E-b,z-S),T=T!==0?32767/T:0}return Ud(v,x,s,b,S,T,0),x}function ub(i,n,s,c,f){let v;if(f===function(x,b,S,T){let E=0;for(let z=b,F=S-T;z<S;z+=T)E+=(x[F]-x[z])*(x[z+1]+x[F+1]),F=z;return E}(i,n,s,c)>0)for(let x=n;x<s;x+=c)v=pb(x/c|0,i[x],i[x+1],v);else for(let x=s-c;x>=n;x-=c)v=pb(x/c|0,i[x],i[x+1],v);return v&&uf(v,v.next)&&(Gd(v),v=v.next),v}function Il(i,n){if(!i)return i;n||(n=i);let s,c=i;do if(s=!1,c.steiner||!uf(c,c.next)&&sn(c.prev,c,c.next)!==0)c=c.next;else{if(Gd(c),c=n=c.prev,c===c.next)break;s=!0}while(s||c!==n);return n}function Ud(i,n,s,c,f,v,x){if(!i)return;!x&&v&&function(S,T,E,z){let F=S;do F.z===0&&(F.z=My(F.x,F.y,T,E,z)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==S);F.prevZ.nextZ=null,F.prevZ=null,function(N){let H,K=1;do{let oe,ce=N;N=null;let Te=null;for(H=0;ce;){H++;let ye=ce,Ce=0;for(let He=0;He<K&&(Ce++,ye=ye.nextZ,ye);He++);let Fe=K;for(;Ce>0||Fe>0&&ye;)Ce!==0&&(Fe===0||!ye||ce.z<=ye.z)?(oe=ce,ce=ce.nextZ,Ce--):(oe=ye,ye=ye.nextZ,Fe--),Te?Te.nextZ=oe:N=oe,oe.prevZ=Te,Te=oe;ce=ye}Te.nextZ=null,K*=2}while(H>1)}(F)}(i,c,f,v);let b=i;for(;i.prev!==i.next;){const S=i.prev,T=i.next;if(v?XT(i,c,f,v):ZT(i))n.push(S.i,i.i,T.i),Gd(i),i=T.next,b=T.next;else if((i=T)===b){x?x===1?Ud(i=KT(Il(i),n),n,s,c,f,v,2):x===2&&YT(i,n,s,c,f,v):Ud(Il(i),n,s,c,f,v,1);break}}}function ZT(i){const n=i.prev,s=i,c=i.next;if(sn(n,s,c)>=0)return!1;const f=n.x,v=s.x,x=c.x,b=n.y,S=s.y,T=c.y,E=f<v?f<x?f:x:v<x?v:x,z=b<S?b<T?b:T:S<T?S:T,F=f>v?f>x?f:x:v>x?v:x,N=b>S?b>T?b:T:S>T?S:T;let H=c.next;for(;H!==n;){if(H.x>=E&&H.x<=F&&H.y>=z&&H.y<=N&&Nc(f,b,v,S,x,T,H.x,H.y)&&sn(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function XT(i,n,s,c){const f=i.prev,v=i,x=i.next;if(sn(f,v,x)>=0)return!1;const b=f.x,S=v.x,T=x.x,E=f.y,z=v.y,F=x.y,N=b<S?b<T?b:T:S<T?S:T,H=E<z?E<F?E:F:z<F?z:F,K=b>S?b>T?b:T:S>T?S:T,oe=E>z?E>F?E:F:z>F?z:F,ce=My(N,H,n,s,c),Te=My(K,oe,n,s,c);let ye=i.prevZ,Ce=i.nextZ;for(;ye&&ye.z>=ce&&Ce&&Ce.z<=Te;){if(ye.x>=N&&ye.x<=K&&ye.y>=H&&ye.y<=oe&&ye!==f&&ye!==x&&Nc(b,E,S,z,T,F,ye.x,ye.y)&&sn(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,Ce.x>=N&&Ce.x<=K&&Ce.y>=H&&Ce.y<=oe&&Ce!==f&&Ce!==x&&Nc(b,E,S,z,T,F,Ce.x,Ce.y)&&sn(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;ye&&ye.z>=ce;){if(ye.x>=N&&ye.x<=K&&ye.y>=H&&ye.y<=oe&&ye!==f&&ye!==x&&Nc(b,E,S,z,T,F,ye.x,ye.y)&&sn(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;Ce&&Ce.z<=Te;){if(Ce.x>=N&&Ce.x<=K&&Ce.y>=H&&Ce.y<=oe&&Ce!==f&&Ce!==x&&Nc(b,E,S,z,T,F,Ce.x,Ce.y)&&sn(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function KT(i,n){let s=i;do{const c=s.prev,f=s.next.next;!uf(c,f)&&db(c,s,s.next,f)&&Wd(c,f)&&Wd(f,c)&&(n.push(c.i,s.i,f.i),Gd(s),Gd(s.next),s=i=f),s=s.next}while(s!==i);return Il(s)}function YT(i,n,s,c,f,v){let x=i;do{let b=x.next.next;for(;b!==x.prev;){if(x.i!==b.i&&rI(x,b)){let S=hb(x,b);return x=Il(x,x.next),S=Il(S,S.next),Ud(x,n,s,c,f,v,0),void Ud(S,n,s,c,f,v,0)}b=b.next}x=x.next}while(x!==i)}function JT(i,n){return i.x-n.x}function QT(i,n){const s=function(f,v){let x=v;const b=f.x,S=f.y;let T,E=-1/0;do{if(S<=x.y&&S>=x.next.y&&x.next.y!==x.y){const K=x.x+(S-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(K<=b&&K>E&&(E=K,T=x.x<x.next.x?x:x.next,K===b))return T}x=x.next}while(x!==v);if(!T)return null;const z=T,F=T.x,N=T.y;let H=1/0;x=T;do{if(b>=x.x&&x.x>=F&&b!==x.x&&Nc(S<N?b:E,S,F,N,S<N?E:b,S,x.x,x.y)){const K=Math.abs(S-x.y)/(b-x.x);Wd(x,f)&&(K<H||K===H&&(x.x>T.x||x.x===T.x&&eI(T,x)))&&(T=x,H=K)}x=x.next}while(x!==z);return T}(i,n);if(!s)return n;const c=hb(s,i);return Il(c,c.next),Il(s,s.next)}function eI(i,n){return sn(i.prev,i,n.prev)<0&&sn(n.next,i,i.next)<0}function My(i,n,s,c,f){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-s)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-c)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function tI(i){let n=i,s=i;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==i);return s}function Nc(i,n,s,c,f,v,x,b){return(f-x)*(n-b)>=(i-x)*(v-b)&&(i-x)*(c-b)>=(s-x)*(n-b)&&(s-x)*(v-b)>=(f-x)*(c-b)}function rI(i,n){return i.next.i!==n.i&&i.prev.i!==n.i&&!function(s,c){let f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==c.i&&f.next.i!==c.i&&db(f,f.next,s,c))return!0;f=f.next}while(f!==s);return!1}(i,n)&&(Wd(i,n)&&Wd(n,i)&&function(s,c){let f=s,v=!1;const x=(s.x+c.x)/2,b=(s.y+c.y)/2;do f.y>b!=f.next.y>b&&f.next.y!==f.y&&x<(f.next.x-f.x)*(b-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==s);return v}(i,n)&&(sn(i.prev,i,n.prev)||sn(i,n.prev,n))||uf(i,n)&&sn(i.prev,i,i.next)>0&&sn(n.prev,n,n.next)>0)}function sn(i,n,s){return(n.y-i.y)*(s.x-n.x)-(n.x-i.x)*(s.y-n.y)}function uf(i,n){return i.x===n.x&&i.y===n.y}function db(i,n,s,c){const f=hf(sn(i,n,s)),v=hf(sn(i,n,c)),x=hf(sn(s,c,i)),b=hf(sn(s,c,n));return f!==v&&x!==b||!(f!==0||!df(i,s,n))||!(v!==0||!df(i,c,n))||!(x!==0||!df(s,i,c))||!(b!==0||!df(s,n,c))}function df(i,n,s){return n.x<=Math.max(i.x,s.x)&&n.x>=Math.min(i.x,s.x)&&n.y<=Math.max(i.y,s.y)&&n.y>=Math.min(i.y,s.y)}function hf(i){return i>0?1:i<0?-1:0}function Wd(i,n){return sn(i.prev,i,i.next)<0?sn(i,n,i.next)>=0&&sn(i,i.prev,n)>=0:sn(i,n,i.prev)<0||sn(i,i.next,n)<0}function hb(i,n){const s=Ay(i.i,i.x,i.y),c=Ay(n.i,n.x,n.y),f=i.next,v=n.prev;return i.next=n,n.prev=i,s.next=f,f.prev=s,c.next=s,s.prev=c,v.next=c,c.prev=v,c}function pb(i,n,s,c){const f=Ay(i,n,s);return c?(f.next=c.next,f.prev=c,c.next.prev=f,c.next=f):(f.prev=f,f.next=f),f}function Gd(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Ay(i,n,s){return{i,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function zy(i,n,s){const c=s.patternDependencies;let f=!1;for(const v of n){const x=v.paint.get(`${i}-pattern`);x.isConstant()||(f=!0);const b=x.constantOr(null);b&&(f=!0,c[b.to]=!0,c[b.from]=!0)}return f}function Ry(i,n,s,c,f){const v=f.patternDependencies;for(const x of n){const b=x.paint.get(`${i}-pattern`).value;if(b.kind!=="constant"){let S=b.evaluate({zoom:c-1},s,{},f.availableImages),T=b.evaluate({zoom:c},s,{},f.availableImages),E=b.evaluate({zoom:c+1},s,{},f.availableImages);S=S&&S.name?S.name:S,T=T&&T.name?T.name:T,E=E&&E.name?E.name:E,v[S]=!0,v[T]=!0,v[E]=!0,s.patterns[x.id]={min:S,mid:T,max:E}}}return s}class Dy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xo,this.indexArray=new to,this.indexArray2=new An,this.programConfigurations=new Cl(n.layers,n.zoom),this.segments=new sr,this.segments2=new sr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){this.hasPattern=zy("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:b,id:S,index:T,sourceLayerIndex:E}of n){const z=this.layers[0]._featureFilter.needGeometry,F=Tl(b,z);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),F,c))continue;const N=v?f.evaluate(F,{},c,s.availableImages):void 0,H={id:S,properties:b.properties,type:b.type,sourceLayerIndex:E,index:T,geometry:z?F.geometry:kl(b),patterns:{},sortKey:N};x.push(H)}v&&x.sort((b,S)=>b.sortKey-S.sortKey);for(const b of x){const{geometry:S,index:T,sourceLayerIndex:E}=b;if(this.hasPattern){const z=Ry("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(z)}else this.addFeature(b,S,T,c,{});s.featureIndex.insert(n[T].feature,S,T,E,this.index)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}addFeatures(n,s,c){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,qT),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,c,f,v){for(const x of uc(s,500)){let b=0;for(const N of x)b+=N.length;const S=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),T=S.vertexLength,E=[],z=[];for(const N of x){if(N.length===0)continue;N!==x[0]&&z.push(E.length/2);const H=this.segments2.prepareSegment(N.length,this.layoutVertexArray,this.indexArray2),K=H.vertexLength;this.layoutVertexArray.emplaceBack(N[0].x,N[0].y),this.indexArray2.emplaceBack(K+N.length-1,K),E.push(N[0].x),E.push(N[0].y);for(let oe=1;oe<N.length;oe++)this.layoutVertexArray.emplaceBack(N[oe].x,N[oe].y),this.indexArray2.emplaceBack(K+oe-1,K+oe),E.push(N[oe].x),E.push(N[oe].y);H.vertexLength+=N.length,H.primitiveLength+=N.length}const F=cb(E,z);for(let N=0;N<F.length;N+=3)this.indexArray.emplaceBack(T+F[N],T+F[N+1],T+F[N+2]);S.vertexLength+=b,S.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,f)}}let fb,mb;ht("FillBucket",Dy,{omit:["layers","patternFeatures"]});var nI={get paint(){return mb=mb||new _({"fill-antialias":new ft(ze.paint_fill["fill-antialias"]),"fill-opacity":new Mt(ze.paint_fill["fill-opacity"]),"fill-color":new Mt(ze.paint_fill["fill-color"]),"fill-outline-color":new Mt(ze.paint_fill["fill-outline-color"]),"fill-translate":new ft(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new ft(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new Mc(ze.paint_fill["fill-pattern"])})},get layout(){return fb=fb||new _({"fill-sort-key":new Mt(ze.layout_fill["fill-sort-key"])})}};class iI extends a{constructor(n){super(n,nI)}recalculate(n,s){super.recalculate(n,s);const c=this.paint._values["fill-outline-color"];c.value.kind==="constant"&&c.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Dy(n)}queryRadius(){return af(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,c,f,v,x,b){return Y0(lf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,b),f)}isTileClipped(){return!0}}const oI=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),sI=w([{name:"a_centroid",components:2,type:"Int16"}],4),{members:aI}=oI;var ka={},lI=M,gb=jc;function jc(i,n,s,c,f){this.properties={},this.extent=s,this.type=0,this._pbf=i,this._geometry=-1,this._keys=c,this._values=f,i.readFields(cI,this,n)}function cI(i,n,s){i==1?n.id=s.readVarint():i==2?function(c,f){for(var v=c.readVarint()+c.pos;c.pos<v;){var x=f._keys[c.readVarint()],b=f._values[c.readVarint()];f.properties[x]=b}}(s,n):i==3?n.type=s.readVarint():i==4&&(n._geometry=s.pos)}function uI(i){for(var n,s,c=0,f=0,v=i.length,x=v-1;f<v;x=f++)c+=((s=i[x]).x-(n=i[f]).x)*(n.y+s.y);return c}jc.types=["Unknown","Point","LineString","Polygon"],jc.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var n,s=i.readVarint()+i.pos,c=1,f=0,v=0,x=0,b=[];i.pos<s;){if(f<=0){var S=i.readVarint();c=7&S,f=S>>3}if(f--,c===1||c===2)v+=i.readSVarint(),x+=i.readSVarint(),c===1&&(n&&b.push(n),n=[]),n.push(new lI(v,x));else{if(c!==7)throw new Error("unknown command "+c);n&&n.push(n[0].clone())}}return n&&b.push(n),b},jc.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var n=i.readVarint()+i.pos,s=1,c=0,f=0,v=0,x=1/0,b=-1/0,S=1/0,T=-1/0;i.pos<n;){if(c<=0){var E=i.readVarint();s=7&E,c=E>>3}if(c--,s===1||s===2)(f+=i.readSVarint())<x&&(x=f),f>b&&(b=f),(v+=i.readSVarint())<S&&(S=v),v>T&&(T=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,S,b,T]},jc.prototype.toGeoJSON=function(i,n,s){var c,f,v=this.extent*Math.pow(2,s),x=this.extent*i,b=this.extent*n,S=this.loadGeometry(),T=jc.types[this.type];function E(N){for(var H=0;H<N.length;H++){var K=N[H];N[H]=[360*(K.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+b)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(c=0;c<S.length;c++)z[c]=S[c][0];E(S=z);break;case 2:for(c=0;c<S.length;c++)E(S[c]);break;case 3:for(S=function(N){var H=N.length;if(H<=1)return[N];for(var K,oe,ce=[],Te=0;Te<H;Te++){var ye=uI(N[Te]);ye!==0&&(oe===void 0&&(oe=ye<0),oe===ye<0?(K&&ce.push(K),K=[N[Te]]):K.push(N[Te]))}return K&&ce.push(K),ce}(S),c=0;c<S.length;c++)for(f=0;f<S[c].length;f++)E(S[c][f])}S.length===1?S=S[0]:T="Multi"+T;var F={type:"Feature",geometry:{type:T,coordinates:S},properties:this.properties};return"id"in this&&(F.id=this.id),F};var dI=gb,yb=_b;function _b(i,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(hI,this,n),this.length=this._features.length}function hI(i,n,s){i===15?n.version=s.readVarint():i===1?n.name=s.readString():i===5?n.extent=s.readVarint():i===2?n._features.push(s.pos):i===3?n._keys.push(s.readString()):i===4&&n._values.push(function(c){for(var f=null,v=c.readVarint()+c.pos;c.pos<v;){var x=c.readVarint()>>3;f=x===1?c.readString():x===2?c.readFloat():x===3?c.readDouble():x===4?c.readVarint64():x===5?c.readVarint():x===6?c.readSVarint():x===7?c.readBoolean():null}return f}(s))}_b.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var n=this._pbf.readVarint()+this._pbf.pos;return new dI(this._pbf,n,this.extent,this._keys,this._values)};var pI=yb;function fI(i,n,s){if(i===3){var c=new pI(s,s.readVarint()+s.pos);c.length&&(n[c.name]=c)}}ka.VectorTile=function(i,n){this.layers=i.readFields(fI,{},n)},ka.VectorTileFeature=gb,ka.VectorTileLayer=yb;const mI=ka.VectorTileFeature.types,Ly=Math.pow(2,13);function Hd(i,n,s,c,f,v,x,b){i.emplaceBack(n,s,2*Math.floor(c*Ly)+x,f*Ly*2,v*Ly*2,Math.round(b))}class By{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new va,this.centroidVertexArray=new $n,this.indexArray=new to,this.programConfigurations=new Cl(n.layers,n.zoom),this.segments=new sr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){this.features=[],this.hasPattern=zy("fill-extrusion",this.layers,s);for(const{feature:f,id:v,index:x,sourceLayerIndex:b}of n){const S=this.layers[0]._featureFilter.needGeometry,T=Tl(f,S);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),T,c))continue;const E={id:v,sourceLayerIndex:b,index:x,geometry:S?T.geometry:kl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Ry("fill-extrusion",this.layers,E,this.zoom,s)):this.addFeature(E,E.geometry,x,c,{}),s.featureIndex.insert(f,E.geometry,x,b,this.index,!0)}}addFeatures(n,s,c){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,s,c)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,aI),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,sI.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,c,f,v){for(const x of uc(s,500)){const b={x:0,y:0,vertexCount:0};let S=0;for(const H of x)S+=H.length;let T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const H of x){if(H.length===0||yI(H))continue;let K=0;for(let oe=0;oe<H.length;oe++){const ce=H[oe];if(oe>=1){const Te=H[oe-1];if(!gI(ce,Te)){T.vertexLength+4>sr.MAX_VERTEX_ARRAY_LENGTH&&(T=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ye=ce.sub(Te)._perp()._unit(),Ce=Te.dist(ce);K+Ce>32768&&(K=0),Hd(this.layoutVertexArray,ce.x,ce.y,ye.x,ye.y,0,0,K),Hd(this.layoutVertexArray,ce.x,ce.y,ye.x,ye.y,0,1,K),b.x+=2*ce.x,b.y+=2*ce.y,b.vertexCount+=2,K+=Ce,Hd(this.layoutVertexArray,Te.x,Te.y,ye.x,ye.y,0,0,K),Hd(this.layoutVertexArray,Te.x,Te.y,ye.x,ye.y,0,1,K),b.x+=2*Te.x,b.y+=2*Te.y,b.vertexCount+=2;const Fe=T.vertexLength;this.indexArray.emplaceBack(Fe,Fe+2,Fe+1),this.indexArray.emplaceBack(Fe+1,Fe+2,Fe+3),T.vertexLength+=4,T.primitiveLength+=2}}}}if(T.vertexLength+S>sr.MAX_VERTEX_ARRAY_LENGTH&&(T=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),mI[n.type]!=="Polygon")continue;const E=[],z=[],F=T.vertexLength;for(const H of x)if(H.length!==0){H!==x[0]&&z.push(E.length/2);for(let K=0;K<H.length;K++){const oe=H[K];Hd(this.layoutVertexArray,oe.x,oe.y,0,0,1,1,0),b.x+=oe.x,b.y+=oe.y,b.vertexCount+=1,E.push(oe.x),E.push(oe.y)}}const N=cb(E,z);for(let H=0;H<N.length;H+=3)this.indexArray.emplaceBack(F+N[H],F+N[H+2],F+N[H+1]);T.primitiveLength+=N.length/3,T.vertexLength+=S;for(let H=0;H<b.vertexCount;H++){const K=Math.floor(b.x/b.vertexCount),oe=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(K,oe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,f)}}function gI(i,n){return i.x===n.x&&(i.x<0||i.x>fn)||i.y===n.y&&(i.y<0||i.y>fn)}function yI(i){return i.every(n=>n.x<0)||i.every(n=>n.x>fn)||i.every(n=>n.y<0)||i.every(n=>n.y>fn)}let vb;ht("FillExtrusionBucket",By,{omit:["layers","features"]});var _I={get paint(){return vb=vb||new _({"fill-extrusion-opacity":new ft(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mt(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ft(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ft(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Mc(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mt(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mt(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ft(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vI extends a{constructor(n){super(n,_I)}createBucket(n){return new By(n)}queryRadius(){return af(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,c,f,v,x,b,S){const T=lf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,b),E=this.paint.get("fill-extrusion-height").evaluate(s,c),z=this.paint.get("fill-extrusion-base").evaluate(s,c),F=function(H,K,oe,ce){const Te=[];for(const ye of H){const Ce=[ye.x,ye.y,0,1];cf(Ce,Ce,K),Te.push(new L(Ce[0]/Ce[3],Ce[1]/Ce[3]))}return Te}(T,S),N=function(H,K,oe,ce){const Te=[],ye=[],Ce=ce[8]*K,Fe=ce[9]*K,He=ce[10]*K,ct=ce[11]*K,Et=ce[8]*oe,st=ce[9]*oe,nt=ce[10]*oe,_t=ce[11]*oe;for(const pt of H){const dt=[],Ne=[];for(const bt of pt){const gt=bt.x,Bt=bt.y,zr=ce[0]*gt+ce[4]*Bt+ce[12],Pr=ce[1]*gt+ce[5]*Bt+ce[13],Sn=ce[2]*gt+ce[6]*Bt+ce[14],bo=ce[3]*gt+ce[7]*Bt+ce[15],Vn=Sn+He,Cn=bo+ct,di=zr+Et,hi=Pr+st,pi=Sn+nt,tn=bo+_t,kn=new L((zr+Ce)/Cn,(Pr+Fe)/Cn);kn.z=Vn/Cn,dt.push(kn);const Qn=new L(di/tn,hi/tn);Qn.z=pi/tn,Ne.push(Qn)}Te.push(dt),ye.push(Ne)}return[Te,ye]}(f,z,E,S);return function(H,K,oe){let ce=1/0;Y0(oe,K)&&(ce=xb(oe,K[0]));for(let Te=0;Te<K.length;Te++){const ye=K[Te],Ce=H[Te];for(let Fe=0;Fe<ye.length-1;Fe++){const He=ye[Fe],ct=[He,ye[Fe+1],Ce[Fe+1],Ce[Fe],He];K0(oe,ct)&&(ce=Math.min(ce,xb(oe,ct)))}}return ce!==1/0&&ce}(N[0],N[1],F)}}function qd(i,n){return i.x*n.x+i.y*n.y}function xb(i,n){if(i.length===1){let s=0;const c=n[s++];let f;for(;!f||c.equals(f);)if(f=n[s++],!f)return 1/0;for(;s<n.length;s++){const v=n[s],x=i[0],b=f.sub(c),S=v.sub(c),T=x.sub(c),E=qd(b,b),z=qd(b,S),F=qd(S,S),N=qd(T,b),H=qd(T,S),K=E*F-z*z,oe=(F*N-z*H)/K,ce=(E*H-z*N)/K,Te=c.z*(1-oe-ce)+f.z*oe+v.z*ce;if(isFinite(Te))return Te}return 1/0}{let s=1/0;for(const c of n)s=Math.min(s,c.z);return s}}const xI=w([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:bI}=xI,wI=w([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:SI}=wI,CI=ka.VectorTileFeature.types,kI=Math.cos(Math.PI/180*37.5),bb=Math.pow(2,14)/.5;class Fy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new zc,this.layoutVertexArray2=new xa,this.indexArray=new to,this.programConfigurations=new Cl(n.layers,n.zoom),this.segments=new sr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,c){this.hasPattern=zy("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:b,id:S,index:T,sourceLayerIndex:E}of n){const z=this.layers[0]._featureFilter.needGeometry,F=Tl(b,z);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),F,c))continue;const N=v?f.evaluate(F,{},c):void 0,H={id:S,properties:b.properties,type:b.type,sourceLayerIndex:E,index:T,geometry:z?F.geometry:kl(b),patterns:{},sortKey:N};x.push(H)}v&&x.sort((b,S)=>b.sortKey-S.sortKey);for(const b of x){const{geometry:S,index:T,sourceLayerIndex:E}=b;if(this.hasPattern){const z=Ry("line",this.layers,b,this.zoom,s);this.patternFeatures.push(z)}else this.addFeature(b,S,T,c,{});s.featureIndex.insert(n[T].feature,S,T,E,this.index)}}update(n,s,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,c)}addFeatures(n,s,c){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,SI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,bI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,c,f,v){const x=this.layers[0].layout,b=x.get("line-join").evaluate(n,{}),S=x.get("line-cap"),T=x.get("line-miter-limit"),E=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const z of s)this.addLine(z,n,b,S,T,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,f)}addLine(n,s,c,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ce=0;ce<n.length-1;ce++)this.totalDistance+=n[ce].dist(n[ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=CI[s.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let T=0;for(;T<S-1&&n[T].equals(n[T+1]);)T++;if(S<(b?3:2))return;c==="bevel"&&(v=1.05);const E=this.overscaling<=16?15*fn/(512*this.overscaling):0,z=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let F,N,H,K,oe;this.e1=this.e2=-1,b&&(F=n[S-2],oe=n[T].sub(F)._unit()._perp());for(let ce=T;ce<S;ce++){if(H=ce===S-1?b?n[T+1]:void 0:n[ce+1],H&&n[ce].equals(H))continue;oe&&(K=oe),F&&(N=F),F=n[ce],oe=H?H.sub(F)._unit()._perp():K,K=K||oe;let Te=K.add(oe);Te.x===0&&Te.y===0||Te._unit();const ye=K.x*oe.x+K.y*oe.y,Ce=Te.x*oe.x+Te.y*oe.y,Fe=Ce!==0?1/Ce:1/0,He=2*Math.sqrt(2-2*Ce),ct=Ce<kI&&N&&H,Et=K.x*oe.y-K.y*oe.x>0;if(ct&&ce>T){const _t=F.dist(N);if(_t>2*E){const pt=F.sub(F.sub(N)._mult(E/_t)._round());this.updateDistance(N,pt),this.addCurrentVertex(pt,K,0,0,z),N=pt}}const st=N&&H;let nt=st?c:b?"butt":f;if(st&&nt==="round"&&(Fe<x?nt="miter":Fe<=2&&(nt="fakeround")),nt==="miter"&&Fe>v&&(nt="bevel"),nt==="bevel"&&(Fe>2&&(nt="flipbevel"),Fe<v&&(nt="miter")),N&&this.updateDistance(N,F),nt==="miter")Te._mult(Fe),this.addCurrentVertex(F,Te,0,0,z);else if(nt==="flipbevel"){if(Fe>100)Te=oe.mult(-1);else{const _t=Fe*K.add(oe).mag()/K.sub(oe).mag();Te._perp()._mult(_t*(Et?-1:1))}this.addCurrentVertex(F,Te,0,0,z),this.addCurrentVertex(F,Te.mult(-1),0,0,z)}else if(nt==="bevel"||nt==="fakeround"){const _t=-Math.sqrt(Fe*Fe-1),pt=Et?_t:0,dt=Et?0:_t;if(N&&this.addCurrentVertex(F,K,pt,dt,z),nt==="fakeround"){const Ne=Math.round(180*He/Math.PI/20);for(let bt=1;bt<Ne;bt++){let gt=bt/Ne;if(gt!==.5){const zr=gt-.5;gt+=gt*zr*(gt-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*zr*zr+(.848013+ye*(.215638*ye-1.06021)))}const Bt=oe.sub(K)._mult(gt)._add(K)._unit()._mult(Et?-1:1);this.addHalfVertex(F,Bt.x,Bt.y,!1,Et,0,z)}}H&&this.addCurrentVertex(F,oe,-pt,-dt,z)}else if(nt==="butt")this.addCurrentVertex(F,Te,0,0,z);else if(nt==="square"){const _t=N?1:-1;this.addCurrentVertex(F,Te,_t,_t,z)}else nt==="round"&&(N&&(this.addCurrentVertex(F,K,0,0,z),this.addCurrentVertex(F,K,1,1,z,!0)),H&&(this.addCurrentVertex(F,oe,-1,-1,z,!0),this.addCurrentVertex(F,oe,0,0,z)));if(ct&&ce<S-1){const _t=F.dist(H);if(_t>2*E){const pt=F.add(H.sub(F)._mult(E/_t)._round());this.updateDistance(F,pt),this.addCurrentVertex(pt,oe,0,0,z),F=pt}}}}addCurrentVertex(n,s,c,f,v,x=!1){const b=s.y*f-s.x,S=-s.y-s.x*f;this.addHalfVertex(n,s.x+s.y*c,s.y-s.x*c,x,!1,c,v),this.addHalfVertex(n,b,S,x,!0,-f,v),this.distance>bb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,c,f,v,x))}addHalfVertex({x:n,y:s},c,f,v,x,b,S){const T=.5*(this.lineClips?this.scaledDistance*(bb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*c)+128,Math.round(63*f)+128,1+(b===0?0:b<0?-1:1)|(63&T)<<2,T>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const E=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,E),S.primitiveLength++),x?this.e2=E:this.e1=E}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let wb,Sb;ht("LineBucket",Fy,{omit:["layers","patternFeatures"]});var Cb={get paint(){return Sb=Sb||new _({"line-opacity":new Mt(ze.paint_line["line-opacity"]),"line-color":new Mt(ze.paint_line["line-color"]),"line-translate":new ft(ze.paint_line["line-translate"]),"line-translate-anchor":new ft(ze.paint_line["line-translate-anchor"]),"line-width":new Mt(ze.paint_line["line-width"]),"line-gap-width":new Mt(ze.paint_line["line-gap-width"]),"line-offset":new Mt(ze.paint_line["line-offset"]),"line-blur":new Mt(ze.paint_line["line-blur"]),"line-dasharray":new Ac(ze.paint_line["line-dasharray"]),"line-pattern":new Mc(ze.paint_line["line-pattern"]),"line-gradient":new Fd(ze.paint_line["line-gradient"])})},get layout(){return wb=wb||new _({"line-cap":new ft(ze.layout_line["line-cap"]),"line-join":new Mt(ze.layout_line["line-join"]),"line-miter-limit":new ft(ze.layout_line["line-miter-limit"]),"line-round-limit":new ft(ze.layout_line["line-round-limit"]),"line-sort-key":new Mt(ze.layout_line["line-sort-key"])})}};class TI extends Mt{possiblyEvaluate(n,s){return s=new jr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,c,f){return s=_e({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,c,f)}}let pf;class II extends a{constructor(n){super(n,Cb),this.gradientVersion=0,pf||(pf=new TI(Cb.paint.properties["line-width"].specification),pf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(c){return c._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof ta,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=pf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Fy(n)}queryRadius(n){const s=n,c=kb(Nd("line-width",this,s),Nd("line-gap-width",this,s)),f=Nd("line-offset",this,s);return c/2+Math.abs(f)+af(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,c,f,v,x,b){const S=lf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,b),T=b/2*kb(this.paint.get("line-width").evaluate(s,c),this.paint.get("line-gap-width").evaluate(s,c)),E=this.paint.get("line-offset").evaluate(s,c);return E&&(f=function(z,F){const N=[];for(let H=0;H<z.length;H++){const K=z[H],oe=[];for(let ce=0;ce<K.length;ce++){const Te=K[ce-1],ye=K[ce],Ce=K[ce+1],Fe=ce===0?new L(0,0):ye.sub(Te)._unit()._perp(),He=ce===K.length-1?new L(0,0):Ce.sub(ye)._unit()._perp(),ct=Fe._add(He)._unit(),Et=ct.x*He.x+ct.y*He.y;Et!==0&&ct._mult(1/Et),oe.push(ct._mult(F)._add(ye))}N.push(oe)}return N}(f,E*b)),function(z,F,N){for(let H=0;H<F.length;H++){const K=F[H];if(z.length>=3){for(let oe=0;oe<K.length;oe++)if(Oc(z,K[oe]))return!0}if(BT(z,K,N))return!0}return!1}(S,f,T)}isTileClipped(){return!0}}function kb(i,n){return n>0?n+2*i:i}const EI=w([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),PI=w([{name:"a_projected_pos",components:3,type:"Float32"}],4);w([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const MI=w([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);w([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Tb=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),AI=w([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function zI(i,n,s){return i.sections.forEach(c=>{c.text=function(f,v,x){const b=v.layout.get("text-transform").evaluate(x,{});return b==="uppercase"?f=f.toLocaleUpperCase():b==="lowercase"&&(f=f.toLocaleLowerCase()),ki.applyArabicShaping&&(f=ki.applyArabicShaping(f)),f}(c.text,n,s)}),i}w([{name:"triangle",components:3,type:"Uint16"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),w([{type:"Float32",name:"offsetX"}]),w([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),w([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Zd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var vn=24,Ib=Er,Eb=function(i,n,s,c,f){var v,x,b=8*f-c-1,S=(1<<b)-1,T=S>>1,E=-7,z=f-1,F=-1,N=i[n+z];for(z+=F,v=N&(1<<-E)-1,N>>=-E,E+=b;E>0;v=256*v+i[n+z],z+=F,E-=8);for(x=v&(1<<-E)-1,v>>=-E,E+=c;E>0;x=256*x+i[n+z],z+=F,E-=8);if(v===0)v=1-T;else{if(v===S)return x?NaN:1/0*(N?-1:1);x+=Math.pow(2,c),v-=T}return(N?-1:1)*x*Math.pow(2,v-c)},Pb=function(i,n,s,c,f,v){var x,b,S,T=8*v-f-1,E=(1<<T)-1,z=E>>1,F=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=0,H=1,K=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,x=E):(x=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-x))<1&&(x--,S*=2),(n+=x+z>=1?F/S:F*Math.pow(2,1-z))*S>=2&&(x++,S/=2),x+z>=E?(b=0,x=E):x+z>=1?(b=(n*S-1)*Math.pow(2,f),x+=z):(b=n*Math.pow(2,z-1)*Math.pow(2,f),x=0));f>=8;i[s+N]=255&b,N+=H,b/=256,f-=8);for(x=x<<f|b,T+=f;T>0;i[s+N]=255&x,N+=H,x/=256,T-=8);i[s+N-H]|=128*K};function Er(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Er.Varint=0,Er.Fixed64=1,Er.Bytes=2,Er.Fixed32=5;var Oy=4294967296,Mb=1/Oy,Ab=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Ls(i){return i.type===Er.Bytes?i.readVarint()+i.pos:i.pos+1}function Vc(i,n,s){return s?4294967296*n+(i>>>0):4294967296*(n>>>0)+(i>>>0)}function zb(i,n,s){var c=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(c);for(var f=s.pos-1;f>=i;f--)s.buf[f+c]=s.buf[f]}function RI(i,n){for(var s=0;s<i.length;s++)n.writeVarint(i[s])}function DI(i,n){for(var s=0;s<i.length;s++)n.writeSVarint(i[s])}function LI(i,n){for(var s=0;s<i.length;s++)n.writeFloat(i[s])}function BI(i,n){for(var s=0;s<i.length;s++)n.writeDouble(i[s])}function FI(i,n){for(var s=0;s<i.length;s++)n.writeBoolean(i[s])}function OI(i,n){for(var s=0;s<i.length;s++)n.writeFixed32(i[s])}function $I(i,n){for(var s=0;s<i.length;s++)n.writeSFixed32(i[s])}function NI(i,n){for(var s=0;s<i.length;s++)n.writeFixed64(i[s])}function jI(i,n){for(var s=0;s<i.length;s++)n.writeSFixed64(i[s])}function ff(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+16777216*i[n+3]}function Uc(i,n,s){i[s]=n,i[s+1]=n>>>8,i[s+2]=n>>>16,i[s+3]=n>>>24}function Rb(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+(i[n+3]<<24)}Er.prototype={destroy:function(){this.buf=null},readFields:function(i,n,s){for(s=s||this.length;this.pos<s;){var c=this.readVarint(),f=c>>3,v=this.pos;this.type=7&c,i(f,n,this),this.pos===v&&this.skip(c)}return n},readMessage:function(i,n){return this.readFields(i,n,this.readVarint()+this.pos)},readFixed32:function(){var i=ff(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Rb(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=ff(this.buf,this.pos)+ff(this.buf,this.pos+4)*Oy;return this.pos+=8,i},readSFixed64:function(){var i=ff(this.buf,this.pos)+Rb(this.buf,this.pos+4)*Oy;return this.pos+=8,i},readFloat:function(){var i=Eb(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=Eb(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var n,s,c=this.buf;return n=127&(s=c[this.pos++]),s<128?n:(n|=(127&(s=c[this.pos++]))<<7,s<128?n:(n|=(127&(s=c[this.pos++]))<<14,s<128?n:(n|=(127&(s=c[this.pos++]))<<21,s<128?n:function(f,v,x){var b,S,T=x.buf;if(b=(112&(S=T[x.pos++]))>>4,S<128||(b|=(127&(S=T[x.pos++]))<<3,S<128)||(b|=(127&(S=T[x.pos++]))<<10,S<128)||(b|=(127&(S=T[x.pos++]))<<17,S<128)||(b|=(127&(S=T[x.pos++]))<<24,S<128)||(b|=(1&(S=T[x.pos++]))<<31,S<128))return Vc(f,b,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=c[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=12&&Ab?function(s,c,f){return Ab.decode(s.subarray(c,f))}(this.buf,n,i):function(s,c,f){for(var v="",x=c;x<f;){var b,S,T,E=s[x],z=null,F=E>239?4:E>223?3:E>191?2:1;if(x+F>f)break;F===1?E<128&&(z=E):F===2?(192&(b=s[x+1]))==128&&(z=(31&E)<<6|63&b)<=127&&(z=null):F===3?(S=s[x+2],(192&(b=s[x+1]))==128&&(192&S)==128&&((z=(15&E)<<12|(63&b)<<6|63&S)<=2047||z>=55296&&z<=57343)&&(z=null)):F===4&&(S=s[x+2],T=s[x+3],(192&(b=s[x+1]))==128&&(192&S)==128&&(192&T)==128&&((z=(15&E)<<18|(63&b)<<12|(63&S)<<6|63&T)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,F=1):z>65535&&(z-=65536,v+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),v+=String.fromCharCode(z),x+=F}return v}(this.buf,n,i)},readBytes:function(){var i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n},readPackedVarint:function(i,n){if(this.type!==Er.Bytes)return i.push(this.readVarint(n));var s=Ls(this);for(i=i||[];this.pos<s;)i.push(this.readVarint(n));return i},readPackedSVarint:function(i){if(this.type!==Er.Bytes)return i.push(this.readSVarint());var n=Ls(this);for(i=i||[];this.pos<n;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Er.Bytes)return i.push(this.readBoolean());var n=Ls(this);for(i=i||[];this.pos<n;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Er.Bytes)return i.push(this.readFloat());var n=Ls(this);for(i=i||[];this.pos<n;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Er.Bytes)return i.push(this.readDouble());var n=Ls(this);for(i=i||[];this.pos<n;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Er.Bytes)return i.push(this.readFixed32());var n=Ls(this);for(i=i||[];this.pos<n;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Er.Bytes)return i.push(this.readSFixed32());var n=Ls(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Er.Bytes)return i.push(this.readFixed64());var n=Ls(this);for(i=i||[];this.pos<n;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Er.Bytes)return i.push(this.readSFixed64());var n=Ls(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed64());return i},skip:function(i){var n=7&i;if(n===Er.Varint)for(;this.buf[this.pos++]>127;);else if(n===Er.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Er.Fixed32)this.pos+=4;else{if(n!==Er.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(i,n){this.writeVarint(i<<3|n)},realloc:function(i){for(var n=this.length||16;n<this.pos+i;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Uc(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Uc(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Uc(this.buf,-1&i,this.pos),Uc(this.buf,Math.floor(i*Mb),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Uc(this.buf,-1&i,this.pos),Uc(this.buf,Math.floor(i*Mb),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(n,s){var c,f;if(n>=0?(c=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(c=~(-n%4294967296))?c=c+1|0:(c=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,b){b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,b.buf[b.pos]=127&(v>>>=7)}(c,0,s),function(v,x){var b=(7&v)<<4;x.buf[x.pos++]|=b|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,s)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var n=this.pos;this.pos=function(c,f,v){for(var x,b,S=0;S<f.length;S++){if((x=f.charCodeAt(S))>55295&&x<57344){if(!b){x>56319||S+1===f.length?(c[v++]=239,c[v++]=191,c[v++]=189):b=x;continue}if(x<56320){c[v++]=239,c[v++]=191,c[v++]=189,b=x;continue}x=b-55296<<10|x-56320|65536,b=null}else b&&(c[v++]=239,c[v++]=191,c[v++]=189,b=null);x<128?c[v++]=x:(x<2048?c[v++]=x>>6|192:(x<65536?c[v++]=x>>12|224:(c[v++]=x>>18|240,c[v++]=x>>12&63|128),c[v++]=x>>6&63|128),c[v++]=63&x|128)}return v}(this.buf,i,this.pos);var s=this.pos-n;s>=128&&zb(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(i){this.realloc(4),Pb(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Pb(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var n=i.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=i[s]},writeRawMessage:function(i,n){this.pos++;var s=this.pos;i(n,this);var c=this.pos-s;c>=128&&zb(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeMessage:function(i,n,s){this.writeTag(i,Er.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(i,n){n.length&&this.writeMessage(i,RI,n)},writePackedSVarint:function(i,n){n.length&&this.writeMessage(i,DI,n)},writePackedBoolean:function(i,n){n.length&&this.writeMessage(i,FI,n)},writePackedFloat:function(i,n){n.length&&this.writeMessage(i,LI,n)},writePackedDouble:function(i,n){n.length&&this.writeMessage(i,BI,n)},writePackedFixed32:function(i,n){n.length&&this.writeMessage(i,OI,n)},writePackedSFixed32:function(i,n){n.length&&this.writeMessage(i,$I,n)},writePackedFixed64:function(i,n){n.length&&this.writeMessage(i,NI,n)},writePackedSFixed64:function(i,n){n.length&&this.writeMessage(i,jI,n)},writeBytesField:function(i,n){this.writeTag(i,Er.Bytes),this.writeBytes(n)},writeFixed32Field:function(i,n){this.writeTag(i,Er.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(i,n){this.writeTag(i,Er.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(i,n){this.writeTag(i,Er.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(i,n){this.writeTag(i,Er.Fixed64),this.writeSFixed64(n)},writeVarintField:function(i,n){this.writeTag(i,Er.Varint),this.writeVarint(n)},writeSVarintField:function(i,n){this.writeTag(i,Er.Varint),this.writeSVarint(n)},writeStringField:function(i,n){this.writeTag(i,Er.Bytes),this.writeString(n)},writeFloatField:function(i,n){this.writeTag(i,Er.Fixed32),this.writeFloat(n)},writeDoubleField:function(i,n){this.writeTag(i,Er.Fixed64),this.writeDouble(n)},writeBooleanField:function(i,n){this.writeVarintField(i,!!n)}};var $y=I(Ib);const Ny=3;function VI(i,n,s){i===1&&s.readMessage(UI,n)}function UI(i,n,s){if(i===3){const{id:c,bitmap:f,width:v,height:x,left:b,top:S,advance:T}=s.readMessage(WI,{});n.push({id:c,bitmap:new Vd({width:v+2*Ny,height:x+2*Ny},f),metrics:{width:v,height:x,left:b,top:S,advance:T}})}}function WI(i,n,s){i===1?n.id=s.readVarint():i===2?n.bitmap=s.readBytes():i===3?n.width=s.readVarint():i===4?n.height=s.readVarint():i===5?n.left=s.readSVarint():i===6?n.top=s.readSVarint():i===7&&(n.advance=s.readVarint())}const Db=Ny;function Lb(i){let n=0,s=0;for(const x of i)n+=x.w*x.h,s=Math.max(s,x.w);i.sort((x,b)=>b.h-x.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let f=0,v=0;for(const x of i)for(let b=c.length-1;b>=0;b--){const S=c[b];if(!(x.w>S.w||x.h>S.h)){if(x.x=S.x,x.y=S.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===S.w&&x.h===S.h){const T=c.pop();b<c.length&&(c[b]=T)}else x.h===S.h?(S.x+=x.w,S.w-=x.w):x.w===S.w?(S.y+=x.h,S.h-=x.h):(c.push({x:S.x+x.w,y:S.y,w:S.w-x.w,h:x.h}),S.y+=x.h,S.h-=x.h);break}}return{w:f,h:v,fill:n/(f*v)||0}}const Ii=1;class jy{constructor(n,{pixelRatio:s,version:c,stretchX:f,stretchY:v,content:x,textFitWidth:b,textFitHeight:S}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=f,this.stretchY=v,this.content=x,this.version=c,this.textFitWidth=b,this.textFitHeight=S}get tl(){return[this.paddedRect.x+Ii,this.paddedRect.y+Ii]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ii,this.paddedRect.y+this.paddedRect.h-Ii]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ii)/this.pixelRatio,(this.paddedRect.h-2*Ii)/this.pixelRatio]}}class Bb{constructor(n,s){const c={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,c,v),this.addImages(s,f,v);const{w:x,h:b}=Lb(v),S=new ro({width:x||1,height:b||1});for(const T in n){const E=n[T],z=c[T].paddedRect;ro.copy(E.data,S,{x:0,y:0},{x:z.x+Ii,y:z.y+Ii},E.data)}for(const T in s){const E=s[T],z=f[T].paddedRect,F=z.x+Ii,N=z.y+Ii,H=E.data.width,K=E.data.height;ro.copy(E.data,S,{x:0,y:0},{x:F,y:N},E.data),ro.copy(E.data,S,{x:0,y:K-1},{x:F,y:N-1},{width:H,height:1}),ro.copy(E.data,S,{x:0,y:0},{x:F,y:N+K},{width:H,height:1}),ro.copy(E.data,S,{x:H-1,y:0},{x:F-1,y:N},{width:1,height:K}),ro.copy(E.data,S,{x:0,y:0},{x:F+H,y:N},{width:1,height:K})}this.image=S,this.iconPositions=c,this.patternPositions=f}addImages(n,s,c){for(const f in n){const v=n[f],x={x:0,y:0,w:v.data.width+2*Ii,h:v.data.height+2*Ii};c.push(x),s[f]=new jy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in n.updatedImages)this.patchUpdatedImage(this.iconPositions[c],n.getImage(c),s),this.patchUpdatedImage(this.patternPositions[c],n.getImage(c),s)}patchUpdatedImage(n,s,c){if(!n||!s||n.version===s.version)return;n.version=s.version;const[f,v]=n.tl;c.update(s.data,void 0,{x:f,y:v})}}var Ta;ht("ImagePosition",jy),ht("ImageAtlas",Bb),g.ah=void 0,(Ta=g.ah||(g.ah={}))[Ta.none=0]="none",Ta[Ta.horizontal=1]="horizontal",Ta[Ta.vertical=2]="vertical",Ta[Ta.horizontalOnly=3]="horizontalOnly";const Xd=-17;class Kd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const c=new Kd;return c.scale=n||1,c.fontStack=s,c}static forImage(n){const s=new Kd;return s.imageName=n,s}}class Wc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const c=new Wc;for(let f=0;f<n.sections.length;f++){const v=n.sections[f];v.image?c.addImageSection(v):c.addTextSection(v,s)}return c}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let c=0;c<n.length;c++){const f=n.charCodeAt(c+1)||null,v=n.charCodeAt(c-1)||null;s+=f&&Qp(f)&&!Zd[n[c+1]]||v&&Qp(v)&&!Zd[n[c-1]]||!Zd[n[c]]?n[c]:Zd[n[c]]}return s}(this.text)}trim(){let n=0;for(let c=0;c<this.text.length&&gf[this.text.charCodeAt(c)];c++)n++;let s=this.text.length;for(let c=this.text.length-1;c>=0&&c>=n&&gf[this.text.charCodeAt(c)];c--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const c=new Wc;return c.text=this.text.substring(n,s),c.sectionIndex=this.sectionIndex.slice(n,s),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Kd.forText(n.scale,n.fontStack||s));const c=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(c)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Me("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(Kd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Me("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function mf(i,n,s,c,f,v,x,b,S,T,E,z,F,N,H){const K=Wc.fromFeature(i,f);let oe;z===g.ah.vertical&&K.verticalizePunctuation();const{processBidirectionalText:ce,processStyledBidirectionalText:Te}=ki;if(ce&&K.sections.length===1){oe=[];const Fe=ce(K.toString(),Vy(K,T,v,n,c,N));for(const He of Fe){const ct=new Wc;ct.text=He,ct.sections=K.sections;for(let Et=0;Et<He.length;Et++)ct.sectionIndex.push(0);oe.push(ct)}}else if(Te){oe=[];const Fe=Te(K.text,K.sectionIndex,Vy(K,T,v,n,c,N));for(const He of Fe){const ct=new Wc;ct.text=He[0],ct.sectionIndex=He[1],ct.sections=K.sections,oe.push(ct)}}else oe=function(Fe,He){const ct=[],Et=Fe.text;let st=0;for(const nt of He)ct.push(Fe.substring(st,nt)),st=nt;return st<Et.length&&ct.push(Fe.substring(st,Et.length)),ct}(K,Vy(K,T,v,n,c,N));const ye=[],Ce={positionedLines:ye,text:K.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(Fe,He,ct,Et,st,nt,_t,pt,dt,Ne,bt,gt){let Bt=0,zr=Xd,Pr=0,Sn=0;const bo=pt==="right"?1:pt==="left"?0:.5;let Vn=0;for(const tn of st){tn.trim();const kn=tn.getMaxScale(),Qn=(kn-1)*vn,Un={positionedGlyphs:[],lineOffset:0};Fe.positionedLines[Vn]=Un;const fi=Un.positionedGlyphs;let Wn=0;if(!tn.length()){zr+=nt,++Vn;continue}for(let Ei=0;Ei<tn.length();Ei++){const yr=tn.getSection(Ei),Dr=tn.getSectionIndex(Ei),Gr=tn.getCharCode(Ei);let Vi=0,Kr=null,Zc=null,is=null,os=vn;const wo=!(dt===g.ah.horizontal||!bt&&!Ld(Gr)||bt&&(gf[Gr]||(Cn=Gr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Cn)))));if(yr.imageName){const oo=Et[yr.imageName];if(!oo)continue;is=yr.imageName,Fe.iconsInText=Fe.iconsInText||!0,Zc=oo.paddedRect;const zn=oo.displaySize;yr.scale=yr.scale*vn/gt,Kr={width:zn[0],height:zn[1],left:Ii,top:-Db,advance:wo?zn[1]:zn[0]},Vi=Qn+(vn-zn[1]*yr.scale),os=Kr.advance;const Bs=wo?zn[0]*yr.scale-vn*kn:zn[1]*yr.scale-vn*kn;Bs>0&&Bs>Wn&&(Wn=Bs)}else{const oo=ct[yr.fontStack],zn=oo&&oo[Gr];if(zn&&zn.rect)Zc=zn.rect,Kr=zn.metrics;else{const Bs=He[yr.fontStack],rh=Bs&&Bs[Gr];if(!rh)continue;Kr=rh.metrics}Vi=(kn-yr.scale)*vn}wo?(Fe.verticalizable=!0,fi.push({glyph:Gr,imageName:is,x:Bt,y:zr+Vi,vertical:wo,scale:yr.scale,fontStack:yr.fontStack,sectionIndex:Dr,metrics:Kr,rect:Zc}),Bt+=os*yr.scale+Ne):(fi.push({glyph:Gr,imageName:is,x:Bt,y:zr+Vi,vertical:wo,scale:yr.scale,fontStack:yr.fontStack,sectionIndex:Dr,metrics:Kr,rect:Zc}),Bt+=Kr.advance*yr.scale+Ne)}fi.length!==0&&(Pr=Math.max(Bt-Ne,Pr),ZI(fi,0,fi.length-1,bo,Wn)),Bt=0;const io=nt*kn+Wn;Un.lineOffset=Math.max(Wn,Qn),zr+=io,Sn=Math.max(io,Sn),++Vn}var Cn;const di=zr-Xd,{horizontalAlign:hi,verticalAlign:pi}=Uy(_t);(function(tn,kn,Qn,Un,fi,Wn,io,Ei,yr){const Dr=(kn-Qn)*fi;let Gr=0;Gr=Wn!==io?-Ei*Un-Xd:(-Un*yr+.5)*io;for(const Vi of tn)for(const Kr of Vi.positionedGlyphs)Kr.x+=Dr,Kr.y+=Gr})(Fe.positionedLines,bo,hi,pi,Pr,Sn,nt,di,st.length),Fe.top+=-pi*di,Fe.bottom=Fe.top+di,Fe.left+=-hi*Pr,Fe.right=Fe.left+Pr}(Ce,n,s,c,oe,x,b,S,z,T,F,H),!function(Fe){for(const He of Fe)if(He.positionedGlyphs.length!==0)return!1;return!0}(ye)&&Ce}const gf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},GI={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},HI={40:!0};function Fb(i,n,s,c,f,v){if(n.imageName){const x=c[n.imageName];return x?x.displaySize[0]*n.scale*vn/v+f:0}{const x=s[n.fontStack],b=x&&x[i];return b?b.metrics.advance*n.scale+f:0}}function Ob(i,n,s,c){const f=Math.pow(i-n,2);return c?i<n?f/2:2*f:f+Math.abs(s)*s}function qI(i,n,s){let c=0;return i===10&&(c-=1e4),s&&(c+=150),i!==40&&i!==65288||(c+=50),n!==41&&n!==65289||(c+=50),c}function $b(i,n,s,c,f,v){let x=null,b=Ob(n,s,f,v);for(const S of c){const T=Ob(n-S.x,s,f,v)+S.badness;T<=b&&(x=S,b=T)}return{index:i,x:n,priorBreak:x,badness:b}}function Nb(i){return i?Nb(i.priorBreak).concat(i.index):[]}function Vy(i,n,s,c,f,v){if(!i)return[];const x=[],b=function(z,F,N,H,K,oe){let ce=0;for(let Te=0;Te<z.length();Te++){const ye=z.getSection(Te);ce+=Fb(z.getCharCode(Te),ye,H,K,F,oe)}return ce/Math.max(1,Math.ceil(ce/N))}(i,n,s,c,f,v),S=i.text.indexOf("")>=0;let T=0;for(let z=0;z<i.length();z++){const F=i.getSection(z),N=i.getCharCode(z);if(gf[N]||(T+=Fb(N,F,c,f,n,v)),z<i.length()-1){const H=!((E=N)<11904)&&(!!or["CJK Compatibility Forms"](E)||!!or["CJK Compatibility"](E)||!!or["CJK Strokes"](E)||!!or["CJK Symbols and Punctuation"](E)||!!or["Enclosed CJK Letters and Months"](E)||!!or["Halfwidth and Fullwidth Forms"](E)||!!or["Ideographic Description Characters"](E)||!!or["Vertical Forms"](E)||Jp.test(String.fromCodePoint(E)));(GI[N]||H||F.imageName||z!==i.length()-2&&HI[i.getCharCode(z+1)])&&x.push($b(z+1,T,b,x,qI(N,i.getCharCode(z+1),H&&S),!1))}}var E;return Nb($b(i.length(),T,b,x,0,!0))}function Uy(i){let n=.5,s=.5;switch(i){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function ZI(i,n,s,c,f){if(!c&&!f)return;const v=i[s],x=(i[s].x+v.metrics.advance*v.scale)*c;for(let b=n;b<=s;b++)i[b].x-=x,i[b].y+=f}function XI(i,n,s){const{horizontalAlign:c,verticalAlign:f}=Uy(s),v=n[0]-i.displaySize[0]*c,x=n[1]-i.displaySize[1]*f;return{image:i,top:x,bottom:x+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function jb(i){var n,s;let c=i.left,f=i.top,v=i.right-c,x=i.bottom-f;const b=(n=i.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",S=(s=i.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",T=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(S==="proportional"){if(b==="stretchOnly"&&v/x<T||b==="proportional"){const E=Math.ceil(x*T);c*=E/v,v=E}}else if(b==="proportional"&&S==="stretchOnly"&&T!==0&&v/x>T){const E=Math.ceil(v/T);f*=E/x,x=E}return{x1:c,y1:f,x2:c+v,y2:f+x}}function Vb(i,n,s,c,f,v){const x=i.image;let b;if(x.content){const oe=x.content,ce=x.pixelRatio||1;b=[oe[0]/ce,oe[1]/ce,x.displaySize[0]-oe[2]/ce,x.displaySize[1]-oe[3]/ce]}const S=n.left*v,T=n.right*v;let E,z,F,N;s==="width"||s==="both"?(N=f[0]+S-c[3],z=f[0]+T+c[1]):(N=f[0]+(S+T-x.displaySize[0])/2,z=N+x.displaySize[0]);const H=n.top*v,K=n.bottom*v;return s==="height"||s==="both"?(E=f[1]+H-c[0],F=f[1]+K+c[2]):(E=f[1]+(H+K-x.displaySize[1])/2,F=E+x.displaySize[1]),{image:x,top:E,right:z,bottom:F,left:N,collisionPadding:b}}const Yd=255,ns=128,Ia=Yd*ns;function Ub(i,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new jr(i+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:f}=s;let v=0;for(;v<c.length&&c[v]<=i;)v++;v=Math.max(0,v-1);let x=v;for(;x<c.length&&c[x]<i+1;)x++;x=Math.min(c.length-1,x);const b=c[v],S=c[x];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:S,interpolationType:f}:{kind:"camera",minZoom:b,maxZoom:S,minSize:s.evaluate(new jr(b)),maxSize:s.evaluate(new jr(S)),interpolationType:f}}}function Wy(i,n,s){let c="never";const f=i.get(n);return f?c=f:i.get(s)&&(c="always"),c}const KI=ka.VectorTileFeature.types,YI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function yf(i,n,s,c,f,v,x,b,S,T,E,z,F){const N=b?Math.min(Ia,Math.round(b[0])):0,H=b?Math.min(Ia,Math.round(b[1])):0;i.emplaceBack(n,s,Math.round(32*c),Math.round(32*f),v,x,(N<<1)+(S?1:0),H,16*T,16*E,256*z,256*F)}function Gy(i,n,s){i.emplaceBack(n.x,n.y,s),i.emplaceBack(n.x,n.y,s),i.emplaceBack(n.x,n.y,s),i.emplaceBack(n.x,n.y,s)}function JI(i){for(const n of i.sections)if(vy(n.text))return!0;return!1}class Hy{constructor(n){this.layoutVertexArray=new Rc,this.indexArray=new to,this.programConfigurations=n,this.segments=new sr,this.dynamicLayoutVertexArray=new Od,this.opacityVertexArray=new Ni,this.hasVisibleVertices=!1,this.placedSymbolArray=new Vr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,c,f){this.isEmpty()||(c&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,EI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,PI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,YI,!0),this.opacityVertexBuffer.itemSize=1),(c||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ht("SymbolBuffers",Hy);class qy{constructor(n,s,c){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new c,this.segments=new sr,this.collisionVertexArray=new ts}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,MI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ht("CollisionBuffers",qy);class Gc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ty([]),this.placementViewportMatrix=Ty([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ub(this.zoom,s["text-size"]),this.iconSizeData=Ub(this.zoom,s["icon-size"]);const c=this.layers[0].layout,f=c.get("symbol-sort-key"),v=c.get("symbol-z-order");this.canOverlap=Wy(c,"text-overlap","text-allow-overlap")!=="never"||Wy(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(x=>g.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Hy(new Cl(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Hy(new Cl(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ur,this.lineVertexArray=new On,this.symbolInstances=new nr,this.textAnchorOffsets=new Wr}calculateGlyphDependencies(n,s,c,f,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(c||f)&&v){const b=Zd[n.charAt(x)];b&&(s[b.charCodeAt(0)]=!0)}}populate(n,s,c){const f=this.layers[0],v=f.layout,x=v.get("text-font"),b=v.get("text-field"),S=v.get("icon-image"),T=(b.value.kind!=="constant"||b.value.value instanceof bi&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),E=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,z=v.get("symbol-sort-key");if(this.features=[],!T&&!E)return;const F=s.iconDependencies,N=s.glyphDependencies,H=s.availableImages,K=new jr(this.zoom);for(const{feature:oe,id:ce,index:Te,sourceLayerIndex:ye}of n){const Ce=f._featureFilter.needGeometry,Fe=Tl(oe,Ce);if(!f._featureFilter.filter(K,Fe,c))continue;let He,ct;if(Ce||(Fe.geometry=kl(oe)),T){const st=f.getValueAndResolveTokens("text-field",Fe,c,H),nt=bi.factory(st),_t=this.hasRTLText=this.hasRTLText||JI(nt);(!_t||ki.getRTLTextPluginStatus()==="unavailable"||_t&&ki.isParsed())&&(He=zI(nt,f,Fe))}if(E){const st=f.getValueAndResolveTokens("icon-image",Fe,c,H);ct=st instanceof Si?st:Si.fromString(st)}if(!He&&!ct)continue;const Et=this.sortFeaturesByKey?z.evaluate(Fe,{},c):void 0;if(this.features.push({id:ce,text:He,icon:ct,index:Te,sourceLayerIndex:ye,geometry:Fe.geometry,properties:oe.properties,type:KI[oe.type],sortKey:Et}),ct&&(F[ct.name]=!0),He){const st=x.evaluate(Fe,{},c).join(","),nt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.ah.vertical)>=0;for(const _t of He.sections)if(_t.image)F[_t.image.name]=!0;else{const pt=Rd(He.toString()),dt=_t.fontStack||st,Ne=N[dt]=N[dt]||{};this.calculateGlyphDependencies(_t.text,Ne,nt,this.allowVerticalPlacement,pt)}}}v.get("symbol-placement")==="line"&&(this.features=function(oe){const ce={},Te={},ye=[];let Ce=0;function Fe(st){ye.push(oe[st]),Ce++}function He(st,nt,_t){const pt=Te[st];return delete Te[st],Te[nt]=pt,ye[pt].geometry[0].pop(),ye[pt].geometry[0]=ye[pt].geometry[0].concat(_t[0]),pt}function ct(st,nt,_t){const pt=ce[nt];return delete ce[nt],ce[st]=pt,ye[pt].geometry[0].shift(),ye[pt].geometry[0]=_t[0].concat(ye[pt].geometry[0]),pt}function Et(st,nt,_t){const pt=_t?nt[0][nt[0].length-1]:nt[0][0];return`${st}:${pt.x}:${pt.y}`}for(let st=0;st<oe.length;st++){const nt=oe[st],_t=nt.geometry,pt=nt.text?nt.text.toString():null;if(!pt){Fe(st);continue}const dt=Et(pt,_t),Ne=Et(pt,_t,!0);if(dt in Te&&Ne in ce&&Te[dt]!==ce[Ne]){const bt=ct(dt,Ne,_t),gt=He(dt,Ne,ye[bt].geometry);delete ce[dt],delete Te[Ne],Te[Et(pt,ye[gt].geometry,!0)]=gt,ye[bt].geometry=null}else dt in Te?He(dt,Ne,_t):Ne in ce?ct(dt,Ne,_t):(Fe(st),ce[dt]=Ce-1,Te[Ne]=Ce-1)}return ye.filter(st=>st.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((oe,ce)=>oe.sortKey-ce.sortKey)}update(n,s,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,c),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const c=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let b=n.segment+1;b<s.length;b++)x[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:f},b<s.length-1&&(f+=s[b+1].dist(s[b]));for(let b=n.segment||0;b>=0;b--)x[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:v},b>0&&(v+=s[b-1].dist(s[b]));for(let b=0;b<s.length;b++){const S=x[b];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(n,s,c,f,v,x,b,S,T,E,z,F){const N=n.indexArray,H=n.layoutVertexArray,K=n.segments.prepareSegment(4*s.length,H,N,this.canOverlap?x.sortKey:void 0),oe=this.glyphOffsetArray.length,ce=K.vertexLength,Te=this.allowVerticalPlacement&&b===g.ah.vertical?Math.PI/2:0,ye=x.text&&x.text.sections;for(let Ce=0;Ce<s.length;Ce++){const{tl:Fe,tr:He,bl:ct,br:Et,tex:st,pixelOffsetTL:nt,pixelOffsetBR:_t,minFontScaleX:pt,minFontScaleY:dt,glyphOffset:Ne,isSDF:bt,sectionIndex:gt}=s[Ce],Bt=K.vertexLength,zr=Ne[1];yf(H,S.x,S.y,Fe.x,zr+Fe.y,st.x,st.y,c,bt,nt.x,nt.y,pt,dt),yf(H,S.x,S.y,He.x,zr+He.y,st.x+st.w,st.y,c,bt,_t.x,nt.y,pt,dt),yf(H,S.x,S.y,ct.x,zr+ct.y,st.x,st.y+st.h,c,bt,nt.x,_t.y,pt,dt),yf(H,S.x,S.y,Et.x,zr+Et.y,st.x+st.w,st.y+st.h,c,bt,_t.x,_t.y,pt,dt),Gy(n.dynamicLayoutVertexArray,S,Te),N.emplaceBack(Bt,Bt+1,Bt+2),N.emplaceBack(Bt+1,Bt+2,Bt+3),K.vertexLength+=4,K.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ne[0]),Ce!==s.length-1&&gt===s[Ce+1].sectionIndex||n.programConfigurations.populatePaintArrays(H.length,x,x.index,{},F,ye&&ye[gt])}n.placedSymbolArray.emplaceBack(S.x,S.y,oe,this.glyphOffsetArray.length-oe,ce,T,E,S.segment,c?c[0]:0,c?c[1]:0,f[0],f[1],b,0,!1,0,z)}_addCollisionDebugVertex(n,s,c,f,v,x){return s.emplaceBack(0,0),n.emplaceBack(c.x,c.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,c,f,v,x,b){const S=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),T=S.vertexLength,E=v.layoutVertexArray,z=v.collisionVertexArray,F=b.anchorX,N=b.anchorY;this._addCollisionDebugVertex(E,z,x,F,N,new L(n,s)),this._addCollisionDebugVertex(E,z,x,F,N,new L(c,s)),this._addCollisionDebugVertex(E,z,x,F,N,new L(c,f)),this._addCollisionDebugVertex(E,z,x,F,N,new L(n,f)),S.vertexLength+=4;const H=v.indexArray;H.emplaceBack(T,T+1),H.emplaceBack(T+1,T+2),H.emplaceBack(T+2,T+3),H.emplaceBack(T+3,T),S.primitiveLength+=4}addDebugCollisionBoxes(n,s,c,f){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qy(ji,Tb.members,An),this.iconCollisionBox=new qy(ji,Tb.members,An);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,c,f,v,x,b,S,T){const E={};for(let z=s;z<c;z++){const F=n.get(z);E.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},E.textFeatureIndex=F.featureIndex;break}for(let z=f;z<v;z++){const F=n.get(z);E.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},E.verticalTextFeatureIndex=F.featureIndex;break}for(let z=x;z<b;z++){const F=n.get(z);E.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},E.iconFeatureIndex=F.featureIndex;break}for(let z=S;z<T;z++){const F=n.get(z);E.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},E.verticalIconFeatureIndex=F.featureIndex;break}return E}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const c=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const c=n.placedSymbolArray.get(s),f=c.vertexStartIndex+4*c.numGlyphs;for(let v=c.vertexStartIndex;v<f;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),c=Math.cos(n),f=[],v=[],x=[];for(let b=0;b<this.symbolInstances.length;++b){x.push(b);const S=this.symbolInstances.get(b);f.push(0|Math.round(s*S.anchorX+c*S.anchorY)),v.push(S.featureIndex)}return x.sort((b,S)=>f[b]-f[S]||v[S]-v[b]),x}addToSortKeyRanges(n,s){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===s?c.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const c=this.symbolInstances.get(s);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Wb,Gb;ht("SymbolBucket",Gc,{omit:["layers","collisionBoxArray","features","compareText"]}),Gc.MAX_GLYPHS=65535,Gc.addDynamicAttributes=Gy;var Zy={get paint(){return Gb=Gb||new _({"icon-opacity":new Mt(ze.paint_symbol["icon-opacity"]),"icon-color":new Mt(ze.paint_symbol["icon-color"]),"icon-halo-color":new Mt(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mt(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mt(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new ft(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new ft(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new Mt(ze.paint_symbol["text-opacity"]),"text-color":new Mt(ze.paint_symbol["text-color"],{runtimeType:Pn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Mt(ze.paint_symbol["text-halo-color"]),"text-halo-width":new Mt(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new Mt(ze.paint_symbol["text-halo-blur"]),"text-translate":new ft(ze.paint_symbol["text-translate"]),"text-translate-anchor":new ft(ze.paint_symbol["text-translate-anchor"])})},get layout(){return Wb=Wb||new _({"symbol-placement":new ft(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new ft(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ft(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Mt(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ft(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ft(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ft(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ft(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new ft(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ft(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mt(ze.layout_symbol["icon-size"]),"icon-text-fit":new ft(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ft(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mt(ze.layout_symbol["icon-image"]),"icon-rotate":new Mt(ze.layout_symbol["icon-rotate"]),"icon-padding":new Mt(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new ft(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new Mt(ze.layout_symbol["icon-offset"]),"icon-anchor":new Mt(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ft(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ft(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ft(ze.layout_symbol["text-rotation-alignment"]),"text-field":new Mt(ze.layout_symbol["text-field"]),"text-font":new Mt(ze.layout_symbol["text-font"]),"text-size":new Mt(ze.layout_symbol["text-size"]),"text-max-width":new Mt(ze.layout_symbol["text-max-width"]),"text-line-height":new ft(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new Mt(ze.layout_symbol["text-letter-spacing"]),"text-justify":new Mt(ze.layout_symbol["text-justify"]),"text-radial-offset":new Mt(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ft(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Mt(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Mt(ze.layout_symbol["text-anchor"]),"text-max-angle":new ft(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new ft(ze.layout_symbol["text-writing-mode"]),"text-rotate":new Mt(ze.layout_symbol["text-rotate"]),"text-padding":new ft(ze.layout_symbol["text-padding"]),"text-keep-upright":new ft(ze.layout_symbol["text-keep-upright"]),"text-transform":new Mt(ze.layout_symbol["text-transform"]),"text-offset":new Mt(ze.layout_symbol["text-offset"]),"text-allow-overlap":new ft(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new ft(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new ft(ze.layout_symbol["text-ignore-placement"]),"text-optional":new ft(ze.layout_symbol["text-optional"])})}};class Hb{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Nr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ht("FormatSectionOverride",Hb,{omit:["defaultValue"]});class _f extends a{constructor(n){super(n,Zy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const f=[];for(const v of c)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,c,f){const v=this.layout.get(n).evaluate(s,{},c,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||_c(x.value)||!v?v:function(b,S){return S.replace(/{([^{}]+)}/g,(T,E)=>b&&E in b?String(b[E]):"")}(s.properties,v)}createBucket(n){return new Gc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Zy.paint.overridableProperties){if(!_f.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),c=new Hb(s),f=new yc(c,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new ua("source",f):new da("composite",f,s.value.zoomStops),this.paint._values[n]=new vo(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,c){return!(!this.layout||s.isDataDriven()||c.isDataDriven())&&_f.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const c=n.get("text-field"),f=Zy.paint.properties[s];let v=!1;const x=b=>{for(const S of b)if(f.overrides&&f.overrides.hasOverride(S))return void(v=!0)};if(c.value.kind==="constant"&&c.value.value instanceof bi)x(c.value.value.sections);else if(c.value.kind==="source"){const b=T=>{v||(T instanceof Xi&&pn(T.value)===Di?x(T.value.sections):T instanceof lc?x(T.sections):T.eachChild(b))},S=c.value;S._styleExpression&&b(S._styleExpression.expression)}return v}}let qb;var QI={get paint(){return qb=qb||new _({"background-color":new ft(ze.paint_background["background-color"]),"background-pattern":new Ac(ze.paint_background["background-pattern"]),"background-opacity":new ft(ze.paint_background["background-opacity"])})}};class eE extends a{constructor(n){super(n,QI)}}let Zb;var tE={get paint(){return Zb=Zb||new _({"raster-opacity":new ft(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new ft(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ft(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ft(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new ft(ze.paint_raster["raster-saturation"]),"raster-contrast":new ft(ze.paint_raster["raster-contrast"]),"raster-resampling":new ft(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new ft(ze.paint_raster["raster-fade-duration"])})}};class rE extends a{constructor(n){super(n,tE)}}class nE extends a{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class iE{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Xy=63710088e-1;class Ea{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ea(de(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,c=this.lat*s,f=n.lat*s,v=Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos((n.lng-this.lng)*s);return Xy*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Ea)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ea(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ea(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Xb=2*Math.PI*Xy;function Kb(i){return Xb*Math.cos(i*Math.PI/180)}function Yb(i){return(180+i)/360}function Jb(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Qb(i,n){return i/Kb(n)}function Ky(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class Jd{constructor(n,s,c=0){this.x=+n,this.y=+s,this.z=+c}static fromLngLat(n,s=0){const c=Ea.convert(n);return new Jd(Yb(c.lng),Jb(c.lat),Qb(s,c.lat))}toLngLat(){return new Ea(360*this.x-180,Ky(this.y))}toAltitude(){return this.z*Kb(Ky(this.y))}meterInMercatorCoordinateUnits(){return 1/Xb*(n=Ky(this.y),1/Math.cos(n*Math.PI/180));var n}}function e1(i,n,s){var c=2*Math.PI*6378137/256/Math.pow(2,s);return[i*c-2*Math.PI*6378137/2,n*c-2*Math.PI*6378137/2]}class Yy{constructor(n,s,c){if(!function(f,v,x){return!(f<0||f>25||x<0||x>=Math.pow(2,f)||v<0||v>=Math.pow(2,f))}(n,s,c))throw new Error(`x=${s}, y=${c}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=c,this.key=Qd(0,n,n,s,c)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,c){const f=(x=this.y,b=this.z,S=e1(256*(v=this.x),256*(x=Math.pow(2,b)-x-1),b),T=e1(256*(v+1),256*(x+1),b),S[0]+","+S[1]+","+T[0]+","+T[1]);var v,x,b,S,T;const E=function(z,F,N){let H,K="";for(let oe=z;oe>0;oe--)H=1<<oe-1,K+=(F&H?1:0)+(N&H?2:0);return K}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,E).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new L((n.x*s-this.x)*fn,(n.y*s-this.y)*fn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class t1{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Qd(n,s.z,s.z,s.x,s.y)}}class no{constructor(n,s,c,f,v){if(n<c)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${c}`);this.overscaledZ=n,this.wrap=s,this.canonical=new Yy(c,+f,+v),this.key=Qd(s,n,c,f,v)}clone(){return new no(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new no(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new no(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-n;return n>this.canonical.z?Qd(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Qd(this.wrap*+s,n,n,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new no(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,c=2*this.canonical.x,f=2*this.canonical.y;return[new no(s,this.wrap,s,c,f),new no(s,this.wrap,s,c+1,f),new no(s,this.wrap,s,c,f+1),new no(s,this.wrap,s,c+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new no(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new no(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new t1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Jd(n.x-this.wrap,n.y))}}function Qd(i,n,s,c,f){(i*=2)<0&&(i=-1*i-1);const v=1<<s;return(v*v*i+v*f+c).toString(36)+s.toString(36)+n.toString(36)}ht("CanonicalTileID",Yy),ht("OverscaledTileID",no,{omit:["posMatrix"]});class r1{constructor(n,s,c,f=1,v=1,x=1,b=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(c&&!["mapbox","terrarium","custom"].includes(c))return void Me(`"${c}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const S=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),c){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let T=0;T<S;T++)this.data[this._idx(-1,T)]=this.data[this._idx(0,T)],this.data[this._idx(S,T)]=this.data[this._idx(S-1,T)],this.data[this._idx(T,-1)]=this.data[this._idx(T,0)],this.data[this._idx(T,S)]=this.data[this._idx(T,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let T=0;T<S;T++)for(let E=0;E<S;E++){const z=this.get(T,E);z>this.max&&(this.max=z),z<this.min&&(this.min=z)}}get(n,s){const c=new Uint8Array(this.data.buffer),f=4*this._idx(n,s);return this.unpack(c[f],c[f+1],c[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,c){return n*this.redFactor+s*this.greenFactor+c*this.blueFactor-this.baseShift}getPixels(){return new ro({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,c){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,v=s*this.dim+this.dim,x=c*this.dim,b=c*this.dim+this.dim;switch(s){case-1:f=v-1;break;case 1:v=f+1}switch(c){case-1:x=b-1;break;case 1:b=x+1}const S=-s*this.dim,T=-c*this.dim;for(let E=x;E<b;E++)for(let z=f;z<v;z++)this.data[this._idx(z,E)]=n.data[this._idx(z+S,E+T)]}}ht("DEMData",r1);class n1{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const c=n[s];this._stringToNumber[c]=s,this._numberToString[s]=c}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class i1{constructor(n,s,c,f,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=c,n._y=f,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class o1{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new fa(fn,16,0),this.grid3D=new fa(fn,16,0),this.featureIndexArray=new Yn,this.promoteId=s}insert(n,s,c,f,v,x){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,f,v);const S=x?this.grid3D:this.grid;for(let T=0;T<s.length;T++){const E=s[T],z=[1/0,1/0,-1/0,-1/0];for(let F=0;F<E.length;F++){const N=E[F];z[0]=Math.min(z[0],N.x),z[1]=Math.min(z[1],N.y),z[2]=Math.max(z[2],N.x),z[3]=Math.max(z[3],N.y)}z[0]<fn&&z[1]<fn&&z[2]>=0&&z[3]>=0&&S.insert(b,z[0],z[1],z[2],z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ka.VectorTile(new $y(this.rawTileData)).layers,this.sourceLayerCoder=new n1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,c,f){this.loadVTLayers();const v=n.params||{},x=fn/n.tileSize/n.scale,b=_d(v.filter),S=n.queryGeometry,T=n.queryPadding*x,E=a1(S),z=this.grid.query(E.minX-T,E.minY-T,E.maxX+T,E.maxY+T),F=a1(n.cameraQueryGeometry),N=this.grid3D.query(F.minX-T,F.minY-T,F.maxX+T,F.maxY+T,(oe,ce,Te,ye)=>function(Ce,Fe,He,ct,Et){for(const nt of Ce)if(Fe<=nt.x&&He<=nt.y&&ct>=nt.x&&Et>=nt.y)return!0;const st=[new L(Fe,He),new L(Fe,Et),new L(ct,Et),new L(ct,He)];if(Ce.length>2){for(const nt of st)if(Oc(Ce,nt))return!0}for(let nt=0;nt<Ce.length-1;nt++)if(OT(Ce[nt],Ce[nt+1],st))return!0;return!1}(n.cameraQueryGeometry,oe-T,ce-T,Te+T,ye+T));for(const oe of N)z.push(oe);z.sort(oE);const H={};let K;for(let oe=0;oe<z.length;oe++){const ce=z[oe];if(ce===K)continue;K=ce;const Te=this.featureIndexArray.get(ce);let ye=null;this.loadMatchingFeature(H,Te.bucketIndex,Te.sourceLayerIndex,Te.featureIndex,b,v.layers,v.availableImages,s,c,f,(Ce,Fe,He)=>(ye||(ye=kl(Ce)),Fe.queryIntersectsFeature(S,Ce,He,ye,this.z,n.transform,x,n.pixelPosMatrix)))}return H}loadMatchingFeature(n,s,c,f,v,x,b,S,T,E,z){const F=this.bucketLayerIDs[s];if(x&&!function(oe,ce){for(let Te=0;Te<oe.length;Te++)if(ce.indexOf(oe[Te])>=0)return!0;return!1}(x,F))return;const N=this.sourceLayerCoder.decode(c),H=this.vtLayers[N].feature(f);if(v.needGeometry){const oe=Tl(H,!0);if(!v.filter(new jr(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!v.filter(new jr(this.tileID.overscaledZ),H))return;const K=this.getId(H,N);for(let oe=0;oe<F.length;oe++){const ce=F[oe];if(x&&x.indexOf(ce)<0)continue;const Te=S[ce];if(!Te)continue;let ye={};K&&E&&(ye=E.getState(Te.sourceLayer||"_geojsonTileLayer",K));const Ce=_e({},T[ce]);Ce.paint=s1(Ce.paint,Te.paint,H,ye,b),Ce.layout=s1(Ce.layout,Te.layout,H,ye,b);const Fe=!z||z(H,Te,ye);if(!Fe)continue;const He=new i1(H,this.z,this.x,this.y,K);He.layer=Ce;let ct=n[ce];ct===void 0&&(ct=n[ce]=[]),ct.push({featureIndex:f,feature:He,intersectionZ:Fe})}}lookupSymbolFeatures(n,s,c,f,v,x,b,S){const T={};this.loadVTLayers();const E=_d(v);for(const z of n)this.loadMatchingFeature(T,c,f,z,E,x,b,S,s);return T}hasLayer(n){for(const s of this.bucketLayerIDs)for(const c of s)if(n===c)return!0;return!1}getId(n,s){let c=n.id;return this.promoteId&&(c=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof c=="boolean"&&(c=Number(c))),c}}function s1(i,n,s,c,f){return Ae(i,(v,x)=>{const b=n instanceof bl?n.get(x):null;return b&&b.evaluate?b.evaluate(s,c,f):b})}function a1(i){let n=1/0,s=1/0,c=-1/0,f=-1/0;for(const v of i)n=Math.min(n,v.x),s=Math.min(s,v.y),c=Math.max(c,v.x),f=Math.max(f,v.y);return{minX:n,minY:s,maxX:c,maxY:f}}function oE(i,n){return n-i}function l1(i,n,s,c,f){const v=[];for(let x=0;x<i.length;x++){const b=i[x];let S;for(let T=0;T<b.length-1;T++){let E=b[T],z=b[T+1];E.x<n&&z.x<n||(E.x<n?E=new L(n,E.y+(n-E.x)/(z.x-E.x)*(z.y-E.y))._round():z.x<n&&(z=new L(n,E.y+(n-E.x)/(z.x-E.x)*(z.y-E.y))._round()),E.y<s&&z.y<s||(E.y<s?E=new L(E.x+(s-E.y)/(z.y-E.y)*(z.x-E.x),s)._round():z.y<s&&(z=new L(E.x+(s-E.y)/(z.y-E.y)*(z.x-E.x),s)._round()),E.x>=c&&z.x>=c||(E.x>=c?E=new L(c,E.y+(c-E.x)/(z.x-E.x)*(z.y-E.y))._round():z.x>=c&&(z=new L(c,E.y+(c-E.x)/(z.x-E.x)*(z.y-E.y))._round()),E.y>=f&&z.y>=f||(E.y>=f?E=new L(E.x+(f-E.y)/(z.y-E.y)*(z.x-E.x),f)._round():z.y>=f&&(z=new L(E.x+(f-E.y)/(z.y-E.y)*(z.x-E.x),f)._round()),S&&E.equals(S[S.length-1])||(S=[E],v.push(S)),S.push(z)))))}}return v}ht("FeatureIndex",o1,{omit:["rawTileData","sourceLayerCoder"]});class Pa extends L{constructor(n,s,c,f){super(n,s),this.angle=c,f!==void 0&&(this.segment=f)}clone(){return new Pa(this.x,this.y,this.angle,this.segment)}}function c1(i,n,s,c,f){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,b=0;for(;b>-s/2;){if(x--,x<0)return!1;b-=i[x].dist(v),v=i[x]}b+=i[x].dist(i[x+1]),x++;const S=[];let T=0;for(;b<s/2;){const E=i[x],z=i[x+1];if(!z)return!1;let F=i[x-1].angleTo(E)-E.angleTo(z);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:b,angleDelta:F}),T+=F;b-S[0].distance>c;)T-=S.shift().angleDelta;if(T>f)return!1;x++,b+=E.dist(z)}return!0}function u1(i){let n=0;for(let s=0;s<i.length-1;s++)n+=i[s].dist(i[s+1]);return n}function d1(i,n,s){return i?.6*n*s:0}function h1(i,n){return Math.max(i?i.right-i.left:0,n?n.right-n.left:0)}function sE(i,n,s,c,f,v){const x=d1(s,f,v),b=h1(s,c)*v;let S=0;const T=u1(i)/2;for(let E=0;E<i.length-1;E++){const z=i[E],F=i[E+1],N=z.dist(F);if(S+N>T){const H=(T-S)/N,K=ai.number(z.x,F.x,H),oe=ai.number(z.y,F.y,H),ce=new Pa(K,oe,F.angleTo(z),E);return ce._round(),!x||c1(i,ce,b,x,n)?ce:void 0}S+=N}}function aE(i,n,s,c,f,v,x,b,S){const T=d1(c,v,x),E=h1(c,f),z=E*x,F=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return n-z<n/4&&(n=z+n/4),p1(i,F?n/2*b%n:(E/2+2*v)*x*b%n,n,T,s,z,F,!1,S)}function p1(i,n,s,c,f,v,x,b,S){const T=v/2,E=u1(i);let z=0,F=n-s,N=[];for(let H=0;H<i.length-1;H++){const K=i[H],oe=i[H+1],ce=K.dist(oe),Te=oe.angleTo(K);for(;F+s<z+ce;){F+=s;const ye=(F-z)/ce,Ce=ai.number(K.x,oe.x,ye),Fe=ai.number(K.y,oe.y,ye);if(Ce>=0&&Ce<S&&Fe>=0&&Fe<S&&F-T>=0&&F+T<=E){const He=new Pa(Ce,Fe,Te,H);He._round(),c&&!c1(i,He,v,c,f)||N.push(He)}}z+=ce}return b||N.length||x||(N=p1(i,z/2,s,c,f,v,x,!0,S)),N}ht("Anchor",Pa);const Hc=Ii;function f1(i,n,s,c){const f=[],v=i.image,x=v.pixelRatio,b=v.paddedRect.w-2*Hc,S=v.paddedRect.h-2*Hc;let T={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const E=v.stretchX||[[0,b]],z=v.stretchY||[[0,S]],F=(Ne,bt)=>Ne+bt[1]-bt[0],N=E.reduce(F,0),H=z.reduce(F,0),K=b-N,oe=S-H;let ce=0,Te=N,ye=0,Ce=H,Fe=0,He=K,ct=0,Et=oe;if(v.content&&c){const Ne=v.content,bt=Ne[2]-Ne[0],gt=Ne[3]-Ne[1];(v.textFitWidth||v.textFitHeight)&&(T=jb(i)),ce=vf(E,0,Ne[0]),ye=vf(z,0,Ne[1]),Te=vf(E,Ne[0],Ne[2]),Ce=vf(z,Ne[1],Ne[3]),Fe=Ne[0]-ce,ct=Ne[1]-ye,He=bt-Te,Et=gt-Ce}const st=T.x1,nt=T.y1,_t=T.x2-st,pt=T.y2-nt,dt=(Ne,bt,gt,Bt)=>{const zr=xf(Ne.stretch-ce,Te,_t,st),Pr=bf(Ne.fixed-Fe,He,Ne.stretch,N),Sn=xf(bt.stretch-ye,Ce,pt,nt),bo=bf(bt.fixed-ct,Et,bt.stretch,H),Vn=xf(gt.stretch-ce,Te,_t,st),Cn=bf(gt.fixed-Fe,He,gt.stretch,N),di=xf(Bt.stretch-ye,Ce,pt,nt),hi=bf(Bt.fixed-ct,Et,Bt.stretch,H),pi=new L(zr,Sn),tn=new L(Vn,Sn),kn=new L(Vn,di),Qn=new L(zr,di),Un=new L(Pr/x,bo/x),fi=new L(Cn/x,hi/x),Wn=n*Math.PI/180;if(Wn){const yr=Math.sin(Wn),Dr=Math.cos(Wn),Gr=[Dr,-yr,yr,Dr];pi._matMult(Gr),tn._matMult(Gr),Qn._matMult(Gr),kn._matMult(Gr)}const io=Ne.stretch+Ne.fixed,Ei=bt.stretch+bt.fixed;return{tl:pi,tr:tn,bl:Qn,br:kn,tex:{x:v.paddedRect.x+Hc+io,y:v.paddedRect.y+Hc+Ei,w:gt.stretch+gt.fixed-io,h:Bt.stretch+Bt.fixed-Ei},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Un,pixelOffsetBR:fi,minFontScaleX:He/x/_t,minFontScaleY:Et/x/pt,isSDF:s}};if(c&&(v.stretchX||v.stretchY)){const Ne=m1(E,K,N),bt=m1(z,oe,H);for(let gt=0;gt<Ne.length-1;gt++){const Bt=Ne[gt],zr=Ne[gt+1];for(let Pr=0;Pr<bt.length-1;Pr++)f.push(dt(Bt,bt[Pr],zr,bt[Pr+1]))}}else f.push(dt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:S+1}));return f}function vf(i,n,s){let c=0;for(const f of i)c+=Math.max(n,Math.min(s,f[1]))-Math.max(n,Math.min(s,f[0]));return c}function m1(i,n,s){const c=[{fixed:-Hc,stretch:0}];for(const[f,v]of i){const x=c[c.length-1];c.push({fixed:f-x.stretch,stretch:x.stretch}),c.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return c.push({fixed:n+Hc,stretch:s}),c}function xf(i,n,s,c){return i/n*s+c}function bf(i,n,s,c){return i-n*s/c}class wf{constructor(n,s,c,f,v,x,b,S,T,E){var z;if(this.boxStartIndex=n.length,T){let F=x.top,N=x.bottom;const H=x.collisionPadding;H&&(F-=H[1],N+=H[3]);let K=N-F;K>0&&(K=Math.max(10,K),this.circleDiameter=K)}else{const F=!((z=x.image)===null||z===void 0)&&z.content&&(x.image.textFitWidth||x.image.textFitHeight)?jb(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};F.y1=F.y1*b-S[0],F.y2=F.y2*b+S[2],F.x1=F.x1*b-S[3],F.x2=F.x2*b+S[1];const N=x.collisionPadding;if(N&&(F.x1-=N[0]*b,F.y1-=N[1]*b,F.x2+=N[2]*b,F.y2+=N[3]*b),E){const H=new L(F.x1,F.y1),K=new L(F.x2,F.y1),oe=new L(F.x1,F.y2),ce=new L(F.x2,F.y2),Te=E*Math.PI/180;H._rotate(Te),K._rotate(Te),oe._rotate(Te),ce._rotate(Te),F.x1=Math.min(H.x,K.x,oe.x,ce.x),F.x2=Math.max(H.x,K.x,oe.x,ce.x),F.y1=Math.min(H.y,K.y,oe.y,ce.y),F.y2=Math.max(H.y,K.y,oe.y,ce.y)}n.emplaceBack(s.x,s.y,F.x1,F.y1,F.x2,F.y2,c,f,v)}this.boxEndIndex=n.length}}class lE{constructor(n=[],s=(c,f)=>c<f?-1:c>f?1:0){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:c}=this,f=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(c(f,x)>=0)break;s[n]=x,n=v}s[n]=f}_down(n){const{data:s,compare:c}=this,f=this.length>>1,v=s[n];for(;n<f;){let x=1+(n<<1);const b=x+1;if(b<this.length&&c(s[b],s[x])<0&&(x=b),c(s[x],v)>=0)break;s[n]=s[x],n=x}s[n]=v}}function cE(i,n=1,s=!1){let c=1/0,f=1/0,v=-1/0,x=-1/0;const b=i[0];for(let N=0;N<b.length;N++){const H=b[N];(!N||H.x<c)&&(c=H.x),(!N||H.y<f)&&(f=H.y),(!N||H.x>v)&&(v=H.x),(!N||H.y>x)&&(x=H.y)}const S=Math.min(v-c,x-f);let T=S/2;const E=new lE([],uE);if(S===0)return new L(c,f);for(let N=c;N<v;N+=S)for(let H=f;H<x;H+=S)E.push(new qc(N+T,H+T,T,i));let z=function(N){let H=0,K=0,oe=0;const ce=N[0];for(let Te=0,ye=ce.length,Ce=ye-1;Te<ye;Ce=Te++){const Fe=ce[Te],He=ce[Ce],ct=Fe.x*He.y-He.x*Fe.y;K+=(Fe.x+He.x)*ct,oe+=(Fe.y+He.y)*ct,H+=3*ct}return new qc(K/H,oe/H,0,N)}(i),F=E.length;for(;E.length;){const N=E.pop();(N.d>z.d||!z.d)&&(z=N,s&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,F)),N.max-z.d<=n||(T=N.h/2,E.push(new qc(N.p.x-T,N.p.y-T,T,i)),E.push(new qc(N.p.x+T,N.p.y-T,T,i)),E.push(new qc(N.p.x-T,N.p.y+T,T,i)),E.push(new qc(N.p.x+T,N.p.y+T,T,i)),F+=4)}return s&&(console.log(`num probes: ${F}`),console.log(`best distance: ${z.d}`)),z.p}function uE(i,n){return n.max-i.max}function qc(i,n,s,c){this.p=new L(i,n),this.h=s,this.d=function(f,v){let x=!1,b=1/0;for(let S=0;S<v.length;S++){const T=v[S];for(let E=0,z=T.length,F=z-1;E<z;F=E++){const N=T[E],H=T[F];N.y>f.y!=H.y>f.y&&f.x<(H.x-N.x)*(f.y-N.y)/(H.y-N.y)+N.x&&(x=!x),b=Math.min(b,J0(f,N,H))}}return(x?1:-1)*Math.sqrt(b)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}var jn;g.aq=void 0,(jn=g.aq||(g.aq={}))[jn.center=1]="center",jn[jn.left=2]="left",jn[jn.right=3]="right",jn[jn.top=4]="top",jn[jn.bottom=5]="bottom",jn[jn["top-left"]=6]="top-left",jn[jn["top-right"]=7]="top-right",jn[jn["bottom-left"]=8]="bottom-left",jn[jn["bottom-right"]=9]="bottom-right";const Ma=7,Jy=Number.POSITIVE_INFINITY;function g1(i,n){return n[1]!==Jy?function(s,c,f){let v=0,x=0;switch(c=Math.abs(c),f=Math.abs(f),s){case"top-right":case"top-left":case"top":x=f-Ma;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+Ma}switch(s){case"top-right":case"bottom-right":case"right":v=-c;break;case"top-left":case"bottom-left":case"left":v=c}return[v,x]}(i,n[0],n[1]):function(s,c){let f=0,v=0;c<0&&(c=0);const x=c/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Ma;break;case"bottom-right":case"bottom-left":v=-x+Ma;break;case"bottom":v=-c+Ma;break;case"top":v=c-Ma}switch(s){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=c;break;case"right":f=-c}return[f,v]}(i,n[0])}function y1(i,n,s){var c;const f=i.layout,v=(c=f.get("text-variable-anchor-offset"))===null||c===void 0?void 0:c.evaluate(n,{},s);if(v){const b=v.values,S=[];for(let T=0;T<b.length;T+=2){const E=S[T]=b[T],z=b[T+1].map(F=>F*vn);E.startsWith("top")?z[1]-=Ma:E.startsWith("bottom")&&(z[1]+=Ma),S[T+1]=z}return new Li(S)}const x=f.get("text-variable-anchor");if(x){let b;b=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},s)*vn,Jy]:f.get("text-offset").evaluate(n,{},s).map(T=>T*vn);const S=[];for(const T of x)S.push(T,g1(T,b));return new Li(S)}return null}function Qy(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function dE(i,n,s,c,f,v,x,b,S,T,E){let z=v.textMaxSize.evaluate(n,{});z===void 0&&(z=x);const F=i.layers[0].layout,N=F.get("icon-offset").evaluate(n,{},E),H=v1(s.horizontal),K=x/24,oe=i.tilePixelRatio*K,ce=i.tilePixelRatio*z/24,Te=i.tilePixelRatio*b,ye=i.tilePixelRatio*F.get("symbol-spacing"),Ce=F.get("text-padding")*i.tilePixelRatio,Fe=function(Ne,bt,gt,Bt=1){const zr=Ne.get("icon-padding").evaluate(bt,{},gt),Pr=zr&&zr.values;return[Pr[0]*Bt,Pr[1]*Bt,Pr[2]*Bt,Pr[3]*Bt]}(F,n,E,i.tilePixelRatio),He=F.get("text-max-angle")/180*Math.PI,ct=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",Et=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",st=F.get("symbol-placement"),nt=ye/2,_t=F.get("icon-text-fit");let pt;c&&_t!=="none"&&(i.allowVerticalPlacement&&s.vertical&&(pt=Vb(c,s.vertical,_t,F.get("icon-text-fit-padding"),N,K)),H&&(c=Vb(c,H,_t,F.get("icon-text-fit-padding"),N,K)));const dt=(Ne,bt)=>{bt.x<0||bt.x>=fn||bt.y<0||bt.y>=fn||function(gt,Bt,zr,Pr,Sn,bo,Vn,Cn,di,hi,pi,tn,kn,Qn,Un,fi,Wn,io,Ei,yr,Dr,Gr,Vi,Kr,Zc){const is=gt.addToLineVertexArray(Bt,zr);let os,wo,oo,zn,Bs=0,rh=0,S1=0,C1=0,a_=-1,l_=-1;const Fs={};let k1=Dc("");if(gt.allowVerticalPlacement&&Pr.vertical){const ei=Cn.layout.get("text-rotate").evaluate(Dr,{},Kr)+90;oo=new wf(di,Bt,hi,pi,tn,Pr.vertical,kn,Qn,Un,ei),Vn&&(zn=new wf(di,Bt,hi,pi,tn,Vn,Wn,io,Un,ei))}if(Sn){const ei=Cn.layout.get("icon-rotate").evaluate(Dr,{}),so=Cn.layout.get("icon-text-fit")!=="none",El=f1(Sn,ei,Vi,so),$o=Vn?f1(Vn,ei,Vi,so):void 0;wo=new wf(di,Bt,hi,pi,tn,Sn,Wn,io,!1,ei),Bs=4*El.length;const Pl=gt.iconSizeData;let ss=null;Pl.kind==="source"?(ss=[ns*Cn.layout.get("icon-size").evaluate(Dr,{})],ss[0]>Ia&&Me(`${gt.layerIds[0]}: Value for "icon-size" is >= ${Yd}. Reduce your "icon-size".`)):Pl.kind==="composite"&&(ss=[ns*Gr.compositeIconSizes[0].evaluate(Dr,{},Kr),ns*Gr.compositeIconSizes[1].evaluate(Dr,{},Kr)],(ss[0]>Ia||ss[1]>Ia)&&Me(`${gt.layerIds[0]}: Value for "icon-size" is >= ${Yd}. Reduce your "icon-size".`)),gt.addSymbols(gt.icon,El,ss,yr,Ei,Dr,g.ah.none,Bt,is.lineStartIndex,is.lineLength,-1,Kr),a_=gt.icon.placedSymbolArray.length-1,$o&&(rh=4*$o.length,gt.addSymbols(gt.icon,$o,ss,yr,Ei,Dr,g.ah.vertical,Bt,is.lineStartIndex,is.lineLength,-1,Kr),l_=gt.icon.placedSymbolArray.length-1)}const T1=Object.keys(Pr.horizontal);for(const ei of T1){const so=Pr.horizontal[ei];if(!os){k1=Dc(so.text);const $o=Cn.layout.get("text-rotate").evaluate(Dr,{},Kr);os=new wf(di,Bt,hi,pi,tn,so,kn,Qn,Un,$o)}const El=so.positionedLines.length===1;if(S1+=_1(gt,Bt,so,bo,Cn,Un,Dr,fi,is,Pr.vertical?g.ah.horizontal:g.ah.horizontalOnly,El?T1:[ei],Fs,a_,Gr,Kr),El)break}Pr.vertical&&(C1+=_1(gt,Bt,Pr.vertical,bo,Cn,Un,Dr,fi,is,g.ah.vertical,["vertical"],Fs,l_,Gr,Kr));const fE=os?os.boxStartIndex:gt.collisionBoxArray.length,mE=os?os.boxEndIndex:gt.collisionBoxArray.length,gE=oo?oo.boxStartIndex:gt.collisionBoxArray.length,yE=oo?oo.boxEndIndex:gt.collisionBoxArray.length,_E=wo?wo.boxStartIndex:gt.collisionBoxArray.length,vE=wo?wo.boxEndIndex:gt.collisionBoxArray.length,xE=zn?zn.boxStartIndex:gt.collisionBoxArray.length,bE=zn?zn.boxEndIndex:gt.collisionBoxArray.length;let Oo=-1;const Cf=(ei,so)=>ei&&ei.circleDiameter?Math.max(ei.circleDiameter,so):so;Oo=Cf(os,Oo),Oo=Cf(oo,Oo),Oo=Cf(wo,Oo),Oo=Cf(zn,Oo);const I1=Oo>-1?1:0;I1&&(Oo*=Zc/vn),gt.glyphOffsetArray.length>=Gc.MAX_GLYPHS&&Me("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dr.sortKey!==void 0&&gt.addToSortKeyRanges(gt.symbolInstances.length,Dr.sortKey);const wE=y1(Cn,Dr,Kr),[SE,CE]=function(ei,so){const El=ei.length,$o=so==null?void 0:so.values;if(($o==null?void 0:$o.length)>0)for(let Pl=0;Pl<$o.length;Pl+=2){const ss=$o[Pl+1];ei.emplaceBack(g.aq[$o[Pl]],ss[0],ss[1])}return[El,ei.length]}(gt.textAnchorOffsets,wE);gt.symbolInstances.emplaceBack(Bt.x,Bt.y,Fs.right>=0?Fs.right:-1,Fs.center>=0?Fs.center:-1,Fs.left>=0?Fs.left:-1,Fs.vertical||-1,a_,l_,k1,fE,mE,gE,yE,_E,vE,xE,bE,hi,S1,C1,Bs,rh,I1,0,kn,Oo,SE,CE)}(i,bt,Ne,s,c,f,pt,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,oe,[Ce,Ce,Ce,Ce],ct,S,Te,Fe,Et,N,n,v,T,E,x)};if(st==="line")for(const Ne of l1(n.geometry,0,0,fn,fn)){const bt=aE(Ne,ye,He,s.vertical||H,c,24,ce,i.overscaling,fn);for(const gt of bt)H&&hE(i,H.text,nt,gt)||dt(Ne,gt)}else if(st==="line-center"){for(const Ne of n.geometry)if(Ne.length>1){const bt=sE(Ne,He,s.vertical||H,c,24,ce);bt&&dt(Ne,bt)}}else if(n.type==="Polygon")for(const Ne of uc(n.geometry,0)){const bt=cE(Ne,16);dt(Ne[0],new Pa(bt.x,bt.y,0))}else if(n.type==="LineString")for(const Ne of n.geometry)dt(Ne,new Pa(Ne[0].x,Ne[0].y,0));else if(n.type==="Point")for(const Ne of n.geometry)for(const bt of Ne)dt([bt],new Pa(bt.x,bt.y,0))}function _1(i,n,s,c,f,v,x,b,S,T,E,z,F,N,H){const K=function(Te,ye,Ce,Fe,He,ct,Et,st){const nt=Fe.layout.get("text-rotate").evaluate(ct,{})*Math.PI/180,_t=[];for(const pt of ye.positionedLines)for(const dt of pt.positionedGlyphs){if(!dt.rect)continue;const Ne=dt.rect||{};let bt=Db+1,gt=!0,Bt=1,zr=0;const Pr=(He||st)&&dt.vertical,Sn=dt.metrics.advance*dt.scale/2;if(st&&ye.verticalizable&&(zr=pt.lineOffset/2-(dt.imageName?-(vn-dt.metrics.width*dt.scale)/2:(dt.scale-1)*vn)),dt.imageName){const yr=Et[dt.imageName];gt=yr.sdf,Bt=yr.pixelRatio,bt=Ii/Bt}const bo=He?[dt.x+Sn,dt.y]:[0,0];let Vn=He?[0,0]:[dt.x+Sn+Ce[0],dt.y+Ce[1]-zr],Cn=[0,0];Pr&&(Cn=Vn,Vn=[0,0]);const di=dt.metrics.isDoubleResolution?2:1,hi=(dt.metrics.left-bt)*dt.scale-Sn+Vn[0],pi=(-dt.metrics.top-bt)*dt.scale+Vn[1],tn=hi+Ne.w/di*dt.scale/Bt,kn=pi+Ne.h/di*dt.scale/Bt,Qn=new L(hi,pi),Un=new L(tn,pi),fi=new L(hi,kn),Wn=new L(tn,kn);if(Pr){const yr=new L(-Sn,Sn-Xd),Dr=-Math.PI/2,Gr=vn/2-Sn,Vi=new L(5-Xd-Gr,-(dt.imageName?Gr:0)),Kr=new L(...Cn);Qn._rotateAround(Dr,yr)._add(Vi)._add(Kr),Un._rotateAround(Dr,yr)._add(Vi)._add(Kr),fi._rotateAround(Dr,yr)._add(Vi)._add(Kr),Wn._rotateAround(Dr,yr)._add(Vi)._add(Kr)}if(nt){const yr=Math.sin(nt),Dr=Math.cos(nt),Gr=[Dr,-yr,yr,Dr];Qn._matMult(Gr),Un._matMult(Gr),fi._matMult(Gr),Wn._matMult(Gr)}const io=new L(0,0),Ei=new L(0,0);_t.push({tl:Qn,tr:Un,bl:fi,br:Wn,tex:Ne,writingMode:ye.writingMode,glyphOffset:bo,sectionIndex:dt.sectionIndex,isSDF:gt,pixelOffsetTL:io,pixelOffsetBR:Ei,minFontScaleX:0,minFontScaleY:0})}return _t}(0,s,b,f,v,x,c,i.allowVerticalPlacement),oe=i.textSizeData;let ce=null;oe.kind==="source"?(ce=[ns*f.layout.get("text-size").evaluate(x,{})],ce[0]>Ia&&Me(`${i.layerIds[0]}: Value for "text-size" is >= ${Yd}. Reduce your "text-size".`)):oe.kind==="composite"&&(ce=[ns*N.compositeTextSizes[0].evaluate(x,{},H),ns*N.compositeTextSizes[1].evaluate(x,{},H)],(ce[0]>Ia||ce[1]>Ia)&&Me(`${i.layerIds[0]}: Value for "text-size" is >= ${Yd}. Reduce your "text-size".`)),i.addSymbols(i.text,K,ce,b,v,x,T,n,S.lineStartIndex,S.lineLength,F,H);for(const Te of E)z[Te]=i.text.placedSymbolArray.length-1;return 4*K.length}function v1(i){for(const n in i)return i[n];return null}function hE(i,n,s,c){const f=i.compareText;if(n in f){const v=f[n];for(let x=v.length-1;x>=0;x--)if(c.dist(v[x])<s)return!0}else f[n]=[];return f[n].push(c),!1}const x1=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class e_{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,c]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=c>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=x1[15&c];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new e_(b,x,v,n)}constructor(n,s=64,c=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=c,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=x1.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-b%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${c}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+b+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=n,this.coords[this._pos++]=s,c}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return t_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,c,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:b}=this,S=[0,v.length-1,0],T=[];for(;S.length;){const E=S.pop()||0,z=S.pop()||0,F=S.pop()||0;if(z-F<=b){for(let oe=F;oe<=z;oe++){const ce=x[2*oe],Te=x[2*oe+1];ce>=n&&ce<=c&&Te>=s&&Te<=f&&T.push(v[oe])}continue}const N=F+z>>1,H=x[2*N],K=x[2*N+1];H>=n&&H<=c&&K>=s&&K<=f&&T.push(v[N]),(E===0?n<=H:s<=K)&&(S.push(F),S.push(N-1),S.push(1-E)),(E===0?c>=H:f>=K)&&(S.push(N+1),S.push(z),S.push(1-E))}return T}within(n,s,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,b=[0,f.length-1,0],S=[],T=c*c;for(;b.length;){const E=b.pop()||0,z=b.pop()||0,F=b.pop()||0;if(z-F<=x){for(let oe=F;oe<=z;oe++)w1(v[2*oe],v[2*oe+1],n,s)<=T&&S.push(f[oe]);continue}const N=F+z>>1,H=v[2*N],K=v[2*N+1];w1(H,K,n,s)<=T&&S.push(f[N]),(E===0?n-c<=H:s-c<=K)&&(b.push(F),b.push(N-1),b.push(1-E)),(E===0?n+c>=H:s+c>=K)&&(b.push(N+1),b.push(z),b.push(1-E))}return S}}function t_(i,n,s,c,f,v){if(f-c<=s)return;const x=c+f>>1;b1(i,n,x,c,f,v),t_(i,n,s,c,x-1,1-v),t_(i,n,s,x+1,f,1-v)}function b1(i,n,s,c,f,v){for(;f>c;){if(f-c>600){const T=f-c+1,E=s-c+1,z=Math.log(T),F=.5*Math.exp(2*z/3),N=.5*Math.sqrt(z*F*(T-F)/T)*(E-T/2<0?-1:1);b1(i,n,s,Math.max(c,Math.floor(s-E*F/T+N)),Math.min(f,Math.floor(s+(T-E)*F/T+N)),v)}const x=n[2*s+v];let b=c,S=f;for(eh(i,n,c,s),n[2*f+v]>x&&eh(i,n,c,f);b<S;){for(eh(i,n,b,S),b++,S--;n[2*b+v]<x;)b++;for(;n[2*S+v]>x;)S--}n[2*c+v]===x?eh(i,n,c,S):(S++,eh(i,n,S,f)),S<=s&&(c=S+1),s<=S&&(f=S-1)}}function eh(i,n,s,c){r_(i,s,c),r_(n,2*s,2*c),r_(n,2*s+1,2*c+1)}function r_(i,n,s){const c=i[n];i[n]=i[s],i[s]=c}function w1(i,n,s,c){const f=i-s,v=n-c;return f*f+v*v}var n_;g.bg=void 0,(n_=g.bg||(g.bg={})).create="create",n_.load="load",n_.fullLoad="fullLoad";let Sf=null,th=[];const i_=1e3/60,o_="loadTime",s_="fullLoadTime",pE={mark(i){performance.mark(i)},frame(i){const n=i;Sf!=null&&th.push(n-Sf),Sf=n},clearMetrics(){Sf=null,th=[],performance.clearMeasures(o_),performance.clearMeasures(s_);for(const i in g.bg)performance.clearMarks(g.bg[i])},getPerformanceMetrics(){performance.measure(o_,g.bg.create,g.bg.load),performance.measure(s_,g.bg.create,g.bg.fullLoad);const i=performance.getEntriesByName(o_)[0].duration,n=performance.getEntriesByName(s_)[0].duration,s=th.length,c=1/(th.reduce((v,x)=>v+x,0)/s/1e3),f=th.filter(v=>v>i_).reduce((v,x)=>v+(x-i_)/i_,0);return{loadTime:i,fullLoadTime:n,fps:c,percentDroppedFrames:f/(s+f)*100,totalFrames:s}}};g.$=class extends R{},g.A=$c,g.B=fy,g.C=function(i){if($e==null){const n=i.navigator?i.navigator.userAgent:null;$e=!!i.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return $e},g.D=ft,g.E=lr,g.F=class{constructor(i,n){this.target=i,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new iE(()=>this.process()),this.subscription=function(s,c,f,v){return s.addEventListener(c,f,!1),{unsubscribe:()=>{s.removeEventListener(c,f,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=Le(self)?i:window}registerMessageHandler(i,n){this.messageHandlers[i]=n}sendAsync(i,n){return new Promise((s,c)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:s,reject:c},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[f];const b={id:f,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const v=[],x=Object.assign(Object.assign({},i),{id:f,sourceMapId:this.mapId,origin:location.origin,data:ma(i.data,v)});this.target.postMessage(x,{transfer:v})})}receive(i){const n=i.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const c=this.abortControllers[s];return delete this.abortControllers[s],void(c&&c.abort())}if(Le(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),n=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(i,n)}processTask(i,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const f=this.resolveRejects[i];return delete this.resolveRejects[i],f?void(n.error?f.reject(ga(n.error)):f.resolve(ga(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=ga(n.data),c=new AbortController;this.abortControllers[i]=c;try{const f=yield this.messageHandlers[n.type](n.sourceMapId,s,c);this.completeTask(i,null,f)}catch(f){this.completeTask(i,f)}})}completeTask(i,n,s){const c=[];delete this.abortControllers[i];const f={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?ma(n):null,data:ma(s,c)};this.target.postMessage(f,{transfer:c})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},g.G=Ut,g.H=function(){var i=new $c(16);return $c!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},g.I=jy,g.J=function(i,n,s){var c,f,v,x,b,S,T,E,z,F,N,H,K=s[0],oe=s[1],ce=s[2];return n===i?(i[12]=n[0]*K+n[4]*oe+n[8]*ce+n[12],i[13]=n[1]*K+n[5]*oe+n[9]*ce+n[13],i[14]=n[2]*K+n[6]*oe+n[10]*ce+n[14],i[15]=n[3]*K+n[7]*oe+n[11]*ce+n[15]):(f=n[1],v=n[2],x=n[3],b=n[4],S=n[5],T=n[6],E=n[7],z=n[8],F=n[9],N=n[10],H=n[11],i[0]=c=n[0],i[1]=f,i[2]=v,i[3]=x,i[4]=b,i[5]=S,i[6]=T,i[7]=E,i[8]=z,i[9]=F,i[10]=N,i[11]=H,i[12]=c*K+b*oe+z*ce+n[12],i[13]=f*K+S*oe+F*ce+n[13],i[14]=v*K+T*oe+N*ce+n[14],i[15]=x*K+E*oe+H*ce+n[15]),i},g.K=function(i,n,s){var c=s[0],f=s[1],v=s[2];return i[0]=n[0]*c,i[1]=n[1]*c,i[2]=n[2]*c,i[3]=n[3]*c,i[4]=n[4]*f,i[5]=n[5]*f,i[6]=n[6]*f,i[7]=n[7]*f,i[8]=n[8]*v,i[9]=n[9]*v,i[10]=n[10]*v,i[11]=n[11]*v,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i},g.L=rb,g.M=function(i,n){const s={};for(let c=0;c<n.length;c++){const f=n[c];f in i&&(s[f]=i[f])}return s},g.N=Ea,g.O=Yb,g.P=L,g.Q=Jb,g.R=ro,g.S=no,g.T=Pc,g.U=W,g.V=j,g.W=Ee,g.X=fn,g.Y=w,g.Z=Jd,g._=u,g.a=Dt,g.a$=function(i,n){var s=i[0],c=i[1],f=i[2],v=i[3],x=i[4],b=i[5],S=i[6],T=i[7],E=i[8],z=i[9],F=i[10],N=i[11],H=i[12],K=i[13],oe=i[14],ce=i[15],Te=n[0],ye=n[1],Ce=n[2],Fe=n[3],He=n[4],ct=n[5],Et=n[6],st=n[7],nt=n[8],_t=n[9],pt=n[10],dt=n[11],Ne=n[12],bt=n[13],gt=n[14],Bt=n[15];return Math.abs(s-Te)<=ui*Math.max(1,Math.abs(s),Math.abs(Te))&&Math.abs(c-ye)<=ui*Math.max(1,Math.abs(c),Math.abs(ye))&&Math.abs(f-Ce)<=ui*Math.max(1,Math.abs(f),Math.abs(Ce))&&Math.abs(v-Fe)<=ui*Math.max(1,Math.abs(v),Math.abs(Fe))&&Math.abs(x-He)<=ui*Math.max(1,Math.abs(x),Math.abs(He))&&Math.abs(b-ct)<=ui*Math.max(1,Math.abs(b),Math.abs(ct))&&Math.abs(S-Et)<=ui*Math.max(1,Math.abs(S),Math.abs(Et))&&Math.abs(T-st)<=ui*Math.max(1,Math.abs(T),Math.abs(st))&&Math.abs(E-nt)<=ui*Math.max(1,Math.abs(E),Math.abs(nt))&&Math.abs(z-_t)<=ui*Math.max(1,Math.abs(z),Math.abs(_t))&&Math.abs(F-pt)<=ui*Math.max(1,Math.abs(F),Math.abs(pt))&&Math.abs(N-dt)<=ui*Math.max(1,Math.abs(N),Math.abs(dt))&&Math.abs(H-Ne)<=ui*Math.max(1,Math.abs(H),Math.abs(Ne))&&Math.abs(K-bt)<=ui*Math.max(1,Math.abs(K),Math.abs(bt))&&Math.abs(oe-gt)<=ui*Math.max(1,Math.abs(oe),Math.abs(gt))&&Math.abs(ce-Bt)<=ui*Math.max(1,Math.abs(ce),Math.abs(Bt))},g.a0=sr,g.a1=Yy,g.a2=Xe,g.a3=i=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const c of i){const f=window.document.createElement("source");vt(c)||(n.crossOrigin="Anonymous"),f.src=c,n.appendChild(f)}})},g.a4=function(){return ge++},g.a5=lt,g.a6=Gc,g.a7=_d,g.a8=Tl,g.a9=i1,g.aA=function(i){if(i.type==="custom")return new nE(i);switch(i.type){case"background":return new eE(i);case"circle":return new jT(i);case"fill":return new iI(i);case"fill-extrusion":return new vI(i);case"heatmap":return new UT(i);case"hillshade":return new GT(i);case"line":return new II(i);case"raster":return new rE(i);case"symbol":return new _f(i)}},g.aB=De,g.aC=function(i,n){if(!i)return[{command:"setStyle",args:[n]}];let s=[];try{if(!At(i.version,n.version))return[{command:"setStyle",args:[n]}];At(i.center,n.center)||s.push({command:"setCenter",args:[n.center]}),At(i.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),At(i.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),At(i.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),At(i.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),At(i.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),At(i.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),At(i.light,n.light)||s.push({command:"setLight",args:[n.light]}),At(i.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),At(i.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),At(i.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const c={},f=[];(function(x,b,S,T){let E;for(E in b=b||{},x=x||{})Object.prototype.hasOwnProperty.call(x,E)&&(Object.prototype.hasOwnProperty.call(b,E)||xt(E,S,T));for(E in b)Object.prototype.hasOwnProperty.call(b,E)&&(Object.prototype.hasOwnProperty.call(x,E)?At(x[E],b[E])||(x[E].type==="geojson"&&b[E].type==="geojson"&&Tr(x,b,E)?er(S,{command:"setGeoJSONSourceData",args:[E,b[E].data]}):_n(E,b,S,T)):br(E,b,S))})(i.sources,n.sources,f,c);const v=[];i.layers&&i.layers.forEach(x=>{"source"in x&&c[x.source]?s.push({command:"removeLayer",args:[x.id]}):v.push(x)}),s=s.concat(f),function(x,b,S){b=b||[];const T=(x=x||[]).map(En),E=b.map(En),z=x.reduce(Bn,{}),F=b.reduce(Bn,{}),N=T.slice(),H=Object.create(null);let K,oe,ce,Te,ye;for(let Ce=0,Fe=0;Ce<T.length;Ce++)K=T[Ce],Object.prototype.hasOwnProperty.call(F,K)?Fe++:(er(S,{command:"removeLayer",args:[K]}),N.splice(N.indexOf(K,Fe),1));for(let Ce=0,Fe=0;Ce<E.length;Ce++)K=E[E.length-1-Ce],N[N.length-1-Ce]!==K&&(Object.prototype.hasOwnProperty.call(z,K)?(er(S,{command:"removeLayer",args:[K]}),N.splice(N.lastIndexOf(K,N.length-Fe),1)):Fe++,Te=N[N.length-Ce],er(S,{command:"addLayer",args:[F[K],Te]}),N.splice(N.length-Ce,0,K),H[K]=!0);for(let Ce=0;Ce<E.length;Ce++)if(K=E[Ce],oe=z[K],ce=F[K],!H[K]&&!At(oe,ce))if(At(oe.source,ce.source)&&At(oe["source-layer"],ce["source-layer"])&&At(oe.type,ce.type)){for(ye in un(oe.layout,ce.layout,S,K,null,"setLayoutProperty"),un(oe.paint,ce.paint,S,K,null,"setPaintProperty"),At(oe.filter,ce.filter)||er(S,{command:"setFilter",args:[K,ce.filter]}),At(oe.minzoom,ce.minzoom)&&At(oe.maxzoom,ce.maxzoom)||er(S,{command:"setLayerZoomRange",args:[K,ce.minzoom,ce.maxzoom]}),oe)Object.prototype.hasOwnProperty.call(oe,ye)&&ye!=="layout"&&ye!=="paint"&&ye!=="filter"&&ye!=="metadata"&&ye!=="minzoom"&&ye!=="maxzoom"&&(ye.indexOf("paint.")===0?un(oe[ye],ce[ye],S,K,ye.slice(6),"setPaintProperty"):At(oe[ye],ce[ye])||er(S,{command:"setLayerProperty",args:[K,ye,ce[ye]]}));for(ye in ce)Object.prototype.hasOwnProperty.call(ce,ye)&&!Object.prototype.hasOwnProperty.call(oe,ye)&&ye!=="layout"&&ye!=="paint"&&ye!=="filter"&&ye!=="metadata"&&ye!=="minzoom"&&ye!=="maxzoom"&&(ye.indexOf("paint.")===0?un(oe[ye],ce[ye],S,K,ye.slice(6),"setPaintProperty"):At(oe[ye],ce[ye])||er(S,{command:"setLayerProperty",args:[K,ye,ce[ye]]}))}else er(S,{command:"removeLayer",args:[K]}),Te=N[N.lastIndexOf(K)+1],er(S,{command:"addLayer",args:[ce,Te]})}(v,n.layers,s)}catch(c){console.warn("Unable to compute style diff:",c),s=[{command:"setStyle",args:[n]}]}return s},g.aD=function(i){const n=[],s=i.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),i.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},g.aE=function i(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let c=0;c<n.length;c++)if(!i(n[c],s[c]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const c in n)if(!i(n[c],s[c]))return!1;return!0}return n===s},g.aF=Ae,g.aG=Re,g.aH=class extends Sl{constructor(i,n){super(i,n),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},g.aI=of,g.aJ=class extends Sl{constructor(i,n){super(i,n),this.current=RT}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let n=1;n<16;n++)if(i[n]!==this.current[n]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},g.aK=G0,g.aL=H0,g.aM=Cr,g.aN=class extends Sl{constructor(i,n){super(i,n),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},g.aO=class extends Sl{constructor(i,n){super(i,n),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},g.aP=function(i,n,s,c,f,v,x){var b=1/(n-s),S=1/(c-f),T=1/(v-x);return i[0]=-2*b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*T,i[11]=0,i[12]=(n+s)*b,i[13]=(f+c)*S,i[14]=(x+v)*T,i[15]=1,i},g.aQ=NT,g.aR=class extends xe{},g.aS=AI,g.aT=class extends Pe{},g.aU=Py,g.aV=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},g.aW=ab,g.aX=$n,g.aY=to,g.aZ=class extends mt{},g.a_=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]&&i[8]===n[8]&&i[9]===n[9]&&i[10]===n[10]&&i[11]===n[11]&&i[12]===n[12]&&i[13]===n[13]&&i[14]===n[14]&&i[15]===n[15]},g.aa=function(i){const n={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,c,f,v)=>{const x=f||v;return n[c]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},g.ab=function(i,n){const s=[];for(const c in i)c in n||s.push(c);return s},g.ac=pe,g.ad=function(i,n,s){var c=Math.sin(s),f=Math.cos(s),v=n[0],x=n[1],b=n[2],S=n[3],T=n[4],E=n[5],z=n[6],F=n[7];return n!==i&&(i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=v*f+T*c,i[1]=x*f+E*c,i[2]=b*f+z*c,i[3]=S*f+F*c,i[4]=T*f-v*c,i[5]=E*f-x*c,i[6]=z*f-b*c,i[7]=F*f-S*c,i},g.ae=function(i){var n=new $c(16);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n},g.af=cf,g.ag=function(i,n){let s=0,c=0;if(i.kind==="constant")c=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=i,b=f?pe(li.interpolationFactor(f,n,v,x),0,1):0;i.kind==="camera"?c=ai.number(i.minSize,i.maxSize,b):s=b}return{uSizeT:s,uSize:c}},g.ai=function(i,{uSize:n,uSizeT:s},{lowerSize:c,upperSize:f}){return i.kind==="source"?c/ns:i.kind==="composite"?ai.number(c/ns,f/ns,s):n},g.aj=Gy,g.ak=function(i,n,s,c){const f=n.y-i.y,v=n.x-i.x,x=c.y-s.y,b=c.x-s.x,S=x*v-b*f;if(S===0)return null;const T=(b*(i.y-s.y)-x*(i.x-s.x))/S;return new L(i.x+T*v,i.y+T*f)},g.al=l1,g.am=K0,g.an=Ty,g.ao=function(i){let n=1/0,s=1/0,c=-1/0,f=-1/0;for(const v of i)n=Math.min(n,v.x),s=Math.min(s,v.y),c=Math.max(c,v.x),f=Math.max(f,v.y);return[n,s,c,f]},g.ap=vn,g.ar=Wy,g.as=function(i,n){var s=n[0],c=n[1],f=n[2],v=n[3],x=n[4],b=n[5],S=n[6],T=n[7],E=n[8],z=n[9],F=n[10],N=n[11],H=n[12],K=n[13],oe=n[14],ce=n[15],Te=s*b-c*x,ye=s*S-f*x,Ce=s*T-v*x,Fe=c*S-f*b,He=c*T-v*b,ct=f*T-v*S,Et=E*K-z*H,st=E*oe-F*H,nt=E*ce-N*H,_t=z*oe-F*K,pt=z*ce-N*K,dt=F*ce-N*oe,Ne=Te*dt-ye*pt+Ce*_t+Fe*nt-He*st+ct*Et;return Ne?(i[0]=(b*dt-S*pt+T*_t)*(Ne=1/Ne),i[1]=(f*pt-c*dt-v*_t)*Ne,i[2]=(K*ct-oe*He+ce*Fe)*Ne,i[3]=(F*He-z*ct-N*Fe)*Ne,i[4]=(S*nt-x*dt-T*st)*Ne,i[5]=(s*dt-f*nt+v*st)*Ne,i[6]=(oe*Ce-H*ct-ce*ye)*Ne,i[7]=(E*ct-F*Ce+N*ye)*Ne,i[8]=(x*pt-b*nt+T*Et)*Ne,i[9]=(c*nt-s*pt-v*Et)*Ne,i[10]=(H*He-K*Ce+ce*Te)*Ne,i[11]=(z*Ce-E*He-N*Te)*Ne,i[12]=(b*st-x*_t-S*Et)*Ne,i[13]=(s*_t-c*st+f*Et)*Ne,i[14]=(K*ye-H*Fe-oe*Te)*Ne,i[15]=(E*Fe-z*ye+F*Te)*Ne,i):null},g.at=Qy,g.au=Uy,g.av=e_,g.aw=function(){const i={},n=ze.$version;for(const s in ze.$root){const c=ze.$root[s];if(c.required){let f=null;f=s==="version"?n:c.type==="array"?[]:{},f!=null&&(i[s]=f)}}return i},g.ax=zd,g.ay=mr,g.az=function(i){i=i.slice();const n=Object.create(null);for(let s=0;s<i.length;s++)n[i[s].id]=i[s];for(let s=0;s<i.length;s++)"ref"in i[s]&&(i[s]=kr(i[s],n[i[s].ref]));return i},g.b=Ke,g.b0=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i},g.b1=function(i,n,s){return i[0]=n[0]*s[0],i[1]=n[1]*s[1],i[2]=n[2]*s[2],i[3]=n[3]*s[3],i},g.b2=function(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]+i[3]*n[3]},g.b3=de,g.b4=t1,g.b5=Qb,g.b6=function(i,n,s,c,f){var v,x=1/Math.tan(n/2);return i[0]=x/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=x,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,f!=null&&f!==1/0?(i[10]=(f+c)*(v=1/(c-f)),i[14]=2*f*c*v):(i[10]=-1,i[14]=-2*c),i},g.b7=function(i,n,s){var c=Math.sin(s),f=Math.cos(s),v=n[4],x=n[5],b=n[6],S=n[7],T=n[8],E=n[9],z=n[10],F=n[11];return n!==i&&(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[4]=v*f+T*c,i[5]=x*f+E*c,i[6]=b*f+z*c,i[7]=S*f+F*c,i[8]=T*f-v*c,i[9]=E*f-x*c,i[10]=z*f-b*c,i[11]=F*f-S*c,i},g.b8=V,g.b9=Q,g.bA=Ib,g.bB=function(i){return i.message===Ge},g.bC=ca,g.bD=ki,g.ba=function(i){return i*Math.PI/180},g.bb=function(i,n){const{x:s,y:c}=Jd.fromLngLat(n);return!(i<0||i>25||c<0||c>=1||s<0||s>=1)},g.bc=function(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=n[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},g.bd=class extends P{},g.be=Xy,g.bf=pE,g.bh=Rt,g.bi=function(i,n){Dt.REGISTERED_PROTOCOLS[i]=n},g.bj=function(i){delete Dt.REGISTERED_PROTOCOLS[i]},g.bk=function(i,n){const s={};for(let f=0;f<i.length;f++){const v=n&&n[i[f].id]||Hp(i[f]);n&&(n[i[f].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(i[f])}const c=[];for(const f in s)c.push(s[f]);return c},g.bl=ht,g.bm=n1,g.bn=o1,g.bo=Bb,g.bp=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=fn/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const n=i.bucket.layers[0],s=n.layout,c=n._unevaluatedLayout._values,f={layoutIconSize:c["icon-size"].possiblyEvaluate(new jr(i.bucket.zoom+1),i.canonical),layoutTextSize:c["text-size"].possiblyEvaluate(new jr(i.bucket.zoom+1),i.canonical),textMaxSize:c["text-size"].possiblyEvaluate(new jr(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:T,maxZoom:E}=i.bucket.textSizeData;f.compositeTextSizes=[c["text-size"].possiblyEvaluate(new jr(T),i.canonical),c["text-size"].possiblyEvaluate(new jr(E),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:T,maxZoom:E}=i.bucket.iconSizeData;f.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new jr(T),i.canonical),c["icon-size"].possiblyEvaluate(new jr(E),i.canonical)]}const v=s.get("text-line-height")*vn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",b=s.get("text-keep-upright"),S=s.get("text-size");for(const T of i.bucket.features){const E=s.get("text-font").evaluate(T,{},i.canonical).join(","),z=S.evaluate(T,{},i.canonical),F=f.layoutTextSize.evaluate(T,{},i.canonical),N=f.layoutIconSize.evaluate(T,{},i.canonical),H={horizontal:{},vertical:void 0},K=T.text;let oe,ce=[0,0];if(K){const Ce=K.toString(),Fe=s.get("text-letter-spacing").evaluate(T,{},i.canonical)*vn,He=my(Ce)?Fe:0,ct=s.get("text-anchor").evaluate(T,{},i.canonical),Et=y1(n,T,i.canonical);if(!Et){const pt=s.get("text-radial-offset").evaluate(T,{},i.canonical);ce=pt?g1(ct,[pt*vn,Jy]):s.get("text-offset").evaluate(T,{},i.canonical).map(dt=>dt*vn)}let st=x?"center":s.get("text-justify").evaluate(T,{},i.canonical);const nt=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(T,{},i.canonical)*vn:1/0,_t=()=>{i.bucket.allowVerticalPlacement&&Rd(Ce)&&(H.vertical=mf(K,i.glyphMap,i.glyphPositions,i.imagePositions,E,nt,v,ct,"left",He,ce,g.ah.vertical,!0,F,z))};if(!x&&Et){const pt=new Set;if(st==="auto")for(let Ne=0;Ne<Et.values.length;Ne+=2)pt.add(Qy(Et.values[Ne]));else pt.add(st);let dt=!1;for(const Ne of pt)if(!H.horizontal[Ne])if(dt)H.horizontal[Ne]=H.horizontal[0];else{const bt=mf(K,i.glyphMap,i.glyphPositions,i.imagePositions,E,nt,v,"center",Ne,He,ce,g.ah.horizontal,!1,F,z);bt&&(H.horizontal[Ne]=bt,dt=bt.positionedLines.length===1)}_t()}else{st==="auto"&&(st=Qy(ct));const pt=mf(K,i.glyphMap,i.glyphPositions,i.imagePositions,E,nt,v,ct,st,He,ce,g.ah.horizontal,!1,F,z);pt&&(H.horizontal[st]=pt),_t(),Rd(Ce)&&x&&b&&(H.vertical=mf(K,i.glyphMap,i.glyphPositions,i.imagePositions,E,nt,v,ct,st,He,ce,g.ah.vertical,!1,F,z))}}let Te=!1;if(T.icon&&T.icon.name){const Ce=i.imageMap[T.icon.name];Ce&&(oe=XI(i.imagePositions[T.icon.name],s.get("icon-offset").evaluate(T,{},i.canonical),s.get("icon-anchor").evaluate(T,{},i.canonical)),Te=!!Ce.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=Te:i.bucket.sdfIcons!==Te&&Me("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ce.pixelRatio!==i.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const ye=v1(H.horizontal)||H.vertical;i.bucket.iconsInText=!!ye&&ye.iconsInText,(ye||oe)&&dE(i.bucket,T,H,oe,i.imageMap,f,F,N,ce,Te,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},g.bq=Fy,g.br=Dy,g.bs=By,g.bt=ka,g.bu=$y,g.bv=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},g.bw=function(i,n,s,c,f){return u(this,void 0,void 0,function*(){if(j())try{return yield Ee(i,n,s,c,f)}catch{}return function(v,x,b,S,T){const E=v.width,z=v.height;We&&Ze||(We=new OffscreenCanvas(E,z),Ze=We.getContext("2d",{willReadFrequently:!0})),We.width=E,We.height=z,Ze.drawImage(v,0,0,E,z);const F=Ze.getImageData(x,b,S,T);return Ze.clearRect(0,0,E,z),F.data}(i,n,s,c,f)})},g.bx=r1,g.by=I,g.bz=M,g.c=Ct,g.d=i=>u(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),g.e=_e,g.f=i=>new Promise((n,s)=>{const c=new Image;c.onload=()=>{n(c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=be})},c.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(i)],{type:"image/png"});c.src=i.byteLength?URL.createObjectURL(f):be}),g.g=$t,g.h=(i,n)=>Jt(_e(i,{type:"json"}),n),g.i=Le,g.j=Nt,g.k=_r,g.l=(i,n)=>Jt(_e(i,{type:"arrayBuffer"}),n),g.m=Jt,g.n=function(i){return new $y(i).readFields(VI,[])},g.o=Vd,g.p=Lb,g.q=_,g.r=py,g.s=vt,g.t=Md,g.u=zs,g.v=ze,g.w=Me,g.x=function([i,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:i*Math.cos(n)*Math.sin(s),y:i*Math.sin(n)*Math.sin(s),z:i*Math.cos(s)}},g.y=ai,g.z=jr}),h("worker",["./shared"],function(g){class u{constructor(O){this.keyCache={},O&&this.replace(O)}replace(O){this._layerConfigs={},this._layers={},this.update(O,[])}update(O,$){for(const se of O){this._layerConfigs[se.id]=se;const ve=this._layers[se.id]=g.aA(se);ve._featureFilter=g.a7(ve.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of $)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const Y=g.bk(Object.values(this._layerConfigs),this.keyCache);for(const se of Y){const ve=se.map(Be=>this._layers[Be.id]),we=ve[0];if(we.visibility==="none")continue;const ke=we.source||"";let fe=this.familiesBySource[ke];fe||(fe=this.familiesBySource[ke]={});const Oe=we.sourceLayer||"_geojsonTileLayer";let Ue=fe[Oe];Ue||(Ue=fe[Oe]=[]),Ue.push(ve)}}}class I{constructor(O){const $={},Y=[];for(const ke in O){const fe=O[ke],Oe=$[ke]={};for(const Ue in fe){const Be=fe[+Ue];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;const Qe={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};Y.push(Qe),Oe[Ue]={rect:Qe,metrics:Be.metrics}}}const{w:se,h:ve}=g.p(Y),we=new g.o({width:se||1,height:ve||1});for(const ke in O){const fe=O[ke];for(const Oe in fe){const Ue=fe[+Oe];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const Be=$[ke][Oe].rect;g.o.copy(Ue.bitmap,we,{x:0,y:0},{x:Be.x+1,y:Be.y+1},Ue.bitmap)}}this.image=we,this.positions=$}}g.bl("GlyphAtlas",I);class M{constructor(O){this.tileID=new g.S(O.tileID.overscaledZ,O.tileID.wrap,O.tileID.canonical.z,O.tileID.canonical.x,O.tileID.canonical.y),this.uid=O.uid,this.zoom=O.zoom,this.pixelRatio=O.pixelRatio,this.tileSize=O.tileSize,this.source=O.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=O.showCollisionBoxes,this.collectResourceTiming=!!O.collectResourceTiming,this.returnDependencies=!!O.returnDependencies,this.promoteId=O.promoteId,this.inFlightDependencies=[]}parse(O,$,Y,se){return g._(this,void 0,void 0,function*(){this.status="parsing",this.data=O,this.collisionBoxArray=new g.a5;const ve=new g.bm(Object.keys(O.layers).sort()),we=new g.bn(this.tileID,this.promoteId);we.bucketLayerIDs=[];const ke={},fe={featureIndex:we,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Y},Oe=$.familiesBySource[this.source];for(const Yt in Oe){const Sr=O.layers[Yt];if(!Sr)continue;Sr.version===1&&g.w(`Vector tile source "${this.source}" layer "${Yt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Hr=ve.encode(Yt),wn=[];for(let Mn=0;Mn<Sr.length;Mn++){const Kn=Sr.feature(Mn),Js=we.getId(Kn,Yt);wn.push({feature:Kn,id:Js,index:Mn,sourceLayerIndex:Hr})}for(const Mn of Oe[Yt]){const Kn=Mn[0];Kn.source!==this.source&&g.w(`layer.source = ${Kn.source} does not equal this.source = ${this.source}`),Kn.minzoom&&this.zoom<Math.floor(Kn.minzoom)||Kn.maxzoom&&this.zoom>=Kn.maxzoom||Kn.visibility!=="none"&&(B(Mn,this.zoom,Y),(ke[Kn.id]=Kn.createBucket({index:we.bucketLayerIDs.length,layers:Mn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Hr,sourceID:this.source})).populate(wn,fe,this.tileID.canonical),we.bucketLayerIDs.push(Mn.map(Js=>Js.id)))}}const Ue=g.aF(fe.glyphDependencies,Yt=>Object.keys(Yt).map(Number));this.inFlightDependencies.forEach(Yt=>Yt==null?void 0:Yt.abort()),this.inFlightDependencies=[];let Be=Promise.resolve({});if(Object.keys(Ue).length){const Yt=new AbortController;this.inFlightDependencies.push(Yt),Be=se.sendAsync({type:"GG",data:{stacks:Ue,source:this.source,tileID:this.tileID,type:"glyphs"}},Yt)}const Qe=Object.keys(fe.iconDependencies);let wt=Promise.resolve({});if(Qe.length){const Yt=new AbortController;this.inFlightDependencies.push(Yt),wt=se.sendAsync({type:"GI",data:{icons:Qe,source:this.source,tileID:this.tileID,type:"icons"}},Yt)}const It=Object.keys(fe.patternDependencies);let dr=Promise.resolve({});if(It.length){const Yt=new AbortController;this.inFlightDependencies.push(Yt),dr=se.sendAsync({type:"GI",data:{icons:It,source:this.source,tileID:this.tileID,type:"patterns"}},Yt)}const[jt,hr,rr]=yield Promise.all([Be,wt,dr]),hn=new I(jt),Xr=new g.bo(hr,rr);for(const Yt in ke){const Sr=ke[Yt];Sr instanceof g.a6?(B(Sr.layers,this.zoom,Y),g.bp({bucket:Sr,glyphMap:jt,glyphPositions:hn.positions,imageMap:hr,imagePositions:Xr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Sr.hasPattern&&(Sr instanceof g.bq||Sr instanceof g.br||Sr instanceof g.bs)&&(B(Sr.layers,this.zoom,Y),Sr.addFeatures(fe,this.tileID.canonical,Xr.patternPositions))}return this.status="done",{buckets:Object.values(ke).filter(Yt=>!Yt.isEmpty()),featureIndex:we,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:hn.image,imageAtlas:Xr,glyphMap:this.returnDependencies?jt:null,iconMap:this.returnDependencies?hr:null,glyphPositions:this.returnDependencies?hn.positions:null}})}}function B(ne,O,$){const Y=new g.z(O);for(const se of ne)se.recalculate(Y,$)}class L{constructor(O,$,Y){this.actor=O,this.layerIndex=$,this.availableImages=Y,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(O,$){return g._(this,void 0,void 0,function*(){const Y=yield g.l(O.request,$);try{return{vectorTile:new g.bt.VectorTile(new g.bu(Y.data)),rawData:Y.data,cacheControl:Y.cacheControl,expires:Y.expires}}catch(se){const ve=new Uint8Array(Y.data);let we=`Unable to parse the tile at ${O.request.url}, `;throw we+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${se.message}`,new Error(we)}})}loadTile(O){return g._(this,void 0,void 0,function*(){const $=O.uid,Y=!!(O&&O.request&&O.request.collectResourceTiming)&&new g.bv(O.request),se=new M(O);this.loading[$]=se;const ve=new AbortController;se.abort=ve;try{const we=yield this.loadVectorTile(O,ve);if(delete this.loading[$],!we)return null;const ke=we.rawData,fe={};we.expires&&(fe.expires=we.expires),we.cacheControl&&(fe.cacheControl=we.cacheControl);const Oe={};if(Y){const Be=Y.finish();Be&&(Oe.resourceTiming=JSON.parse(JSON.stringify(Be)))}se.vectorTile=we.vectorTile;const Ue=se.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[$]=se,this.fetching[$]={rawTileData:ke,cacheControl:fe,resourceTiming:Oe};try{const Be=yield Ue;return g.e({rawTileData:ke.slice(0)},Be,fe,Oe)}finally{delete this.fetching[$]}}catch(we){throw delete this.loading[$],se.status="done",this.loaded[$]=se,we}})}reloadTile(O){return g._(this,void 0,void 0,function*(){const $=O.uid;if(!this.loaded||!this.loaded[$])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Y=this.loaded[$];if(Y.showCollisionBoxes=O.showCollisionBoxes,Y.status==="parsing"){const se=yield Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor);let ve;if(this.fetching[$]){const{rawTileData:we,cacheControl:ke,resourceTiming:fe}=this.fetching[$];delete this.fetching[$],ve=g.e({rawTileData:we.slice(0)},se,ke,fe)}else ve=se;return ve}if(Y.status==="done"&&Y.vectorTile)return Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(O){return g._(this,void 0,void 0,function*(){const $=this.loading,Y=O.uid;$&&$[Y]&&$[Y].abort&&($[Y].abort.abort(),delete $[Y])})}removeTile(O){return g._(this,void 0,void 0,function*(){this.loaded&&this.loaded[O.uid]&&delete this.loaded[O.uid]})}}class A{constructor(){this.loaded={}}loadTile(O){return g._(this,void 0,void 0,function*(){const{uid:$,encoding:Y,rawImageData:se,redFactor:ve,greenFactor:we,blueFactor:ke,baseShift:fe}=O,Oe=se.width+2,Ue=se.height+2,Be=g.b(se)?new g.R({width:Oe,height:Ue},yield g.bw(se,-1,-1,Oe,Ue)):se,Qe=new g.bx($,Be,Y,ve,we,ke,fe);return this.loaded=this.loaded||{},this.loaded[$]=Qe,Qe})}removeTile(O){const $=this.loaded,Y=O.uid;$&&$[Y]&&delete $[Y]}}function Z(ne,O){if(ne.length!==0){q(ne[0],O);for(var $=1;$<ne.length;$++)q(ne[$],!O)}}function q(ne,O){for(var $=0,Y=0,se=0,ve=ne.length,we=ve-1;se<ve;we=se++){var ke=(ne[se][0]-ne[we][0])*(ne[we][1]+ne[se][1]),fe=$+ke;Y+=Math.abs($)>=Math.abs(ke)?$-fe+ke:ke-fe+$,$=fe}$+Y>=0!=!!O&&ne.reverse()}var re=g.by(function ne(O,$){var Y,se=O&&O.type;if(se==="FeatureCollection")for(Y=0;Y<O.features.length;Y++)ne(O.features[Y],$);else if(se==="GeometryCollection")for(Y=0;Y<O.geometries.length;Y++)ne(O.geometries[Y],$);else if(se==="Feature")ne(O.geometry,$);else if(se==="Polygon")Z(O.coordinates,$);else if(se==="MultiPolygon")for(Y=0;Y<O.coordinates.length;Y++)Z(O.coordinates[Y],$);return O});const le=g.bt.VectorTileFeature.prototype.toGeoJSON;var W={exports:{}},j=g.bz,V=g.bt.VectorTileFeature,Q=pe;function pe(ne,O){this.options=O||{},this.features=ne,this.length=ne.length}function de(ne,O){this.id=typeof ne.id=="number"?ne.id:void 0,this.type=ne.type,this.rawGeometry=ne.type===1?[ne.geometry]:ne.geometry,this.properties=ne.tags,this.extent=O||4096}pe.prototype.feature=function(ne){return new de(this.features[ne],this.options.extent)},de.prototype.loadGeometry=function(){var ne=this.rawGeometry;this.geometry=[];for(var O=0;O<ne.length;O++){for(var $=ne[O],Y=[],se=0;se<$.length;se++)Y.push(new j($[se][0],$[se][1]));this.geometry.push(Y)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ne=this.geometry,O=1/0,$=-1/0,Y=1/0,se=-1/0,ve=0;ve<ne.length;ve++)for(var we=ne[ve],ke=0;ke<we.length;ke++){var fe=we[ke];O=Math.min(O,fe.x),$=Math.max($,fe.x),Y=Math.min(Y,fe.y),se=Math.max(se,fe.y)}return[O,Y,$,se]},de.prototype.toGeoJSON=V.prototype.toGeoJSON;var _e=g.bA,ge=Q;function Ae(ne){var O=new _e;return function($,Y){for(var se in $.layers)Y.writeMessage(3,Re,$.layers[se])}(ne,O),O.finish()}function Re(ne,O){var $;O.writeVarintField(15,ne.version||1),O.writeStringField(1,ne.name||""),O.writeVarintField(5,ne.extent||4096);var Y={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<ne.length;$++)Y.feature=ne.feature($),O.writeMessage(2,De,Y);var se=Y.keys;for($=0;$<se.length;$++)O.writeStringField(3,se[$]);var ve=Y.values;for($=0;$<ve.length;$++)O.writeMessage(4,$e,ve[$])}function De(ne,O){var $=ne.feature;$.id!==void 0&&O.writeVarintField(1,$.id),O.writeMessage(2,X,ne),O.writeVarintField(3,$.type),O.writeMessage(4,Le,$)}function X(ne,O){var $=ne.feature,Y=ne.keys,se=ne.values,ve=ne.keycache,we=ne.valuecache;for(var ke in $.properties){var fe=$.properties[ke],Oe=ve[ke];if(fe!==null){Oe===void 0&&(Y.push(ke),ve[ke]=Oe=Y.length-1),O.writeVarint(Oe);var Ue=typeof fe;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(fe=JSON.stringify(fe));var Be=Ue+":"+fe,Qe=we[Be];Qe===void 0&&(se.push(fe),we[Be]=Qe=se.length-1),O.writeVarint(Qe)}}}function Me(ne,O){return(O<<3)+(7&ne)}function Ie(ne){return ne<<1^ne>>31}function Le(ne,O){for(var $=ne.loadGeometry(),Y=ne.type,se=0,ve=0,we=$.length,ke=0;ke<we;ke++){var fe=$[ke],Oe=1;Y===1&&(Oe=fe.length),O.writeVarint(Me(1,Oe));for(var Ue=Y===3?fe.length-1:fe.length,Be=0;Be<Ue;Be++){Be===1&&Y!==1&&O.writeVarint(Me(2,Ue-1));var Qe=fe[Be].x-se,wt=fe[Be].y-ve;O.writeVarint(Ie(Qe)),O.writeVarint(Ie(wt)),se+=Qe,ve+=wt}Y===3&&O.writeVarint(Me(7,1))}}function $e(ne,O){var $=typeof ne;$==="string"?O.writeStringField(1,ne):$==="boolean"?O.writeBooleanField(7,ne):$==="number"&&(ne%1!=0?O.writeDoubleField(3,ne):ne<0?O.writeSVarintField(6,ne):O.writeVarintField(5,ne))}W.exports=Ae,W.exports.fromVectorTileJs=Ae,W.exports.fromGeojsonVt=function(ne,O){O=O||{};var $={};for(var Y in ne)$[Y]=new ge(ne[Y].features,O),$[Y].name=Y,$[Y].version=O.version,$[Y].extent=O.extent;return Ae({layers:$})},W.exports.GeoJSONWrapper=ge;var Ke=g.by(W.exports);const be={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ne=>ne},Ee=Math.fround||(We=new Float32Array(1),ne=>(We[0]=+ne,We[0]));var We;const Ze=3,Ge=5,Ct=6;class Dt{constructor(O){this.options=Object.assign(Object.create(be),O),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(O){const{log:$,minZoom:Y,maxZoom:se}=this.options;$&&console.time("total time");const ve=`prepare ${O.length} points`;$&&console.time(ve),this.points=O;const we=[];for(let fe=0;fe<O.length;fe++){const Oe=O[fe];if(!Oe.geometry)continue;const[Ue,Be]=Oe.geometry.coordinates,Qe=Ee(Rt(Ue)),wt=Ee(mr(Be));we.push(Qe,wt,1/0,fe,-1,1),this.options.reduce&&we.push(0)}let ke=this.trees[se+1]=this._createTree(we);$&&console.timeEnd(ve);for(let fe=se;fe>=Y;fe--){const Oe=+Date.now();ke=this.trees[fe]=this._createTree(this._cluster(ke,fe)),$&&console.log("z%d: %d clusters in %dms",fe,ke.numItems,+Date.now()-Oe)}return $&&console.timeEnd("total time"),this}getClusters(O,$){let Y=((O[0]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,O[1]));let ve=O[2]===180?180:((O[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)Y=-180,ve=180;else if(Y>ve){const Be=this.getClusters([Y,se,180,we],$),Qe=this.getClusters([-180,se,ve,we],$);return Be.concat(Qe)}const ke=this.trees[this._limitZoom($)],fe=ke.range(Rt(Y),mr(we),Rt(ve),mr(se)),Oe=ke.data,Ue=[];for(const Be of fe){const Qe=this.stride*Be;Ue.push(Oe[Qe+Ge]>1?$t(Oe,Qe,this.clusterProps):this.points[Oe[Qe+Ze]])}return Ue}getChildren(O){const $=this._getOriginId(O),Y=this._getOriginZoom(O),se="No cluster with the specified id.",ve=this.trees[Y];if(!ve)throw new Error(se);const we=ve.data;if($*this.stride>=we.length)throw new Error(se);const ke=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),fe=ve.within(we[$*this.stride],we[$*this.stride+1],ke),Oe=[];for(const Ue of fe){const Be=Ue*this.stride;we[Be+4]===O&&Oe.push(we[Be+Ge]>1?$t(we,Be,this.clusterProps):this.points[we[Be+Ze]])}if(Oe.length===0)throw new Error(se);return Oe}getLeaves(O,$,Y){const se=[];return this._appendLeaves(se,O,$=$||10,Y=Y||0,0),se}getTile(O,$,Y){const se=this.trees[this._limitZoom(O)],ve=Math.pow(2,O),{extent:we,radius:ke}=this.options,fe=ke/we,Oe=(Y-fe)/ve,Ue=(Y+1+fe)/ve,Be={features:[]};return this._addTileFeatures(se.range(($-fe)/ve,Oe,($+1+fe)/ve,Ue),se.data,$,Y,ve,Be),$===0&&this._addTileFeatures(se.range(1-fe/ve,Oe,1,Ue),se.data,ve,Y,ve,Be),$===ve-1&&this._addTileFeatures(se.range(0,Oe,fe/ve,Ue),se.data,-1,Y,ve,Be),Be.features.length?Be:null}getClusterExpansionZoom(O){let $=this._getOriginZoom(O)-1;for(;$<=this.options.maxZoom;){const Y=this.getChildren(O);if($++,Y.length!==1)break;O=Y[0].properties.cluster_id}return $}_appendLeaves(O,$,Y,se,ve){const we=this.getChildren($);for(const ke of we){const fe=ke.properties;if(fe&&fe.cluster?ve+fe.point_count<=se?ve+=fe.point_count:ve=this._appendLeaves(O,fe.cluster_id,Y,se,ve):ve<se?ve++:O.push(ke),O.length===Y)break}return ve}_createTree(O){const $=new g.av(O.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<O.length;Y+=this.stride)$.add(O[Y],O[Y+1]);return $.finish(),$.data=O,$}_addTileFeatures(O,$,Y,se,ve,we){for(const ke of O){const fe=ke*this.stride,Oe=$[fe+Ge]>1;let Ue,Be,Qe;if(Oe)Ue=Ut($,fe,this.clusterProps),Be=$[fe],Qe=$[fe+1];else{const dr=this.points[$[fe+Ze]];Ue=dr.properties;const[jt,hr]=dr.geometry.coordinates;Be=Rt(jt),Qe=mr(hr)}const wt={type:1,geometry:[[Math.round(this.options.extent*(Be*ve-Y)),Math.round(this.options.extent*(Qe*ve-se))]],tags:Ue};let It;It=Oe||this.options.generateId?$[fe+Ze]:this.points[$[fe+Ze]].id,It!==void 0&&(wt.id=It),we.features.push(wt)}}_limitZoom(O){return Math.max(this.options.minZoom,Math.min(Math.floor(+O),this.options.maxZoom+1))}_cluster(O,$){const{radius:Y,extent:se,reduce:ve,minPoints:we}=this.options,ke=Y/(se*Math.pow(2,$)),fe=O.data,Oe=[],Ue=this.stride;for(let Be=0;Be<fe.length;Be+=Ue){if(fe[Be+2]<=$)continue;fe[Be+2]=$;const Qe=fe[Be],wt=fe[Be+1],It=O.within(fe[Be],fe[Be+1],ke),dr=fe[Be+Ge];let jt=dr;for(const hr of It){const rr=hr*Ue;fe[rr+2]>$&&(jt+=fe[rr+Ge])}if(jt>dr&&jt>=we){let hr,rr=Qe*dr,hn=wt*dr,Xr=-1;const Yt=((Be/Ue|0)<<5)+($+1)+this.points.length;for(const Sr of It){const Hr=Sr*Ue;if(fe[Hr+2]<=$)continue;fe[Hr+2]=$;const wn=fe[Hr+Ge];rr+=fe[Hr]*wn,hn+=fe[Hr+1]*wn,fe[Hr+4]=Yt,ve&&(hr||(hr=this._map(fe,Be,!0),Xr=this.clusterProps.length,this.clusterProps.push(hr)),ve(hr,this._map(fe,Hr)))}fe[Be+4]=Yt,Oe.push(rr/jt,hn/jt,1/0,Yt,-1,jt),ve&&Oe.push(Xr)}else{for(let hr=0;hr<Ue;hr++)Oe.push(fe[Be+hr]);if(jt>1)for(const hr of It){const rr=hr*Ue;if(!(fe[rr+2]<=$)){fe[rr+2]=$;for(let hn=0;hn<Ue;hn++)Oe.push(fe[rr+hn])}}}}return Oe}_getOriginId(O){return O-this.points.length>>5}_getOriginZoom(O){return(O-this.points.length)%32}_map(O,$,Y){if(O[$+Ge]>1){const we=this.clusterProps[O[$+Ct]];return Y?Object.assign({},we):we}const se=this.points[O[$+Ze]].properties,ve=this.options.map(se);return Y&&ve===se?Object.assign({},ve):ve}}function $t(ne,O,$){return{type:"Feature",id:ne[O+Ze],properties:Ut(ne,O,$),geometry:{type:"Point",coordinates:[(Y=ne[O],360*(Y-.5)),Jt(ne[O+1])]}};var Y}function Ut(ne,O,$){const Y=ne[O+Ge],se=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,ve=ne[O+Ct],we=ve===-1?{}:Object.assign({},$[ve]);return Object.assign(we,{cluster:!0,cluster_id:ne[O+Ze],point_count:Y,point_count_abbreviated:se})}function Rt(ne){return ne/360+.5}function mr(ne){const O=Math.sin(ne*Math.PI/180),$=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return $<0?0:$>1?1:$}function Jt(ne){const O=(180-360*ne)*Math.PI/180;return 360*Math.atan(Math.exp(O))/Math.PI-90}function vt(ne,O,$,Y){let se=Y;const ve=O+($-O>>1);let we,ke=$-O;const fe=ne[O],Oe=ne[O+1],Ue=ne[$],Be=ne[$+1];for(let Qe=O+3;Qe<$;Qe+=3){const wt=Kt(ne[Qe],ne[Qe+1],fe,Oe,Ue,Be);if(wt>se)we=Qe,se=wt;else if(wt===se){const It=Math.abs(Qe-ve);It<ke&&(we=Qe,ke=It)}}se>Y&&(we-O>3&&vt(ne,O,we,Y),ne[we+2]=se,$-we>3&&vt(ne,we,$,Y))}function Kt(ne,O,$,Y,se,ve){let we=se-$,ke=ve-Y;if(we!==0||ke!==0){const fe=((ne-$)*we+(O-Y)*ke)/(we*we+ke*ke);fe>1?($=se,Y=ve):fe>0&&($+=we*fe,Y+=ke*fe)}return we=ne-$,ke=O-Y,we*we+ke*ke}function Xt(ne,O,$,Y){const se={id:ne??null,type:O,geometry:$,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(O==="Point"||O==="MultiPoint"||O==="LineString")_r(se,$);else if(O==="Polygon")_r(se,$[0]);else if(O==="MultiLineString")for(const ve of $)_r(se,ve);else if(O==="MultiPolygon")for(const ve of $)_r(se,ve[0]);return se}function _r(ne,O){for(let $=0;$<O.length;$+=3)ne.minX=Math.min(ne.minX,O[$]),ne.minY=Math.min(ne.minY,O[$+1]),ne.maxX=Math.max(ne.maxX,O[$]),ne.maxY=Math.max(ne.maxY,O[$+1])}function Nt(ne,O,$,Y){if(!O.geometry)return;const se=O.geometry.coordinates;if(se&&se.length===0)return;const ve=O.geometry.type,we=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2);let ke=[],fe=O.id;if($.promoteId?fe=O.properties[$.promoteId]:$.generateId&&(fe=Y||0),ve==="Point")lr(se,ke);else if(ve==="MultiPoint")for(const Oe of se)lr(Oe,ke);else if(ve==="LineString")ze(se,ke,we,!1);else if(ve==="MultiLineString"){if($.lineMetrics){for(const Oe of se)ke=[],ze(Oe,ke,we,!1),ne.push(Xt(fe,"LineString",ke,O.properties));return}$r(se,ke,we,!1)}else if(ve==="Polygon")$r(se,ke,we,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const Oe of O.geometry.geometries)Nt(ne,{id:fe,geometry:Oe,properties:O.properties},$,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Oe of se){const Ue=[];$r(Oe,Ue,we,!0),ke.push(Ue)}}ne.push(Xt(fe,ve,ke,O.properties))}function lr(ne,O){O.push(kr(ne[0]),At(ne[1]),0)}function ze(ne,O,$,Y){let se,ve,we=0;for(let fe=0;fe<ne.length;fe++){const Oe=kr(ne[fe][0]),Ue=At(ne[fe][1]);O.push(Oe,Ue,0),fe>0&&(we+=Y?(se*Ue-Oe*ve)/2:Math.sqrt(Math.pow(Oe-se,2)+Math.pow(Ue-ve,2))),se=Oe,ve=Ue}const ke=O.length-3;O[2]=1,vt(O,0,ke,$),O[ke+2]=1,O.size=Math.abs(we),O.start=0,O.end=O.size}function $r(ne,O,$,Y){for(let se=0;se<ne.length;se++){const ve=[];ze(ne[se],ve,$,Y),O.push(ve)}}function kr(ne){return ne/360+.5}function At(ne){const O=Math.sin(ne*Math.PI/180),$=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return $<0?0:$>1?1:$}function er(ne,O,$,Y,se,ve,we,ke){if(Y/=O,ve>=($/=O)&&we<Y)return ne;if(we<$||ve>=Y)return null;const fe=[];for(const Oe of ne){const Ue=Oe.geometry;let Be=Oe.type;const Qe=se===0?Oe.minX:Oe.minY,wt=se===0?Oe.maxX:Oe.maxY;if(Qe>=$&&wt<Y){fe.push(Oe);continue}if(wt<$||Qe>=Y)continue;let It=[];if(Be==="Point"||Be==="MultiPoint")br(Ue,It,$,Y,se);else if(Be==="LineString")xt(Ue,It,$,Y,se,!1,ke.lineMetrics);else if(Be==="MultiLineString")Tr(Ue,It,$,Y,se,!1);else if(Be==="Polygon")Tr(Ue,It,$,Y,se,!0);else if(Be==="MultiPolygon")for(const dr of Ue){const jt=[];Tr(dr,jt,$,Y,se,!0),jt.length&&It.push(jt)}if(It.length){if(ke.lineMetrics&&Be==="LineString"){for(const dr of It)fe.push(Xt(Oe.id,Be,dr,Oe.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(It.length===1?(Be="LineString",It=It[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=It.length===3?"Point":"MultiPoint"),fe.push(Xt(Oe.id,Be,It,Oe.tags))}}return fe.length?fe:null}function br(ne,O,$,Y,se){for(let ve=0;ve<ne.length;ve+=3){const we=ne[ve+se];we>=$&&we<=Y&&un(O,ne[ve],ne[ve+1],ne[ve+2])}}function xt(ne,O,$,Y,se,ve,we){let ke=_n(ne);const fe=se===0?En:Bn;let Oe,Ue,Be=ne.start;for(let jt=0;jt<ne.length-3;jt+=3){const hr=ne[jt],rr=ne[jt+1],hn=ne[jt+2],Xr=ne[jt+3],Yt=ne[jt+4],Sr=se===0?hr:rr,Hr=se===0?Xr:Yt;let wn=!1;we&&(Oe=Math.sqrt(Math.pow(hr-Xr,2)+Math.pow(rr-Yt,2))),Sr<$?Hr>$&&(Ue=fe(ke,hr,rr,Xr,Yt,$),we&&(ke.start=Be+Oe*Ue)):Sr>Y?Hr<Y&&(Ue=fe(ke,hr,rr,Xr,Yt,Y),we&&(ke.start=Be+Oe*Ue)):un(ke,hr,rr,hn),Hr<$&&Sr>=$&&(Ue=fe(ke,hr,rr,Xr,Yt,$),wn=!0),Hr>Y&&Sr<=Y&&(Ue=fe(ke,hr,rr,Xr,Yt,Y),wn=!0),!ve&&wn&&(we&&(ke.end=Be+Oe*Ue),O.push(ke),ke=_n(ne)),we&&(Be+=Oe)}let Qe=ne.length-3;const wt=ne[Qe],It=ne[Qe+1],dr=se===0?wt:It;dr>=$&&dr<=Y&&un(ke,wt,It,ne[Qe+2]),Qe=ke.length-3,ve&&Qe>=3&&(ke[Qe]!==ke[0]||ke[Qe+1]!==ke[1])&&un(ke,ke[0],ke[1],ke[2]),ke.length&&O.push(ke)}function _n(ne){const O=[];return O.size=ne.size,O.start=ne.start,O.end=ne.end,O}function Tr(ne,O,$,Y,se,ve){for(const we of ne)xt(we,O,$,Y,se,ve,!1)}function un(ne,O,$,Y){ne.push(O,$,Y)}function En(ne,O,$,Y,se,ve){const we=(ve-O)/(Y-O);return un(ne,ve,$+(se-$)*we,1),we}function Bn(ne,O,$,Y,se,ve){const we=(ve-$)/(se-$);return un(ne,O+(Y-O)*we,ve,1),we}function Xe(ne,O){const $=[];for(let Y=0;Y<ne.length;Y++){const se=ne[Y],ve=se.type;let we;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")we=dn(se.geometry,O);else if(ve==="MultiLineString"||ve==="Polygon"){we=[];for(const ke of se.geometry)we.push(dn(ke,O))}else if(ve==="MultiPolygon"){we=[];for(const ke of se.geometry){const fe=[];for(const Oe of ke)fe.push(dn(Oe,O));we.push(fe)}}$.push(Xt(se.id,ve,we,se.tags))}return $}function dn(ne,O){const $=[];$.size=ne.size,ne.start!==void 0&&($.start=ne.start,$.end=ne.end);for(let Y=0;Y<ne.length;Y+=3)$.push(ne[Y]+O,ne[Y+1],ne[Y+2]);return $}function cr(ne,O){if(ne.transformed)return ne;const $=1<<ne.z,Y=ne.x,se=ne.y;for(const ve of ne.features){const we=ve.geometry,ke=ve.type;if(ve.geometry=[],ke===1)for(let fe=0;fe<we.length;fe+=2)ve.geometry.push(zt(we[fe],we[fe+1],O,$,Y,se));else for(let fe=0;fe<we.length;fe++){const Oe=[];for(let Ue=0;Ue<we[fe].length;Ue+=2)Oe.push(zt(we[fe][Ue],we[fe][Ue+1],O,$,Y,se));ve.geometry.push(Oe)}}return ne.transformed=!0,ne}function zt(ne,O,$,Y,se,ve){return[Math.round($*(ne*Y-se)),Math.round($*(O*Y-ve))]}function Nr(ne,O,$,Y,se){const ve=O===se.maxZoom?0:se.tolerance/((1<<O)*se.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:ne.length,source:null,x:$,y:Y,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ke of ne)qe(we,ke,ve,se);return we}function qe(ne,O,$,Y){const se=O.geometry,ve=O.type,we=[];if(ne.minX=Math.min(ne.minX,O.minX),ne.minY=Math.min(ne.minY,O.minY),ne.maxX=Math.max(ne.maxX,O.maxX),ne.maxY=Math.max(ne.maxY,O.maxY),ve==="Point"||ve==="MultiPoint")for(let ke=0;ke<se.length;ke+=3)we.push(se[ke],se[ke+1]),ne.numPoints++,ne.numSimplified++;else if(ve==="LineString")kt(we,se,ne,$,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let ke=0;ke<se.length;ke++)kt(we,se[ke],ne,$,ve==="Polygon",ke===0);else if(ve==="MultiPolygon")for(let ke=0;ke<se.length;ke++){const fe=se[ke];for(let Oe=0;Oe<fe.length;Oe++)kt(we,fe[Oe],ne,$,!0,Oe===0)}if(we.length){let ke=O.tags||null;if(ve==="LineString"&&Y.lineMetrics){ke={};for(const Oe in O.tags)ke[Oe]=O.tags[Oe];ke.mapbox_clip_start=se.start/se.size,ke.mapbox_clip_end=se.end/se.size}const fe={geometry:we,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:ke};O.id!==null&&(fe.id=O.id),ne.features.push(fe)}}function kt(ne,O,$,Y,se,ve){const we=Y*Y;if(Y>0&&O.size<(se?we:Y))return void($.numPoints+=O.length/3);const ke=[];for(let fe=0;fe<O.length;fe+=3)(Y===0||O[fe+2]>we)&&($.numSimplified++,ke.push(O[fe],O[fe+1])),$.numPoints++;se&&function(fe,Oe){let Ue=0;for(let Be=0,Qe=fe.length,wt=Qe-2;Be<Qe;wt=Be,Be+=2)Ue+=(fe[Be]-fe[wt])*(fe[Be+1]+fe[wt+1]);if(Ue>0===Oe)for(let Be=0,Qe=fe.length;Be<Qe/2;Be+=2){const wt=fe[Be],It=fe[Be+1];fe[Be]=fe[Qe-2-Be],fe[Be+1]=fe[Qe-1-Be],fe[Qe-2-Be]=wt,fe[Qe-1-Be]=It}}(ke,ve),ne.push(ke)}const Pt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Pn{constructor(O,$){const Y=($=this.options=function(ve,we){for(const ke in we)ve[ke]=we[ke];return ve}(Object.create(Pt),$)).debug;if(Y&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");let se=function(ve,we){const ke=[];if(ve.type==="FeatureCollection")for(let fe=0;fe<ve.features.length;fe++)Nt(ke,ve.features[fe],we,fe);else Nt(ke,ve.type==="Feature"?ve:{geometry:ve},we);return ke}(O,$);this.tiles={},this.tileCoords=[],Y&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),se=function(ve,we){const ke=we.buffer/we.extent;let fe=ve;const Oe=er(ve,1,-1-ke,ke,0,-1,2,we),Ue=er(ve,1,1-ke,2+ke,0,-1,2,we);return(Oe||Ue)&&(fe=er(ve,1,-ke,1+ke,0,-1,2,we)||[],Oe&&(fe=Xe(Oe,1).concat(fe)),Ue&&(fe=fe.concat(Xe(Ue,-1)))),fe}(se,$),se.length&&this.splitTile(se,0,0,0),Y&&(se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(O,$,Y,se,ve,we,ke){const fe=[O,$,Y,se],Oe=this.options,Ue=Oe.debug;for(;fe.length;){se=fe.pop(),Y=fe.pop(),$=fe.pop(),O=fe.pop();const Be=1<<$,Qe=si($,Y,se);let wt=this.tiles[Qe];if(!wt&&(Ue>1&&console.time("creation"),wt=this.tiles[Qe]=Nr(O,$,Y,se,Oe),this.tileCoords.push({z:$,x:Y,y:se}),Ue)){Ue>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,Y,se,wt.numFeatures,wt.numPoints,wt.numSimplified),console.timeEnd("creation"));const wn=`z${$}`;this.stats[wn]=(this.stats[wn]||0)+1,this.total++}if(wt.source=O,ve==null){if($===Oe.indexMaxZoom||wt.numPoints<=Oe.indexMaxPoints)continue}else{if($===Oe.maxZoom||$===ve)continue;if(ve!=null){const wn=ve-$;if(Y!==we>>wn||se!==ke>>wn)continue}}if(wt.source=null,O.length===0)continue;Ue>1&&console.time("clipping");const It=.5*Oe.buffer/Oe.extent,dr=.5-It,jt=.5+It,hr=1+It;let rr=null,hn=null,Xr=null,Yt=null,Sr=er(O,Be,Y-It,Y+jt,0,wt.minX,wt.maxX,Oe),Hr=er(O,Be,Y+dr,Y+hr,0,wt.minX,wt.maxX,Oe);O=null,Sr&&(rr=er(Sr,Be,se-It,se+jt,1,wt.minY,wt.maxY,Oe),hn=er(Sr,Be,se+dr,se+hr,1,wt.minY,wt.maxY,Oe),Sr=null),Hr&&(Xr=er(Hr,Be,se-It,se+jt,1,wt.minY,wt.maxY,Oe),Yt=er(Hr,Be,se+dr,se+hr,1,wt.minY,wt.maxY,Oe),Hr=null),Ue>1&&console.timeEnd("clipping"),fe.push(rr||[],$+1,2*Y,2*se),fe.push(hn||[],$+1,2*Y,2*se+1),fe.push(Xr||[],$+1,2*Y+1,2*se),fe.push(Yt||[],$+1,2*Y+1,2*se+1)}}getTile(O,$,Y){O=+O,$=+$,Y=+Y;const se=this.options,{extent:ve,debug:we}=se;if(O<0||O>24)return null;const ke=1<<O,fe=si(O,$=$+ke&ke-1,Y);if(this.tiles[fe])return cr(this.tiles[fe],ve);we>1&&console.log("drilling down to z%d-%d-%d",O,$,Y);let Oe,Ue=O,Be=$,Qe=Y;for(;!Oe&&Ue>0;)Ue--,Be>>=1,Qe>>=1,Oe=this.tiles[si(Ue,Be,Qe)];return Oe&&Oe.source?(we>1&&(console.log("found parent tile z%d-%d-%d",Ue,Be,Qe),console.time("drilling down")),this.splitTile(Oe.source,Ue,Be,Qe,O,$,Y),we>1&&console.timeEnd("drilling down"),this.tiles[fe]?cr(this.tiles[fe],ve):null):null}}function si(ne,O,$){return 32*((1<<ne)*$+O)+ne}function Ft(ne,O){return O?ne.properties[O]:ne.id}function xi(ne,O){if(ne==null)return!0;if(ne.type==="Feature")return Ft(ne,O)!=null;if(ne.type==="FeatureCollection"){const $=new Set;for(const Y of ne.features){const se=Ft(Y,O);if(se==null||$.has(se))return!1;$.add(se)}return!0}return!1}function Di(ne,O){const $=new Map;if(ne!=null)if(ne.type==="Feature")$.set(Ft(ne,O),ne);else for(const Y of ne.features)$.set(Ft(Y,O),Y);return $}class Tt extends L{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(O,$){return g._(this,void 0,void 0,function*(){const Y=O.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const se=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!se)return null;const ve=new class{constructor(ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.X,this.length=ke.length,this._features=ke}feature(ke){return new class{constructor(fe){this._feature=fe,this.extent=g.X,this.type=fe.type,this.properties=fe.tags,"id"in fe&&!isNaN(fe.id)&&(this.id=parseInt(fe.id,10))}loadGeometry(){if(this._feature.type===1){const fe=[];for(const Oe of this._feature.geometry)fe.push([new g.P(Oe[0],Oe[1])]);return fe}{const fe=[];for(const Oe of this._feature.geometry){const Ue=[];for(const Be of Oe)Ue.push(new g.P(Be[0],Be[1]));fe.push(Ue)}return fe}}toGeoJSON(fe,Oe,Ue){return le.call(this,fe,Oe,Ue)}}(this._features[ke])}}(se.features);let we=Ke(ve);return we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),{vectorTile:ve,rawData:we.buffer}})}loadData(O){return g._(this,void 0,void 0,function*(){var $;($=this._pendingRequest)===null||$===void 0||$.abort();const Y=!!(O&&O.request&&O.request.collectResourceTiming)&&new g.bv(O.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(O,this._pendingRequest),this._geoJSONIndex=O.cluster?new Dt(function({superclusterOptions:we,clusterProperties:ke}){if(!ke||!we)return we;const fe={},Oe={},Ue={accumulated:null,zoom:0},Be={properties:null},Qe=Object.keys(ke);for(const wt of Qe){const[It,dr]=ke[wt],jt=g.bC(dr),hr=g.bC(typeof It=="string"?[It,["accumulated"],["get",wt]]:It);fe[wt]=jt.value,Oe[wt]=hr.value}return we.map=wt=>{Be.properties=wt;const It={};for(const dr of Qe)It[dr]=fe[dr].evaluate(Ue,Be);return It},we.reduce=(wt,It)=>{Be.properties=It;for(const dr of Qe)Ue.accumulated=wt[dr],wt[dr]=Oe[dr].evaluate(Ue,Be)},we}(O)).load((yield this._pendingData).features):(se=yield this._pendingData,new Pn(se,O.geojsonVtOptions)),this.loaded={};const ve={};if(Y){const we=Y.finish();we&&(ve.resourceTiming={},ve.resourceTiming[O.source]=JSON.parse(JSON.stringify(we)))}return ve}catch(ve){if(delete this._pendingRequest,g.bB(ve))return{abandoned:!0};throw ve}var se})}getData(){return g._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(O){const $=this.loaded;return $&&$[O.uid]?super.reloadTile(O):this.loadTile(O)}loadAndProcessGeoJSON(O,$){return g._(this,void 0,void 0,function*(){let Y=yield this.loadGeoJSON(O,$);if(delete this._pendingRequest,typeof Y!="object")throw new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`);if(re(Y,!0),O.filter){const se=g.bC(O.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(we=>`${we.key}: ${we.message}`).join(", "));Y={type:"FeatureCollection",features:Y.features.filter(we=>se.value.evaluate({zoom:0},we))}}return Y})}loadGeoJSON(O,$){return g._(this,void 0,void 0,function*(){const{promoteId:Y}=O;if(O.request){const se=yield g.h(O.request,$);return this._dataUpdateable=xi(se.data,Y)?Di(se.data,Y):void 0,se.data}if(typeof O.data=="string")try{const se=JSON.parse(O.data);return this._dataUpdateable=xi(se,Y)?Di(se,Y):void 0,se}catch{throw new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`)}if(!O.dataDiff)throw new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${O.source}`);return function(se,ve,we){var ke,fe,Oe,Ue;if(ve.removeAll&&se.clear(),ve.remove)for(const Be of ve.remove)se.delete(Be);if(ve.add)for(const Be of ve.add){const Qe=Ft(Be,we);Qe!=null&&se.set(Qe,Be)}if(ve.update)for(const Be of ve.update){let Qe=se.get(Be.id);if(Qe==null)continue;const wt=!Be.removeAllProperties&&(((ke=Be.removeProperties)===null||ke===void 0?void 0:ke.length)>0||((fe=Be.addOrUpdateProperties)===null||fe===void 0?void 0:fe.length)>0);if((Be.newGeometry||Be.removeAllProperties||wt)&&(Qe=Object.assign({},Qe),se.set(Be.id,Qe),wt&&(Qe.properties=Object.assign({},Qe.properties))),Be.newGeometry&&(Qe.geometry=Be.newGeometry),Be.removeAllProperties)Qe.properties={};else if(((Oe=Be.removeProperties)===null||Oe===void 0?void 0:Oe.length)>0)for(const It of Be.removeProperties)Object.prototype.hasOwnProperty.call(Qe.properties,It)&&delete Qe.properties[It];if(((Ue=Be.addOrUpdateProperties)===null||Ue===void 0?void 0:Ue.length)>0)for(const{key:It,value:dr}of Be.addOrUpdateProperties)Qe.properties[It]=dr}}(this._dataUpdateable,O.dataDiff,Y),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(O){return g._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(O){return this._geoJSONIndex.getClusterExpansionZoom(O.clusterId)}getClusterChildren(O){return this._geoJSONIndex.getChildren(O.clusterId)}getClusterLeaves(O){return this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset)}}class ur{constructor(O){this.self=O,this.actor=new g.F(O),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=($,Y)=>{if(this.externalWorkerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.externalWorkerSourceTypes[$]=Y},this.self.addProtocol=g.bi,this.self.removeProtocol=g.bj,this.self.registerRTLTextPlugin=$=>{if(g.bD.isParsed())throw new Error("RTL text plugin already registered.");g.bD.setMethods($)},this.actor.registerMessageHandler("LDT",($,Y)=>this._getDEMWorkerSource($,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RDT",($,Y)=>g._(this,void 0,void 0,function*(){this._getDEMWorkerSource($,Y.source).removeTile(Y)})),this.actor.registerMessageHandler("GCEZ",($,Y)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource($,Y.type,Y.source).getClusterExpansionZoom(Y)})),this.actor.registerMessageHandler("GCC",($,Y)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource($,Y.type,Y.source).getClusterChildren(Y)})),this.actor.registerMessageHandler("GCL",($,Y)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource($,Y.type,Y.source).getClusterLeaves(Y)})),this.actor.registerMessageHandler("LD",($,Y)=>this._getWorkerSource($,Y.type,Y.source).loadData(Y)),this.actor.registerMessageHandler("GD",($,Y)=>this._getWorkerSource($,Y.type,Y.source).getData()),this.actor.registerMessageHandler("LT",($,Y)=>this._getWorkerSource($,Y.type,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RT",($,Y)=>this._getWorkerSource($,Y.type,Y.source).reloadTile(Y)),this.actor.registerMessageHandler("AT",($,Y)=>this._getWorkerSource($,Y.type,Y.source).abortTile(Y)),this.actor.registerMessageHandler("RMT",($,Y)=>this._getWorkerSource($,Y.type,Y.source).removeTile(Y)),this.actor.registerMessageHandler("RS",($,Y)=>g._(this,void 0,void 0,function*(){if(!this.workerSources[$]||!this.workerSources[$][Y.type]||!this.workerSources[$][Y.type][Y.source])return;const se=this.workerSources[$][Y.type][Y.source];delete this.workerSources[$][Y.type][Y.source],se.removeSource!==void 0&&se.removeSource(Y)})),this.actor.registerMessageHandler("RM",$=>g._(this,void 0,void 0,function*(){delete this.layerIndexes[$],delete this.availableImages[$],delete this.workerSources[$],delete this.demWorkerSources[$]})),this.actor.registerMessageHandler("SR",($,Y)=>g._(this,void 0,void 0,function*(){this.referrer=Y})),this.actor.registerMessageHandler("SRPS",($,Y)=>this._syncRTLPluginState($,Y)),this.actor.registerMessageHandler("IS",($,Y)=>g._(this,void 0,void 0,function*(){this.self.importScripts(Y)})),this.actor.registerMessageHandler("SI",($,Y)=>this._setImages($,Y)),this.actor.registerMessageHandler("UL",($,Y)=>g._(this,void 0,void 0,function*(){this._getLayerIndex($).update(Y.layers,Y.removedIds)})),this.actor.registerMessageHandler("SL",($,Y)=>g._(this,void 0,void 0,function*(){this._getLayerIndex($).replace(Y)}))}_setImages(O,$){return g._(this,void 0,void 0,function*(){this.availableImages[O]=$;for(const Y in this.workerSources[O]){const se=this.workerSources[O][Y];for(const ve in se)se[ve].availableImages=$}})}_syncRTLPluginState(O,$){return g._(this,void 0,void 0,function*(){if(g.bD.isParsed())return g.bD.getState();if($.pluginStatus!=="loading")return g.bD.setState($),$;const Y=$.pluginURL;if(this.self.importScripts(Y),g.bD.isParsed()){const se={pluginStatus:"loaded",pluginURL:Y};return g.bD.setState(se),se}throw g.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Y}`)})}_getAvailableImages(O){let $=this.availableImages[O];return $||($=[]),$}_getLayerIndex(O){let $=this.layerIndexes[O];return $||($=this.layerIndexes[O]=new u),$}_getWorkerSource(O,$,Y){if(this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][$]||(this.workerSources[O][$]={}),!this.workerSources[O][$][Y]){const se={sendAsync:(ve,we)=>(ve.targetMapId=O,this.actor.sendAsync(ve,we))};switch($){case"vector":this.workerSources[O][$][Y]=new L(se,this._getLayerIndex(O),this._getAvailableImages(O));break;case"geojson":this.workerSources[O][$][Y]=new Tt(se,this._getLayerIndex(O),this._getAvailableImages(O));break;default:this.workerSources[O][$][Y]=new this.externalWorkerSourceTypes[$](se,this._getLayerIndex(O),this._getAvailableImages(O))}}return this.workerSources[O][$][Y]}_getDEMWorkerSource(O,$){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][$]||(this.demWorkerSources[O][$]=new A),this.demWorkerSources[O][$]}}return g.i(self)&&(self.worker=new ur(self)),ur}),h("index",["exports","./shared"],function(g,u){var I="4.7.1";let M,B;const L={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((r,a)=>{const d=requestAnimationFrame(r);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),a(u.c())})}),getImageData(_,r=0){return this.getImageCanvasContext(_).getImageData(-r,-r,_.width+2*r,_.height+2*r)},getImageCanvasContext(_){const r=window.document.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return r.width=_.width,r.height=_.height,a.drawImage(_,0,0,_.width,_.height),a},resolveURL:_=>(M||(M=document.createElement("a")),M.href=_,M.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class A{static testProp(r){if(!A.docStyle)return r[0];for(let a=0;a<r.length;a++)if(r[a]in A.docStyle)return r[a];return r[0]}static create(r,a,d){const p=window.document.createElement(r);return a!==void 0&&(p.className=a),d&&d.appendChild(p),p}static createNS(r,a){return window.document.createElementNS(r,a)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(r,a){r.style[A.transformProp]=a}static addEventListener(r,a,d,p={}){r.addEventListener(a,d,"passive"in p?p:p.capture)}static removeEventListener(r,a,d,p={}){r.removeEventListener(a,d,"passive"in p?p:p.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(r){const a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}static getPoint(r,a,d){const p=a.boundingClientRect;return new u.P((d.clientX-p.left)/a.x-r.clientLeft,(d.clientY-p.top)/a.y-r.clientTop)}static mousePos(r,a){const d=A.getScale(r);return A.getPoint(r,d,a)}static touchPos(r,a){const d=[],p=A.getScale(r);for(let y=0;y<a.length;y++)d.push(A.getPoint(r,p,a[y]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const Z={supported:!1,testSupport:function(_){!le&&re&&(W?j(_):q=_)}};let q,re,le=!1,W=!1;function j(_){const r=_.createTexture();_.bindTexture(_.TEXTURE_2D,r);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,re),_.isContextLost())return;Z.supported=!0}catch{}_.deleteTexture(r),le=!0}var V;typeof document<"u"&&(re=document.createElement("img"),re.onload=()=>{q&&j(q),q=null,W=!0},re.onerror=()=>{le=!0,q=null},re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let r,a,d,p;_.resetRequestQueue=()=>{r=[],a=0,d=0,p={}},_.addThrottleControl=k=>{const P=d++;return p[P]=k,P},_.removeThrottleControl=k=>{delete p[k],w()},_.getImage=(k,P,R=!0)=>new Promise((D,U)=>{Z.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),u.e(k,{type:"image"}),r.push({abortController:P,requestParameters:k,supportImageRefresh:R,state:"queued",onError:J=>{U(J)},onSuccess:J=>{D(J)}}),w()});const y=k=>u._(this,void 0,void 0,function*(){k.state="running";const{requestParameters:P,supportImageRefresh:R,onError:D,onSuccess:U,abortController:J}=k,te=R===!1&&!u.i(self)&&!u.g(P.url)&&(!P.headers||Object.keys(P.headers).reduce((he,me)=>he&&me==="accept",!0));a++;const ae=te?C(P,J):u.m(P,J);try{const he=yield ae;delete k.abortController,k.state="completed",he.data instanceof HTMLImageElement||u.b(he.data)?U(he):he.data&&U({data:yield(ue=he.data,typeof createImageBitmap=="function"?u.d(ue):u.f(ue)),cacheControl:he.cacheControl,expires:he.expires})}catch(he){delete k.abortController,D(he)}finally{a--,w()}var ue}),w=()=>{const k=(()=>{for(const P of Object.keys(p))if(p[P]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let P=a;P<k&&r.length>0;P++){const R=r.shift();R.abortController.signal.aborted?P--:y(R)}},C=(k,P)=>new Promise((R,D)=>{const U=new Image,J=k.url,te=k.credentials;te&&te==="include"?U.crossOrigin="use-credentials":(te&&te==="same-origin"||!u.s(J))&&(U.crossOrigin="anonymous"),P.signal.addEventListener("abort",()=>{U.src="",D(u.c())}),U.fetchPriority="high",U.onload=()=>{U.onerror=U.onload=null,R({data:U})},U.onerror=()=>{U.onerror=U.onload=null,P.signal.aborted||D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},U.src=J})}(V||(V={})),V.resetRequestQueue();class Q{constructor(r){this._transformRequestFn=r}transformRequest(r,a){return this._transformRequestFn&&this._transformRequestFn(r,a)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function pe(_){var r=new u.A(3);return r[0]=_[0],r[1]=_[1],r[2]=_[2],r}var de,_e=function(_,r,a){return _[0]=r[0]-a[0],_[1]=r[1]-a[1],_[2]=r[2]-a[2],_};de=new u.A(3),u.A!=Float32Array&&(de[0]=0,de[1]=0,de[2]=0);var ge=function(_){var r=_[0],a=_[1];return r*r+a*a};function Ae(_){const r=[];if(typeof _=="string")r.push({id:"default",url:_});else if(_&&_.length>0){const a=[];for(const{id:d,url:p}of _){const y=`${d}${p}`;a.indexOf(y)===-1&&(a.push(y),r.push({id:d,url:p}))}}return r}function Re(_,r,a){const d=_.split("?");return d[0]+=`${r}${a}`,d.join("?")}(function(){var _=new u.A(2);u.A!=Float32Array&&(_[0]=0,_[1]=0)})();class De{constructor(r,a,d,p){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(a,p)}update(r,a,d){const{width:p,height:y}=r,w=!(this.size&&this.size[0]===p&&this.size[1]===y||d),{context:C}=this,{gl:k}=C;if(this.useMipmap=!!(a&&a.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!a||a.premultiply!==!1)),w)this.size=[p,y],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,r):k.texImage2D(k.TEXTURE_2D,0,this.format,p,y,0,this.format,k.UNSIGNED_BYTE,r.data);else{const{x:P,y:R}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?k.texSubImage2D(k.TEXTURE_2D,0,P,R,k.RGBA,k.UNSIGNED_BYTE,r):k.texSubImage2D(k.TEXTURE_2D,0,P,R,p,y,k.RGBA,k.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(r,a,d){const{context:p}=this,{gl:y}=p;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),r!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||r),this.filter=r),a!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function X(_){const{userImage:r}=_;return!!(r&&r.render&&r.render())&&(_.data.replace(new Uint8Array(r.data.buffer)),!0)}class Me extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:a,promiseResolve:d}of this.requestors)d(this._getImagesForIds(a));this.requestors=[]}}getImage(r){const a=this.images[r];if(a&&!a.data&&a.spriteData){const d=a.spriteData;a.data=new u.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),a.spriteData=null}return a}addImage(r,a){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,a)&&(this.images[r]=a)}_validate(r,a){let d=!0;const p=a.data||a.spriteData;return this._validateStretch(a.stretchX,p&&p.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(a.stretchY,p&&p.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(a.content,a)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,a){if(!r)return!0;let d=0;for(const p of r){if(p[0]<d||p[1]<p[0]||a<p[1])return!1;d=p[1]}return!0}_validateContent(r,a){if(!r)return!0;if(r.length!==4)return!1;const d=a.spriteData,p=d&&d.width||a.data.width,y=d&&d.height||a.data.height;return!(r[0]<0||p<r[0]||r[1]<0||y<r[1]||r[2]<0||p<r[2]||r[3]<0||y<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,a,d=!0){const p=this.getImage(r);if(d&&(p.data.width!==a.data.width||p.data.height!==a.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=p.version+1,this.images[r]=a,this.updatedImages[r]=!0}removeImage(r){const a=this.images[r];delete this.images[r],delete this.patterns[r],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((a,d)=>{let p=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(p=!1);this.isLoaded()||p?a(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:a})})}_getImagesForIds(r){const a={};for(const d of r){let p=this.getImage(d);p||(this.fire(new u.k("styleimagemissing",{id:d})),p=this.getImage(d)),p?a[d]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:u.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:r,height:a}=this.atlasImage;return{width:r,height:a}}getPattern(r){const a=this.patterns[r],d=this.getImage(r);if(!d)return null;if(a&&a.position.version===d.version)return a.position;if(a)a.position.version=d.version;else{const p={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new u.I(p,d);this.patterns[r]={bin:p,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const a=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new De(r,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const y in this.patterns)r.push(this.patterns[y].bin);const{w:a,h:d}=u.p(r),p=this.atlasImage;p.resize({width:a||1,height:d||1});for(const y in this.patterns){const{bin:w}=this.patterns[y],C=w.x+1,k=w.y+1,P=this.getImage(y).data,R=P.width,D=P.height;u.R.copy(P,p,{x:0,y:0},{x:C,y:k},{width:R,height:D}),u.R.copy(P,p,{x:0,y:D-1},{x:C,y:k-1},{width:R,height:1}),u.R.copy(P,p,{x:0,y:0},{x:C,y:k+D},{width:R,height:1}),u.R.copy(P,p,{x:R-1,y:0},{x:C-1,y:k},{width:1,height:D}),u.R.copy(P,p,{x:0,y:0},{x:C+R,y:k},{width:1,height:D})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const a of r){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const d=this.getImage(a);d||u.w(`Image with ID: "${a}" was not found`),X(d)&&this.updateImage(a,d)}}}const Ie=1e20;function Le(_,r,a,d,p,y,w,C,k){for(let P=r;P<r+d;P++)$e(_,a*y+P,y,p,w,C,k);for(let P=a;P<a+p;P++)$e(_,P*y+r,1,d,w,C,k)}function $e(_,r,a,d,p,y,w){y[0]=0,w[0]=-Ie,w[1]=Ie,p[0]=_[r];for(let C=1,k=0,P=0;C<d;C++){p[C]=_[r+C*a];const R=C*C;do{const D=y[k];P=(p[C]-p[D]+R-D*D)/(C-D)/2}while(P<=w[k]&&--k>-1);k++,y[k]=C,w[k]=P,w[k+1]=Ie}for(let C=0,k=0;C<d;C++){for(;w[k+1]<C;)k++;const P=y[k],R=C-P;_[r+C*a]=p[P]+R*R}}class Ke{constructor(r,a){this.requestManager=r,this.localIdeographFontFamily=a,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const a=[];for(const y in r)for(const w of r[y])a.push(this._getAndCacheGlyphsPromise(y,w));const d=yield Promise.all(a),p={};for(const{stack:y,id:w,glyph:C}of d)p[y]||(p[y]={}),p[y][w]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return p})}_getAndCacheGlyphsPromise(r,a){return u._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let p=d.glyphs[a];if(p!==void 0)return{stack:r,id:a,glyph:p};if(p=this._tinySDF(d,r,a),p)return d.glyphs[a]=p,{stack:r,id:a,glyph:p};const y=Math.floor(a/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:r,id:a,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){const C=Ke.loadGlyphRange(r,y,this.url,this.requestManager);d.requests[y]=C}const w=yield d.requests[y];for(const C in w)this._doesCharSupportLocalGlyph(+C)||(d.glyphs[+C]=w[+C]);return d.ranges[y]=!0,{stack:r,id:a,glyph:w[a]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,a,d){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(d))return;let y=r.tinySDF;if(!y){let C="400";/bold/i.test(a)?C="900":/medium/i.test(a)?C="500":/light/i.test(a)&&(C="200"),y=r.tinySDF=new Ke.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:C})}const w=y.draw(String.fromCharCode(d));return{id:d,bitmap:new u.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ke.loadGlyphRange=function(_,r,a,d){return u._(this,void 0,void 0,function*(){const p=256*r,y=p+255,w=d.transformRequest(a.replace("{fontstack}",_).replace("{range}",`${p}-${y}`),"Glyphs"),C=yield u.l(w,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${r}, ${p}-${y}`);const k={};for(const P of u.n(C.data))k[P.id]=P;return k})},Ke.TinySDF=class{constructor({fontSize:_=24,buffer:r=3,radius:a=8,cutoff:d=.25,fontFamily:p="sans-serif",fontWeight:y="normal",fontStyle:w="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=a;const C=this.size=_+4*r,k=this._createCanvas(C),P=this.ctx=k.getContext("2d",{willReadFrequently:!0});P.font=`${w} ${y} ${_}px ${p}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(_){const r=document.createElement("canvas");return r.width=r.height=_,r}draw(_){const{width:r,actualBoundingBoxAscent:a,actualBoundingBoxDescent:d,actualBoundingBoxLeft:p,actualBoundingBoxRight:y}=this.ctx.measureText(_),w=Math.ceil(a),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-p))),k=Math.min(this.size-this.buffer,w+Math.ceil(d)),P=C+2*this.buffer,R=k+2*this.buffer,D=Math.max(P*R,0),U=new Uint8ClampedArray(D),J={data:U,width:P,height:R,glyphWidth:C,glyphHeight:k,glyphTop:w,glyphLeft:0,glyphAdvance:r};if(C===0||k===0)return J;const{ctx:te,buffer:ae,gridInner:ue,gridOuter:he}=this;te.clearRect(ae,ae,C,k),te.fillText(_,ae,ae+w);const me=te.getImageData(ae,ae,C,k);he.fill(Ie,0,D),ue.fill(0,0,D);for(let ie=0;ie<k;ie++)for(let xe=0;xe<C;xe++){const Se=me.data[4*(ie*C+xe)+3]/255;if(Se===0)continue;const Pe=(ie+ae)*P+xe+ae;if(Se===1)he[Pe]=0,ue[Pe]=Ie;else{const Ve=.5-Se;he[Pe]=Ve>0?Ve*Ve:0,ue[Pe]=Ve<0?Ve*Ve:0}}Le(he,0,0,P,R,P,this.f,this.v,this.z),Le(ue,ae,ae,C,k,P,this.f,this.v,this.z);for(let ie=0;ie<D;ie++){const xe=Math.sqrt(he[ie])-Math.sqrt(ue[ie]);U[ie]=Math.round(255-255*(xe/this.radius+this.cutoff))}return J}};class be{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,a){return u.x(r.expression.evaluate(a))}interpolate(r,a,d){return{x:u.y.number(r.x,a.x,d),y:u.y.number(r.y,a.y,d),z:u.y.number(r.z,a.z,d)}}}let Ee;class We extends u.E{constructor(r){super(),Ee=Ee||new u.q({anchor:new u.D(u.v.light.anchor),position:new be,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Ee),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,a={}){if(!this._validate(u.r,r,a))for(const d in r){const p=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,a,d){return(!d||d.validate!==!1)&&u.t(this,r.call(u.u,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Ze=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Ge extends u.E{constructor(r){super(),this._transitionable=new u.T(Ze),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(r,a={}){if(!this._validate(u.B,r,a)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in r){const p=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,a,d={}){return(d==null?void 0:d.validate)!==!1&&u.t(this,r.call(u.u,u.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Ct{constructor(r,a){this.width=r,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,a){const d=r.join(",")+String(a);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,a)),this.dashEntry[d]}getDashRanges(r,a,d){const p=[];let y=r.length%2==1?-r[r.length-1]*d:0,w=r[0]*d,C=!0;p.push({left:y,right:w,isDash:C,zeroLength:r[0]===0});let k=r[0];for(let P=1;P<r.length;P++){C=!C;const R=r[P];y=k*d,k+=R,w=k*d,p.push({left:y,right:w,isDash:C,zeroLength:R===0})}return p}addRoundDash(r,a,d){const p=a/2;for(let y=-d;y<=d;y++){const w=this.width*(this.nextRow+d+y);let C=0,k=r[C];for(let P=0;P<this.width;P++){P/k.right>1&&(k=r[++C]);const R=Math.abs(P-k.left),D=Math.abs(P-k.right),U=Math.min(R,D);let J;const te=y/d*(p+1);if(k.isDash){const ae=p-Math.abs(te);J=Math.sqrt(U*U+ae*ae)}else J=p-Math.sqrt(U*U+te*te);this.data[w+P]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(r){for(let C=r.length-1;C>=0;--C){const k=r[C],P=r[C+1];k.zeroLength?r.splice(C,1):P&&P.isDash===k.isDash&&(P.left=k.left,r.splice(C,1))}const a=r[0],d=r[r.length-1];a.isDash===d.isDash&&(a.left=d.left-this.width,d.right=a.right+this.width);const p=this.width*this.nextRow;let y=0,w=r[y];for(let C=0;C<this.width;C++){C/w.right>1&&(w=r[++y]);const k=Math.abs(C-w.left),P=Math.abs(C-w.right),R=Math.min(k,P);this.data[p+C]=Math.max(0,Math.min(255,(w.isDash?R:-R)+128))}}addDash(r,a){const d=a?7:0,p=2*d+1;if(this.nextRow+p>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let C=0;C<r.length;C++)y+=r[C];if(y!==0){const C=this.width/y,k=this.getDashRanges(r,this.width,C);a?this.addRoundDash(k,C,d):this.addRegularDash(k)}const w={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=p,this.dirty=!0,w}bind(r){const a=r.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const Dt="maplibre_preloaded_worker_pool";class $t{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<$t.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Dt]}numActive(){return Object.keys(this.active).length}}const Ut=Math.floor(L.hardwareConcurrency/2);let Rt,mr;function Jt(){return Rt||(Rt=new $t),Rt}$t.workerCount=u.C(globalThis)?Math.max(Math.min(Ut,3),1):1;class vt{constructor(r,a){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=a;const d=this.workerPool.acquire(a);for(let p=0;p<d.length;p++){const y=new u.F(d[p],a);y.name=`Worker ${p}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,a){const d=[];for(const p of this.actors)d.push(p.sendAsync({type:r,data:a}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,a){for(const d of this.actors)d.registerMessageHandler(r,a)}}function Kt(){return mr||(mr=new vt(Jt(),u.G),mr.registerMessageHandler("GR",(_,r,a)=>u.m(r,a))),mr}function Xt(_,r){const a=u.H();return u.J(a,a,[1,1,0]),u.K(a,a,[.5*_.width,.5*_.height,1]),u.L(a,a,_.calculatePosMatrix(r.toUnwrapped()))}function _r(_,r,a,d,p,y){const w=function(D,U,J){if(D)for(const te of D){const ae=U[te];if(ae&&ae.source===J&&ae.type==="fill-extrusion")return!0}else for(const te in U){const ae=U[te];if(ae.source===J&&ae.type==="fill-extrusion")return!0}return!1}(p&&p.layers,r,_.id),C=y.maxPitchScaleFactor(),k=_.tilesIn(d,C,w);k.sort(Nt);const P=[];for(const D of k)P.push({wrappedTileID:D.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(r,a,_._state,D.queryGeometry,D.cameraQueryGeometry,D.scale,p,y,C,Xt(_.transform,D.tileID))});const R=function(D){const U={},J={};for(const te of D){const ae=te.queryResults,ue=te.wrappedTileID,he=J[ue]=J[ue]||{};for(const me in ae){const ie=ae[me],xe=he[me]=he[me]||{},Se=U[me]=U[me]||[];for(const Pe of ie)xe[Pe.featureIndex]||(xe[Pe.featureIndex]=!0,Se.push(Pe))}}return U}(P);for(const D in R)R[D].forEach(U=>{const J=U.feature,te=_.getFeatureState(J.layer["source-layer"],J.id);J.source=J.layer.source,J.layer["source-layer"]&&(J.sourceLayer=J.layer["source-layer"]),J.state=te});return R}function Nt(_,r){const a=_.tileID,d=r.tileID;return a.overscaledZ-d.overscaledZ||a.canonical.y-d.canonical.y||a.wrap-d.wrap||a.canonical.x-d.canonical.x}function lr(_,r,a){return u._(this,void 0,void 0,function*(){let d=_;if(_.url?d=(yield u.h(r.transformRequest(_.url,"Source"),a)).data:yield L.frameAsync(a),!d)return null;const p=u.M(u.e(d,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(p.vectorLayerIds=d.vector_layers.map(y=>y.id)),p})}class ze{constructor(r,a){r&&(a?this.setSouthWest(r).setNorthEast(a):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}extend(r){const a=this._sw,d=this._ne;let p,y;if(r instanceof u.N)p=r,y=r;else{if(!(r instanceof ze))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ze.convert(r)):this.extend(u.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.N.convert(r)):this;if(p=r._sw,y=r._ne,!p||!y)return this}return a||d?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new u.N(p.lng,p.lat),this._ne=new u.N(y.lng,y.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:a,lat:d}=u.N.convert(r);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&p}static convert(r){return r instanceof ze?r:r&&new ze(r)}static fromLngLat(r,a=0){const d=360*a/40075017,p=d/Math.cos(Math.PI/180*r.lat);return new ze(new u.N(r.lng-p,r.lat-d),new u.N(r.lng+p,r.lat+d))}adjustAntiMeridian(){const r=new u.N(this._sw.lng,this._sw.lat),a=new u.N(this._ne.lng,this._ne.lat);return new ze(r,r.lng>a.lng?new u.N(a.lng+360,a.lat):a)}}class $r{constructor(r,a,d){this.bounds=ze.convert(this.validateBounds(r)),this.minzoom=a||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const a=Math.pow(2,r.z),d=Math.floor(u.O(this.bounds.getWest())*a),p=Math.floor(u.Q(this.bounds.getNorth())*a),y=Math.ceil(u.O(this.bounds.getEast())*a),w=Math.ceil(u.Q(this.bounds.getSouth())*a);return r.x>=d&&r.x<y&&r.y>=p&&r.y<w}}class kr extends u.E{constructor(r,a,d,p){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(a,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield lr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new $r(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(a,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((y,w)=>{r.reloadPromise={resolve:y,reject:w}})}else r.actor=this.dispatcher.getActor(),p="LT";r.abortController=new AbortController;try{const y=yield r.actor.sendAsync({type:p,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,y)}catch(y){if(delete r.abortController,r.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,a){if(a&&a.resourceTiming&&(r.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&r.setExpiryData(a),r.loadVectorData(a,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class At extends u.E{constructor(r,a,d,p){super(),this.id=r,this.dispatcher=d,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},a),u.e(this,u.M(a,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield lr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new $r(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield V.getImage(this.map._requestManager.transformRequest(a,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const p=this.map.painter.context,y=p.gl,w=d.data;r.texture=this.map.painter.getTileTexture(w.width),r.texture?r.texture.update(w,{useMipmap:!0}):(r.texture=new De(p,w,y.RGBA,{useMipmap:!0}),r.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class er extends At{constructor(r,a,d,p){super(r,a,d,p),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(a,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const p=yield V.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){const y=p.data;this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const w=u.b(y)&&u.U()?y:yield this.readImageNow(y),C={type:this.type,uid:r.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const k=yield r.actor.sendAsync({type:"LDT",data:C});r.dem=k,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const a=r.width+2,d=r.height+2;try{return new u.R({width:a,height:d},yield u.W(r,-1,-1,a,d))}catch{}}return L.getImageData(r,1)})}_getNeighboringTiles(r){const a=r.canonical,d=Math.pow(2,a.z),p=(a.x-1+d)%d,y=a.x===0?r.wrap-1:r.wrap,w=(a.x+1+d)%d,C=a.x+1===d?r.wrap+1:r.wrap,k={};return k[new u.S(r.overscaledZ,y,a.z,p,a.y).key]={backfilled:!1},k[new u.S(r.overscaledZ,C,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(k[new u.S(r.overscaledZ,y,a.z,p,a.y-1).key]={backfilled:!1},k[new u.S(r.overscaledZ,r.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},k[new u.S(r.overscaledZ,C,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<d&&(k[new u.S(r.overscaledZ,y,a.z,p,a.y+1).key]={backfilled:!1},k[new u.S(r.overscaledZ,r.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},k[new u.S(r.overscaledZ,C,a.z,w,a.y+1).key]={backfilled:!1}),k}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class br extends u.E{constructor(r,a,d,p){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(p),this._data=a.data,this._options=u.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const y=u.X/this.tileSize;a.clusterMaxZoom!==void 0&&this.maxzoom<=a.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${a.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*y,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*y,extent:u.X,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:u.X,radius:(a.clusterRadius||50)*y,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,a,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:a,offset:d}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const a=u.e({type:this.type},this.workerOptions);r?a.dataDiff=r:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(L.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let p=null;d.resourceTiming&&d.resourceTiming[this.id]&&(p=d.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&u.e(y,{resourceTiming:p}),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const a=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const p=yield this.actor.sendAsync({type:a,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(p,this.map.painter,a==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var xt=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _n extends u.E{constructor(r,a,d,p){super(),this.id=r,this.dispatcher=d,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=a}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield V.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,r&&(this.coordinates=r),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new u.j(a))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const a=r.map(u.Z.fromLngLat);this.tileID=function(p){let y=1/0,w=1/0,C=-1/0,k=-1/0;for(const U of p)y=Math.min(y,U.x),w=Math.min(w,U.y),C=Math.max(C,U.x),k=Math.max(k,U.y);const P=Math.max(C-y,k-w),R=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),D=Math.pow(2,R);return new u.a1(R,Math.floor((y+C)/2*D),Math.floor((w+k)/2*D))}(a),this.minzoom=this.maxzoom=this.tileID.z;const d=a.map(p=>this.tileID.getTilePoint(p)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,u.X,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,u.X),this._boundsArray.emplaceBack(d[2].x,d[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,xt.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new De(r,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Tr extends _n{constructor(r,a,d,p){super(r,a,d,p),this.roundZoom=!0,this.type="video",this.options=a}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const a of r.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield u.a3(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new u.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const a=this.video.seekable;r<a.start(0)||r>a.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,xt.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new De(r,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const y=this.tiles[p];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class un extends _n{constructor(r,a,d,p){super(r,a,d,p),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(w=>typeof w!="number"))||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,xt.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new De(a,this.canvas,d.RGBA,{premultiply:!0});let p=!1;for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const En={},Bn=_=>{switch(_){case"geojson":return br;case"image":return _n;case"raster":return At;case"raster-dem":return er;case"vector":return kr;case"video":return Tr;case"canvas":return un}return En[_]},Xe="RTLPluginLoaded";class dn extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Kt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(a,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=L.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Xe))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let cr=null;function zt(){return cr||(cr=new dn),cr}class Nr{constructor(r,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a4(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const a=r+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,a,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(p,y){const w={};if(!y)return w;for(const C of p){const k=C.layerIds.map(P=>y.getLayer(P)).filter(Boolean);if(k.length!==0){C.layers=k,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(P=>k.filter(R=>R.id===P)[0]));for(const P of k)w[P.id]=C}}return w}(r.buckets,a.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const y=this.buckets[p];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const y=this.buckets[p];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,zt().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const y=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(p).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const p=this.buckets[d];p.uploadPending()&&p.upload(r)}const a=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new De(r,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new De(r,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,a,d,p,y,w,C,k,P,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:y,scale:w,tileSize:this.tileSize,pixelPosMatrix:R,transform:k,params:C,queryPadding:this.queryPadding*P},r,a,d):{}}querySourceFeatures(r,a){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const p=d.loadVTLayers(),y=a&&a.sourceLayer?a.sourceLayer:"",w=p._geojsonTileLayer||p[y];if(!w)return;const C=u.a7(a&&a.filter),{z:k,x:P,y:R}=this.tileID.canonical,D={z:k,x:P,y:R};for(let U=0;U<w.length;U++){const J=w.feature(U);if(C.needGeometry){const ue=u.a8(J,!0);if(!C.filter(new u.z(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!C.filter(new u.z(this.tileID.overscaledZ),J))continue;const te=d.getId(J,y),ae=new u.a9(J,k,P,R,te);ae.tile=D,r.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const a=this.expirationTime;if(r.cacheControl){const d=u.aa(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let p=!1;if(this.expirationTime>d)p=!1;else if(a)if(this.expirationTime<a)p=!0;else{const y=this.expirationTime-a;y?this.expirationTime=d+Math.max(y,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!a.style.hasLayer(p))continue;const y=this.buckets[p],w=y.layers[0].sourceLayer||"_geojsonTileLayer",C=d[w],k=r[w];if(!C||!k||Object.keys(k).length===0)continue;y.update(k,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const P=a&&a.style&&a.style.getLayer(p);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=L.now()+r}setDependencies(r,a){const d={};for(const p of a)d[p]=!0;this.dependencies[r]=d}hasDependency(r,a){for(const d of r){const p=this.dependencies[d];if(p){for(const y of a)if(p[y])return!0}}return!1}}class qe{constructor(r,a){this.max=r,this.onRemove=a,this.reset()}reset(){for(const r in this.data)for(const a of this.data[r])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(r,a,d){const p=r.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const y={value:a,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},d)),this.data[p].push(y),this.order.push(p),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const a=this.data[r].shift();return a.timeout&&clearTimeout(a.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),a.value}getByKey(r){const a=this.data[r];return a?a[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,a){if(!this.has(r))return this;const d=r.wrapped().key,p=a===void 0?0:this.data[d].indexOf(a),y=this.data[d][p];return this.data[d].splice(p,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(r){const a=[];for(const d in this.data)for(const p of this.data[d])r(p.value)||a.push(p);for(const d of a)this.remove(d.value.tileID,d)}}class kt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,a,d){const p=String(a);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][p]=this.stateChanges[r][p]||{},u.e(this.stateChanges[r][p],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const y in this.state[r])y!==p&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][p]===null){this.deletedStates[r][p]={};for(const y in this.state[r][p])d[y]||(this.deletedStates[r][p][y]=null)}else for(const y in d)this.deletedStates[r]&&this.deletedStates[r][p]&&this.deletedStates[r][p][y]===null&&delete this.deletedStates[r][p][y]}removeFeatureState(r,a,d){if(this.deletedStates[r]===null)return;const p=String(a);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&a!==void 0)this.deletedStates[r][p]!==null&&(this.deletedStates[r][p]=this.deletedStates[r][p]||{},this.deletedStates[r][p][d]=null);else if(a!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][p])for(d in this.deletedStates[r][p]={},this.stateChanges[r][p])this.deletedStates[r][p][d]=null;else this.deletedStates[r][p]=null;else this.deletedStates[r]=null}getState(r,a){const d=String(a),p=u.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const y=this.deletedStates[r][a];if(y===null)return{};for(const w in y)delete p[w]}return p}initializeTileState(r,a){r.setFeatureState(this.state,a)}coalesceChanges(r,a){const d={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const y={};for(const w in this.stateChanges[p])this.state[p][w]||(this.state[p][w]={}),u.e(this.state[p][w],this.stateChanges[p][w]),y[w]=this.state[p][w];d[p]=y}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const y={};if(this.deletedStates[p]===null)for(const w in this.state[p])y[w]={},this.state[p][w]={};else for(const w in this.deletedStates[p]){if(this.deletedStates[p][w]===null)this.state[p][w]={};else for(const C of Object.keys(this.deletedStates[p][w]))delete this.state[p][w][C];y[w]=this.state[p][w]}d[p]=d[p]||{},u.e(d[p],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const p in r)r[p].setFeatureState(d,a)}}class Pt extends u.E{constructor(r,a,d){super(),this.id=r,this.dispatcher=d,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,y,w,C)=>{const k=new(Bn(y.type))(p,y,w,C);if(k.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${k.id}`);return k})(r,a,d,this),this._tiles={},this._cache=new qe(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new kt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const a=this._tiles[r];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,a,d){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,a,d)}catch(p){r.state="errored",p.status!==404?this._source.fire(new u.j(p,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const d=this._tiles[a];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Pn).map(r=>r.key)}getRenderableIds(r){const a=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&a.push(this._tiles[d]);return r?a.sort((d,p)=>{const y=d.tileID,w=p.tileID,C=new u.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),k=new u.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-w.overscaledZ||k.y-C.y||k.x-C.x}).map(d=>d.tileID.key):a.map(d=>d.tileID).sort(Pn).map(d=>d.key)}hasRenderableParent(r){const a=this.findLoadedParent(r,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(r,a){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(a||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,a){return u._(this,void 0,void 0,function*(){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=a),yield this._loadTile(d,r,a))})}_tileLoaded(r,a,d){r.timeAdded=L.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(a,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const a=this.getRenderableIds();for(let p=0;p<a.length;p++){const y=a[p];if(r.neighboringTiles&&r.neighboringTiles[y]){const w=this.getTileByID(y);d(r,w),d(w,r)}}function d(p,y){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let w=y.tileID.canonical.x-p.tileID.canonical.x;const C=y.tileID.canonical.y-p.tileID.canonical.y,k=Math.pow(2,p.tileID.canonical.z),P=y.tileID.key;w===0&&C===0||Math.abs(C)>1||(Math.abs(w)>1&&(Math.abs(w+k)===1?w+=k:Math.abs(w-k)===1&&(w-=k)),y.dem&&p.dem&&(p.dem.backfillBorder(y.dem,w,C),p.neighboringTiles&&p.neighboringTiles[P]&&(p.neighboringTiles[P].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,a,d,p){for(const y in this._tiles){let w=this._tiles[y];if(p[y]||!w.hasData()||w.tileID.overscaledZ<=a||w.tileID.overscaledZ>d)continue;let C=w.tileID;for(;w&&w.tileID.overscaledZ>a+1;){const P=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[P.key],w&&w.hasData()&&(C=P)}let k=C;for(;k.overscaledZ>a;)if(k=k.scaledTo(k.overscaledZ-1),r[k.key]){p[C.key]=C;break}}}findLoadedParent(r,a){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=a?d:null}for(let d=r.overscaledZ-1;d>=a;d--){const p=r.scaledTo(d),y=this._getLoadedTile(p);if(y)return y}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const a=this._tiles[r.key];return a&&a.hasData()?a:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const a=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,p=Math.floor(a*d*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(y)}handleWrapJump(r){const a=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,a){const d={};for(const p in this._tiles){const y=this._tiles[p];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+a),d[y.tileID.key]=y}this._tiles=d;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(r,a,d,p,y,w){const C={},k={},P=Object.keys(r),R=L.now();for(const D of P){const U=r[D],J=this._tiles[D];if(!J||J.fadeEndTime!==0&&J.fadeEndTime<=R)continue;const te=this.findLoadedParent(U,a),ae=this.findLoadedSibling(U),ue=te||ae||null;ue&&(this._addTile(ue.tileID),C[ue.tileID.key]=ue.tileID),k[D]=U}this._retainLoadedChildren(k,p,d,r);for(const D in C)r[D]||(this._coveredTiles[D]=!0,r[D]=C[D]);if(w){const D={},U={};for(const J of y)this._tiles[J.key].hasData()?D[J.key]=J:U[J.key]=J;for(const J in U){const te=U[J].children(this._source.maxzoom);this._tiles[te[0].key]&&this._tiles[te[1].key]&&this._tiles[te[2].key]&&this._tiles[te[3].key]&&(D[te[0].key]=r[te[0].key]=te[0],D[te[1].key]=r[te[1].key]=te[1],D[te[2].key]=r[te[2].key]=te[2],D[te[3].key]=r[te[3].key]=te[3],delete U[J])}for(const J in U){const te=U[J],ae=this.findLoadedParent(te,this._source.minzoom),ue=this.findLoadedSibling(te),he=ae||ue||null;if(he){D[he.tileID.key]=r[he.tileID.key]=he.tileID;for(const me in D)D[me].isChildOf(he.tileID)&&delete D[me]}}for(const J in this._tiles)D[J]||(this._coveredTiles[J]=!0)}}update(r,a){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=a,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new u.S(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(d=d.filter(R=>this._source.hasTile(R)))):d=[];const p=r.coveringZoomLevel(this._source),y=Math.max(p-Pt.maxOverzooming,this._source.minzoom),w=Math.max(p+Pt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const D of d)if(D.canonical.z>this._source.minzoom){const U=D.scaledTo(D.canonical.z-1);R[U.key]=U;const J=D.scaledTo(Math.max(this._source.minzoom,Math.min(D.canonical.z,5)));R[J.key]=J}d=d.concat(Object.values(R))}const C=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(d,p);si(this._source.type)&&this._updateCoveredAndRetainedTiles(k,y,w,p,d,a);for(const R in k)this._tiles[R].clearFadeHold();const P=u.ab(this._tiles,k);for(const R of P){const D=this._tiles[R];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,a){var d;const p={},y={},w=Math.max(a-Pt.maxOverzooming,this._source.minzoom),C=Math.max(a+Pt.maxUnderzooming,this._source.minzoom),k={};for(const P of r){const R=this._addTile(P);p[P.key]=P,R.hasData()||a<this._source.maxzoom&&(k[P.key]=P)}this._retainLoadedChildren(k,a,C,p);for(const P of r){let R=this._tiles[P.key];if(R.hasData())continue;if(a+1>this._source.maxzoom){const U=P.children(this._source.maxzoom)[0],J=this.getTile(U);if(J&&J.hasData()){p[U.key]=U;continue}}else{const U=P.children(this._source.maxzoom);if(p[U[0].key]&&p[U[1].key]&&p[U[2].key]&&p[U[3].key])continue}let D=R.wasRequested();for(let U=P.overscaledZ-1;U>=w;--U){const J=P.scaledTo(U);if(y[J.key])break;if(y[J.key]=!0,R=this.getTile(J),!R&&D&&(R=this._addTile(J)),R){const te=R.hasData();if((te||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||D)&&(p[J.key]=J),D=R.wasRequested(),te)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const a=[];let d,p=this._tiles[r].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){d=this._loadedParentTiles[p.key];break}a.push(p.key);const y=p.scaledTo(p.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;p=y}for(const y of a)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const a=this._tiles[r].tileID,d=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=d}}_addTile(r){let a=this._tiles[r.key];if(a)return a;a=this._cache.getAndRemove(r),a&&(this._setTileReloadTimer(r.key,a),a.tileID=r,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,a)));const d=a;return a||(a=new Nr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(a,r.key,a.state)),a.uses++,this._tiles[r.key]=a,d||this._source.fire(new u.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(r,a){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=a.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const a=this._tiles[r];a&&(a.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(r){const a=r.sourceDataType;r.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&a==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,a,d){const p=[],y=this.transform;if(!y)return p;const w=d?y.getCameraQueryGeometry(r):r,C=r.map(te=>y.pointCoordinate(te,this.terrain)),k=w.map(te=>y.pointCoordinate(te,this.terrain)),P=this.getIds();let R=1/0,D=1/0,U=-1/0,J=-1/0;for(const te of k)R=Math.min(R,te.x),D=Math.min(D,te.y),U=Math.max(U,te.x),J=Math.max(J,te.y);for(let te=0;te<P.length;te++){const ae=this._tiles[P[te]];if(ae.holdingForFade())continue;const ue=ae.tileID,he=Math.pow(2,y.zoom-ae.tileID.overscaledZ),me=a*ae.queryPadding*u.X/ae.tileSize/he,ie=[ue.getTilePoint(new u.Z(R,D)),ue.getTilePoint(new u.Z(U,J))];if(ie[0].x-me<u.X&&ie[0].y-me<u.X&&ie[1].x+me>=0&&ie[1].y+me>=0){const xe=C.map(Pe=>ue.getTilePoint(Pe)),Se=k.map(Pe=>ue.getTilePoint(Pe));p.push({tile:ae,tileID:ue,queryGeometry:xe,cameraQueryGeometry:Se,scale:he})}}return p}getVisibleCoordinates(r){const a=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of a)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(si(this._source.type)){const r=L.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=r)return!0}return!1}setFeatureState(r,a,d){this._state.updateState(r=r||"_geojsonTileLayer",a,d)}removeFeatureState(r,a,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",a,d)}getFeatureState(r,a){return this._state.getState(r=r||"_geojsonTileLayer",a)}setDependencies(r,a,d){const p=this._tiles[r];p&&p.setDependencies(a,d)}reloadTilesForDependencies(r,a){for(const d in this._tiles)this._tiles[d].hasDependency(r,a)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,a))}}function Pn(_,r){const a=Math.abs(2*_.wrap)-+(_.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return _.overscaledZ-r.overscaledZ||d-a||r.canonical.y-_.canonical.y||r.canonical.x-_.canonical.x}function si(_){return _==="raster"||_==="image"||_==="video"}Pt.maxOverzooming=10,Pt.maxUnderzooming=3;class Ft{constructor(r,a){this.reset(r,a)}reset(r,a){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let a=1,d=this._distances[a];const p=r*this.paddedLength+this.padding;for(;d<p&&a<this._distances.length;)d=this._distances[++a];const y=a-1,w=this._distances[y],C=d-w,k=C>0?(p-w)/C:0;return this.points[y].mult(1-k).add(this.points[a].mult(k))}}function xi(_,r){let a=!0;return _==="always"||_!=="never"&&r!=="never"||(a=!1),a}class Di{constructor(r,a,d){const p=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(a/d);for(let w=0;w<this.xCellCount*this.yCellCount;w++)p.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=a,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,a,d,p,y){this._forEachCell(a,d,p,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(y)}insertCircle(r,a,d,p){this._forEachCell(a-p,d-p,a+p,d+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(a),this.circles.push(d),this.circles.push(p)}_insertBoxCell(r,a,d,p,y,w){this.boxCells[y].push(w)}_insertCircleCell(r,a,d,p,y,w){this.circleCells[y].push(w)}_query(r,a,d,p,y,w,C){if(d<0||r>this.width||p<0||a>this.height)return[];const k=[];if(r<=0&&a<=0&&this.width<=d&&this.height<=p){if(y)return[{key:null,x1:r,y1:a,x2:d,y2:p}];for(let P=0;P<this.boxKeys.length;P++)k.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const R=this.circles[3*P],D=this.circles[3*P+1],U=this.circles[3*P+2];k.push({key:this.circleKeys[P],x1:R-U,y1:D-U,x2:R+U,y2:D+U})}}else this._forEachCell(r,a,d,p,this._queryCell,k,{hitTest:y,overlapMode:w,seenUids:{box:{},circle:{}}},C);return k}query(r,a,d,p){return this._query(r,a,d,p,!1,null)}hitTest(r,a,d,p,y,w){return this._query(r,a,d,p,!0,y,w).length>0}hitTestCircle(r,a,d,p,y){const w=r-d,C=r+d,k=a-d,P=a+d;if(C<0||w>this.width||P<0||k>this.height)return!1;const R=[];return this._forEachCell(w,k,C,P,this._queryCellCircle,R,{hitTest:!0,overlapMode:p,circle:{x:r,y:a,radius:d},seenUids:{box:{},circle:{}}},y),R.length>0}_queryCell(r,a,d,p,y,w,C,k){const{seenUids:P,hitTest:R,overlapMode:D}=C,U=this.boxCells[y];if(U!==null){const te=this.bboxes;for(const ae of U)if(!P.box[ae]){P.box[ae]=!0;const ue=4*ae,he=this.boxKeys[ae];if(r<=te[ue+2]&&a<=te[ue+3]&&d>=te[ue+0]&&p>=te[ue+1]&&(!k||k(he))&&(!R||!xi(D,he.overlapMode))&&(w.push({key:he,x1:te[ue],y1:te[ue+1],x2:te[ue+2],y2:te[ue+3]}),R))return!0}}const J=this.circleCells[y];if(J!==null){const te=this.circles;for(const ae of J)if(!P.circle[ae]){P.circle[ae]=!0;const ue=3*ae,he=this.circleKeys[ae];if(this._circleAndRectCollide(te[ue],te[ue+1],te[ue+2],r,a,d,p)&&(!k||k(he))&&(!R||!xi(D,he.overlapMode))){const me=te[ue],ie=te[ue+1],xe=te[ue+2];if(w.push({key:he,x1:me-xe,y1:ie-xe,x2:me+xe,y2:ie+xe}),R)return!0}}}return!1}_queryCellCircle(r,a,d,p,y,w,C,k){const{circle:P,seenUids:R,overlapMode:D}=C,U=this.boxCells[y];if(U!==null){const te=this.bboxes;for(const ae of U)if(!R.box[ae]){R.box[ae]=!0;const ue=4*ae,he=this.boxKeys[ae];if(this._circleAndRectCollide(P.x,P.y,P.radius,te[ue+0],te[ue+1],te[ue+2],te[ue+3])&&(!k||k(he))&&!xi(D,he.overlapMode))return w.push(!0),!0}}const J=this.circleCells[y];if(J!==null){const te=this.circles;for(const ae of J)if(!R.circle[ae]){R.circle[ae]=!0;const ue=3*ae,he=this.circleKeys[ae];if(this._circlesCollide(te[ue],te[ue+1],te[ue+2],P.x,P.y,P.radius)&&(!k||k(he))&&!xi(D,he.overlapMode))return w.push(!0),!0}}}_forEachCell(r,a,d,p,y,w,C,k){const P=this._convertToXCellCoord(r),R=this._convertToYCellCoord(a),D=this._convertToXCellCoord(d),U=this._convertToYCellCoord(p);for(let J=P;J<=D;J++)for(let te=R;te<=U;te++)if(y.call(this,r,a,d,p,this.xCellCount*te+J,w,C,k))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,a,d,p,y,w){const C=p-r,k=y-a,P=d+w;return P*P>C*C+k*k}_circleAndRectCollide(r,a,d,p,y,w,C){const k=(w-p)/2,P=Math.abs(r-(p+k));if(P>k+d)return!1;const R=(C-y)/2,D=Math.abs(a-(y+R));if(D>R+d)return!1;if(P<=k||D<=R)return!0;const U=P-k,J=D-R;return U*U+J*J<=d*d}}function Tt(_,r,a,d,p){const y=u.H();return r?(u.K(y,y,[1/p,1/p,1]),a||u.ad(y,y,d.angle)):u.L(y,d.labelPlaneMatrix,_),y}function ur(_,r,a,d,p){if(r){const y=u.ae(_);return u.K(y,y,[p,p,1]),a||u.ad(y,y,-d.angle),y}return d.glCoordMatrix}function ne(_,r,a,d){let p;d?(p=[_,r,d(_,r),1],u.af(p,p,a)):(p=[_,r,0,1],dr(p,p,a));const y=p[3];return{point:new u.P(p[0]/y,p[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function O(_,r){return .5+_/r*.5}function $(_,r){return _.x>=-r[0]&&_.x<=r[0]&&_.y>=-r[1]&&_.y<=r[1]}function Y(_,r,a,d,p,y,w,C,k,P,R,D,U,J,te){const ae=d?_.textSizeData:_.iconSizeData,ue=u.ag(ae,a.transform.zoom),he=[256/a.width*2+1,256/a.height*2+1],me=d?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;me.clear();const ie=_.lineVertexArray,xe=d?_.text.placedSymbolArray:_.icon.placedSymbolArray,Se=a.transform.width/a.transform.height;let Pe=!1;for(let Ve=0;Ve<xe.length;Ve++){const Ye=xe.get(Ve);if(Ye.hidden||Ye.writingMode===u.ah.vertical&&!Pe){It(Ye.numGlyphs,me);continue}Pe=!1;const it=ne(Ye.anchorX,Ye.anchorY,r,te);if(!$(it.point,he)){It(Ye.numGlyphs,me);continue}const ut=O(a.transform.cameraToCenterDistance,it.signedDistanceFromCamera),tt=u.ai(ae,ue,Ye),et=w?tt/ut:tt*ut,mt={getElevation:te,labelPlaneMatrix:p,lineVertexArray:ie,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:P,tileAnchorPoint:new u.P(Ye.anchorX,Ye.anchorY),unwrappedTileID:R,width:D,height:U,translation:J},Ot=we(mt,Ye,et,!1,C,r,y,_.glyphOffsetArray,me,Se,k);Pe=Ot.useVertical,(Ot.notEnoughRoom||Pe||Ot.needsFlipping&&we(mt,Ye,et,!0,C,r,y,_.glyphOffsetArray,me,Se,k).notEnoughRoom)&&It(Ye.numGlyphs,me)}d?_.text.dynamicLayoutVertexBuffer.updateData(me):_.icon.dynamicLayoutVertexBuffer.updateData(me)}function se(_,r,a,d,p,y,w,C){const k=y.glyphStartIndex+y.numGlyphs,P=y.lineStartIndex,R=y.lineStartIndex+y.lineLength,D=r.getoffsetX(y.glyphStartIndex),U=r.getoffsetX(k-1),J=Qe(_*D,a,d,p,y.segment,P,R,C,w);if(!J)return null;const te=Qe(_*U,a,d,p,y.segment,P,R,C,w);return te?C.projectionCache.anyProjectionOccluded?null:{first:J,last:te}:null}function ve(_,r,a,d){return _===u.ah.horizontal&&Math.abs(a.y-r.y)>Math.abs(a.x-r.x)*d?{useVertical:!0}:(_===u.ah.vertical?r.y<a.y:r.x>a.x)?{needsFlipping:!0}:null}function we(_,r,a,d,p,y,w,C,k,P,R){const D=a/24,U=r.lineOffsetX*D,J=r.lineOffsetY*D;let te;if(r.numGlyphs>1){const ae=r.glyphStartIndex+r.numGlyphs,ue=r.lineStartIndex,he=r.lineStartIndex+r.lineLength,me=se(D,C,U,J,d,r,R,_);if(!me)return{notEnoughRoom:!0};const ie=ne(me.first.point.x,me.first.point.y,w,_.getElevation).point,xe=ne(me.last.point.x,me.last.point.y,w,_.getElevation).point;if(p&&!d){const Se=ve(r.writingMode,ie,xe,P);if(Se)return Se}te=[me.first];for(let Se=r.glyphStartIndex+1;Se<ae-1;Se++)te.push(Qe(D*C.getoffsetX(Se),U,J,d,r.segment,ue,he,_,R));te.push(me.last)}else{if(p&&!d){const ue=ne(_.tileAnchorPoint.x,_.tileAnchorPoint.y,y,_.getElevation).point,he=r.lineStartIndex+r.segment+1,me=new u.P(_.lineVertexArray.getx(he),_.lineVertexArray.gety(he)),ie=ne(me.x,me.y,y,_.getElevation),xe=ie.signedDistanceFromCamera>0?ie.point:function(Pe,Ve,Ye,it,ut,tt){return ke(Pe,Ve,Ye,1,ut,tt)}(_.tileAnchorPoint,me,ue,0,y,_),Se=ve(r.writingMode,ue,xe,P);if(Se)return Se}const ae=Qe(D*C.getoffsetX(r.glyphStartIndex),U,J,d,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,_,R);if(!ae||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};te=[ae]}for(const ae of te)u.aj(k,ae.point,ae.angle);return{}}function ke(_,r,a,d,p,y){const w=_.add(_.sub(r)._unit()),C=p!==void 0?ne(w.x,w.y,p,y.getElevation).point:Oe(w.x,w.y,y).point,k=a.sub(C);return a.add(k._mult(d/k.mag()))}function fe(_,r,a){const d=r.projectionCache;if(d.projections[_])return d.projections[_];const p=new u.P(r.lineVertexArray.getx(_),r.lineVertexArray.gety(_)),y=Oe(p.x,p.y,r);if(y.signedDistanceFromCamera>0)return d.projections[_]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;const w=_-a.direction;return function(C,k,P,R,D){return ke(C,k,P,R,void 0,D)}(a.distanceFromAnchor===0?r.tileAnchorPoint:new u.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),p,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,r)}function Oe(_,r,a){const d=_+a.translation[0],p=r+a.translation[1];let y;return!a.pitchWithMap&&a.projection.useSpecialProjectionForSymbols?(y=a.projection.projectTileCoordinates(d,p,a.unwrappedTileID,a.getElevation),y.point.x=(.5*y.point.x+.5)*a.width,y.point.y=(.5*-y.point.y+.5)*a.height):(y=ne(d,p,a.labelPlaneMatrix,a.getElevation),y.isOccluded=!1),y}function Ue(_,r,a){return _._unit()._perp()._mult(r*a)}function Be(_,r,a,d,p,y,w,C,k){if(C.projectionCache.offsets[_])return C.projectionCache.offsets[_];const P=a.add(r);if(_+k.direction<d||_+k.direction>=p)return C.projectionCache.offsets[_]=P,P;const R=fe(_+k.direction,C,k),D=Ue(R.sub(a),w,k.direction),U=a.add(D),J=R.add(D);return C.projectionCache.offsets[_]=u.ak(y,P,U,J)||P,C.projectionCache.offsets[_]}function Qe(_,r,a,d,p,y,w,C,k){const P=d?_-r:_+r;let R=P>0?1:-1,D=0;d&&(R*=-1,D=Math.PI),R<0&&(D+=Math.PI);let U,J=R>0?y+p:y+p+1;C.projectionCache.cachedAnchorPoint?U=C.projectionCache.cachedAnchorPoint:(U=Oe(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=U);let te,ae,ue=U,he=U,me=0,ie=0;const xe=Math.abs(P),Se=[];let Pe;for(;me+ie<=xe;){if(J+=R,J<y||J>=w)return null;me+=ie,he=ue,ae=te;const it={absOffsetX:xe,direction:R,distanceFromAnchor:me,previousVertex:he};if(ue=fe(J,C,it),a===0)Se.push(he),Pe=ue.sub(he);else{let ut;const tt=ue.sub(he);ut=tt.mag()===0?Ue(fe(J+R,C,it).sub(ue),a,R):Ue(tt,a,R),ae||(ae=he.add(ut)),te=Be(J,ut,ue,y,w,ae,a,C,it),Se.push(ae),Pe=te.sub(ae)}ie=Pe.mag()}const Ve=Pe._mult((xe-me)/ie)._add(ae||he),Ye=D+Math.atan2(ue.y-he.y,ue.x-he.x);return Se.push(Ve),{point:Ve,angle:k?Ye:0,path:Se}}const wt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function It(_,r){for(let a=0;a<_;a++){const d=r.length;r.resize(d+4),r.float32.set(wt,3*d)}}function dr(_,r,a){const d=r[0],p=r[1];return _[0]=a[0]*d+a[4]*p+a[12],_[1]=a[1]*d+a[5]*p+a[13],_[3]=a[3]*d+a[7]*p+a[15],_}const jt=100;class hr{constructor(r,a,d=new Di(r.width+200,r.height+200,25),p=new Di(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=a,this.grid=d,this.ignoredGrid=p,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+jt,this.screenBottomBoundary=r.height+jt,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,a,d,p,y,w,C,k,P,R,D){const U=r.anchorPointX+k[0],J=r.anchorPointY+k[1],te=this.projectAndGetPerspectiveRatio(p,U,J,y,R),ae=d*te.perspectiveRatio;let ue;if(w||C)ue=this._projectCollisionBox(r,ae,p,y,w,C,k,te,R,D);else{const Se=te.point.x+(D?D.x*ae:0),Pe=te.point.y+(D?D.y*ae:0);ue={allPointsOccluded:!1,box:[Se+r.x1*ae,Pe+r.y1*ae,Se+r.x2*ae,Pe+r.y2*ae]}}const[he,me,ie,xe]=ue.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?ue.allPointsOccluded:this.mapProjection.isOccluded(U,J,y))||te.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(he,me,ie,xe)||a!=="always"&&this.grid.hitTest(he,me,ie,xe,a,P)?{box:[he,me,ie,xe],placeable:!1,offscreen:!1}:{box:[he,me,ie,xe],placeable:!0,offscreen:this.isOffscreen(he,me,ie,xe)}}placeCollisionCircles(r,a,d,p,y,w,C,k,P,R,D,U,J,te,ae,ue){const he=[],me=new u.P(a.anchorX,a.anchorY),ie=this.getPerspectiveRatio(w,me.x,me.y,C,ue),xe=(D?y/ie:y*ie)/u.ap,Se={getElevation:ue,labelPlaneMatrix:k,lineVertexArray:d,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:me,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:ae},Pe=se(xe,p,a.lineOffsetX*xe,a.lineOffsetY*xe,!1,a,!1,Se);let Ve=!1,Ye=!1,it=!0;if(Pe){const ut=.5*J*ie+te,tt=new u.P(-100,-100),et=new u.P(this.screenRightBoundary,this.screenBottomBoundary),mt=new Ft,Ot=Pe.first,rt=Pe.last;let lt=[];for(let qt=Ot.path.length-1;qt>=1;qt--)lt.push(Ot.path[qt]);for(let qt=1;qt<rt.path.length;qt++)lt.push(rt.path[qt]);const Lt=2.5*ut;if(P){const qt=this.projectPathToScreenSpace(lt,Se,P);lt=qt.some(nr=>nr.signedDistanceFromCamera<=0)?[]:qt.map(nr=>nr.point)}let Vr=[];if(lt.length>0){const qt=lt[0].clone(),nr=lt[0].clone();for(let Ur=1;Ur<lt.length;Ur++)qt.x=Math.min(qt.x,lt[Ur].x),qt.y=Math.min(qt.y,lt[Ur].y),nr.x=Math.max(nr.x,lt[Ur].x),nr.y=Math.max(nr.y,lt[Ur].y);Vr=qt.x>=tt.x&&nr.x<=et.x&&qt.y>=tt.y&&nr.y<=et.y?[lt]:nr.x<tt.x||qt.x>et.x||nr.y<tt.y||qt.y>et.y?[]:u.al([lt],tt.x,tt.y,et.x,et.y)}for(const qt of Vr){mt.reset(qt,.25*ut);let nr=0;nr=mt.length<=.5*ut?1:Math.ceil(mt.paddedLength/Lt)+1;for(let Ur=0;Ur<nr;Ur++){const On=Ur/Math.max(nr-1,1),eo=mt.lerp(On),Wr=eo.x+jt,ci=eo.y+jt;he.push(Wr,ci,ut,0);const Yn=Wr-ut,$n=ci-ut,Jn=Wr+ut,xo=ci+ut;if(it=it&&this.isOffscreen(Yn,$n,Jn,xo),Ye=Ye||this.isInsideGrid(Yn,$n,Jn,xo),r!=="always"&&this.grid.hitTestCircle(Wr,ci,ut,r,U)&&(Ve=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ve}}}}return{circles:!R&&Ve||!Ye||ie<this.perspectiveRatioCutoff?[]:he,offscreen:it,collisionDetected:Ve}}projectPathToScreenSpace(r,a,d){return r.map(p=>ne(p.x,p.y,d,a.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let d=1/0,p=1/0,y=-1/0,w=-1/0;for(const R of r){const D=new u.P(R.x+jt,R.y+jt);d=Math.min(d,D.x),p=Math.min(p,D.y),y=Math.max(y,D.x),w=Math.max(w,D.y),a.push(D)}const C=this.grid.query(d,p,y,w).concat(this.ignoredGrid.query(d,p,y,w)),k={},P={};for(const R of C){const D=R.key;if(k[D.bucketInstanceId]===void 0&&(k[D.bucketInstanceId]={}),k[D.bucketInstanceId][D.featureIndex])continue;const U=[new u.P(R.x1,R.y1),new u.P(R.x2,R.y1),new u.P(R.x2,R.y2),new u.P(R.x1,R.y2)];u.am(a,U)&&(k[D.bucketInstanceId][D.featureIndex]=!0,P[D.bucketInstanceId]===void 0&&(P[D.bucketInstanceId]=[]),P[D.bucketInstanceId].push(D.featureIndex))}return P}insertCollisionBox(r,a,d,p,y,w){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:y,collisionGroupID:w,overlapMode:a},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,a,d,p,y,w){const C=d?this.ignoredGrid:this.grid,k={bucketInstanceId:p,featureIndex:y,collisionGroupID:w,overlapMode:a};for(let P=0;P<r.length;P+=4)C.insertCircle(k,r[P],r[P+1],r[P+2])}projectAndGetPerspectiveRatio(r,a,d,p,y){let w;y?(w=[a,d,y(a,d),1],u.af(w,w,r)):(w=[a,d,0,1],dr(w,w,r));const C=w[3];return{point:new u.P((w[0]/C+1)/2*this.transform.width+jt,(-w[1]/C+1)/2*this.transform.height+jt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C*.5,isOccluded:!1,signedDistanceFromCamera:C}}getPerspectiveRatio(r,a,d,p,y){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,d,p,y):ne(a,d,r,y);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(r,a,d,p){return d<jt||r>=this.screenRightBoundary||p<jt||a>this.screenBottomBoundary}isInsideGrid(r,a,d,p){return d>=0&&r<this.gridRightBoundary&&p>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,a,d,p,y,w,C,k,P,R){let D=new u.P(1,0),U=new u.P(0,1);const J=new u.P(r.anchorPointX+C[0],r.anchorPointY+C[1]);if(w&&!y){const it=this.projectAndGetPerspectiveRatio(d,J.x+1,J.y,p,P).point.sub(k.point).unit(),ut=Math.atan(it.y/it.x)+(it.x<0?Math.PI:0),tt=Math.sin(ut),et=Math.cos(ut);D=new u.P(et,tt),U=new u.P(-tt,et)}else if(!w&&y){const it=-this.transform.angle,ut=Math.sin(it),tt=Math.cos(it);D=new u.P(tt,ut),U=new u.P(-ut,tt)}let te=k.point,ae=a;if(y){te=J;const it=this.transform.zoom-Math.floor(this.transform.zoom);ae=Math.pow(2,-it),ae*=this.mapProjection.getPitchedTextCorrection(this.transform,J,p),R||(ae*=u.ac(.5+k.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}R&&(te=te.add(D.mult(R.x*ae)).add(U.mult(R.y*ae)));const ue=r.x1*ae,he=r.x2*ae,me=(ue+he)/2,ie=r.y1*ae,xe=r.y2*ae,Se=(ie+xe)/2,Pe=[{offsetX:ue,offsetY:ie},{offsetX:me,offsetY:ie},{offsetX:he,offsetY:ie},{offsetX:he,offsetY:Se},{offsetX:he,offsetY:xe},{offsetX:me,offsetY:xe},{offsetX:ue,offsetY:xe},{offsetX:ue,offsetY:Se}];let Ve=[];for(const{offsetX:it,offsetY:ut}of Pe)Ve.push(new u.P(te.x+D.x*it+U.x*ut,te.y+D.y*it+U.y*ut));let Ye=!1;if(y){const it=Ve.map(ut=>this.projectAndGetPerspectiveRatio(d,ut.x,ut.y,p,P));Ye=it.some(ut=>!ut.isOccluded),Ve=it.map(ut=>ut.point)}else Ye=!0;return{box:u.ao(Ve),allPointsOccluded:!Ye}}}function rr(_,r,a){return r*(u.X/(_.tileSize*Math.pow(2,a-_.tileID.overscaledZ)))}class hn{constructor(r,a,d,p){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?a:-a))):p&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Xr{constructor(r,a,d,p,y){this.text=new hn(r?r.text:null,a,d,y),this.icon=new hn(r?r.icon:null,a,p,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Yt{constructor(r,a,d){this.text=r,this.icon=a,this.skipFade=d}}class Sr{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class Hr{constructor(r,a,d,p,y){this.bucketInstanceId=r,this.featureIndex=a,this.sourceLayerIndex=d,this.bucketIndex=p,this.tileID=y}}class wn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const a=++this.maxGroupID;this.collisionGroups[r]={ID:a,predicate:d=>d.collisionGroupID===a}}return this.collisionGroups[r]}}function Mn(_,r,a,d,p){const{horizontalAlign:y,verticalAlign:w}=u.au(_);return new u.P(-(y-.5)*r+d[0]*p,-(w-.5)*a+d[1]*p)}class Kn{constructor(r,a,d,p,y,w){this.transform=r.clone(),this.terrain=d,this.collisionIndex=new hr(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new wn(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const a=this.terrain;return a?(d,p)=>a.getElevation(r,d,p):null}getBucketParts(r,a,d,p){const y=d.getBucket(a),w=d.latestFeatureIndex;if(!y||!w||a.id!==y.layerIds[0])return;const C=d.collisionBoxArray,k=y.layers[0].layout,P=y.layers[0].paint,R=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),D=d.tileSize/u.X,U=d.tileID.toUnwrapped(),J=this.transform.calculatePosMatrix(U),te=k.get("text-pitch-alignment")==="map",ae=k.get("text-rotation-alignment")==="map",ue=rr(d,1,this.transform.zoom),he=this.collisionIndex.mapProjection.translatePosition(this.transform,d,P.get("text-translate"),P.get("text-translate-anchor")),me=this.collisionIndex.mapProjection.translatePosition(this.transform,d,P.get("icon-translate"),P.get("icon-translate-anchor")),ie=Tt(J,te,ae,this.transform,ue);let xe=null;if(te){const Pe=ur(J,te,ae,this.transform,ue);xe=u.L([],this.transform.labelPlaneMatrix,Pe)}this.retainedQueryData[y.bucketInstanceId]=new Hr(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,d.tileID);const Se={bucket:y,layout:k,translationText:he,translationIcon:me,posMatrix:J,unwrappedTileID:U,textLabelPlaneMatrix:ie,labelToScreenMatrix:xe,scale:R,textPixelRatio:D,holdingForFade:d.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:u.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(p)for(const Pe of y.sortKeyRanges){const{sortKey:Ve,symbolInstanceStart:Ye,symbolInstanceEnd:it}=Pe;r.push({sortKey:Ve,symbolInstanceStart:Ye,symbolInstanceEnd:it,parameters:Se})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(r,a,d,p,y,w,C,k,P,R,D,U,J,te,ae,ue,he,me,ie){const xe=u.aq[r.textAnchor],Se=[r.textOffset0,r.textOffset1],Pe=Mn(xe,d,p,Se,y),Ve=this.collisionIndex.placeCollisionBox(a,U,k,P,R,C,w,ue,D.predicate,ie,Pe);if((!me||this.collisionIndex.placeCollisionBox(me,U,k,P,R,C,w,he,D.predicate,ie,Pe).placeable)&&Ve.placeable){let Ye;if(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(Ye=this.prevPlacement.variableOffsets[J.crossTileID].anchor),J.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[J.crossTileID]={textOffset:Se,width:d,height:p,anchor:xe,textBoxScale:y,prevAnchor:Ye},this.markUsedJustification(te,xe,J,ae),te.allowVerticalPlacement&&(this.markUsedOrientation(te,ae,J),this.placedOrientations[J.crossTileID]=ae),{shift:Pe,placedGlyphBoxes:Ve}}}placeLayerBucketPart(r,a,d){const{bucket:p,layout:y,translationText:w,translationIcon:C,posMatrix:k,unwrappedTileID:P,textLabelPlaneMatrix:R,labelToScreenMatrix:D,textPixelRatio:U,holdingForFade:J,collisionBoxArray:te,partiallyEvaluatedTextSize:ae,collisionGroup:ue}=r.parameters,he=y.get("text-optional"),me=y.get("icon-optional"),ie=u.ar(y,"text-overlap","text-allow-overlap"),xe=ie==="always",Se=u.ar(y,"icon-overlap","icon-allow-overlap"),Pe=Se==="always",Ve=y.get("text-rotation-alignment")==="map",Ye=y.get("text-pitch-alignment")==="map",it=y.get("icon-text-fit")!=="none",ut=y.get("symbol-z-order")==="viewport-y",tt=xe&&(Pe||!p.hasIconData()||me),et=Pe&&(xe||!p.hasTextData()||he);!p.collisionArrays&&te&&p.deserializeCollisionBoxes(te);const mt=this._getTerrainElevationFunc(this.retainedQueryData[p.bucketInstanceId].tileID),Ot=(rt,lt,Lt)=>{var Vr,qt;if(a[rt.crossTileID])return;if(J)return void(this.placements[rt.crossTileID]=new Yt(!1,!1,!1));let nr=!1,Ur=!1,On=!0,eo=null,Wr={box:null,placeable:!1,offscreen:null},ci={placeable:!1},Yn=null,$n=null,Jn=null,xo=0,va=0,zc=0;lt.textFeatureIndex?xo=lt.textFeatureIndex:rt.useRuntimeCollisionCircles&&(xo=rt.featureIndex),lt.verticalTextFeatureIndex&&(va=lt.verticalTextFeatureIndex);const xa=lt.textBox;if(xa){const Ni=An=>{let Nn=u.ah.horizontal;if(p.allowVerticalPlacement&&!An&&this.prevPlacement){const Ti=this.prevPlacement.placedOrientations[rt.crossTileID];Ti&&(this.placedOrientations[rt.crossTileID]=Ti,Nn=Ti,this.markUsedOrientation(p,Nn,rt))}return Nn},ji=(An,Nn)=>{if(p.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&lt.verticalTextBox){for(const Ti of p.writingModes)if(Ti===u.ah.vertical?(Wr=Nn(),ci=Wr):Wr=An(),Wr&&Wr.placeable)break}else Wr=An()},ts=rt.textAnchorOffsetStartIndex,to=rt.textAnchorOffsetEndIndex;if(to===ts){const An=(Nn,Ti)=>{const sr=this.collisionIndex.placeCollisionBox(Nn,ie,U,k,P,Ye,Ve,w,ue.predicate,mt);return sr&&sr.placeable&&(this.markUsedOrientation(p,Ti,rt),this.placedOrientations[rt.crossTileID]=Ti),sr};ji(()=>An(xa,u.ah.horizontal),()=>{const Nn=lt.verticalTextBox;return p.allowVerticalPlacement&&rt.numVerticalGlyphVertices>0&&Nn?An(Nn,u.ah.vertical):{box:null,offscreen:null}}),Ni(Wr&&Wr.placeable)}else{let An=u.aq[(qt=(Vr=this.prevPlacement)===null||Vr===void 0?void 0:Vr.variableOffsets[rt.crossTileID])===null||qt===void 0?void 0:qt.anchor];const Nn=(sr,Rs,ba)=>{const wa=sr.x2-sr.x1,tf=sr.y2-sr.y1,xy=rt.textBoxScale,rf=it&&Se==="never"?Rs:null;let rs=null,nf=ie==="never"?1:2,Dc="never";An&&nf++;for(let wl=0;wl<nf;wl++){for(let Lc=ts;Lc<to;Lc++){const Bc=p.textAnchorOffsets.get(Lc);if(An&&Bc.textAnchor!==An)continue;const Sa=this.attemptAnchorPlacement(Bc,sr,wa,tf,xy,Ve,Ye,U,k,P,ue,Dc,rt,p,ba,w,C,rf,mt);if(Sa&&(rs=Sa.placedGlyphBoxes,rs&&rs.placeable))return nr=!0,eo=Sa.shift,rs}An?An=null:Dc=ie}return d&&!rs&&(rs={box:this.collisionIndex.placeCollisionBox(xa,"always",U,k,P,Ye,Ve,w,ue.predicate,mt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),rs};ji(()=>Nn(xa,lt.iconBox,u.ah.horizontal),()=>{const sr=lt.verticalTextBox;return p.allowVerticalPlacement&&(!Wr||!Wr.placeable)&&rt.numVerticalGlyphVertices>0&&sr?Nn(sr,lt.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Wr&&(nr=Wr.placeable,On=Wr.offscreen);const Ti=Ni(Wr&&Wr.placeable);if(!nr&&this.prevPlacement){const sr=this.prevPlacement.variableOffsets[rt.crossTileID];sr&&(this.variableOffsets[rt.crossTileID]=sr,this.markUsedJustification(p,sr.anchor,rt,Ti))}}}if(Yn=Wr,nr=Yn&&Yn.placeable,On=Yn&&Yn.offscreen,rt.useRuntimeCollisionCircles){const Ni=p.text.placedSymbolArray.get(rt.centerJustifiedTextSymbolIndex),ji=u.ai(p.textSizeData,ae,Ni),ts=y.get("text-padding");$n=this.collisionIndex.placeCollisionCircles(ie,Ni,p.lineVertexArray,p.glyphOffsetArray,ji,k,P,R,D,d,Ye,ue.predicate,rt.collisionCircleDiameter,ts,w,mt),$n.circles.length&&$n.collisionDetected&&!d&&u.w("Collisions detected, but collision boxes are not shown"),nr=xe||$n.circles.length>0&&!$n.collisionDetected,On=On&&$n.offscreen}if(lt.iconFeatureIndex&&(zc=lt.iconFeatureIndex),lt.iconBox){const Ni=ji=>this.collisionIndex.placeCollisionBox(ji,Se,U,k,P,Ye,Ve,C,ue.predicate,mt,it&&eo?eo:void 0);ci&&ci.placeable&&lt.verticalIconBox?(Jn=Ni(lt.verticalIconBox),Ur=Jn.placeable):(Jn=Ni(lt.iconBox),Ur=Jn.placeable),On=On&&Jn.offscreen}const $i=he||rt.numHorizontalGlyphVertices===0&&rt.numVerticalGlyphVertices===0,Rc=me||rt.numIconVertices===0;$i||Rc?Rc?$i||(Ur=Ur&&nr):nr=Ur&&nr:Ur=nr=Ur&&nr;const Od=Ur&&Jn.placeable;if(nr&&Yn.placeable&&this.collisionIndex.insertCollisionBox(Yn.box,ie,y.get("text-ignore-placement"),p.bucketInstanceId,ci&&ci.placeable&&va?va:xo,ue.ID),Od&&this.collisionIndex.insertCollisionBox(Jn.box,Se,y.get("icon-ignore-placement"),p.bucketInstanceId,zc,ue.ID),$n&&nr&&this.collisionIndex.insertCollisionCircles($n.circles,ie,y.get("text-ignore-placement"),p.bucketInstanceId,xo,ue.ID),d&&this.storeCollisionData(p.bucketInstanceId,Lt,lt,Yn,Jn,$n),rt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rt.crossTileID]=new Yt(nr||tt,Ur||et,On||p.justReloaded),a[rt.crossTileID]=!0};if(ut){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rt=p.getSortedSymbolIndexes(this.transform.angle);for(let lt=rt.length-1;lt>=0;--lt){const Lt=rt[lt];Ot(p.symbolInstances.get(Lt),p.collisionArrays[Lt],Lt)}}else for(let rt=r.symbolInstanceStart;rt<r.symbolInstanceEnd;rt++)Ot(p.symbolInstances.get(rt),p.collisionArrays[rt],rt);if(d&&p.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[p.bucketInstanceId];u.as(rt.invProjMatrix,k),rt.viewportMatrix=this.collisionIndex.getViewportMatrix()}p.justReloaded=!1}storeCollisionData(r,a,d,p,y,w){if(d.textBox||d.iconBox){let C,k;this.collisionBoxArrays.has(r)?C=this.collisionBoxArrays.get(r):(C=new Map,this.collisionBoxArrays.set(r,C)),C.has(a)?k=C.get(a):(k={text:null,icon:null},C.set(a,k)),d.textBox&&(k.text=p.box),d.iconBox&&(k.icon=y.box)}if(w){let C=this.collisionCircleArrays[r];C===void 0&&(C=this.collisionCircleArrays[r]=new Sr);for(let k=0;k<w.circles.length;k+=4)C.circles.push(w.circles[k+0]),C.circles.push(w.circles[k+1]),C.circles.push(w.circles[k+2]),C.circles.push(w.collisionDetected?1:0)}}markUsedJustification(r,a,d,p){let y;y=p===u.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[u.at(a)];const w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const C of w)C>=0&&(r.text.placedSymbolArray.get(C).crossTileID=y>=0&&C!==y?0:d.crossTileID)}markUsedOrientation(r,a,d){const p=a===u.ah.horizontal||a===u.ah.horizontalOnly?a:0,y=a===u.ah.vertical?a:0,w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const C of w)r.text.placedSymbolArray.get(C).placedOrientation=p;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let d=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const p=a?a.symbolFadeChange(r):1,y=a?a.opacities:{},w=a?a.variableOffsets:{},C=a?a.placedOrientations:{};for(const k in this.placements){const P=this.placements[k],R=y[k];R?(this.opacities[k]=new Xr(R,p,P.text,P.icon),d=d||P.text!==R.text.placed||P.icon!==R.icon.placed):(this.opacities[k]=new Xr(null,p,P.text,P.icon,P.skipFade),d=d||P.text||P.icon)}for(const k in y){const P=y[k];if(!this.opacities[k]){const R=new Xr(P,p,!1,!1);R.isHidden()||(this.opacities[k]=R,d=d||P.text.placed||P.icon.placed)}}for(const k in w)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=w[k]);for(const k in C)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=C[k]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:r)}updateLayerOpacities(r,a){const d={};for(const p of a){const y=p.getBucket(r);y&&p.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,p.tileID,d,p.collisionBoxArray)}}updateBucketOpacities(r,a,d,p){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],w=y.layout,C=new Xr(null,0,!1,!1,!0),k=w.get("text-allow-overlap"),P=w.get("icon-allow-overlap"),R=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),D=w.get("text-rotation-alignment")==="map",U=w.get("text-pitch-alignment")==="map",J=w.get("icon-text-fit")!=="none",te=new Xr(null,0,k&&(P||!r.hasIconData()||w.get("icon-optional")),P&&(k||!r.hasTextData()||w.get("text-optional")),!0);!r.collisionArrays&&p&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(p);const ae=(he,me,ie)=>{for(let xe=0;xe<me/4;xe++)he.opacityVertexArray.emplaceBack(ie);he.hasVisibleVertices=he.hasVisibleVertices||ie!==Qs},ue=this.collisionBoxArrays.get(r.bucketInstanceId);for(let he=0;he<r.symbolInstances.length;he++){const me=r.symbolInstances.get(he),{numHorizontalGlyphVertices:ie,numVerticalGlyphVertices:xe,crossTileID:Se}=me;let Pe=this.opacities[Se];d[Se]?Pe=C:Pe||(Pe=te,this.opacities[Se]=Pe),d[Se]=!0;const Ve=me.numIconVertices>0,Ye=this.placedOrientations[me.crossTileID],it=Ye===u.ah.vertical,ut=Ye===u.ah.horizontal||Ye===u.ah.horizontalOnly;if(ie>0||xe>0){const et=Si(Pe.text);ae(r.text,ie,it?Qs:et),ae(r.text,xe,ut?Qs:et);const mt=Pe.text.isHidden();[me.rightJustifiedTextSymbolIndex,me.centerJustifiedTextSymbolIndex,me.leftJustifiedTextSymbolIndex].forEach(lt=>{lt>=0&&(r.text.placedSymbolArray.get(lt).hidden=mt||it?1:0)}),me.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(me.verticalPlacedTextSymbolIndex).hidden=mt||ut?1:0);const Ot=this.variableOffsets[me.crossTileID];Ot&&this.markUsedJustification(r,Ot.anchor,me,Ye);const rt=this.placedOrientations[me.crossTileID];rt&&(this.markUsedJustification(r,"left",me,rt),this.markUsedOrientation(r,rt,me))}if(Ve){const et=Si(Pe.icon),mt=!(J&&me.verticalPlacedIconSymbolIndex&&it);me.placedIconSymbolIndex>=0&&(ae(r.icon,me.numIconVertices,mt?et:Qs),r.icon.placedSymbolArray.get(me.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),me.verticalPlacedIconSymbolIndex>=0&&(ae(r.icon,me.numVerticalIconVertices,mt?Qs:et),r.icon.placedSymbolArray.get(me.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}const tt=ue&&ue.has(he)?ue.get(he):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const et=r.collisionArrays[he];if(et){let mt=new u.P(0,0);if(et.textBox||et.verticalTextBox){let Ot=!0;if(R){const rt=this.variableOffsets[Se];rt?(mt=Mn(rt.anchor,rt.width,rt.height,rt.textOffset,rt.textBoxScale),D&&mt._rotate(U?this.transform.angle:-this.transform.angle)):Ot=!1}if(et.textBox||et.verticalTextBox){let rt;et.textBox&&(rt=it),et.verticalTextBox&&(rt=ut),Js(r.textCollisionBox.collisionVertexArray,Pe.text.placed,!Ot||rt,tt.text,mt.x,mt.y)}}if(et.iconBox||et.verticalIconBox){const Ot=!!(!ut&&et.verticalIconBox);let rt;et.iconBox&&(rt=Ot),et.verticalIconBox&&(rt=!Ot),Js(r.iconCollisionBox.collisionVertexArray,Pe.icon.placed,rt,tt.icon,J?mt.x:0,J?mt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const he=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=he.invProjMatrix,r.placementViewportMatrix=he.viewportMatrix,r.collisionCircleArray=he.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,a){const d=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function Js(_,r,a,d,p,y){d&&d.length!==0||(d=[0,0,0,0]);const w=d[0]-jt,C=d[1]-jt,k=d[2]-jt,P=d[3]-jt;_.emplaceBack(r?1:0,a?1:0,p||0,y||0,w,C),_.emplaceBack(r?1:0,a?1:0,p||0,y||0,k,C),_.emplaceBack(r?1:0,a?1:0,p||0,y||0,k,P),_.emplaceBack(r?1:0,a?1:0,p||0,y||0,w,P)}const Cr=Math.pow(2,25),Xu=Math.pow(2,24),Ku=Math.pow(2,17),bi=Math.pow(2,16),wi=Math.pow(2,9),Zg=Math.pow(2,8),Li=Math.pow(2,1);function Si(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const r=_.placed?1:0,a=Math.floor(127*_.opacity);return a*Cr+r*Xu+a*Ku+r*bi+a*wi+r*Zg+a*Li+r}const Qs=0;function bs(){return{isOccluded:(_,r,a)=>!1,getPitchedTextCorrection:(_,r,a)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,r,a,d){throw new Error("Not implemented.")},translatePosition:(_,r,a,d)=>function(p,y,w,C,k=!1){if(!w[0]&&!w[1])return[0,0];const P=k?C==="map"?p.angle:0:C==="viewport"?-p.angle:0;if(P){const R=Math.sin(P),D=Math.cos(P);w=[w[0]*D-w[1]*R,w[0]*R+w[1]*D]}return[k?w[0]:rr(y,w[0],p.zoom),k?w[1]:rr(y,w[1],p.zoom)]}(_,r,a,d),getCircleRadiusCorrection:_=>1}}class pn{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,a,d,p,y){const w=this._bucketParts;for(;this._currentTileIndex<r.length;)if(a.getBucketParts(w,p,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((C,k)=>C.sortKey-k.sortKey));this._currentPartIndex<w.length;)if(a.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class nl{constructor(r,a,d,p,y,w,C,k){this.placement=new Kn(r,bs(),a,w,C,k),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(r,a,d){const p=L.now(),y=()=>!this._forceFullPlacement&&L.now()-p>2;for(;this._currentPlacementIndex>=0;){const w=a[r[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=C)&&(!w.maxzoom||w.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new pn(w)),this._inProgressLayer.continuePlacement(d[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Xi=512/u.X/2;class on{constructor(r,a,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const p=new Map;for(let y=0;y<a.length;y++){const w=a.get(y),C=w.key,k=p.get(C);k?k.push(w):p.set(C,[w])}for(const[y,w]of p){const C={positions:w.map(k=>({x:Math.floor(k.anchorX*Xi),y:Math.floor(k.anchorY*Xi)})),crossTileIDs:w.map(k=>k.crossTileID)};if(C.positions.length>128){const k=new u.av(C.positions.length,16,Uint16Array);for(const{x:P,y:R}of C.positions)k.add(P,R);k.finish(),delete C.positions,C.index=k}this._symbolsByKey[y]=C}}getScaledCoordinates(r,a){const{x:d,y:p,z:y}=this.tileID.canonical,{x:w,y:C,z:k}=a.canonical,P=Xi/Math.pow(2,k-y),R=(C*u.X+r.anchorY)*P,D=p*u.X*Xi;return{x:Math.floor((w*u.X+r.anchorX)*P-d*u.X*Xi),y:Math.floor(R-D)}}findMatches(r,a,d){const p=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let y=0;y<r.length;y++){const w=r.get(y);if(w.crossTileID)continue;const C=this._symbolsByKey[w.key];if(!C)continue;const k=this.getScaledCoordinates(w,a);if(C.index){const P=C.index.range(k.x-p,k.y-p,k.x+p,k.y+p).sort();for(const R of P){const D=C.crossTileIDs[R];if(!d[D]){d[D]=!0,w.crossTileID=D;break}}}else if(C.positions)for(let P=0;P<C.positions.length;P++){const R=C.positions[P],D=C.crossTileIDs[P];if(Math.abs(R.x-k.x)<=p&&Math.abs(R.y-k.y)<=p&&!d[D]){d[D]=!0,w.crossTileID=D;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class tc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ki{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const a=Math.round((r-this.lng)/360);if(a!==0)for(const d in this.indexes){const p=this.indexes[d],y={};for(const w in p){const C=p[w];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+a),y[C.tileID.key]=C}this.indexes[d]=y}this.lng=r}addBucket(r,a,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<a.symbolInstances.length;y++)a.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const p=this.usedCrossTileIDs[r.overscaledZ];for(const y in this.indexes){const w=this.indexes[y];if(Number(y)>r.overscaledZ)for(const C in w){const k=w[C];k.tileID.isChildOf(r)&&k.findMatches(a.symbolInstances,r,p)}else{const C=w[r.scaledTo(Number(y)).key];C&&C.findMatches(a.symbolInstances,r,p)}}for(let y=0;y<a.symbolInstances.length;y++){const w=a.symbolInstances.get(y);w.crossTileID||(w.crossTileID=d.generate(),p[w.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new on(r,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(r,a){for(const d of a.getCrossTileIDsLists())for(const p of d)delete this.usedCrossTileIDs[r][p]}removeStaleBuckets(r){let a=!1;for(const d in this.indexes){const p=this.indexes[d];for(const y in p)r[p[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,p[y]),delete p[y],a=!0)}return a}}class Yu{constructor(){this.layerIndexes={},this.crossTileIDs=new tc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,a,d){let p=this.layerIndexes[r.id];p===void 0&&(p=this.layerIndexes[r.id]=new Ki);let y=!1;const w={};p.handleWrapJump(d);for(const C of a){const k=C.getBucket(r);k&&r.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(C.tileID,k,this.crossTileIDs)&&(y=!0),w[k.bucketInstanceId]=!0)}return p.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(r){const a={};r.forEach(d=>{a[d]=!0});for(const d in this.layerIndexes)a[d]||delete this.layerIndexes[d]}}const Yi=(_,r)=>u.t(_,r&&r.filter(a=>a.identifier!=="source.canvas")),Xg=u.aw();class rc extends u.E{constructor(r,a={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const p=this.sourceCaches[d].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new vt(Jt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,p)=>this.getGlyphs(d,p)),this.dispatcher.registerMessageHandler("GI",(d,p)=>this.getImages(d,p)),this.imageManager=new Me,this.imageManager.setEventedParent(this),this.glyphManager=new Ke(r._requestManager,a.localIdeographFontFamily),this.lineAtlas=new Ct(256,512),this.crossTileSymbolIndex=new Yu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),zt().on(Xe,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const p=this.sourceCaches[d.sourceId];if(!p)return;const y=p.getSource();if(y&&y.vectorLayerIds)for(const w in this._layers){const C=this._layers[w];C.source===y.id&&this._validateLayer(C)}})}loadURL(r,a={},d){this.fire(new u.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const p=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.h(p,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,a,d)}).catch(w=>{this._loadStyleRequest=null,w&&!y.signal.aborted&&this.fire(new u.j(w))})}loadJSON(r,a={},d){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,L.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(r,a,d)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Xg,{validate:!1})}_load(r,a,d){var p;const y=a.transformStyle?a.transformStyle(d,r):r;if(!a.validate||!Yi(this,u.u(y))){this._loaded=!0,this.stylesheet=y;for(const w in y.sources)this.addSource(w,y.sources[w],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new We(this.stylesheet.light),this.sky=new Ge(this.stylesheet.sky),this.map.setTerrain((p=this.stylesheet.terrain)!==null&&p!==void 0?p:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of r){const d=u.aA(a);d.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=d}}_loadSprite(r,a=!1,d=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,w,C,k){return u._(this,void 0,void 0,function*(){const P=Ae(y),R=C>1?"@2x":"",D={},U={};for(const{id:J,url:te}of P){const ae=w.transformRequest(Re(te,R,".json"),"SpriteJSON");D[J]=u.h(ae,k);const ue=w.transformRequest(Re(te,R,".png"),"SpriteImage");U[J]=V.getImage(ue,k)}return yield Promise.all([...Object.values(D),...Object.values(U)]),function(J,te){return u._(this,void 0,void 0,function*(){const ae={};for(const ue in J){ae[ue]={};const he=L.getImageCanvasContext((yield te[ue]).data),me=(yield J[ue]).data;for(const ie in me){const{width:xe,height:Se,x:Pe,y:Ve,sdf:Ye,pixelRatio:it,stretchX:ut,stretchY:tt,content:et,textFitWidth:mt,textFitHeight:Ot}=me[ie];ae[ue][ie]={data:null,pixelRatio:it,sdf:Ye,stretchX:ut,stretchY:tt,content:et,textFitWidth:mt,textFitHeight:Ot,spriteData:{width:xe,height:Se,x:Pe,y:Ve,context:he}}}}return ae})}(D,U)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const w in y){this._spritesImagesIds[w]=[];const C=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(k=>!(k in y)):[];for(const k of C)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in y[w]){const P=w==="default"?k:`${w}:${k}`;this._spritesImagesIds[w].push(P),P in this.imageManager.images?this.imageManager.updateImage(P,y[w][k],!1):this.imageManager.addImage(P,y[w][k]),a&&(this._changedImages[P]=!0)}}}).catch(y=>{this._spriteRequest=null,p=y,this.fire(new u.j(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),d&&d(p)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const a=this.sourceCaches[r.source];if(!a)return;const d=r.sourceLayer;if(!d)return;const p=a.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(d)===-1)&&this.fire(new u.j(new Error(`Source layer "${d}" does not exist on source "${p.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,a=!1){const d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(a?u.aB(d):d);const p=[];for(const y of r)if(d[y]){const w=a?u.aB(d[y]):d[y];p.push(w)}return p}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const a=Object.keys(this._layers);for(const d of a){const p=this._layers[d];p.type!=="custom"&&(r[d]=p.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const a=this._changed;if(a){const p=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(p.length||y.length)&&this._updateWorkerLayers(p,y);for(const w in this._updatedSources){const C=this._updatedSources[w];if(C==="reload")this._reloadSource(w);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const d={};for(const p in this.sourceCaches){const y=this.sourceCaches[p];d[p]=y.used,y.used=!1}for(const p of this._order){const y=this._layers[p];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const p in d){const y=this.sourceCaches[p];!!d[p]!=!!y.used&&y.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,a&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,a={}){var d;this._checkLoaded();const p=this.serialize();if(r=a.transformStyle?a.transformStyle(p,r):r,((d=a.validate)===null||d===void 0||d)&&Yi(this,u.u(r)))return!1;(r=u.aB(r)).layers=u.az(r.layers);const y=u.aC(p,r),w=this._getOperationsToPerform(y);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const C of w.operations)C();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const a=[],d=[];for(const p of r)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":a.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":a.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,p.args));break;case"setSky":a.push(()=>this.setSky.apply(this,p.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setTransition":a.push(()=>{});break;default:d.push(p.command)}return{operations:a,unimplemented:d}}addImage(r,a){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,a),this._afterImageUpdated(r)}updateImage(r,a){this.imageManager.updateImage(r,a)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,a,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(u.u.source,`sources.${r}`,a,null,d))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const p=this.sourceCaches[r]=new Pt(r,a,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:r})),p.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const a=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],a.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,a){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(a),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,a,d={}){this._checkLoaded();const p=r.id;if(this.getLayer(p))return void this.fire(new u.j(new Error(`Layer "${p}" already exists on this map.`)));let y;if(r.type==="custom"){if(Yi(this,u.aD(r)))return;y=u.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(p,r.source),r=u.aB(r),r=u.e(r,{source:p})),this._validate(u.u.layer,`layers.${p}`,r,{arrayIndex:-1},d))return;y=u.aA(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:p}})}const w=a?this._order.indexOf(a):this._order.length;if(a&&w===-1)this.fire(new u.j(new Error(`Cannot add layer "${p}" before non-existing layer "${a}".`)));else{if(this._order.splice(w,0,p),this._layerOrderChanged=!0,this._layers[p]=y,this._removedLayers[p]&&y.source&&y.type!=="custom"){const C=this._removedLayers[p];delete this._removedLayers[p],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,a){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===a)return;const d=this._order.indexOf(r);this._order.splice(d,1);const p=a?this._order.indexOf(a):this._order.length;a&&p===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${a}".`))):(this._order.splice(p,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const a=this._layers[r];if(!a)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));a.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=a,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],a.onRemove&&a.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,a,d){this._checkLoaded();const p=this.getLayer(r);p?p.minzoom===a&&p.maxzoom===d||(a!=null&&(p.minzoom=a),d!=null&&(p.maxzoom=d),this._updateLayer(p)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,a,d={}){this._checkLoaded();const p=this.getLayer(r);if(p){if(!u.aE(p.filter,a))return a==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(u.u.filter,`layers.${p.id}.filter`,a,null,d)||(p.filter=u.aB(a),this._updateLayer(p)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aB(this.getLayer(r).filter)}setLayoutProperty(r,a,d,p={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getLayoutProperty(a),d)||(y.setLayoutProperty(a,d,p),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,a){const d=this.getLayer(r);if(d)return d.getLayoutProperty(a);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,a,d,p={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getPaintProperty(a),d)||(y.setPaintProperty(a,d,p)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,a){return this.getLayer(r).getPaintProperty(a)}setFeatureState(r,a){this._checkLoaded();const d=r.source,p=r.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const w=y.getSource().type;w==="geojson"&&p?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||p?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(p,r.id,a)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,a){this._checkLoaded();const d=r.source,p=this.sourceCaches[d];if(p===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const y=p.getSource().type,w=y==="vector"?r.sourceLayer:void 0;y!=="vector"||w?a&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(w,r.id,a):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const a=r.source,d=r.sourceLayer,p=this.sourceCaches[a];if(p!==void 0)return p.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),p.getFeatureState(d,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aF(this.sourceCaches,y=>y.serialize()),a=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,p=this.stylesheet;return u.aG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,sources:r,layers:a,terrain:d},y=>y!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const a=w=>this._layers[w].type==="fill-extrusion",d={},p=[];for(let w=this._order.length-1;w>=0;w--){const C=this._order[w];if(a(C)){d[C]=w;for(const k of r){const P=k[C];if(P)for(const R of P)p.push(R)}}}p.sort((w,C)=>C.intersectionZ-w.intersectionZ);const y=[];for(let w=this._order.length-1;w>=0;w--){const C=this._order[w];if(a(C))for(let k=p.length-1;k>=0;k--){const P=p[k].feature;if(d[P.layer.id]<w)break;y.push(P),p.pop()}else for(const k of r){const P=k[C];if(P)for(const R of P)y.push(R.feature)}}return y}queryRenderedFeatures(r,a,d){a&&a.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",a.filter,null,a);const p={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const C of a.layers){const k=this._layers[C];if(!k)return this.fire(new u.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];p[k.source]=!0}}const y=[];a.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const C in this.sourceCaches)a.layers&&!p[C]||y.push(_r(this.sourceCaches[C],this._layers,w,r,a,d));return this.placement&&y.push(function(C,k,P,R,D,U,J){const te={},ae=U.queryRenderedSymbols(R),ue=[];for(const he of Object.keys(ae).map(Number))ue.push(J[he]);ue.sort(Nt);for(const he of ue){const me=he.featureIndex.lookupSymbolFeatures(ae[he.bucketInstanceId],k,he.bucketIndex,he.sourceLayerIndex,D.filter,D.layers,D.availableImages,C);for(const ie in me){const xe=te[ie]=te[ie]||[],Se=me[ie];Se.sort((Pe,Ve)=>{const Ye=he.featureSortOrder;if(Ye){const it=Ye.indexOf(Pe.featureIndex);return Ye.indexOf(Ve.featureIndex)-it}return Ve.featureIndex-Pe.featureIndex});for(const Pe of Se)xe.push(Pe)}}for(const he in te)te[he].forEach(me=>{const ie=me.feature,xe=P[C[he].source].getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=xe});return te}(this._layers,w,this.sourceCaches,r,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,a){a&&a.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",a.filter,null,a);const d=this.sourceCaches[r];return d?function(p,y){const w=p.getRenderableIds().map(P=>p.getTileByID(P)),C=[],k={};for(let P=0;P<w.length;P++){const R=w[P],D=R.tileID.canonical.key;k[D]||(k[D]=!0,R.querySourceFeatures(C,y))}return C}(d,a):[]}getLight(){return this.light.getLight()}setLight(r,a={}){this._checkLoaded();const d=this.light.getLight();let p=!1;for(const w in r)if(!u.aE(r[w],d[w])){p=!0;break}if(!p)return;const y={now:L.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,a),this.light.updateTransitions(y)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,a={}){const d=this.getSky();let p=!1;if(!r&&!d)return;if(r&&!d)p=!0;else if(!r&&d)p=!0;else for(const w in r)if(!u.aE(r[w],d[w])){p=!0;break}if(!p)return;const y={now:L.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,a),this.sky.updateTransitions(y)}_validate(r,a,d,p,y={}){return(!y||y.validate!==!1)&&Yi(this,r.call(u.u,u.e({key:a,style:this.serialize(),value:d,styleSpec:u.v},p)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),zt().off(Xe,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const d=this.sourceCaches[a];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const a in this.sourceCaches)this.sourceCaches[a].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,a,d,p,y=!1){let w=!1,C=!1;const k={};for(const P of this._order){const R=this._layers[P];if(R.type!=="symbol")continue;if(!k[R.source]){const U=this.sourceCaches[R.source];k[R.source]=U.getRenderableIds(!0).map(J=>U.getTileByID(J)).sort((J,te)=>te.tileID.overscaledZ-J.tileID.overscaledZ||(J.tileID.isLessThan(te.tileID)?-1:1))}const D=this.crossTileSymbolIndex.addLayer(R,k[R.source],r.center.lng);w=w||D}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(L.now(),r.zoom))&&(this.pauseablePlacement=new nl(r,this.map.terrain,this._order,y,a,d,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(L.now()),C=!0),w&&this.pauseablePlacement.placement.setStale()),C||w)for(const P of this._order){const R=this._layers[P];R.type==="symbol"&&this.placement.updateLayerOpacities(R,k[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(L.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,a){return u._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,a.icons),d})}getGlyphs(r,a){return u._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(a.stacks),p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,a={}){this._checkLoaded(),r&&this._validate(u.u.glyphs,"glyphs",r,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,a,d={},p){this._checkLoaded();const y=[{id:r,url:a}],w=[...Ae(this.stylesheet.sprite),...y];this._validate(u.u.sprite,"sprite",w,null,d)||(this.stylesheet.sprite=w,this._loadSprite(y,!0,p))}removeSprite(r){this._checkLoaded();const a=Ae(this.stylesheet.sprite);if(a.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;a.splice(a.findIndex(d=>d.id===r),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(r,a={},d){this._checkLoaded(),r&&this._validate(u.u.sprite,"sprite",r,null,a)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var ws=u.Y([{name:"a_pos",type:"Int16",components:2}]);const Qo={prelude:vr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:vr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:vr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:vr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:vr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:vr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:vr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:vr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:vr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:vr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:vr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:vr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:vr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:vr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:vr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:vr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:vr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:vr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:vr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:vr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:vr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:vr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:vr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:vr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:vr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function vr(_,r){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),p=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=y?y.concat(p):p,C={};return{fragmentSource:_=_.replace(a,(k,P,R,D,U)=>(C[U]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${U}
varying ${R} ${D} ${U};
#else
uniform ${R} ${D} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${R} ${D} ${U} = u_${U};
#endif
`)),vertexSource:r=r.replace(a,(k,P,R,D,U)=>{const J=D==="float"?"vec2":"vec4",te=U.match(/color/)?"color":J;return C[U]?P==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${R} ${J} a_${U};
varying ${R} ${D} ${U};
#else
uniform ${R} ${D} u_${U};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${R} ${D} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${te}(a_${U}, u_${U}_t);
#else
    ${R} ${D} ${U} = u_${U};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${R} ${J} a_${U};
#else
uniform ${R} ${D} u_${U};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${R} ${D} ${U} = a_${U};
#else
    ${R} ${D} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${R} ${D} ${U} = unpack_mix_${te}(a_${U}, u_${U}_t);
#else
    ${R} ${D} ${U} = u_${U};
#endif
`}),staticAttributes:d,staticUniforms:w}}class Ju{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,a,d,p,y,w,C,k,P){this.context=r;let R=this.boundPaintVertexBuffers.length!==p.length;for(let D=0;!R&&D<p.length;D++)this.boundPaintVertexBuffers[D]!==p[D]&&(R=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==d||R||this.boundIndexBuffer!==y||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==P?this.freshBind(a,d,p,y,w,C,k,P):(r.bindVertexArray.set(this.vao),C&&C.bind(),y&&y.dynamicDraw&&y.bind(),k&&k.bind(),P&&P.bind())}freshBind(r,a,d,p,y,w,C,k){const P=r.numAttributes,R=this.context,D=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=p,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=k,a.enableAttributes(D,r);for(const U of d)U.enableAttributes(D,r);w&&w.enableAttributes(D,r),C&&C.enableAttributes(D,r),k&&k.enableAttributes(D,r),a.bind(),a.setVertexAttribPointers(D,r,y);for(const U of d)U.bind(),U.setVertexAttribPointers(D,r,y);w&&(w.bind(),w.setVertexAttribPointers(D,r,y)),p&&p.bind(),C&&(C.bind(),C.setVertexAttribPointers(D,r,y)),k&&(k.bind(),k.setVertexAttribPointers(D,r,y)),R.currentNumAttributes=P}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Qu=(_,r,a,d,p)=>({u_matrix:_,u_texture:0,u_ele_delta:r,u_fog_matrix:a,u_fog_color:d?d.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?d.calculateFogBlendOpacity(p):0,u_horizon_color:d?d.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1});function ea(_){const r=[];for(let a=0;a<_.length;a++){if(_[a]===null)continue;const d=_[a].split(" ");r.push(d.pop())}return r}class ed{constructor(r,a,d,p,y,w){const C=r.gl;this.program=C.createProgram();const k=ea(a.staticAttributes),P=d?d.getBinderAttributes():[],R=k.concat(P),D=Qo.prelude.staticUniforms?ea(Qo.prelude.staticUniforms):[],U=a.staticUniforms?ea(a.staticUniforms):[],J=d?d.getBinderUniforms():[],te=D.concat(U).concat(J),ae=[];for(const Pe of te)ae.indexOf(Pe)<0&&ae.push(Pe);const ue=d?d.defines():[];y&&ue.push("#define OVERDRAW_INSPECTOR;"),w&&ue.push("#define TERRAIN3D;");const he=ue.concat(Qo.prelude.fragmentSource,a.fragmentSource).join(`
`),me=ue.concat(Qo.prelude.vertexSource,a.vertexSource).join(`
`),ie=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(ie,he),C.compileShader(ie),!C.getShaderParameter(ie,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(ie)}`);C.attachShader(this.program,ie);const xe=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(xe,me),C.compileShader(xe),!C.getShaderParameter(xe,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(xe)}`);C.attachShader(this.program,xe),this.attributes={};const Se={};this.numAttributes=R.length;for(let Pe=0;Pe<this.numAttributes;Pe++)R[Pe]&&(C.bindAttribLocation(this.program,Pe,R[Pe]),this.attributes[R[Pe]]=Pe);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(xe),C.deleteShader(ie);for(let Pe=0;Pe<ae.length;Pe++){const Ve=ae[Pe];if(Ve&&!Se[Ve]){const Ye=C.getUniformLocation(this.program,Ve);Ye&&(Se[Ve]=Ye)}}this.fixedUniforms=p(r,Se),this.terrainUniforms=((Pe,Ve)=>({u_depth:new u.aH(Pe,Ve.u_depth),u_terrain:new u.aH(Pe,Ve.u_terrain),u_terrain_dim:new u.aI(Pe,Ve.u_terrain_dim),u_terrain_matrix:new u.aJ(Pe,Ve.u_terrain_matrix),u_terrain_unpack:new u.aK(Pe,Ve.u_terrain_unpack),u_terrain_exaggeration:new u.aI(Pe,Ve.u_terrain_exaggeration)}))(r,Se),this.binderUniforms=d?d.getUniforms(r,Se):[]}draw(r,a,d,p,y,w,C,k,P,R,D,U,J,te,ae,ue,he,me){const ie=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(p),r.setColorMode(y),r.setCullFace(w),k){r.activeTexture.set(ie.TEXTURE2),ie.bindTexture(ie.TEXTURE_2D,k.depthTexture),r.activeTexture.set(ie.TEXTURE3),ie.bindTexture(ie.TEXTURE_2D,k.texture);for(const Se in this.terrainUniforms)this.terrainUniforms[Se].set(k[Se])}for(const Se in this.fixedUniforms)this.fixedUniforms[Se].set(C[Se]);ae&&ae.setUniforms(r,this.binderUniforms,J,{zoom:te});let xe=0;switch(a){case ie.LINES:xe=2;break;case ie.TRIANGLES:xe=3;break;case ie.LINE_STRIP:xe=1}for(const Se of U.get()){const Pe=Se.vaos||(Se.vaos={});(Pe[P]||(Pe[P]=new Ju)).bind(r,this,R,ae?ae.getPaintVertexBuffers():[],D,Se.vertexOffset,ue,he,me),ie.drawElements(a,Se.primitiveLength*xe,ie.UNSIGNED_SHORT,Se.primitiveOffset*xe*2)}}}function nc(_,r,a){const d=1/rr(a,1,r.transform.tileZoom),p=Math.pow(2,a.tileID.overscaledZ),y=a.tileSize*Math.pow(2,r.transform.tileZoom)/p,w=y*(a.tileID.canonical.x+a.tileID.wrap*p),C=y*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[d,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[w>>16,C>>16],u_pixel_coord_lower:[65535&w,65535&C]}}const il=(_,r,a,d)=>{const p=r.style.light,y=p.properties.get("position"),w=[y.x,y.y,y.z],C=function(){var P=new u.A(9);return u.A!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[5]=0,P[6]=0,P[7]=0),P[0]=1,P[4]=1,P[8]=1,P}();p.properties.get("anchor")==="viewport"&&function(P,R){var D=Math.sin(R),U=Math.cos(R);P[0]=U,P[1]=D,P[2]=0,P[3]=-D,P[4]=U,P[5]=0,P[6]=0,P[7]=0,P[8]=1}(C,-r.transform.angle),function(P,R,D){var U=R[0],J=R[1],te=R[2];P[0]=U*D[0]+J*D[3]+te*D[6],P[1]=U*D[1]+J*D[4]+te*D[7],P[2]=U*D[2]+J*D[5]+te*D[8]}(w,w,C);const k=p.properties.get("color");return{u_matrix:_,u_lightpos:w,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+a,u_opacity:d}},ic=(_,r,a,d,p,y,w)=>u.e(il(_,r,a,d),nc(y,r,w),{u_height_factor:-Math.pow(2,p.overscaledZ)/w.tileSize/8}),ta=_=>({u_matrix:_}),wp=(_,r,a,d)=>u.e(ta(_),nc(a,r,d)),Kg=(_,r)=>({u_matrix:_,u_world:r}),Sp=(_,r,a,d,p)=>u.e(wp(_,r,a,d),{u_world:p}),Yg=(_,r,a,d)=>{const p=_.transform;let y,w;if(d.paint.get("circle-pitch-alignment")==="map"){const C=rr(a,1,p.zoom);y=!0,w=[C,C]}else y=!1,w=p.pixelsToGLUnits;return{u_camera_to_center_distance:p.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(r.posMatrix,a,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:w}},Ss=(_,r,a)=>({u_matrix:_,u_inv_matrix:r,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}),ol=(_,r,a=1)=>({u_matrix:_,u_color:r,u_overlay:0,u_overlay_scale:a}),ai=_=>({u_matrix:_}),li=(_,r,a,d)=>({u_matrix:_,u_extrude_scale:rr(r,1,a),u_intensity:d}),oc=(_,r,a,d)=>{const p=u.H();u.aP(p,0,_.width,_.height,0,0,1);const y=_.context.gl;return{u_matrix:p,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:a,u_color_ramp:d,u_opacity:r.paint.get("heatmap-opacity")}};function sc(_,r){const a=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new u.Z(0,d/a).toLngLat().lat,new u.Z(0,(d+1)/a).toLngLat().lat]}const ac=(_,r,a,d)=>{const p=_.transform;return{u_matrix:Tp(_,r,a,d),u_ratio:1/rr(r,1,p.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},Cp=(_,r,a,d,p)=>u.e(ac(_,r,a,p),{u_image:0,u_image_height:d}),ra=(_,r,a,d,p)=>{const y=_.transform,w=kp(r,y);return{u_matrix:Tp(_,r,a,p),u_texsize:r.imageAtlasTexture.size,u_ratio:1/rr(r,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Jg=(_,r,a,d,p,y)=>{const w=_.lineAtlas,C=kp(r,_.transform),k=a.layout.get("line-cap")==="round",P=w.getDash(d.from,k),R=w.getDash(d.to,k),D=P.width*p.fromScale,U=R.width*p.toScale;return u.e(ac(_,r,a,y),{u_patternscale_a:[C/D,-P.height/2],u_patternscale_b:[C/U,-R.height/2],u_sdfgamma:w.width/(256*Math.min(D,U)*_.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:R.y,u_mix:p.t})};function kp(_,r){return 1/rr(_,1,r.tileZoom)}function Tp(_,r,a,d){return _.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const Qg=(_,r,a,d,p)=>{return{u_matrix:_,u_tl_parent:r,u_scale_parent:a,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(w=p.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(y=p.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:ey(p.paint.get("raster-hue-rotate"))};var y,w};function ey(_){_*=Math.PI/180;const r=Math.sin(_),a=Math.cos(_);return[(2*a+1)/3,(-Math.sqrt(3)*r-a+1)/3,(Math.sqrt(3)*r-a+1)/3]}const Ip=(_,r,a,d,p,y,w,C,k,P,R,D,U,J)=>{const te=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:te.cameraToCenterDistance,u_pitch:te.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:te.width/te.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:k,u_coord_matrix:P,u_is_text:+D,u_pitch_with_map:+d,u_is_along_line:p,u_is_variable_anchor:y,u_texsize:U,u_texture:0,u_translation:R,u_pitched_scale:J}},sl=(_,r,a,d,p,y,w,C,k,P,R,D,U,J,te)=>{const ae=w.transform;return u.e(Ip(_,r,a,d,p,y,w,C,k,P,R,D,U,te),{u_gamma_scale:d?Math.cos(ae._pitch)*ae.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},td=(_,r,a,d,p,y,w,C,k,P,R,D,U,J)=>u.e(sl(_,r,a,d,p,y,w,C,k,P,R,!0,D,!0,J),{u_texsize_icon:U,u_texture_icon:1}),lc=(_,r,a)=>({u_matrix:_,u_opacity:r,u_color:a}),rd=(_,r,a,d,p,y)=>u.e(function(w,C,k,P){const R=k.imageManager.getPattern(w.from.toString()),D=k.imageManager.getPattern(w.to.toString()),{width:U,height:J}=k.imageManager.getPixelSize(),te=Math.pow(2,P.tileID.overscaledZ),ae=P.tileSize*Math.pow(2,k.transform.tileZoom)/te,ue=ae*(P.tileID.canonical.x+P.tileID.wrap*te),he=ae*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[U,J],u_mix:C.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/rr(P,1,k.transform.tileZoom),u_pixel_coord_upper:[ue>>16,he>>16],u_pixel_coord_lower:[65535&ue,65535&he]}}(d,y,a,p),{u_matrix:_,u_opacity:r}),nd={fillExtrusion:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_lightpos:new u.aN(_,r.u_lightpos),u_lightintensity:new u.aI(_,r.u_lightintensity),u_lightcolor:new u.aN(_,r.u_lightcolor),u_vertical_gradient:new u.aI(_,r.u_vertical_gradient),u_opacity:new u.aI(_,r.u_opacity)}),fillExtrusionPattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_lightpos:new u.aN(_,r.u_lightpos),u_lightintensity:new u.aI(_,r.u_lightintensity),u_lightcolor:new u.aN(_,r.u_lightcolor),u_vertical_gradient:new u.aI(_,r.u_vertical_gradient),u_height_factor:new u.aI(_,r.u_height_factor),u_image:new u.aH(_,r.u_image),u_texsize:new u.aO(_,r.u_texsize),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade),u_opacity:new u.aI(_,r.u_opacity)}),fill:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix)}),fillPattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_image:new u.aH(_,r.u_image),u_texsize:new u.aO(_,r.u_texsize),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade)}),fillOutline:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_world:new u.aO(_,r.u_world)}),fillOutlinePattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_world:new u.aO(_,r.u_world),u_image:new u.aH(_,r.u_image),u_texsize:new u.aO(_,r.u_texsize),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade)}),circle:(_,r)=>({u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_scale_with_map:new u.aH(_,r.u_scale_with_map),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_extrude_scale:new u.aO(_,r.u_extrude_scale),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_matrix:new u.aJ(_,r.u_matrix)}),collisionBox:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_pixel_extrude_scale:new u.aO(_,r.u_pixel_extrude_scale)}),collisionCircle:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_inv_matrix:new u.aJ(_,r.u_inv_matrix),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_viewport_size:new u.aO(_,r.u_viewport_size)}),debug:(_,r)=>({u_color:new u.aL(_,r.u_color),u_matrix:new u.aJ(_,r.u_matrix),u_overlay:new u.aH(_,r.u_overlay),u_overlay_scale:new u.aI(_,r.u_overlay_scale)}),clippingMask:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix)}),heatmap:(_,r)=>({u_extrude_scale:new u.aI(_,r.u_extrude_scale),u_intensity:new u.aI(_,r.u_intensity),u_matrix:new u.aJ(_,r.u_matrix)}),heatmapTexture:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_world:new u.aO(_,r.u_world),u_image:new u.aH(_,r.u_image),u_color_ramp:new u.aH(_,r.u_color_ramp),u_opacity:new u.aI(_,r.u_opacity)}),hillshade:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_image:new u.aH(_,r.u_image),u_latrange:new u.aO(_,r.u_latrange),u_light:new u.aO(_,r.u_light),u_shadow:new u.aL(_,r.u_shadow),u_highlight:new u.aL(_,r.u_highlight),u_accent:new u.aL(_,r.u_accent)}),hillshadePrepare:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_image:new u.aH(_,r.u_image),u_dimension:new u.aO(_,r.u_dimension),u_zoom:new u.aI(_,r.u_zoom),u_unpack:new u.aK(_,r.u_unpack)}),line:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels)}),lineGradient:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels),u_image:new u.aH(_,r.u_image),u_image_height:new u.aI(_,r.u_image_height)}),linePattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_texsize:new u.aO(_,r.u_texsize),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_image:new u.aH(_,r.u_image),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels),u_scale:new u.aN(_,r.u_scale),u_fade:new u.aI(_,r.u_fade)}),lineSDF:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ratio:new u.aI(_,r.u_ratio),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(_,r.u_units_to_pixels),u_patternscale_a:new u.aO(_,r.u_patternscale_a),u_patternscale_b:new u.aO(_,r.u_patternscale_b),u_sdfgamma:new u.aI(_,r.u_sdfgamma),u_image:new u.aH(_,r.u_image),u_tex_y_a:new u.aI(_,r.u_tex_y_a),u_tex_y_b:new u.aI(_,r.u_tex_y_b),u_mix:new u.aI(_,r.u_mix)}),raster:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_tl_parent:new u.aO(_,r.u_tl_parent),u_scale_parent:new u.aI(_,r.u_scale_parent),u_buffer_scale:new u.aI(_,r.u_buffer_scale),u_fade_t:new u.aI(_,r.u_fade_t),u_opacity:new u.aI(_,r.u_opacity),u_image0:new u.aH(_,r.u_image0),u_image1:new u.aH(_,r.u_image1),u_brightness_low:new u.aI(_,r.u_brightness_low),u_brightness_high:new u.aI(_,r.u_brightness_high),u_saturation_factor:new u.aI(_,r.u_saturation_factor),u_contrast_factor:new u.aI(_,r.u_contrast_factor),u_spin_weights:new u.aN(_,r.u_spin_weights)}),symbolIcon:(_,r)=>({u_is_size_zoom_constant:new u.aH(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,r.u_is_size_feature_constant),u_size_t:new u.aI(_,r.u_size_t),u_size:new u.aI(_,r.u_size),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_pitch:new u.aI(_,r.u_pitch),u_rotate_symbol:new u.aH(_,r.u_rotate_symbol),u_aspect_ratio:new u.aI(_,r.u_aspect_ratio),u_fade_change:new u.aI(_,r.u_fade_change),u_matrix:new u.aJ(_,r.u_matrix),u_label_plane_matrix:new u.aJ(_,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,r.u_coord_matrix),u_is_text:new u.aH(_,r.u_is_text),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_is_along_line:new u.aH(_,r.u_is_along_line),u_is_variable_anchor:new u.aH(_,r.u_is_variable_anchor),u_texsize:new u.aO(_,r.u_texsize),u_texture:new u.aH(_,r.u_texture),u_translation:new u.aO(_,r.u_translation),u_pitched_scale:new u.aI(_,r.u_pitched_scale)}),symbolSDF:(_,r)=>({u_is_size_zoom_constant:new u.aH(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,r.u_is_size_feature_constant),u_size_t:new u.aI(_,r.u_size_t),u_size:new u.aI(_,r.u_size),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_pitch:new u.aI(_,r.u_pitch),u_rotate_symbol:new u.aH(_,r.u_rotate_symbol),u_aspect_ratio:new u.aI(_,r.u_aspect_ratio),u_fade_change:new u.aI(_,r.u_fade_change),u_matrix:new u.aJ(_,r.u_matrix),u_label_plane_matrix:new u.aJ(_,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,r.u_coord_matrix),u_is_text:new u.aH(_,r.u_is_text),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_is_along_line:new u.aH(_,r.u_is_along_line),u_is_variable_anchor:new u.aH(_,r.u_is_variable_anchor),u_texsize:new u.aO(_,r.u_texsize),u_texture:new u.aH(_,r.u_texture),u_gamma_scale:new u.aI(_,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_is_halo:new u.aH(_,r.u_is_halo),u_translation:new u.aO(_,r.u_translation),u_pitched_scale:new u.aI(_,r.u_pitched_scale)}),symbolTextAndIcon:(_,r)=>({u_is_size_zoom_constant:new u.aH(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(_,r.u_is_size_feature_constant),u_size_t:new u.aI(_,r.u_size_t),u_size:new u.aI(_,r.u_size),u_camera_to_center_distance:new u.aI(_,r.u_camera_to_center_distance),u_pitch:new u.aI(_,r.u_pitch),u_rotate_symbol:new u.aH(_,r.u_rotate_symbol),u_aspect_ratio:new u.aI(_,r.u_aspect_ratio),u_fade_change:new u.aI(_,r.u_fade_change),u_matrix:new u.aJ(_,r.u_matrix),u_label_plane_matrix:new u.aJ(_,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(_,r.u_coord_matrix),u_is_text:new u.aH(_,r.u_is_text),u_pitch_with_map:new u.aH(_,r.u_pitch_with_map),u_is_along_line:new u.aH(_,r.u_is_along_line),u_is_variable_anchor:new u.aH(_,r.u_is_variable_anchor),u_texsize:new u.aO(_,r.u_texsize),u_texsize_icon:new u.aO(_,r.u_texsize_icon),u_texture:new u.aH(_,r.u_texture),u_texture_icon:new u.aH(_,r.u_texture_icon),u_gamma_scale:new u.aI(_,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(_,r.u_device_pixel_ratio),u_is_halo:new u.aH(_,r.u_is_halo),u_translation:new u.aO(_,r.u_translation),u_pitched_scale:new u.aI(_,r.u_pitched_scale)}),background:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_opacity:new u.aI(_,r.u_opacity),u_color:new u.aL(_,r.u_color)}),backgroundPattern:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_opacity:new u.aI(_,r.u_opacity),u_image:new u.aH(_,r.u_image),u_pattern_tl_a:new u.aO(_,r.u_pattern_tl_a),u_pattern_br_a:new u.aO(_,r.u_pattern_br_a),u_pattern_tl_b:new u.aO(_,r.u_pattern_tl_b),u_pattern_br_b:new u.aO(_,r.u_pattern_br_b),u_texsize:new u.aO(_,r.u_texsize),u_mix:new u.aI(_,r.u_mix),u_pattern_size_a:new u.aO(_,r.u_pattern_size_a),u_pattern_size_b:new u.aO(_,r.u_pattern_size_b),u_scale_a:new u.aI(_,r.u_scale_a),u_scale_b:new u.aI(_,r.u_scale_b),u_pixel_coord_upper:new u.aO(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(_,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(_,r.u_tile_units_to_pixels)}),terrain:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_texture:new u.aH(_,r.u_texture),u_ele_delta:new u.aI(_,r.u_ele_delta),u_fog_matrix:new u.aJ(_,r.u_fog_matrix),u_fog_color:new u.aL(_,r.u_fog_color),u_fog_ground_blend:new u.aI(_,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(_,r.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(_,r.u_horizon_color),u_horizon_fog_blend:new u.aI(_,r.u_horizon_fog_blend)}),terrainDepth:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_ele_delta:new u.aI(_,r.u_ele_delta)}),terrainCoords:(_,r)=>({u_matrix:new u.aJ(_,r.u_matrix),u_texture:new u.aH(_,r.u_texture),u_terrain_coords_id:new u.aI(_,r.u_terrain_coords_id),u_ele_delta:new u.aI(_,r.u_ele_delta)}),sky:(_,r)=>({u_sky_color:new u.aL(_,r.u_sky_color),u_horizon_color:new u.aL(_,r.u_horizon_color),u_horizon:new u.aI(_,r.u_horizon),u_sky_horizon_blend:new u.aI(_,r.u_sky_horizon_blend)})};class yo{constructor(r,a,d){this.context=r;const p=r.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ty={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class id{constructor(r,a,d,p){this.length=a.length,this.attributes=d,this.itemSize=a.bytesPerElement,this.dynamicDraw=p,this.context=r;const y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,a){for(let d=0;d<this.attributes.length;d++){const p=a.attributes[this.attributes[d].name];p!==void 0&&r.enableVertexAttribArray(p)}}setVertexAttribPointers(r,a,d){for(let p=0;p<this.attributes.length;p++){const y=this.attributes[p],w=a.attributes[y.name];w!==void 0&&r.vertexAttribPointer(w,y.components,r[ty[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Cs=new WeakMap;function es(_){var r;if(Cs.has(_))return Cs.get(_);{const a=(r=_.getParameter(_.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Cs.set(_,a),a}}class xr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class cc extends xr{getDefault(){return u.aM.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ry extends xr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class na extends xr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class ny extends xr{getDefault(){return[!0,!0,!0,!0]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ep extends xr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class iy extends xr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Pp extends xr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const a=this.current;(r.func!==a.func||r.ref!==a.ref||r.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class od extends xr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Mp extends xr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=r,this.dirty=!1}}class Ap extends xr{getDefault(){return[0,1]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class zp extends xr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=r,this.dirty=!1}}class Rp extends xr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class ks extends xr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.BLEND):a.disable(a.BLEND),this.current=r,this.dirty=!1}}class Dp extends xr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class oy extends xr{getDefault(){return u.aM.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Lp extends xr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class al extends xr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=r,this.dirty=!1}}class sy extends xr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class uc extends xr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class ay extends xr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class ly extends xr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Bp extends xr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Fp extends xr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Op extends xr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class sd extends xr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class $p extends xr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class dc extends xr{getDefault(){return null}set(r){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Lo extends xr{getDefault(){return null}set(r){var a;if(r===this.current&&!this.dirty)return;const d=this.gl;es(d)?d.bindVertexArray(r):(a=d.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class ad extends xr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ld extends xr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class cd extends xr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class hc extends xr{constructor(r,a){super(r),this.context=r,this.parent=a}getDefault(){return null}}class ud extends hc{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Ts extends hc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class dd extends hc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class cy{constructor(r,a,d,p,y){this.context=r,this.width=a,this.height=d;const w=r.gl,C=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new ud(r,C),p)this.depthAttachment=y?new dd(r,C):new Ts(r,C);else if(y)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,a=this.colorAttachment.get();if(a&&r.deleteTexture(a),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class Qr{constructor(r,a,d){this.blendFunction=r,this.blendColor=a,this.mask=d}}Qr.Replace=[1,0],Qr.disabled=new Qr(Qr.Replace,u.aM.transparent,[!1,!1,!1,!1]),Qr.unblended=new Qr(Qr.Replace,u.aM.transparent,[!0,!0,!0,!0]),Qr.alphaBlended=new Qr([1,771],u.aM.transparent,[!0,!0,!0,!0]);class uy{constructor(r){var a,d;if(this.gl=r,this.clearColor=new cc(this),this.clearDepth=new ry(this),this.clearStencil=new na(this),this.colorMask=new ny(this),this.depthMask=new Ep(this),this.stencilMask=new iy(this),this.stencilFunc=new Pp(this),this.stencilOp=new od(this),this.stencilTest=new Mp(this),this.depthRange=new Ap(this),this.depthTest=new zp(this),this.depthFunc=new Rp(this),this.blend=new ks(this),this.blendFunc=new Dp(this),this.blendColor=new oy(this),this.blendEquation=new Lp(this),this.cullFace=new al(this),this.cullFaceSide=new sy(this),this.frontFace=new uc(this),this.program=new ay(this),this.activeTexture=new ly(this),this.viewport=new Bp(this),this.bindFramebuffer=new Fp(this),this.bindRenderbuffer=new Op(this),this.bindTexture=new sd(this),this.bindVertexBuffer=new $p(this),this.bindElementBuffer=new dc(this),this.bindVertexArray=new Lo(this),this.pixelStoreUnpack=new ad(this),this.pixelStoreUnpackPremultiplyAlpha=new ld(this),this.pixelStoreUnpackFlipY=new cd(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),es(r)){this.HALF_FLOAT=r.HALF_FLOAT;const p=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=r.RGBA16F)!==null&&a!==void 0?a:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:p==null?void 0:p.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const p=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,a){return new yo(this,r,a)}createVertexBuffer(r,a,d){return new id(this,r,a,d)}createRenderbuffer(r,a,d){const p=this.gl,y=p.createRenderbuffer();return this.bindRenderbuffer.set(y),p.renderbufferStorage(p.RENDERBUFFER,r,a,d),this.bindRenderbuffer.set(null),y}createFramebuffer(r,a,d,p){return new cy(this,r,a,d,p)}clear({color:r,depth:a,stencil:d}){const p=this.gl;let y=0;r&&(y|=p.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(y|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),d!==void 0&&(y|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),p.clear(y)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aE(r.blendFunction,Qr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return es(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var a;return es(this.gl)?this.gl.deleteVertexArray(r):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Qt{constructor(r,a,d){this.func=r,this.mask=a,this.range=d}}Qt.ReadOnly=!1,Qt.ReadWrite=!0,Qt.disabled=new Qt(519,Qt.ReadOnly,[0,1]);const pc=7680;class Rr{constructor(r,a,d,p,y,w){this.test=r,this.ref=a,this.mask=d,this.fail=p,this.depthFail=y,this.pass=w}}Rr.disabled=new Rr({func:519,mask:0},0,0,pc,pc,pc);class Ir{constructor(r,a,d){this.enable=r,this.mode=a,this.frontFace=d}}let Is;function ll(_,r,a,d,p){const y=_.context,w=y.gl,C=_.useProgram("collisionBox"),k=[];let P=0,R=0;for(let he=0;he<d.length;he++){const me=d[he],ie=r.getTile(me).getBucket(a);if(!ie)continue;const xe=p?ie.textCollisionBox:ie.iconCollisionBox,Se=ie.collisionCircleArray;if(Se.length>0){const Pe=u.H();u.aQ(Pe,ie.placementInvProjMatrix,_.transform.glCoordMatrix),u.aQ(Pe,Pe,ie.placementViewportMatrix),k.push({circleArray:Se,circleOffset:R,transform:me.posMatrix,invTransform:Pe,coord:me}),P+=Se.length/4,R=P}xe&&C.draw(y,w.LINES,Qt.disabled,Rr.disabled,_.colorModeForRenderPass(),Ir.disabled,{u_matrix:me.posMatrix,u_pixel_extrude_scale:[1/(D=_.transform).width,1/D.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(me),a.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,null,_.transform.zoom,null,null,xe.collisionVertexBuffer)}var D;if(!p||!k.length)return;const U=_.useProgram("collisionCircle"),J=new u.aR;J.resize(4*P),J._trim();let te=0;for(const he of k)for(let me=0;me<he.circleArray.length/4;me++){const ie=4*me,xe=he.circleArray[ie+0],Se=he.circleArray[ie+1],Pe=he.circleArray[ie+2],Ve=he.circleArray[ie+3];J.emplace(te++,xe,Se,Pe,Ve,0),J.emplace(te++,xe,Se,Pe,Ve,1),J.emplace(te++,xe,Se,Pe,Ve,2),J.emplace(te++,xe,Se,Pe,Ve,3)}(!Is||Is.length<2*P)&&(Is=function(he){const me=2*he,ie=new u.aT;ie.resize(me),ie._trim();for(let xe=0;xe<me;xe++){const Se=6*xe;ie.uint16[Se+0]=4*xe+0,ie.uint16[Se+1]=4*xe+1,ie.uint16[Se+2]=4*xe+2,ie.uint16[Se+3]=4*xe+2,ie.uint16[Se+4]=4*xe+3,ie.uint16[Se+5]=4*xe+0}return ie}(P));const ae=y.createIndexBuffer(Is,!0),ue=y.createVertexBuffer(J,u.aS.members,!0);for(const he of k){const me=Ss(he.transform,he.invTransform,_.transform);U.draw(y,w.TRIANGLES,Qt.disabled,Rr.disabled,_.colorModeForRenderPass(),Ir.disabled,me,_.style.map.terrain&&_.style.map.terrain.getTerrainData(he.coord),a.id,ue,ae,u.a0.simpleSegment(0,2*he.circleOffset,he.circleArray.length,he.circleArray.length/2),null,_.transform.zoom,null,null,null)}ue.destroy(),ae.destroy()}Ir.disabled=new Ir(!1,1029,2305),Ir.backCCW=new Ir(!0,1029,2305);const cl=u.an(new Float32Array(16));function hd(_,r,a,d,p,y){const{horizontalAlign:w,verticalAlign:C}=u.au(_);return new u.P((-(w-.5)*r/p+d[0])*y,(-(C-.5)*a/p+d[1])*y)}function Es(_,r,a,d,p,y){const w=r.tileAnchorPoint.add(new u.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let C=d.mult(y);a||(C=C.rotate(-p));const k=w.add(C);return ne(k.x,k.y,r.labelPlaneMatrix,r.getElevation).point}if(a){const C=Oe(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(_),k=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return _.add(d.rotate(k))}return _.add(d)}function ia(_,r,a,d,p,y,w,C,k,P,R,D,U,J){const te=_.text.placedSymbolArray,ae=_.text.dynamicLayoutVertexArray,ue=_.icon.dynamicLayoutVertexArray,he={};ae.clear();for(let me=0;me<te.length;me++){const ie=te.get(me),xe=ie.hidden||!ie.crossTileID||_.allowVerticalPlacement&&!ie.placedOrientation?null:d[ie.crossTileID];if(xe){const Se=new u.P(ie.anchorX,ie.anchorY),Pe={getElevation:J,width:p.width,height:p.height,labelPlaneMatrix:y,pitchWithMap:a,projection:R,tileAnchorPoint:Se,translation:D,unwrappedTileID:U},Ve=a?ne(Se.x,Se.y,w,J):Oe(Se.x,Se.y,Pe),Ye=O(p.cameraToCenterDistance,Ve.signedDistanceFromCamera);let it=u.ai(_.textSizeData,k,ie)*Ye/u.ap;a&&(it*=_.tilePixelRatio/C);const{width:ut,height:tt,anchor:et,textOffset:mt,textBoxScale:Ot}=xe,rt=hd(et,ut,tt,mt,Ot,it),lt=R.getPitchedTextCorrection(p,Se.add(new u.P(D[0],D[1])),U),Lt=Es(Ve.point,Pe,r,rt,p.angle,lt),Vr=_.allowVerticalPlacement&&ie.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let qt=0;qt<ie.numGlyphs;qt++)u.aj(ae,Lt,Vr);P&&ie.associatedIconIndex>=0&&(he[ie.associatedIconIndex]={shiftedAnchor:Lt,angle:Vr})}else It(ie.numGlyphs,ae)}if(P){ue.clear();const me=_.icon.placedSymbolArray;for(let ie=0;ie<me.length;ie++){const xe=me.get(ie);if(xe.hidden)It(xe.numGlyphs,ue);else{const Se=he[ie];if(Se)for(let Pe=0;Pe<xe.numGlyphs;Pe++)u.aj(ue,Se.shiftedAnchor,Se.angle);else It(xe.numGlyphs,ue)}}_.icon.dynamicLayoutVertexBuffer.updateData(ue)}_.text.dynamicLayoutVertexBuffer.updateData(ae)}function Bi(_,r,a){return a.iconsInText&&r?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function pd(_,r,a,d,p,y,w,C,k,P,R,D){const U=_.context,J=U.gl,te=_.transform,ae=bs(),ue=C==="map",he=k==="map",me=C!=="viewport"&&a.layout.get("symbol-placement")!=="point",ie=ue&&!he&&!me,xe=!he&&me,Se=!a.layout.get("symbol-sort-key").isConstant();let Pe=!1;const Ve=_.depthModeForSublayer(0,Qt.ReadOnly),Ye=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=[],ut=ae.getCircleRadiusCorrection(te);for(const tt of d){const et=r.getTile(tt),mt=et.getBucket(a);if(!mt)continue;const Ot=p?mt.text:mt.icon;if(!Ot||!Ot.segments.get().length||!Ot.hasVisibleVertices)continue;const rt=Ot.programConfigurations.get(a.id),lt=p||mt.sdfIcons,Lt=p?mt.textSizeData:mt.iconSizeData,Vr=he||te.pitch!==0,qt=_.useProgram(Bi(lt,p,mt),rt),nr=u.ag(Lt,te.zoom),Ur=_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt);let On,eo,Wr,ci,Yn=[0,0],$n=null;if(p)eo=et.glyphAtlasTexture,Wr=J.LINEAR,On=et.glyphAtlasTexture.size,mt.iconsInText&&(Yn=et.imageAtlasTexture.size,$n=et.imageAtlasTexture,ci=Vr||_.options.rotating||_.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?J.LINEAR:J.NEAREST);else{const sr=a.layout.get("icon-size").constantOr(0)!==1||mt.iconsNeedLinear;eo=et.imageAtlasTexture,Wr=lt||_.options.rotating||_.options.zooming||sr||Vr?J.LINEAR:J.NEAREST,On=et.imageAtlasTexture.size}const Jn=rr(et,1,_.transform.zoom),xo=xe?tt.posMatrix:cl,va=Tt(xo,he,ue,_.transform,Jn),zc=ur(xo,he,ue,_.transform,Jn),xa=ur(tt.posMatrix,he,ue,_.transform,Jn),$i=ae.translatePosition(_.transform,et,y,w),Rc=Ye&&mt.hasTextData(),Od=a.layout.get("icon-text-fit")!=="none"&&Rc&&mt.hasIconData();if(me){const sr=_.style.map.terrain?(ba,wa)=>_.style.map.terrain.getElevation(tt,ba,wa):null,Rs=a.layout.get("text-rotation-alignment")==="map";Y(mt,tt.posMatrix,_,p,va,xa,he,P,Rs,ae,tt.toUnwrapped(),te.width,te.height,$i,sr)}const Ni=tt.posMatrix,ji=p&&Ye||Od,ts=me||ji?cl:va,to=zc,An=lt&&a.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Nn;Nn=lt?mt.iconsInText?td(Lt.kind,nr,ie,he,me,ji,_,Ni,ts,to,$i,On,Yn,ut):sl(Lt.kind,nr,ie,he,me,ji,_,Ni,ts,to,$i,p,On,!0,ut):Ip(Lt.kind,nr,ie,he,me,ji,_,Ni,ts,to,$i,p,On,ut);const Ti={program:qt,buffers:Ot,uniformValues:Nn,atlasTexture:eo,atlasTextureIcon:$n,atlasInterpolation:Wr,atlasInterpolationIcon:ci,isSDF:lt,hasHalo:An};if(Se&&mt.canOverlap){Pe=!0;const sr=Ot.segments.get();for(const Rs of sr)it.push({segments:new u.a0([Rs]),sortKey:Rs.sortKey,state:Ti,terrainData:Ur})}else it.push({segments:Ot.segments,sortKey:0,state:Ti,terrainData:Ur})}Pe&&it.sort((tt,et)=>tt.sortKey-et.sortKey);for(const tt of it){const et=tt.state;if(U.activeTexture.set(J.TEXTURE0),et.atlasTexture.bind(et.atlasInterpolation,J.CLAMP_TO_EDGE),et.atlasTextureIcon&&(U.activeTexture.set(J.TEXTURE1),et.atlasTextureIcon&&et.atlasTextureIcon.bind(et.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),et.isSDF){const mt=et.uniformValues;et.hasHalo&&(mt.u_is_halo=1,fd(et.buffers,tt.segments,a,_,et.program,Ve,R,D,mt,tt.terrainData)),mt.u_is_halo=0}fd(et.buffers,tt.segments,a,_,et.program,Ve,R,D,et.uniformValues,tt.terrainData)}}function fd(_,r,a,d,p,y,w,C,k,P){const R=d.context;p.draw(R,R.gl.TRIANGLES,y,w,C,Ir.disabled,k,P,a.id,_.layoutVertexBuffer,_.indexBuffer,r,a.paint,d.transform.zoom,_.programConfigurations.get(a.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function md(_,r,a,d){const p=_.context,y=p.gl,w=Rr.disabled,C=new Qr([y.ONE,y.ONE],u.aM.transparent,[!0,!0,!0,!0]),k=r.getBucket(a);if(!k)return;const P=d.key;let R=a.heatmapFbos.get(P);R||(R=ul(p,r.tileSize,r.tileSize),a.heatmapFbos.set(P,R)),p.bindFramebuffer.set(R.framebuffer),p.viewport.set([0,0,r.tileSize,r.tileSize]),p.clear({color:u.aM.transparent});const D=k.programConfigurations.get(a.id),U=_.useProgram("heatmap",D),J=_.style.map.terrain.getTerrainData(d);U.draw(p,y.TRIANGLES,Qt.disabled,w,C,Ir.disabled,li(d.posMatrix,r,_.transform.zoom,a.paint.get("heatmap-intensity")),J,a.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,a.paint,_.transform.zoom,D)}function Ps(_,r,a){const d=_.context,p=d.gl;d.setColorMode(_.colorModeForRenderPass());const y=dl(d,r),w=a.key,C=r.heatmapFbos.get(w);C&&(d.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,C.colorAttachment.get()),d.activeTexture.set(p.TEXTURE1),y.bind(p.LINEAR,p.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(d,p.TRIANGLES,Qt.disabled,Rr.disabled,_.colorModeForRenderPass(),Ir.disabled,oc(_,r,0,1),null,r.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,r.paint,_.transform.zoom),C.destroy(),r.heatmapFbos.delete(w))}function ul(_,r,a){var d,p;const y=_.gl,w=y.createTexture();y.bindTexture(y.TEXTURE_2D,w),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const C=(d=_.HALF_FLOAT)!==null&&d!==void 0?d:y.UNSIGNED_BYTE,k=(p=_.RGBA16F)!==null&&p!==void 0?p:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,k,r,a,0,y.RGBA,C,null);const P=_.createFramebuffer(r,a,!1,!1);return P.colorAttachment.set(w),P}function dl(_,r){return r.colorRampTexture||(r.colorRampTexture=new De(_,r.colorRamp,_.gl.RGBA)),r.colorRampTexture}function oa(_,r,a,d,p){if(!a||!d||!d.imageAtlas)return;const y=d.imageAtlas.patternPositions;let w=y[a.to.toString()],C=y[a.from.toString()];if(!w&&C&&(w=C),!C&&w&&(C=w),!w||!C){const k=p.getPaintProperty(r);w=y[k],C=y[k]}w&&C&&_.setConstantPatternPositions(w,C)}function hl(_,r,a,d,p,y,w){const C=_.context.gl,k="fill-pattern",P=a.paint.get(k),R=P&&P.constantOr(1),D=a.getCrossfadeParameters();let U,J,te,ae,ue;w?(J=R&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=C.LINES):(J=R?"fillPattern":"fill",U=C.TRIANGLES);const he=P.constantOr(null);for(const me of d){const ie=r.getTile(me);if(R&&!ie.patternsLoaded())continue;const xe=ie.getBucket(a);if(!xe)continue;const Se=xe.programConfigurations.get(a.id),Pe=_.useProgram(J,Se),Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(me);R&&(_.context.activeTexture.set(C.TEXTURE0),ie.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Se.updatePaintBuffers(D)),oa(Se,k,he,ie,a);const Ye=Ve?me:null,it=_.translatePosMatrix(Ye?Ye.posMatrix:me.posMatrix,ie,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(w){ae=xe.indexBuffer2,ue=xe.segments2;const ut=[C.drawingBufferWidth,C.drawingBufferHeight];te=J==="fillOutlinePattern"&&R?Sp(it,_,D,ie,ut):Kg(it,ut)}else ae=xe.indexBuffer,ue=xe.segments,te=R?wp(it,_,D,ie):ta(it);Pe.draw(_.context,U,p,_.stencilModeForClipping(me),y,Ir.disabled,te,Ve,a.id,xe.layoutVertexBuffer,ae,ue,a.paint,_.transform.zoom,Se)}}function fc(_,r,a,d,p,y,w){const C=_.context,k=C.gl,P="fill-extrusion-pattern",R=a.paint.get(P),D=R.constantOr(1),U=a.getCrossfadeParameters(),J=a.paint.get("fill-extrusion-opacity"),te=R.constantOr(null);for(const ae of d){const ue=r.getTile(ae),he=ue.getBucket(a);if(!he)continue;const me=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae),ie=he.programConfigurations.get(a.id),xe=_.useProgram(D?"fillExtrusionPattern":"fillExtrusion",ie);D&&(_.context.activeTexture.set(k.TEXTURE0),ue.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ie.updatePaintBuffers(U)),oa(ie,P,te,ue,a);const Se=_.translatePosMatrix(ae.posMatrix,ue,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Pe=a.paint.get("fill-extrusion-vertical-gradient"),Ve=D?ic(Se,_,Pe,J,ae,U,ue):il(Se,_,Pe,J);xe.draw(C,C.gl.TRIANGLES,p,y,w,Ir.backCCW,Ve,me,a.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,a.paint,_.transform.zoom,ie,_.style.map.terrain&&he.centroidVertexBuffer)}}function sa(_,r,a,d,p,y,w){const C=_.context,k=C.gl,P=a.fbo;if(!P)return;const R=_.useProgram("hillshade"),D=_.style.map.terrain&&_.style.map.terrain.getTerrainData(r);C.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,P.colorAttachment.get()),R.draw(C,k.TRIANGLES,p,y,w,Ir.disabled,((U,J,te,ae)=>{const ue=te.paint.get("hillshade-shadow-color"),he=te.paint.get("hillshade-highlight-color"),me=te.paint.get("hillshade-accent-color");let ie=te.paint.get("hillshade-illumination-direction")*(Math.PI/180);te.paint.get("hillshade-illumination-anchor")==="viewport"&&(ie-=U.transform.angle);const xe=!U.options.moving;return{u_matrix:ae?ae.posMatrix:U.transform.calculatePosMatrix(J.tileID.toUnwrapped(),xe),u_image:0,u_latrange:sc(0,J.tileID),u_light:[te.paint.get("hillshade-exaggeration"),ie],u_shadow:ue,u_highlight:he,u_accent:me}})(_,a,d,D?r:null),D,d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function aa(_,r,a,d,p,y){const w=_.context,C=w.gl,k=r.dem;if(k&&k.data){const P=k.dim,R=k.stride,D=k.getPixels();if(w.activeTexture.set(C.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||_.getTileTexture(R),r.demTexture){const J=r.demTexture;J.update(D,{premultiply:!1}),J.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else r.demTexture=new De(w,D,C.RGBA,{premultiply:!1}),r.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);w.activeTexture.set(C.TEXTURE0);let U=r.fbo;if(!U){const J=new De(w,{width:P,height:P,data:null},C.RGBA);J.bind(C.LINEAR,C.CLAMP_TO_EDGE),U=r.fbo=w.createFramebuffer(P,P,!0,!1),U.colorAttachment.set(J.texture)}w.bindFramebuffer.set(U.framebuffer),w.viewport.set([0,0,P,P]),_.useProgram("hillshadePrepare").draw(w,C.TRIANGLES,d,p,y,Ir.disabled,((J,te)=>{const ae=te.stride,ue=u.H();return u.aP(ue,0,u.X,-u.X,0,0,1),u.J(ue,ue,[0,-u.X,0]),{u_matrix:ue,u_image:1,u_dimension:[ae,ae],u_zoom:J.overscaledZ,u_unpack:te.getUnpackVector()}})(r.tileID,k),null,a.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Np(_,r,a,d,p,y){const w=d.paint.get("raster-fade-duration");if(!y&&w>0){const C=L.now(),k=(C-_.timeAdded)/w,P=r?(C-r.timeAdded)/w:-1,R=a.getSource(),D=p.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),U=!r||Math.abs(r.tileID.overscaledZ-D)>Math.abs(_.tileID.overscaledZ-D),J=U&&_.refreshedUponExpiration?1:u.ac(U?k:1-P,0,1);return _.refreshedUponExpiration&&k>=1&&(_.refreshedUponExpiration=!1),r?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}const gd=new u.aM(1,0,0,1),gr=new u.aM(0,1,0,1),mc=new u.aM(0,0,1,1),dy=new u.aM(1,0,1,1),jp=new u.aM(0,1,1,1);function la(_,r,a,d){gc(_,0,r+a/2,_.transform.width,a,d)}function Vp(_,r,a,d){gc(_,r-a/2,0,a,_.transform.height,d)}function gc(_,r,a,d,p,y){const w=_.context,C=w.gl;C.enable(C.SCISSOR_TEST),C.scissor(r*_.pixelRatio,a*_.pixelRatio,d*_.pixelRatio,p*_.pixelRatio),w.clear({color:y}),C.disable(C.SCISSOR_TEST)}function Up(_,r,a){const d=_.context,p=d.gl,y=a.posMatrix,w=_.useProgram("debug"),C=Qt.disabled,k=Rr.disabled,P=_.colorModeForRenderPass(),R="$debug",D=_.style.map.terrain&&_.style.map.terrain.getTerrainData(a);d.activeTexture.set(p.TEXTURE0);const U=r.getTileByID(a.key).latestRawTileData,J=Math.floor((U&&U.byteLength||0)/1024),te=r.getTile(a).tileSize,ae=512/Math.min(te,512)*(a.overscaledZ/_.transform.zoom)*.5;let ue=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(ue+=` => ${a.overscaledZ}`),function(he,me){he.initDebugOverlayCanvas();const ie=he.debugOverlayCanvas,xe=he.context.gl,Se=he.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,ie.width,ie.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(me,5,5),Se.strokeText(me,5,5),he.debugOverlayTexture.update(ie),he.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(_,`${ue} ${J}kB`),w.draw(d,p.TRIANGLES,C,k,Qr.alphaBlended,Ir.disabled,ol(y,u.aM.transparent,ae),null,R,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),w.draw(d,p.LINE_STRIP,C,k,P,Ir.disabled,ol(y,u.aM.red),D,R,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Wp(_,r,a){const d=_.context,p=d.gl,y=_.colorModeForRenderPass(),w=new Qt(p.LEQUAL,Qt.ReadWrite,_.depthRangeFor3D),C=_.useProgram("terrain"),k=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,_.width,_.height]);for(const P of a){const R=_.renderToTexture.getTexture(P),D=r.getTerrainData(P.tileID);d.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,R.texture);const U=_.transform.calculatePosMatrix(P.tileID.toUnwrapped()),J=r.getMeshFrameDelta(_.transform.zoom),te=_.transform.calculateFogMatrix(P.tileID.toUnwrapped()),ae=Qu(U,J,te,_.style.sky,_.transform.pitch);C.draw(d,p.TRIANGLES,w,Rr.disabled,y,Ir.backCCW,ae,D,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class yc{constructor(r,a,d){this.vertexBuffer=r,this.indexBuffer=a,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class _c{constructor(r,a){this.context=new uy(r),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Pt.maxUnderzooming+Pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yu}resize(r,a,d){if(this.width=Math.floor(r*d),this.height=Math.floor(a*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const r=this.context,a=new u.aX;a.emplaceBack(0,0),a.emplaceBack(u.X,0),a.emplaceBack(0,u.X),a.emplaceBack(u.X,u.X),this.tileExtentBuffer=r.createVertexBuffer(a,ws.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const d=new u.aX;d.emplaceBack(0,0),d.emplaceBack(u.X,0),d.emplaceBack(0,u.X),d.emplaceBack(u.X,u.X),this.debugBuffer=r.createVertexBuffer(d,ws.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const p=new u.$;p.emplaceBack(0,0,0,0),p.emplaceBack(u.X,0,u.X,0),p.emplaceBack(0,u.X,0,u.X),p.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=r.createVertexBuffer(p,xt.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const y=new u.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(y,ws.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const w=new u.aZ;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(w);const C=new u.aY;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(C);const k=this.context.gl;this.stencilClearMode=new Rr({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const r=this.context,a=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=u.H();u.aP(d,0,this.width,this.height,0,0,1),u.K(d,d,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,a.TRIANGLES,Qt.disabled,this.stencilClearMode,Qr.disabled,Ir.disabled,ai(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,a){if(this.currentStencilSource===r.source||!r.isTileClipped()||!a||!a.length)return;this.currentStencilSource=r.source;const d=this.context,p=d.gl;this.nextStencilID+a.length>256&&this.clearStencil(),d.setColorMode(Qr.disabled),d.setDepthMode(Qt.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of a){const C=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);y.draw(d,p.TRIANGLES,Qt.disabled,new Rr({func:p.ALWAYS,mask:0},C,255,p.KEEP,p.KEEP,p.REPLACE),Qr.disabled,Ir.disabled,ai(w.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,a=this.context.gl;return new Rr({func:a.NOTEQUAL,mask:255},r,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(r){const a=this.context.gl;return new Rr({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(r){const a=this.context.gl,d=r.sort((w,C)=>C.overscaledZ-w.overscaledZ),p=d[d.length-1].overscaledZ,y=d[0].overscaledZ-p+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const w={};for(let C=0;C<y;C++)w[C+p]=new Rr({func:a.GEQUAL,mask:255},C+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=y,[w,d]}return[{[p]:Rr.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Qr([r.CONSTANT_COLOR,r.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Qr.unblended:Qr.alphaBlended}depthModeForSublayer(r,a,d){if(!this.opaquePassEnabledForLayer())return Qt.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Qt(d||this.context.gl.LEQUAL,a,[p,p])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,a){this.style=r,this.options=a,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(L.now()),this.imageManager.beginFrame();const d=this.style._order,p=this.style.sourceCaches,y={},w={},C={};for(const k in p){const P=p[k];P.used&&P.prepare(this.context),y[k]=P.getVisibleCoordinates(),w[k]=y[k].slice().reverse(),C[k]=P.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let k=0;k<d.length;k++)if(this.style._layers[d[k]].is3D()){this.opaquePassCutoff=k;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const k of d){const P=this.style._layers[k];if(!P.hasOffscreenPass()||P.isHidden(this.transform.zoom))continue;const R=w[P.source];(P.type==="custom"||R.length)&&this.renderLayer(this,p[P.source],P,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(k,P){const R=k.context,D=R.gl,U=((he,me,ie)=>({u_sky_color:he.properties.get("sky-color"),u_horizon_color:he.properties.get("horizon-color"),u_horizon:(me.height/2+me.getHorizon())*ie,u_sky_horizon_blend:he.properties.get("sky-horizon-blend")*me.height/2*ie}))(P,k.style.map.transform,k.pixelRatio),J=new Qt(D.LEQUAL,Qt.ReadWrite,[0,1]),te=Rr.disabled,ae=k.colorModeForRenderPass(),ue=k.useProgram("sky");if(!P.mesh){const he=new u.aX;he.emplaceBack(-1,-1),he.emplaceBack(1,-1),he.emplaceBack(1,1),he.emplaceBack(-1,1);const me=new u.aY;me.emplaceBack(0,1,2),me.emplaceBack(0,2,3),P.mesh=new yc(R.createVertexBuffer(he,ws.members),R.createIndexBuffer(me),u.a0.simpleSegment(0,0,he.length,me.length))}ue.draw(R,D.TRIANGLES,J,te,ae,Ir.disabled,U,void 0,"sky",P.mesh.vertexBuffer,P.mesh.indexBuffer,P.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const k=this.style._layers[d[this.currentLayer]],P=p[k.source],R=y[k.source];this._renderTileClippingMasks(k,R),this.renderLayer(this,P,k,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const k=this.style._layers[d[this.currentLayer]],P=p[k.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(k))continue;const R=(k.type==="symbol"?C:w)[k.source];this._renderTileClippingMasks(k,y[k.source]),this.renderLayer(this,P,k,R)}if(this.options.showTileBoundaries){const k=function(P,R){let D=null;const U=Object.values(P._layers).flatMap(ue=>ue.source&&!ue.isHidden(R)?[P.sourceCaches[ue.source]]:[]),J=U.filter(ue=>ue.getSource().type==="vector"),te=U.filter(ue=>ue.getSource().type!=="vector"),ae=ue=>{(!D||D.getSource().maxzoom<ue.getSource().maxzoom)&&(D=ue)};return J.forEach(ue=>ae(ue)),D||te.forEach(ue=>ae(ue)),D}(this.style,this.transform.zoom);k&&function(P,R,D){for(let U=0;U<D.length;U++)Up(P,R,D[U])}(this,k,k.getVisibleCoordinates())}this.options.showPadding&&function(k){const P=k.transform.padding;la(k,k.transform.height-(P.top||0),3,gd),la(k,P.bottom||0,3,gr),Vp(k,P.left||0,3,mc),Vp(k,k.transform.width-(P.right||0),3,dy);const R=k.transform.centerPoint;(function(D,U,J,te){gc(D,U-1,J-10,2,20,te),gc(D,U-10,J-1,20,2,te)})(k,R.x,k.transform.height-R.y,jp)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=r?!u.a_(a,d):!u.a$(a,d)),p||(p=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),p&&(u.b0(a,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,w){const C=y.context,k=C.gl,P=Qr.unblended,R=new Qt(k.LEQUAL,Qt.ReadWrite,[0,1]),D=w.getTerrainMesh(),U=w.sourceCache.getRenderableTiles(),J=y.useProgram("terrainDepth");C.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1});for(const te of U){const ae=w.getTerrainData(te.tileID),ue={u_matrix:y.transform.calculatePosMatrix(te.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(y.transform.zoom)};J.draw(C,k.TRIANGLES,R,Rr.disabled,P,Ir.backCCW,ue,ae,"terrain",D.vertexBuffer,D.indexBuffer,D.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,w){const C=y.context,k=C.gl,P=Qr.unblended,R=new Qt(k.LEQUAL,Qt.ReadWrite,[0,1]),D=w.getTerrainMesh(),U=w.getCoordsTexture(),J=w.sourceCache.getRenderableTiles(),te=y.useProgram("terrainCoords");C.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:u.aM.transparent,depth:1}),w.coordsIndex=[];for(const ae of J){const ue=w.getTerrainData(ae.tileID);C.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,U.texture);const he={u_matrix:y.transform.calculatePosMatrix(ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(y.transform.zoom)};te.draw(C,k.TRIANGLES,R,Rr.disabled,P,Ir.backCCW,he,ue,"terrain",D.vertexBuffer,D.indexBuffer,D.segments),w.coordsIndex.push(ae.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(r,a,d,p){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(p||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(y,w,C,k,P){if(y.renderPass!=="translucent")return;const R=Rr.disabled,D=y.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(U,J,te,ae,ue,he,me,ie,xe){const Se=J.transform,Pe=bs(),Ve=ue==="map",Ye=he==="map";for(const it of U){const ut=ae.getTile(it),tt=ut.getBucket(te);if(!tt||!tt.text||!tt.text.segments.get().length)continue;const et=u.ag(tt.textSizeData,Se.zoom),mt=rr(ut,1,J.transform.zoom),Ot=Tt(it.posMatrix,Ye,Ve,J.transform,mt),rt=te.layout.get("icon-text-fit")!=="none"&&tt.hasIconData();if(et){const lt=Math.pow(2,Se.zoom-ut.tileID.overscaledZ),Lt=J.style.map.terrain?(qt,nr)=>J.style.map.terrain.getElevation(it,qt,nr):null,Vr=Pe.translatePosition(Se,ut,me,ie);ia(tt,Ve,Ye,xe,Se,Ot,it.posMatrix,lt,et,rt,Pe,Vr,it.toUnwrapped(),Lt)}}}(k,y,C,w,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),P),C.paint.get("icon-opacity").constantOr(1)!==0&&pd(y,w,C,k,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),R,D),C.paint.get("text-opacity").constantOr(1)!==0&&pd(y,w,C,k,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),R,D),w.map.showCollisionBoxes&&(ll(y,w,C,k,!0),ll(y,w,C,k,!1))})(r,a,d,p,this.style.placement.variableOffsets);break;case"circle":(function(y,w,C,k){if(y.renderPass!=="translucent")return;const P=C.paint.get("circle-opacity"),R=C.paint.get("circle-stroke-width"),D=C.paint.get("circle-stroke-opacity"),U=!C.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(R.constantOr(1)===0||D.constantOr(1)===0))return;const J=y.context,te=J.gl,ae=y.depthModeForSublayer(0,Qt.ReadOnly),ue=Rr.disabled,he=y.colorModeForRenderPass(),me=[];for(let ie=0;ie<k.length;ie++){const xe=k[ie],Se=w.getTile(xe),Pe=Se.getBucket(C);if(!Pe)continue;const Ve=Pe.programConfigurations.get(C.id),Ye=y.useProgram("circle",Ve),it=Pe.layoutVertexBuffer,ut=Pe.indexBuffer,tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(xe),et={programConfiguration:Ve,program:Ye,layoutVertexBuffer:it,indexBuffer:ut,uniformValues:Yg(y,xe,Se,C),terrainData:tt};if(U){const mt=Pe.segments.get();for(const Ot of mt)me.push({segments:new u.a0([Ot]),sortKey:Ot.sortKey,state:et})}else me.push({segments:Pe.segments,sortKey:0,state:et})}U&&me.sort((ie,xe)=>ie.sortKey-xe.sortKey);for(const ie of me){const{programConfiguration:xe,program:Se,layoutVertexBuffer:Pe,indexBuffer:Ve,uniformValues:Ye,terrainData:it}=ie.state;Se.draw(J,te.TRIANGLES,ae,ue,he,Ir.disabled,Ye,it,C.id,Pe,Ve,ie.segments,C.paint,y.transform.zoom,xe)}})(r,a,d,p);break;case"heatmap":(function(y,w,C,k){if(C.paint.get("heatmap-opacity")===0)return;const P=y.context;if(y.style.map.terrain){for(const R of k){const D=w.getTile(R);w.hasRenderableParent(R)||(y.renderPass==="offscreen"?md(y,D,C,R):y.renderPass==="translucent"&&Ps(y,C,R))}P.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(R,D,U,J){const te=R.context,ae=te.gl,ue=Rr.disabled,he=new Qr([ae.ONE,ae.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(me,ie,xe){const Se=me.gl;me.activeTexture.set(Se.TEXTURE1),me.viewport.set([0,0,ie.width/4,ie.height/4]);let Pe=xe.heatmapFbos.get(u.aU);Pe?(Se.bindTexture(Se.TEXTURE_2D,Pe.colorAttachment.get()),me.bindFramebuffer.set(Pe.framebuffer)):(Pe=ul(me,ie.width/4,ie.height/4),xe.heatmapFbos.set(u.aU,Pe))})(te,R,U),te.clear({color:u.aM.transparent});for(let me=0;me<J.length;me++){const ie=J[me];if(D.hasRenderableParent(ie))continue;const xe=D.getTile(ie),Se=xe.getBucket(U);if(!Se)continue;const Pe=Se.programConfigurations.get(U.id),Ve=R.useProgram("heatmap",Pe),{zoom:Ye}=R.transform;Ve.draw(te,ae.TRIANGLES,Qt.disabled,ue,he,Ir.disabled,li(ie.posMatrix,xe,Ye,U.paint.get("heatmap-intensity")),null,U.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,U.paint,R.transform.zoom,Pe)}te.viewport.set([0,0,R.width,R.height])}(y,w,C,k):y.renderPass==="translucent"&&function(R,D){const U=R.context,J=U.gl;U.setColorMode(R.colorModeForRenderPass());const te=D.heatmapFbos.get(u.aU);te&&(U.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,te.colorAttachment.get()),U.activeTexture.set(J.TEXTURE1),dl(U,D).bind(J.LINEAR,J.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(U,J.TRIANGLES,Qt.disabled,Rr.disabled,R.colorModeForRenderPass(),Ir.disabled,oc(R,D,0,1),null,D.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,D.paint,R.transform.zoom))}(y,C)})(r,a,d,p);break;case"line":(function(y,w,C,k){if(y.renderPass!=="translucent")return;const P=C.paint.get("line-opacity"),R=C.paint.get("line-width");if(P.constantOr(1)===0||R.constantOr(1)===0)return;const D=y.depthModeForSublayer(0,Qt.ReadOnly),U=y.colorModeForRenderPass(),J=C.paint.get("line-dasharray"),te=C.paint.get("line-pattern"),ae=te.constantOr(1),ue=C.paint.get("line-gradient"),he=C.getCrossfadeParameters(),me=ae?"linePattern":J?"lineSDF":ue?"lineGradient":"line",ie=y.context,xe=ie.gl;let Se=!0;for(const Pe of k){const Ve=w.getTile(Pe);if(ae&&!Ve.patternsLoaded())continue;const Ye=Ve.getBucket(C);if(!Ye)continue;const it=Ye.programConfigurations.get(C.id),ut=y.context.program.get(),tt=y.useProgram(me,it),et=Se||tt.program!==ut,mt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Pe),Ot=te.constantOr(null);if(Ot&&Ve.imageAtlas){const Lt=Ve.imageAtlas,Vr=Lt.patternPositions[Ot.to.toString()],qt=Lt.patternPositions[Ot.from.toString()];Vr&&qt&&it.setConstantPatternPositions(Vr,qt)}const rt=mt?Pe:null,lt=ae?ra(y,Ve,C,he,rt):J?Jg(y,Ve,C,J,he,rt):ue?Cp(y,Ve,C,Ye.lineClipsArray.length,rt):ac(y,Ve,C,rt);if(ae)ie.activeTexture.set(xe.TEXTURE0),Ve.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),it.updatePaintBuffers(he);else if(J&&(et||y.lineAtlas.dirty))ie.activeTexture.set(xe.TEXTURE0),y.lineAtlas.bind(ie);else if(ue){const Lt=Ye.gradients[C.id];let Vr=Lt.texture;if(C.gradientVersion!==Lt.version){let qt=256;if(C.stepInterpolant){const nr=w.getSource().maxzoom,Ur=Pe.canonical.z===nr?Math.ceil(1<<y.transform.maxZoom-Pe.canonical.z):1;qt=u.ac(u.aV(Ye.maxLineLength/u.X*1024*Ur),256,ie.maxTextureSize)}Lt.gradient=u.aW({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:qt,image:Lt.gradient||void 0,clips:Ye.lineClipsArray}),Lt.texture?Lt.texture.update(Lt.gradient):Lt.texture=new De(ie,Lt.gradient,xe.RGBA),Lt.version=C.gradientVersion,Vr=Lt.texture}ie.activeTexture.set(xe.TEXTURE0),Vr.bind(C.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}tt.draw(ie,xe.TRIANGLES,D,y.stencilModeForClipping(Pe),U,Ir.disabled,lt,mt,C.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,C.paint,y.transform.zoom,it,Ye.layoutVertexBuffer2),Se=!1}})(r,a,d,p);break;case"fill":(function(y,w,C,k){const P=C.paint.get("fill-color"),R=C.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const D=y.colorModeForRenderPass(),U=C.paint.get("fill-pattern"),J=y.opaquePassEnabledForLayer()&&!U.constantOr(1)&&P.constantOr(u.aM.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===J){const te=y.depthModeForSublayer(1,y.renderPass==="opaque"?Qt.ReadWrite:Qt.ReadOnly);hl(y,w,C,k,te,D,!1)}if(y.renderPass==="translucent"&&C.paint.get("fill-antialias")){const te=y.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,Qt.ReadOnly);hl(y,w,C,k,te,D,!0)}})(r,a,d,p);break;case"fill-extrusion":(function(y,w,C,k){const P=C.paint.get("fill-extrusion-opacity");if(P!==0&&y.renderPass==="translucent"){const R=new Qt(y.context.gl.LEQUAL,Qt.ReadWrite,y.depthRangeFor3D);if(P!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))fc(y,w,C,k,R,Rr.disabled,Qr.disabled),fc(y,w,C,k,R,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const D=y.colorModeForRenderPass();fc(y,w,C,k,R,Rr.disabled,D)}}})(r,a,d,p);break;case"hillshade":(function(y,w,C,k){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const P=y.context,R=y.depthModeForSublayer(0,Qt.ReadOnly),D=y.colorModeForRenderPass(),[U,J]=y.renderPass==="translucent"?y.stencilConfigForOverlap(k):[{},k];for(const te of J){const ae=w.getTile(te);ae.needsHillshadePrepare!==void 0&&ae.needsHillshadePrepare&&y.renderPass==="offscreen"?aa(y,ae,C,R,Rr.disabled,D):y.renderPass==="translucent"&&sa(y,te,ae,C,R,U[te.overscaledZ],D)}P.viewport.set([0,0,y.width,y.height])})(r,a,d,p);break;case"raster":(function(y,w,C,k){if(y.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!k.length)return;const P=y.context,R=P.gl,D=w.getSource(),U=y.useProgram("raster"),J=y.colorModeForRenderPass(),[te,ae]=D instanceof _n?[{},k]:y.stencilConfigForOverlap(k),ue=ae[ae.length-1].overscaledZ,he=!y.options.moving;for(const me of ae){const ie=y.depthModeForSublayer(me.overscaledZ-ue,C.paint.get("raster-opacity")===1?Qt.ReadWrite:Qt.ReadOnly,R.LESS),xe=w.getTile(me);xe.registerFadeDuration(C.paint.get("raster-fade-duration"));const Se=w.findLoadedParent(me,0),Pe=w.findLoadedSibling(me),Ve=Np(xe,Se||Pe||null,w,C,y.transform,y.style.map.terrain);let Ye,it;const ut=C.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;P.activeTexture.set(R.TEXTURE0),xe.texture.bind(ut,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(R.TEXTURE1),Se?(Se.texture.bind(ut,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Ye=Math.pow(2,Se.tileID.overscaledZ-xe.tileID.overscaledZ),it=[xe.tileID.canonical.x*Ye%1,xe.tileID.canonical.y*Ye%1]):xe.texture.bind(ut,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),xe.texture.useMipmap&&P.extTextureFilterAnisotropic&&y.transform.pitch>20&&R.texParameterf(R.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax);const tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(me),et=tt?me:null,mt=et?et.posMatrix:y.transform.calculatePosMatrix(me.toUnwrapped(),he),Ot=Qg(mt,it||[0,0],Ye||1,Ve,C);D instanceof _n?U.draw(P,R.TRIANGLES,ie,Rr.disabled,J,Ir.disabled,Ot,tt,C.id,D.boundsBuffer,y.quadTriangleIndexBuffer,D.boundsSegments):U.draw(P,R.TRIANGLES,ie,te[me.overscaledZ],J,Ir.disabled,Ot,tt,C.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(r,a,d,p);break;case"background":(function(y,w,C,k){const P=C.paint.get("background-color"),R=C.paint.get("background-opacity");if(R===0)return;const D=y.context,U=D.gl,J=y.transform,te=J.tileSize,ae=C.paint.get("background-pattern");if(y.isPatternMissing(ae))return;const ue=!ae&&P.a===1&&R===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ue)return;const he=Rr.disabled,me=y.depthModeForSublayer(0,ue==="opaque"?Qt.ReadWrite:Qt.ReadOnly),ie=y.colorModeForRenderPass(),xe=y.useProgram(ae?"backgroundPattern":"background"),Se=k||J.coveringTiles({tileSize:te,terrain:y.style.map.terrain});ae&&(D.activeTexture.set(U.TEXTURE0),y.imageManager.bind(y.context));const Pe=C.getCrossfadeParameters();for(const Ve of Se){const Ye=k?Ve.posMatrix:y.transform.calculatePosMatrix(Ve.toUnwrapped()),it=ae?rd(Ye,R,y,ae,{tileID:Ve,tileSize:te},Pe):lc(Ye,R,P),ut=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ve);xe.draw(D,U.TRIANGLES,me,he,ie,Ir.disabled,it,ut,C.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(r,0,d,p);break;case"custom":(function(y,w,C){const k=y.context,P=C.implementation;if(y.renderPass==="offscreen"){const R=P.prerender;R&&(y.setCustomLayerDefaults(),k.setColorMode(y.colorModeForRenderPass()),R.call(P,k.gl,y.transform.customLayerMatrix()),k.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),k.setColorMode(y.colorModeForRenderPass()),k.setStencilMode(Rr.disabled);const R=P.renderingMode==="3d"?new Qt(y.context.gl.LEQUAL,Qt.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Qt.ReadOnly);k.setDepthMode(R),P.render(k.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),k.setDirty(),y.setBaseState(),k.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,a,d,p,y){if(!d[0]&&!d[1])return r;const w=y?p==="map"?this.transform.angle:0:p==="viewport"?-this.transform.angle:0;if(w){const P=Math.sin(w),R=Math.cos(w);d=[d[0]*R-d[1]*P,d[0]*P+d[1]*R]}const C=[y?d[0]:rr(a,d[0],this.transform.zoom),y?d[1]:rr(a,d[1],this.transform.zoom),0],k=new Float32Array(16);return u.J(k,r,C),k}saveTileTexture(r){const a=this._tileTextures[r.size[0]];a?a.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const a=this._tileTextures[r];return a&&a.length>0?a.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const a=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!a||!d}useProgram(r,a){this.cache=this.cache||{};const d=r+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new ed(this.context,Qo[r],a,nd[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new De(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:a}=this.context.gl;return this.width!==r||this.height!==a}}class ca{constructor(r,a){this.points=r,this.planes=a}static fromInvProjectionMatrix(r,a,d){const p=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const k=1/(C=u.af([],C,r))[3]/a*p;return u.b1(C,C,[k,k,1/C[3],k])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const k=function(U,J){var te=J[0],ae=J[1],ue=J[2],he=te*te+ae*ae+ue*ue;return he>0&&(he=1/Math.sqrt(he)),U[0]=J[0]*he,U[1]=J[1]*he,U[2]=J[2]*he,U}([],function(U,J,te){var ae=J[0],ue=J[1],he=J[2],me=te[0],ie=te[1],xe=te[2];return U[0]=ue*xe-he*ie,U[1]=he*me-ae*xe,U[2]=ae*ie-ue*me,U}([],_e([],y[C[0]],y[C[1]]),_e([],y[C[2]],y[C[1]]))),P=-((R=k)[0]*(D=y[C[1]])[0]+R[1]*D[1]+R[2]*D[2]);var R,D;return k.concat(P)});return new ca(y,w)}}class ua{constructor(r,a){this.min=r,this.max=a,this.center=function(d,p,y){return d[0]=.5*p[0],d[1]=.5*p[1],d[2]=.5*p[2],d}([],function(d,p,y){return d[0]=p[0]+y[0],d[1]=p[1]+y[1],d[2]=p[2]+y[2],d}([],this.min,this.max))}quadrant(r){const a=[r%2==0,r<2],d=pe(this.min),p=pe(this.max);for(let y=0;y<a.length;y++)d[y]=a[y]?this.min[y]:this.center[y],p[y]=a[y]?this.center[y]:this.max[y];return p[2]=this.max[2],new ua(d,p)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let p=0;p<r.planes.length;p++){const y=r.planes[p];let w=0;for(let C=0;C<a.length;C++)u.b2(y,a[C])>=0&&w++;if(w===0)return 0;w!==a.length&&(d=!1)}if(d)return 2;for(let p=0;p<3;p++){let y=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let C=0;C<r.points.length;C++){const k=r.points[C][p]-this.min[p];y=Math.min(y,k),w=Math.max(w,k)}if(w<0||y>this.max[p]-this.min[p])return 0}return 1}}class da{constructor(r=0,a=0,d=0,p=0){if(isNaN(r)||r<0||isNaN(a)||a<0||isNaN(d)||d<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=a,this.left=d,this.right=p}interpolate(r,a,d){return a.top!=null&&r.top!=null&&(this.top=u.y.number(r.top,a.top,d)),a.bottom!=null&&r.bottom!=null&&(this.bottom=u.y.number(r.bottom,a.bottom,d)),a.left!=null&&r.left!=null&&(this.left=u.y.number(r.left,a.left,d)),a.right!=null&&r.right!=null&&(this.right=u.y.number(r.right,a.right,d)),this}getCenter(r,a){const d=u.ac((this.left+r-this.right)/2,0,r),p=u.ac((this.top+a-this.bottom)/2,0,a);return new u.P(d,p)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new da(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const yd=85.051129;class ha{constructor(r,a,d,p,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=r||0,this._maxZoom=a||22,this._minPitch=d??0,this._maxPitch=p??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new da,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new ha(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const a=-u.b3(r,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var d=new u.A(4);return u.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,p,y){var w=p[0],C=p[1],k=p[2],P=p[3],R=Math.sin(y),D=Math.cos(y);d[0]=w*D+k*R,d[1]=C*D+P*R,d[2]=w*-R+k*D,d[3]=C*-R+P*D}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const a=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const a=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,a,d){this._unmodified=!1,this._edgeInsets.interpolate(r,a,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const a=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(r){const a=[new u.b4(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new u.P(0,0)),p=this.pointCoordinate(new u.P(this.width,0)),y=this.pointCoordinate(new u.P(this.width,this.height)),w=this.pointCoordinate(new u.P(0,this.height)),C=Math.floor(Math.min(d.x,p.x,y.x,w.x)),k=Math.floor(Math.max(d.x,p.x,y.x,w.x)),P=1;for(let R=C-P;R<=k+P;R++)R!==0&&a.push(new u.b4(R,r))}return a}coveringTiles(r){var a,d;let p=this.coveringZoomLevel(r);const y=p;if(r.minzoom!==void 0&&p<r.minzoom)return[];r.maxzoom!==void 0&&p>r.maxzoom&&(p=r.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),C=u.Z.fromLngLat(this.center),k=Math.pow(2,p),P=[k*w.x,k*w.y,0],R=[k*C.x,k*C.y,0],D=ca.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,p);let U=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(U=p);const J=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,te=ie=>({aabb:new ua([ie*k,0,0],[(ie+1)*k,k,0]),zoom:0,x:0,y:0,wrap:ie,fullyVisible:!1}),ae=[],ue=[],he=p,me=r.reparseOverscaled?y:p;if(this._renderWorldCopies)for(let ie=1;ie<=3;ie++)ae.push(te(-ie)),ae.push(te(ie));for(ae.push(te(0));ae.length>0;){const ie=ae.pop(),xe=ie.x,Se=ie.y;let Pe=ie.fullyVisible;if(!Pe){const tt=ie.aabb.intersects(D);if(tt===0)continue;Pe=tt===2}const Ve=r.terrain?P:R,Ye=ie.aabb.distanceX(Ve),it=ie.aabb.distanceY(Ve),ut=Math.max(Math.abs(Ye),Math.abs(it));if(ie.zoom===he||ut>J+(1<<he-ie.zoom)-2&&ie.zoom>=U){const tt=he-ie.zoom,et=P[0]-.5-(xe<<tt),mt=P[1]-.5-(Se<<tt);ue.push({tileID:new u.S(ie.zoom===he?me:ie.zoom,ie.wrap,ie.zoom,xe,Se),distanceSq:ge([R[0]-.5-xe,R[1]-.5-Se]),tileDistanceToCamera:Math.sqrt(et*et+mt*mt)})}else for(let tt=0;tt<4;tt++){const et=(xe<<1)+tt%2,mt=(Se<<1)+(tt>>1),Ot=ie.zoom+1;let rt=ie.aabb.quadrant(tt);if(r.terrain){const lt=new u.S(Ot,ie.wrap,Ot,et,mt),Lt=r.terrain.getMinMaxElevation(lt),Vr=(a=Lt.minElevation)!==null&&a!==void 0?a:this.elevation,qt=(d=Lt.maxElevation)!==null&&d!==void 0?d:this.elevation;rt=new ua([rt.min[0],rt.min[1],Vr],[rt.max[0],rt.max[1],qt])}ae.push({aabb:rt,zoom:Ot,x:et,y:mt,wrap:ie.wrap,fullyVisible:Pe})}}return ue.sort((ie,xe)=>ie.distanceSq-xe.distanceSq).map(ie=>ie.tileID)}resize(r,a){this.width=r,this.height=a,this.pixelsToGLUnits=[2/r,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const a=u.ac(r.lat,-85.051129,yd);return new u.P(u.O(r.lng)*this.worldSize,u.Q(a)*this.worldSize)}unproject(r){return new u.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const a=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,p=this.pointLocation(this.centerPoint,r),y=r.getElevationForLngLatZoom(p,this.tileZoom);if(!(this.elevation-y))return;const w=d+a-y,C=Math.cos(this._pitch)*this.cameraToCenterDistance/w/u.b5(1,p.lat),k=this.scaleZoom(C/this.tileSize);this._elevation=y,this._center=p,this.zoom=k}setLocationAtPoint(r,a){const d=this.pointCoordinate(a),p=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(r),w=new u.Z(y.x-(d.x-p.x),y.y-(d.y-p.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,a){return a?this.coordinatePoint(this.locationCoordinate(r),a.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,a){return this.coordinateLocation(this.pointCoordinate(r,a))}locationCoordinate(r){return u.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,a){if(a){const U=a.pointCoordinate(r);if(U!=null)return U}const d=[r.x,r.y,0,1],p=[r.x,r.y,1,1];u.af(d,d,this.pixelMatrixInverse),u.af(p,p,this.pixelMatrixInverse);const y=d[3],w=p[3],C=d[1]/y,k=p[1]/w,P=d[2]/y,R=p[2]/w,D=P===R?0:(0-P)/(R-P);return new u.Z(u.y.number(d[0]/y,p[0]/w,D)/this.worldSize,u.y.number(C,k,D)/this.worldSize)}coordinatePoint(r,a=0,d=this.pixelMatrix){const p=[r.x*this.worldSize,r.y*this.worldSize,a,1];return u.af(p,p,d),new u.P(p[0]/p[3],p[1]/p[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new ze().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ze([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,yd])}calculateTileMatrix(r){const a=r.canonical,d=this.worldSize/this.zoomScale(a.z),p=a.x+Math.pow(2,a.z)*r.wrap,y=u.an(new Float64Array(16));return u.J(y,y,[p*d,a.y*d,0]),u.K(y,y,[d/u.X,d/u.X,1]),y}calculatePosMatrix(r,a=!1){const d=r.key,p=a?this._alignedPosMatrixCache:this._posMatrixCache;if(p[d])return p[d];const y=this.calculateTileMatrix(r);return u.L(y,a?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),p[d]=new Float32Array(y),p[d]}calculateFogMatrix(r){const a=r.key,d=this._fogMatrixCache;if(d[a])return d[a];const p=this.calculateTileMatrix(r);return u.L(p,this.fogMatrix,p),d[a]=new Float32Array(p),d[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,a){a=u.ac(+a,this.minZoom,this.maxZoom);const d={center:new u.N(r.lng,r.lat),zoom:a};let p=this.lngRange;if(!this._renderWorldCopies&&p===null){const ie=179.9999999999;p=[-ie,ie]}const y=this.tileSize*this.zoomScale(d.zoom);let w=0,C=y,k=0,P=y,R=0,D=0;const{x:U,y:J}=this.size;if(this.latRange){const ie=this.latRange;w=u.Q(ie[1])*y,C=u.Q(ie[0])*y,C-w<J&&(R=J/(C-w))}p&&(k=u.b3(u.O(p[0])*y,0,y),P=u.b3(u.O(p[1])*y,0,y),P<k&&(P+=y),P-k<U&&(D=U/(P-k)));const{x:te,y:ae}=this.project.call({worldSize:y},r);let ue,he;const me=Math.max(D||0,R||0);if(me){const ie=new u.P(D?(P+k)/2:te,R?(C+w)/2:ae);return d.center=this.unproject.call({worldSize:y},ie).wrap(),d.zoom+=this.scaleZoom(me),d}if(this.latRange){const ie=J/2;ae-ie<w&&(he=w+ie),ae+ie>C&&(he=C-ie)}if(p){const ie=(k+P)/2;let xe=te;this._renderWorldCopies&&(xe=u.b3(te,ie-y/2,ie+y/2));const Se=U/2;xe-Se<k&&(ue=k+Se),xe+Se>P&&(ue=P-Se)}if(ue!==void 0||he!==void 0){const ie=new u.P(ue??te,he??ae);d.center=this.unproject.call({worldSize:y},ie).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:a,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=d,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,a=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let p=u.an(new Float64Array(16));u.K(p,p,[this.width/2,-this.height/2,1]),u.J(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=u.an(new Float64Array(16)),u.K(p,p,[1,-1,1]),u.J(p,p,[-1,-1,0]),u.K(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),C=y-w*this._pixelPerMeter/Math.cos(this._pitch),k=w<0?C:y,P=Math.PI/2+this._pitch,R=this._fov*(.5+r.y/this.height),D=Math.sin(R)*k/Math.sin(u.ac(Math.PI-P-R,.01,Math.PI-.01)),U=this.getHorizon(),J=2*Math.atan(U/this.cameraToCenterDistance)*(.5+r.y/(2*U)),te=Math.sin(J)*k/Math.sin(u.ac(Math.PI-P-J,.01,Math.PI-.01)),ae=Math.min(D,te);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+k),this.nearZ=this.height/50,p=new Float64Array(16),u.b6(p,this._fov,this.width/this.height,this.nearZ,this.farZ),p[8]=2*-r.x/this.width,p[9]=2*r.y/this.height,this.projectionMatrix=u.ae(p),u.K(p,p,[1,-1,1]),u.J(p,p,[0,0,-this.cameraToCenterDistance]),u.b7(p,p,this._pitch),u.ad(p,p,this.angle),u.J(p,p,[-a,-d,0]),this.mercatorMatrix=u.K([],p,[this.worldSize,this.worldSize,this.worldSize]),u.K(p,p,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,p),u.J(p,p,[0,0,-this.elevation]),this.modelViewProjectionMatrix=p,this.invModelViewProjectionMatrix=u.as([],p),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-a,-d,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,p);const ue=this.width%2/2,he=this.height%2/2,me=Math.cos(this.angle),ie=Math.sin(this.angle),xe=a-Math.round(a)+me*ue+ie*he,Se=d-Math.round(d)+me*he+ie*ue,Pe=new Float64Array(p);if(u.J(Pe,Pe,[xe>.5?xe-1:xe,Se>.5?Se-1:Se,0]),this.alignedModelViewProjectionMatrix=Pe,p=u.as(new Float64Array(16),this.pixelMatrix),!p)throw new Error("failed to invert matrix");this.pixelMatrixInverse=p,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),a=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const a=this.getCameraPoint();if(r.length===1)return[r[0],a];{let d=a.x,p=a.y,y=a.x,w=a.y;for(const C of r)d=Math.min(d,C.x),p=Math.min(p,C.y),y=Math.max(y,C.x),w=Math.max(w,C.y);return[new u.P(d,p),new u.P(y,p),new u.P(y,w),new u.P(d,w),new u.P(d,p)]}}lngLatToCameraDepth(r,a){const d=this.locationCoordinate(r),p=[d.x*this.worldSize,d.y*this.worldSize,a,1];return u.af(p,p,this.modelViewProjectionMatrix),p[2]/p[3]}}function pl(_,r){let a,d=!1,p=null,y=null;const w=()=>{p=null,d&&(_.apply(y,a),p=setTimeout(w,r),d=!1)};return(...C)=>(d=!0,y=this,a=C,p||w(),p)}class vc{constructor(r){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let d;return a.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(d=p)}),(d&&d[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(a.length>=3&&!a.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:d,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,a)},this._removeHash=()=>{const a=this._getCurrentHash();if(a.length===0)return;const d=a.join("/");let p=d;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${d}`);let y=window.location.hash.replace(p,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let w=window.location.href.replace(/(#.+)?$/,y);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=pl(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const a=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,p=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,p),w=Math.round(a.lng*y)/y,C=Math.round(a.lat*y)/y,k=this._map.getBearing(),P=this._map.getPitch();let R="";if(R+=r?`/${w}/${C}/${d}`:`${d}/${C}/${w}`,(k||P)&&(R+="/"+Math.round(10*k)/10),P&&(R+=`/${Math.round(P)}`),this._hashName){const D=this._hashName;let U=!1;const J=window.location.hash.slice(1).split("&").map(te=>{const ae=te.split("=")[0];return ae===D?(U=!0,`${ae}=${R}`):te}).filter(te=>te);return U||J.push(`${D}=${R}`),`#${J.join("&")}`}return`#${R}`}}const xc={linearity:.3,easing:u.b8(0,0,.3,1)},_d=u.e({deceleration:2500,maxSpeed:1400},xc),hy=u.e({deceleration:20,maxSpeed:1400},xc),Gp=u.e({deceleration:1e3,maxSpeed:360},xc),bc=u.e({deceleration:1e3,maxSpeed:90},xc);class vd{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:L.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,a=L.now();for(;r.length>0&&a-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)a.zoom+=y.zoomDelta||0,a.bearing+=y.bearingDelta||0,a.pitch+=y.pitchDelta||0,y.panDelta&&a.pan._add(y.panDelta),y.around&&(a.around=y.around),y.pinchAround&&(a.pinchAround=y.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(a.pan.mag()){const y=ml(a.pan.mag(),d,u.e({},_d,r||{}));p.offset=a.pan.mult(y.amount/a.pan.mag()),p.center=this._map.transform.center,fl(p,y)}if(a.zoom){const y=ml(a.zoom,d,hy);p.zoom=this._map.transform.zoom+y.amount,fl(p,y)}if(a.bearing){const y=ml(a.bearing,d,Gp);p.bearing=this._map.transform.bearing+u.ac(y.amount,-179,179),fl(p,y)}if(a.pitch){const y=ml(a.pitch,d,bc);p.pitch=this._map.transform.pitch+y.amount,fl(p,y)}if(p.zoom||p.bearing){const y=a.pinchAround===void 0?a.around:a.pinchAround;p.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(p,{noMoveStart:!0})}}function fl(_,r){(!_.duration||_.duration<r.duration)&&(_.duration=r.duration,_.easing=r.easing)}function ml(_,r,a){const{maxSpeed:d,linearity:p,deceleration:y}=a,w=u.ac(_*p/(r/1e3),-d,d),C=Math.abs(w)/(y*p);return{easing:a.easing,duration:1e3*C,amount:w*(C/2)}}class Fn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,a,d,p={}){const y=A.mousePos(a.getCanvas(),d),w=a.unproject(y);super(r,u.e({point:y,lngLat:w,originalEvent:d},p)),this._defaultPrevented=!1,this.target=a}}class Ms extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,a,d){const p=r==="touchend"?d.changedTouches:d.touches,y=A.touchPos(a.getCanvasContainer(),p),w=y.map(k=>a.unproject(k)),C=y.reduce((k,P,R,D)=>k.add(P.div(D.length)),new u.P(0,0));super(r,{points:y,point:C,lngLats:w,lngLat:a.unproject(C),originalEvent:d}),this._defaultPrevented=!1}}class Hp extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,a,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class qp{constructor(r,a){this._map=r,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Hp(r.type,this._map,r))}mousedown(r,a){return this._mousedownPos=a,this._firePreventable(new Fn(r.type,this._map,r))}mouseup(r){this._map.fire(new Fn(r.type,this._map,r))}click(r,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Fn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Fn(r.type,this._map,r))}mouseover(r){this._map.fire(new Fn(r.type,this._map,r))}mouseout(r){this._map.fire(new Fn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Ms(r.type,this._map,r))}touchmove(r){this._map.fire(new Ms(r.type,this._map,r))}touchend(r){this._map.fire(new Ms(r.type,this._map,r))}touchcancel(r){this._map.fire(new Ms(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class en{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Fn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Fn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ji{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Ci{constructor(r,a){this._map=r,this._tr=new Ji(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,a){this.isEnabled()&&r.shiftKey&&r.button===0&&(A.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(r,a){if(!this._active)return;const d=a;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=d,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const y=Math.min(p.x,d.x),w=Math.max(p.x,d.x),C=Math.min(p.y,d.y),k=Math.max(p.y,d.y);A.setTransform(this._box,`translate(${y}px,${C}px)`),this._box.style.width=w-y+"px",this._box.style.height=k-C+"px"}mouseupWindow(r,a){if(!this._active||r.button!==0)return;const d=this._startPos,p=a;if(this.reset(),A.suppressClick(),d.x!==p.x||d.y!==p.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(d,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,a){return this._map.fire(new u.k(r,{originalEvent:a}))}}function gl(_,r){if(_.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${r.length}`);const a={};for(let d=0;d<_.length;d++)a[_[d].identifier]=r[d];return a}class xd{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,a,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(p){const y=new u.P(0,0);for(const w of p)y._add(w);return y.div(p.length)}(a),this.touches=gl(d,a)))}touchmove(r,a,d){if(this.aborted||!this.centroid)return;const p=gl(d,a);for(const y in this.touches){const w=p[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(r,a,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class wc{constructor(r){this.singleTap=new xd(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,a,d){this.singleTap.touchstart(r,a,d)}touchmove(r,a,d){this.singleTap.touchmove(r,a,d)}touchend(r,a,d){const p=this.singleTap.touchend(r,a,d);if(p){const y=r.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(p)<30;if(y&&w||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class pa{constructor(r){this._tr=new Ji(r),this._zoomIn=new wc({numTouches:1,numTaps:2}),this._zoomOut=new wc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,a,d){this._zoomIn.touchstart(r,a,d),this._zoomOut.touchstart(r,a,d)}touchmove(r,a,d){this._zoomIn.touchmove(r,a,d),this._zoomOut.touchmove(r,a,d)}touchend(r,a,d){const p=this._zoomIn.touchend(r,a,d),y=this._zoomOut.touchend(r,a,d),w=this._tr;return p?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(p)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bo{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const a=this._moveFunction(...r);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(r,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,a){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const p=a.length?a[0]:a;return!this._moved&&p.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(d,p))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&A.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const bd={0:1,2:2};class Sc{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const a=A.mouseButton(r);this._eventButton=a}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(a,d){const p=bd[d];return a.buttons===void 0||(a.buttons&p)!==p}(r,this._eventButton)}isValidEndEvent(r){return A.mouseButton(r)===this._eventButton}}class wd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Cc=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=r=>{r.preventDefault()}},Sd=({enable:_,clickTolerance:r,bearingDegreesPerPixelMoved:a=.8})=>{const d=new Sc({checkCorrectEvent:p=>A.mouseButton(p)===0&&p.ctrlKey||A.mouseButton(p)===2});return new Bo({clickTolerance:r,move:(p,y)=>({bearingDelta:(y.x-p.x)*a}),moveStateManager:d,enable:_,assignEvents:Cc})},Cd=({enable:_,clickTolerance:r,pitchDegreesPerPixelMoved:a=-.5})=>{const d=new Sc({checkCorrectEvent:p=>A.mouseButton(p)===0&&p.ctrlKey||A.mouseButton(p)===2});return new Bo({clickTolerance:r,move:(p,y)=>({pitchDelta:(y.y-p.y)*a}),moveStateManager:d,enable:_,assignEvents:Cc})};class As{constructor(r,a){this._clickTolerance=r.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,a,d){return this._calculateTransform(r,a,d)}touchmove(r,a,d){if(this._active){if(!this._shouldBePrevented(d.length))return r.preventDefault(),this._calculateTransform(r,a,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,a,d){this._calculateTransform(r,a,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,a,d){d.length>0&&(this._active=!0);const p=gl(d,a),y=new u.P(0,0),w=new u.P(0,0);let C=0;for(const P in p){const R=p[P],D=this._touches[P];D&&(y._add(R),w._add(R.sub(D)),C++,p[P]=R)}if(this._touches=p,this._shouldBePrevented(C)||!w.mag())return;const k=w.div(C);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(C),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,a,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([a[0],a[1]]))}touchmove(r,a,d){if(!this._firstTwoTouches)return;r.preventDefault();const[p,y]=this._firstTwoTouches,w=yl(d,a,p),C=yl(d,a,y);if(!w||!C)return;const k=this._aroundCenter?null:w.add(C).div(2);return this._move([w,C],k,r)}touchend(r,a,d){if(!this._firstTwoTouches)return;const[p,y]=this._firstTwoTouches,w=yl(d,a,p),C=yl(d,a,y);w&&C||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function yl(_,r,a){for(let d=0;d<_.length;d++)if(_[d].identifier===a)return r[d]}function kd(_,r){return Math.log(_/r)/Math.LN2}class Td extends kc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,a){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(kd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:kd(this._distance,d),pinchAround:a}}}function Id(_,r){return 180*_.angleWith(r)/Math.PI}class Ed extends kc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,a,d){const p=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Id(this._vector,p),pinchAround:a}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const a=25/(Math.PI*this._minDiameter)*360,d=Id(r,this._startVector);return Math.abs(d)<a}}function Tc(_){return Math.abs(_.y)>Math.abs(_.x)}class _l extends kc{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,a,d){super.touchstart(r,a,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Tc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,a,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,y,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(p.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(r,a,d){if(this._valid!==void 0)return this._valid;const p=r.mag()>=2,y=a.mag()>=2;if(!p&&!y)return;if(!p||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const w=r.y>0==a.y>0;return Tc(r)&&Tc(a)&&w}}const Zp={panStep:100,bearingStep:15,pitchStep:10};class Fi{constructor(r){this._tr=new Ji(r);const a=Zp;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let a=0,d=0,p=0,y=0,w=0;switch(r.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?p=1:(r.preventDefault(),w=-1);break;case 40:r.shiftKey?p=-1:(r.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(d=0,p=0),{cameraAnimation:C=>{const k=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:_o,zoom:a?Math.round(k.zoom)+a*(r.shiftKey?2:1):k.zoom,bearing:k.bearing+d*this._bearingStep,pitch:k.pitch+p*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:k.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function _o(_){return _*(2-_)}const Pd=4.000244140625;class Qi{constructor(r,a){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new Ji(r),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let a=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=L.now(),p=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,a!==0&&a%Pd==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(p*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),r.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=r,this._delta-=a,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=A.mousePos(this._map.getCanvas(),r),d=this._tr;this._around=a.y>d.transform.height/2-d.transform.getHorizon()?u.N.convert(this._aroundCenter?d.center:d.unproject(a)):u.N.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Pd?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&P!==0&&(P=1/P);const R=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(R*P))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,p=this._easing;let y,w=!1;const C=L.now()-this._lastWheelEventTime;if(this._type==="wheel"&&d&&p&&C){const k=Math.min(C/200,1),P=p(k);y=u.y.number(d,a,P),k<1?this._frameId||(this._frameId=!0):w=!0}else y=a,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let a=u.b9;if(this._prevEase){const d=this._prevEase,p=(L.now()-d.start)/d.duration,y=d.easing(p+.01)-d.easing(p),w=.27/Math.sqrt(y*y+1e-4)*.01,C=Math.sqrt(.0729-w*w);a=u.b8(w,C,.25,1)}return this._prevEase={start:L.now(),duration:r,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class zs{constructor(r,a){this._clickZoom=r,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class py{constructor(r){this._tr=new Ji(r),this.reset()}reset(){this._active=!1}dblclick(r,a){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fy{constructor(){this._tap=new wc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,a,d){if(!this._swipePoint)if(this._tapTime){const p=a[0],y=r.timeStamp-this._tapTime<500,w=this._tapPoint.dist(p)<30;y&&w?d.length>0&&(this._swipePoint=p,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,a,d)}touchmove(r,a,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const p=a[0],y=p.y-this._swipePoint.y;return this._swipePoint=p,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,a,d)}touchend(r,a,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const p=this._tap.touchend(r,a,d);p&&(this._tapTime=r.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xp{constructor(r,a,d){this._el=r,this._mousePan=a,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Kp{constructor(r,a,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=a,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Md{constructor(r,a,d,p){this._el=r,this._touchZoom=a,this._touchRotate=d,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class fa{constructor(r,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",r);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=a,this._container.appendChild(p);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,a){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:r,originalEvent:a})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Oi=_=>_.zoom||_.drag||_.pitch||_.rotate;class ht extends u.k{}function Ic(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Ad{constructor(r,a){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,y)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=p.type==="renderFrame"?void 0:p,C={needsRenderFrame:!1},k={},P={},R=p.touches,D=R?this._getMapTouches(R):void 0,U=D?A.touchPos(this._map.getCanvas(),D):A.mousePos(this._map.getCanvas(),p);for(const{handlerName:ae,handler:ue,allowed:he}of this._handlers){if(!ue.isEnabled())continue;let me;this._blockedByActive(P,he,ae)?ue.reset():ue[y||p.type]&&(me=ue[y||p.type](p,U,D),this.mergeHandlerResult(C,k,me,ae,w),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||ue.isActive())&&(P[ae]=ue)}const J={};for(const ae in this._previousActiveHandlers)P[ae]||(J[ae]=w);this._previousActiveHandlers=P,(Object.keys(J).length||Ic(C))&&(this._changes.push([C,k,J]),this._triggerRenderFrame()),(Object.keys(P).length||Ic(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=C;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vd(r),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,y,w]of this._listeners)A.addEventListener(p,y,p===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[r,a,d]of this._listeners)A.removeEventListener(r,a,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const a=this._map,d=a.getCanvasContainer();this._add("mapEvent",new qp(a,r));const p=a.boxZoom=new Ci(a,r);this._add("boxZoom",p),r.interactive&&r.boxZoom&&p.enable();const y=a.cooperativeGestures=new fa(a,r.cooperativeGestures);this._add("cooperativeGestures",y),r.cooperativeGestures&&y.enable();const w=new pa(a),C=new py(a);a.doubleClickZoom=new zs(C,w),this._add("tapZoom",w),this._add("clickZoom",C),r.interactive&&r.doubleClickZoom&&a.doubleClickZoom.enable();const k=new fy;this._add("tapDragZoom",k);const P=a.touchPitch=new _l(a);this._add("touchPitch",P),r.interactive&&r.touchPitch&&a.touchPitch.enable(r.touchPitch);const R=Sd(r),D=Cd(r);a.dragRotate=new Kp(r,R,D),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]),r.interactive&&r.dragRotate&&a.dragRotate.enable();const U=(({enable:me,clickTolerance:ie})=>{const xe=new Sc({checkCorrectEvent:Se=>A.mouseButton(Se)===0&&!Se.ctrlKey});return new Bo({clickTolerance:ie,move:(Se,Pe)=>({around:Pe,panDelta:Pe.sub(Se)}),activateOnStart:!0,moveStateManager:xe,enable:me,assignEvents:Cc})})(r),J=new As(r,a);a.dragPan=new Xp(d,U,J),this._add("mousePan",U),this._add("touchPan",J,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&a.dragPan.enable(r.dragPan);const te=new Ed,ae=new Td;a.touchZoomRotate=new Md(d,ae,te,k),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&a.touchZoomRotate.enable(r.touchZoomRotate);const ue=a.scrollZoom=new Qi(a,()=>this._triggerRenderFrame());this._add("scrollZoom",ue,["mousePan"]),r.interactive&&r.scrollZoom&&a.scrollZoom.enable(r.scrollZoom);const he=a.keyboard=new Fi(a);this._add("keyboard",he),r.interactive&&r.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new en(a))}_add(r,a,d){this._handlers.push({handlerName:r,handler:a,allowed:d}),this._handlersById[r]=a}stop(r){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Oi(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,a,d){for(const p in r)if(p!==d&&(!a||a.indexOf(p)<0))return!0;return!1}_getMapTouches(r){const a=[];for(const d of r)this._el.contains(d.target)&&a.push(d);return a}mergeHandlerResult(r,a,d,p,y){if(!d)return;u.e(r,d);const w={handlerName:p,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(a.zoom=w),d.panDelta!==void 0&&(a.drag=w),d.pitchDelta!==void 0&&(a.pitch=w),d.bearingDelta!==void 0&&(a.rotate=w)}_applyChanges(){const r={},a={},d={};for(const[p,y,w]of this._changes)p.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(p.panDelta)),p.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+p.pitchDelta),p.around!==void 0&&(r.around=p.around),p.pinchAround!==void 0&&(r.pinchAround=p.pinchAround),p.noInertia&&(r.noInertia=p.noInertia),u.e(a,y),u.e(d,w);this._updateMapTransform(r,a,d),this._changes=[]}_updateMapTransform(r,a,d){const p=this._map,y=p._getTransformForUpdate(),w=p.terrain;if(!(Ic(r)||w&&this._terrainMovement))return this._fireEvents(a,d,!0);let{panDelta:C,zoomDelta:k,bearingDelta:P,pitchDelta:R,around:D,pinchAround:U}=r;U!==void 0&&(D=U),p._stop(!0),D=D||p.transform.centerPoint;const J=y.pointLocation(C?D.sub(C):D);P&&(y.bearing+=P),R&&(y.pitch+=R),k&&(y.zoom+=k),w?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(C)):y.setLocationAtPoint(J,D):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(J,D)):y.setLocationAtPoint(J,D),p._applyUpdatedTransform(y),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(a,d,!0)}_fireEvents(r,a,d){const p=Oi(this._eventsInProgress),y=Oi(r),w={};for(const D in r){const{originalEvent:U}=r[D];this._eventsInProgress[D]||(w[`${D}start`]=U),this._eventsInProgress[D]=r[D]}!p&&y&&this._fireEvent("movestart",y.originalEvent);for(const D in w)this._fireEvent(D,w[D]);y&&this._fireEvent("move",y.originalEvent);for(const D in r){const{originalEvent:U}=r[D];this._fireEvent(D,U)}const C={};let k;for(const D in this._eventsInProgress){const{handlerName:U,originalEvent:J}=this._eventsInProgress[D];this._handlersById[U].isActive()||(delete this._eventsInProgress[D],k=a[U]||J,C[`${D}end`]=k)}for(const D in C)this._fireEvent(D,C[D]);const P=Oi(this._eventsInProgress),R=(p||y)&&!P;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const D=this._map._getTransformForUpdate();D.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(D)}if(d&&R){this._updatingCamera=!0;const D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;!D||!D.essential&&L.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:k})),U(this._map.getBearing())&&this._map.resetNorth()):(U(D.bearing||this._map.getBearing())&&(D.bearing=0),D.freezeElevation=!0,this._map.easeTo(D,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(r,a){this._map.fire(new u.k(r,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new ht("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Yp extends u.E{constructor(r,a){super(),this._renderFrameCallback=()=>{const d=Math.min((L.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,a){return this.jumpTo({center:r},a)}panBy(r,a,d){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},a),d)}panTo(r,a,d){return this.easeTo(u.e({center:r},a),d)}getZoom(){return this.transform.zoom}setZoom(r,a){return this.jumpTo({zoom:r},a),this}zoomTo(r,a,d){return this.easeTo(u.e({zoom:r},a),d)}zoomIn(r,a){return this.zoomTo(this.getZoom()+1,r,a),this}zoomOut(r,a){return this.zoomTo(this.getZoom()-1,r,a),this}getBearing(){return this.transform.bearing}setBearing(r,a){return this.jumpTo({bearing:r},a),this}getPadding(){return this.transform.padding}setPadding(r,a){return this.jumpTo({padding:r},a),this}rotateTo(r,a,d){return this.easeTo(u.e({bearing:r},a),d)}resetNorth(r,a){return this.rotateTo(0,u.e({duration:1e3},r),a),this}resetNorthPitch(r,a){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),a),this}snapToNorth(r,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,a):this}getPitch(){return this.transform.pitch}setPitch(r,a){return this.jumpTo({pitch:r},a),this}cameraForBounds(r,a){r=ze.convert(r).adjustAntiMeridian();const d=a&&a.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,a)}_cameraForBoxAndBearing(r,a,d,p){const y={top:0,bottom:0,right:0,left:0};if(typeof(p=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const tt=p.padding;p.padding={top:tt,bottom:tt,right:tt,left:tt}}p.padding=u.e(y,p.padding);const w=this.transform,C=w.padding,k=new ze(r,a),P=w.project(k.getNorthWest()),R=w.project(k.getNorthEast()),D=w.project(k.getSouthEast()),U=w.project(k.getSouthWest()),J=u.ba(-d),te=P.rotate(J),ae=R.rotate(J),ue=D.rotate(J),he=U.rotate(J),me=new u.P(Math.max(te.x,ae.x,he.x,ue.x),Math.max(te.y,ae.y,he.y,ue.y)),ie=new u.P(Math.min(te.x,ae.x,he.x,ue.x),Math.min(te.y,ae.y,he.y,ue.y)),xe=me.sub(ie),Se=(w.width-(C.left+C.right+p.padding.left+p.padding.right))/xe.x,Pe=(w.height-(C.top+C.bottom+p.padding.top+p.padding.bottom))/xe.y;if(Pe<0||Se<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ve=Math.min(w.scaleZoom(w.scale*Math.min(Se,Pe)),p.maxZoom),Ye=u.P.convert(p.offset),it=new u.P((p.padding.left-p.padding.right)/2,(p.padding.top-p.padding.bottom)/2).rotate(u.ba(d)),ut=Ye.add(it).mult(w.scale/w.zoomScale(Ve));return{center:w.unproject(P.add(D).div(2).sub(ut)),zoom:Ve,bearing:d}}fitBounds(r,a,d){return this._fitInternal(this.cameraForBounds(r,a),a,d)}fitScreenCoordinates(r,a,d,p,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(a)),d,p),p,y)}_fitInternal(r,a,d){return r?(delete(a=u.e(r,a)).padding,a.linear?this.easeTo(a,d):this.flyTo(a,d)):this}jumpTo(r,a){this.stop();const d=this._getTransformForUpdate();let p=!1,y=!1,w=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(p=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=u.N.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(y=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(w=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new u.k("movestart",a)).fire(new u.k("move",a)),p&&this.fire(new u.k("zoomstart",a)).fire(new u.k("zoom",a)).fire(new u.k("zoomend",a)),y&&this.fire(new u.k("rotatestart",a)).fire(new u.k("rotate",a)).fire(new u.k("rotateend",a)),w&&this.fire(new u.k("pitchstart",a)).fire(new u.k("pitch",a)).fire(new u.k("pitchend",a)),this.fire(new u.k("moveend",a))}calculateCameraOptionsFromTo(r,a,d,p=0){const y=u.Z.fromLngLat(r,a),w=u.Z.fromLngLat(d,p),C=w.x-y.x,k=w.y-y.y,P=w.z-y.z,R=Math.hypot(C,k,P);if(R===0)throw new Error("Can't calculate camera options with same From and To");const D=Math.hypot(C,k),U=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),J=180*Math.atan2(C,-k)/Math.PI;let te=180*Math.acos(D/R)/Math.PI;return te=P<0?90-te:90+te,{center:w.toLngLat(),zoom:U,pitch:te,bearing:J}}easeTo(r,a){var d;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b9},r)).animate===!1||!r.essential&&L.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),y=p.zoom,w=p.bearing,C=p.pitch,k=p.padding,P="bearing"in r?this._normalizeBearing(r.bearing,w):w,R="pitch"in r?+r.pitch:C,D="padding"in r?r.padding:p.padding,U=u.P.convert(r.offset);let J=p.centerPoint.add(U);const te=p.pointLocation(J),{center:ae,zoom:ue}=p.getConstrained(u.N.convert(r.center||te),(d=r.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(ae,p);const he=p.project(te),me=p.project(ae).sub(he),ie=p.zoomScale(ue-y);let xe,Se;r.around&&(xe=u.N.convert(r.around),Se=p.locationPoint(xe));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ue!==y,this._rotating=this._rotating||w!==P,this._pitching=this._pitching||R!==C,this._padding=!p.isPaddingEqual(D),this._easeId=r.easeId,this._prepareEase(a,r.noMoveStart,Pe),this.terrain&&this._prepareElevation(ae),this._ease(Ve=>{if(this._zooming&&(p.zoom=u.y.number(y,ue,Ve)),this._rotating&&(p.bearing=u.y.number(w,P,Ve)),this._pitching&&(p.pitch=u.y.number(C,R,Ve)),this._padding&&(p.interpolatePadding(k,D,Ve),J=p.centerPoint.add(U)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ve),xe)p.setLocationAtPoint(xe,Se);else{const Ye=p.zoomScale(p.zoom-y),it=ue>y?Math.min(2,ie):Math.max(.5,ie),ut=Math.pow(it,1-Ve),tt=p.unproject(he.add(me.mult(Ve*ut)).mult(Ye));p.setLocationAtPoint(p.renderWorldCopies?tt.wrap():tt,J)}this._applyUpdatedTransform(p),this._fireMoveEvents(a)},Ve=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(a,Ve)},r),this}_prepareEase(r,a,d={}){this._moving=!0,a||d.moving||this.fire(new u.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&a!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(a-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=a}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){const a=r.getCameraPosition(),d=this.terrain.getElevationForLngLatZoom(a.lngLat,r.zoom);if(a.altitude<d){const p=this.calculateCameraOptionsFromTo(a.lngLat,d,r.center,r.elevation);return{pitch:p.pitch,zoom:p.zoom}}return{}}_applyUpdatedTransform(r){const a=[];if(this.terrain&&a.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&a.push(p=>this.transformCameraUpdate(p)),!a.length)return;const d=r.clone();for(const p of a){const y=d.clone(),{center:w,zoom:C,pitch:k,bearing:P,elevation:R}=p(y);w&&(y.center=w),C!==void 0&&(y.zoom=C),k!==void 0&&(y.pitch=k),P!==void 0&&(y.bearing=P),R!==void 0&&(y.elevation=R),d.apply(y)}this.transform.apply(d)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const d=this._zooming,p=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new u.k("zoomend",r)),p&&this.fire(new u.k("rotateend",r)),y&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,a){var d;if(!r.essential&&L.prefersReducedMotion){const lt=u.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(lt,a)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},r);const p=this._getTransformForUpdate(),y=p.zoom,w=p.bearing,C=p.pitch,k=p.padding,P="bearing"in r?this._normalizeBearing(r.bearing,w):w,R="pitch"in r?+r.pitch:C,D="padding"in r?r.padding:p.padding,U=u.P.convert(r.offset);let J=p.centerPoint.add(U);const te=p.pointLocation(J),{center:ae,zoom:ue}=p.getConstrained(u.N.convert(r.center||te),(d=r.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(ae,p);const he=p.zoomScale(ue-y),me=p.project(te),ie=p.project(ae).sub(me);let xe=r.curve;const Se=Math.max(p.width,p.height),Pe=Se/he,Ve=ie.mag();if("minZoom"in r){const lt=u.ac(Math.min(r.minZoom,y,ue),p.minZoom,p.maxZoom),Lt=Se/p.zoomScale(lt-y);xe=Math.sqrt(Lt/Ve*2)}const Ye=xe*xe;function it(lt){const Lt=(Pe*Pe-Se*Se+(lt?-1:1)*Ye*Ye*Ve*Ve)/(2*(lt?Pe:Se)*Ye*Ve);return Math.log(Math.sqrt(Lt*Lt+1)-Lt)}function ut(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function tt(lt){return(Math.exp(lt)+Math.exp(-lt))/2}const et=it(!1);let mt=function(lt){return tt(et)/tt(et+xe*lt)},Ot=function(lt){return Se*((tt(et)*(ut(Lt=et+xe*lt)/tt(Lt))-ut(et))/Ye)/Ve;var Lt},rt=(it(!0)-et)/xe;if(Math.abs(Ve)<1e-6||!isFinite(rt)){if(Math.abs(Se-Pe)<1e-6)return this.easeTo(r,a);const lt=Pe<Se?-1:1;rt=Math.abs(Math.log(Pe/Se))/xe,Ot=()=>0,mt=Lt=>Math.exp(lt*xe*Lt)}return r.duration="duration"in r?+r.duration:1e3*rt/("screenSpeed"in r?+r.screenSpeed/xe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=w!==P,this._pitching=R!==C,this._padding=!p.isPaddingEqual(D),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(ae),this._ease(lt=>{const Lt=lt*rt,Vr=1/mt(Lt);p.zoom=lt===1?ue:y+p.scaleZoom(Vr),this._rotating&&(p.bearing=u.y.number(w,P,lt)),this._pitching&&(p.pitch=u.y.number(C,R,lt)),this._padding&&(p.interpolatePadding(k,D,lt),J=p.centerPoint.add(U)),this.terrain&&!r.freezeElevation&&this._updateElevation(lt);const qt=lt===1?ae:p.unproject(me.add(ie.mult(Ot(Lt))).mult(Vr));p.setLocationAtPoint(p.renderWorldCopies?qt.wrap():qt,J),this._applyUpdatedTransform(p),this._fireMoveEvents(a)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,a){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,a)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,a,d){d.animate===!1||d.duration===0?(r(1),a()):(this._easeStart=L.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,a){r=u.b3(r,-180,180);const d=Math.abs(r-a);return Math.abs(r-360-a)<d&&(r-=360),Math.abs(r+360-a)<d&&(r+=360),r}_normalizeCenter(r,a){if(!a.renderWorldCopies||a.lngRange)return;const d=r.lng-a.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const ma={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ga{constructor(r=ma){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,a){const d=this._map._getUIString(`AttributionControl.${a}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const a=this._map.style.sourceCaches;for(const p in a){const y=a[p];if(y.used||y.usedForTerrain){const w=y.getSource();w.attribution&&r.indexOf(w.attribution)<0&&r.push(w.attribution)}}r=r.filter(p=>String(p).trim()),r.sort((p,y)=>p.length-y.length),r=r.filter((p,y)=>{for(let w=y+1;w<r.length;w++)if(r[w].indexOf(p)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class zd{constructor(r={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const d=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const a=A.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class or{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const a=++this._id;return this._queue.push({callback:r,id:a,cancelled:!1}),a}remove(r){const a=this._currentlyRunning,d=a?this._queue.concat(a):this._queue;for(const p of d)if(p.id===r)return void(p.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const d of a)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Rd=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class my extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,a){this.sourceCache.update(r,a),this._renderableTilesKeys=[];const d={};for(const p of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))d[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.posMatrix=new Float64Array(16),u.aP(p.posMatrix,0,u.X,0,u.X,0,1),this._tiles[p.key]=new Nr(p,this.tileSize));for(const p in this._tiles)d[p]||delete this._tiles[p]}freeRtt(r){for(const a in this._tiles){const d=this._tiles[a];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const a={};for(const d of this._renderableTilesKeys){const p=this._tiles[d].tileID;if(p.canonical.equals(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16),u.aP(y.posMatrix,0,u.X,0,u.X,0,1),a[d]=y}else if(p.canonical.isChildOf(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const w=p.canonical.z-r.canonical.z,C=p.canonical.x-(p.canonical.x>>w<<w),k=p.canonical.y-(p.canonical.y>>w<<w),P=u.X>>w;u.aP(y.posMatrix,0,P,0,P,0,1),u.J(y.posMatrix,y.posMatrix,[-C*P,-k*P,0]),a[d]=y}else if(r.canonical.isChildOf(p.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const w=r.canonical.z-p.canonical.z,C=r.canonical.x-(r.canonical.x>>w<<w),k=r.canonical.y-(r.canonical.y>>w<<w),P=u.X>>w;u.aP(y.posMatrix,0,u.X,0,u.X,0,1),u.J(y.posMatrix,y.posMatrix,[C*P,k*P,0]),u.K(y.posMatrix,y.posMatrix,[1/2**w,1/2**w,0]),a[d]=y}}return a}getSourceTile(r,a){const d=this.sourceCache._source;let p=r.overscaledZ-this.deltaZoom;if(p>d.maxzoom&&(p=d.maxzoom),p<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(p).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!y||!y.dem)&&a)for(;p>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(r.scaledTo(p--).key);return y}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=r)}}class Dd{constructor(r,a,d){this.painter=r,this.sourceCache=new my(a),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,a,d,p=u.X){var y;if(!(a>=0&&a<p&&d>=0&&d<p))return 0;const w=this.getTerrainData(r),C=(y=w.tile)===null||y===void 0?void 0:y.dem;if(!C)return 0;const k=function(te,ae,ue){var he=ae[0],me=ae[1];return te[0]=ue[0]*he+ue[4]*me+ue[12],te[1]=ue[1]*he+ue[5]*me+ue[13],te}([],[a/p*u.X,d/p*u.X],w.u_terrain_matrix),P=[k[0]*C.dim,k[1]*C.dim],R=Math.floor(P[0]),D=Math.floor(P[1]),U=P[0]-R,J=P[1]-D;return C.get(R,D)*(1-U)*(1-J)+C.get(R+1,D)*U*(1-J)+C.get(R,D+1)*(1-U)*J+C.get(R+1,D+1)*U*J}getElevationForLngLatZoom(r,a){if(!u.bb(a,r.wrap()))return 0;const{tileID:d,mercatorX:p,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(r,a);return this.getElevation(d,p%u.X,y%u.X,u.X)}getElevation(r,a,d,p=u.X){return this.getDEMElevation(r,a,d,p)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const p=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new De(p,y,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new De(p,new u.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const a=this.sourceCache.getSourceTile(r,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const p=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new De(p,a.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),a.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const d=a&&a+a.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const p=this.sourceCache.sourceCache._source.maxzoom;let y=r.canonical.z-a.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=p?y=r.canonical.z-p:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=r.canonical.x-(r.canonical.x>>y<<y),C=r.canonical.y-(r.canonical.y>>y<<y),k=u.bc(new Float64Array(16),[1/(u.X<<y),1/(u.X<<y),0]);u.J(k,k,[w*u.X,C*u.X,0]),this._demMatrixCache[r.key]={matrix:k,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(r){const a=this.painter,d=a.width/devicePixelRatio,p=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new De(a.context,{width:d,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new De(a.context,{width:d,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(d,p,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,d,p))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,w=0;y<this._coordsTextureSize;y++)for(let C=0;C<this._coordsTextureSize;C++,w+=4)a[w+0]=255&C,a[w+1]=255&y,a[w+2]=C>>8<<4|y>>8,a[w+3]=0;const d=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),p=new De(r,d,r.gl.RGBA,{premultiply:!1});return p.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),d=this.painter.context,p=d.gl,y=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(y,C-w-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null);const k=a[0]+(a[2]>>4<<8),P=a[1]+((15&a[2])<<8),R=this.coordsIndex[255-a[3]],D=R&&this.sourceCache.getTileByID(R);if(!D)return null;const U=this._coordsTextureSize,J=(1<<D.tileID.canonical.z)*U;return new u.Z((D.tileID.canonical.x*U+k)/J+D.tileID.wrap,(D.tileID.canonical.y*U+P)/J,this.getElevation(D.tileID,k,P,U))}depthAtPoint(r){const a=new Uint8Array(4),d=this.painter.context,p=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,a=new u.bd,d=new u.aY,p=this.meshSize,y=u.X/p,w=p*p;for(let D=0;D<=p;D++)for(let U=0;U<=p;U++)a.emplaceBack(U*y,D*y,0);for(let D=0;D<w;D+=p+1)for(let U=0;U<p;U++)d.emplaceBack(U+D,p+U+D+1,p+U+D+2),d.emplaceBack(U+D,p+U+D+2,U+D+1);const C=a.length,k=C+2*(p+1);for(const D of[0,1])for(let U=0;U<=p;U++)for(const J of[0,1])a.emplaceBack(U*y,D*u.X,J);for(let D=0;D<2*p;D+=2)d.emplaceBack(k+D,k+D+1,k+D+3),d.emplaceBack(k+D,k+D+3,k+D+2),d.emplaceBack(C+D,C+D+3,C+D+1),d.emplaceBack(C+D,C+D+2,C+D+3);const P=a.length,R=P+2*(p+1);for(const D of[0,1])for(let U=0;U<=p;U++)for(const J of[0,1])a.emplaceBack(D*u.X,U*y,J);for(let D=0;D<2*p;D+=2)d.emplaceBack(P+D,P+D+1,P+D+3),d.emplaceBack(P+D,P+D+3,P+D+2),d.emplaceBack(R+D,R+D+3,R+D+1),d.emplaceBack(R+D,R+D+2,R+D+3);return this._mesh=new yc(r.createVertexBuffer(a,Rd.members),r.createIndexBuffer(d),u.a0.simpleSegment(0,0,a.length,d.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,a){var d;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(r,a);return(d=this.getMinMaxElevation(p).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const a=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return a&&a.dem&&(d.minElevation=a.dem.min*this.exaggeration,d.maxElevation=a.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,a){const d=u.Z.fromLngLat(r.wrap()),p=(1<<a)*u.X,y=d.x*p,w=d.y*p,C=Math.floor(y/u.X),k=Math.floor(w/u.X);return{tileID:new u.S(a,0,a,C,k),mercatorX:y,mercatorY:w}}}class gy{constructor(r,a,d){this._context=r,this._size=a,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new De(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(d.texture),{id:r,fbo:a,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>r.id!==a),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ya={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Jp{constructor(r,a){this.painter=r,this.terrain=a,this.pool=new gy(r.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(a)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const p=r.sourceCaches[d].getVisibleCoordinates();for(const y of p){const w=this.terrain.sourceCache.getTerrainCoords(y);for(const C in w)this._coordsDescendingInv[d][C]||(this._coordsDescendingInv[d][C]=[]),this._coordsDescendingInv[d][C].push(w[C])}}this._coordsDescendingInvStr={};for(const d of r._order){const p=r._layers[d],y=p.source;if(ya[p.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const w in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][w]=this._coordsDescendingInv[y][w].map(C=>C.key).sort().join()}}for(const d of this._renderableTiles)for(const p in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[p][d.tileID.key];y&&y!==d.rttCoords[p]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const a=r.type,d=this.painter,p=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ya[a]&&(this._prevType&&ya[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(r.id),!p))return!0;if(ya[this._prevType]||ya[a]&&p){this._prevType=a;const y=this._stacks.length-1,w=this._stacks[y]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(Wp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[y]){const P=this.pool.getObjectForId(C.rtt[y].id);if(P.stamp===C.rtt[y].stamp){this.pool.useObject(P);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),C.rtt[y]={id:k.id,stamp:k.stamp},d.context.bindFramebuffer.set(k.fbo.framebuffer),d.context.clear({color:u.aM.transparent,stencil:0}),d.currentStencilSource=void 0;for(let P=0;P<w.length;P++){const R=d.style._layers[w[P]],D=R.source?this._coordsDescendingInv[R.source][C.tileID.key]:[C.tileID];d.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),d._renderTileClippingMasks(R,D),d.renderLayer(d,d.style.sourceCaches[R.source],R,D),R.source&&(C.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][C.tileID.key])}}return Wp(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ya[a]}return!1}}const Ld={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Qp=I,yy={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ma,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Bd=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},_y={showCompass:!0,showZoom:!0,visualizePitch:!1};class vy{constructor(r,a,d=!1){this.mousedown=w=>{this.startMouse(u.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),A.mousePos(this.element,w)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,A.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const p=r.dragRotate._mouseRotate.getClickTolerance(),y=r.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=Sd({clickTolerance:p,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:C,bearingDegreesPerPixelMoved:k=.8})=>{const P=new wd;return new Bo({clickTolerance:C,move:(R,D)=>({bearingDelta:(D.x-R.x)*k}),moveStateManager:P,enable:w,assignEvents:Bd})})({clickTolerance:p,enable:!0}),this.map=r,d&&(this.mousePitch=Cd({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:C,pitchDegreesPerPixelMoved:k=-.5})=>{const P=new wd;return new Bo({clickTolerance:C,move:(R,D)=>({pitchDelta:(D.y-R.y)*k}),moveStateManager:P,enable:w,assignEvents:Bd})})({clickTolerance:y,enable:!0})),A.addEventListener(a,"mousedown",this.mousedown),A.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(a,"touchcancel",this.reset)}startMouse(r,a){this.mouseRotate.dragStart(r,a),this.mousePitch&&this.mousePitch.dragStart(r,a),A.disableDrag()}startTouch(r,a){this.touchRotate.dragStart(r,a),this.touchPitch&&this.touchPitch.dragStart(r,a),A.disableDrag()}moveMouse(r,a){const d=this.map,{bearingDelta:p}=this.mouseRotate.dragMove(r,a)||{};if(p&&d.setBearing(d.getBearing()+p),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(r,a)||{};y&&d.setPitch(d.getPitch()+y)}}moveTouch(r,a){const d=this.map,{bearingDelta:p}=this.touchRotate.dragMove(r,a)||{};if(p&&d.setBearing(d.getBearing()+p),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(r,a)||{};y&&d.setPitch(d.getPitch()+y)}}off(){const r=this.element;A.removeEventListener(r,"mousedown",this.mousedown),A.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let ki;function jr(_,r,a){const d=new u.N(_.lng,_.lat);if(_=new u.N(_.lng,_.lat),r){const p=new u.N(_.lng-360,_.lat),y=new u.N(_.lng+360,_.lat),w=a.locationPoint(_).distSqr(r);a.locationPoint(p).distSqr(r)<w?_=p:a.locationPoint(y).distSqr(r)<w&&(_=y)}for(;Math.abs(_.lng-a.center.lng)>180;){const p=a.locationPoint(_);if(p.x>=0&&p.y>=0&&p.x<=a.width&&p.y<=a.height)break;_.lng>a.center.lng?_.lng-=360:_.lng+=360}return _.lng!==d.lng&&a.locationPoint(_).y>a.height/2-a.getHorizon()?_:d}const _a={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ec(_,r,a){const d=_.classList;for(const p in _a)d.remove(`maplibregl-${a}-anchor-${p}`);d.add(`maplibregl-${a}-anchor-${r}`)}class Pc extends u.E{constructor(r){if(super(),this._onKeyPress=a=>{const d=a.code,p=a.charCode||a.keyCode;d!=="Space"&&d!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=a=>{const d=a.originalEvent.target,p=this._element;this._popup&&(d===p||p.contains(d))&&this.togglePopup()},this._update=a=>{var d;if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?jr(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||a&&a.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${_a[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${y}`),L.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div");const a=A.createNS("http://www.w3.org/2000/svg","svg"),d=41,p=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${d}px`),a.setAttributeNS(null,"width",`${p}px`),a.setAttributeNS(null,"viewBox",`0 0 ${p} ${d}`);const y=A.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const w=A.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const C=A.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const he of k){const me=A.createNS("http://www.w3.org/2000/svg","ellipse");me.setAttributeNS(null,"opacity","0.04"),me.setAttributeNS(null,"cx","10.5"),me.setAttributeNS(null,"cy","5.80029008"),me.setAttributeNS(null,"rx",he.rx),me.setAttributeNS(null,"ry",he.ry),C.appendChild(me)}const P=A.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill",this._color);const R=A.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),P.appendChild(R);const D=A.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"opacity","0.25"),D.setAttributeNS(null,"fill","#000000");const U=A.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),D.appendChild(U);const J=A.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");const te=A.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ae=A.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");const ue=A.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),te.appendChild(ae),te.appendChild(ue),w.appendChild(C),w.appendChild(P),w.appendChild(D),w.appendChild(J),w.appendChild(te),a.appendChild(w),a.setAttributeNS(null,"height",d*this._scale+"px"),a.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(a),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),Ec(this._element,this._anchor,"marker"),r&&r.className)for(const a of r.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const p=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var a,d;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const p=this._map,y=p.terrain.depthAtPoint(this._pos),w=p.terrain.getElevationForLngLatZoom(this._lngLat,p.transform.tileZoom);if(p.transform.lngLatToCameraDepth(this._lngLat,w)-y<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/p.transform._pixelPerMeter,k=Math.sin(p.getPitch()*Math.PI/180)*C,P=p.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),R=p.transform.lngLatToCameraDepth(this._lngLat,w+k)-P>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,a){return r===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const ef={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let vl=0,xl=!1;const vo={maxWidth:100,unit:"metric"};function bl(_,r,a){const d=a&&a.maxWidth||100,p=_._container.clientHeight/2,y=_.unproject([0,p]),w=_.unproject([d,p]),C=y.distanceTo(w);if(a&&a.unit==="imperial"){const k=3.2808*C;k>5280?ft(r,d,k/5280,_._getUIString("ScaleControl.Miles")):ft(r,d,k,_._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?ft(r,d,C/1852,_._getUIString("ScaleControl.NauticalMiles")):C>=1e3?ft(r,d,C/1e3,_._getUIString("ScaleControl.Kilometers")):ft(r,d,C,_._getUIString("ScaleControl.Meters"))}function ft(_,r,a,d){const p=function(y){const w=Math.pow(10,`${Math.floor(y)}`.length-1);let C=y/w;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(k){const P=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*P)/P}(C),w*C}(a);_.style.width=r*(p/a)+"px",_.innerHTML=`${p}&nbsp;${d}`}const Mt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Mc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ac(_){if(_){if(typeof _=="number"){const r=Math.round(Math.abs(_)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,_),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-_),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(_,0),right:new u.P(-_,0)}}if(_ instanceof u.P||Array.isArray(_)){const r=u.P.convert(_);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(_.center||[0,0]),top:u.P.convert(_.top||[0,0]),"top-left":u.P.convert(_["top-left"]||[0,0]),"top-right":u.P.convert(_["top-right"]||[0,0]),bottom:u.P.convert(_.bottom||[0,0]),"bottom-left":u.P.convert(_["bottom-left"]||[0,0]),"bottom-right":u.P.convert(_["bottom-right"]||[0,0]),left:u.P.convert(_.left||[0,0]),right:u.P.convert(_.right||[0,0])}}return Ac(new u.P(0,0))}const Fd=I;g.AJAXError=u.bh,g.Evented=u.E,g.LngLat=u.N,g.MercatorCoordinate=u.Z,g.Point=u.P,g.addProtocol=u.bi,g.config=u.a,g.removeProtocol=u.bj,g.AttributionControl=ga,g.BoxZoomHandler=Ci,g.CanvasSource=un,g.CooperativeGesturesHandler=fa,g.DoubleClickZoomHandler=zs,g.DragPanHandler=Xp,g.DragRotateHandler=Kp,g.EdgeInsets=da,g.FullscreenControl=class extends u.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var r;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=a==null?void 0:a.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},g.GeoJSONSource=br,g.GeolocateControl=class extends u.E{constructor(_){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const a=new u.N(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,p=this._map.getBearing(),y=u.e({bearing:p},this.options.fitBoundsOptions),w=ze.fromLngLat(a,d);this._map.fitBounds(w,y,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const a=new u.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&xl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Pc({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},ef,_)}onAdd(_){return this._map=_,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(r=!1){if(ki!==void 0&&!r)return ki;if(window.navigator.permissions===void 0)return ki=!!window.navigator.geolocation,ki;try{ki=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ki=!!window.navigator.geolocation}return ki})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,vl=0,xl=!1}_isOutOfMapMaxBounds(_){const r=this._map.getMaxBounds(),a=_.coords;return r&&(a.longitude<r.getWest()||a.longitude>r.getEast()||a.latitude<r.getSouth()||a.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),r=_.getSouthEast(),a=_.getNorthEast(),d=r.distanceTo(a),p=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":vl--,xl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),vl++,vl>1?(_={maximumAge:6e5,timeout:0},xl=!0):(_=this.options.positionOptions,xl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},g.Hash=vc,g.ImageSource=_n,g.KeyboardHandler=Fi,g.LngLatBounds=ze,g.LogoControl=zd,g.Map=class extends Yp{constructor(_){u.bf.mark(u.bg.create);const r=Object.assign(Object.assign({},yy),_);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ha(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new or,this._controls=[],this._mapId=u.a4(),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ld),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=V.addThrottleControl(()=>this.isMoving()),this._requestManager=new Q(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const d=pl(p=>{this._trackResize&&!this._removed&&(this.resize(p),this.redraw())},50);this._resizeObserver=new ResizeObserver(p=>{a?d(p):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ad(this,r),this._hash=r.hash&&new vc(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,u.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new ga(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new zd,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new u.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new u.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new u.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(_,r){if(r===void 0&&(r=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=_.onAdd(this);this._controls.push(_);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(_);return r>-1&&this._controls.splice(r,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,r,a,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,r,a,d)}resize(_){var r;const a=this._containerDimensions(),d=a[0],p=a[1],y=this._getClampedPixelRatio(d,p);if(this._resizeCanvas(d,p,y),this.painter.resize(d,p,y),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const k=this._getClampedPixelRatio(d,p);this._resizeCanvas(d,p,k),this.painter.resize(d,p,k)}this.transform.resize(d,p),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,p);const w=!this._moving;return w&&(this.stop(),this.fire(new u.k("movestart",_)).fire(new u.k("move",_))),this.fire(new u.k("resize",_)),w&&this.fire(new u.k("moveend",_)),this}_getClampedPixelRatio(_,r){const{0:a,1:d}=this._maxCanvasSize,p=this.getPixelRatio(),y=_*p,w=r*p;return Math.min(y>a?a/y:1,w>d?d/w:1)*p}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(ze.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(u.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(u.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,r,a){if(_==="mouseenter"||_==="mouseover"){let d=!1;return{layers:r,listener:a,delegates:{mousemove:y=>{const w=r.filter(k=>this.getLayer(k)),C=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];C.length?d||(d=!0,a.call(this,new Fn(_,this,y.originalEvent,{features:C}))):d=!1},mouseout:()=>{d=!1}}}}if(_==="mouseleave"||_==="mouseout"){let d=!1;return{layers:r,listener:a,delegates:{mousemove:w=>{const C=r.filter(k=>this.getLayer(k));(C.length!==0?this.queryRenderedFeatures(w.point,{layers:C}):[]).length?d=!0:d&&(d=!1,a.call(this,new Fn(_,this,w.originalEvent)))},mouseout:w=>{d&&(d=!1,a.call(this,new Fn(_,this,w.originalEvent)))}}}}{const d=p=>{const y=r.filter(C=>this.getLayer(C)),w=y.length!==0?this.queryRenderedFeatures(p.point,{layers:y}):[];w.length&&(p.features=w,a.call(this,p),delete p.features)};return{layers:r,listener:a,delegates:{[_]:d}}}}_saveDelegatedListener(_,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(r)}_removeDelegatedListener(_,r,a){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const d=this._delegatedListeners[_];for(let p=0;p<d.length;p++){const y=d[p];if(y.listener===a&&y.layers.length===r.length&&y.layers.every(w=>r.includes(w))){for(const w in y.delegates)this.off(w,y.delegates[w]);return void d.splice(p,1)}}}on(_,r,a){if(a===void 0)return super.on(_,r);const d=this._createDelegatedListener(_,typeof r=="string"?[r]:r,a);this._saveDelegatedListener(_,d);for(const p in d.delegates)this.on(p,d.delegates[p]);return this}once(_,r,a){if(a===void 0)return super.once(_,r);const d=typeof r=="string"?[r]:r,p=this._createDelegatedListener(_,d,a);for(const y in p.delegates){const w=p.delegates[y];p.delegates[y]=(...C)=>{this._removeDelegatedListener(_,d,a),w(...C)}}this._saveDelegatedListener(_,p);for(const y in p.delegates)this.once(y,p.delegates[y]);return this}off(_,r,a){return a===void 0?super.off(_,r):(this._removeDelegatedListener(_,typeof r=="string"?[r]:r,a),this)}queryRenderedFeatures(_,r){if(!this.style)return[];let a;const d=_ instanceof u.P||Array.isArray(_),p=d?_:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:_)||{},p instanceof u.P||typeof p[0]=="number")a=[u.P.convert(p)];else{const y=u.P.convert(p[0]),w=u.P.convert(p[1]);a=[y,new u.P(w.x,y.y),w,new u.P(y.x,w.y),y]}return this.style.queryRenderedFeatures(a,r,this.transform)}querySourceFeatures(_,r){return this.style.querySourceFeatures(_,r)}setStyle(_,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(_,r))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const r=this._locale[_];if(r==null)throw new Error(`Missing UI string '${_}'`);return r}_updateStyle(_,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,r));const a=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new rc(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,r,a):this.style.loadJSON(_,r,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new rc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,r){if(typeof _=="string"){const a=this._requestManager.transformRequest(_,"Style");u.h(a,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new u.j(d))})}else typeof _=="object"&&this._updateDiff(_,r)}_updateDiff(_,r){try{this.style.setState(_,r)&&this._update(!0)}catch(a){u.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(_,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(_,r){return this._lazyInitEmptyStyle(),this.style.addSource(_,r),this._update(!0)}isSourceLoaded(_){const r=this.style&&this.style.sourceCaches[_];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const r=this.style.sourceCaches[_.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&r.reload();for(const a in this.style._layers){const d=this.style._layers[a];d.type==="hillshade"&&d.source===_.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Dd(this.painter,r,_),this.painter.renderToTexture=new Jp(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:_})),this}getTerrain(){var _,r;return(r=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const r in _){const a=_[r]._tiles;for(const d in a){const p=a[d];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,r,a={}){const{pixelRatio:d=1,sdf:p=!1,stretchX:y,stretchY:w,content:C,textFitWidth:k,textFitHeight:P}=a;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:D,data:U}=r,J=r;return this.style.addImage(_,{data:new u.R({width:R,height:D},new Uint8Array(U)),pixelRatio:d,stretchX:y,stretchY:w,content:C,textFitWidth:k,textFitHeight:P,sdf:p,version:0,userImage:J}),J.onAdd&&J.onAdd(this,_),this}}{const{width:R,height:D,data:U}=L.getImageData(r);this.style.addImage(_,{data:new u.R({width:R,height:D},U),pixelRatio:d,stretchX:y,stretchY:w,content:C,textFitWidth:k,textFitHeight:P,sdf:p,version:0})}}updateImage(_,r){const a=this.style.getImage(_);if(!a)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||u.b(r)?L.getImageData(r):r,{width:p,height:y,data:w}=d;if(p===void 0||y===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==a.data.width||y!==a.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(r instanceof HTMLImageElement||u.b(r));return a.data.replace(w,C),this.style.updateImage(_,a),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return V.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,r){return this._lazyInitEmptyStyle(),this.style.addLayer(_,r),this._update(!0)}moveLayer(_,r){return this.style.moveLayer(_,r),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,r,a){return this.style.setLayerZoomRange(_,r,a),this._update(!0)}setFilter(_,r,a={}){return this.style.setFilter(_,r,a),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,r,a,d={}){return this.style.setPaintProperty(_,r,a,d),this._update(!0)}getPaintProperty(_,r){return this.style.getPaintProperty(_,r)}setLayoutProperty(_,r,a,d={}){return this.style.setLayoutProperty(_,r,a,d),this._update(!0)}getLayoutProperty(_,r){return this.style.getLayoutProperty(_,r)}setGlyphs(_,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,r,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,r,a,d=>{d||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,r,a=>{a||this._update(!0)}),this}setLight(_,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,r){return this.style.setFeatureState(_,r),this._update()}removeFeatureState(_,r){return this.style.removeFeatureState(_,r),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,r=0;return this._container&&(_=this._container.clientWidth||400,r=this._container.clientHeight||300),[_,r]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const r=this._canvasContainer=A.create("div","maplibregl-canvas-container",_);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),d=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],d);const p=this._controlContainer=A.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{y[w]=A.create("div",`maplibregl-ctrl-${w} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,r,a){this._canvas.width=Math.floor(a*_),this._canvas.height=Math.floor(a*r),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:_},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const a=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!a){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new _c(a,this.transform),Z.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const p=this.transform.zoom,y=L.now();this.style.zoomHistory.update(p,y);const w=new u.z(p,{now:y,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=w.crossFadingFactor();C===1&&C===this._crossFadingFactor||(a=!0,this._crossFadingFactor=C),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bf.mark(u.bg.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,u.bf.mark(u.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),V.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bf.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,L.frameAsync(this._frameRequest).then(_=>{u.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return Qp}getCameraTargetElevation(){return this.transform.elevation}},g.MapMouseEvent=Fn,g.MapTouchEvent=Ms,g.MapWheelEvent=Hp,g.Marker=Pc,g.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const r=this._map.getZoom(),a=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,a)=>{const d=this._map._getUIString(`NavigationControl.${a}`);r.title=d,r.setAttribute("aria-label",d)},this.options=u.e({},_y,_),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new vy(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,r){const a=A.create("button",_,this._container);return a.type="button",a.addEventListener("click",r),a}},g.Popup=class extends u.E{constructor(_){super(),this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?jr(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!r)return;const d=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let p=this.options.anchor;const y=Ac(this.options.offset);if(!p){const C=this._container.offsetWidth,k=this._container.offsetHeight;let P;P=d.y+y.bottom.y<k?["top"]:d.y>this._map.transform.height-k?["bottom"]:[],d.x<C/2?P.push("left"):d.x>this._map.transform.width-C/2&&P.push("right"),p=P.length===0?"bottom":P.join("-")}let w=d.add(y[p]);this.options.subpixelPositioning||(w=w.round()),A.setTransform(this._container,`${_a[p]} translate(${w.x}px,${w.y}px)`),Ec(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Mt),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=u.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const r=document.createDocumentFragment(),a=document.createElement("body");let d;for(a.innerHTML=_;d=a.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Mc);_&&_.focus()}},g.RasterDEMTileSource=er,g.RasterTileSource=At,g.ScaleControl=class{constructor(_){this._onMove=()=>{bl(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,bl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},vo),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},g.ScrollZoomHandler=Qi,g.Style=rc,g.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},g.TwoFingersTouchPitchHandler=_l,g.TwoFingersTouchRotateHandler=Ed,g.TwoFingersTouchZoomHandler=Td,g.TwoFingersTouchZoomRotateHandler=Md,g.VectorTileSource=kr,g.VideoSource=Tr,g.addSourceType=(_,r)=>u._(void 0,void 0,void 0,function*(){if(Bn(_))throw new Error(`A source type called "${_}" already exists.`);((a,d)=>{En[a]=d})(_,r)}),g.clearPrewarmedResources=function(){const _=Rt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Dt),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},g.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},g.getRTLTextPluginStatus=function(){return zt().getRTLTextPluginStatus()},g.getVersion=function(){return Fd},g.getWorkerCount=function(){return $t.workerCount},g.getWorkerUrl=function(){return u.a.WORKER_URL},g.importScriptInWorkers=function(_){return Kt().broadcast("IS",_)},g.prewarm=function(){Jt().acquire(Dt)},g.setMaxParallelImageRequests=function(_){u.a.MAX_PARALLEL_IMAGE_REQUESTS=_},g.setRTLTextPlugin=function(_,r){return zt().setRTLTextPlugin(_,r)},g.setWorkerCount=function(_){$t.workerCount=_},g.setWorkerUrl=function(_){u.a.WORKER_URL=_}});var m=o;return m})})(oT);var lD=oT.exports;const Hf=cx(lD),p2=["red","blue","green","purple","orange","darkred","darkblue","darkgreen","cadetblue","pink","black","gray"],f2=[{sides:3,rotation:0},{sides:4,rotation:45},{sides:5,rotation:0},{sides:6,rotation:0},{sides:8,rotation:0},{sides:3,rotation:180},{sides:4,rotation:0}];function cD(e){const t=e.trim().split(`
`),o=t[0].split(",").map(l=>l.trim());return t.slice(1).map(l=>{const h=uD(l),m={};return o.forEach((g,u)=>{m[g]=h[u]||""}),m})}function uD(e){const t=[];let o="",l=!1;for(let h=0;h<e.length;h++){const m=e[h];m==='"'?l=!l:m===","&&!l?(t.push(o.trim()),o=""):o+=m}return t.push(o.trim()),t}async function dD(e="/tree_data.csv",t={}){const{photosUrl:o=""}=t;try{const l=await fetch(e);if(!l.ok)throw new Error(`Failed to load CSV: ${l.statusText}`);const h=await l.text(),m=cD(h),g=[...new Set(m.map(M=>M.genus).filter(M=>M))],u={};return g.forEach((M,B)=>{u[M]={color:p2[B%p2.length],shape:f2[B%f2.length]}}),{trees:m.map(M=>{const B=M.genus||"Unknown",L=u[B]||{color:"gray",shape:{sides:4,rotation:0}};let A=null;const Z=parseFloat(M.crownNSm||M.crownNS),q=parseFloat(M.crownEWm||M.crownEW);return!isNaN(Z)&&!isNaN(q)?A=(Z+q)/4*5:isNaN(Z)?isNaN(q)||(A=q/2*5):A=Z/2*5,{treeCode:M.treecode||M.treeCode||"",lat:parseFloat(M.lat),lon:parseFloat(M.lon),genus:M.genus||"",species:M.species||"",dbh:M.dbh||"",height:M.height||"",crownNS:Z||null,crownEW:q||null,crownRadius:A,color:L.color,shape:L.shape,photosBaseUrl:o}}),genusStyles:u}}catch(l){throw console.error("Error loading tree data:",l),l}}const tu="/SchoolTreeMap/";function hD(e){const t=e.trim().split(`
`),o=m2(t[0]);return t.slice(1).map(l=>{const h=m2(l),m={};return o.forEach((g,u)=>{m[g]=h[u]||""}),m})}function m2(e){const t=[];let o="",l=!1;for(let h=0;h<e.length;h++){const m=e[h];m==='"'?l=!l:m===","&&!l?(t.push(o.trim()),o=""):o+=m}return t.push(o.trim()),t}async function aT(){try{const e=await fetch(`${tu}schools.csv`);if(!e.ok)throw new Error(`Failed to load schools: ${e.statusText}`);const t=await e.text();return hD(t).map(l=>({id:l.id,schoolName:l.school_name,logo:l.logo?`${tu}${l.logo}`:`${tu}logos/${l.id}.png`,address:l.address,dataUrl:`${tu}${l.data_file||`trees/${l.id}.csv`}`,boundaryUrl:`${tu}${l.boundary_file||`boundaries/${l.id}.geojson`}`,photosUrl:`${tu}${l.photos_folder||`photos/${l.id}`}`}))}catch(e){throw console.error("Error loading schools:",e),e}}function pD(){return new URLSearchParams(window.location.search).get("school")||"wildav"}async function fD(e){const o=(await aT()).find(l=>l.id===e);if(!o)throw new Error(`School not found: ${e}`);return o}async function mD(e){try{const t=await fetch(e);return t.ok?await t.json():(console.warn(`No boundary file found: ${e}`),null)}catch(t){return console.warn(`Error loading boundary: ${e}`,t),null}}function g2(...e){return e.reduce((t,o)=>o==null?t:function(...h){t.apply(this,h),o.apply(this,h)},()=>{})}const tr=AR;function gD(e){return Wt("MuiSvgIcon",e)}Zt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const yD=e=>{const{color:t,fontSize:o,classes:l}=e,h={root:["root",t!=="inherit"&&`color${at(t)}`,`fontSize${at(o)}`]};return Gt(h,gD,l)},_D=ot("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="inherit"&&t[`color${at(o.color)}`],t[`fontSize${at(o.fontSize)}`]]}})(tr(({theme:e})=>{var t,o,l,h,m,g,u,I,M,B,L,A,Z,q;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(h=(t=e.transitions)==null?void 0:t.create)==null?void 0:h.call(t,"fill",{duration:(l=(o=(e.vars??e).transitions)==null?void 0:o.duration)==null?void 0:l.shorter}),variants:[{props:re=>!re.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((g=(m=e.typography)==null?void 0:m.pxToRem)==null?void 0:g.call(m,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((I=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:I.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((B=(M=e.typography)==null?void 0:M.pxToRem)==null?void 0:B.call(M,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,re])=>re&&re.main).map(([re])=>{var le,W;return{props:{color:re},style:{color:(W=(le=(e.vars??e).palette)==null?void 0:le[re])==null?void 0:W.main}}}),{props:{color:"action"},style:{color:(A=(L=(e.vars??e).palette)==null?void 0:L.action)==null?void 0:A.active}},{props:{color:"disabled"},style:{color:(q=(Z=(e.vars??e).palette)==null?void 0:Z.action)==null?void 0:q.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Jv=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiSvgIcon"}),{children:h,className:m,color:g="inherit",component:u="svg",fontSize:I="medium",htmlColor:M,inheritViewBox:B=!1,titleAccess:L,viewBox:A="0 0 24 24",...Z}=l,q=ee.isValidElement(h)&&h.type==="svg",re={...l,color:g,component:u,fontSize:I,instanceFontSize:t.fontSize,inheritViewBox:B,viewBox:A,hasSvgAsChild:q},le={};B||(le.viewBox=A);const W=yD(re);return G.jsxs(_D,{as:u,className:yt(W.root,m),focusable:"false",color:M,"aria-hidden":L?void 0:!0,role:L?"img":void 0,ref:o,...le,...Z,...q&&h.props,ownerState:re,children:[q?h.props.children:h,L?G.jsx("title",{children:L}):null]})});Jv.muiName="SvgIcon";function Ln(e,t){function o(l,h){return G.jsx(Jv,{"data-testid":void 0,ref:h,...l,children:e})}return o.muiName=Jv.muiName,ee.memo(ee.forwardRef(o))}function A0(e,t=166){let o;function l(...h){const m=()=>{e.apply(this,h)};clearTimeout(o),o=setTimeout(m,t)}return l.clear=()=>{clearTimeout(o)},l}function Ko(e){return e&&e.ownerDocument||document}function Yo(e){return Ko(e).defaultView||window}function y2(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function _2(e){const{controlled:t,default:o,name:l,state:h="value"}=e,{current:m}=ee.useRef(t!==void 0),[g,u]=ee.useState(o),I=m?t:g,M=ee.useCallback(B=>{m||u(B)},[]);return[I,M]}function Hl(e){const t=ee.useRef(e);return Xo(()=>{t.current=e}),ee.useRef((...o)=>(0,t.current)(...o)).current}function Zn(...e){const t=ee.useRef(void 0),o=ee.useCallback(l=>{const h=e.map(m=>{if(m==null)return null;if(typeof m=="function"){const g=m,u=g(l);return typeof u=="function"?u:()=>{g(null)}}return m.current=l,()=>{m.current=null}});return()=>{h.forEach(m=>m==null?void 0:m())}},e);return ee.useMemo(()=>e.every(l=>l==null)?null:l=>{t.current&&(t.current(),t.current=void 0),l!=null&&(t.current=o(l))},e)}function vD(e,t){const o=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&o>=65&&o<=90&&typeof t=="function"}function lT(e,t){if(!e)return t;function o(g,u){const I={};return Object.keys(u).forEach(M=>{vD(M,u[M])&&typeof g[M]=="function"&&(I[M]=(...B)=>{g[M](...B),u[M](...B)})}),I}if(typeof e=="function"||typeof t=="function")return g=>{const u=typeof t=="function"?t(g):t,I=typeof e=="function"?e({...g,...u}):e,M=yt(g==null?void 0:g.className,u==null?void 0:u.className,I==null?void 0:I.className),B=o(I,u);return{...u,...I,...B,...!!M&&{className:M},...(u==null?void 0:u.style)&&(I==null?void 0:I.style)&&{style:{...u.style,...I.style}},...(u==null?void 0:u.sx)&&(I==null?void 0:I.sx)&&{sx:[...Array.isArray(u.sx)?u.sx:[u.sx],...Array.isArray(I.sx)?I.sx:[I.sx]]}}};const l=t,h=o(e,l),m=yt(l==null?void 0:l.className,e==null?void 0:e.className);return{...t,...e,...h,...!!m&&{className:m},...(l==null?void 0:l.style)&&(e==null?void 0:e.style)&&{style:{...l.style,...e.style}},...(l==null?void 0:l.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function cT(e,t){if(e==null)return{};var o={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;o[l]=e[l]}return o}function Qv(e,t){return Qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,l){return o.__proto__=l,o},Qv(e,t)}function uT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Qv(e,t)}const v2={disabled:!1},Vm=Eo.createContext(null);var xD=function(t){return t.scrollTop},kh="unmounted",Bl="exited",Fl="entering",nu="entered",ex="exiting",Jo=function(e){uT(t,e);function t(l,h){var m;m=e.call(this,l,h)||this;var g=h,u=g&&!g.isMounting?l.enter:l.appear,I;return m.appearStatus=null,l.in?u?(I=Bl,m.appearStatus=Fl):I=nu:l.unmountOnExit||l.mountOnEnter?I=kh:I=Bl,m.state={status:I},m.nextCallback=null,m}t.getDerivedStateFromProps=function(h,m){var g=h.in;return g&&m.status===kh?{status:Bl}:null};var o=t.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(h){var m=null;if(h!==this.props){var g=this.state.status;this.props.in?g!==Fl&&g!==nu&&(m=Fl):(g===Fl||g===nu)&&(m=ex)}this.updateStatus(!1,m)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var h=this.props.timeout,m,g,u;return m=g=u=h,h!=null&&typeof h!="number"&&(m=h.exit,g=h.enter,u=h.appear!==void 0?h.appear:g),{exit:m,enter:g,appear:u}},o.updateStatus=function(h,m){if(h===void 0&&(h=!1),m!==null)if(this.cancelNextCallback(),m===Fl){if(this.props.unmountOnExit||this.props.mountOnEnter){var g=this.props.nodeRef?this.props.nodeRef.current:Vf.findDOMNode(this);g&&xD(g)}this.performEnter(h)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bl&&this.setState({status:kh})},o.performEnter=function(h){var m=this,g=this.props.enter,u=this.context?this.context.isMounting:h,I=this.props.nodeRef?[u]:[Vf.findDOMNode(this),u],M=I[0],B=I[1],L=this.getTimeouts(),A=u?L.appear:L.enter;if(!h&&!g||v2.disabled){this.safeSetState({status:nu},function(){m.props.onEntered(M)});return}this.props.onEnter(M,B),this.safeSetState({status:Fl},function(){m.props.onEntering(M,B),m.onTransitionEnd(A,function(){m.safeSetState({status:nu},function(){m.props.onEntered(M,B)})})})},o.performExit=function(){var h=this,m=this.props.exit,g=this.getTimeouts(),u=this.props.nodeRef?void 0:Vf.findDOMNode(this);if(!m||v2.disabled){this.safeSetState({status:Bl},function(){h.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:ex},function(){h.props.onExiting(u),h.onTransitionEnd(g.exit,function(){h.safeSetState({status:Bl},function(){h.props.onExited(u)})})})},o.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(h,m){m=this.setNextCallback(m),this.setState(h,m)},o.setNextCallback=function(h){var m=this,g=!0;return this.nextCallback=function(u){g&&(g=!1,m.nextCallback=null,h(u))},this.nextCallback.cancel=function(){g=!1},this.nextCallback},o.onTransitionEnd=function(h,m){this.setNextCallback(m);var g=this.props.nodeRef?this.props.nodeRef.current:Vf.findDOMNode(this),u=h==null&&!this.props.addEndListener;if(!g||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var I=this.props.nodeRef?[this.nextCallback]:[g,this.nextCallback],M=I[0],B=I[1];this.props.addEndListener(M,B)}h!=null&&setTimeout(this.nextCallback,h)},o.render=function(){var h=this.state.status;if(h===kh)return null;var m=this.props,g=m.children;m.in,m.mountOnEnter,m.unmountOnExit,m.appear,m.enter,m.exit,m.timeout,m.addEndListener,m.onEnter,m.onEntering,m.onEntered,m.onExit,m.onExiting,m.onExited,m.nodeRef;var u=cT(m,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Eo.createElement(Vm.Provider,{value:null},typeof g=="function"?g(h,u):Eo.cloneElement(Eo.Children.only(g),u))},t}(Eo.Component);Jo.contextType=Vm;Jo.propTypes={};function ru(){}Jo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ru,onEntering:ru,onEntered:ru,onExit:ru,onExiting:ru,onExited:ru};Jo.UNMOUNTED=kh;Jo.EXITED=Bl;Jo.ENTERING=Fl;Jo.ENTERED=nu;Jo.EXITING=ex;function bD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z0(e,t){var o=function(m){return t&&ee.isValidElement(m)?t(m):m},l=Object.create(null);return e&&ee.Children.map(e,function(h){return h}).forEach(function(h){l[h.key]=o(h)}),l}function wD(e,t){e=e||{},t=t||{};function o(B){return B in t?t[B]:e[B]}var l=Object.create(null),h=[];for(var m in e)m in t?h.length&&(l[m]=h,h=[]):h.push(m);var g,u={};for(var I in t){if(l[I])for(g=0;g<l[I].length;g++){var M=l[I][g];u[l[I][g]]=o(M)}u[I]=o(I)}for(g=0;g<h.length;g++)u[h[g]]=o(h[g]);return u}function Ul(e,t,o){return o[t]!=null?o[t]:e.props[t]}function SD(e,t){return z0(e.children,function(o){return ee.cloneElement(o,{onExited:t.bind(null,o),in:!0,appear:Ul(o,"appear",e),enter:Ul(o,"enter",e),exit:Ul(o,"exit",e)})})}function CD(e,t,o){var l=z0(e.children),h=wD(t,l);return Object.keys(h).forEach(function(m){var g=h[m];if(ee.isValidElement(g)){var u=m in t,I=m in l,M=t[m],B=ee.isValidElement(M)&&!M.props.in;I&&(!u||B)?h[m]=ee.cloneElement(g,{onExited:o.bind(null,g),in:!0,exit:Ul(g,"exit",e),enter:Ul(g,"enter",e)}):!I&&u&&!B?h[m]=ee.cloneElement(g,{in:!1}):I&&u&&ee.isValidElement(M)&&(h[m]=ee.cloneElement(g,{onExited:o.bind(null,g),in:M.props.in,exit:Ul(g,"exit",e),enter:Ul(g,"enter",e)}))}}),h}var kD=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},TD={component:"div",childFactory:function(t){return t}},R0=function(e){uT(t,e);function t(l,h){var m;m=e.call(this,l,h)||this;var g=m.handleExited.bind(bD(m));return m.state={contextValue:{isMounting:!0},handleExited:g,firstRender:!0},m}var o=t.prototype;return o.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},o.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(h,m){var g=m.children,u=m.handleExited,I=m.firstRender;return{children:I?SD(h,u):CD(h,g,u),firstRender:!1}},o.handleExited=function(h,m){var g=z0(this.props.children);h.key in g||(h.props.onExited&&h.props.onExited(m),this.mounted&&this.setState(function(u){var I=Om({},u.children);return delete I[h.key],{children:I}}))},o.render=function(){var h=this.props,m=h.component,g=h.childFactory,u=cT(h,["component","childFactory"]),I=this.state.contextValue,M=kD(this.state.children).map(g);return delete u.appear,delete u.enter,delete u.exit,m===null?Eo.createElement(Vm.Provider,{value:I},M):Eo.createElement(Vm.Provider,{value:I},Eo.createElement(m,u,M))},t}(Eo.Component);R0.propTypes={};R0.defaultProps=TD;const x2={};function dT(e,t){const o=ee.useRef(x2);return o.current===x2&&(o.current=e(t)),o}const ID=[];function ED(e){ee.useEffect(e,ID)}class D0{constructor(){nh(this,"currentId",null);nh(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});nh(this,"disposeEffect",()=>this.clear)}static create(){return new D0}start(t,o){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,o()},t)}}function hT(){const e=dT(D0.create).current;return ED(e.disposeEffect),e}const L0=e=>e.scrollTop;function Lu(e,t){const{timeout:o,easing:l,style:h={}}=e;return{duration:h.transitionDuration??(typeof o=="number"?o:o[t.mode]||0),easing:h.transitionTimingFunction??(typeof l=="object"?l[t.mode]:l),delay:h.transitionDelay}}function Bu(e){return typeof e=="string"}function pT(e,t,o){return e===void 0||Bu(e)?t:{...t,ownerState:{...t.ownerState,...o}}}function fT(e,t,o){return typeof e=="function"?e(t,o):e}function mT(e,t=[]){if(e===void 0)return{};const o={};return Object.keys(e).filter(l=>l.match(/^on[A-Z]/)&&typeof e[l]=="function"&&!t.includes(l)).forEach(l=>{o[l]=e[l]}),o}function b2(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(o=>!(o.match(/^on[A-Z]/)&&typeof e[o]=="function")).forEach(o=>{t[o]=e[o]}),t}function gT(e){const{getSlotProps:t,additionalProps:o,externalSlotProps:l,externalForwardedProps:h,className:m}=e;if(!t){const Z=yt(o==null?void 0:o.className,m,h==null?void 0:h.className,l==null?void 0:l.className),q={...o==null?void 0:o.style,...h==null?void 0:h.style,...l==null?void 0:l.style},re={...o,...h,...l};return Z.length>0&&(re.className=Z),Object.keys(q).length>0&&(re.style=q),{props:re,internalRef:void 0}}const g=mT({...h,...l}),u=b2(l),I=b2(h),M=t(g),B=yt(M==null?void 0:M.className,o==null?void 0:o.className,m,h==null?void 0:h.className,l==null?void 0:l.className),L={...M==null?void 0:M.style,...o==null?void 0:o.style,...h==null?void 0:h.style,...l==null?void 0:l.style},A={...M,...o,...I,...u};return B.length>0&&(A.className=B),Object.keys(L).length>0&&(A.style=L),{props:A,internalRef:M.ref}}function pr(e,t){const{className:o,elementType:l,ownerState:h,externalForwardedProps:m,internalForwardedProps:g,shouldForwardComponentProp:u=!1,...I}=t,{component:M,slots:B={[e]:void 0},slotProps:L={[e]:void 0},...A}=m,Z=B[e]||l,q=fT(L[e],h),{props:{component:re,...le},internalRef:W}=gT({className:o,...I,externalForwardedProps:e==="root"?A:void 0,externalSlotProps:q}),j=Zn(W,q==null?void 0:q.ref,t.ref),V=e==="root"?re||M:re,Q=pT(Z,{...e==="root"&&!M&&!B[e]&&g,...e!=="root"&&!B[e]&&g,...le,...V&&!u&&{as:V},...V&&u&&{component:V},ref:j},h);return[Z,Q]}function PD(e){return Wt("MuiPaper",e)}Zt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const MD=e=>{const{square:t,elevation:o,variant:l,classes:h}=e,m={root:["root",l,!t&&"rounded",l==="elevation"&&`elevation${o}`]};return Gt(m,PD,h)},AD=ot("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],!o.square&&t.rounded,o.variant==="elevation"&&t[`elevation${o.elevation}`]]}})(tr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),rl=ee.forwardRef(function(t,o){var Z;const l=Ht({props:t,name:"MuiPaper"}),h=tl(),{className:m,component:g="div",elevation:u=1,square:I=!1,variant:M="elevation",...B}=l,L={...l,component:g,elevation:u,square:I,variant:M},A=MD(L);return G.jsx(AD,{as:g,ownerState:L,className:yt(A.root,m),ref:o,...B,style:{...M==="elevation"&&{"--Paper-shadow":(h.vars||h).shadows[u],...h.vars&&{"--Paper-overlay":(Z=h.vars.overlays)==null?void 0:Z[u]},...!h.vars&&h.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ap("#fff",Kv(u))}, ${ap("#fff",Kv(u))})`}},...B.style}})});function Um(e){try{return e.matches(":focus-visible")}catch{}return!1}class Wm{constructor(){nh(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Wm}static use(){const t=dT(Wm.create).current,[o,l]=ee.useState(!1);return t.shouldMount=o,t.setShouldMount=l,ee.useEffect(t.mountEffect,[o]),t}mount(){return this.mounted||(this.mounted=RD(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var o;return(o=this.ref.current)==null?void 0:o.start(...t)})}stop(...t){this.mount().then(()=>{var o;return(o=this.ref.current)==null?void 0:o.stop(...t)})}pulsate(...t){this.mount().then(()=>{var o;return(o=this.ref.current)==null?void 0:o.pulsate(...t)})}}function zD(){return Wm.use()}function RD(){let e,t;const o=new Promise((l,h)=>{e=l,t=h});return o.resolve=e,o.reject=t,o}function DD(e){const{className:t,classes:o,pulsate:l=!1,rippleX:h,rippleY:m,rippleSize:g,in:u,onExited:I,timeout:M}=e,[B,L]=ee.useState(!1),A=yt(t,o.ripple,o.rippleVisible,l&&o.ripplePulsate),Z={width:g,height:g,top:-(g/2)+m,left:-(g/2)+h},q=yt(o.child,B&&o.childLeaving,l&&o.childPulsate);return!u&&!B&&L(!0),ee.useEffect(()=>{if(!u&&I!=null){const re=setTimeout(I,M);return()=>{clearTimeout(re)}}},[I,u,M]),G.jsx("span",{className:A,style:Z,children:G.jsx("span",{className:q})})}const So=Zt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),tx=550,LD=80,BD=_p`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,FD=_p`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,OD=_p`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,$D=ot("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ND=ot(DD,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${So.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${BD};
    animation-duration: ${tx}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${So.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${So.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${So.childLeaving} {
    opacity: 0;
    animation-name: ${FD};
    animation-duration: ${tx}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${So.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${OD};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,jD=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiTouchRipple"}),{center:h=!1,classes:m={},className:g,...u}=l,[I,M]=ee.useState([]),B=ee.useRef(0),L=ee.useRef(null);ee.useEffect(()=>{L.current&&(L.current(),L.current=null)},[I]);const A=ee.useRef(!1),Z=hT(),q=ee.useRef(null),re=ee.useRef(null),le=ee.useCallback(Q=>{const{pulsate:pe,rippleX:de,rippleY:_e,rippleSize:ge,cb:Ae}=Q;M(Re=>[...Re,G.jsx(ND,{classes:{ripple:yt(m.ripple,So.ripple),rippleVisible:yt(m.rippleVisible,So.rippleVisible),ripplePulsate:yt(m.ripplePulsate,So.ripplePulsate),child:yt(m.child,So.child),childLeaving:yt(m.childLeaving,So.childLeaving),childPulsate:yt(m.childPulsate,So.childPulsate)},timeout:tx,pulsate:pe,rippleX:de,rippleY:_e,rippleSize:ge},B.current)]),B.current+=1,L.current=Ae},[m]),W=ee.useCallback((Q={},pe={},de=()=>{})=>{const{pulsate:_e=!1,center:ge=h||pe.pulsate,fakeElement:Ae=!1}=pe;if((Q==null?void 0:Q.type)==="mousedown"&&A.current){A.current=!1;return}(Q==null?void 0:Q.type)==="touchstart"&&(A.current=!0);const Re=Ae?null:re.current,De=Re?Re.getBoundingClientRect():{width:0,height:0,left:0,top:0};let X,Me,Ie;if(ge||Q===void 0||Q.clientX===0&&Q.clientY===0||!Q.clientX&&!Q.touches)X=Math.round(De.width/2),Me=Math.round(De.height/2);else{const{clientX:Le,clientY:$e}=Q.touches&&Q.touches.length>0?Q.touches[0]:Q;X=Math.round(Le-De.left),Me=Math.round($e-De.top)}if(ge)Ie=Math.sqrt((2*De.width**2+De.height**2)/3),Ie%2===0&&(Ie+=1);else{const Le=Math.max(Math.abs((Re?Re.clientWidth:0)-X),X)*2+2,$e=Math.max(Math.abs((Re?Re.clientHeight:0)-Me),Me)*2+2;Ie=Math.sqrt(Le**2+$e**2)}Q!=null&&Q.touches?q.current===null&&(q.current=()=>{le({pulsate:_e,rippleX:X,rippleY:Me,rippleSize:Ie,cb:de})},Z.start(LD,()=>{q.current&&(q.current(),q.current=null)})):le({pulsate:_e,rippleX:X,rippleY:Me,rippleSize:Ie,cb:de})},[h,le,Z]),j=ee.useCallback(()=>{W({},{pulsate:!0})},[W]),V=ee.useCallback((Q,pe)=>{if(Z.clear(),(Q==null?void 0:Q.type)==="touchend"&&q.current){q.current(),q.current=null,Z.start(0,()=>{V(Q,pe)});return}q.current=null,M(de=>de.length>0?de.slice(1):de),L.current=pe},[Z]);return ee.useImperativeHandle(o,()=>({pulsate:j,start:W,stop:V}),[j,W,V]),G.jsx($D,{className:yt(So.root,m.root,g),ref:re,...u,children:G.jsx(R0,{component:null,exit:!0,children:I})})});function VD(e){return Wt("MuiButtonBase",e)}const UD=Zt("MuiButtonBase",["root","disabled","focusVisible"]),WD=e=>{const{disabled:t,focusVisible:o,focusVisibleClassName:l,classes:h}=e,g=Gt({root:["root",t&&"disabled",o&&"focusVisible"]},VD,h);return o&&l&&(g.root+=` ${l}`),g},GD=ot("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${UD.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Gu=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiButtonBase"}),{action:h,centerRipple:m=!1,children:g,className:u,component:I="button",disabled:M=!1,disableRipple:B=!1,disableTouchRipple:L=!1,focusRipple:A=!1,focusVisibleClassName:Z,LinkComponent:q="a",onBlur:re,onClick:le,onContextMenu:W,onDragLeave:j,onFocus:V,onFocusVisible:Q,onKeyDown:pe,onKeyUp:de,onMouseDown:_e,onMouseLeave:ge,onMouseUp:Ae,onTouchEnd:Re,onTouchMove:De,onTouchStart:X,tabIndex:Me=0,TouchRippleProps:Ie,touchRippleRef:Le,type:$e,...Ke}=l,be=ee.useRef(null),Ee=zD(),We=Zn(Ee.ref,Le),[Ze,Ge]=ee.useState(!1);M&&Ze&&Ge(!1),ee.useImperativeHandle(h,()=>({focusVisible:()=>{Ge(!0),be.current.focus()}}),[]);const Ct=Ee.shouldMount&&!B&&!M;ee.useEffect(()=>{Ze&&A&&!B&&Ee.pulsate()},[B,A,Ze,Ee]);const Dt=$s(Ee,"start",_e,L),$t=$s(Ee,"stop",W,L),Ut=$s(Ee,"stop",j,L),Rt=$s(Ee,"stop",Ae,L),mr=$s(Ee,"stop",xt=>{Ze&&xt.preventDefault(),ge&&ge(xt)},L),Jt=$s(Ee,"start",X,L),vt=$s(Ee,"stop",Re,L),Kt=$s(Ee,"stop",De,L),Xt=$s(Ee,"stop",xt=>{Um(xt.target)||Ge(!1),re&&re(xt)},!1),_r=Hl(xt=>{be.current||(be.current=xt.currentTarget),Um(xt.target)&&(Ge(!0),Q&&Q(xt)),V&&V(xt)}),Nt=()=>{const xt=be.current;return I&&I!=="button"&&!(xt.tagName==="A"&&xt.href)},lr=Hl(xt=>{A&&!xt.repeat&&Ze&&xt.key===" "&&Ee.stop(xt,()=>{Ee.start(xt)}),xt.target===xt.currentTarget&&Nt()&&xt.key===" "&&xt.preventDefault(),pe&&pe(xt),xt.target===xt.currentTarget&&Nt()&&xt.key==="Enter"&&!M&&(xt.preventDefault(),le&&le(xt))}),ze=Hl(xt=>{A&&xt.key===" "&&Ze&&!xt.defaultPrevented&&Ee.stop(xt,()=>{Ee.pulsate(xt)}),de&&de(xt),le&&xt.target===xt.currentTarget&&Nt()&&xt.key===" "&&!xt.defaultPrevented&&le(xt)});let $r=I;$r==="button"&&(Ke.href||Ke.to)&&($r=q);const kr={};if($r==="button"){const xt=!!Ke.formAction;kr.type=$e===void 0&&!xt?"button":$e,kr.disabled=M}else!Ke.href&&!Ke.to&&(kr.role="button"),M&&(kr["aria-disabled"]=M);const At=Zn(o,be),er={...l,centerRipple:m,component:I,disabled:M,disableRipple:B,disableTouchRipple:L,focusRipple:A,tabIndex:Me,focusVisible:Ze},br=WD(er);return G.jsxs(GD,{as:$r,className:yt(br.root,u),ownerState:er,onBlur:Xt,onClick:le,onContextMenu:$t,onFocus:_r,onKeyDown:lr,onKeyUp:ze,onMouseDown:Dt,onMouseLeave:mr,onMouseUp:Rt,onDragLeave:Ut,onTouchEnd:vt,onTouchMove:Kt,onTouchStart:Jt,ref:At,tabIndex:M?-1:Me,type:$e,...kr,...Ke,children:[g,Ct?G.jsx(jD,{ref:We,center:m,...Ie}):null]})});function $s(e,t,o,l=!1){return Hl(h=>(o&&o(h),l||e[t](h),!0))}function HD(e){return typeof e.main=="string"}function qD(e,t=[]){if(!HD(e))return!1;for(const o of t)if(!e.hasOwnProperty(o)||typeof e[o]!="string")return!1;return!0}function ii(e=[]){return([,t])=>t&&qD(t,e)}function ZD(e){return Wt("MuiAlert",e)}const w2=Zt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function XD(e){return Wt("MuiCircularProgress",e)}Zt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const jo=44,rx=_p`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,nx=_p`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,KD=typeof rx!="string"?m0`
        animation: ${rx} 1.4s linear infinite;
      `:null,YD=typeof nx!="string"?m0`
        animation: ${nx} 1.4s ease-in-out infinite;
      `:null,JD=e=>{const{classes:t,variant:o,color:l,disableShrink:h}=e,m={root:["root",o,`color${at(l)}`],svg:["svg"],track:["track"],circle:["circle",`circle${at(o)}`,h&&"circleDisableShrink"]};return Gt(m,XD,t)},QD=ot("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`color${at(o.color)}`]]}})(tr(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:KD||{animation:`${rx} 1.4s linear infinite`}},...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),eL=ot("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),tL=ot("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.circle,t[`circle${at(o.variant)}`],o.disableShrink&&t.circleDisableShrink]}})(tr(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:YD||{animation:`${nx} 1.4s ease-in-out infinite`}}]}))),rL=ot("circle",{name:"MuiCircularProgress",slot:"Track"})(tr(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),cp=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiCircularProgress"}),{className:h,color:m="primary",disableShrink:g=!1,enableTrackSlot:u=!1,size:I=40,style:M,thickness:B=3.6,value:L=0,variant:A="indeterminate",...Z}=l,q={...l,color:m,disableShrink:g,size:I,thickness:B,value:L,variant:A,enableTrackSlot:u},re=JD(q),le={},W={},j={};if(A==="determinate"){const V=2*Math.PI*((jo-B)/2);le.strokeDasharray=V.toFixed(3),j["aria-valuenow"]=Math.round(L),le.strokeDashoffset=`${((100-L)/100*V).toFixed(3)}px`,W.transform="rotate(-90deg)"}return G.jsx(QD,{className:yt(re.root,h),style:{width:I,height:I,...W,...M},ownerState:q,ref:o,role:"progressbar",...j,...Z,children:G.jsxs(eL,{className:re.svg,ownerState:q,viewBox:`${jo/2} ${jo/2} ${jo} ${jo}`,children:[u?G.jsx(rL,{className:re.track,ownerState:q,cx:jo,cy:jo,r:(jo-B)/2,fill:"none",strokeWidth:B,"aria-hidden":"true"}):null,G.jsx(tL,{className:re.circle,style:le,ownerState:q,cx:jo,cy:jo,r:(jo-B)/2,fill:"none",strokeWidth:B})]})})});function nL(e){return Wt("MuiIconButton",e)}const S2=Zt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),iL=e=>{const{classes:t,disabled:o,color:l,edge:h,size:m,loading:g}=e,u={root:["root",g&&"loading",o&&"disabled",l!=="default"&&`color${at(l)}`,h&&`edge${at(h)}`,`size${at(m)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Gt(u,nL,t)},oL=ot(Gu,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.loading&&t.loading,o.color!=="default"&&t[`color${at(o.color)}`],o.edge&&t[`edge${at(o.edge)}`],t[`size${at(o.size)}`]]}})(tr(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),tr(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${S2.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${S2.loading}`]:{color:"transparent"}}))),sL=ot("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),ix=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiIconButton"}),{edge:h=!1,children:m,className:g,color:u="default",disabled:I=!1,disableFocusRipple:M=!1,size:B="medium",id:L,loading:A=null,loadingIndicator:Z,...q}=l,re=Uu(L),le=Z??G.jsx(cp,{"aria-labelledby":re,color:"inherit",size:16}),W={...l,edge:h,color:u,disabled:I,disableFocusRipple:M,loading:A,loadingIndicator:le,size:B},j=iL(W);return G.jsxs(oL,{id:A?re:L,className:yt(j.root,g),centerRipple:!0,focusRipple:!M,disabled:I||A,ref:o,...q,ownerState:W,children:[typeof A=="boolean"&&G.jsx("span",{className:j.loadingWrapper,style:{display:"contents"},children:G.jsx(sL,{className:j.loadingIndicator,ownerState:W,children:A&&le})}),m]})}),aL=Ln(G.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),lL=Ln(G.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),cL=Ln(G.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),uL=Ln(G.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),dL=Ln(G.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),hL=e=>{const{variant:t,color:o,severity:l,classes:h}=e,m={root:["root",`color${at(o||l)}`,`${t}${at(o||l)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Gt(m,ZD,h)},pL=ot(rl,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`${o.variant}${at(o.color||o.severity)}`]]}})(tr(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,o=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(ii(["light"])).map(([l])=>({props:{colorSeverity:l,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${l}Color`]:t(e.palette[l].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${l}StandardBg`]:o(e.palette[l].light,.9),[`& .${w2.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette[l].main}}})),...Object.entries(e.palette).filter(ii(["light"])).map(([l])=>({props:{colorSeverity:l,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${l}Color`]:t(e.palette[l].light,.6),border:`1px solid ${(e.vars||e).palette[l].light}`,[`& .${w2.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette[l].main}}})),...Object.entries(e.palette).filter(ii(["dark"])).map(([l])=>({props:{colorSeverity:l,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${l}FilledColor`],backgroundColor:e.vars.palette.Alert[`${l}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[l].dark:e.palette[l].main,color:e.palette.getContrastText(e.palette[l].main)}}}))]}})),fL=ot("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),mL=ot("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),gL=ot("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),C2={success:G.jsx(aL,{fontSize:"inherit"}),warning:G.jsx(lL,{fontSize:"inherit"}),error:G.jsx(cL,{fontSize:"inherit"}),info:G.jsx(uL,{fontSize:"inherit"})},yL=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiAlert"}),{action:h,children:m,className:g,closeText:u="Close",color:I,components:M={},componentsProps:B={},icon:L,iconMapping:A=C2,onClose:Z,role:q="alert",severity:re="success",slotProps:le={},slots:W={},variant:j="standard",...V}=l,Q={...l,color:I,severity:re,variant:j,colorSeverity:I||re},pe=hL(Q),de={slots:{closeButton:M.CloseButton,closeIcon:M.CloseIcon,...W},slotProps:{...B,...le}},[_e,ge]=pr("root",{ref:o,shouldForwardComponentProp:!0,className:yt(pe.root,g),elementType:pL,externalForwardedProps:{...de,...V},ownerState:Q,additionalProps:{role:q,elevation:0}}),[Ae,Re]=pr("icon",{className:pe.icon,elementType:fL,externalForwardedProps:de,ownerState:Q}),[De,X]=pr("message",{className:pe.message,elementType:mL,externalForwardedProps:de,ownerState:Q}),[Me,Ie]=pr("action",{className:pe.action,elementType:gL,externalForwardedProps:de,ownerState:Q}),[Le,$e]=pr("closeButton",{elementType:ix,externalForwardedProps:de,ownerState:Q}),[Ke,be]=pr("closeIcon",{elementType:dL,externalForwardedProps:de,ownerState:Q});return G.jsxs(_e,{...ge,children:[L!==!1?G.jsx(Ae,{...Re,children:L||A[re]||C2[re]}):null,G.jsx(De,{...X,children:m}),h!=null?G.jsx(Me,{...Ie,children:h}):null,h==null&&Z?G.jsx(Me,{...Ie,children:G.jsx(Le,{size:"small","aria-label":u,title:u,color:"inherit",onClick:Z,...$e,children:G.jsx(Ke,{fontSize:"small",...be})})}):null]})});function _L(e){return Wt("MuiTypography",e)}const k2=Zt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),vL={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},xL=rD(),bL=e=>{const{align:t,gutterBottom:o,noWrap:l,paragraph:h,variant:m,classes:g}=e,u={root:["root",m,e.align!=="inherit"&&`align${at(t)}`,o&&"gutterBottom",l&&"noWrap",h&&"paragraph"]};return Gt(u,_L,g)},wL=ot("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.variant&&t[o.variant],o.align!=="inherit"&&t[`align${at(o.align)}`],o.noWrap&&t.noWrap,o.gutterBottom&&t.gutterBottom,o.paragraph&&t.paragraph]}})(tr(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([o,l])=>o!=="inherit"&&l&&typeof l=="object").map(([o,l])=>({props:{variant:o},style:l})),...Object.entries(e.palette).filter(ii()).map(([o])=>({props:{color:o},style:{color:(e.vars||e).palette[o].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,o])=>typeof o=="string").map(([o])=>({props:{color:`text${at(o)}`},style:{color:(e.vars||e).palette.text[o]}})),{props:({ownerState:o})=>o.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:o})=>o.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:o})=>o.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:o})=>o.paragraph,style:{marginBottom:16}}]}})),T2={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Vt=ee.forwardRef(function(t,o){const{color:l,...h}=Ht({props:t,name:"MuiTypography"}),m=!vL[l],g=xL({...h,...m&&{color:l}}),{align:u="inherit",className:I,component:M,gutterBottom:B=!1,noWrap:L=!1,paragraph:A=!1,variant:Z="body1",variantMapping:q=T2,...re}=g,le={...g,align:u,color:l,className:I,component:M,gutterBottom:B,noWrap:L,paragraph:A,variant:Z,variantMapping:q},W=M||(A?"p":q[Z]||T2[Z])||"span",j=bL(le);return G.jsx(wL,{as:W,ref:o,className:yt(j.root,I),...re,ownerState:le,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...re.style}})});function SL(e){return Wt("MuiAppBar",e)}Zt("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const CL=e=>{const{color:t,position:o,classes:l}=e,h={root:["root",`color${at(t)}`,`position${at(o)}`]};return Gt(h,SL,l)},I2=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,kL=ot(rl,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`position${at(o.position)}`],t[`color${at(o.color)}`]]}})(tr(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(ii(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?I2(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?I2(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),TL=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiAppBar"}),{className:h,color:m="primary",enableColorOnDark:g=!1,position:u="fixed",...I}=l,M={...l,color:m,position:u,enableColorOnDark:g},B=CL(M);return G.jsx(kL,{square:!0,component:"header",ownerState:M,elevation:4,className:yt(B.root,h,u==="fixed"&&"mui-fixed"),ref:o,...I})});function IL(e){var L;const{elementType:t,externalSlotProps:o,ownerState:l,skipResolvingSlotProps:h=!1,...m}=e,g=h?{}:fT(o,l),{props:u,internalRef:I}=gT({...m,externalSlotProps:g}),M=Zn(I,g==null?void 0:g.ref,(L=e.additionalProps)==null?void 0:L.ref);return pT(t,{...u,ref:M},l)}function Hu(e){var t;return parseInt(ee.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function EL(e){return typeof e=="function"?e():e}const PL=ee.forwardRef(function(t,o){const{children:l,container:h,disablePortal:m=!1}=t,[g,u]=ee.useState(null),I=Zn(ee.isValidElement(l)?Hu(l):null,o);if(Xo(()=>{m||u(EL(h)||document.body)},[h,m]),Xo(()=>{if(g&&!m)return y2(o,g),()=>{y2(o,null)}},[o,g,m]),m){if(ee.isValidElement(l)){const M={ref:I};return ee.cloneElement(l,M)}return l}return g&&i0.createPortal(l,g)});function qf(e){return parseInt(e,10)||0}const ML={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function AL(e){for(const t in e)return!1;return!0}function E2(e){return AL(e)||e.outerHeightStyle===0&&!e.overflowing}const zL=ee.forwardRef(function(t,o){const{onChange:l,maxRows:h,minRows:m=1,style:g,value:u,...I}=t,{current:M}=ee.useRef(u!=null),B=ee.useRef(null),L=Zn(o,B),A=ee.useRef(null),Z=ee.useRef(null),q=ee.useCallback(()=>{const V=B.current,Q=Z.current;if(!V||!Q)return;const de=Yo(V).getComputedStyle(V);if(de.width==="0px")return{outerHeightStyle:0,overflowing:!1};Q.style.width=de.width,Q.value=V.value||t.placeholder||"x",Q.value.slice(-1)===`
`&&(Q.value+=" ");const _e=de.boxSizing,ge=qf(de.paddingBottom)+qf(de.paddingTop),Ae=qf(de.borderBottomWidth)+qf(de.borderTopWidth),Re=Q.scrollHeight;Q.value="x";const De=Q.scrollHeight;let X=Re;m&&(X=Math.max(Number(m)*De,X)),h&&(X=Math.min(Number(h)*De,X)),X=Math.max(X,De);const Me=X+(_e==="border-box"?ge+Ae:0),Ie=Math.abs(X-Re)<=1;return{outerHeightStyle:Me,overflowing:Ie}},[h,m,t.placeholder]),re=Hl(()=>{const V=B.current,Q=q();if(!V||!Q||E2(Q))return!1;const pe=Q.outerHeightStyle;return A.current!=null&&A.current!==pe}),le=ee.useCallback(()=>{const V=B.current,Q=q();if(!V||!Q||E2(Q))return;const pe=Q.outerHeightStyle;A.current!==pe&&(A.current=pe,V.style.height=`${pe}px`),V.style.overflow=Q.overflowing?"hidden":""},[q]),W=ee.useRef(-1);Xo(()=>{const V=A0(le),Q=B==null?void 0:B.current;if(!Q)return;const pe=Yo(Q);pe.addEventListener("resize",V);let de;return typeof ResizeObserver<"u"&&(de=new ResizeObserver(()=>{re()&&(de.unobserve(Q),cancelAnimationFrame(W.current),le(),W.current=requestAnimationFrame(()=>{de.observe(Q)}))}),de.observe(Q)),()=>{V.clear(),cancelAnimationFrame(W.current),pe.removeEventListener("resize",V),de&&de.disconnect()}},[q,le,re]),Xo(()=>{le()});const j=V=>{M||le();const Q=V.target,pe=Q.value.length,de=Q.value.endsWith(`
`),_e=Q.selectionStart===pe;de&&_e&&Q.setSelectionRange(pe,pe),l&&l(V)};return G.jsxs(ee.Fragment,{children:[G.jsx("textarea",{value:u,onChange:j,ref:L,rows:m,style:g,...I}),G.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:Z,tabIndex:-1,style:{...ML.shadow,...g,paddingTop:0,paddingBottom:0}})]})});function qu({props:e,states:t,muiFormControl:o}){return t.reduce((l,h)=>(l[h]=e[h],o&&typeof e[h]>"u"&&(l[h]=o[h]),l),{})}const B0=ee.createContext(void 0);function Zu(){return ee.useContext(B0)}function P2(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Gm(e,t=!1){return e&&(P2(e.value)&&e.value!==""||t&&P2(e.defaultValue)&&e.defaultValue!=="")}function RL(e){return e.startAdornment}function DL(e){return Wt("MuiInputBase",e)}const Fu=Zt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var M2;const Wg=(e,t)=>{const{ownerState:o}=e;return[t.root,o.formControl&&t.formControl,o.startAdornment&&t.adornedStart,o.endAdornment&&t.adornedEnd,o.error&&t.error,o.size==="small"&&t.sizeSmall,o.multiline&&t.multiline,o.color&&t[`color${at(o.color)}`],o.fullWidth&&t.fullWidth,o.hiddenLabel&&t.hiddenLabel]},Gg=(e,t)=>{const{ownerState:o}=e;return[t.input,o.size==="small"&&t.inputSizeSmall,o.multiline&&t.inputMultiline,o.type==="search"&&t.inputTypeSearch,o.startAdornment&&t.inputAdornedStart,o.endAdornment&&t.inputAdornedEnd,o.hiddenLabel&&t.inputHiddenLabel]},LL=e=>{const{classes:t,color:o,disabled:l,error:h,endAdornment:m,focused:g,formControl:u,fullWidth:I,hiddenLabel:M,multiline:B,readOnly:L,size:A,startAdornment:Z,type:q}=e,re={root:["root",`color${at(o)}`,l&&"disabled",h&&"error",I&&"fullWidth",g&&"focused",u&&"formControl",A&&A!=="medium"&&`size${at(A)}`,B&&"multiline",Z&&"adornedStart",m&&"adornedEnd",M&&"hiddenLabel",L&&"readOnly"],input:["input",l&&"disabled",q==="search"&&"inputTypeSearch",B&&"inputMultiline",A==="small"&&"inputSizeSmall",M&&"inputHiddenLabel",Z&&"inputAdornedStart",m&&"inputAdornedEnd",L&&"readOnly"]};return Gt(re,DL,t)},Hg=ot("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Wg})(tr(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Fu.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:o})=>t.multiline&&o==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),qg=ot("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Gg})(tr(({theme:e})=>{const t=e.palette.mode==="light",o={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},l={opacity:"0 !important"},h=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Fu.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":h,"&:focus::-moz-placeholder":h,"&:focus::-ms-input-placeholder":h},[`&.${Fu.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:m})=>!m.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:m})=>m.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),A2=M0({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),F0=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiInputBase"}),{"aria-describedby":h,autoComplete:m,autoFocus:g,className:u,color:I,components:M={},componentsProps:B={},defaultValue:L,disabled:A,disableInjectingGlobalStyles:Z,endAdornment:q,error:re,fullWidth:le=!1,id:W,inputComponent:j="input",inputProps:V={},inputRef:Q,margin:pe,maxRows:de,minRows:_e,multiline:ge=!1,name:Ae,onBlur:Re,onChange:De,onClick:X,onFocus:Me,onKeyDown:Ie,onKeyUp:Le,placeholder:$e,readOnly:Ke,renderSuffix:be,rows:Ee,size:We,slotProps:Ze={},slots:Ge={},startAdornment:Ct,type:Dt="text",value:$t,...Ut}=l,Rt=V.value!=null?V.value:$t,{current:mr}=ee.useRef(Rt!=null),Jt=ee.useRef(),vt=ee.useCallback(zt=>{},[]),Kt=Zn(Jt,Q,V.ref,vt),[Xt,_r]=ee.useState(!1),Nt=Zu(),lr=qu({props:l,muiFormControl:Nt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});lr.focused=Nt?Nt.focused:Xt,ee.useEffect(()=>{!Nt&&A&&Xt&&(_r(!1),Re&&Re())},[Nt,A,Xt,Re]);const ze=Nt&&Nt.onFilled,$r=Nt&&Nt.onEmpty,kr=ee.useCallback(zt=>{Gm(zt)?ze&&ze():$r&&$r()},[ze,$r]);Xo(()=>{mr&&kr({value:Rt})},[Rt,kr,mr]);const At=zt=>{Me&&Me(zt),V.onFocus&&V.onFocus(zt),Nt&&Nt.onFocus?Nt.onFocus(zt):_r(!0)},er=zt=>{Re&&Re(zt),V.onBlur&&V.onBlur(zt),Nt&&Nt.onBlur?Nt.onBlur(zt):_r(!1)},br=(zt,...Nr)=>{if(!mr){const qe=zt.target||Jt.current;if(qe==null)throw new Error(Ks(1));kr({value:qe.value})}V.onChange&&V.onChange(zt,...Nr),De&&De(zt,...Nr)};ee.useEffect(()=>{kr(Jt.current)},[]);const xt=zt=>{Jt.current&&zt.currentTarget===zt.target&&Jt.current.focus(),X&&X(zt)};let _n=j,Tr=V;ge&&_n==="input"&&(Ee?Tr={type:void 0,minRows:Ee,maxRows:Ee,...Tr}:Tr={type:void 0,maxRows:de,minRows:_e,...Tr},_n=zL);const un=zt=>{kr(zt.animationName==="mui-auto-fill-cancel"?Jt.current:{value:"x"})};ee.useEffect(()=>{Nt&&Nt.setAdornedStart(!!Ct)},[Nt,Ct]);const En={...l,color:lr.color||"primary",disabled:lr.disabled,endAdornment:q,error:lr.error,focused:lr.focused,formControl:Nt,fullWidth:le,hiddenLabel:lr.hiddenLabel,multiline:ge,size:lr.size,startAdornment:Ct,type:Dt},Bn=LL(En),Xe=Ge.root||M.Root||Hg,dn=Ze.root||B.root||{},cr=Ge.input||M.Input||qg;return Tr={...Tr,...Ze.input??B.input},G.jsxs(ee.Fragment,{children:[!Z&&typeof A2=="function"&&(M2||(M2=G.jsx(A2,{}))),G.jsxs(Xe,{...dn,ref:o,onClick:xt,...Ut,...!Bu(Xe)&&{ownerState:{...En,...dn.ownerState}},className:yt(Bn.root,dn.className,u,Ke&&"MuiInputBase-readOnly"),children:[Ct,G.jsx(B0.Provider,{value:null,children:G.jsx(cr,{"aria-invalid":lr.error,"aria-describedby":h,autoComplete:m,autoFocus:g,defaultValue:L,disabled:lr.disabled,id:W,onAnimationStart:un,name:Ae,placeholder:$e,readOnly:Ke,required:lr.required,rows:Ee,value:Rt,onKeyDown:Ie,onKeyUp:Le,type:Dt,...Tr,...!Bu(cr)&&{as:_n,ownerState:{...En,...Tr.ownerState}},ref:Kt,className:yt(Bn.input,Tr.className,Ke&&"MuiInputBase-readOnly"),onBlur:er,onChange:br,onFocus:At})}),q,be?be({...lr,startAdornment:Ct}):null]})]})});function BL(e){return Wt("MuiInput",e)}const fh={...Fu,...Zt("MuiInput",["root","underline","input"])};function FL(e){return Wt("MuiOutlinedInput",e)}const cs={...Fu,...Zt("MuiOutlinedInput",["root","notchedOutline","input"])};function OL(e){return Wt("MuiFilledInput",e)}const Al={...Fu,...Zt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},$L=Ln(G.jsx("path",{d:"M7 10l5 5 5-5z"})),NL={entering:{opacity:1},entered:{opacity:1}},ox=ee.forwardRef(function(t,o){const l=tl(),h={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:m,appear:g=!0,children:u,easing:I,in:M,onEnter:B,onEntered:L,onEntering:A,onExit:Z,onExited:q,onExiting:re,style:le,timeout:W=h,TransitionComponent:j=Jo,...V}=t,Q=ee.useRef(null),pe=Zn(Q,Hu(u),o),de=Ie=>Le=>{if(Ie){const $e=Q.current;Le===void 0?Ie($e):Ie($e,Le)}},_e=de(A),ge=de((Ie,Le)=>{L0(Ie);const $e=Lu({style:le,timeout:W,easing:I},{mode:"enter"});Ie.style.webkitTransition=l.transitions.create("opacity",$e),Ie.style.transition=l.transitions.create("opacity",$e),B&&B(Ie,Le)}),Ae=de(L),Re=de(re),De=de(Ie=>{const Le=Lu({style:le,timeout:W,easing:I},{mode:"exit"});Ie.style.webkitTransition=l.transitions.create("opacity",Le),Ie.style.transition=l.transitions.create("opacity",Le),Z&&Z(Ie)}),X=de(q),Me=Ie=>{m&&m(Q.current,Ie)};return G.jsx(j,{appear:g,in:M,nodeRef:Q,onEnter:ge,onEntered:Ae,onEntering:_e,onExit:De,onExited:X,onExiting:Re,addEndListener:Me,timeout:W,...V,children:(Ie,{ownerState:Le,...$e})=>ee.cloneElement(u,{style:{opacity:0,visibility:Ie==="exited"&&!M?"hidden":void 0,...NL[Ie],...le,...u.props.style},ref:pe,...$e})})});function jL(e){return Wt("MuiBackdrop",e)}Zt("MuiBackdrop",["root","invisible"]);const VL=e=>{const{classes:t,invisible:o}=e;return Gt({root:["root",o&&"invisible"]},jL,t)},UL=ot("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),yT=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiBackdrop"}),{children:h,className:m,component:g="div",invisible:u=!1,open:I,components:M={},componentsProps:B={},slotProps:L={},slots:A={},TransitionComponent:Z,transitionDuration:q,...re}=l,le={...l,component:g,invisible:u},W=VL(le),j={transition:Z,root:M.Root,...A},V={...B,...L},Q={component:g,slots:j,slotProps:V},[pe,de]=pr("root",{elementType:UL,externalForwardedProps:Q,className:yt(W.root,m),ownerState:le}),[_e,ge]=pr("transition",{elementType:ox,externalForwardedProps:Q,ownerState:le});return G.jsx(_e,{in:I,timeout:q,...re,...ge,children:G.jsx(pe,{"aria-hidden":!0,...de,classes:W,ref:o,children:h})})}),WL=Zt("MuiBox",["root"]),GL=Ug(),ar=oR({themeId:_s,defaultTheme:GL,defaultClassName:WL.root,generateClassName:Ok.generate});function HL(e){return Wt("MuiButton",e)}const zl=Zt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),_T=ee.createContext({}),vT=ee.createContext(void 0),qL=e=>{const{color:t,disableElevation:o,fullWidth:l,size:h,variant:m,loading:g,loadingPosition:u,classes:I}=e,M={root:["root",g&&"loading",m,`${m}${at(t)}`,`size${at(h)}`,`${m}Size${at(h)}`,`color${at(t)}`,o&&"disableElevation",l&&"fullWidth",g&&`loadingPosition${at(u)}`],startIcon:["icon","startIcon",`iconSize${at(h)}`],endIcon:["icon","endIcon",`iconSize${at(h)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},B=Gt(M,HL,I);return{...I,...B}},xT=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ZL=ot(Gu,{shouldForwardProp:e=>Ri(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`${o.variant}${at(o.color)}`],t[`size${at(o.size)}`],t[`${o.variant}Size${at(o.size)}`],o.color==="inherit"&&t.colorInherit,o.disableElevation&&t.disableElevation,o.fullWidth&&t.fullWidth,o.loading&&t.loading]}})(tr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],o=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${zl.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${zl.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${zl.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${zl.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(ii()).map(([l])=>({props:{color:l},style:{"--variant-textColor":(e.vars||e).palette[l].main,"--variant-outlinedColor":(e.vars||e).palette[l].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[l].main,.5),"--variant-containedColor":(e.vars||e).palette[l].contrastText,"--variant-containedBg":(e.vars||e).palette[l].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[l].dark,"--variant-textBg":e.alpha((e.vars||e).palette[l].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[l].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[l].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:o,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${zl.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${zl.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${zl.loading}`]:{color:"transparent"}}}]}})),XL=ot("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.startIcon,o.loading&&t.startIconLoadingStart,t[`iconSize${at(o.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...xT]})),KL=ot("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.endIcon,o.loading&&t.endIconLoadingEnd,t[`iconSize${at(o.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...xT]})),YL=ot("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),z2=ot("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Co=ee.forwardRef(function(t,o){const l=ee.useContext(_T),h=ee.useContext(vT),m=sp(l,t),g=Ht({props:m,name:"MuiButton"}),{children:u,color:I="primary",component:M="button",className:B,disabled:L=!1,disableElevation:A=!1,disableFocusRipple:Z=!1,endIcon:q,focusVisibleClassName:re,fullWidth:le=!1,id:W,loading:j=null,loadingIndicator:V,loadingPosition:Q="center",size:pe="medium",startIcon:de,type:_e,variant:ge="text",...Ae}=g,Re=Uu(W),De=V??G.jsx(cp,{"aria-labelledby":Re,color:"inherit",size:16}),X={...g,color:I,component:M,disabled:L,disableElevation:A,disableFocusRipple:Z,fullWidth:le,loading:j,loadingIndicator:De,loadingPosition:Q,size:pe,type:_e,variant:ge},Me=qL(X),Ie=(de||j&&Q==="start")&&G.jsx(XL,{className:Me.startIcon,ownerState:X,children:de||G.jsx(z2,{className:Me.loadingIconPlaceholder,ownerState:X})}),Le=(q||j&&Q==="end")&&G.jsx(KL,{className:Me.endIcon,ownerState:X,children:q||G.jsx(z2,{className:Me.loadingIconPlaceholder,ownerState:X})}),$e=h||"",Ke=typeof j=="boolean"?G.jsx("span",{className:Me.loadingWrapper,style:{display:"contents"},children:j&&G.jsx(YL,{className:Me.loadingIndicator,ownerState:X,children:De})}):null;return G.jsxs(ZL,{ownerState:X,className:yt(l.className,Me.root,B,$e),component:M,disabled:L||j,focusRipple:!Z,focusVisibleClassName:yt(Me.focusVisible,re),ref:o,type:_e,id:j?Re:W,...Ae,classes:Me,children:[Ie,Q!=="end"&&Ke,u,Q==="end"&&Ke,Le]})});function JL(e){return ee.Children.toArray(e).filter(t=>ee.isValidElement(t))}function QL(e){return Wt("MuiButtonGroup",e)}const ir=Zt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),e4=(e,t)=>{const{ownerState:o}=e;return[{[`& .${ir.grouped}`]:t.grouped},{[`& .${ir.grouped}`]:t[`grouped${at(o.orientation)}`]},{[`& .${ir.grouped}`]:t[`grouped${at(o.variant)}`]},{[`& .${ir.grouped}`]:t[`grouped${at(o.variant)}${at(o.orientation)}`]},{[`& .${ir.grouped}`]:t[`grouped${at(o.variant)}${at(o.color)}`]},{[`& .${ir.firstButton}`]:t.firstButton},{[`& .${ir.lastButton}`]:t.lastButton},{[`& .${ir.middleButton}`]:t.middleButton},t.root,t[o.variant],o.disableElevation===!0&&t.disableElevation,o.fullWidth&&t.fullWidth,o.orientation==="vertical"&&t.vertical]},t4=e=>{const{classes:t,color:o,disabled:l,disableElevation:h,fullWidth:m,orientation:g,variant:u}=e,I={root:["root",u,g,m&&"fullWidth",h&&"disableElevation",`color${at(o)}`],grouped:["grouped",`grouped${at(g)}`,`grouped${at(u)}`,`grouped${at(u)}${at(g)}`,`grouped${at(u)}${at(o)}`,l&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Gt(I,QL,t)},r4=ot("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:e4})(tr(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${ir.lastButton},& .${ir.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${ir.lastButton},& .${ir.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ir.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ir.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(ii()).flatMap(([t])=>[{props:{variant:"text",color:t},style:{[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[t].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${ir.lastButton},& .${ir.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${ir.lastButton},& .${ir.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${ir.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${ir.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter(ii(["dark"])).map(([t])=>({props:{variant:"contained",color:t},style:{[`& .${ir.firstButton},& .${ir.middleButton}`]:{borderColor:(e.vars||e).palette[t].dark}}}))],[`& .${ir.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),n4=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiButtonGroup"}),{children:h,className:m,color:g="primary",component:u="div",disabled:I=!1,disableElevation:M=!1,disableFocusRipple:B=!1,disableRipple:L=!1,fullWidth:A=!1,orientation:Z="horizontal",size:q="medium",variant:re="outlined",...le}=l,W={...l,color:g,component:u,disabled:I,disableElevation:M,disableFocusRipple:B,disableRipple:L,fullWidth:A,orientation:Z,size:q,variant:re},j=t4(W),V=ee.useMemo(()=>({className:j.grouped,color:g,disabled:I,disableElevation:M,disableFocusRipple:B,disableRipple:L,fullWidth:A,size:q,variant:re}),[g,I,M,B,L,A,q,re,j.grouped]),Q=JL(h),pe=Q.length,de=_e=>{const ge=_e===0,Ae=_e===pe-1;return ge&&Ae?"":ge?j.firstButton:Ae?j.lastButton:j.middleButton};return G.jsx(r4,{as:u,role:"group",className:yt(j.root,m),ref:o,ownerState:W,...le,children:G.jsx(_T.Provider,{value:V,children:Q.map((_e,ge)=>G.jsx(vT.Provider,{value:de(ge),children:_e},ge))})})});function i4(e){return Wt("MuiCard",e)}Zt("MuiCard",["root"]);const o4=e=>{const{classes:t}=e;return Gt({root:["root"]},i4,t)},s4=ot(rl,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Ba=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiCard"}),{className:h,raised:m=!1,...g}=l,u={...l,raised:m},I=o4(u);return G.jsx(s4,{className:yt(I.root,h),elevation:m?8:void 0,ref:o,ownerState:u,...g})});function a4(e){return Wt("MuiCardActionArea",e)}const V_=Zt("MuiCardActionArea",["root","focusVisible","focusHighlight"]),l4=e=>{const{classes:t}=e;return Gt({root:["root"],focusHighlight:["focusHighlight"]},a4,t)},c4=ot(Gu,{name:"MuiCardActionArea",slot:"Root"})(tr(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${V_.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${V_.focusVisible} .${V_.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}}))),u4=ot("span",{name:"MuiCardActionArea",slot:"FocusHighlight"})(tr(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}))),d4=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiCardActionArea"}),{children:h,className:m,focusVisibleClassName:g,slots:u={},slotProps:I={},...M}=l,B=l,L=l4(B),A={slots:u,slotProps:I},[Z,q]=pr("root",{elementType:c4,externalForwardedProps:{...A,...M},shouldForwardComponentProp:!0,ownerState:B,ref:o,className:yt(L.root,m),additionalProps:{focusVisibleClassName:yt(g,L.focusVisible)}}),[re,le]=pr("focusHighlight",{elementType:u4,externalForwardedProps:A,ownerState:B,ref:o,className:L.focusHighlight});return G.jsxs(Z,{...q,children:[h,G.jsx(re,{...le})]})});function h4(e){return Wt("MuiCardContent",e)}Zt("MuiCardContent",["root"]);const p4=e=>{const{classes:t}=e;return Gt({root:["root"]},h4,t)},f4=ot("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),Ol=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiCardContent"}),{className:h,component:m="div",...g}=l,u={...l,component:m},I=p4(u);return G.jsx(f4,{as:m,className:yt(I.root,h),ownerState:u,ref:o,...g})}),R2=XR({createStyledComponent:ot("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${at(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Ht({props:e,name:"MuiContainer"})});function bT(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function m4(e){const t=Ko(e);return t.body===e?Yo(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Oh(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function D2(e){return parseInt(Yo(e).getComputedStyle(e).paddingRight,10)||0}function g4(e){const o=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),l=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return o||l}function L2(e,t,o,l,h){const m=[t,o,...l];[].forEach.call(e.children,g=>{const u=!m.includes(g),I=!g4(g);u&&I&&Oh(g,h)})}function U_(e,t){let o=-1;return e.some((l,h)=>t(l)?(o=h,!0):!1),o}function y4(e,t){const o=[],l=e.container;if(!t.disableScrollLock){if(m4(l)){const g=bT(Yo(l));o.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${D2(l)+g}px`;const u=Ko(l).querySelectorAll(".mui-fixed");[].forEach.call(u,I=>{o.push({value:I.style.paddingRight,property:"padding-right",el:I}),I.style.paddingRight=`${D2(I)+g}px`})}let m;if(l.parentNode instanceof DocumentFragment)m=Ko(l).body;else{const g=l.parentElement,u=Yo(l);m=(g==null?void 0:g.nodeName)==="HTML"&&u.getComputedStyle(g).overflowY==="scroll"?g:l}o.push({value:m.style.overflow,property:"overflow",el:m},{value:m.style.overflowX,property:"overflow-x",el:m},{value:m.style.overflowY,property:"overflow-y",el:m}),m.style.overflow="hidden"}return()=>{o.forEach(({value:m,el:g,property:u})=>{m?g.style.setProperty(u,m):g.style.removeProperty(u)})}}function _4(e){const t=[];return[].forEach.call(e.children,o=>{o.getAttribute("aria-hidden")==="true"&&t.push(o)}),t}class v4{constructor(){this.modals=[],this.containers=[]}add(t,o){let l=this.modals.indexOf(t);if(l!==-1)return l;l=this.modals.length,this.modals.push(t),t.modalRef&&Oh(t.modalRef,!1);const h=_4(o);L2(o,t.mount,t.modalRef,h,!0);const m=U_(this.containers,g=>g.container===o);return m!==-1?(this.containers[m].modals.push(t),l):(this.containers.push({modals:[t],container:o,restore:null,hiddenSiblings:h}),l)}mount(t,o){const l=U_(this.containers,m=>m.modals.includes(t)),h=this.containers[l];h.restore||(h.restore=y4(h,o))}remove(t,o=!0){const l=this.modals.indexOf(t);if(l===-1)return l;const h=U_(this.containers,g=>g.modals.includes(t)),m=this.containers[h];if(m.modals.splice(m.modals.indexOf(t),1),this.modals.splice(l,1),m.modals.length===0)m.restore&&m.restore(),t.modalRef&&Oh(t.modalRef,o),L2(m.container,t.mount,t.modalRef,m.hiddenSiblings,!1),this.containers.splice(h,1);else{const g=m.modals[m.modals.length-1];g.modalRef&&Oh(g.modalRef,!1)}return l}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function Th(e){var o;let t=e.activeElement;for(;((o=t==null?void 0:t.shadowRoot)==null?void 0:o.activeElement)!=null;)t=t.shadowRoot.activeElement;return t}const x4=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function b4(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function w4(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=l=>e.ownerDocument.querySelector(`input[type="radio"]${l}`);let o=t(`[name="${e.name}"]:checked`);return o||(o=t(`[name="${e.name}"]`)),o!==e}function S4(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||w4(e))}function C4(e){const t=[],o=[];return Array.from(e.querySelectorAll(x4)).forEach((l,h)=>{const m=b4(l);m===-1||!S4(l)||(m===0?t.push(l):o.push({documentOrder:h,tabIndex:m,node:l}))}),o.sort((l,h)=>l.tabIndex===h.tabIndex?l.documentOrder-h.documentOrder:l.tabIndex-h.tabIndex).map(l=>l.node).concat(t)}function k4(){return!0}function T4(e){const{children:t,disableAutoFocus:o=!1,disableEnforceFocus:l=!1,disableRestoreFocus:h=!1,getTabbable:m=C4,isEnabled:g=k4,open:u}=e,I=ee.useRef(!1),M=ee.useRef(null),B=ee.useRef(null),L=ee.useRef(null),A=ee.useRef(null),Z=ee.useRef(!1),q=ee.useRef(null),re=Zn(Hu(t),q),le=ee.useRef(null);ee.useEffect(()=>{!u||!q.current||(Z.current=!o)},[o,u]),ee.useEffect(()=>{if(!u||!q.current)return;const V=Ko(q.current),Q=Th(V);return q.current.contains(Q)||(q.current.hasAttribute("tabIndex")||q.current.setAttribute("tabIndex","-1"),Z.current&&q.current.focus()),()=>{h||(L.current&&L.current.focus&&(I.current=!0,L.current.focus()),L.current=null)}},[u]),ee.useEffect(()=>{if(!u||!q.current)return;const V=Ko(q.current),Q=Th(V),pe=ge=>{le.current=ge,!(l||!g()||ge.key!=="Tab")&&Q===q.current&&ge.shiftKey&&(I.current=!0,B.current&&B.current.focus())},de=()=>{var De,X;const ge=q.current;if(ge===null)return;const Ae=Th(V);if(!V.hasFocus()||!g()||I.current){I.current=!1;return}if(ge.contains(Ae)||l&&Ae!==M.current&&Ae!==B.current)return;if(Ae!==A.current)A.current=null;else if(A.current!==null)return;if(!Z.current)return;let Re=[];if((Ae===M.current||Ae===B.current)&&(Re=m(q.current)),Re.length>0){const Me=!!((De=le.current)!=null&&De.shiftKey&&((X=le.current)==null?void 0:X.key)==="Tab"),Ie=Re[0],Le=Re[Re.length-1];typeof Ie!="string"&&typeof Le!="string"&&(Me?Le.focus():Ie.focus())}else ge.focus()};V.addEventListener("focusin",de),V.addEventListener("keydown",pe,!0);const _e=setInterval(()=>{const ge=Th(V);ge&&ge.tagName==="BODY"&&de()},50);return()=>{clearInterval(_e),V.removeEventListener("focusin",de),V.removeEventListener("keydown",pe,!0)}},[o,l,h,g,u,m]);const W=V=>{L.current===null&&(L.current=V.relatedTarget),Z.current=!0,A.current=V.target;const Q=t.props.onFocus;Q&&Q(V)},j=V=>{L.current===null&&(L.current=V.relatedTarget),Z.current=!0};return G.jsxs(ee.Fragment,{children:[G.jsx("div",{tabIndex:u?0:-1,onFocus:j,ref:M,"data-testid":"sentinelStart"}),ee.cloneElement(t,{ref:re,onFocus:W}),G.jsx("div",{tabIndex:u?0:-1,onFocus:j,ref:B,"data-testid":"sentinelEnd"})]})}function I4(e){return typeof e=="function"?e():e}function E4(e){return e?e.props.hasOwnProperty("in"):!1}const B2=()=>{},Zf=new v4;function P4(e){const{container:t,disableEscapeKeyDown:o=!1,disableScrollLock:l=!1,closeAfterTransition:h=!1,onTransitionEnter:m,onTransitionExited:g,children:u,onClose:I,open:M,rootRef:B}=e,L=ee.useRef({}),A=ee.useRef(null),Z=ee.useRef(null),q=Zn(Z,B),[re,le]=ee.useState(!M),W=E4(u);let j=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(j=!1);const V=()=>Ko(A.current),Q=()=>(L.current.modalRef=Z.current,L.current.mount=A.current,L.current),pe=()=>{Zf.mount(Q(),{disableScrollLock:l}),Z.current&&(Z.current.scrollTop=0)},de=Hl(()=>{const Le=I4(t)||V().body;Zf.add(Q(),Le),Z.current&&pe()}),_e=()=>Zf.isTopModal(Q()),ge=Hl(Le=>{A.current=Le,Le&&(M&&_e()?pe():Z.current&&Oh(Z.current,j))}),Ae=ee.useCallback(()=>{Zf.remove(Q(),j)},[j]);ee.useEffect(()=>()=>{Ae()},[Ae]),ee.useEffect(()=>{M?de():(!W||!h)&&Ae()},[M,Ae,W,h,de]);const Re=Le=>$e=>{var Ke;(Ke=Le.onKeyDown)==null||Ke.call(Le,$e),!($e.key!=="Escape"||$e.which===229||!_e())&&(o||($e.stopPropagation(),I&&I($e,"escapeKeyDown")))},De=Le=>$e=>{var Ke;(Ke=Le.onClick)==null||Ke.call(Le,$e),$e.target===$e.currentTarget&&I&&I($e,"backdropClick")};return{getRootProps:(Le={})=>{const $e=mT(e);delete $e.onTransitionEnter,delete $e.onTransitionExited;const Ke={...$e,...Le};return{role:"presentation",...Ke,onKeyDown:Re(Ke),ref:q}},getBackdropProps:(Le={})=>{const $e=Le;return{"aria-hidden":!0,...$e,onClick:De($e),open:M}},getTransitionProps:()=>{const Le=()=>{le(!1),m&&m()},$e=()=>{le(!0),g&&g(),h&&Ae()};return{onEnter:g2(Le,(u==null?void 0:u.props.onEnter)??B2),onExited:g2($e,(u==null?void 0:u.props.onExited)??B2)}},rootRef:q,portalRef:ge,isTopModal:_e,exited:re,hasTransition:W}}function M4(e){return Wt("MuiModal",e)}Zt("MuiModal",["root","hidden","backdrop"]);const A4=e=>{const{open:t,exited:o,classes:l}=e;return Gt({root:["root",!t&&o&&"hidden"],backdrop:["backdrop"]},M4,l)},z4=ot("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.open&&o.exited&&t.hidden]}})(tr(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),R4=ot(yT,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),O0=ee.forwardRef(function(t,o){const l=Ht({name:"MuiModal",props:t}),{BackdropComponent:h=R4,BackdropProps:m,classes:g,className:u,closeAfterTransition:I=!1,children:M,container:B,component:L,components:A={},componentsProps:Z={},disableAutoFocus:q=!1,disableEnforceFocus:re=!1,disableEscapeKeyDown:le=!1,disablePortal:W=!1,disableRestoreFocus:j=!1,disableScrollLock:V=!1,hideBackdrop:Q=!1,keepMounted:pe=!1,onClose:de,onTransitionEnter:_e,onTransitionExited:ge,open:Ae,slotProps:Re={},slots:De={},theme:X,...Me}=l,Ie={...l,closeAfterTransition:I,disableAutoFocus:q,disableEnforceFocus:re,disableEscapeKeyDown:le,disablePortal:W,disableRestoreFocus:j,disableScrollLock:V,hideBackdrop:Q,keepMounted:pe},{getRootProps:Le,getBackdropProps:$e,getTransitionProps:Ke,portalRef:be,isTopModal:Ee,exited:We,hasTransition:Ze}=P4({...Ie,rootRef:o}),Ge={...Ie,exited:We},Ct=A4(Ge),Dt={};if(M.props.tabIndex===void 0&&(Dt.tabIndex="-1"),Ze){const{onEnter:vt,onExited:Kt}=Ke();Dt.onEnter=vt,Dt.onExited=Kt}const $t={slots:{root:A.Root,backdrop:A.Backdrop,...De},slotProps:{...Z,...Re}},[Ut,Rt]=pr("root",{ref:o,elementType:z4,externalForwardedProps:{...$t,...Me,component:L},getSlotProps:Le,ownerState:Ge,className:yt(u,Ct==null?void 0:Ct.root,!Ge.open&&Ge.exited&&(Ct==null?void 0:Ct.hidden))}),[mr,Jt]=pr("backdrop",{ref:m==null?void 0:m.ref,elementType:h,externalForwardedProps:$t,shouldForwardComponentProp:!0,additionalProps:m,getSlotProps:vt=>$e({...vt,onClick:Kt=>{vt!=null&&vt.onClick&&vt.onClick(Kt)}}),className:yt(m==null?void 0:m.className,Ct==null?void 0:Ct.backdrop),ownerState:Ge});return!pe&&!Ae&&(!Ze||We)?null:G.jsx(PL,{ref:be,container:B,disablePortal:W,children:G.jsxs(Ut,{...Rt,children:[!Q&&h?G.jsx(mr,{...Jt}):null,G.jsx(T4,{disableEnforceFocus:re,disableAutoFocus:q,disableRestoreFocus:j,isEnabled:Ee,open:Ae,children:ee.cloneElement(M,Dt)})]})})});function D4(e){return Wt("MuiDialog",e)}const W_=Zt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),wT=ee.createContext({}),L4=ot(yT,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),B4=e=>{const{classes:t,scroll:o,maxWidth:l,fullWidth:h,fullScreen:m}=e,g={root:["root"],container:["container",`scroll${at(o)}`],paper:["paper",`paperScroll${at(o)}`,`paperWidth${at(String(l))}`,h&&"paperFullWidth",m&&"paperFullScreen"]};return Gt(g,D4,t)},F4=ot(O0,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),O4=ot("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.container,t[`scroll${at(o.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),$4=ot(rl,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`scrollPaper${at(o.scroll)}`],t[`paperWidth${at(String(o.maxWidth))}`],o.fullWidth&&t.paperFullWidth,o.fullScreen&&t.paperFullScreen]}})(tr(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${W_.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${W_.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${W_.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),N4=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiDialog"}),h=tl(),m={enter:h.transitions.duration.enteringScreen,exit:h.transitions.duration.leavingScreen},{"aria-describedby":g,"aria-labelledby":u,"aria-modal":I=!0,BackdropComponent:M,BackdropProps:B,children:L,className:A,disableEscapeKeyDown:Z=!1,fullScreen:q=!1,fullWidth:re=!1,maxWidth:le="sm",onClick:W,onClose:j,open:V,PaperComponent:Q=rl,PaperProps:pe={},scroll:de="paper",slots:_e={},slotProps:ge={},TransitionComponent:Ae=ox,transitionDuration:Re=m,TransitionProps:De,...X}=l,Me={...l,disableEscapeKeyDown:Z,fullScreen:q,fullWidth:re,maxWidth:le,scroll:de},Ie=B4(Me),Le=ee.useRef(),$e=_r=>{Le.current=_r.target===_r.currentTarget},Ke=_r=>{W&&W(_r),Le.current&&(Le.current=null,j&&j(_r,"backdropClick"))},be=Uu(u),Ee=ee.useMemo(()=>({titleId:be}),[be]),We={transition:Ae,..._e},Ze={transition:De,paper:pe,backdrop:B,...ge},Ge={slots:We,slotProps:Ze},[Ct,Dt]=pr("root",{elementType:F4,shouldForwardComponentProp:!0,externalForwardedProps:Ge,ownerState:Me,className:yt(Ie.root,A),ref:o}),[$t,Ut]=pr("backdrop",{elementType:L4,shouldForwardComponentProp:!0,externalForwardedProps:Ge,ownerState:Me}),[Rt,mr]=pr("paper",{elementType:$4,shouldForwardComponentProp:!0,externalForwardedProps:Ge,ownerState:Me,className:yt(Ie.paper,pe.className)}),[Jt,vt]=pr("container",{elementType:O4,externalForwardedProps:Ge,ownerState:Me,className:Ie.container}),[Kt,Xt]=pr("transition",{elementType:ox,externalForwardedProps:Ge,ownerState:Me,additionalProps:{appear:!0,in:V,timeout:Re,role:"presentation"}});return G.jsx(Ct,{closeAfterTransition:!0,slots:{backdrop:$t},slotProps:{backdrop:{transitionDuration:Re,as:M,...Ut}},disableEscapeKeyDown:Z,onClose:j,open:V,onClick:Ke,...Dt,...X,children:G.jsx(Kt,{...Xt,children:G.jsx(Jt,{onMouseDown:$e,...vt,children:G.jsx(Rt,{as:Q,elevation:24,role:"dialog","aria-describedby":g,"aria-labelledby":be,"aria-modal":I,...mr,children:G.jsx(wT.Provider,{value:Ee,children:L})})})})})});function j4(e){return Wt("MuiDialogActions",e)}Zt("MuiDialogActions",["root","spacing"]);const V4=e=>{const{classes:t,disableSpacing:o}=e;return Gt({root:["root",!o&&"spacing"]},j4,t)},U4=ot("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),W4=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiDialogActions"}),{className:h,disableSpacing:m=!1,...g}=l,u={...l,disableSpacing:m},I=V4(u);return G.jsx(U4,{className:yt(I.root,h),ownerState:u,ref:o,...g})});function G4(e){return Wt("MuiDialogContent",e)}Zt("MuiDialogContent",["root","dividers"]);function H4(e){return Wt("MuiDialogTitle",e)}const q4=Zt("MuiDialogTitle",["root"]),Z4=e=>{const{classes:t,dividers:o}=e;return Gt({root:["root",o&&"dividers"]},G4,t)},X4=ot("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})(tr(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${q4.root} + &`]:{paddingTop:0}}}]}))),K4=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiDialogContent"}),{className:h,dividers:m=!1,...g}=l,u={...l,dividers:m},I=Z4(u);return G.jsx(X4,{className:yt(I.root,h),ownerState:u,ref:o,...g})}),Y4=e=>{const{classes:t}=e;return Gt({root:["root"]},H4,t)},J4=ot(Vt,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Q4=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiDialogTitle"}),{className:h,id:m,...g}=l,u=l,I=Y4(u),{titleId:M=m}=ee.useContext(wT);return G.jsx(J4,{component:"h2",className:yt(I.root,h),ownerState:u,ref:o,variant:"h6",id:m??M,...g})});function e3(e){return Wt("MuiDivider",e)}const F2=Zt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),t3=e=>{const{absolute:t,children:o,classes:l,flexItem:h,light:m,orientation:g,textAlign:u,variant:I}=e;return Gt({root:["root",t&&"absolute",I,m&&"light",g==="vertical"&&"vertical",h&&"flexItem",o&&"withChildren",o&&g==="vertical"&&"withChildrenVertical",u==="right"&&g!=="vertical"&&"textAlignRight",u==="left"&&g!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",g==="vertical"&&"wrapperVertical"]},e3,l)},r3=ot("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.absolute&&t.absolute,t[o.variant],o.light&&t.light,o.orientation==="vertical"&&t.vertical,o.flexItem&&t.flexItem,o.children&&t.withChildren,o.children&&o.orientation==="vertical"&&t.withChildrenVertical,o.textAlign==="right"&&o.orientation!=="vertical"&&t.textAlignRight,o.textAlign==="left"&&o.orientation!=="vertical"&&t.textAlignLeft]}})(tr(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),n3=ot("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.wrapper,o.orientation==="vertical"&&t.wrapperVertical]}})(tr(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),js=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiDivider"}),{absolute:h=!1,children:m,className:g,orientation:u="horizontal",component:I=m||u==="vertical"?"div":"hr",flexItem:M=!1,light:B=!1,role:L=I!=="hr"?"separator":void 0,textAlign:A="center",variant:Z="fullWidth",...q}=l,re={...l,absolute:h,component:I,flexItem:M,light:B,orientation:u,role:L,textAlign:A,variant:Z},le=t3(re);return G.jsx(r3,{as:I,className:yt(le.root,g),role:L,ref:o,ownerState:re,"aria-orientation":L==="separator"&&(I!=="hr"||u==="vertical")?u:void 0,...q,children:m?G.jsx(n3,{className:le.wrapper,ownerState:re,children:m}):null})});js&&(js.muiSkipListHighlight=!0);function i3(e,t,o){const l=t.getBoundingClientRect(),h=o&&o.getBoundingClientRect(),m=Yo(t);let g;if(t.fakeTransform)g=t.fakeTransform;else{const M=m.getComputedStyle(t);g=M.getPropertyValue("-webkit-transform")||M.getPropertyValue("transform")}let u=0,I=0;if(g&&g!=="none"&&typeof g=="string"){const M=g.split("(")[1].split(")")[0].split(",");u=parseInt(M[4],10),I=parseInt(M[5],10)}return e==="left"?h?`translateX(${h.right+u-l.left}px)`:`translateX(${m.innerWidth+u-l.left}px)`:e==="right"?h?`translateX(-${l.right-h.left-u}px)`:`translateX(-${l.left+l.width-u}px)`:e==="up"?h?`translateY(${h.bottom+I-l.top}px)`:`translateY(${m.innerHeight+I-l.top}px)`:h?`translateY(-${l.top-h.top+l.height-I}px)`:`translateY(-${l.top+l.height-I}px)`}function o3(e){return typeof e=="function"?e():e}function Xf(e,t,o){const l=o3(o),h=i3(e,t,l);h&&(t.style.webkitTransform=h,t.style.transform=h)}const s3=ee.forwardRef(function(t,o){const l=tl(),h={enter:l.transitions.easing.easeOut,exit:l.transitions.easing.sharp},m={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:g,appear:u=!0,children:I,container:M,direction:B="down",easing:L=h,in:A,onEnter:Z,onEntered:q,onEntering:re,onExit:le,onExited:W,onExiting:j,style:V,timeout:Q=m,TransitionComponent:pe=Jo,...de}=t,_e=ee.useRef(null),ge=Zn(Hu(I),_e,o),Ae=be=>Ee=>{be&&(Ee===void 0?be(_e.current):be(_e.current,Ee))},Re=Ae((be,Ee)=>{Xf(B,be,M),L0(be),Z&&Z(be,Ee)}),De=Ae((be,Ee)=>{const We=Lu({timeout:Q,style:V,easing:L},{mode:"enter"});be.style.webkitTransition=l.transitions.create("-webkit-transform",{...We}),be.style.transition=l.transitions.create("transform",{...We}),be.style.webkitTransform="none",be.style.transform="none",re&&re(be,Ee)}),X=Ae(q),Me=Ae(j),Ie=Ae(be=>{const Ee=Lu({timeout:Q,style:V,easing:L},{mode:"exit"});be.style.webkitTransition=l.transitions.create("-webkit-transform",Ee),be.style.transition=l.transitions.create("transform",Ee),Xf(B,be,M),le&&le(be)}),Le=Ae(be=>{be.style.webkitTransition="",be.style.transition="",W&&W(be)}),$e=be=>{g&&g(_e.current,be)},Ke=ee.useCallback(()=>{_e.current&&Xf(B,_e.current,M)},[B,M]);return ee.useEffect(()=>{if(A||B==="down"||B==="right")return;const be=A0(()=>{_e.current&&Xf(B,_e.current,M)}),Ee=Yo(_e.current);return Ee.addEventListener("resize",be),()=>{be.clear(),Ee.removeEventListener("resize",be)}},[B,A,M]),ee.useEffect(()=>{A||Ke()},[A,Ke]),G.jsx(pe,{nodeRef:_e,onEnter:Re,onEntered:X,onEntering:De,onExit:Ie,onExited:Le,onExiting:Me,addEndListener:$e,appear:u,in:A,timeout:Q,...de,children:(be,{ownerState:Ee,...We})=>ee.cloneElement(I,{ref:ge,style:{visibility:be==="exited"&&!A?"hidden":void 0,...V,...I.props.style},...We})})});function a3(e){return Wt("MuiDrawer",e)}Zt("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const ST=(e,t)=>{const{ownerState:o}=e;return[t.root,(o.variant==="permanent"||o.variant==="persistent")&&t.docked,t.modal]},l3=e=>{const{classes:t,anchor:o,variant:l}=e,h={root:["root",`anchor${at(o)}`],docked:[(l==="permanent"||l==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${at(o)}`,l!=="temporary"&&`paperAnchorDocked${at(o)}`]};return Gt(h,a3,t)},c3=ot(O0,{name:"MuiDrawer",slot:"Root",overridesResolver:ST})(tr(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),u3=ot("div",{shouldForwardProp:Ri,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:ST})({flex:"0 0 auto"}),d3=ot(rl,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`paperAnchor${at(o.anchor)}`],o.variant!=="temporary"&&t[`paperAnchorDocked${at(o.anchor)}`]]}})(tr(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),CT={left:"right",right:"left",top:"down",bottom:"up"};function h3(e){return["left","right"].includes(e)}function p3({direction:e},t){return e==="rtl"&&h3(t)?CT[t]:t}const f3=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiDrawer"}),h=tl(),m=Hk(),g={enter:h.transitions.duration.enteringScreen,exit:h.transitions.duration.leavingScreen},{anchor:u="left",BackdropProps:I,children:M,className:B,elevation:L=16,hideBackdrop:A=!1,ModalProps:{BackdropProps:Z,...q}={},onClose:re,open:le=!1,PaperProps:W={},SlideProps:j,TransitionComponent:V,transitionDuration:Q=g,variant:pe="temporary",slots:de={},slotProps:_e={},...ge}=l,Ae=ee.useRef(!1);ee.useEffect(()=>{Ae.current=!0},[]);const Re=p3({direction:m?"rtl":"ltr"},u),X={...l,anchor:u,elevation:L,open:le,variant:pe,...ge},Me=l3(X),Ie={slots:{transition:V,...de},slotProps:{paper:W,transition:j,..._e,backdrop:lT(_e.backdrop||{...I,...Z},{transitionDuration:Q})}},[Le,$e]=pr("root",{ref:o,elementType:c3,className:yt(Me.root,Me.modal,B),shouldForwardComponentProp:!0,ownerState:X,externalForwardedProps:{...Ie,...ge,...q},additionalProps:{open:le,onClose:re,hideBackdrop:A,slots:{backdrop:Ie.slots.backdrop},slotProps:{backdrop:Ie.slotProps.backdrop}}}),[Ke,be]=pr("paper",{elementType:d3,shouldForwardComponentProp:!0,className:yt(Me.paper,W.className),ownerState:X,externalForwardedProps:Ie,additionalProps:{elevation:pe==="temporary"?L:0,square:!0,...pe==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[Ee,We]=pr("docked",{elementType:u3,ref:o,className:yt(Me.root,Me.docked,B),ownerState:X,externalForwardedProps:Ie,additionalProps:ge}),[Ze,Ge]=pr("transition",{elementType:s3,ownerState:X,externalForwardedProps:Ie,additionalProps:{in:le,direction:CT[Re],timeout:Q,appear:Ae.current}}),Ct=G.jsx(Ke,{...be,children:M});if(pe==="permanent")return G.jsx(Ee,{...We,children:Ct});const Dt=G.jsx(Ze,{...Ge,children:Ct});return pe==="persistent"?G.jsx(Ee,{...We,children:Dt}):G.jsx(Le,{...$e,children:Dt})});function m3(e){return Wt("MuiFab",e)}const O2=Zt("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),g3=e=>{const{color:t,variant:o,classes:l,size:h}=e,m={root:["root",o,`size${at(h)}`,t==="inherit"?"colorInherit":t]},g=Gt(m,m3,l);return{...l,...g}},y3=ot(Gu,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>Ri(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`size${at(o.size)}`],o.color==="inherit"&&t.colorInherit,t[at(o.size)],t[o.color]]}})(tr(({theme:e})=>{var t,o;return{...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:(o=(t=e.palette).getContrastText)==null?void 0:o.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${O2.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),tr(({theme:e})=>({variants:[...Object.entries(e.palette).filter(ii(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),tr(({theme:e})=>({[`&.${O2.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),$2=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiFab"}),{children:h,className:m,color:g="default",component:u="button",disabled:I=!1,disableFocusRipple:M=!1,focusVisibleClassName:B,size:L="large",variant:A="circular",...Z}=l,q={...l,color:g,component:u,disabled:I,disableFocusRipple:M,size:L,variant:A},re=g3(q);return G.jsx(y3,{className:yt(re.root,m),component:u,disabled:I,focusRipple:!M,focusVisibleClassName:yt(re.focusVisible,B),ownerState:q,ref:o,...Z,classes:re,children:h})}),_3=e=>{const{classes:t,disableUnderline:o,startAdornment:l,endAdornment:h,size:m,hiddenLabel:g,multiline:u}=e,I={root:["root",!o&&"underline",l&&"adornedStart",h&&"adornedEnd",m==="small"&&`size${at(m)}`,g&&"hiddenLabel",u&&"multiline"],input:["input"]},M=Gt(I,OL,t);return{...t,...M}},v3=ot(Hg,{shouldForwardProp:e=>Ri(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...Wg(e,t),!o.disableUnderline&&t.underline]}})(tr(({theme:e})=>{const t=e.palette.mode==="light",o=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",l=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",h=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",m=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:l,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:h,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:l}},[`&.${Al.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:l},[`&.${Al.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:m},variants:[{props:({ownerState:g})=>!g.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Al.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Al.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Al.disabled}, .${Al.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Al.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(ii()).map(([g])=>{var u;return{props:{disableUnderline:!1,color:g},style:{"&::after":{borderBottom:`2px solid ${(u=(e.vars||e).palette[g])==null?void 0:u.main}`}}}}),{props:({ownerState:g})=>g.startAdornment,style:{paddingLeft:12}},{props:({ownerState:g})=>g.endAdornment,style:{paddingRight:12}},{props:({ownerState:g})=>g.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:g,size:u})=>g.multiline&&u==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:g})=>g.multiline&&g.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:g})=>g.multiline&&g.hiddenLabel&&g.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),x3=ot(qg,{name:"MuiFilledInput",slot:"Input",overridesResolver:Gg})(tr(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),$0=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiFilledInput"}),{disableUnderline:h=!1,components:m={},componentsProps:g,fullWidth:u=!1,hiddenLabel:I,inputComponent:M="input",multiline:B=!1,slotProps:L,slots:A={},type:Z="text",...q}=l,re={...l,disableUnderline:h,fullWidth:u,inputComponent:M,multiline:B,type:Z},le=_3(l),W={root:{ownerState:re},input:{ownerState:re}},j=L??g?qn(W,L??g):W,V=A.root??m.Root??v3,Q=A.input??m.Input??x3;return G.jsx(F0,{slots:{root:V,input:Q},slotProps:j,fullWidth:u,inputComponent:M,multiline:B,ref:o,type:Z,...q,classes:le})});$0.muiName="Input";function b3(e){return Wt("MuiFormControl",e)}Zt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const w3=e=>{const{classes:t,margin:o,fullWidth:l}=e,h={root:["root",o!=="none"&&`margin${at(o)}`,l&&"fullWidth"]};return Gt(h,b3,t)},S3=ot("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`margin${at(o.margin)}`],o.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),kT=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiFormControl"}),{children:h,className:m,color:g="primary",component:u="div",disabled:I=!1,error:M=!1,focused:B,fullWidth:L=!1,hiddenLabel:A=!1,margin:Z="none",required:q=!1,size:re="medium",variant:le="outlined",...W}=l,j={...l,color:g,component:u,disabled:I,error:M,fullWidth:L,hiddenLabel:A,margin:Z,required:q,size:re,variant:le},V=w3(j),[Q,pe]=ee.useState(()=>{let Le=!1;return h&&ee.Children.forEach(h,$e=>{if(!Fh($e,["Input","Select"]))return;const Ke=Fh($e,["Select"])?$e.props.input:$e;Ke&&RL(Ke.props)&&(Le=!0)}),Le}),[de,_e]=ee.useState(()=>{let Le=!1;return h&&ee.Children.forEach(h,$e=>{Fh($e,["Input","Select"])&&(Gm($e.props,!0)||Gm($e.props.inputProps,!0))&&(Le=!0)}),Le}),[ge,Ae]=ee.useState(!1);I&&ge&&Ae(!1);const Re=B!==void 0&&!I?B:ge;let De;ee.useRef(!1);const X=ee.useCallback(()=>{_e(!0)},[]),Me=ee.useCallback(()=>{_e(!1)},[]),Ie=ee.useMemo(()=>({adornedStart:Q,setAdornedStart:pe,color:g,disabled:I,error:M,filled:de,focused:Re,fullWidth:L,hiddenLabel:A,size:re,onBlur:()=>{Ae(!1)},onFocus:()=>{Ae(!0)},onEmpty:Me,onFilled:X,registerEffect:De,required:q,variant:le}),[Q,g,I,M,de,Re,L,A,De,Me,X,q,re,le]);return G.jsx(B0.Provider,{value:Ie,children:G.jsx(S3,{as:u,ownerState:j,className:yt(V.root,m),ref:o,...W,children:h})})});function C3(e){return Wt("MuiFormHelperText",e)}const N2=Zt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var j2;const k3=e=>{const{classes:t,contained:o,size:l,disabled:h,error:m,filled:g,focused:u,required:I}=e,M={root:["root",h&&"disabled",m&&"error",l&&`size${at(l)}`,o&&"contained",u&&"focused",g&&"filled",I&&"required"]};return Gt(M,C3,t)},T3=ot("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.size&&t[`size${at(o.size)}`],o.contained&&t.contained,o.filled&&t.filled]}})(tr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${N2.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${N2.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),I3=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiFormHelperText"}),{children:h,className:m,component:g="p",disabled:u,error:I,filled:M,focused:B,margin:L,required:A,variant:Z,...q}=l,re=Zu(),le=qu({props:l,muiFormControl:re,states:["variant","size","disabled","error","filled","focused","required"]}),W={...l,component:g,contained:le.variant==="filled"||le.variant==="outlined",variant:le.variant,size:le.size,disabled:le.disabled,error:le.error,filled:le.filled,focused:le.focused,required:le.required};delete W.ownerState;const j=k3(W);return G.jsx(T3,{as:g,className:yt(j.root,m),ref:o,...q,ownerState:W,children:h===" "?j2||(j2=G.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):h})});function E3(e){return Wt("MuiFormLabel",e)}const $h=Zt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),P3=e=>{const{classes:t,color:o,focused:l,disabled:h,error:m,filled:g,required:u}=e,I={root:["root",`color${at(o)}`,h&&"disabled",m&&"error",g&&"filled",l&&"focused",u&&"required"],asterisk:["asterisk",m&&"error"]};return Gt(I,E3,t)},M3=ot("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color==="secondary"&&t.colorSecondary,o.filled&&t.filled]}})(tr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{color:t},style:{[`&.${$h.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${$h.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${$h.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),A3=ot("span",{name:"MuiFormLabel",slot:"Asterisk"})(tr(({theme:e})=>({[`&.${$h.error}`]:{color:(e.vars||e).palette.error.main}}))),z3=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiFormLabel"}),{children:h,className:m,color:g,component:u="label",disabled:I,error:M,filled:B,focused:L,required:A,...Z}=l,q=Zu(),re=qu({props:l,muiFormControl:q,states:["color","required","focused","disabled","error","filled"]}),le={...l,color:re.color||"primary",component:u,disabled:re.disabled,error:re.error,filled:re.filled,focused:re.focused,required:re.required},W=P3(le);return G.jsxs(M3,{as:u,ownerState:le,className:yt(W.root,m),ref:o,...Z,children:[h,re.required&&G.jsxs(A3,{ownerState:le,"aria-hidden":!0,className:W.asterisk,children:["","*"]})]})}),mh=d5({createStyledComponent:ot("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>Ht({props:e,name:"MuiGrid"}),useTheme:tl});function sx(e){return`scale(${e}, ${e**2})`}const R3={entering:{opacity:1,transform:sx(1)},entered:{opacity:1,transform:"none"}},G_=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),ax=ee.forwardRef(function(t,o){const{addEndListener:l,appear:h=!0,children:m,easing:g,in:u,onEnter:I,onEntered:M,onEntering:B,onExit:L,onExited:A,onExiting:Z,style:q,timeout:re="auto",TransitionComponent:le=Jo,...W}=t,j=hT(),V=ee.useRef(),Q=tl(),pe=ee.useRef(null),de=Zn(pe,Hu(m),o),_e=Le=>$e=>{if(Le){const Ke=pe.current;$e===void 0?Le(Ke):Le(Ke,$e)}},ge=_e(B),Ae=_e((Le,$e)=>{L0(Le);const{duration:Ke,delay:be,easing:Ee}=Lu({style:q,timeout:re,easing:g},{mode:"enter"});let We;re==="auto"?(We=Q.transitions.getAutoHeightDuration(Le.clientHeight),V.current=We):We=Ke,Le.style.transition=[Q.transitions.create("opacity",{duration:We,delay:be}),Q.transitions.create("transform",{duration:G_?We:We*.666,delay:be,easing:Ee})].join(","),I&&I(Le,$e)}),Re=_e(M),De=_e(Z),X=_e(Le=>{const{duration:$e,delay:Ke,easing:be}=Lu({style:q,timeout:re,easing:g},{mode:"exit"});let Ee;re==="auto"?(Ee=Q.transitions.getAutoHeightDuration(Le.clientHeight),V.current=Ee):Ee=$e,Le.style.transition=[Q.transitions.create("opacity",{duration:Ee,delay:Ke}),Q.transitions.create("transform",{duration:G_?Ee:Ee*.666,delay:G_?Ke:Ke||Ee*.333,easing:be})].join(","),Le.style.opacity=0,Le.style.transform=sx(.75),L&&L(Le)}),Me=_e(A),Ie=Le=>{re==="auto"&&j.start(V.current||0,Le),l&&l(pe.current,Le)};return G.jsx(le,{appear:h,in:u,nodeRef:pe,onEnter:Ae,onEntered:Re,onEntering:ge,onExit:X,onExited:Me,onExiting:De,addEndListener:Ie,timeout:re==="auto"?null:re,...W,children:(Le,{ownerState:$e,...Ke})=>ee.cloneElement(m,{style:{opacity:0,transform:sx(.75),visibility:Le==="exited"&&!u?"hidden":void 0,...R3[Le],...q,...m.props.style},ref:de,...Ke})})});ax&&(ax.muiSupportAuto=!0);const D3=e=>{const{classes:t,disableUnderline:o}=e,h=Gt({root:["root",!o&&"underline"],input:["input"]},BL,t);return{...t,...h}},L3=ot(Hg,{shouldForwardProp:e=>Ri(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...Wg(e,t),!o.disableUnderline&&t.underline]}})(tr(({theme:e})=>{let o=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(o=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:l})=>l.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:l})=>!l.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${fh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${fh.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${fh.disabled}, .${fh.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${o}`}},[`&.${fh.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(ii()).map(([l])=>({props:{color:l,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[l].main}`}}}))]}})),B3=ot(qg,{name:"MuiInput",slot:"Input",overridesResolver:Gg})({}),N0=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiInput"}),{disableUnderline:h=!1,components:m={},componentsProps:g,fullWidth:u=!1,inputComponent:I="input",multiline:M=!1,slotProps:B,slots:L={},type:A="text",...Z}=l,q=D3(l),le={root:{ownerState:{disableUnderline:h}}},W=B??g?qn(B??g,le):le,j=L.root??m.Root??L3,V=L.input??m.Input??B3;return G.jsx(F0,{slots:{root:j,input:V},slotProps:W,fullWidth:u,inputComponent:I,multiline:M,ref:o,type:A,...Z,classes:q})});N0.muiName="Input";function F3(e){return Wt("MuiInputLabel",e)}Zt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const O3=e=>{const{classes:t,formControl:o,size:l,shrink:h,disableAnimation:m,variant:g,required:u}=e,I={root:["root",o&&"formControl",!m&&"animated",h&&"shrink",l&&l!=="medium"&&`size${at(l)}`,g],asterisk:[u&&"asterisk"]},M=Gt(I,F3,t);return{...t,...M}},$3=ot(z3,{shouldForwardProp:e=>Ri(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${$h.asterisk}`]:t.asterisk},t.root,o.formControl&&t.formControl,o.size==="small"&&t.sizeSmall,o.shrink&&t.shrink,!o.disableAnimation&&t.animated,o.focused&&t.focused,t[o.variant]]}})(tr(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:o})=>t==="filled"&&o.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:o,size:l})=>t==="filled"&&o.shrink&&l==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:o})=>t==="outlined"&&o.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),TT=ee.forwardRef(function(t,o){const l=Ht({name:"MuiInputLabel",props:t}),{disableAnimation:h=!1,margin:m,shrink:g,variant:u,className:I,...M}=l,B=Zu();let L=g;typeof L>"u"&&B&&(L=B.filled||B.focused||B.adornedStart);const A=qu({props:l,muiFormControl:B,states:["size","variant","required","focused"]}),Z={...l,disableAnimation:h,formControl:B,shrink:L,size:A.size,variant:A.variant,required:A.required,focused:A.focused},q=O3(Z);return G.jsx($3,{"data-shrink":L,ref:o,className:yt(q.root,I),...M,ownerState:Z,classes:q})});function N3(e){return Wt("MuiLink",e)}const j3=Zt("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),V3=({theme:e,ownerState:t})=>{const o=t.color;if("colorSpace"in e&&e.colorSpace){const m=ps(e,`palette.${o}.main`)||ps(e,`palette.${o}`)||t.color;return e.alpha(m,.4)}const l=ps(e,`palette.${o}.main`,!1)||ps(e,`palette.${o}`,!1)||t.color,h=ps(e,`palette.${o}.mainChannel`)||ps(e,`palette.${o}Channel`);return"vars"in e&&h?`rgba(${h} / 0.4)`:ap(l,.4)},V2={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},U3=e=>{const{classes:t,component:o,focusVisible:l,underline:h}=e,m={root:["root",`underline${at(h)}`,o==="button"&&"button",l&&"focusVisible"]};return Gt(m,N3,t)},W3=ot(Vt,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`underline${at(o.underline)}`],o.component==="button"&&t.button]}})(tr(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:o})=>t==="always"&&o.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:t,ownerState:o})=>t==="always"&&o.color==="inherit",style:e.colorSpace?{textDecorationColor:e.alpha("currentColor",.4)}:null},...Object.entries(e.palette).filter(ii()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${j3.focusVisible}`]:{outline:"auto"}}}]}))),G3=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiLink"}),h=tl(),{className:m,color:g="primary",component:u="a",onBlur:I,onFocus:M,TypographyClasses:B,underline:L="always",variant:A="inherit",sx:Z,...q}=l,[re,le]=ee.useState(!1),W=pe=>{Um(pe.target)||le(!1),I&&I(pe)},j=pe=>{Um(pe.target)&&le(!0),M&&M(pe)},V={...l,color:g,component:u,focusVisible:re,underline:L,variant:A},Q=U3(V);return G.jsx(W3,{color:g,className:yt(Q.root,m),classes:B,component:u,onBlur:W,onFocus:j,ref:o,ownerState:V,variant:A,...q,sx:[...V2[g]===void 0?[{color:g}]:[],...Array.isArray(Z)?Z:[Z]],style:{...q.style,...L==="always"&&g!=="inherit"&&!V2[g]&&{"--Link-underlineColor":V3({theme:h,ownerState:V})}}})}),xs=ee.createContext({});function H3(e){return Wt("MuiList",e)}Zt("MuiList",["root","padding","dense","subheader"]);const q3=e=>{const{classes:t,disablePadding:o,dense:l,subheader:h}=e;return Gt({root:["root",!o&&"padding",l&&"dense",h&&"subheader"]},H3,t)},Z3=ot("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disablePadding&&t.padding,o.dense&&t.dense,o.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),lx=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiList"}),{children:h,className:m,component:g="ul",dense:u=!1,disablePadding:I=!1,subheader:M,...B}=l,L=ee.useMemo(()=>({dense:u}),[u]),A={...l,component:g,dense:u,disablePadding:I},Z=q3(A);return G.jsx(xs.Provider,{value:L,children:G.jsxs(Z3,{as:g,className:yt(Z.root,m),ref:o,ownerState:A,...B,children:[M,h]})})});function X3(e){return Wt("MuiListItem",e)}Zt("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function K3(e){return Wt("MuiListItemButton",e)}const iu=Zt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Y3=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters]},J3=e=>{const{alignItems:t,classes:o,dense:l,disabled:h,disableGutters:m,divider:g,selected:u}=e,M=Gt({root:["root",l&&"dense",!m&&"gutters",g&&"divider",h&&"disabled",t==="flex-start"&&"alignItemsFlexStart",u&&"selected"]},K3,o);return{...o,...M}},Q3=ot(Gu,{shouldForwardProp:e=>Ri(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Y3})(tr(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${iu.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${iu.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${iu.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${iu.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${iu.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),eB=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiListItemButton"}),{alignItems:h="center",autoFocus:m=!1,component:g="div",children:u,dense:I=!1,disableGutters:M=!1,divider:B=!1,focusVisibleClassName:L,selected:A=!1,className:Z,...q}=l,re=ee.useContext(xs),le=ee.useMemo(()=>({dense:I||re.dense||!1,alignItems:h,disableGutters:M}),[h,re.dense,I,M]),W=ee.useRef(null);Xo(()=>{m&&W.current&&W.current.focus()},[m]);const j={...l,alignItems:h,dense:le.dense,disableGutters:M,divider:B,selected:A},V=J3(j),Q=Zn(W,o);return G.jsx(xs.Provider,{value:le,children:G.jsx(Q3,{ref:Q,href:q.href||q.to,component:(q.href||q.to)&&g==="div"?"button":g,focusVisibleClassName:yt(V.focusVisible,L),ownerState:j,className:yt(V.root,Z),...q,classes:V,children:u})})});function tB(e){return Wt("MuiListItemSecondaryAction",e)}Zt("MuiListItemSecondaryAction",["root","disableGutters"]);const rB=e=>{const{disableGutters:t,classes:o}=e;return Gt({root:["root",t&&"disableGutters"]},tB,o)},nB=ot("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),IT=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiListItemSecondaryAction"}),{className:h,...m}=l,g=ee.useContext(xs),u={...l,disableGutters:g.disableGutters},I=rB(u);return G.jsx(nB,{className:yt(I.root,h),ownerState:u,ref:o,...m})});IT.muiName="ListItemSecondaryAction";const iB=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters,!o.disablePadding&&t.padding,o.hasSecondaryAction&&t.secondaryAction]},oB=e=>{const{alignItems:t,classes:o,dense:l,disableGutters:h,disablePadding:m,divider:g,hasSecondaryAction:u}=e;return Gt({root:["root",l&&"dense",!h&&"gutters",!m&&"padding",g&&"divider",t==="flex-start"&&"alignItemsFlexStart",u&&"secondaryAction"],container:["container"],secondaryAction:["secondaryAction"]},X3,o)},sB=ot("div",{name:"MuiListItem",slot:"Root",overridesResolver:iB})(tr(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${iu.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),aB=ot("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),Rl=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiListItem"}),{alignItems:h="center",children:m,className:g,component:u,components:I={},componentsProps:M={},ContainerComponent:B="li",ContainerProps:{className:L,...A}={},dense:Z=!1,disableGutters:q=!1,disablePadding:re=!1,divider:le=!1,secondaryAction:W,slotProps:j={},slots:V={},...Q}=l,pe=ee.useContext(xs),de=ee.useMemo(()=>({dense:Z||pe.dense||!1,alignItems:h,disableGutters:q}),[h,pe.dense,Z,q]),_e=ee.useRef(null),ge=ee.Children.toArray(m),Ae=ge.length&&Fh(ge[ge.length-1],["ListItemSecondaryAction"]),Re={...l,alignItems:h,dense:de.dense,disableGutters:q,disablePadding:re,divider:le,hasSecondaryAction:Ae},De=oB(Re),X=Zn(_e,o),Me={slots:V,slotProps:j},[Ie,Le]=pr("secondaryAction",{elementType:IT,externalForwardedProps:Me,ownerState:Re,className:De.secondaryAction}),$e=V.root||I.Root||sB,Ke=j.root||M.root||{},be={className:yt(De.root,Ke.className,g),...Q};let Ee=u||"li";return Ae?(Ee=!be.component&&!u?"div":Ee,B==="li"&&(Ee==="li"?Ee="div":be.component==="li"&&(be.component="div")),G.jsx(xs.Provider,{value:de,children:G.jsxs(aB,{as:B,className:yt(De.container,L),ref:X,ownerState:Re,...A,children:[G.jsx($e,{...Ke,...!Bu($e)&&{as:Ee,ownerState:{...Re,...Ke.ownerState}},...be,children:ge}),ge.pop()]})})):G.jsx(xs.Provider,{value:de,children:G.jsxs($e,{...Ke,as:Ee,ref:X,...!Bu($e)&&{ownerState:{...Re,...Ke.ownerState}},...be,children:[ge,W&&G.jsx(Ie,{...Le,children:W})]})})}),U2=Zt("MuiListItemIcon",["root","alignItemsFlexStart"]);function lB(e){return Wt("MuiListItemText",e)}const yu=Zt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),cB=e=>{const{classes:t,inset:o,primary:l,secondary:h,dense:m}=e;return Gt({root:["root",o&&"inset",m&&"dense",l&&h&&"multiline"],primary:["primary"],secondary:["secondary"]},lB,t)},uB=ot("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${yu.primary}`]:t.primary},{[`& .${yu.secondary}`]:t.secondary},t.root,o.inset&&t.inset,o.primary&&o.secondary&&t.multiline,o.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${k2.root}:where(& .${yu.primary})`]:{display:"block"},[`.${k2.root}:where(& .${yu.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),W2=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiListItemText"}),{children:h,className:m,disableTypography:g=!1,inset:u=!1,primary:I,primaryTypographyProps:M,secondary:B,secondaryTypographyProps:L,slots:A={},slotProps:Z={},...q}=l,{dense:re}=ee.useContext(xs);let le=I??h,W=B;const j={...l,disableTypography:g,inset:u,primary:!!le,secondary:!!W,dense:re},V=cB(j),Q={slots:A,slotProps:{primary:M,secondary:L,...Z}},[pe,de]=pr("root",{className:yt(V.root,m),elementType:uB,externalForwardedProps:{...Q,...q},ownerState:j,ref:o}),[_e,ge]=pr("primary",{className:V.primary,elementType:Vt,externalForwardedProps:Q,ownerState:j}),[Ae,Re]=pr("secondary",{className:V.secondary,elementType:Vt,externalForwardedProps:Q,ownerState:j});return le!=null&&le.type!==Vt&&!g&&(le=G.jsx(_e,{variant:re?"body2":"body1",component:ge!=null&&ge.variant?void 0:"span",...ge,children:le})),W!=null&&W.type!==Vt&&!g&&(W=G.jsx(Ae,{variant:"body2",color:"textSecondary",...Re,children:W})),G.jsxs(pe,{...de,children:[le,W]})});function H_(e,t,o){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:o?null:e.firstChild}function G2(e,t,o){return e===t?o?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:o?null:e.lastChild}function ET(e,t){if(t===void 0)return!0;let o=e.innerText;return o===void 0&&(o=e.textContent),o=o.trim().toLowerCase(),o.length===0?!1:t.repeating?o[0]===t.keys[0]:o.startsWith(t.keys.join(""))}function gh(e,t,o,l,h,m){let g=!1,u=h(e,t,t?o:!1);for(;u;){if(u===e.firstChild){if(g)return!1;g=!0}const I=l?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!ET(u,m)||I)u=h(e,u,o);else return u.focus(),!0}return!1}const dB=ee.forwardRef(function(t,o){const{actions:l,autoFocus:h=!1,autoFocusItem:m=!1,children:g,className:u,disabledItemsFocusable:I=!1,disableListWrap:M=!1,onKeyDown:B,variant:L="selectedMenu",...A}=t,Z=ee.useRef(null),q=ee.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Xo(()=>{h&&Z.current.focus()},[h]),ee.useImperativeHandle(l,()=>({adjustStyleForScrollbar:(V,{direction:Q})=>{const pe=!Z.current.style.width;if(V.clientHeight<Z.current.clientHeight&&pe){const de=`${bT(Yo(V))}px`;Z.current.style[Q==="rtl"?"paddingLeft":"paddingRight"]=de,Z.current.style.width=`calc(100% + ${de})`}return Z.current}}),[]);const re=V=>{const Q=Z.current,pe=V.key;if(V.ctrlKey||V.metaKey||V.altKey){B&&B(V);return}const _e=Th(Ko(Q));if(pe==="ArrowDown")V.preventDefault(),gh(Q,_e,M,I,H_);else if(pe==="ArrowUp")V.preventDefault(),gh(Q,_e,M,I,G2);else if(pe==="Home")V.preventDefault(),gh(Q,null,M,I,H_);else if(pe==="End")V.preventDefault(),gh(Q,null,M,I,G2);else if(pe.length===1){const ge=q.current,Ae=pe.toLowerCase(),Re=performance.now();ge.keys.length>0&&(Re-ge.lastTime>500?(ge.keys=[],ge.repeating=!0,ge.previousKeyMatched=!0):ge.repeating&&Ae!==ge.keys[0]&&(ge.repeating=!1)),ge.lastTime=Re,ge.keys.push(Ae);const De=_e&&!ge.repeating&&ET(_e,ge);ge.previousKeyMatched&&(De||gh(Q,_e,!1,I,H_,ge))?V.preventDefault():ge.previousKeyMatched=!1}B&&B(V)},le=Zn(Z,o);let W=-1;ee.Children.forEach(g,(V,Q)=>{if(!ee.isValidElement(V)){W===Q&&(W+=1,W>=g.length&&(W=-1));return}V.props.disabled||(L==="selectedMenu"&&V.props.selected||W===-1)&&(W=Q),W===Q&&(V.props.disabled||V.props.muiSkipListHighlight||V.type.muiSkipListHighlight)&&(W+=1,W>=g.length&&(W=-1))});const j=ee.Children.map(g,(V,Q)=>{if(Q===W){const pe={};return m&&(pe.autoFocus=!0),V.props.tabIndex===void 0&&L==="selectedMenu"&&(pe.tabIndex=0),ee.cloneElement(V,pe)}return V});return G.jsx(lx,{role:"menu",ref:le,className:u,onKeyDown:re,tabIndex:h?0:-1,...A,children:j})});function hB(e){return Wt("MuiPopover",e)}Zt("MuiPopover",["root","paper"]);function H2(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.height/2:t==="bottom"&&(o=e.height),o}function q2(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.width/2:t==="right"&&(o=e.width),o}function Z2(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Kf(e){return typeof e=="function"?e():e}const pB=e=>{const{classes:t}=e;return Gt({root:["root"],paper:["paper"]},hB,t)},fB=ot(O0,{name:"MuiPopover",slot:"Root"})({}),PT=ot(rl,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),mB=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiPopover"}),{action:h,anchorEl:m,anchorOrigin:g={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:I="anchorEl",children:M,className:B,container:L,elevation:A=8,marginThreshold:Z=16,open:q,PaperProps:re={},slots:le={},slotProps:W={},transformOrigin:j={vertical:"top",horizontal:"left"},TransitionComponent:V,transitionDuration:Q="auto",TransitionProps:pe={},disableScrollLock:de=!1,..._e}=l,ge=ee.useRef(),Ae={...l,anchorOrigin:g,anchorReference:I,elevation:A,marginThreshold:Z,transformOrigin:j,TransitionComponent:V,transitionDuration:Q,TransitionProps:pe},Re=pB(Ae),De=ee.useCallback(()=>{if(I==="anchorPosition")return u;const vt=Kf(m),Xt=(vt&&vt.nodeType===1?vt:Ko(ge.current).body).getBoundingClientRect();return{top:Xt.top+H2(Xt,g.vertical),left:Xt.left+q2(Xt,g.horizontal)}},[m,g.horizontal,g.vertical,u,I]),X=ee.useCallback(vt=>({vertical:H2(vt,j.vertical),horizontal:q2(vt,j.horizontal)}),[j.horizontal,j.vertical]),Me=ee.useCallback(vt=>{const Kt={width:vt.offsetWidth,height:vt.offsetHeight},Xt=X(Kt);if(I==="none")return{top:null,left:null,transformOrigin:Z2(Xt)};const _r=De();let Nt=_r.top-Xt.vertical,lr=_r.left-Xt.horizontal;const ze=Nt+Kt.height,$r=lr+Kt.width,kr=Yo(Kf(m)),At=kr.innerHeight-Z,er=kr.innerWidth-Z;if(Z!==null&&Nt<Z){const br=Nt-Z;Nt-=br,Xt.vertical+=br}else if(Z!==null&&ze>At){const br=ze-At;Nt-=br,Xt.vertical+=br}if(Z!==null&&lr<Z){const br=lr-Z;lr-=br,Xt.horizontal+=br}else if($r>er){const br=$r-er;lr-=br,Xt.horizontal+=br}return{top:`${Math.round(Nt)}px`,left:`${Math.round(lr)}px`,transformOrigin:Z2(Xt)}},[m,I,De,X,Z]),[Ie,Le]=ee.useState(q),$e=ee.useCallback(()=>{const vt=ge.current;if(!vt)return;const Kt=Me(vt);Kt.top!==null&&vt.style.setProperty("top",Kt.top),Kt.left!==null&&(vt.style.left=Kt.left),vt.style.transformOrigin=Kt.transformOrigin,Le(!0)},[Me]);ee.useEffect(()=>(de&&window.addEventListener("scroll",$e),()=>window.removeEventListener("scroll",$e)),[m,de,$e]);const Ke=()=>{$e()},be=()=>{Le(!1)};ee.useEffect(()=>{q&&$e()}),ee.useImperativeHandle(h,()=>q?{updatePosition:()=>{$e()}}:null,[q,$e]),ee.useEffect(()=>{if(!q)return;const vt=A0(()=>{$e()}),Kt=Yo(Kf(m));return Kt.addEventListener("resize",vt),()=>{vt.clear(),Kt.removeEventListener("resize",vt)}},[m,q,$e]);let Ee=Q;const We={slots:{transition:V,...le},slotProps:{transition:pe,paper:re,...W}},[Ze,Ge]=pr("transition",{elementType:ax,externalForwardedProps:We,ownerState:Ae,getSlotProps:vt=>({...vt,onEntering:(Kt,Xt)=>{var _r;(_r=vt.onEntering)==null||_r.call(vt,Kt,Xt),Ke()},onExited:Kt=>{var Xt;(Xt=vt.onExited)==null||Xt.call(vt,Kt),be()}}),additionalProps:{appear:!0,in:q}});Q==="auto"&&!Ze.muiSupportAuto&&(Ee=void 0);const Ct=L||(m?Ko(Kf(m)).body:void 0),[Dt,{slots:$t,slotProps:Ut,...Rt}]=pr("root",{ref:o,elementType:fB,externalForwardedProps:{...We,..._e},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:le.backdrop},slotProps:{backdrop:lT(typeof W.backdrop=="function"?W.backdrop(Ae):W.backdrop,{invisible:!0})},container:Ct,open:q},ownerState:Ae,className:yt(Re.root,B)}),[mr,Jt]=pr("paper",{ref:ge,className:Re.paper,elementType:PT,externalForwardedProps:We,shouldForwardComponentProp:!0,additionalProps:{elevation:A,style:Ie?void 0:{opacity:0}},ownerState:Ae});return G.jsx(Dt,{...Rt,...!Bu(Dt)&&{slots:$t,slotProps:Ut,disableScrollLock:de},children:G.jsx(Ze,{...Ge,timeout:Ee,children:G.jsx(mr,{...Jt,children:M})})})});function gB(e){return Wt("MuiMenu",e)}Zt("MuiMenu",["root","paper","list"]);const yB={vertical:"top",horizontal:"right"},_B={vertical:"top",horizontal:"left"},vB=e=>{const{classes:t}=e;return Gt({root:["root"],paper:["paper"],list:["list"]},gB,t)},xB=ot(mB,{shouldForwardProp:e=>Ri(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),bB=ot(PT,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),wB=ot(dB,{name:"MuiMenu",slot:"List"})({outline:0}),SB=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiMenu"}),{autoFocus:h=!0,children:m,className:g,disableAutoFocusItem:u=!1,MenuListProps:I={},onClose:M,open:B,PaperProps:L={},PopoverClasses:A,transitionDuration:Z="auto",TransitionProps:{onEntering:q,...re}={},variant:le="selectedMenu",slots:W={},slotProps:j={},...V}=l,Q=Hk(),pe={...l,autoFocus:h,disableAutoFocusItem:u,MenuListProps:I,onEntering:q,PaperProps:L,transitionDuration:Z,TransitionProps:re,variant:le},de=vB(pe),_e=h&&!u&&B,ge=ee.useRef(null),Ae=(Ee,We)=>{ge.current&&ge.current.adjustStyleForScrollbar(Ee,{direction:Q?"rtl":"ltr"}),q&&q(Ee,We)},Re=Ee=>{Ee.key==="Tab"&&(Ee.preventDefault(),M&&M(Ee,"tabKeyDown"))};let De=-1;ee.Children.map(m,(Ee,We)=>{ee.isValidElement(Ee)&&(Ee.props.disabled||(le==="selectedMenu"&&Ee.props.selected||De===-1)&&(De=We))});const X={slots:W,slotProps:{list:I,transition:re,paper:L,...j}},Me=IL({elementType:W.root,externalSlotProps:j.root,ownerState:pe,className:[de.root,g]}),[Ie,Le]=pr("paper",{className:de.paper,elementType:bB,externalForwardedProps:X,shouldForwardComponentProp:!0,ownerState:pe}),[$e,Ke]=pr("list",{className:yt(de.list,I.className),elementType:wB,shouldForwardComponentProp:!0,externalForwardedProps:X,getSlotProps:Ee=>({...Ee,onKeyDown:We=>{var Ze;Re(We),(Ze=Ee.onKeyDown)==null||Ze.call(Ee,We)}}),ownerState:pe}),be=typeof X.slotProps.transition=="function"?X.slotProps.transition(pe):X.slotProps.transition;return G.jsx(xB,{onClose:M,anchorOrigin:{vertical:"bottom",horizontal:Q?"right":"left"},transformOrigin:Q?yB:_B,slots:{root:W.root,paper:Ie,backdrop:W.backdrop,...W.transition&&{transition:W.transition}},slotProps:{root:Me,paper:Le,backdrop:typeof j.backdrop=="function"?j.backdrop(pe):j.backdrop,transition:{...be,onEntering:(...Ee)=>{var We;Ae(...Ee),(We=be==null?void 0:be.onEntering)==null||We.call(be,...Ee)}}},open:B,ref:o,transitionDuration:Z,ownerState:pe,...V,classes:A,children:G.jsx($e,{actions:ge,autoFocus:h&&(De===-1||u),autoFocusItem:_e,variant:le,...Ke,children:m})})});function CB(e){return Wt("MuiMenuItem",e)}const yh=Zt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),kB=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.divider&&t.divider,!o.disableGutters&&t.gutters]},TB=e=>{const{disabled:t,dense:o,divider:l,disableGutters:h,selected:m,classes:g}=e,I=Gt({root:["root",o&&"dense",t&&"disabled",!h&&"gutters",l&&"divider",m&&"selected"]},CB,g);return{...g,...I}},IB=ot(Gu,{shouldForwardProp:e=>Ri(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:kB})(tr(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${yh.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${yh.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${yh.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${yh.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${yh.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${F2.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${F2.inset}`]:{marginLeft:52},[`& .${yu.root}`]:{marginTop:0,marginBottom:0},[`& .${yu.inset}`]:{paddingLeft:36},[`& .${U2.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${U2.root} svg`]:{fontSize:"1.25rem"}}}]}))),X2=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiMenuItem"}),{autoFocus:h=!1,component:m="li",dense:g=!1,divider:u=!1,disableGutters:I=!1,focusVisibleClassName:M,role:B="menuitem",tabIndex:L,className:A,...Z}=l,q=ee.useContext(xs),re=ee.useMemo(()=>({dense:g||q.dense||!1,disableGutters:I}),[q.dense,g,I]),le=ee.useRef(null);Xo(()=>{h&&le.current&&le.current.focus()},[h]);const W={...l,dense:re.dense,divider:u,disableGutters:I},j=TB(l),V=Zn(le,o);let Q;return l.disabled||(Q=L!==void 0?L:-1),G.jsx(xs.Provider,{value:re,children:G.jsx(IB,{ref:V,role:B,tabIndex:Q,component:m,focusVisibleClassName:yt(j.focusVisible,M),className:yt(j.root,A),...Z,ownerState:W,classes:j})})});function EB(e){return Wt("MuiNativeSelect",e)}const j0=Zt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),PB=e=>{const{classes:t,variant:o,disabled:l,multiple:h,open:m,error:g}=e,u={select:["select",o,l&&"disabled",h&&"multiple",g&&"error"],icon:["icon",`icon${at(o)}`,m&&"iconOpen",l&&"disabled"]};return Gt(u,EB,t)},MT=ot("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${j0.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),MB=ot(MT,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ri,overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.select,t[o.variant],o.error&&t.error,{[`&.${j0.multiple}`]:t.multiple}]}})({}),AT=ot("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${j0.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),AB=ot(AT,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${at(o.variant)}`],o.open&&t.iconOpen]}})({}),zB=ee.forwardRef(function(t,o){const{className:l,disabled:h,error:m,IconComponent:g,inputRef:u,variant:I="standard",...M}=t,B={...t,disabled:h,variant:I,error:m},L=PB(B);return G.jsxs(ee.Fragment,{children:[G.jsx(MB,{ownerState:B,className:yt(L.select,l),disabled:h,ref:u||o,...M}),t.multiple?null:G.jsx(AB,{as:g,ownerState:B,className:L.icon})]})});var K2;const RB=ot("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Ri})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),DB=ot("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Ri})(tr(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function LB(e){const{children:t,classes:o,className:l,label:h,notched:m,...g}=e,u=h!=null&&h!=="",I={...e,notched:m,withLabel:u};return G.jsx(RB,{"aria-hidden":!0,className:l,ownerState:I,...g,children:G.jsx(DB,{ownerState:I,children:u?G.jsx("span",{children:h}):K2||(K2=G.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const BB=e=>{const{classes:t}=e,l=Gt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},FL,t);return{...t,...l}},FB=ot(Hg,{shouldForwardProp:e=>Ri(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Wg})(tr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${cs.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${cs.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${cs.focused} .${cs.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(ii()).map(([o])=>({props:{color:o},style:{[`&.${cs.focused} .${cs.notchedOutline}`]:{borderColor:(e.vars||e).palette[o].main}}})),{props:{},style:{[`&.${cs.error} .${cs.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${cs.disabled} .${cs.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:14}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:14}},{props:({ownerState:o})=>o.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:o,size:l})=>o.multiline&&l==="small",style:{padding:"8.5px 14px"}}]}})),OB=ot(LB,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(tr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),$B=ot(qg,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Gg})(tr(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),V0=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiOutlinedInput"}),{components:h={},fullWidth:m=!1,inputComponent:g="input",label:u,multiline:I=!1,notched:M,slots:B={},slotProps:L={},type:A="text",...Z}=l,q=BB(l),re=Zu(),le=qu({props:l,muiFormControl:re,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),W={...l,color:le.color||"primary",disabled:le.disabled,error:le.error,focused:le.focused,formControl:re,fullWidth:m,hiddenLabel:le.hiddenLabel,multiline:I,size:le.size,type:A},j=B.root??h.Root??FB,V=B.input??h.Input??$B,[Q,pe]=pr("notchedOutline",{elementType:OB,className:q.notchedOutline,shouldForwardComponentProp:!0,ownerState:W,externalForwardedProps:{slots:B,slotProps:L},additionalProps:{label:u!=null&&u!==""&&le.required?G.jsxs(ee.Fragment,{children:[u,"","*"]}):u}});return G.jsx(F0,{slots:{root:j,input:V},slotProps:L,renderSuffix:de=>G.jsx(Q,{...pe,notched:typeof M<"u"?M:!!(de.startAdornment||de.filled||de.focused)}),fullWidth:m,inputComponent:g,multiline:I,ref:o,type:A,...Z,classes:{...q,notchedOutline:null}})});V0.muiName="Input";function zT(e){return Wt("MuiSelect",e)}const _h=Zt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Y2;const NB=ot(MT,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`&.${_h.select}`]:t.select},{[`&.${_h.select}`]:t[o.variant]},{[`&.${_h.error}`]:t.error},{[`&.${_h.multiple}`]:t.multiple}]}})({[`&.${_h.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),jB=ot(AT,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${at(o.variant)}`],o.open&&t.iconOpen]}})({}),VB=ot("input",{shouldForwardProp:e=>nT(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function J2(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function UB(e){return e==null||typeof e=="string"&&!e.trim()}const WB=e=>{const{classes:t,variant:o,disabled:l,multiple:h,open:m,error:g}=e,u={select:["select",o,l&&"disabled",h&&"multiple",g&&"error"],icon:["icon",`icon${at(o)}`,m&&"iconOpen",l&&"disabled"],nativeInput:["nativeInput"]};return Gt(u,zT,t)},GB=ee.forwardRef(function(t,o){var si,Ft,xi,Di;const{"aria-describedby":l,"aria-label":h,autoFocus:m,autoWidth:g,children:u,className:I,defaultOpen:M,defaultValue:B,disabled:L,displayEmpty:A,error:Z=!1,IconComponent:q,inputRef:re,labelId:le,MenuProps:W={},multiple:j,name:V,onBlur:Q,onChange:pe,onClose:de,onFocus:_e,onKeyDown:ge,onMouseDown:Ae,onOpen:Re,open:De,readOnly:X,renderValue:Me,required:Ie,SelectDisplayProps:Le={},tabIndex:$e,type:Ke,value:be,variant:Ee="standard",...We}=t,[Ze,Ge]=_2({controlled:be,default:B,name:"Select"}),[Ct,Dt]=_2({controlled:De,default:M,name:"Select"}),$t=ee.useRef(null),Ut=ee.useRef(null),[Rt,mr]=ee.useState(null),{current:Jt}=ee.useRef(De!=null),[vt,Kt]=ee.useState(),Xt=Zn(o,re),_r=ee.useCallback(Tt=>{Ut.current=Tt,Tt&&mr(Tt)},[]),Nt=Rt==null?void 0:Rt.parentNode;ee.useImperativeHandle(Xt,()=>({focus:()=>{Ut.current.focus()},node:$t.current,value:Ze}),[Ze]),ee.useEffect(()=>{M&&Ct&&Rt&&!Jt&&(Kt(g?null:Nt.clientWidth),Ut.current.focus())},[Rt,g]),ee.useEffect(()=>{m&&Ut.current.focus()},[m]),ee.useEffect(()=>{if(!le)return;const Tt=Ko(Ut.current).getElementById(le);if(Tt){const ur=()=>{getSelection().isCollapsed&&Ut.current.focus()};return Tt.addEventListener("click",ur),()=>{Tt.removeEventListener("click",ur)}}},[le]);const lr=(Tt,ur)=>{Tt?Re&&Re(ur):de&&de(ur),Jt||(Kt(g?null:Nt.clientWidth),Dt(Tt))},ze=Tt=>{Ae==null||Ae(Tt),Tt.button===0&&(Tt.preventDefault(),Ut.current.focus(),lr(!0,Tt))},$r=Tt=>{lr(!1,Tt)},kr=ee.Children.toArray(u),At=Tt=>{const ur=kr.find(ne=>ne.props.value===Tt.target.value);ur!==void 0&&(Ge(ur.props.value),pe&&pe(Tt,ur))},er=Tt=>ur=>{let ne;if(ur.currentTarget.hasAttribute("tabindex")){if(j){ne=Array.isArray(Ze)?Ze.slice():[];const O=Ze.indexOf(Tt.props.value);O===-1?ne.push(Tt.props.value):ne.splice(O,1)}else ne=Tt.props.value;if(Tt.props.onClick&&Tt.props.onClick(ur),Ze!==ne&&(Ge(ne),pe)){const O=ur.nativeEvent||ur,$=new O.constructor(O.type,O);Object.defineProperty($,"target",{writable:!0,value:{value:ne,name:V}}),pe($,Tt)}j||lr(!1,ur)}},br=Tt=>{X||([" ","ArrowUp","ArrowDown","Enter"].includes(Tt.key)&&(Tt.preventDefault(),lr(!0,Tt)),ge==null||ge(Tt))},xt=Rt!==null&&Ct,_n=Tt=>{!xt&&Q&&(Object.defineProperty(Tt,"target",{writable:!0,value:{value:Ze,name:V}}),Q(Tt))};delete We["aria-invalid"];let Tr,un;const En=[];let Bn=!1;(Gm({value:Ze})||A)&&(Me?Tr=Me(Ze):Bn=!0);const Xe=kr.map(Tt=>{if(!ee.isValidElement(Tt))return null;let ur;if(j){if(!Array.isArray(Ze))throw new Error(Ks(2));ur=Ze.some(ne=>J2(ne,Tt.props.value)),ur&&Bn&&En.push(Tt.props.children)}else ur=J2(Ze,Tt.props.value),ur&&Bn&&(un=Tt.props.children);return ee.cloneElement(Tt,{"aria-selected":ur?"true":"false",onClick:er(Tt),onKeyUp:ne=>{ne.key===" "&&ne.preventDefault(),Tt.props.onKeyUp&&Tt.props.onKeyUp(ne)},role:"option",selected:ur,value:void 0,"data-value":Tt.props.value})});Bn&&(j?En.length===0?Tr=null:Tr=En.reduce((Tt,ur,ne)=>(Tt.push(ur),ne<En.length-1&&Tt.push(", "),Tt),[]):Tr=un);let dn=vt;!g&&Jt&&Rt&&(dn=Nt.clientWidth);let cr;typeof $e<"u"?cr=$e:cr=L?null:0;const zt=Le.id||(V?`mui-component-select-${V}`:void 0),Nr={...t,variant:Ee,value:Ze,open:xt,error:Z},qe=WB(Nr),kt={...W.PaperProps,...typeof((si=W.slotProps)==null?void 0:si.paper)=="function"?W.slotProps.paper(Nr):(Ft=W.slotProps)==null?void 0:Ft.paper},Pt={...W.MenuListProps,...typeof((xi=W.slotProps)==null?void 0:xi.list)=="function"?W.slotProps.list(Nr):(Di=W.slotProps)==null?void 0:Di.list},Pn=Uu();return G.jsxs(ee.Fragment,{children:[G.jsx(NB,{as:"div",ref:_r,tabIndex:cr,role:"combobox","aria-controls":xt?Pn:void 0,"aria-disabled":L?"true":void 0,"aria-expanded":xt?"true":"false","aria-haspopup":"listbox","aria-label":h,"aria-labelledby":[le,zt].filter(Boolean).join(" ")||void 0,"aria-describedby":l,"aria-required":Ie?"true":void 0,"aria-invalid":Z?"true":void 0,onKeyDown:br,onMouseDown:L||X?null:ze,onBlur:_n,onFocus:_e,...Le,ownerState:Nr,className:yt(Le.className,qe.select,I),id:zt,children:UB(Tr)?Y2||(Y2=G.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):Tr}),G.jsx(VB,{"aria-invalid":Z,value:Array.isArray(Ze)?Ze.join(","):Ze,name:V,ref:$t,"aria-hidden":!0,onChange:At,tabIndex:-1,disabled:L,className:qe.nativeInput,autoFocus:m,required:Ie,...We,ownerState:Nr}),G.jsx(jB,{as:q,className:qe.icon,ownerState:Nr}),G.jsx(SB,{id:`menu-${V||""}`,anchorEl:Nt,open:xt,onClose:$r,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...W,slotProps:{...W.slotProps,list:{"aria-labelledby":le,role:"listbox","aria-multiselectable":j?"true":void 0,disableListWrap:!0,id:Pn,...Pt},paper:{...kt,style:{minWidth:dn,...kt!=null?kt.style:null}}},children:Xe})]})}),HB=e=>{const{classes:t}=e,l=Gt({root:["root"]},zT,t);return{...t,...l}},U0={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>Ri(e)&&e!=="variant"},qB=ot(N0,U0)(""),ZB=ot(V0,U0)(""),XB=ot($0,U0)(""),W0=ee.forwardRef(function(t,o){const l=Ht({name:"MuiSelect",props:t}),{autoWidth:h=!1,children:m,classes:g={},className:u,defaultOpen:I=!1,displayEmpty:M=!1,IconComponent:B=$L,id:L,input:A,inputProps:Z,label:q,labelId:re,MenuProps:le,multiple:W=!1,native:j=!1,onClose:V,onOpen:Q,open:pe,renderValue:de,SelectDisplayProps:_e,variant:ge="outlined",...Ae}=l,Re=j?zB:GB,De=Zu(),X=qu({props:l,muiFormControl:De,states:["variant","error"]}),Me=X.variant||ge,Ie={...l,variant:Me,classes:g},Le=HB(Ie),{root:$e,...Ke}=Le,be=A||{standard:G.jsx(qB,{ownerState:Ie}),outlined:G.jsx(ZB,{label:q,ownerState:Ie}),filled:G.jsx(XB,{ownerState:Ie})}[Me],Ee=Zn(o,Hu(be));return G.jsx(ee.Fragment,{children:ee.cloneElement(be,{inputComponent:Re,inputProps:{children:m,error:X.error,IconComponent:B,variant:Me,type:void 0,multiple:W,...j?{id:L}:{autoWidth:h,defaultOpen:I,displayEmpty:M,labelId:re,MenuProps:le,onClose:V,onOpen:Q,open:pe,renderValue:de,SelectDisplayProps:{id:L,..._e}},...Z,classes:Z?qn(Ke,Z.classes):Ke,...A?A.props.inputProps:{}},...(W&&j||M)&&Me==="outlined"?{notched:!0}:{},ref:Ee,className:yt(be.props.className,u,Le.root),...!A&&{variant:Me},...Ae})})});W0.muiName="Select";const q_=_5({createStyledComponent:ot("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>Ht({props:e,name:"MuiStack"})});function KB(e){return Wt("MuiToolbar",e)}Zt("MuiToolbar",["root","gutters","regular","dense"]);const YB=e=>{const{classes:t,disableGutters:o,variant:l}=e;return Gt({root:["root",!o&&"gutters",l]},KB,t)},JB=ot("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableGutters&&t.gutters,t[o.variant]]}})(tr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),QB=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiToolbar"}),{className:h,component:m="div",disableGutters:g=!1,variant:u="regular",...I}=l,M={...l,component:m,disableGutters:g,variant:u},B=YB(M);return G.jsx(JB,{as:m,className:yt(B.root,h),ref:o,ownerState:M,...I})});function eF(e){return Wt("MuiTextField",e)}Zt("MuiTextField",["root"]);const tF={standard:N0,filled:$0,outlined:V0},rF=e=>{const{classes:t}=e;return Gt({root:["root"]},eF,t)},nF=ot(kT,{name:"MuiTextField",slot:"Root"})({}),iF=ee.forwardRef(function(t,o){const l=Ht({props:t,name:"MuiTextField"}),{autoComplete:h,autoFocus:m=!1,children:g,className:u,color:I="primary",defaultValue:M,disabled:B=!1,error:L=!1,FormHelperTextProps:A,fullWidth:Z=!1,helperText:q,id:re,InputLabelProps:le,inputProps:W,InputProps:j,inputRef:V,label:Q,maxRows:pe,minRows:de,multiline:_e=!1,name:ge,onBlur:Ae,onChange:Re,onFocus:De,placeholder:X,required:Me=!1,rows:Ie,select:Le=!1,SelectProps:$e,slots:Ke={},slotProps:be={},type:Ee,value:We,variant:Ze="outlined",...Ge}=l,Ct={...l,autoFocus:m,color:I,disabled:B,error:L,fullWidth:Z,multiline:_e,required:Me,select:Le,variant:Ze},Dt=rF(Ct),$t=Uu(re),Ut=q&&$t?`${$t}-helper-text`:void 0,Rt=Q&&$t?`${$t}-label`:void 0,mr=tF[Ze],Jt={slots:Ke,slotProps:{input:j,inputLabel:le,htmlInput:W,formHelperText:A,select:$e,...be}},vt={},Kt=Jt.slotProps.inputLabel;Ze==="outlined"&&(Kt&&typeof Kt.shrink<"u"&&(vt.notched=Kt.shrink),vt.label=Q),Le&&((!$e||!$e.native)&&(vt.id=void 0),vt["aria-describedby"]=void 0);const[Xt,_r]=pr("root",{elementType:nF,shouldForwardComponentProp:!0,externalForwardedProps:{...Jt,...Ge},ownerState:Ct,className:yt(Dt.root,u),ref:o,additionalProps:{disabled:B,error:L,fullWidth:Z,required:Me,color:I,variant:Ze}}),[Nt,lr]=pr("input",{elementType:mr,externalForwardedProps:Jt,additionalProps:vt,ownerState:Ct}),[ze,$r]=pr("inputLabel",{elementType:TT,externalForwardedProps:Jt,ownerState:Ct}),[kr,At]=pr("htmlInput",{elementType:"input",externalForwardedProps:Jt,ownerState:Ct}),[er,br]=pr("formHelperText",{elementType:I3,externalForwardedProps:Jt,ownerState:Ct}),[xt,_n]=pr("select",{elementType:W0,externalForwardedProps:Jt,ownerState:Ct}),Tr=G.jsx(Nt,{"aria-describedby":Ut,autoComplete:h,autoFocus:m,defaultValue:M,fullWidth:Z,multiline:_e,name:ge,rows:Ie,maxRows:pe,minRows:de,type:Ee,value:We,id:$t,inputRef:V,onBlur:Ae,onChange:Re,onFocus:De,placeholder:X,inputProps:At,slots:{input:Ke.htmlInput?kr:void 0},...lr});return G.jsxs(Xt,{..._r,children:[Q!=null&&Q!==""&&G.jsx(ze,{htmlFor:$t,id:Rt,...$r,children:Q}),Le?G.jsx(xt,{"aria-describedby":Ut,id:$t,labelId:Rt,value:We,input:Tr,..._n,children:g}):Tr,q&&G.jsx(er,{id:Ut,...br,children:q})]})}),oF=Ln(G.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"})),sF=Ln(G.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),aF=Ln(G.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),Q2=Ln(G.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),lF=Ln(G.jsx("path",{d:"M21.95 10.99c-1.79-.03-3.7-1.95-2.68-4.22-2.98 1-5.77-1.59-5.19-4.56C6.95.71 2 6.58 2 12c0 5.52 4.48 10 10 10 5.89 0 10.54-5.08 9.95-11.01M8.5 15c-.83 0-1.5-.67-1.5-1.5S7.67 12 8.5 12s1.5.67 1.5 1.5S9.33 15 8.5 15m2-5C9.67 10 9 9.33 9 8.5S9.67 7 10.5 7s1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"})),cF=Ln(G.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"})),uF=Ln(G.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),dF=Ln(G.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"})),hF=Ln(G.jsx("path",{d:"M13 16.12c3.47-.41 6.17-3.36 6.17-6.95 0-3.87-3.13-7-7-7s-7 3.13-7 7c0 3.47 2.52 6.34 5.83 6.89V20H5v2h14v-2h-6z"})),pF=Ln(G.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),fF=Ln(G.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),mF=Ln(G.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),gF=Ln(G.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),yF=()=>{const e=ee.useRef(null),t=ee.useRef(null),[o,l]=ee.useState("cartodb"),[h,m]=ee.useState([]),[g,u]=ee.useState(!0),[I,M]=ee.useState(null),[B,L]=ee.useState(null),[A,Z]=ee.useState(!0),q=ee.useRef([]),[re,le]=ee.useState(""),[W,j]=ee.useState(!0),[V,Q]=ee.useState(null),[pe,de]=ee.useState(null),[_e,ge]=ee.useState(20),[Ae,Re]=ee.useState(!1);ee.useEffect(()=>{(async()=>{try{u(!0);const Ee=pD(),We=await fD(Ee);Q(We);const Ze=await mD(We.boundaryUrl);de(Ze);const{trees:Ge}=await dD(We.dataUrl,{photosUrl:We.photosUrl});m(Ge),u(!1)}catch(Ee){console.error("Failed to load tree data:",Ee),M(Ee.message),u(!1)}})()},[]),ee.useEffect(()=>{if(t.current||h.length===0)return;const be=h.map(Ge=>Ge.lat),Ee=h.map(Ge=>Ge.lon),We=be.reduce((Ge,Ct)=>Ge+Ct,0)/be.length,Ze=Ee.reduce((Ge,Ct)=>Ge+Ct,0)/Ee.length;t.current=new Hf.Map({container:e.current,style:{version:8,sources:{cartodb:{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" CartoDB"}},layers:[{id:"cartodb-layer",type:"raster",source:"cartodb",minzoom:0,maxzoom:22}]},center:[Ze,We],zoom:18}),t.current.on("load",()=>{pe&&(t.current.addSource("boundary",{type:"geojson",data:pe}),t.current.addLayer({id:"boundary-line",type:"line",source:"boundary",paint:{"line-color":"#000000","line-width":1}})),h.forEach((Ge,Ct)=>{const Dt=document.createElement("div");if(Dt.className="tree-marker-container",Dt.setAttribute("data-tree-code",Ge.treeCode),Ge.crownRadius){const vt=document.createElement("div");vt.className="tree-canopy",vt.style.width=`${Ge.crownRadius*2}px`,vt.style.height=`${Ge.crownRadius*2}px`,Dt.appendChild(vt)}const $t=document.createElement("div");$t.className="tree-marker",$t.style.backgroundColor=Ge.color,$t.innerHTML=`
          <svg width="14" height="14" viewBox="0 0 14 14">
            ${De(Ge.shape)}
          </svg>
        `,Dt.appendChild($t);const Ut=Ge.treeCode&&Ge.photosBaseUrl?`${Ge.photosBaseUrl}/${Ge.treeCode}.jpg`:null,Rt=`
          <div class="tree-popup">
            <div><strong>Tree code:</strong> ${Ge.treeCode}</div>
            <div><strong>Genus:</strong> ${Ge.genus}</div>
            <div><strong>Species:</strong> ${Ge.species}</div>
            <div><strong>DBH (cm):</strong> ${Ge.dbh||"N/A"}</div>
            <div><strong>Height (m):</strong> ${Ge.height||"N/A"}</div>
            ${Ut?`<img src="${Ut}" alt="Tree photo" class="tree-photo" loading="lazy" />`:'<div class="no-photo">No photo available</div>'}
          </div>
        `,mr=new Hf.Popup({offset:15}).setHTML(Rt),Jt=new Hf.Marker({element:Dt,anchor:"center"}).setLngLat([Ge.lon,Ge.lat]);Dt.addEventListener("click",()=>{document.querySelectorAll(".tree-marker-container").forEach(vt=>vt.classList.remove("active")),Dt.classList.add("active"),L(Ge),t.current&&t.current.flyTo({center:[Ge.lon,Ge.lat],zoom:19,duration:1e3})}),A||Jt.setPopup(mr),Jt.addTo(t.current),q.current.push(Jt)})}),t.current.addControl(new Hf.NavigationControl,"top-right")},[h,A]);const De=be=>{const{sides:Ee,rotation:We}=be,Ze=6,Ge=2*Math.PI/Ee,Ct=We*Math.PI/180;let Dt="M ";for(let $t=0;$t<=Ee;$t++){const Ut=Ct+$t*Ge,Rt=7+Ze*Math.cos(Ut),mr=7+Ze*Math.sin(Ut);Dt+=`${Rt},${mr} `}return`<path d="${Dt}Z" fill="currentColor" />`},X=be=>{l(be);let Ee={version:8,sources:{},layers:[]};switch(be){case"osm":Ee.sources.osm={type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"},Ee.layers.push({id:"osm-layer",type:"raster",source:"osm"});break;case"cartodb":Ee.sources.cartodb={type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" CartoDB"},Ee.layers.push({id:"cartodb-layer",type:"raster",source:"cartodb"});break;case"satellite":Ee.sources.satellite={type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"Esri World Imagery"},Ee.layers.push({id:"satellite-layer",type:"raster",source:"satellite"});break}t.current&&(t.current.setStyle(Ee),t.current.once("styledata",()=>{pe&&!t.current.getSource("boundary")&&(t.current.addSource("boundary",{type:"geojson",data:pe}),t.current.addLayer({id:"boundary-line",type:"line",source:"boundary",paint:{"line-color":"#000000","line-width":1}}))}))},Me=be=>{L(be),be.treeCode&&be.photosBaseUrl?Re(!0):Re(!1),document.querySelectorAll(".tree-marker-container").forEach(We=>We.classList.remove("active"));const Ee=document.querySelector(`[data-tree-code="${be.treeCode}"]`);Ee&&Ee.classList.add("active"),t.current&&t.current.flyTo({center:[be.lon,be.lat],zoom:19,duration:1e3})},Ie=()=>{if(!B||h.length===0)return;const Ee=(h.findIndex(We=>We.treeCode===B.treeCode)+1)%h.length;Me(h[Ee])},Le=()=>{if(!B||h.length===0)return;const Ee=(h.findIndex(We=>We.treeCode===B.treeCode)-1+h.length)%h.length;Me(h[Ee])},$e=h.filter(be=>be.treeCode.toLowerCase().includes(re.toLowerCase())||be.genus.toLowerCase().includes(re.toLowerCase())||be.species.toLowerCase().includes(re.toLowerCase()));Eo.useEffect(()=>{ge(20)},[re]);const Ke=()=>{ge(be=>be+20)};return G.jsxs(ar,{sx:{display:"flex",width:"100%",height:"100%",position:"relative"},children:[G.jsxs(N4,{open:W,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,children:[G.jsxs(Q4,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[" How to Use This Map",G.jsx(ix,{onClick:()=>j(!1),size:"small",children:G.jsx(Q2,{})})]}),G.jsx(K4,{children:G.jsxs(lx,{children:[G.jsx(Rl,{children:" Click on any tree marker on the map to view details"}),G.jsx(Rl,{children:" View detailed information and photos in the sidebar"}),G.jsx(Rl,{children:" Use the navigation arrows to browse through trees"}),G.jsx(Rl,{children:" Search for specific trees by code, genus, or species"}),G.jsx(Rl,{children:" Switch base maps using the buttons on the left"})]})}),G.jsx(W4,{children:G.jsx(Co,{variant:"contained",onClick:()=>j(!1),children:"Got it!"})})]}),g&&G.jsx(ar,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:G.jsx(Ba,{children:G.jsxs(Ol,{sx:{display:"flex",alignItems:"center",gap:2},children:[G.jsx(cp,{}),G.jsx(Vt,{children:"Loading tree data..."})]})})}),I&&G.jsx(ar,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:G.jsxs(yL,{severity:"error",sx:{maxWidth:400},children:["Error loading data: ",I]})}),G.jsx($2,{size:"medium",sx:{position:"absolute",bottom:90,left:20,zIndex:5},color:"default",onClick:()=>window.location.href=window.location.pathname,title:"Back to home",children:G.jsx(uF,{fontSize:"small"})}),G.jsx($2,{size:"medium",sx:{position:"absolute",bottom:20,left:20,zIndex:5},color:"default",onClick:()=>j(!0),title:"How to use this map",children:G.jsx(cF,{fontSize:"small"})}),G.jsx(ar,{sx:{position:"absolute",top:10,left:10,zIndex:1,background:"white",borderRadius:1,boxShadow:2},children:G.jsxs(n4,{variant:"outlined",size:"small",children:[G.jsx(Co,{variant:o==="osm"?"contained":"outlined",onClick:()=>X("osm"),children:"OSM"}),G.jsx(Co,{variant:o==="cartodb"?"contained":"outlined",onClick:()=>X("cartodb"),children:"CartoDB"}),G.jsx(Co,{variant:o==="satellite"?"contained":"outlined",onClick:()=>X("satellite"),children:"Satellite"})]})}),G.jsx("div",{ref:e,style:{flex:1,width:"100%",height:"100%"}}),G.jsxs(f3,{variant:"permanent",anchor:"right",sx:{width:400,flexShrink:0,"& .MuiDrawer-paper":{width:400,boxSizing:"border-box",position:"absolute"}},children:[G.jsxs(ar,{sx:{background:"linear-gradient(135deg, #2d5016 0%, #4a7c2c 100%)",color:"white",p:2.5,boxShadow:2},children:[G.jsxs(Vt,{variant:"h6",sx:{fontWeight:700,mb:.5},children:[" ",(V==null?void 0:V.schoolName)||"Loading..."]}),G.jsx(Vt,{variant:"body2",sx:{opacity:.9},children:"Tree Inventory Map"})]}),G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:1,borderColor:"divider",bgcolor:"#f8f8f8"},children:[G.jsx(Vt,{variant:"h6",children:B&&"Tree Details"}),B&&G.jsx(ix,{onClick:()=>L(null),size:"small",children:G.jsx(Q2,{})})]}),G.jsx(ar,{sx:{flex:1,overflow:"auto",p:2},children:B?G.jsxs(ar,{children:[G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,p:1.5,bgcolor:"#f8f9fa",borderRadius:1},children:[G.jsx(Co,{size:"small",startIcon:G.jsx(pF,{}),onClick:Le,variant:"outlined",children:"Previous"}),G.jsxs(Vt,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:[h.findIndex(be=>be.treeCode===B.treeCode)+1," of ",h.length]}),G.jsx(Co,{size:"small",endIcon:G.jsx(fF,{}),onClick:Ie,variant:"outlined",children:"Next"})]}),G.jsx(ar,{sx:{mb:2},children:B.treeCode&&B.photosBaseUrl?G.jsxs(G.Fragment,{children:[Ae&&G.jsx(ar,{sx:{width:"100%",height:250,bgcolor:"#f0f0f0",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:G.jsx(cp,{size:40})}),G.jsx("img",{src:`${B.photosBaseUrl}/${B.treeCode}.jpg`,alt:`Tree ${B.treeCode}`,style:{width:"100%",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:Ae?"none":"block"},onLoad:()=>Re(!1),onError:()=>{Re(!1)}}),!Ae&&G.jsx(Ba,{sx:{display:"none",bgcolor:"#f9f9f9"},children:G.jsx(Ol,{children:G.jsx(Vt,{variant:"body2",color:"text.secondary",fontStyle:"italic",textAlign:"center",children:"Photo not available"})})})]}):G.jsx(Ba,{sx:{bgcolor:"#f9f9f9"},children:G.jsx(Ol,{children:G.jsx(Vt,{variant:"body2",color:"text.secondary",fontStyle:"italic",textAlign:"center",children:"No photo available"})})})},B.treeCode),G.jsx(Ba,{sx:{mb:2},children:G.jsxs(Ol,{children:[G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[G.jsx(Vt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Tree Code:"}),G.jsx(Vt,{variant:"body2",children:B.treeCode})]}),G.jsx(js,{sx:{my:1}}),G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[G.jsx(Vt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Genus:"}),G.jsx(Vt,{variant:"body2",children:B.genus})]}),G.jsx(js,{sx:{my:1}}),G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[G.jsx(Vt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Species:"}),G.jsx(Vt,{variant:"body2",children:B.species})]}),G.jsx(js,{sx:{my:1}}),G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[G.jsx(Vt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"DBH (cm):"}),G.jsx(Vt,{variant:"body2",children:B.dbh||"N/A"})]}),G.jsx(js,{sx:{my:1}}),G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[G.jsx(Vt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Height (m):"}),G.jsx(Vt,{variant:"body2",children:B.height||"N/A"})]}),(B.crownNS||B.crownEW)&&G.jsxs(G.Fragment,{children:[G.jsx(js,{sx:{my:1}}),G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[G.jsx(Vt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Crown Size:"}),G.jsxs(Vt,{variant:"body2",children:[B.crownNS&&`NS: ${B.crownNS}m`,B.crownNS&&B.crownEW&&" / ",B.crownEW&&`EW: ${B.crownEW}m`]})]})]}),G.jsx(js,{sx:{my:1}}),G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between"},children:[G.jsx(Vt,{variant:"body2",color:"text.secondary",fontWeight:600,children:"Coordinates:"}),G.jsxs(Vt,{variant:"body2",sx:{textAlign:"right"},children:[B.lat.toFixed(6),", ",B.lon.toFixed(6)]})]})]})})]}):G.jsxs(ar,{children:[G.jsx(Ba,{sx:{mb:2,borderRadius:1},children:G.jsxs(Ol,{children:[G.jsx(Vt,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600},children:" Inventory Overview"}),G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[G.jsx(Vt,{variant:"body2",color:"text.secondary",children:"Total Trees:"}),G.jsx(Vt,{variant:"h6",color:"text.primary",children:h.length})]}),G.jsx(js,{sx:{my:1}}),G.jsxs(ar,{sx:{display:"flex",justifyContent:"space-between"},children:[G.jsx(Vt,{variant:"body2",color:"text.secondary",children:"Unique Genera:"}),G.jsx(Vt,{variant:"h6",color:"text.primary",children:new Set(h.map(be=>be.genus)).size})]})]})}),G.jsx(Vt,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,mt:3},children:" Browse Trees"}),G.jsx(iF,{fullWidth:!0,size:"small",placeholder:"Search by code, genus, or species...",value:re,onChange:be=>le(be.target.value),sx:{mb:2}}),G.jsx(ar,{sx:{maxHeight:300,overflow:"auto",border:1,borderColor:"divider",borderRadius:1},children:G.jsxs(lx,{dense:!0,children:[$e.slice(0,_e).map(be=>G.jsxs(eB,{onClick:()=>Me(be),children:[G.jsx(ar,{sx:{width:12,height:12,borderRadius:.5,bgcolor:be.color,mr:1.5,flexShrink:0}}),G.jsx(W2,{primary:be.treeCode,secondary:`${be.genus} ${be.species}`,primaryTypographyProps:{fontWeight:600,fontSize:"0.875rem"},secondaryTypographyProps:{fontSize:"0.75rem",fontStyle:"italic"}})]},be.treeCode)),$e.length>_e&&G.jsx(Rl,{children:G.jsxs(Co,{fullWidth:!0,size:"small",onClick:Ke,sx:{color:"text.secondary"},children:["+",$e.length-_e," more trees... (click to load)"]})}),$e.length===0&&re&&G.jsx(Rl,{children:G.jsx(W2,{primary:"No trees found",primaryTypographyProps:{color:"text.secondary",textAlign:"center"}})})]})})]})})]})]})},_F=()=>{const[e,t]=ee.useState([]),[o,l]=ee.useState(!0),[h,m]=ee.useState(0);ee.useEffect(()=>{(async()=>{try{const V=await aT();t(V),l(!1)}catch(V){console.error("Error loading schools:",V),l(!1)}})()},[]);const g=j=>{j&&(window.location.href=`?school=${j}`)},u=()=>{window.location.href="/"},I=[{icon:dF,title:"Interactive Maps",description:"Explore tree locations on detailed campus maps"},{icon:mF,title:"Tree Photos",description:"View high-quality photos of each tree"},{icon:oF,title:"Tree Data",description:"Access detailed information about species, size, and health"},{icon:gF,title:"Search & Filter",description:"Find trees by code, genus, or species"}],M=[...I,...I,...I],B=3,L=()=>{m(j=>{const V=j-1;return V<0?M.length-I.length-1:V})},A=()=>{m(j=>{const V=j+1;return V>=M.length-I.length?0:V})},Z=()=>G.jsx(TL,{position:"static",sx:{bgcolor:"#2d5016"},children:G.jsxs(QB,{sx:{cursor:"pointer"},onClick:u,children:[G.jsx(hF,{sx:{mr:2,fontSize:32}}),G.jsx(Vt,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600},children:"School Tree Inventory Maps"})]})}),q=()=>G.jsxs(ar,{textAlign:"center",mb:6,children:[G.jsx(Vt,{variant:"h3",sx:{color:"#2d5016",mb:2,fontWeight:700},children:" Interactive Tree Mapping"}),G.jsx(Vt,{variant:"h6",sx:{color:"#4a7c2c",mb:4,fontWeight:400},children:"Explore and manage tree inventories for educational institutions"}),G.jsx(Ba,{sx:{maxWidth:500,mx:"auto",mb:5,boxShadow:3,borderRadius:2},children:G.jsx(Ol,{sx:{p:3},children:G.jsxs(kT,{fullWidth:!0,children:[G.jsx(TT,{id:"school-select-label",children:"Select a School"}),G.jsxs(W0,{labelId:"school-select-label",id:"school-select",onChange:j=>g(j.target.value),defaultValue:"",label:"Select a School",children:[G.jsx(X2,{value:"",disabled:!0,children:"Choose a school..."}),e.map(j=>G.jsx(X2,{value:j.id,children:j.schoolName},j.id))]})]})})})]}),re=()=>G.jsxs(ar,{mb:8,children:[G.jsx(Vt,{variant:"h4",sx:{color:"#2d5016",mb:3,fontWeight:600,textAlign:"center"},children:"Platform Features"}),G.jsxs(ar,{sx:{position:"relative",maxWidth:1100,mx:"auto"},children:[G.jsx(ar,{sx:{display:"flex",justifyContent:"center",overflow:"hidden",px:6},children:G.jsx(ar,{sx:{display:"flex",transition:"transform 0.4s ease-in-out",transform:`translateX(calc(-${h*(100/B)}%))`,gap:2},children:M.map((j,V)=>{const Q=j.icon;return G.jsx(ar,{sx:{minWidth:`calc(${100/B}% - 16px)`,maxWidth:224,display:"flex",justifyContent:"center"},children:G.jsx(Ba,{sx:{width:"100%",transition:"transform 0.2s, box-shadow 0.2s",boxShadow:2,"&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:G.jsxs(Ol,{sx:{textAlign:"center",p:3,display:"flex",flexDirection:"column",alignItems:"center",minHeight:240},children:[G.jsx(ar,{sx:{bgcolor:"#e8f5e9",borderRadius:"50%",width:80,height:80,display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:G.jsx(Q,{sx:{fontSize:40,color:"primary.main"}})}),G.jsx(Vt,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:j.title}),G.jsx(Vt,{variant:"body2",color:"text.secondary",children:j.description})]})})},V)})})}),G.jsx(Co,{onClick:L,sx:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",minWidth:"auto",width:48,height:48,borderRadius:"50%",bgcolor:"white",boxShadow:2,zIndex:1,"&:hover":{bgcolor:"white",boxShadow:4}},children:G.jsx(sF,{sx:{fontSize:32,color:"#2d5016"}})}),G.jsx(Co,{onClick:A,sx:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",minWidth:"auto",width:48,height:48,borderRadius:"50%",bgcolor:"white",boxShadow:2,zIndex:1,"&:hover":{bgcolor:"white",boxShadow:4}},children:G.jsx(aF,{sx:{fontSize:32,color:"#2d5016"}})}),G.jsx(ar,{sx:{display:"flex",justifyContent:"center",gap:1,mt:3},children:I.map((j,V)=>G.jsx(ar,{onClick:()=>m(V),sx:{width:10,height:10,borderRadius:"50%",bgcolor:h%I.length===V?"#2d5016":"#ccc",cursor:"pointer",transition:"background-color 0.3s"}},V))})]})]}),le=()=>G.jsxs(ar,{children:[G.jsx(Vt,{variant:"h4",sx:{color:"#2d5016",mb:3,fontWeight:600,textAlign:"center"},children:"Our Schools"}),o?G.jsx(ar,{sx:{display:"flex",justifyContent:"center",py:4},children:G.jsx(cp,{sx:{color:"primary.main"}})}):G.jsx(mh,{container:!0,spacing:3,children:e.map(j=>G.jsx(mh,{item:!0,xs:12,sm:6,md:4,children:G.jsx(Ba,{sx:{height:"100%",transition:"all 0.3s",boxShadow:2,"&:hover":{transform:"translateY(-8px)",boxShadow:6}},children:G.jsxs(d4,{onClick:()=>g(j.id),sx:{height:"100%",p:3,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between",minHeight:180},children:[G.jsxs(ar,{children:[G.jsx(Vt,{variant:"h6",color:"primary",gutterBottom:!0,sx:{fontWeight:600},children:j.schoolName}),j.address&&G.jsx(Vt,{variant:"body2",color:"text.secondary",sx:{mb:2},children:j.address})]}),G.jsx(Co,{variant:"contained",fullWidth:!0,sx:{mt:2},children:"View Map "})]})})},j.id))})]}),W=()=>G.jsx(ar,{component:"footer",sx:{bgcolor:"#2d5016",color:"white",py:3,mt:"auto"},children:G.jsx(R2,{maxWidth:"lg",children:G.jsxs(mh,{container:!0,spacing:3,alignItems:"center",children:[G.jsxs(mh,{item:!0,xs:12,md:6,children:[G.jsx(Vt,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"School Tree Inventory Maps"}),G.jsx(Vt,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)"},children:"Interactive mapping platform for educational tree inventories"})]}),G.jsx(mh,{item:!0,xs:12,md:6,children:G.jsxs(ar,{sx:{textAlign:{xs:"left",md:"right"}},children:[G.jsxs(Vt,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)"},children:[" ",new Date().getFullYear()," School Tree Inventory Maps"]}),G.jsx(Vt,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)"},children:"Preserving and documenting our natural heritage"})]})})]})})});return G.jsxs(G.Fragment,{children:[Z(),G.jsx(ar,{sx:{minHeight:"calc(100vh - 64px - 120px)",background:"linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%)",py:6},children:G.jsxs(R2,{maxWidth:"lg",children:[q(),re(),le()]})}),W()]})},vF=({onAccept:e,onDecline:t})=>{const[o,l]=ee.useState(!1);ee.useEffect(()=>{const g=localStorage.getItem("cookieConsent");g?g==="accepted"&&e&&!window.gtag&&e():setTimeout(()=>l(!0),1e3)},[e]);const h=()=>{localStorage.setItem("cookieConsent","accepted"),l(!1),e&&e()},m=()=>{localStorage.setItem("cookieConsent","declined"),l(!1),t&&t()};return o?G.jsx(ar,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:9999,p:2},children:G.jsx(rl,{elevation:6,sx:{maxWidth:"900px",margin:"0 auto",p:3,backgroundColor:"background.paper",borderRadius:2},children:G.jsxs(q_,{spacing:2,children:[G.jsxs(q_,{direction:"row",spacing:2,alignItems:"flex-start",children:[G.jsx(lF,{sx:{color:"primary.main",mt:.5}}),G.jsxs(ar,{sx:{flex:1},children:[G.jsx(Vt,{variant:"h6",gutterBottom:!0,children:"Cookie Notice"}),G.jsxs(Vt,{variant:"body2",color:"text.secondary",children:['We use cookies and similar technologies to help personalize content and provide a better experience. We use Google Analytics to understand how you use our site and improve your experience. By clicking "Accept", you consent to our use of cookies.'," ",G.jsx(G3,{href:"#",onClick:g=>{g.preventDefault()},sx:{color:"primary.main"},children:"Learn more"})]})]})]}),G.jsxs(q_,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"flex-end",children:[G.jsx(Co,{variant:"outlined",onClick:m,sx:{minWidth:"120px"},children:"Decline"}),G.jsx(Co,{variant:"contained",onClick:h,sx:{minWidth:"120px"},children:"Accept"})]})]})})}):null},xF=Ug({palette:{primary:{main:"#2d5016",light:"#4a7c2c",dark:"#1a3009",contrastText:"#ffffff"},secondary:{main:"#6b8e23",light:"#8ba84e",dark:"#4a6316",contrastText:"#ffffff"},success:{main:"#52a447",light:"#7bc96f",dark:"#3d7a33"},info:{main:"#5c8a5f",light:"#87b28a",dark:"#3d5f40"},background:{default:"#f4f7f4",paper:"#ffffff"},text:{primary:"#1a3009",secondary:"#4a6316"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),h1:{fontWeight:700},h2:{fontWeight:600},h3:{fontWeight:600}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8}}},MuiCard:{styleOverrides:{root:{borderRadius:12}}}}});function bF(){const t=new URLSearchParams(window.location.search).get("school"),o=()=>{const h=document.createElement("script");h.async=!0,h.src="https://www.googletagmanager.com/gtag/js?id=G-QQ52P9CTV8",document.head.appendChild(h),h.onload=()=>{window.dataLayer=window.dataLayer||[];function m(){window.dataLayer.push(arguments)}window.gtag=m,m("js",new Date),m("config","G-QQ52P9CTV8",{anonymize_ip:!0,cookie_flags:"SameSite=None;Secure"})}},l=()=>{console.log("User declined cookies")};return G.jsxs(eD,{theme:xF,children:[G.jsx(aD,{}),G.jsx("div",{style:{width:"100%",height:"100vh"},children:t?G.jsx(yF,{}):G.jsx(_F,{})}),G.jsx(vF,{onAccept:o,onDecline:l})]})}X_.createRoot(document.getElementById("root")).render(G.jsx(Eo.StrictMode,{children:G.jsx(bF,{})}));
